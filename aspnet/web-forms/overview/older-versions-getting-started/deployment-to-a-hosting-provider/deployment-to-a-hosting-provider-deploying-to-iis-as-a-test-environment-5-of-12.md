---
uid: web-forms/overview/older-versions-getting-started/deployment-to-a-hosting-provider/deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12
title: 'Implementar una aplicación Web de ASP.NET con SQL Server Compact con Visual Studio o Visual Web Developer: Implementar en IIS como entorno de prueba - 5 de 12 | Microsoft Docs'
author: tdykstra
description: Esta serie de tutoriales muestra cómo implementar un ASP.NET (publicar) proyecto de aplicación web que incluya una base de datos de SQL Server Compact mediante Visual Stu...
ms.author: riande
ms.date: 11/17/2011
ms.assetid: 493b2a66-816c-485c-8315-952ed1085ccc
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deployment-to-a-hosting-provider/deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12
msc.type: authoredcontent
ms.openlocfilehash: ba939012e8fb11a50992eeaef70e8ebf61cea851
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 03/01/2019
ms.locfileid: "57058812"
---
<a name="deploying-an-aspnet-web-application-with-sql-server-compact-using-visual-studio-or-visual-web-developer-deploying-to-iis-as-a-test-environment---5-of-12"></a><span data-ttu-id="9676d-103">Implementar una aplicación Web de ASP.NET con SQL Server Compact con Visual Studio o Visual Web Developer: Implementar en IIS como entorno de prueba - 5 de 12</span><span class="sxs-lookup"><span data-stu-id="9676d-103">Deploying an ASP.NET Web Application with SQL Server Compact using Visual Studio or Visual Web Developer: Deploying to IIS as a Test Environment - 5 of 12</span></span>
====================
<span data-ttu-id="9676d-104">por [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="9676d-104">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

[<span data-ttu-id="9676d-105">Descargar el proyecto de inicio</span><span class="sxs-lookup"><span data-stu-id="9676d-105">Download Starter Project</span></span>](http://code.msdn.microsoft.com/Deploying-an-ASPNET-Web-4e31366b)

> <span data-ttu-id="9676d-106">Esta serie de tutoriales muestra cómo implementar un ASP.NET (publicar) proyecto de aplicación web que incluye una base de datos de SQL Server Compact mediante Visual Studio 2012 RC o Visual Studio Express 2012 RC para Web.</span><span class="sxs-lookup"><span data-stu-id="9676d-106">This series of tutorials shows you how to deploy (publish) an ASP.NET web application project that includes a SQL Server Compact database by using Visual Studio 2012 RC or Visual Studio Express 2012 RC for Web.</span></span> <span data-ttu-id="9676d-107">También puede usar Visual Studio 2010 si instala la actualización de publicación en Web.</span><span class="sxs-lookup"><span data-stu-id="9676d-107">You can also use Visual Studio 2010 if you install the Web Publish Update.</span></span> <span data-ttu-id="9676d-108">Para obtener una introducción a la serie, consulte [el primer tutorial de la serie](deployment-to-a-hosting-provider-introduction-1-of-12.md).</span><span class="sxs-lookup"><span data-stu-id="9676d-108">For an introduction to the series, see [the first tutorial in the series](deployment-to-a-hosting-provider-introduction-1-of-12.md).</span></span>
> 
> <span data-ttu-id="9676d-109">Para ver un tutorial que muestra las características de implementación introducidas después de la versión de Visual Studio 2012 RC, se muestra cómo implementar las ediciones de SQL Server que no sea de SQL Server Compact y se muestra cómo se implementa en Azure App Service Web Apps, consulte [implementación Web de ASP.NET con Visual Studio](../../deployment/visual-studio-web-deployment/introduction.md).</span><span class="sxs-lookup"><span data-stu-id="9676d-109">For a tutorial that shows deployment features introduced after the RC release of Visual Studio 2012, shows how to deploy SQL Server editions other than SQL Server Compact, and shows how to deploy to Azure App Service Web Apps, see [ASP.NET Web Deployment using Visual Studio](../../deployment/visual-studio-web-deployment/introduction.md).</span></span>


## <a name="overview"></a><span data-ttu-id="9676d-110">Información general</span><span class="sxs-lookup"><span data-stu-id="9676d-110">Overview</span></span>

<span data-ttu-id="9676d-111">Este tutorial muestra cómo implementar una aplicación web ASP.NET en IIS en el equipo local.</span><span class="sxs-lookup"><span data-stu-id="9676d-111">This tutorial shows how to deploy an ASP.NET web application to IIS on the local computer.</span></span>

<span data-ttu-id="9676d-112">Al desarrollar una aplicación, por lo general probar ejecutándolo en Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="9676d-112">When you develop an application, you generally test by running it in Visual Studio.</span></span> <span data-ttu-id="9676d-113">De forma predeterminada, esto significa que está usando el servidor de desarrollo de Visual Studio (también conocido como Cassini).</span><span class="sxs-lookup"><span data-stu-id="9676d-113">By default, this means you're using the Visual Studio Development Server (also known as Cassini).</span></span> <span data-ttu-id="9676d-114">El servidor de desarrollo de Visual Studio facilita la prueba durante el desarrollo en Visual Studio, pero no funciona exactamente igual que IIS.</span><span class="sxs-lookup"><span data-stu-id="9676d-114">The Visual Studio Development Server makes it easy to test during development in Visual Studio, but it doesn't work exactly like IIS.</span></span> <span data-ttu-id="9676d-115">Como resultado, es posible que una aplicación se ejecute correctamente al probarlo en Visual Studio, pero producirá un error cuando se implementa en un entorno de hospedaje en IIS.</span><span class="sxs-lookup"><span data-stu-id="9676d-115">As a result, it's possible that an application will run correctly when you test it in Visual Studio, but fail when it's deployed to IIS in a hosting environment.</span></span>

<span data-ttu-id="9676d-116">Puede probar la aplicación de forma más confiable de las siguientes maneras:</span><span class="sxs-lookup"><span data-stu-id="9676d-116">You can test your application more reliably in these ways:</span></span>

1. <span data-ttu-id="9676d-117">Utilice completa de IIS o IIS Express en lugar del servidor de desarrollo de Visual Studio cuando se prueba en Visual Studio durante el desarrollo.</span><span class="sxs-lookup"><span data-stu-id="9676d-117">Use IIS Express or full IIS instead of the Visual Studio Development Server when you test in Visual Studio during development.</span></span> <span data-ttu-id="9676d-118">Este método generalmente emula con más precisión cómo se ejecutará el sitio en IIS.</span><span class="sxs-lookup"><span data-stu-id="9676d-118">This method generally emulates more accurately how your site will run under IIS.</span></span> <span data-ttu-id="9676d-119">Sin embargo, este método no prueba el proceso de implementación ni validar que el resultado del proceso de implementación se ejecutará correctamente.</span><span class="sxs-lookup"><span data-stu-id="9676d-119">However, this method does not test your deployment process or validate that the result of the deployment process will run correctly.</span></span>
2. <span data-ttu-id="9676d-120">Implementar la aplicación en IIS en el equipo de desarrollo utilizando el mismo proceso que usará más adelante para implementarlo en su entorno de producción.</span><span class="sxs-lookup"><span data-stu-id="9676d-120">Deploy the application to IIS on your development computer by using the same process that you'll use later to deploy it to your production environment.</span></span> <span data-ttu-id="9676d-121">Este método valida su proceso de implementación además de validar que la aplicación se ejecutará correctamente en IIS.</span><span class="sxs-lookup"><span data-stu-id="9676d-121">This method validates your deployment process in addition to validating that your application will run correctly under IIS.</span></span>
3. <span data-ttu-id="9676d-122">Implementar la aplicación en un entorno de prueba que sea lo más parecido posible al entorno de producción.</span><span class="sxs-lookup"><span data-stu-id="9676d-122">Deploy the application to a test environment that is as close as possible to your production environment.</span></span> <span data-ttu-id="9676d-123">Puesto que el entorno de producción para estos tutoriales es un proveedor de hospedaje de terceros, el entorno de prueba ideal sería una segunda cuenta con el proveedor de hospedaje.</span><span class="sxs-lookup"><span data-stu-id="9676d-123">Since the production environment for these tutorials is a third-party hosting provider, the ideal test environment would be a second account with the hosting provider.</span></span> <span data-ttu-id="9676d-124">Usaría esta segunda cuenta solo para las pruebas, pero podría configurarse del mismo modo que la cuenta de producción.</span><span class="sxs-lookup"><span data-stu-id="9676d-124">You would use this second account only for testing, but it would be set up the same way as the production account.</span></span>

<span data-ttu-id="9676d-125">Este tutorial muestra los pasos para la opción 2.</span><span class="sxs-lookup"><span data-stu-id="9676d-125">This tutorial shows the steps for option 2.</span></span> <span data-ttu-id="9676d-126">Se proporciona orientación para la opción 3 al final de la [implementarla en el entorno de producción](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12.md) tutorial, y al final de este tutorial se incluyen vínculos a recursos para la opción 1.</span><span class="sxs-lookup"><span data-stu-id="9676d-126">Guidance for option 3 is provided at the end of the [Deploying to the Production Environment](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12.md) tutorial, and at the end of this tutorial there are links to resources for option 1.</span></span>

<span data-ttu-id="9676d-127">Aviso: Si recibe un mensaje de error o algo no funciona conforme avance en el tutorial, no olvide consultar la [página de solución](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12.md).</span><span class="sxs-lookup"><span data-stu-id="9676d-127">Reminder: If you get an error message or something doesn't work as you go through the tutorial, be sure to check the [troubleshooting page](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12.md).</span></span>

## <a name="configuring-the-application-to-run-in-medium-trust"></a><span data-ttu-id="9676d-128">Configuración de la aplicación para ejecutarse en el nivel de confianza medio</span><span class="sxs-lookup"><span data-stu-id="9676d-128">Configuring the Application to Run in Medium Trust</span></span>

<span data-ttu-id="9676d-129">Antes de instalar IIS y la implementación en él, va a cambiar una configuración del archivo Web.config con el fin de hacer que el sitio ejecute más como lo hará en un entorno de hospedaje compartido típico.</span><span class="sxs-lookup"><span data-stu-id="9676d-129">Before installing IIS and deploying to it, you'll change a Web.config file setting in order to make the site run more like it will in a typical shared hosting environment.</span></span>

<span data-ttu-id="9676d-130">Los proveedores de hospedaje, normalmente ejecutan su sitio web *confianza Media*, lo que significa que hay algunas cosas que no se permite hacer.</span><span class="sxs-lookup"><span data-stu-id="9676d-130">Hosting providers typically run your web site in *medium trust*, which means there are some things it is not allowed to do.</span></span> <span data-ttu-id="9676d-131">Por ejemplo, el código de aplicación no puede tener acceso al registro de Windows y no se puede leer o escribir archivos que se encuentran fuera de la jerarquía de carpetas de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="9676d-131">For example, application code can't access the Windows registry and can't read or write files that are outside of your application's folder hierarchy.</span></span> <span data-ttu-id="9676d-132">De forma predeterminada, la aplicación se ejecuta *confianza alta* en el equipo local, lo que significa que la aplicación podría ser capaz de hacer las cosas que produciría un error al implementarla en producción.</span><span class="sxs-lookup"><span data-stu-id="9676d-132">By default your application runs in *high trust* on your local computer, which means that the application might be able to do things that would fail when you deploy it to production.</span></span> <span data-ttu-id="9676d-133">Por lo tanto, para hacer que el entorno de prueba que más reflejan con precisión el entorno de producción, configurará la aplicación se ejecute en el nivel de confianza medio.</span><span class="sxs-lookup"><span data-stu-id="9676d-133">Therefore, to make the test environment more accurately reflect the production environment, you'll configure the application to run in medium trust.</span></span>

<span data-ttu-id="9676d-134">En el archivo Web.config de aplicación, agregue un **confianza** elemento en el **system.web** elemento, como se muestra en este ejemplo.</span><span class="sxs-lookup"><span data-stu-id="9676d-134">In the application Web.config file, add a **trust** element in the **system.web** element, as shown in this example.</span></span>

[!code-xml[Main](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/samples/sample1.xml?highlight=4)]

<span data-ttu-id="9676d-135">La aplicación se ejecutará ahora en el nivel de confianza medio en IIS, incluso en el equipo local.</span><span class="sxs-lookup"><span data-stu-id="9676d-135">The application will now run in medium trust in IIS even on your local computer.</span></span> <span data-ttu-id="9676d-136">Esta configuración le permite detectar cualquier intento de tan pronto como sea posible por código de aplicación para hacer algo que produciría un error en producción.</span><span class="sxs-lookup"><span data-stu-id="9676d-136">This setting enables you to catch as early as possible any attempts by application code to do something that would fail in production.</span></span>

> [!NOTE]
> <span data-ttu-id="9676d-137">Si usa migraciones de Entity Framework Code First, asegúrese de que tiene la versión 5.0 o posterior instalado.</span><span class="sxs-lookup"><span data-stu-id="9676d-137">If you are using Entity Framework Code First Migrations, make sure that you have version 5.0 or later installed.</span></span> <span data-ttu-id="9676d-138">En la versión 4.3 de Entity Framework, las migraciones requiere plena confianza con el fin de actualizar el esquema de base de datos.</span><span class="sxs-lookup"><span data-stu-id="9676d-138">In Entity Framework version 4.3, Migrations requires full trust in order to update the database schema.</span></span>


## <a name="installing-iis-and-web-deploy"></a><span data-ttu-id="9676d-139">Implementación de instalación de IIS y Web</span><span class="sxs-lookup"><span data-stu-id="9676d-139">Installing IIS and Web Deploy</span></span>

<span data-ttu-id="9676d-140">Para implementar en IIS en el equipo de desarrollo, debe tener IIS y Web Deploy instalado.</span><span class="sxs-lookup"><span data-stu-id="9676d-140">To deploy to IIS on your development computer, you must have IIS and Web Deploy installed.</span></span> <span data-ttu-id="9676d-141">No se han incluido en la configuración predeterminada de Windows 7.</span><span class="sxs-lookup"><span data-stu-id="9676d-141">These are not included in the default Windows 7 configuration.</span></span> <span data-ttu-id="9676d-142">Si ya ha instalado IIS y Web Deploy, vaya a la sección siguiente.</span><span class="sxs-lookup"><span data-stu-id="9676d-142">If you have already installed both IIS and Web Deploy, skip to the next section.</span></span>

<span data-ttu-id="9676d-143">Mediante el [instalador de plataforma Web](https://www.microsoft.com/web/downloads/platform.aspx) es la mejor manera de instalar IIS y Web Deploy, porque el instalador de plataforma Web instala una configuración recomendada de IIS e instala automáticamente los requisitos previos para IIS y Web Implementar si es necesario.</span><span class="sxs-lookup"><span data-stu-id="9676d-143">Using the [Web Platform Installer](https://www.microsoft.com/web/downloads/platform.aspx) is the preferred way to install IIS and Web Deploy, because the Web Platform Installer installs a recommended configuration for IIS and it automatically installs the prerequisites for IIS and Web Deploy if necessary.</span></span>

<span data-ttu-id="9676d-144">Para ejecutar el instalador de plataforma Web para instalar IIS y Web Deploy, use el siguiente vínculo.</span><span class="sxs-lookup"><span data-stu-id="9676d-144">To run Web Platform Installer to install IIS and Web Deploy, use the following link.</span></span> <span data-ttu-id="9676d-145">Si ya ha instalado IIS, Web Deploy o cualquiera de sus componentes necesarios, el instalador de plataforma Web instala solo lo que falta.</span><span class="sxs-lookup"><span data-stu-id="9676d-145">If you already have installed IIS, Web Deploy or any of their required components, the Web Platform Installer installs only what is missing.</span></span>

- [<span data-ttu-id="9676d-146">Instalar IIS y Web Deploy mediante WebPI</span><span class="sxs-lookup"><span data-stu-id="9676d-146">Install IIS and Web Deploy using WebPI</span></span>](https://www.microsoft.com/web/gallery/install.aspx?appsxml=&amp;appid=IIS7;ASPNET;NETFramework4;WDeploy)

## <a name="setting-the-default-application-pool-to-net-4"></a><span data-ttu-id="9676d-147">Si se establece el grupo de aplicaciones predeterminado en .NET 4</span><span class="sxs-lookup"><span data-stu-id="9676d-147">Setting the Default Application Pool to .NET 4</span></span>

<span data-ttu-id="9676d-148">Después de instalar IIS, ejecute **IIS Manager** para asegurarse de que la versión 4 de .NET Framework se asigna al grupo de aplicaciones de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="9676d-148">After installing IIS, run **IIS Manager** to make sure that the .NET Framework version 4 is assigned to the default application pool.</span></span>

<span data-ttu-id="9676d-149">Desde el Windows **iniciar** menú, seleccione **ejecutar**, escriba "inetmgr" y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="9676d-149">From the Windows **Start** menu, select **Run**, enter "inetmgr", and then click **OK**.</span></span> <span data-ttu-id="9676d-150">(Si la **ejecutar** comando no está en su **iniciar** menú, puede presionar la tecla Windows y R para abrirlo.</span><span class="sxs-lookup"><span data-stu-id="9676d-150">(If the **Run** command is not in your **Start** menu, you can press the Windows Key and R to open it.</span></span> <span data-ttu-id="9676d-151">O haga clic en la barra de tareas, haga clic en **propiedades**, seleccione el **menú Inicio** , haga clic **personalizar**y seleccione **ejecutar comando**.)</span><span class="sxs-lookup"><span data-stu-id="9676d-151">Or right-click the taskbar, click **Properties**, select the **Start Menu** tab, click **Customize**, and select **Run command**.)</span></span>

<span data-ttu-id="9676d-152">En el **conexiones** panel, expanda el nodo del servidor y seleccione **grupos de aplicaciones**.</span><span class="sxs-lookup"><span data-stu-id="9676d-152">In the **Connections** pane, expand the server node and select **Application Pools**.</span></span> <span data-ttu-id="9676d-153">En el **grupos de aplicaciones** panel, si **DefaultAppPool** está asignado a la versión de .NET framework 4 como se muestra en la ilustración siguiente, vaya a la sección siguiente.</span><span class="sxs-lookup"><span data-stu-id="9676d-153">In the **Application Pools** pane, if **DefaultAppPool** is assigned to the .NET framework version 4 as in the following illustration, skip to the next section.</span></span>

<span data-ttu-id="9676d-154">[![Inetmgr_showing_4.0_app_pools](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image2.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="9676d-154">[![Inetmgr_showing_4.0_app_pools](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image2.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image1.png)</span></span>

<span data-ttu-id="9676d-155">Si ve solo dos grupos de aplicaciones y ambos se establecen en .NET Framework 2.0, debe instalar el 4 de ASP.NET en IIS:</span><span class="sxs-lookup"><span data-stu-id="9676d-155">If you see only two application pools and both of them are set to the .NET Framework 2.0, you have to install ASP.NET 4 in IIS:</span></span>

- <span data-ttu-id="9676d-156">Abra una ventana del símbolo del sistema con el botón secundario **símbolo** en el Windows **iniciar** menú y seleccionando **ejecutar como administrador**.</span><span class="sxs-lookup"><span data-stu-id="9676d-156">Open a command prompt window by right-clicking **Command Prompt** in the Windows **Start** menu and selecting **Run as Administrator**.</span></span> <span data-ttu-id="9676d-157">A continuación, ejecute [aspnet\_regiis.exe](https://msdn.microsoft.com/library/k6h9cz8h.aspx) para instalar ASP.NET 4 en IIS, mediante los siguientes comandos.</span><span class="sxs-lookup"><span data-stu-id="9676d-157">Then run [aspnet\_regiis.exe](https://msdn.microsoft.com/library/k6h9cz8h.aspx) to install ASP.NET 4 in IIS, using the following commands.</span></span> <span data-ttu-id="9676d-158">(En sistemas de 64 bits, reemplace "Framework" con "Framework64").</span><span class="sxs-lookup"><span data-stu-id="9676d-158">(In 64-bit systems, replace "Framework" with "Framework64".)</span></span>

    [!code-console[Main](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/samples/sample2.cmd)]

    <span data-ttu-id="9676d-159">[![aspnet_regiis_installing_ASP.NET_4](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image4.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="9676d-159">[![aspnet_regiis_installing_ASP.NET_4](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image4.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image3.png)</span></span>

    <span data-ttu-id="9676d-160">Este comando crea nuevos grupos de aplicaciones para .NET Framework 4, pero aún así se establecerá el grupo de aplicaciones predeterminado a 2.0.</span><span class="sxs-lookup"><span data-stu-id="9676d-160">This command creates new application pools for the .NET Framework 4, but the default application pool will still be set to 2.0.</span></span> <span data-ttu-id="9676d-161">Implementará una aplicación que tiene como destino .NET 4 para ese grupo de aplicaciones, por lo que debe cambiar el grupo de aplicaciones en .NET 4.</span><span class="sxs-lookup"><span data-stu-id="9676d-161">You'll be deploying an application that targets .NET 4 to that application pool, so you have to change the application pool to .NET 4.</span></span>

<span data-ttu-id="9676d-162">Si ha cerrado **IIS Manager**, ejecútelo de nuevo, expanda el nodo del servidor y haga clic en **grupos de aplicaciones** para mostrar el **grupos de aplicaciones** nuevo panel.</span><span class="sxs-lookup"><span data-stu-id="9676d-162">If you closed **IIS Manager**, run it again, expand the server node, and click **Application Pools** to display the **Application Pools** pane again.</span></span>

<span data-ttu-id="9676d-163">En el **grupos de aplicaciones** panel, haga clic en **DefaultAppPool**y, a continuación, en el **acciones** panel, haga clic **configuración básica**.</span><span class="sxs-lookup"><span data-stu-id="9676d-163">In the **Application Pools** pane, click **DefaultAppPool**, and then in the **Actions** pane click **Basic Settings**.</span></span>

<span data-ttu-id="9676d-164">[![Inetmgr_selecting_Basic_Settings_for_app_pool](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image6.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="9676d-164">[![Inetmgr_selecting_Basic_Settings_for_app_pool](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image6.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image5.png)</span></span>

<span data-ttu-id="9676d-165">En el **Modificar grupo de aplicaciones** cuadro de diálogo, cambie **versión de .NET Framework** a **.NET Framework v4.0.30319** y haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="9676d-165">In the **Edit Application Pool** dialog box, change **.NET Framework version** to **.NET Framework v4.0.30319** and click **OK**.</span></span>

<span data-ttu-id="9676d-166">[![Selecting_.NET_4_for_DefaultAppPool](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image8.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="9676d-166">[![Selecting_.NET_4_for_DefaultAppPool](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image8.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image7.png)</span></span>

<span data-ttu-id="9676d-167">Ahora está listo para publicar en IIS.</span><span class="sxs-lookup"><span data-stu-id="9676d-167">You are now ready to publish to IIS.</span></span>

## <a name="publishing-to-iis"></a><span data-ttu-id="9676d-168">Publicar en IIS</span><span class="sxs-lookup"><span data-stu-id="9676d-168">Publishing to IIS</span></span>

<span data-ttu-id="9676d-169">Hay varias maneras puede implementar mediante Visual Studio 2010 y Web Deploy:</span><span class="sxs-lookup"><span data-stu-id="9676d-169">There are several ways you can deploy using Visual Studio 2010 and Web Deploy:</span></span>

- <span data-ttu-id="9676d-170">Publicar el uso de Visual Studio con un solo clic.</span><span class="sxs-lookup"><span data-stu-id="9676d-170">Use Visual Studio one-click publish.</span></span>
- <span data-ttu-id="9676d-171">Crear un *paquete de implementación* e instalarlo mediante la UI del Administrador IIS.</span><span class="sxs-lookup"><span data-stu-id="9676d-171">Create a *deployment package* and install it using the IIS Manager UI.</span></span> <span data-ttu-id="9676d-172">El paquete de implementación consta de un *.zip* archivo que contiene todos los archivos y los metadatos necesarios para instalar un sitio en IIS.</span><span class="sxs-lookup"><span data-stu-id="9676d-172">The deployment package consists of a *.zip* file that contains all the files and metadata needed to install a site in IIS.</span></span>
- <span data-ttu-id="9676d-173">Crear un paquete de implementación e instalarlo mediante la línea de comandos.</span><span class="sxs-lookup"><span data-stu-id="9676d-173">Create a deployment package and install it using the command line.</span></span>

<span data-ttu-id="9676d-174">El proceso que llevamos a cabo en los tutoriales anteriores para configurar Visual Studio para automatizar las tareas de implementación se aplica a todos estos tres métodos.</span><span class="sxs-lookup"><span data-stu-id="9676d-174">The process you went through in the previous tutorials to set up Visual Studio to automate deployment tasks applies to all of these three methods.</span></span> <span data-ttu-id="9676d-175">En estos tutoriales se usará el primero de estos métodos.</span><span class="sxs-lookup"><span data-stu-id="9676d-175">In these tutorials you'll use the first of these methods.</span></span> <span data-ttu-id="9676d-176">Para obtener información sobre el uso de paquetes de implementación, consulte [mapa de contenido de implementación ASP.NET](https://msdn.microsoft.com/library/bb386521.aspx).</span><span class="sxs-lookup"><span data-stu-id="9676d-176">For information about using deployment packages, see [ASP.NET Deployment Content Map](https://msdn.microsoft.com/library/bb386521.aspx).</span></span>

<span data-ttu-id="9676d-177">Antes de la publicación, asegúrese de que se está ejecutando Visual Studio en modo de administrador.</span><span class="sxs-lookup"><span data-stu-id="9676d-177">Before publishing, make sure that you are running Visual Studio in administrator mode.</span></span> <span data-ttu-id="9676d-178">(En el de Windows 7 **iniciar** menú, haga clic en el icono de la versión de Visual Studio que está usando y seleccione **ejecutar como administrador**.) Modo de administrador es necesario para publicar solo cuando va a publicar en IIS en el equipo local.</span><span class="sxs-lookup"><span data-stu-id="9676d-178">(In the Windows 7 **Start** menu, right-click the icon for the version of Visual Studio you're using and select **Run as Administrator**.) Administrator mode is required for publishing only when you are publishing to IIS on the local computer.</span></span>

<span data-ttu-id="9676d-179">En **el Explorador de soluciones**, haga clic en el proyecto ContosoUniversity (no el proyecto ContosoUniversity.DAL) y seleccione **publicar**.</span><span class="sxs-lookup"><span data-stu-id="9676d-179">In **Solution Explorer**, right-click the ContosoUniversity project (not the ContosoUniversity.DAL project) and select **Publish**.</span></span>

<span data-ttu-id="9676d-180">El **publicación Web** aparece el asistente.</span><span class="sxs-lookup"><span data-stu-id="9676d-180">The **Publish Web** wizard appears.</span></span>

![Publish_Web_wizard_Profile_tab](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image9.png)

<span data-ttu-id="9676d-182">En la lista desplegable, seleccione  **&lt;nuevo... &gt;**.</span><span class="sxs-lookup"><span data-stu-id="9676d-182">In the drop-down list, select **&lt;New...&gt;**.</span></span>

<span data-ttu-id="9676d-183">En el **nuevo perfil** cuadro de diálogo, escriba "Test" y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="9676d-183">In the **New Profile** dialog box, enter "Test", and then click **OK**.</span></span>

![Cuadro de diálogo Nuevo perfil](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image10.png)

<span data-ttu-id="9676d-185">Este nombre es que el mismo que el nodo central de la Web.Test.config transformar el archivo que creó anteriormente.</span><span class="sxs-lookup"><span data-stu-id="9676d-185">This name is the same as the middle node of the Web.Test.config transform file that you created earlier.</span></span> <span data-ttu-id="9676d-186">Esta correspondencia es lo que hace que las transformaciones Web.Test.config aplicarse cuando se publica mediante este perfil.</span><span class="sxs-lookup"><span data-stu-id="9676d-186">This correspondence is what causes the Web.Test.config transformations to be applied when you publish by using this profile.</span></span>

<span data-ttu-id="9676d-187">El asistente avanza automáticamente a la **conexión** ficha.</span><span class="sxs-lookup"><span data-stu-id="9676d-187">The wizard automatically advances to the **Connection** tab.</span></span>

<span data-ttu-id="9676d-188">En el **dirección URL del servicio** , escriba *localhost*.</span><span class="sxs-lookup"><span data-stu-id="9676d-188">In the **Service URL** box, enter *localhost*.</span></span>

<span data-ttu-id="9676d-189">En el **sitio o aplicación** , escriba *Default Web Site/ContosoUniversity*.</span><span class="sxs-lookup"><span data-stu-id="9676d-189">In the **Site/application** box, enter *Default Web Site/ContosoUniversity*.</span></span>

<span data-ttu-id="9676d-190">En el **dirección URL de destino** , escriba `http://localhost/ContosoUniversity`.</span><span class="sxs-lookup"><span data-stu-id="9676d-190">In the **Destination URL** box, enter `http://localhost/ContosoUniversity`.</span></span>

<span data-ttu-id="9676d-191">El **dirección URL de destino** configuración no es necesaria.</span><span class="sxs-lookup"><span data-stu-id="9676d-191">The **Destination URL** setting isn't required.</span></span> <span data-ttu-id="9676d-192">Cuando Visual Studio termine de implementar la aplicación, se abre automáticamente el explorador predeterminado para esta dirección URL.</span><span class="sxs-lookup"><span data-stu-id="9676d-192">When Visual Studio finishes deploying the application, it automatically opens your default browser to this URL.</span></span> <span data-ttu-id="9676d-193">Si no desea que el explorador para abrir automáticamente después de la implementación, deje este cuadro en blanco.</span><span class="sxs-lookup"><span data-stu-id="9676d-193">If you don't want the browser to open automatically after deployment, leave this box blank.</span></span>

![Publish_Web_wizard_Connection_tab_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image11.png)

<span data-ttu-id="9676d-195">Haga clic en **validar conexión** para comprobar que la configuración es correcta y puede conectarse a IIS en el equipo local.</span><span class="sxs-lookup"><span data-stu-id="9676d-195">Click **Validate Connection** to verify that the settings are correct and you can connect to IIS on the local computer.</span></span>

<span data-ttu-id="9676d-196">Una marca de verificación verde comprueba que la conexión es correcta.</span><span class="sxs-lookup"><span data-stu-id="9676d-196">A green check mark verifies that the connection is successful.</span></span>

![Publish_Web_wizard_Connection_tab_validated](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image12.png)

<span data-ttu-id="9676d-198">Haga clic en **siguiente** para avanzar a la **configuración** ficha.</span><span class="sxs-lookup"><span data-stu-id="9676d-198">Click **Next** to advance to the **Settings** tab.</span></span>

<span data-ttu-id="9676d-199">El **configuración** cuadro desplegable especifica la configuración de compilación para implementar.</span><span class="sxs-lookup"><span data-stu-id="9676d-199">The **Configuration** drop-down box specifies the build configuration to deploy.</span></span> <span data-ttu-id="9676d-200">El valor predeterminado es la versión, que es lo que desea.</span><span class="sxs-lookup"><span data-stu-id="9676d-200">The default value is Release, which is what you want.</span></span>

<span data-ttu-id="9676d-201">Deje el **quitar archivos adicionales en destino** casilla desactivada.</span><span class="sxs-lookup"><span data-stu-id="9676d-201">Leave the **Remove additional files at destination** check box cleared.</span></span> <span data-ttu-id="9676d-202">Puesto que es la primera implementación, no habrá ningún archivo en la carpeta de destino aún.</span><span class="sxs-lookup"><span data-stu-id="9676d-202">Since this is your first deployment, there won't be any files in the destination folder yet.</span></span>

<span data-ttu-id="9676d-203">En el **bases de datos** sección, escriba el siguiente valor en el cuadro cadena de conexión para **SchoolContext**:</span><span class="sxs-lookup"><span data-stu-id="9676d-203">In the **Databases** section, enter the following value in the connection string box for **SchoolContext**:</span></span>

[!code-console[Main](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/samples/sample3.cmd)]

<span data-ttu-id="9676d-204">El proceso de implementación, se colocará esta cadena de conexión en el archivo Web.config implementado porque **usar esta cadena de conexión en tiempo de ejecución** está seleccionada.</span><span class="sxs-lookup"><span data-stu-id="9676d-204">The deployment process will put this connection string in the deployed Web.config file because **Use this connection string at runtime** is selected.</span></span>

<span data-ttu-id="9676d-205">También en **SchoolContext**, seleccione **aplicar Code First Migrations**.</span><span class="sxs-lookup"><span data-stu-id="9676d-205">Also under **SchoolContext**, select **Apply Code First Migrations**.</span></span> <span data-ttu-id="9676d-206">Esta opción hace que el proceso de implementación configurar el archivo Web.config implementado para especificar el `MigrateDatabaseToLatestVersion` inicializador.</span><span class="sxs-lookup"><span data-stu-id="9676d-206">This option causes the deployment process to configure the deployed Web.config file to specify the `MigrateDatabaseToLatestVersion` initializer.</span></span> <span data-ttu-id="9676d-207">Este inicializador actualiza automáticamente la base de datos a la versión más reciente cuando la aplicación tiene acceso a la base de datos por primera vez después de la implementación.</span><span class="sxs-lookup"><span data-stu-id="9676d-207">This initializer automatically updates the database to the latest version when the application accesses the database for the first time after deployment.</span></span>

<span data-ttu-id="9676d-208">En el cuadro cadena de conexión para **DefaultConnection**, escriba el siguiente valor:</span><span class="sxs-lookup"><span data-stu-id="9676d-208">In the connection string box for **DefaultConnection**, enter the following value:</span></span>

[!code-console[Main](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/samples/sample4.cmd)]

<span data-ttu-id="9676d-209">Deje **Actualizar base de datos** desactivada.</span><span class="sxs-lookup"><span data-stu-id="9676d-209">Leave **Update database** cleared.</span></span> <span data-ttu-id="9676d-210">La base de datos de pertenencia se va a implementar copiando el archivo .sdf en aplicación\_datos y no desea que el proceso de implementación que hacer nada más con esta base de datos.</span><span class="sxs-lookup"><span data-stu-id="9676d-210">The membership database will be deployed by copying the .sdf file in App\_Data, and you don't want the deployment process to do anything else with this database.</span></span>

![Publish_Web_wizard_Settings_tab_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image13.png)

<span data-ttu-id="9676d-212">Haga clic en **siguiente** para avanzar a la **Preview** ficha.</span><span class="sxs-lookup"><span data-stu-id="9676d-212">Click **Next** to advance to the **Preview** tab.</span></span>

<span data-ttu-id="9676d-213">En el **Preview** , haga clic **iniciar vista previa** para ver una lista de los archivos que se va a copiar.</span><span class="sxs-lookup"><span data-stu-id="9676d-213">In the **Preview** tab, click **Start Preview** to see a list of the files that will be copied.</span></span>

![Publish_Web_wizard_Preview_tab_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image14.png)

![Publish_Web_wizard_Preview_tab_Test_with_file_list](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image15.png)

<span data-ttu-id="9676d-216">Haga clic en **Publicar**.</span><span class="sxs-lookup"><span data-stu-id="9676d-216">Click **Publish**.</span></span>

<span data-ttu-id="9676d-217">Si Visual Studio no está en modo de administrador, puede aparecer un mensaje de error que indica un error de permisos.</span><span class="sxs-lookup"><span data-stu-id="9676d-217">If Visual Studio is not in administrator mode, you might get an error message that indicates a permissions error.</span></span> <span data-ttu-id="9676d-218">En ese caso, cierre Visual Studio, abrirlo en modo de administrador y, intente volver a publicar.</span><span class="sxs-lookup"><span data-stu-id="9676d-218">In that case, close Visual Studio, open it in administrator mode, and try to publish again.</span></span>

<span data-ttu-id="9676d-219">Si Visual Studio está en modo de administrador, el **salida** informes correcta de la ventana de compilación y publicación.</span><span class="sxs-lookup"><span data-stu-id="9676d-219">If Visual Studio is in administrator mode, the **Output** window reports successful build and publish.</span></span>

![Output_window_publish_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image16.png)

<span data-ttu-id="9676d-221">El explorador se abre automáticamente en la página principal de la Universidad de Contoso que se ejecutan en IIS en el equipo local.</span><span class="sxs-lookup"><span data-stu-id="9676d-221">The browser automatically opens to the Contoso University Home page running in IIS on the local computer.</span></span>

<span data-ttu-id="9676d-222">[![Home_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image18.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="9676d-222">[![Home_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image18.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image17.png)</span></span>

## <a name="testing-in-the-test-environment"></a><span data-ttu-id="9676d-223">Las pruebas en el entorno de prueba</span><span class="sxs-lookup"><span data-stu-id="9676d-223">Testing in the Test Environment</span></span>

<span data-ttu-id="9676d-224">Tenga en cuenta que el indicador de entorno muestra "(prueba)" en lugar de "(desarrollo)", que muestra que el *Web.config* transformación para el indicador de entorno fue correcta.</span><span class="sxs-lookup"><span data-stu-id="9676d-224">Notice that the environment indicator shows "(Test)" instead of "(Dev)", which shows that the *Web.config* transformation for the environment indicator was successful.</span></span>

<span data-ttu-id="9676d-225">[![Home_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image20.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="9676d-225">[![Home_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image20.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image19.png)</span></span>

<span data-ttu-id="9676d-226">Ejecute el **estudiantes** página para comprobar que la base de datos implementada no tiene ningún estudiante.</span><span class="sxs-lookup"><span data-stu-id="9676d-226">Run the **Students** page to verify that the deployed database has no students.</span></span> <span data-ttu-id="9676d-227">Cuando se selecciona esta página puede tardar unos minutos en cargarse porque Code First crea la base de datos y, a continuación, se ejecuta el `Seed` método.</span><span class="sxs-lookup"><span data-stu-id="9676d-227">When you select this page it may take a few minutes to load because Code First creates the database and then runs the `Seed` method.</span></span> <span data-ttu-id="9676d-228">(No hace cuando estaban en la página principal porque la aplicación no intenta tener acceso a la base de datos todavía.)</span><span class="sxs-lookup"><span data-stu-id="9676d-228">(It didn't do that when you were on the home page because the application didn't try to access the database yet.)</span></span>

<span data-ttu-id="9676d-229">[![Students_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image22.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="9676d-229">[![Students_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image22.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image21.png)</span></span>

<span data-ttu-id="9676d-230">Ejecute el **instructores** página para comprobar que Code First propagado la base de datos con datos de un instructor:</span><span class="sxs-lookup"><span data-stu-id="9676d-230">Run the **Instructors** page to verify that Code First seeded the database with instructor data:</span></span>

<span data-ttu-id="9676d-231">[![Instructors_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image24.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="9676d-231">[![Instructors_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image24.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image23.png)</span></span>

<span data-ttu-id="9676d-232">Seleccione **agregar estudiantes** desde el **estudiantes** menú, agregue un estudiante y, a continuación, ver el alumno nuevo en el **estudiantes** página para comprobar que puede escribir correctamente en la base de datos :</span><span class="sxs-lookup"><span data-stu-id="9676d-232">Select **Add Students** from the **Students** menu, add a student, and then view the new student in the **Students** page to verify that you can successfully write to the database:</span></span>

<span data-ttu-id="9676d-233">[![Add_Students_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image26.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="9676d-233">[![Add_Students_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image26.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image25.png)</span></span>

<span data-ttu-id="9676d-234">[![Students_page_with_new_student_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image28.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="9676d-234">[![Students_page_with_new_student_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image28.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image27.png)</span></span>

<span data-ttu-id="9676d-235">Desde el **cursos** menú, seleccione **actualización créditos**.</span><span class="sxs-lookup"><span data-stu-id="9676d-235">From the **Courses** menu, select **Update Credits**.</span></span> <span data-ttu-id="9676d-236">El **actualización créditos** página requiere permisos de administrador, por lo que la **en el registro** se muestra la página.</span><span class="sxs-lookup"><span data-stu-id="9676d-236">The **Update Credits** page requires administrator permissions, so the **Log In** page is displayed.</span></span> <span data-ttu-id="9676d-237">Escriba las credenciales de cuenta de administrador que creó anteriormente ("admin" y "Pa$ w0rd").</span><span class="sxs-lookup"><span data-stu-id="9676d-237">Enter the administrator account credentials that you created earlier ("admin" and "Pas$w0rd").</span></span> <span data-ttu-id="9676d-238">El **actualización créditos** página se muestra, que comprueba que la cuenta de administrador que creó en el tutorial anterior se implementó correctamente en el entorno de prueba.</span><span class="sxs-lookup"><span data-stu-id="9676d-238">The **Update Credits** page is displayed, which verifies that the administrator account that you created in the previous tutorial was correctly deployed to the test environment.</span></span>

<span data-ttu-id="9676d-239">[![Log_In_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image30.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="9676d-239">[![Log_In_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image30.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image29.png)</span></span>

<span data-ttu-id="9676d-240">[![Update_Credits_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image32.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="9676d-240">[![Update_Credits_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image32.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image31.png)</span></span>

<span data-ttu-id="9676d-241">Compruebe que un *Elmah* carpeta existe con el archivo de marcador de posición en él.</span><span class="sxs-lookup"><span data-stu-id="9676d-241">Verify that an *Elmah* folder exists with only the placeholder file in it.</span></span>

<span data-ttu-id="9676d-242">[![Elmah_folder_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image34.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="9676d-242">[![Elmah_folder_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image34.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image33.png)</span></span>

<a id="efcfmigrations"></a>

## <a name="reviewing-the-automatic-webconfig-changes-for-code-first-migrations"></a><span data-ttu-id="9676d-243">Revisar los cambios de Web.config automática para migraciones de Code First</span><span class="sxs-lookup"><span data-stu-id="9676d-243">Reviewing the Automatic Web.config Changes for Code First Migrations</span></span>

<span data-ttu-id="9676d-244">Abra el *Web.config* archivo en la aplicación implementada en *C:\inetpub\wwwroot\ContosoUniversity* y puede ver que el proceso de implementación configurado migraciones de Code First para automáticamente actualizar la base de datos a la versión más reciente.</span><span class="sxs-lookup"><span data-stu-id="9676d-244">Open the *Web.config* file in the deployed application at *C:\inetpub\wwwroot\ContosoUniversity* and you can see where the deployment process configured Code First Migrations to automatically update the database to the latest version.</span></span>

![](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image35.png)

<span data-ttu-id="9676d-245">El proceso de implementación también crea una nueva cadena de conexión para migraciones de Code First exclusivamente actualizar el esquema de base de datos:</span><span class="sxs-lookup"><span data-stu-id="9676d-245">The deployment process also created a new connection string for Code First Migrations to use exclusively for updating the database schema:</span></span>

![DatabasePublish_connection_string](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image36.png)

<span data-ttu-id="9676d-247">Esta cadena de conexión adicionales le permite especificar una cuenta de usuario para las actualizaciones del esquema de base de datos y una cuenta de usuario diferente para el acceso a datos de aplicación.</span><span class="sxs-lookup"><span data-stu-id="9676d-247">This additional connection string enables you to specify one user account for database schema updates, and a different user account for application data access.</span></span> <span data-ttu-id="9676d-248">Por ejemplo, podría asignar la base de datos\_rol de propietario para migraciones de Code First y db\_datareader y db\_datawriter roles a la aplicación.</span><span class="sxs-lookup"><span data-stu-id="9676d-248">For example, you could assign the db\_owner role to Code First Migrations, and db\_datareader and db\_datawriter roles to the application.</span></span> <span data-ttu-id="9676d-249">Se trata de un patrón común de defensa en profundidad que impide que el código potencialmente malintencionado en la aplicación modifiquen el esquema de base de datos.</span><span class="sxs-lookup"><span data-stu-id="9676d-249">This is a common defense-in-depth pattern that prevents potentially malicious code in the application from changing the database schema.</span></span> <span data-ttu-id="9676d-250">(Por ejemplo, esto puede suceder en un ataque de inyección SQL.) No se utiliza este patrón por estos tutoriales.</span><span class="sxs-lookup"><span data-stu-id="9676d-250">(For example, this might happen in a successful SQL injection attack.) This pattern is not used by these tutorials.</span></span> <span data-ttu-id="9676d-251">No se aplica a SQL Server Compact y no se aplica al migrar a SQL Server en un tutorial más adelante en esta serie.</span><span class="sxs-lookup"><span data-stu-id="9676d-251">It does not apply to SQL Server Compact, and it does not apply when you migrate to SQL Server in a later tutorial in this series.</span></span> <span data-ttu-id="9676d-252">El sitio Cytanium ofrece una sola cuenta de usuario para tener acceso a la base de datos de SQL Server que se crea en Cytanium.</span><span class="sxs-lookup"><span data-stu-id="9676d-252">The Cytanium site offers just one user account for accessing the SQL Server database that you create at Cytanium.</span></span> <span data-ttu-id="9676d-253">Si es capaz de implementar este patrón en su escenario, puede hacerlo mediante los pasos siguientes:</span><span class="sxs-lookup"><span data-stu-id="9676d-253">If you are able to implement this pattern in your scenario, you can do it by performing the following steps:</span></span>

1. <span data-ttu-id="9676d-254">En el **configuración** pestaña de la **publicación Web** asistente, escriba la cadena de conexión que especifica un usuario con permisos de actualización de esquema de base de datos completa y desactive el **usar esta cadena de conexión en tiempo de ejecución** casilla de verificación.</span><span class="sxs-lookup"><span data-stu-id="9676d-254">In the **Settings** tab of the **Publish Web** wizard, enter the connection string that specifies a user with full database schema update permissions, and clear the **Use this connection string at runtime** check box.</span></span> <span data-ttu-id="9676d-255">En el archivo Web.config implementado, esto se convierte en el `DatabasePublish` cadena de conexión.</span><span class="sxs-lookup"><span data-stu-id="9676d-255">In the deployed Web.config file, this becomes the `DatabasePublish` connection string.</span></span>
2. <span data-ttu-id="9676d-256">Crear una transformación del archivo Web.config para la cadena de conexión que desea que la aplicación para usar en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="9676d-256">Create a Web.config file transformation for the connection string that you want the application to use at run time.</span></span>

<span data-ttu-id="9676d-257">Ha implementado la aplicación en IIS en el equipo de desarrollo y haya probado.</span><span class="sxs-lookup"><span data-stu-id="9676d-257">You have now deployed your application to IIS on your development computer and tested it there.</span></span> <span data-ttu-id="9676d-258">Esto comprueba que el proceso de implementación copia el contenido de la aplicación en la ubicación correcta (excepto los archivos que va a implementar), y también configurar ese Web Deploy a IIS correctamente durante la implementación.</span><span class="sxs-lookup"><span data-stu-id="9676d-258">This verifies that the deployment process copied the application's content to the right location (excluding the files that you did not want to deploy), and also that Web Deploy configured IIS correctly during deployment.</span></span> <span data-ttu-id="9676d-259">En el siguiente tutorial, va a ejecutar una prueba más que busca una tarea de implementación que aún no se han realizado: establecer permisos de carpeta en el *Elmah* carpeta.</span><span class="sxs-lookup"><span data-stu-id="9676d-259">In the next tutorial, you'll run one more test that finds a deployment task that has not yet been done: setting folder permissions on the *Elmah* folder.</span></span>

## <a name="more-information"></a><span data-ttu-id="9676d-260">Más información</span><span class="sxs-lookup"><span data-stu-id="9676d-260">More Information</span></span>

<span data-ttu-id="9676d-261">Para obtener información sobre la ejecución de IIS o IIS Express en Visual Studio, consulte los siguientes recursos:</span><span class="sxs-lookup"><span data-stu-id="9676d-261">For information about running IIS or IIS Express in Visual Studio, see the following resources:</span></span>

- <span data-ttu-id="9676d-262">[Introducción a IIS Express](https://www.iis.net/learn/extensions/introduction-to-iis-express/iis-express-overview) en el sitio de IIS.net.</span><span class="sxs-lookup"><span data-stu-id="9676d-262">[IIS Express Overview](https://www.iis.net/learn/extensions/introduction-to-iis-express/iis-express-overview) on the IIS.net site.</span></span>
- <span data-ttu-id="9676d-263">[Introducción a IIS Express](https://weblogs.asp.net/scottgu/archive/2010/06/28/introducing-iis-express.aspx) en el blog de Scott Guthrie.</span><span class="sxs-lookup"><span data-stu-id="9676d-263">[Introducing IIS Express](https://weblogs.asp.net/scottgu/archive/2010/06/28/introducing-iis-express.aspx) on Scott Guthrie's blog.</span></span>
- <span data-ttu-id="9676d-264">[Cómo: Especificar el servidor Web para proyectos Web en Visual Studio](https://msdn.microsoft.com/library/ms178108.aspx).</span><span class="sxs-lookup"><span data-stu-id="9676d-264">[How to: Specify the Web Server for Web Projects in Visual Studio](https://msdn.microsoft.com/library/ms178108.aspx).</span></span>
- <span data-ttu-id="9676d-265">[Principales diferencias entre IIS y el servidor de desarrollo de ASP.NET](../deploying-web-site-projects/core-differences-between-iis-and-the-asp-net-development-server-cs.md) en el sitio de ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="9676d-265">[Core Differences Between IIS and the ASP.NET Development Server](../deploying-web-site-projects/core-differences-between-iis-and-the-asp-net-development-server-cs.md) on the ASP.NET site.</span></span>
- <span data-ttu-id="9676d-266">[Probar su aplicación de formularios de Web en IIS 7 o ASP.NET MVC en 30 segundos](https://blogs.msdn.com/b/rickandy/archive/2011/04/22/test-you-asp-net-mvc-or-webforms-application-on-iis-7-in-30-seconds.aspx) en el blog de Rick Anderson.</span><span class="sxs-lookup"><span data-stu-id="9676d-266">[Test your ASP.NET MVC or Web Forms Application on IIS 7 in 30 seconds](https://blogs.msdn.com/b/rickandy/archive/2011/04/22/test-you-asp-net-mvc-or-webforms-application-on-iis-7-in-30-seconds.aspx) on Rick Anderson's blog.</span></span> <span data-ttu-id="9676d-267">Esta entrada proporciona ejemplos de por qué las pruebas con el servidor de desarrollo de Visual Studio (Cassini) no es tan confiable como las pruebas en IIS Express, y por qué las pruebas en IIS Express no es tan confiable como las pruebas en IIS.</span><span class="sxs-lookup"><span data-stu-id="9676d-267">This entry provides examples of why testing with the Visual Studio Development Server (Cassini) is not as reliable as testing in IIS Express, and why testing in IIS Express is not as reliable as testing in IIS.</span></span>

<span data-ttu-id="9676d-268">Para obtener información acerca de los problemas que puede surgir cuando se ejecuta la aplicación en el nivel de confianza medio, consulte [de hospedaje de aplicaciones de ASP.NET en el nivel de confianza medio](http://www.4guysfromrolla.com/articles/100307-1.aspx) en los chicos del sitio Rolla 4.</span><span class="sxs-lookup"><span data-stu-id="9676d-268">For information about what issues might arise when your application runs in medium trust, see [Hosting ASP.NET Applications in Medium Trust](http://www.4guysfromrolla.com/articles/100307-1.aspx) on the 4 Guys from Rolla site.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="9676d-269">[Anterior](deployment-to-a-hosting-provider-configuring-project-properties-4-of-12.md)
> [Siguiente](deployment-to-a-hosting-provider-setting-folder-permissions-6-of-12.md)</span><span class="sxs-lookup"><span data-stu-id="9676d-269">[Previous](deployment-to-a-hosting-provider-configuring-project-properties-4-of-12.md)
[Next](deployment-to-a-hosting-provider-setting-folder-permissions-6-of-12.md)</span></span>
