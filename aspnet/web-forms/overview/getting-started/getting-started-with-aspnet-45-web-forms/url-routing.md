---
uid: web-forms/overview/getting-started/getting-started-with-aspnet-45-web-forms/url-routing
title: Enrutamiento de direcciones URL | Microsoft Docs
author: Erikre
description: Esta serie de tutoriales le enseñará los aspectos básicos de la creación de una aplicación de formularios Web Forms ASP.NET con ASP.NET 4,5 y Microsoft Visual Studio Express 2013 para nosotros...
ms.author: riande
ms.date: 09/08/2014
ms.assetid: 4f4bf092-c400-471f-a876-78fda0417890
msc.legacyurl: /web-forms/overview/getting-started/getting-started-with-aspnet-45-web-forms/url-routing
msc.type: authoredcontent
ms.openlocfilehash: 66b727b69ca4f9a3d35b67f492f9a554146e09ef
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 03/06/2020
ms.locfileid: "78474817"
---
# <a name="url-routing"></a><span data-ttu-id="dd6e2-103">Enrutamiento de direcciones URL</span><span class="sxs-lookup"><span data-stu-id="dd6e2-103">URL Routing</span></span>

<span data-ttu-id="dd6e2-104">por [Erik Reitan](https://github.com/Erikre)</span><span class="sxs-lookup"><span data-stu-id="dd6e2-104">by [Erik Reitan](https://github.com/Erikre)</span></span>

<span data-ttu-id="dd6e2-105">[Descargar el proyecto de ejemplo deC#Wingtip Toys ()](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) o [descargar el libro electrónico (pdf)](https://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20ASP.NET%204.5%20Web%20Forms%20and%20Visual%20Studio%202013.pdf)</span><span class="sxs-lookup"><span data-stu-id="dd6e2-105">[Download Wingtip Toys Sample Project (C#)](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) or [Download E-book (PDF)](https://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20ASP.NET%204.5%20Web%20Forms%20and%20Visual%20Studio%202013.pdf)</span></span>

> <span data-ttu-id="dd6e2-106">Esta serie de tutoriales le enseñará los aspectos básicos de la creación de una aplicación de formularios Web Forms ASP.NET con ASP.NET 4,5 y Microsoft Visual Studio Express 2013 para Web.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-106">This tutorial series will teach you the basics of building an ASP.NET Web Forms application using ASP.NET 4.5 and Microsoft Visual Studio Express 2013 for Web.</span></span> <span data-ttu-id="dd6e2-107">Hay disponible un [proyecto C# de Visual Studio 2013 con código fuente](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) para acompañar esta serie de tutoriales.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-107">A Visual Studio 2013 [project with C# source code](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) is available to accompany this tutorial series.</span></span>

<span data-ttu-id="dd6e2-108">En este tutorial, modificará la aplicación de ejemplo Wingtip Toys para admitir el enrutamiento de direcciones URL.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-108">In this tutorial, you will modify the Wingtip Toys sample application to support URL routing.</span></span> <span data-ttu-id="dd6e2-109">El enrutamiento permite a la aplicación web usar direcciones URL que son fáciles de recordar y que son más compatibles con los motores de búsqueda.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-109">Routing enables your web application to use URLs that are friendly, easier to remember, and better supported by search engines.</span></span> <span data-ttu-id="dd6e2-110">Este tutorial se basa en el tutorial anterior "pertenencia y administración" y forma parte de la serie de tutoriales de Wingtip Toys.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-110">This tutorial builds on the previous tutorial "Membership and Administration" and is part of the Wingtip Toys tutorial series.</span></span>

## <a name="what-youll-learn"></a><span data-ttu-id="dd6e2-111">Temas que se abordarán:</span><span class="sxs-lookup"><span data-stu-id="dd6e2-111">What you'll learn:</span></span>

- <span data-ttu-id="dd6e2-112">Cómo registrar rutas para una aplicación de formularios Web Forms ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-112">How to register routes for an ASP.NET Web Forms application.</span></span>
- <span data-ttu-id="dd6e2-113">Cómo agregar rutas a una página web.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-113">How to add routes to a web page.</span></span>
- <span data-ttu-id="dd6e2-114">Cómo seleccionar datos de una base de datos para admitir rutas.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-114">How to select data from a database to support routes.</span></span>

## <a name="aspnet-routing-overview"></a><span data-ttu-id="dd6e2-115">Introducción al enrutamiento de ASP.NET</span><span class="sxs-lookup"><span data-stu-id="dd6e2-115">ASP.NET Routing Overview</span></span>

<span data-ttu-id="dd6e2-116">El enrutamiento de direcciones URL permite configurar una aplicación para que acepte direcciones URL de solicitud que no se asignan a archivos físicos.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-116">URL routing allows you to configure an application to accept request URLs that do not map to physical files.</span></span> <span data-ttu-id="dd6e2-117">Una dirección URL de solicitud es simplemente la dirección URL que un usuario escribe en el explorador para buscar una página en el sitio Web.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-117">A request URL is simply the URL a user enters into their browser to find a page on your web site.</span></span> <span data-ttu-id="dd6e2-118">El enrutamiento se usa para definir direcciones URL semánticamente significativas para los usuarios y que pueden ayudar con la optimización del motor de búsqueda (SEO).</span><span class="sxs-lookup"><span data-stu-id="dd6e2-118">You use routing to define URLs that are semantically meaningful to users and that can help with search-engine optimization (SEO).</span></span>

<span data-ttu-id="dd6e2-119">De forma predeterminada, la plantilla de formularios Web Forms incluye [direcciones URL descriptivas de ASP.net](http://www.nuget.org/packages/Microsoft.AspNet.FriendlyUrls/).</span><span class="sxs-lookup"><span data-stu-id="dd6e2-119">By default, the Web Forms template includes [ASP.NET Friendly URLs](http://www.nuget.org/packages/Microsoft.AspNet.FriendlyUrls/).</span></span> <span data-ttu-id="dd6e2-120">Gran parte del trabajo de enrutamiento básico se implementará mediante el uso de *direcciones URL descriptivas*.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-120">Much of the basic routing work will be implemented by using *Friendly URLs*.</span></span> <span data-ttu-id="dd6e2-121">Sin embargo, en este tutorial agregará capacidades de enrutamiento personalizadas.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-121">However, in this tutorial you will add customized routing capabilities.</span></span>

<span data-ttu-id="dd6e2-122">Antes de personalizar el enrutamiento de direcciones URL, la aplicación de ejemplo Wingtip Toys puede vincularse a un producto mediante la siguiente dirección URL:</span><span class="sxs-lookup"><span data-stu-id="dd6e2-122">Before customizing URL routing, the Wingtip Toys sample application can link to a product using the following URL:</span></span>

`https://localhost:44300/ProductDetails.aspx?productID=2`

<span data-ttu-id="dd6e2-123">Mediante la personalización del enrutamiento de direcciones URL, la aplicación de ejemplo Wingtip Toys se vinculará al mismo producto mediante una dirección URL más fácil de leer:</span><span class="sxs-lookup"><span data-stu-id="dd6e2-123">By customizing URL routing, the Wingtip Toys sample application will link to the same product using an easier to read URL:</span></span>

`https://localhost:44300/Product/Convertible%20Car`

### <a name="routes"></a><span data-ttu-id="dd6e2-124">Rutas</span><span class="sxs-lookup"><span data-stu-id="dd6e2-124">Routes</span></span>

<span data-ttu-id="dd6e2-125">Una ruta es un patrón de dirección URL que se asigna a un controlador.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-125">A route is a URL pattern that is mapped to a handler.</span></span> <span data-ttu-id="dd6e2-126">El controlador puede ser un archivo físico, como un archivo. aspx, en una aplicación de formularios Web Forms.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-126">The handler can be a physical file, such as an .aspx file in a Web Forms application.</span></span> <span data-ttu-id="dd6e2-127">Un controlador también puede ser una clase que procesa la solicitud.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-127">A handler can also be a class that processes the request.</span></span> <span data-ttu-id="dd6e2-128">Para definir una ruta, cree una instancia de la clase Route especificando el patrón de la dirección URL, el controlador y, opcionalmente, un nombre para la ruta.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-128">To define a route, you create an instance of the Route class by specifying the URL pattern, the handler, and optionally a name for the route.</span></span>

<span data-ttu-id="dd6e2-129">Agregue la ruta a la aplicación agregando el objeto `Route` a la propiedad `Routes` estática de la clase `RouteTable`.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-129">You add the route to the application by adding the `Route` object to the static `Routes` property of the `RouteTable` class.</span></span> <span data-ttu-id="dd6e2-130">La propiedad Routes es una `RouteCollection` objeto que almacena todas las rutas para la aplicación.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-130">The Routes property is a `RouteCollection` object that stores all the routes for the application.</span></span>

### <a name="url-patterns"></a><span data-ttu-id="dd6e2-131">Patrones de dirección URL</span><span class="sxs-lookup"><span data-stu-id="dd6e2-131">URL Patterns</span></span>

<span data-ttu-id="dd6e2-132">Un patrón de dirección URL puede contener valores literales y marcadores de posición de variables (denominados parámetros de dirección URL).</span><span class="sxs-lookup"><span data-stu-id="dd6e2-132">A URL pattern can contain literal values and variable placeholders (referred to as URL parameters).</span></span> <span data-ttu-id="dd6e2-133">Los literales y los marcadores de posición se encuentran en segmentos de la dirección URL que están delimitados por el carácter de barra diagonal (`/`).</span><span class="sxs-lookup"><span data-stu-id="dd6e2-133">The literals and placeholders are located in segments of the URL which are delimited by the slash (`/`) character.</span></span>

<span data-ttu-id="dd6e2-134">Cuando se realiza una solicitud a la aplicación Web, la dirección URL se analiza en segmentos y marcadores de posición, y los valores de las variables se proporcionan al controlador de solicitudes.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-134">When a request to your web application is made, the URL is parsed into segments and placeholders, and the variable values are provided to the request handler.</span></span> <span data-ttu-id="dd6e2-135">Este proceso es similar a la forma en que se analizan los datos de una cadena de consulta y se pasan al controlador de solicitudes.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-135">This process is similar to the way the data in a query string is parsed and passed to the request handler.</span></span> <span data-ttu-id="dd6e2-136">En ambos casos, la información de variable se incluye en la dirección URL y se pasa al controlador en forma de pares clave-valor.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-136">In both cases, variable information is included in the URL and passed to the handler in the form of key-value pairs.</span></span> <span data-ttu-id="dd6e2-137">En el caso de las cadenas de consulta, tanto las claves como los valores se encuentran en la dirección URL.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-137">For query strings, both the keys and the values are in the URL.</span></span> <span data-ttu-id="dd6e2-138">En el caso de las rutas, las claves son los nombres de marcador de posición definidos en el patrón de la dirección URL y solo los valores se encuentran en la dirección URL.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-138">For routes, the keys are the placeholder names defined in the URL pattern, and only the values are in the URL.</span></span>

<span data-ttu-id="dd6e2-139">En un patrón de dirección URL, los marcadores de posición se definen entre llaves (`{` y `}`).</span><span class="sxs-lookup"><span data-stu-id="dd6e2-139">In a URL pattern, you define placeholders by enclosing them in braces ( `{` and `}` ).</span></span> <span data-ttu-id="dd6e2-140">Puede definir más de un marcador de posición en un segmento, pero los marcadores de posición deben estar separados por un valor literal.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-140">You can define more than one placeholder in a segment, but the placeholders must be separated by a literal value.</span></span> <span data-ttu-id="dd6e2-141">Por ejemplo, `{language}-{country}/{action}` es un patrón de ruta válido.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-141">For example, `{language}-{country}/{action}` is a valid route pattern.</span></span> <span data-ttu-id="dd6e2-142">Sin embargo, `{language}{country}/{action}` no es un patrón válido, ya que no hay ningún valor literal o delimitador entre los marcadores de posición.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-142">However, `{language}{country}/{action}` is not a valid pattern, because there is no literal value or delimiter between the placeholders.</span></span> <span data-ttu-id="dd6e2-143">Por lo tanto, el enrutamiento no puede determinar dónde se debe separar el valor del marcador de posición de idioma del valor del marcador de posición Country.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-143">Therefore, routing cannot determine where to separate the value for the language placeholder from the value for the country placeholder.</span></span>

### <a name="mapping-and-registering-routes"></a><span data-ttu-id="dd6e2-144">Asignación y registro de rutas</span><span class="sxs-lookup"><span data-stu-id="dd6e2-144">Mapping and Registering Routes</span></span>

<span data-ttu-id="dd6e2-145">Para poder incluir rutas a páginas de la aplicación de ejemplo Wingtip Toys, debe registrar las rutas cuando se inicie la aplicación.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-145">Before you can include routes to pages of the Wingtip Toys sample application, you must register the routes when the application starts.</span></span> <span data-ttu-id="dd6e2-146">Para registrar las rutas, modificará el controlador de eventos `Application_Start`.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-146">To register the routes, you will modify the `Application_Start` event handler.</span></span>

1. <span data-ttu-id="dd6e2-147">En **Explorador de soluciones**de Visual Studio, busque y abra el archivo *global.asax.CS* .</span><span class="sxs-lookup"><span data-stu-id="dd6e2-147">In **Solution Explorer**of Visual Studio, find and open the *Global.asax.cs* file.</span></span>
2. <span data-ttu-id="dd6e2-148">Agregue el código resaltado en amarillo al archivo *global.asax.CS* como se indica a continuación:</span><span class="sxs-lookup"><span data-stu-id="dd6e2-148">Add the code highlighted in yellow to the *Global.asax.cs* file as follows:</span></span>   

    [!code-csharp[Main](url-routing/samples/sample1.cs?highlight=30-31,34-46)]

<span data-ttu-id="dd6e2-149">Cuando se inicia la aplicación de ejemplo Wingtip Toys, llama al controlador de eventos `Application_Start`.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-149">When the Wingtip Toys sample application starts, it calls the `Application_Start` event handler.</span></span> <span data-ttu-id="dd6e2-150">Al final de este controlador de eventos, se llama al método `RegisterCustomRoutes`.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-150">At the end of this event handler, the `RegisterCustomRoutes` method is called.</span></span> <span data-ttu-id="dd6e2-151">El método `RegisterCustomRoutes` agrega cada ruta llamando al método `MapPageRoute` del objeto `RouteCollection`.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-151">The `RegisterCustomRoutes` method adds each route by calling the `MapPageRoute` method of the `RouteCollection` object.</span></span> <span data-ttu-id="dd6e2-152">Las rutas se definen mediante un nombre de ruta, una dirección URL de ruta y una dirección URL física.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-152">Routes are defined using a route name, a route URL and a physical URL.</span></span>

<span data-ttu-id="dd6e2-153">El primer parámetro ("`ProductsByCategoryRoute`") es el nombre de la ruta.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-153">The first parameter ("`ProductsByCategoryRoute`") is the route name.</span></span> <span data-ttu-id="dd6e2-154">Se usa para llamar a la ruta cuando es necesario.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-154">It is used to call the route when it is needed.</span></span> <span data-ttu-id="dd6e2-155">El segundo parámetro ("`Category/{categoryName}`") define la dirección URL de reemplazo descriptivo que puede ser dinámica en función del código.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-155">The second parameter ("`Category/{categoryName}`") defines the friendly replacement URL that can be dynamic based on code.</span></span> <span data-ttu-id="dd6e2-156">Esta ruta se usa cuando se rellena un control de datos con vínculos que se generan en función de los datos.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-156">You use this route when you are populating a data control with links that are generated based on data.</span></span> <span data-ttu-id="dd6e2-157">Una ruta se muestra de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="dd6e2-157">A route is shown as follows:</span></span>

[!code-csharp[Main](url-routing/samples/sample2.cs)]

<span data-ttu-id="dd6e2-158">El segundo parámetro de la ruta incluye un valor dinámico especificado por llaves (`{ }`).</span><span class="sxs-lookup"><span data-stu-id="dd6e2-158">The second parameter of the route includes a dynamic value specified by braces (`{ }`).</span></span> <span data-ttu-id="dd6e2-159">En este caso, el `categoryName` es una variable que se utilizará para determinar la ruta de acceso de enrutamiento adecuada.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-159">In this case, the `categoryName` is a variable that will be used to determine the proper routing path.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="dd6e2-160">**Optional**</span><span class="sxs-lookup"><span data-stu-id="dd6e2-160">**Optional**</span></span>
> 
> <span data-ttu-id="dd6e2-161">Puede que le resulte más fácil administrar el código moviendo el método `RegisterCustomRoutes` a una clase independiente.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-161">You might find it easier to manage your code by moving the `RegisterCustomRoutes` method to a separate class.</span></span> <span data-ttu-id="dd6e2-162">En la carpeta *lógica* , cree una clase de `RouteActions` independiente.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-162">In the *Logic* folder, create a separate `RouteActions` class.</span></span> <span data-ttu-id="dd6e2-163">Mueva el método de `RegisterCustomRoutes` anterior del archivo *global.asax.CS* a la nueva clase de `RoutesActions`.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-163">Move the above `RegisterCustomRoutes` method from the *Global.asax.cs* file into the new `RoutesActions` class.</span></span> <span data-ttu-id="dd6e2-164">Use la clase `RoleActions` y el método `createAdmin` como ejemplo de cómo llamar al método `RegisterCustomRoutes` desde el archivo *global.asax.CS* .</span><span class="sxs-lookup"><span data-stu-id="dd6e2-164">Use the `RoleActions` class and the `createAdmin` method as an example of how to call the `RegisterCustomRoutes` method from the *Global.asax.cs* file.</span></span>

<span data-ttu-id="dd6e2-165">También puede haber observado el `RegisterRoutes` llamada al método con el `RouteConfig` objeto al principio del controlador de eventos `Application_Start`.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-165">You may also have noticed the `RegisterRoutes` method call using the `RouteConfig` object at the beginning of the `Application_Start` event handler.</span></span> <span data-ttu-id="dd6e2-166">Esta llamada se realiza para implementar el enrutamiento predeterminado.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-166">This call is made to implement default routing.</span></span> <span data-ttu-id="dd6e2-167">Se incluyó como código predeterminado al crear la aplicación mediante la plantilla de formularios Web Forms de Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-167">It was included as default code when you created the application using Visual Studio's Web Forms template.</span></span>

## <a name="retrieving-and-using-route-data"></a><span data-ttu-id="dd6e2-168">Recuperación y uso de datos de ruta</span><span class="sxs-lookup"><span data-stu-id="dd6e2-168">Retrieving and Using Route Data</span></span>

<span data-ttu-id="dd6e2-169">Como se mencionó anteriormente, se pueden definir rutas.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-169">As mentioned above, routes can be defined.</span></span> <span data-ttu-id="dd6e2-170">El código que ha agregado al controlador de eventos `Application_Start` en el archivo *global.asax.CS* carga las rutas que se puede definir.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-170">The code that you added to the `Application_Start` event handler in the *Global.asax.cs* file loads the definable routes.</span></span>

### <a name="setting-routes"></a><span data-ttu-id="dd6e2-171">Establecer rutas</span><span class="sxs-lookup"><span data-stu-id="dd6e2-171">Setting Routes</span></span>

<span data-ttu-id="dd6e2-172">Las rutas requieren que se agregue código adicional.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-172">Routes require you to add additional code.</span></span> <span data-ttu-id="dd6e2-173">En este tutorial, utilizará el enlace de modelos para recuperar un `RouteValueDictionary` objeto que se usa al generar las rutas utilizando los datos de un control de datos.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-173">In this tutorial, you will use model binding to retrieve a `RouteValueDictionary` object that is used when generating the routes using data from a data control.</span></span> <span data-ttu-id="dd6e2-174">El objeto `RouteValueDictionary` contendrá una lista de nombres de productos que pertenecen a una categoría específica de productos.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-174">The `RouteValueDictionary` object will contain a list of product names that belong to a specific category of products.</span></span> <span data-ttu-id="dd6e2-175">Se crea un vínculo para cada producto en función de los datos y la ruta.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-175">A link is created for each product based on the data and route.</span></span>

#### <a name="enable-routes-for-categories-and-products"></a><span data-ttu-id="dd6e2-176">Habilitar rutas para categorías y productos</span><span class="sxs-lookup"><span data-stu-id="dd6e2-176">Enable Routes for Categories and Products</span></span>

<span data-ttu-id="dd6e2-177">A continuación, actualizará la aplicación para que use el `ProductsByCategoryRoute` para determinar la ruta correcta que se va a incluir para cada vínculo de categoría de producto.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-177">Next, you'll update the application to use the `ProductsByCategoryRoute` to determine the correct route to include for each product category link.</span></span> <span data-ttu-id="dd6e2-178">También actualizará la página *productlist. aspx* para incluir un vínculo enrutado para cada producto.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-178">You'll also update the *ProductList.aspx* page to include a routed link for each product.</span></span> <span data-ttu-id="dd6e2-179">Los vínculos se mostrarán tal y como estaban antes del cambio; sin embargo, los vínculos usarán ahora el enrutamiento de direcciones URL.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-179">The links will be displayed as they were before the change, however the links will now use URL routing.</span></span>

1. <span data-ttu-id="dd6e2-180">En **Explorador de soluciones**, abra la página *site. Master* si aún no está abierta.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-180">In **Solution Explorer**, open the *Site.Master* page if it is not already open.</span></span>
2. <span data-ttu-id="dd6e2-181">Actualice el control **ListView** denominado "`categoryList`" con los cambios resaltados en amarillo, de modo que el marcado tenga el siguiente aspecto:</span><span class="sxs-lookup"><span data-stu-id="dd6e2-181">Update the **ListView** control named "`categoryList`" with the changes highlighted in yellow, so the markup appears as follows:</span></span>   

    [!code-aspx[Main](url-routing/samples/sample3.aspx?highlight=7-9)]
3. <span data-ttu-id="dd6e2-182">En **Explorador de soluciones**, abra la página *productlist. aspx* .</span><span class="sxs-lookup"><span data-stu-id="dd6e2-182">In **Solution Explorer**, open the *ProductList.aspx* page.</span></span>
4. <span data-ttu-id="dd6e2-183">Actualice el elemento `ItemTemplate` de la página *productlist. aspx* con las actualizaciones resaltadas en amarillo, de modo que el marcado tenga el siguiente aspecto:</span><span class="sxs-lookup"><span data-stu-id="dd6e2-183">Update the `ItemTemplate` element of the *ProductList.aspx* page with the updates highlighted in yellow, so the markup appears as follows:</span></span>   

    [!code-aspx[Main](url-routing/samples/sample4.aspx?highlight=6-9,14-16)]
5. <span data-ttu-id="dd6e2-184">Abra el código subyacente de *productlist.aspx.CS* y agregue el siguiente espacio de nombres como se resalta en amarillo:</span><span class="sxs-lookup"><span data-stu-id="dd6e2-184">Open the code-behind of *ProductList.aspx.cs* and add the following namespace as highlighted in yellow:</span></span>  

    [!code-csharp[Main](url-routing/samples/sample5.cs?highlight=9)]
6. <span data-ttu-id="dd6e2-185">Reemplace el método `GetProducts` del código subyacente (*productlist.aspx.CS*) por el código siguiente:</span><span class="sxs-lookup"><span data-stu-id="dd6e2-185">Replace the `GetProducts` method of the code-behind (*ProductList.aspx.cs*) with the following code:</span></span>   

    [!code-csharp[Main](url-routing/samples/sample6.cs)]

#### <a name="add-code-for-product-details"></a><span data-ttu-id="dd6e2-186">Agregar código para los detalles del producto</span><span class="sxs-lookup"><span data-stu-id="dd6e2-186">Add Code for Product Details</span></span>

<span data-ttu-id="dd6e2-187">Ahora, actualice el código subyacente (*productdetails.aspx.CS*) de la página *productdetails. aspx* para usar los datos de ruta.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-187">Now, update the code-behind (*ProductDetails.aspx.cs*) for the *ProductDetails.aspx* page to use route data.</span></span> <span data-ttu-id="dd6e2-188">Tenga en cuenta que el nuevo método `GetProduct` también acepta un valor de cadena de consulta para el caso en el que el usuario tenga un vínculo marcado que use la dirección URL no enrutada anterior no descriptiva.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-188">Notice that the new `GetProduct` method also accepts a query string value for the case where the user has a link bookmarked that uses the older non-friendly, non-routed URL.</span></span>

1. <span data-ttu-id="dd6e2-189">Reemplace el método `GetProduct` del código subyacente (*productdetails.aspx.CS*) por el código siguiente:</span><span class="sxs-lookup"><span data-stu-id="dd6e2-189">Replace the `GetProduct` method of the code-behind (*ProductDetails.aspx.cs*) with the following code:</span></span>   

    [!code-csharp[Main](url-routing/samples/sample7.cs)]

## <a name="running-the-application"></a><span data-ttu-id="dd6e2-190">Ejecutar la aplicación</span><span class="sxs-lookup"><span data-stu-id="dd6e2-190">Running the Application</span></span>

<span data-ttu-id="dd6e2-191">Ahora puede ejecutar la aplicación para ver las rutas actualizadas.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-191">You can run the application now to see the updated routes.</span></span>

1. <span data-ttu-id="dd6e2-192">Presione **F5** para ejecutar la aplicación de ejemplo Wingtip Toys.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-192">Press **F5** to run the Wingtip Toys sample application.</span></span>  
 <span data-ttu-id="dd6e2-193">El explorador se abre y muestra la página *default. aspx* .</span><span class="sxs-lookup"><span data-stu-id="dd6e2-193">The browser opens and shows the *Default.aspx* page.</span></span>
2. <span data-ttu-id="dd6e2-194">Haga clic en el vínculo **productos** en la parte superior de la página.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-194">Click the **Products** link at the top of the page.</span></span>  
 <span data-ttu-id="dd6e2-195">Todos los productos se muestran en la página *productlist. aspx* .</span><span class="sxs-lookup"><span data-stu-id="dd6e2-195">All products are displayed on the *ProductList.aspx* page.</span></span> <span data-ttu-id="dd6e2-196">Se muestra la siguiente dirección URL (con el número de puerto) para el explorador:</span><span class="sxs-lookup"><span data-stu-id="dd6e2-196">The following URL (using your port number) is displayed for the browser:</span></span>  
    `https://localhost:44300/ProductList`
3. <span data-ttu-id="dd6e2-197">A continuación, haga clic en el vínculo de la categoría **Cars** cerca de la parte superior de la página.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-197">Next, click the **Cars** category link near the top of the page.</span></span>  
 <span data-ttu-id="dd6e2-198">En la página *productlist. aspx* solo se muestran los automóviles.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-198">Only cars are displayed on the *ProductList.aspx* page.</span></span> <span data-ttu-id="dd6e2-199">Se muestra la siguiente dirección URL (con el número de puerto) para el explorador:</span><span class="sxs-lookup"><span data-stu-id="dd6e2-199">The following URL (using your port number) is displayed for the browser:</span></span>  
    `https://localhost:44300/Category/Cars`
4. <span data-ttu-id="dd6e2-200">Haga clic en el vínculo que contiene el nombre del primer automóvil incluido en la página ("**automóvil convertible**") para mostrar los detalles del producto.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-200">Click the link containing the name of the first car listed on the page ("**Convertible Car**") to display the product details.</span></span>  
 <span data-ttu-id="dd6e2-201">Se muestra la siguiente dirección URL (con el número de puerto) para el explorador:</span><span class="sxs-lookup"><span data-stu-id="dd6e2-201">The following URL (using your port number) is displayed for the browser:</span></span>  
    `https://localhost:44300/Product/Convertible%20Car`
5. <span data-ttu-id="dd6e2-202">A continuación, escriba la siguiente dirección URL no enrutada (con el número de puerto) en el explorador:</span><span class="sxs-lookup"><span data-stu-id="dd6e2-202">Next, enter the following non-routed URL (using your port number) into the browser:</span></span>  
    `https://localhost:44300/ProductDetails.aspx?productID=2`  
 <span data-ttu-id="dd6e2-203">El código sigue reconociendo una dirección URL que incluye una cadena de consulta, para el caso en el que un usuario tiene un vínculo marcado.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-203">The code still recognizes a URL that includes a query string, for the case where a user has a link bookmarked.</span></span>

## <a name="summary"></a><span data-ttu-id="dd6e2-204">Resumen</span><span class="sxs-lookup"><span data-stu-id="dd6e2-204">Summary</span></span>

<span data-ttu-id="dd6e2-205">En este tutorial, ha agregado rutas para categorías y productos.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-205">In this tutorial, you have added routes for categories and products.</span></span> <span data-ttu-id="dd6e2-206">Ha aprendido cómo se pueden integrar las rutas con controles de datos que usan el enlace de modelos.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-206">You have learned how routes can be integrated with data controls that use model binding.</span></span> <span data-ttu-id="dd6e2-207">En el siguiente tutorial, implementará el control de errores global.</span><span class="sxs-lookup"><span data-stu-id="dd6e2-207">In the next tutorial, you will implement global error handling.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="dd6e2-208">Recursos adicionales</span><span class="sxs-lookup"><span data-stu-id="dd6e2-208">Additional Resources</span></span>

[<span data-ttu-id="dd6e2-209">Direcciones URL descriptivas de ASP.NET</span><span class="sxs-lookup"><span data-stu-id="dd6e2-209">ASP.NET Friendly URLs</span></span>](http://www.nuget.org/packages/Microsoft.AspNet.FriendlyUrls/)  
[<span data-ttu-id="dd6e2-210">Implementar una aplicación de formularios Web Forms de ASP.NET segura con pertenencia, OAuth y SQL Database para Azure App Service</span><span class="sxs-lookup"><span data-stu-id="dd6e2-210">Deploy a Secure ASP.NET Web Forms App with Membership, OAuth, and SQL Database to Azure App Service</span></span>](https://azure.microsoft.com/documentation/articles/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/)  
[<span data-ttu-id="dd6e2-211">Evaluación gratuita de Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="dd6e2-211">Microsoft Azure - Free Trial</span></span>](https://azure.microsoft.com/pricing/free-trial/)

> [!div class="step-by-step"]
> <span data-ttu-id="dd6e2-212">[Anterior](membership-and-administration.md)
> [Siguiente](aspnet-error-handling.md)</span><span class="sxs-lookup"><span data-stu-id="dd6e2-212">[Previous](membership-and-administration.md)
[Next](aspnet-error-handling.md)</span></span>
