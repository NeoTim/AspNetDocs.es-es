---
uid: mvc/overview/older-versions-1/controllers-and-routing/improving-performance-with-output-caching-vb
title: Mejorar el rendimiento con el almacenamiento en caché de resultados (VB) | Microsoft Docs
author: microsoft
description: En este tutorial, obtendrá información sobre cómo puede mejorar drásticamente el rendimiento de las aplicaciones web MVC de ASP.NET aprovechando el almacenamiento en caché de la salida. Usted...
ms.author: riande
ms.date: 01/27/2009
ms.assetid: 0e7b4d85-2c46-4eaf-b6a8-6cd566a67334
msc.legacyurl: /mvc/overview/older-versions-1/controllers-and-routing/improving-performance-with-output-caching-vb
msc.type: authoredcontent
ms.openlocfilehash: b713b56e149f196794b3223ba88e3b41bf3e34c4
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 03/06/2020
ms.locfileid: "78486655"
---
# <a name="improving-performance-with-output-caching-vb"></a><span data-ttu-id="cc4e9-104">Mejorar el rendimiento con el almacenamiento en caché de resultados (VB)</span><span class="sxs-lookup"><span data-stu-id="cc4e9-104">Improving Performance with Output Caching (VB)</span></span>

<span data-ttu-id="cc4e9-105">por [Microsoft](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="cc4e9-105">by [Microsoft](https://github.com/microsoft)</span></span>

> <span data-ttu-id="cc4e9-106">En este tutorial, obtendrá información sobre cómo puede mejorar drásticamente el rendimiento de las aplicaciones web MVC de ASP.NET aprovechando el almacenamiento en caché de la salida.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-106">In this tutorial, you learn how you can dramatically improve the performance of your ASP.NET MVC web applications by taking advantage of output caching.</span></span> <span data-ttu-id="cc4e9-107">Aprenderá a almacenar en caché el resultado devuelto por una acción del controlador para que no sea necesario crear el mismo contenido cada vez que un nuevo usuario invoque la acción.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-107">You learn how to cache the result returned from a controller action so that the same content does not need to be created each and every time a new user invokes the action.</span></span>

<span data-ttu-id="cc4e9-108">El objetivo de este tutorial es explicar cómo puede mejorar drásticamente el rendimiento de una aplicación ASP.NET MVC aprovechando la memoria caché de resultados.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-108">The goal of this tutorial is to explain how you can dramatically improve the performance of an ASP.NET MVC application by taking advantage of the output cache.</span></span> <span data-ttu-id="cc4e9-109">La caché de resultados permite almacenar en caché el contenido devuelto por una acción de controlador.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-109">The output cache enables you to cache the content returned by a controller action.</span></span> <span data-ttu-id="cc4e9-110">De este modo, no es necesario generar el mismo contenido cada vez que se invoca la misma acción de controlador.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-110">That way, the same content does not need to be generated each and every time the same controller action is invoked.</span></span>

<span data-ttu-id="cc4e9-111">Imagine, por ejemplo, que la aplicación ASP.NET MVC muestra una lista de registros de base de datos en una vista denominada index.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-111">Imagine, for example, that your ASP.NET MVC application displays a list of database records in a view named Index.</span></span> <span data-ttu-id="cc4e9-112">Normalmente, cada y cada vez que un usuario invoca la acción de controlador que devuelve la vista de índice, el conjunto de registros de la base de datos debe recuperarse de la base de datos mediante la ejecución de una consulta de base de datos.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-112">Normally, each and every time that a user invokes the controller action that returns the Index view, the set of database records must be retrieved from the database by executing a database query.</span></span>

<span data-ttu-id="cc4e9-113">Por otro lado, si aprovecha la memoria caché de resultados, puede evitar ejecutar una consulta de base de datos cada vez que un usuario invoque la misma acción de controlador.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-113">If, on the other hand, you take advantage of the output cache then you can avoid executing a database query every time any user invokes the same controller action.</span></span> <span data-ttu-id="cc4e9-114">La vista se puede recuperar de la memoria caché en lugar de volver a generarse desde la acción del controlador.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-114">The view can be retrieved from the cache instead of being regenerated from the controller action.</span></span> <span data-ttu-id="cc4e9-115">El almacenamiento en caché le permite evitar el trabajo redundante en el servidor.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-115">Caching enables you to avoid performing redundant work on the server.</span></span>

#### <a name="enabling-output-caching"></a><span data-ttu-id="cc4e9-116">Habilitar el almacenamiento en caché de resultados</span><span class="sxs-lookup"><span data-stu-id="cc4e9-116">Enabling Output Caching</span></span>

<span data-ttu-id="cc4e9-117">Para habilitar el almacenamiento en caché de resultados, agregue un atributo &lt;OutputCache&gt; a una acción de controlador individual o a una clase de controlador completa.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-117">You enable output caching by adding an &lt;OutputCache&gt; attribute to either an individual controller action or an entire controller class.</span></span> <span data-ttu-id="cc4e9-118">Por ejemplo, el controlador de la lista 1 expone una acción denominada index ().</span><span class="sxs-lookup"><span data-stu-id="cc4e9-118">For example, the controller in Listing 1 exposes an action named Index().</span></span> <span data-ttu-id="cc4e9-119">La salida de la acción index () se almacena en caché durante 10 segundos.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-119">The output of the Index() action is cached for 10 seconds.</span></span>

<span data-ttu-id="cc4e9-120">**Lista 1: Controllers\HomeController.vb**</span><span class="sxs-lookup"><span data-stu-id="cc4e9-120">**Listing 1 – Controllers\HomeController.vb**</span></span>

[!code-vb[Main](improving-performance-with-output-caching-vb/samples/sample1.vb)]

<span data-ttu-id="cc4e9-121">En las versiones beta de ASP.NET MVC, el almacenamiento en caché de resultados no funciona para una dirección URL como [http://www.MySite.com/](http://www.mysite.com/).</span><span class="sxs-lookup"><span data-stu-id="cc4e9-121">In the Beta versions of ASP.NET MVC, output caching does not work for a URL like [http://www.MySite.com/](http://www.mysite.com/).</span></span> <span data-ttu-id="cc4e9-122">En su lugar, debe escribir una dirección URL como [http://www.MySite.com/Home/Index](http://www.mysite.com/Home/Index).</span><span class="sxs-lookup"><span data-stu-id="cc4e9-122">Instead, you must enter a URL like [http://www.MySite.com/Home/Index](http://www.mysite.com/Home/Index).</span></span>

<span data-ttu-id="cc4e9-123">En la lista 1, la salida de la acción index () se almacena en caché durante 10 segundos.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-123">In Listing 1, the output of the Index() action is cached for 10 seconds.</span></span> <span data-ttu-id="cc4e9-124">Si lo prefiere, puede especificar una duración de caché mucho mayor.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-124">If you prefer, you can specify a much longer cache duration.</span></span> <span data-ttu-id="cc4e9-125">Por ejemplo, si desea almacenar en caché el resultado de una acción de controlador durante un día, puede especificar una duración de caché de 86400 segundos (60 segundos \* 60 minutos \* 24 horas).</span><span class="sxs-lookup"><span data-stu-id="cc4e9-125">For example, if you want to cache the output of a controller action for one day then you can specify a cache duration of 86400 seconds (60 seconds \* 60 minutes \* 24 hours).</span></span>

<span data-ttu-id="cc4e9-126">No hay ninguna garantía de que el contenido se almacene en caché durante el período de tiempo que especifique.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-126">There is no guarantee that content will be cached for the amount of time that you specify.</span></span> <span data-ttu-id="cc4e9-127">Cuando se reduce el nivel de recursos de memoria, la memoria caché comienza a expulsar el contenido automáticamente.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-127">When memory resources become low, the cache starts evicting content automatically.</span></span>

<span data-ttu-id="cc4e9-128">El controlador Home de la lista 1 devuelve la vista de índice en la lista 2.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-128">The Home controller in Listing 1 returns the Index view in Listing 2.</span></span> <span data-ttu-id="cc4e9-129">No hay nada especial sobre esta vista.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-129">There is nothing special about this view.</span></span> <span data-ttu-id="cc4e9-130">La vista de índice simplemente muestra la hora actual (vea la ilustración 1).</span><span class="sxs-lookup"><span data-stu-id="cc4e9-130">The Index view simply displays the current time (see Figure 1).</span></span>

<span data-ttu-id="cc4e9-131">**Lista 2: Views\Home\Index.aspx**</span><span class="sxs-lookup"><span data-stu-id="cc4e9-131">**Listing 2 – Views\Home\Index.aspx**</span></span>

[!code-aspx[Main](improving-performance-with-output-caching-vb/samples/sample2.aspx)]

<span data-ttu-id="cc4e9-132">**Figura 1: vista de índice almacenada en caché**</span><span class="sxs-lookup"><span data-stu-id="cc4e9-132">**Figure 1 – Cached Index view**</span></span>

![clip_image002](improving-performance-with-output-caching-vb/_static/image1.jpg)

<span data-ttu-id="cc4e9-134">Si invoca la acción index () varias veces escribiendo la dirección URL/Home/Index en la barra de direcciones del explorador y pulsando el botón actualizar/volver a cargar en el explorador varias veces, la hora que se muestra en la vista de índice no cambia durante 10 segundos.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-134">If you invoke the Index() action multiple times by entering the URL /Home/Index in the address bar of your browser and hitting the Refresh/Reload button in your browser repeatedly, then the time displayed by the Index view won't change for 10 seconds.</span></span> <span data-ttu-id="cc4e9-135">Se muestra la misma hora porque la vista se almacena en la memoria caché.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-135">The same time is displayed because the view is cached.</span></span>

<span data-ttu-id="cc4e9-136">Es importante comprender que la misma vista se almacena en la memoria caché para todos los usuarios que visitan la aplicación.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-136">It is important to understand that the same view is cached for everyone who visits your application.</span></span> <span data-ttu-id="cc4e9-137">Cualquier persona que invoque la acción index () obtendrá la misma versión almacenada en caché de la vista de índice.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-137">Anyone who invokes the Index() action will get the same cached version of the Index view.</span></span> <span data-ttu-id="cc4e9-138">Esto significa que la cantidad de trabajo que debe realizar el servidor web para atender la vista de índice se reduce drásticamente.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-138">This means that the amount of work that the web server must perform to serve the Index view is dramatically reduced.</span></span>

<span data-ttu-id="cc4e9-139">La vista de la lista 2 da lugar a algo realmente sencillo.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-139">The view in Listing 2 happens to be doing something really simple.</span></span> <span data-ttu-id="cc4e9-140">La vista solo muestra la hora actual.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-140">The view just displays the current time.</span></span> <span data-ttu-id="cc4e9-141">Sin embargo, puede almacenar en caché fácilmente una vista que muestre un conjunto de registros de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-141">However, you could just as easily cache a view that displays a set of database records.</span></span> <span data-ttu-id="cc4e9-142">En ese caso, no es necesario recuperar el conjunto de registros de la base de datos cada vez que se invoca la acción de controlador que devuelve la vista.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-142">In that case, the set of database records would not need to be retrieved from the database each and every time the controller action that returns the view is invoked.</span></span> <span data-ttu-id="cc4e9-143">El almacenamiento en caché puede reducir la cantidad de trabajo que debe realizar el servidor Web y el servidor de base de datos.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-143">Caching can reduce the amount of work that both your web server and database server must perform.</span></span>

<span data-ttu-id="cc4e9-144">No use la página &lt;% @ OutputCache%&gt; Directiva en una vista de MVC.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-144">Don't use the page &lt;%@ OutputCache %&gt; directive in an MVC view.</span></span> <span data-ttu-id="cc4e9-145">Esta Directiva se sangra del mundo de formularios Web Forms y no debe usarse en una aplicación ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-145">This directive is bleeding over from the Web Forms world and should not be used in an ASP.NET MVC application.</span></span> 

#### <a name="where-content-is-cached"></a><span data-ttu-id="cc4e9-146">Dónde se almacena en caché el contenido</span><span class="sxs-lookup"><span data-stu-id="cc4e9-146">Where Content is Cached</span></span>

<span data-ttu-id="cc4e9-147">De forma predeterminada, cuando se usa el atributo &lt;OutputCache&gt;, el contenido se almacena en la memoria caché en tres ubicaciones: el servidor Web, los servidores proxy y el explorador Web.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-147">By default, when you use the &lt;OutputCache&gt; attribute, content is cached in three locations: the web server, any proxy servers, and the web browser.</span></span> <span data-ttu-id="cc4e9-148">Puede controlar exactamente dónde se almacena en caché el contenido modificando la propiedad Location del atributo &lt;OutputCache&gt;.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-148">You can control exactly where content is cached by modifying the Location property of the &lt;OutputCache&gt; attribute.</span></span>

<span data-ttu-id="cc4e9-149">Puede establecer la propiedad Location en cualquiera de los siguientes valores:</span><span class="sxs-lookup"><span data-stu-id="cc4e9-149">You can set the Location property to any one of the following values:</span></span>

> <span data-ttu-id="cc4e9-150">· Cualquier</span><span class="sxs-lookup"><span data-stu-id="cc4e9-150">· Any</span></span>
> 
> <span data-ttu-id="cc4e9-151">· Nº</span><span class="sxs-lookup"><span data-stu-id="cc4e9-151">· Client</span></span>
> 
> <span data-ttu-id="cc4e9-152">· Posterior</span><span class="sxs-lookup"><span data-stu-id="cc4e9-152">· Downstream</span></span>
> 
> <span data-ttu-id="cc4e9-153">· Servidor</span><span class="sxs-lookup"><span data-stu-id="cc4e9-153">· Server</span></span>
> 
> <span data-ttu-id="cc4e9-154">· Ninguna</span><span class="sxs-lookup"><span data-stu-id="cc4e9-154">· None</span></span>
> 
> <span data-ttu-id="cc4e9-155">· ServerAndClient</span><span class="sxs-lookup"><span data-stu-id="cc4e9-155">· ServerAndClient</span></span>

<span data-ttu-id="cc4e9-156">De forma predeterminada, la propiedad Location tiene el valor any.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-156">By default, the Location property has the value Any.</span></span> <span data-ttu-id="cc4e9-157">Sin embargo, hay situaciones en las que puede que quiera almacenar en caché solo en el explorador o solo en el servidor.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-157">However, there are situations in which you might want to cache only on the browser or only on the server.</span></span> <span data-ttu-id="cc4e9-158">Por ejemplo, si está almacenando en caché información que está personalizada para cada usuario, no debe almacenar en caché la información en el servidor.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-158">For example, if you are caching information that is personalized for each user then you should not cache the information on the server.</span></span> <span data-ttu-id="cc4e9-159">Si va a mostrar información diferente a distintos usuarios, debe almacenar en caché la información solo en el cliente.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-159">If you are displaying different information to different users then you should cache the information only on the client.</span></span>

<span data-ttu-id="cc4e9-160">Por ejemplo, el controlador de la lista 3 expone una acción denominada GetName () que devuelve el nombre de usuario actual.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-160">For example, the controller in Listing 3 exposes an action named GetName() that returns the current user name.</span></span> <span data-ttu-id="cc4e9-161">Si Jack inicia sesión en el sitio web e invoca la acción GetName (), la acción devuelve la cadena "HI Jack".</span><span class="sxs-lookup"><span data-stu-id="cc4e9-161">If Jack logs into the website and invokes the GetName() action then the action returns the string "Hi Jack".</span></span> <span data-ttu-id="cc4e9-162">Si, posteriormente, Jill inicia sesión en el sitio web e invoca la acción GetName (), entonces también obtendrá la cadena "HI Jack".</span><span class="sxs-lookup"><span data-stu-id="cc4e9-162">If, subsequently, Jill logs into the website and invokes the GetName() action then she also will get the string "Hi Jack".</span></span> <span data-ttu-id="cc4e9-163">La cadena se almacena en la memoria caché del servidor web para todos los usuarios después de que Jack invoque inicialmente la acción del controlador.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-163">The string is cached on the web server for all users after Jack initially invokes the controller action.</span></span>

<span data-ttu-id="cc4e9-164">**Lista 3: Controllers\BadUserController.vb**</span><span class="sxs-lookup"><span data-stu-id="cc4e9-164">**Listing 3 – Controllers\BadUserController.vb**</span></span>

[!code-vb[Main](improving-performance-with-output-caching-vb/samples/sample3.vb)]

<span data-ttu-id="cc4e9-165">Lo más probable es que el controlador de la lista 3 no funcione de la forma que desee.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-165">Most likely, the controller in Listing 3 does not work the way that you want.</span></span> <span data-ttu-id="cc4e9-166">No desea mostrar el mensaje "HI Jack" a Jill.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-166">You don't want to display the message "Hi Jack" to Jill.</span></span>

<span data-ttu-id="cc4e9-167">Nunca debe almacenar en caché el contenido personalizado en la memoria caché del servidor.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-167">You should never cache personalized content in the server cache.</span></span> <span data-ttu-id="cc4e9-168">Sin embargo, es posible que quiera almacenar en caché el contenido personalizado en la memoria caché del explorador para mejorar el rendimiento.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-168">However, you might want to cache the personalized content in the browser cache to improve performance.</span></span> <span data-ttu-id="cc4e9-169">Si almacena en caché el contenido en el explorador y un usuario invoca la misma acción del controlador varias veces, se puede recuperar el contenido desde la memoria caché del explorador en lugar de hacerlo desde el servidor.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-169">If you cache content in the browser, and a user invokes the same controller action multiple times, then the content can be retrieved from the browser cache instead of the server.</span></span>

<span data-ttu-id="cc4e9-170">El controlador modificado de la lista 4 almacena en caché el resultado de la acción GetName ().</span><span class="sxs-lookup"><span data-stu-id="cc4e9-170">The modified controller in Listing 4 caches the output of the GetName() action.</span></span> <span data-ttu-id="cc4e9-171">Sin embargo, el contenido se almacena en caché únicamente en el explorador y no en el servidor.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-171">However, the content is cached only on the browser and not on the server.</span></span> <span data-ttu-id="cc4e9-172">De este modo, cuando varios usuarios invoquen el método GetName (), cada persona obtiene su propio nombre de usuario y no el nombre de usuario de otra persona.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-172">That way, when multiple users invoke the GetName() method, each person gets their own user name and not another person's user name.</span></span>

<span data-ttu-id="cc4e9-173">**Lista 4: Controllers\UserController.vb**</span><span class="sxs-lookup"><span data-stu-id="cc4e9-173">**Listing 4 – Controllers\UserController.vb**</span></span>

[!code-vb[Main](improving-performance-with-output-caching-vb/samples/sample4.vb)]

<span data-ttu-id="cc4e9-174">Observe que el atributo &lt;OutputCache&gt; de la lista 4 incluye una propiedad Location establecida en el valor OutputCacheLocation. Client.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-174">Notice that the &lt;OutputCache&gt; attribute in Listing 4 includes a Location property set to the value OutputCacheLocation.Client.</span></span> <span data-ttu-id="cc4e9-175">El atributo &lt;OutputCache&gt; también incluye una propiedad nostore.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-175">The &lt;OutputCache&gt; attribute also includes a NoStore property.</span></span> <span data-ttu-id="cc4e9-176">La propiedad nostore se usa para informar a los servidores proxy y exploradores de que no deben almacenar una copia permanente del contenido almacenado en caché.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-176">The NoStore property is used to inform proxy servers and browsers that they should not store a permanent copy of the cached content.</span></span>

#### <a name="varying-the-output-cache"></a><span data-ttu-id="cc4e9-177">Variar la memoria caché de resultados</span><span class="sxs-lookup"><span data-stu-id="cc4e9-177">Varying the Output Cache</span></span>

<span data-ttu-id="cc4e9-178">En algunas situaciones, puede que desee diferentes versiones en caché del mismo contenido.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-178">In some situations, you might want different cached versions of the very same content.</span></span> <span data-ttu-id="cc4e9-179">Imagine, por ejemplo, que va a crear una página maestra/detalle.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-179">Imagine, for example, that you are creating a master/detail page.</span></span> <span data-ttu-id="cc4e9-180">En la página maestra se muestra una lista de títulos de películas.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-180">The master page displays a list of movie titles.</span></span> <span data-ttu-id="cc4e9-181">Al hacer clic en un título, obtendrá los detalles de la película seleccionada.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-181">When you click a title, you get details for the selected movie.</span></span>

<span data-ttu-id="cc4e9-182">Si almacena en caché la página de detalles, se mostrarán los detalles de la misma película independientemente de la película en la que haga clic.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-182">If you cache the details page, then the details for the same movie will be displayed no matter which movie you click.</span></span> <span data-ttu-id="cc4e9-183">La primera película seleccionada por el primer usuario se mostrará a todos los usuarios futuros.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-183">The first movie selected by the first user will be displayed to all future users.</span></span>

<span data-ttu-id="cc4e9-184">Puede corregir este problema aprovechando las ventajas de la propiedad VaryByParam del atributo &lt;OutputCache&gt;.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-184">You can fix this problem by taking advantage of the VaryByParam property of the &lt;OutputCache&gt; attribute.</span></span> <span data-ttu-id="cc4e9-185">Esta propiedad le permite crear diferentes versiones en caché del mismo contenido cuando un parámetro de formulario o un parámetro de cadena de consulta varía.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-185">This property enables you to create different cached versions of the very same content when a form parameter or query string parameter varies.</span></span>

<span data-ttu-id="cc4e9-186">Por ejemplo, el controlador de la lista 5 expone dos acciones denominadas Master () y Details ().</span><span class="sxs-lookup"><span data-stu-id="cc4e9-186">For example, the controller in Listing 5 exposes two actions named Master() and Details().</span></span> <span data-ttu-id="cc4e9-187">La acción Master () devuelve una lista de títulos de películas y la acción Details () devuelve los detalles de la película seleccionada.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-187">The Master() action returns a list of movie titles and the Details() action returns the details for the selected movie.</span></span>

<span data-ttu-id="cc4e9-188">**Lista 5: Controllers\MoviesController.vb**</span><span class="sxs-lookup"><span data-stu-id="cc4e9-188">**Listing 5 – Controllers\MoviesController.vb**</span></span>

[!code-vb[Main](improving-performance-with-output-caching-vb/samples/sample5.vb)]

<span data-ttu-id="cc4e9-189">La acción Master () incluye una propiedad VaryByParam con el valor "none".</span><span class="sxs-lookup"><span data-stu-id="cc4e9-189">The Master() action includes a VaryByParam property with the value "none".</span></span> <span data-ttu-id="cc4e9-190">Cuando se invoca la acción Master (), se devuelve la misma versión en caché de la vista maestra.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-190">When the Master() action is invoked, the same cached version of the Master view is returned.</span></span> <span data-ttu-id="cc4e9-191">Se omiten los parámetros de formulario o los parámetros de cadena de consulta (vea la figura 2).</span><span class="sxs-lookup"><span data-stu-id="cc4e9-191">Any form parameters or query string parameters are ignored (see Figure 2).</span></span>

<span data-ttu-id="cc4e9-192">**Figura 2: vista de/Movies/Master**</span><span class="sxs-lookup"><span data-stu-id="cc4e9-192">**Figure 2 – The /Movies/Master view**</span></span>

![clip_image004](improving-performance-with-output-caching-vb/_static/image2.jpg)

<span data-ttu-id="cc4e9-194">**Ilustración 3: vista de/Movies/Details**</span><span class="sxs-lookup"><span data-stu-id="cc4e9-194">**Figure 3 – The /Movies/Details view**</span></span>

![clip_image006](improving-performance-with-output-caching-vb/_static/image3.jpg)

<span data-ttu-id="cc4e9-196">La acción Details () incluye una propiedad VaryByParam con el valor "ID".</span><span class="sxs-lookup"><span data-stu-id="cc4e9-196">The Details() action includes a VaryByParam property with the value "Id".</span></span> <span data-ttu-id="cc4e9-197">Cuando se pasan valores diferentes del parámetro id a la acción del controlador, se generan diferentes versiones en caché de la vista de detalles.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-197">When different values of the Id parameter are passed to the controller action, different cached versions of the Details view are generated.</span></span>

<span data-ttu-id="cc4e9-198">Es importante comprender que el uso de la propiedad VaryByParam da como resultado más almacenamiento en caché y no menos.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-198">It is important to understand that using the VaryByParam property results in more caching and not less.</span></span> <span data-ttu-id="cc4e9-199">Se crea una versión en caché diferente de la vista de detalles para cada versión diferente del parámetro id.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-199">A different cached version of the Details view is created for each different version of the Id parameter.</span></span>

<span data-ttu-id="cc4e9-200">Puede establecer la propiedad VaryByParam en los valores siguientes:</span><span class="sxs-lookup"><span data-stu-id="cc4e9-200">You can set the VaryByParam property to the following values:</span></span>

> <span data-ttu-id="cc4e9-201">\* = cree una versión en caché diferente cada vez que varíe un parámetro de cadena de consulta o formulario.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-201">\* = Create a different cached version whenever a form or query string parameter varies.</span></span>
> 
> <span data-ttu-id="cc4e9-202">ninguno = no crear nunca diferentes versiones en caché</span><span class="sxs-lookup"><span data-stu-id="cc4e9-202">none = Never create different cached versions</span></span>
> 
> <span data-ttu-id="cc4e9-203">Lista de parámetros de punto y coma = crear diferentes versiones en caché siempre que el formato o los parámetros de cadena de consulta de la lista varíe</span><span class="sxs-lookup"><span data-stu-id="cc4e9-203">Semicolon list of parameters = Create different cached versions whenever any of the form or query string parameters in the list varies</span></span>

#### <a name="creating-a-cache-profile"></a><span data-ttu-id="cc4e9-204">Crear un perfil de caché</span><span class="sxs-lookup"><span data-stu-id="cc4e9-204">Creating a Cache Profile</span></span>

<span data-ttu-id="cc4e9-205">Como alternativa a la configuración de las propiedades de la caché de resultados mediante la modificación de las propiedades del atributo &lt;OutputCache&gt;, puede crear un perfil de caché en el archivo de configuración Web (Web. config).</span><span class="sxs-lookup"><span data-stu-id="cc4e9-205">As an alternative to configuring output cache properties by modifying properties of the &lt;OutputCache&gt; attribute, you can create a cache profile in the web configuration (web.config) file.</span></span> <span data-ttu-id="cc4e9-206">La creación de un perfil de caché en el archivo de configuración web ofrece un par de ventajas importantes.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-206">Creating a cache profile in the web configuration file offers a couple of important advantages.</span></span>

<span data-ttu-id="cc4e9-207">En primer lugar, configurando el almacenamiento en caché de resultados en el archivo de configuración Web, puede controlar cómo las acciones de controlador almacenan el contenido en una ubicación central.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-207">First, by configuring output caching in the web configuration file, you can control how controller actions cache content in one central location.</span></span> <span data-ttu-id="cc4e9-208">Puede crear un perfil de caché y aplicar el perfil a varios controladores o acciones de controlador.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-208">You can create one cache profile and apply the profile to several controllers or controller actions.</span></span>

<span data-ttu-id="cc4e9-209">En segundo lugar, puede modificar el archivo de configuración Web sin volver a compilar la aplicación.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-209">Second, you can modify the web configuration file without recompiling your application.</span></span> <span data-ttu-id="cc4e9-210">Si necesita deshabilitar el almacenamiento en caché para una aplicación que ya se ha implementado en producción, puede simplemente modificar los perfiles de caché definidos en el archivo de configuración Web.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-210">If you need to disable caching for an application that has already been deployed to production, then you can simply modify the cache profiles defined in the web configuration file.</span></span> <span data-ttu-id="cc4e9-211">Los cambios en el archivo de configuración Web se detectarán automáticamente y se aplicarán.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-211">Any changes to the web configuration file will be detected automatically and applied.</span></span>

<span data-ttu-id="cc4e9-212">Por ejemplo, la sección &lt;Caching&gt; web Configuration de la lista 6 define un perfil de caché denominado Cache1Hour.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-212">For example, the &lt;caching&gt; web configuration section in Listing 6 defines a cache profile named Cache1Hour.</span></span> <span data-ttu-id="cc4e9-213">La sección &lt;Caching&gt; debe aparecer dentro de la sección &lt;System. Web&gt; de un archivo de configuración Web.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-213">The &lt;caching&gt; section must appear within the &lt;system.web&gt; section of a web configuration file.</span></span>

<span data-ttu-id="cc4e9-214">**Lista 6: sección de almacenamiento en caché de Web. config**</span><span class="sxs-lookup"><span data-stu-id="cc4e9-214">**Listing 6 – Caching section for web.config**</span></span>

[!code-xml[Main](improving-performance-with-output-caching-vb/samples/sample6.xml)]

<span data-ttu-id="cc4e9-215">El controlador de la lista 7 muestra cómo puede aplicar el perfil Cache1Hour a una acción de controlador con el atributo &lt;OutputCache&gt;.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-215">The controller in Listing 7 illustrates how you can apply the Cache1Hour profile to a controller action with the &lt;OutputCache&gt; attribute.</span></span>

<span data-ttu-id="cc4e9-216">**Listado 7: Controllers\ProfileController.vb**</span><span class="sxs-lookup"><span data-stu-id="cc4e9-216">**Listing 7 – Controllers\ProfileController.vb**</span></span>

[!code-vb[Main](improving-performance-with-output-caching-vb/samples/sample7.vb)]

<span data-ttu-id="cc4e9-217">Si invoca la acción index () expuesta por el controlador en la lista 7, se devolverá la misma hora durante 1 hora.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-217">If you invoke the Index() action exposed by the controller in Listing 7 then the same time will be returned for 1 hour.</span></span>

#### <a name="summary"></a><span data-ttu-id="cc4e9-218">Resumen</span><span class="sxs-lookup"><span data-stu-id="cc4e9-218">Summary</span></span>

<span data-ttu-id="cc4e9-219">El almacenamiento en caché de resultados proporciona un método muy sencillo de mejorar drásticamente el rendimiento de las aplicaciones ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-219">Output caching provides you with a very easy method of dramatically improving the performance of your ASP.NET MVC applications.</span></span> <span data-ttu-id="cc4e9-220">En este tutorial, aprendió a usar el atributo &lt;OutputCache&gt; para almacenar en caché la salida de las acciones del controlador.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-220">In this tutorial, you learned how to use the &lt;OutputCache&gt; attribute to cache the output of controller actions.</span></span> <span data-ttu-id="cc4e9-221">También aprendió a modificar las propiedades del atributo &lt;OutputCache&gt; como las propiedades Duration y VaryByParam para modificar el modo en que se almacena en caché el contenido.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-221">You also learned how to modify properties of the &lt;OutputCache&gt; attribute such as the Duration and VaryByParam properties to modify how content gets cached.</span></span> <span data-ttu-id="cc4e9-222">Por último, ha aprendido a definir perfiles de caché en el archivo de configuración Web.</span><span class="sxs-lookup"><span data-stu-id="cc4e9-222">Finally, you learned how to define cache profiles in the web configuration file.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="cc4e9-223">[Anterior](understanding-action-filters-vb.md)
> [Siguiente](adding-dynamic-content-to-a-cached-page-vb.md)</span><span class="sxs-lookup"><span data-stu-id="cc4e9-223">[Previous](understanding-action-filters-vb.md)
[Next](adding-dynamic-content-to-a-cached-page-vb.md)</span></span>
