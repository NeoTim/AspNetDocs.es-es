---
uid: web-forms/overview/getting-started/getting-started-with-aspnet-45-web-forms/shopping-cart
title: Carro de la compra | Microsoft Docs
author: Erikre
description: Esta serie de tutoriales le enseñará los aspectos básicos de la creación de una aplicación de formularios Web Forms ASP.NET con ASP.NET 4,5 y Microsoft Visual Studio Express 2013 para nosotros...
ms.author: riande
ms.date: 09/08/2014
ms.assetid: 6898c601-6c31-432f-8388-e6843f8a17cb
msc.legacyurl: /web-forms/overview/getting-started/getting-started-with-aspnet-45-web-forms/shopping-cart
msc.type: authoredcontent
ms.openlocfilehash: 46264a0ab2244cff24761ce94b41722e61e3f426
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 11/28/2019
ms.locfileid: "74614922"
---
# <a name="shopping-cart"></a><span data-ttu-id="6da43-103">Carro de la compra</span><span class="sxs-lookup"><span data-stu-id="6da43-103">Shopping Cart</span></span>

<span data-ttu-id="6da43-104">por [Erik Reitan](https://github.com/Erikre)</span><span class="sxs-lookup"><span data-stu-id="6da43-104">by [Erik Reitan](https://github.com/Erikre)</span></span>

<span data-ttu-id="6da43-105">[Descargar el proyecto de ejemplo deC#Wingtip Toys ()](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) o [descargar el libro electrónico (pdf)](https://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20ASP.NET%204.5%20Web%20Forms%20and%20Visual%20Studio%202013.pdf)</span><span class="sxs-lookup"><span data-stu-id="6da43-105">[Download Wingtip Toys Sample Project (C#)](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) or [Download E-book (PDF)](https://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20ASP.NET%204.5%20Web%20Forms%20and%20Visual%20Studio%202013.pdf)</span></span>

> <span data-ttu-id="6da43-106">Esta serie de tutoriales le enseñará los aspectos básicos de la creación de una aplicación de formularios Web Forms ASP.NET con ASP.NET 4,5 y Microsoft Visual Studio Express 2013 para Web.</span><span class="sxs-lookup"><span data-stu-id="6da43-106">This tutorial series will teach you the basics of building an ASP.NET Web Forms application using ASP.NET 4.5 and Microsoft Visual Studio Express 2013 for Web.</span></span> <span data-ttu-id="6da43-107">Hay disponible un [proyecto C# de Visual Studio 2013 con código fuente](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) para acompañar esta serie de tutoriales.</span><span class="sxs-lookup"><span data-stu-id="6da43-107">A Visual Studio 2013 [project with C# source code](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) is available to accompany this tutorial series.</span></span>

<span data-ttu-id="6da43-108">En este tutorial se describe la lógica de negocios necesaria para agregar un carro de la compra a la aplicación de formularios Web Forms ASP.NET de Wingtip Toys.</span><span class="sxs-lookup"><span data-stu-id="6da43-108">This tutorial describes the business logic required to add a shopping cart to the Wingtip Toys sample ASP.NET Web Forms application.</span></span> <span data-ttu-id="6da43-109">Este tutorial se basa en el tutorial anterior "Mostrar elementos de datos y detalles" y forma parte de la serie de tutoriales de Wingtip Toy Store.</span><span class="sxs-lookup"><span data-stu-id="6da43-109">This tutorial builds on the previous tutorial "Display Data Items and Details" and is part of the Wingtip Toy Store tutorial series.</span></span> <span data-ttu-id="6da43-110">Cuando haya completado este tutorial, los usuarios de la aplicación de ejemplo podrán agregar, quitar y modificar los productos de su carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="6da43-110">When you've completed this tutorial, the users of your sample app will be able to add, remove, and modify the products in their shopping cart.</span></span>

## <a name="what-youll-learn"></a><span data-ttu-id="6da43-111">Lo que aprenderá:</span><span class="sxs-lookup"><span data-stu-id="6da43-111">What you'll learn:</span></span>

1. <span data-ttu-id="6da43-112">Cómo crear un carro de la compra para la aplicación Web.</span><span class="sxs-lookup"><span data-stu-id="6da43-112">How to create a shopping cart for the web application.</span></span>
2. <span data-ttu-id="6da43-113">Cómo permitir que los usuarios agreguen elementos al carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="6da43-113">How to enable users to add items to the shopping cart.</span></span>
3. <span data-ttu-id="6da43-114">Cómo agregar un control [GridView](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview(v=vs.110).aspx#introduction) para mostrar los detalles del carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="6da43-114">How to add a [GridView](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview(v=vs.110).aspx#introduction) control to display shopping cart details.</span></span>
4. <span data-ttu-id="6da43-115">Cómo calcular y mostrar el total del pedido.</span><span class="sxs-lookup"><span data-stu-id="6da43-115">How to calculate and display the order total.</span></span>
5. <span data-ttu-id="6da43-116">Cómo quitar y actualizar elementos en el carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="6da43-116">How to remove and update items in the shopping cart.</span></span>
6. <span data-ttu-id="6da43-117">Cómo incluir un contador de carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="6da43-117">How to include a shopping cart counter.</span></span>

## <a name="code-features-in-this-tutorial"></a><span data-ttu-id="6da43-118">Características de código en este tutorial:</span><span class="sxs-lookup"><span data-stu-id="6da43-118">Code features in this tutorial:</span></span>

1. <span data-ttu-id="6da43-119">Entity Framework Code First</span><span class="sxs-lookup"><span data-stu-id="6da43-119">Entity Framework Code First</span></span>
2. <span data-ttu-id="6da43-120">Anotaciones de datos</span><span class="sxs-lookup"><span data-stu-id="6da43-120">Data Annotations</span></span>
3. <span data-ttu-id="6da43-121">Controles de datos fuertemente tipados</span><span class="sxs-lookup"><span data-stu-id="6da43-121">Strongly typed data controls</span></span>
4. <span data-ttu-id="6da43-122">Enlace de modelos</span><span class="sxs-lookup"><span data-stu-id="6da43-122">Model binding</span></span>

## <a name="creating-a-shopping-cart"></a><span data-ttu-id="6da43-123">Creación de un carro de la compra</span><span class="sxs-lookup"><span data-stu-id="6da43-123">Creating a Shopping Cart</span></span>

<span data-ttu-id="6da43-124">Anteriormente en esta serie de tutoriales, se han agregado páginas y código para ver los datos de productos de una base de datos.</span><span class="sxs-lookup"><span data-stu-id="6da43-124">Earlier in this tutorial series, you added pages and code to view product data from a database.</span></span> <span data-ttu-id="6da43-125">En este tutorial, creará un carro de la compra para administrar los productos que los usuarios están interesados en comprar.</span><span class="sxs-lookup"><span data-stu-id="6da43-125">In this tutorial, you'll create a shopping cart to manage the products that users are interested in buying.</span></span> <span data-ttu-id="6da43-126">Los usuarios podrán examinar y agregar elementos al carro de la compra, aunque no estén registrados o hayan iniciado sesión.</span><span class="sxs-lookup"><span data-stu-id="6da43-126">Users will be able to browse and add items to the shopping cart even if they are not registered or logged in.</span></span> <span data-ttu-id="6da43-127">Para administrar el acceso al carro de la compra, asignará a los usuarios una `ID` única mediante un identificador único global (GUID) cuando el usuario tenga acceso al carro de la compra por primera vez.</span><span class="sxs-lookup"><span data-stu-id="6da43-127">To manage shopping cart access, you will assign users a unique `ID` using a globally unique identifier (GUID) when the user accesses the shopping cart for the first time.</span></span> <span data-ttu-id="6da43-128">Almacenará este `ID` mediante el estado de sesión ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="6da43-128">You'll store this `ID` using the ASP.NET Session state.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="6da43-129">El estado de sesión ASP.NET es un lugar adecuado para almacenar información específica del usuario que expirará después de que el usuario abandone el sitio.</span><span class="sxs-lookup"><span data-stu-id="6da43-129">The ASP.NET Session state is a convenient place to store user-specific information which will expire after the user leaves the site.</span></span> <span data-ttu-id="6da43-130">Aunque el uso incorrecto del estado de la sesión puede tener implicaciones en el rendimiento en sitios más grandes, el uso de estado de la sesión es muy adecuado para fines de demostración.</span><span class="sxs-lookup"><span data-stu-id="6da43-130">While misuse of session state can have performance implications on larger sites, light use of session state works well for demonstration purposes.</span></span> <span data-ttu-id="6da43-131">El proyecto de ejemplo Wingtip Toys muestra cómo usar el estado de sesión sin un proveedor externo, donde el estado de sesión se almacena en proceso en el servidor Web que hospeda el sitio.</span><span class="sxs-lookup"><span data-stu-id="6da43-131">The Wingtip Toys sample project shows how to use session state without an external provider, where session state is stored in-process on the web server hosting the site.</span></span> <span data-ttu-id="6da43-132">En el caso de sitios mayores que proporcionan varias instancias de una aplicación o para sitios que ejecutan varias instancias de una aplicación en servidores diferentes, considere la posibilidad de usar **Windows Azure cache Service**.</span><span class="sxs-lookup"><span data-stu-id="6da43-132">For larger sites that provide multiple instances of an application or for sites that run multiple instances of an application on different servers, consider using **Windows Azure Cache Service**.</span></span> <span data-ttu-id="6da43-133">Esta Cache Service proporciona un servicio de almacenamiento en caché distribuido externo al sitio web y resuelve el problema de usar el estado de sesión en proceso.</span><span class="sxs-lookup"><span data-stu-id="6da43-133">This Cache Service provides a distributed caching service that is external to the web site and solves the problem of using in-process session state.</span></span> <span data-ttu-id="6da43-134">Para obtener más información, vea [Cómo usar el estado de sesión ASP.net con sitios web de Windows Azure](https://docs.microsoft.com/azure/redis-cache/cache-aspnet-session-state-provider).</span><span class="sxs-lookup"><span data-stu-id="6da43-134">For more information see, [How to Use ASP.NET Session State with Windows Azure Web Sites](https://docs.microsoft.com/azure/redis-cache/cache-aspnet-session-state-provider).</span></span>

### <a name="add-cartitem-as-a-model-class"></a><span data-ttu-id="6da43-135">Agregar CartItem como clase de modelo</span><span class="sxs-lookup"><span data-stu-id="6da43-135">Add CartItem as a Model Class</span></span>

<span data-ttu-id="6da43-136">Anteriormente en esta serie de tutoriales, definió el esquema para los datos de categoría y de producto mediante la creación de las clases `Category` y `Product` en la carpeta *Models* .</span><span class="sxs-lookup"><span data-stu-id="6da43-136">Earlier in this tutorial series, you defined the schema for the category and product data by creating the `Category` and `Product` classes in the *Models* folder.</span></span> <span data-ttu-id="6da43-137">Ahora, agregue una nueva clase para definir el esquema para el carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="6da43-137">Now, add a new class to define the schema for the shopping cart.</span></span> <span data-ttu-id="6da43-138">Más adelante en este tutorial, agregará una clase para controlar el acceso a los datos a la tabla `CartItem`.</span><span class="sxs-lookup"><span data-stu-id="6da43-138">Later in this tutorial, you will add a class to handle data access to the `CartItem` table.</span></span> <span data-ttu-id="6da43-139">Esta clase proporcionará la lógica de negocios para agregar, quitar y actualizar elementos en el carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="6da43-139">This class will provide the business logic to add, remove, and update items in the shopping cart.</span></span>

1. <span data-ttu-id="6da43-140">Haga clic con el botón derecho en la carpeta *modelos* y seleccione **Agregar** -&gt; **nuevo elemento**.</span><span class="sxs-lookup"><span data-stu-id="6da43-140">Right-click the *Models* folder and select **Add** -&gt; **New Item**.</span></span> 

    ![Carro de la compra-nuevo elemento](shopping-cart/_static/image1.png)
2. <span data-ttu-id="6da43-142">Se abrirá el cuadro de diálogo **Agregar nuevo elemento**.</span><span class="sxs-lookup"><span data-stu-id="6da43-142">The **Add New Item** dialog box is displayed.</span></span> <span data-ttu-id="6da43-143">Seleccione **código**y, a continuación, seleccione **clase**.</span><span class="sxs-lookup"><span data-stu-id="6da43-143">Select **Code**, and then select **Class**.</span></span> 

    ![Carro de la compra-cuadro de diálogo Agregar nuevo elemento](shopping-cart/_static/image2.png)
3. <span data-ttu-id="6da43-145">Asigne a esta nueva clase el nombre *CartItem.CS*.</span><span class="sxs-lookup"><span data-stu-id="6da43-145">Name this new class *CartItem.cs*.</span></span>
4. <span data-ttu-id="6da43-146">Haga clic en **Agregar**.</span><span class="sxs-lookup"><span data-stu-id="6da43-146">Click **Add**.</span></span>  
   <span data-ttu-id="6da43-147">El nuevo archivo de clase se muestra en el editor.</span><span class="sxs-lookup"><span data-stu-id="6da43-147">The new class file is displayed in the editor.</span></span>
5. <span data-ttu-id="6da43-148">Reemplace el código predeterminado por el código siguiente:</span><span class="sxs-lookup"><span data-stu-id="6da43-148">Replace the default code with the following code:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample1.cs)]

<span data-ttu-id="6da43-149">La clase `CartItem` contiene el esquema que va a definir cada producto que un usuario agrega al carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="6da43-149">The `CartItem` class contains the schema that will define each product a user adds to the shopping cart.</span></span> <span data-ttu-id="6da43-150">Esta clase es similar a las demás clases de esquema que creó anteriormente en esta serie de tutoriales.</span><span class="sxs-lookup"><span data-stu-id="6da43-150">This class is similar to the other schema classes you created earlier in this tutorial series.</span></span> <span data-ttu-id="6da43-151">Por Convención, Entity Framework Code First espera que la clave principal de la tabla `CartItem` sea `CartItemId` o `ID`.</span><span class="sxs-lookup"><span data-stu-id="6da43-151">By convention, Entity Framework Code First expects that the primary key for the `CartItem` table will be either `CartItemId` or `ID`.</span></span> <span data-ttu-id="6da43-152">Sin embargo, el código invalida el comportamiento predeterminado mediante el atributo de anotación de datos `[Key]`.</span><span class="sxs-lookup"><span data-stu-id="6da43-152">However, the code overrides the default behavior by using the data annotation `[Key]` attribute.</span></span> <span data-ttu-id="6da43-153">El atributo `Key` de la propiedad ItemId especifica que la propiedad `ItemID` es la clave principal.</span><span class="sxs-lookup"><span data-stu-id="6da43-153">The `Key` attribute of the ItemId property specifies that the `ItemID` property is the primary key.</span></span>

<span data-ttu-id="6da43-154">La propiedad `CartId` especifica el `ID` del usuario asociado al elemento que se va a comprar.</span><span class="sxs-lookup"><span data-stu-id="6da43-154">The `CartId` property specifies the `ID` of the user that is associated with the item to purchase.</span></span> <span data-ttu-id="6da43-155">Agregará código para crear este usuario `ID` cuando el usuario tenga acceso al carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="6da43-155">You'll add code to create this user `ID` when the user accesses the shopping cart.</span></span> <span data-ttu-id="6da43-156">Esta `ID` también se almacenará como una variable de sesión ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="6da43-156">This `ID` will also be stored as an ASP.NET Session variable.</span></span>

### <a name="update-the-product-context"></a><span data-ttu-id="6da43-157">Actualizar el contexto del producto</span><span class="sxs-lookup"><span data-stu-id="6da43-157">Update the Product Context</span></span>

<span data-ttu-id="6da43-158">Además de agregar la clase `CartItem`, tendrá que actualizar la clase de contexto de base de datos que administra las clases de entidad y que proporciona acceso a los datos a la base de datos.</span><span class="sxs-lookup"><span data-stu-id="6da43-158">In addition to adding the `CartItem` class, you will need to update the database context class that manages the entity classes and that provides data access to the database.</span></span> <span data-ttu-id="6da43-159">Para ello, agregará la clase de modelo de `CartItem` recién creada a la clase `ProductContext`.</span><span class="sxs-lookup"><span data-stu-id="6da43-159">To do this, you will add the newly created `CartItem` model class to the `ProductContext` class.</span></span>

1. <span data-ttu-id="6da43-160">En **Explorador de soluciones**, busque y abra el archivo *ProductContext.CS* en la carpeta *Models* .</span><span class="sxs-lookup"><span data-stu-id="6da43-160">In **Solution Explorer**, find and open the *ProductContext.cs* file in the *Models* folder.</span></span>
2. <span data-ttu-id="6da43-161">Agregue el código resaltado al archivo *ProductContext.CS* como se indica a continuación:</span><span class="sxs-lookup"><span data-stu-id="6da43-161">Add the highlighted code to the *ProductContext.cs* file as follows:</span></span>  

    [!code-csharp[Main](shopping-cart/samples/sample2.cs?highlight=14)]

<span data-ttu-id="6da43-162">Como se mencionó anteriormente en esta serie de tutoriales, el código del archivo *ProductContext.CS* agrega el espacio de nombres `System.Data.Entity` de forma que tenga acceso a toda la funcionalidad básica de la Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="6da43-162">As mentioned previously in this tutorial series, the code in the *ProductContext.cs* file adds the `System.Data.Entity` namespace so that you have access to all the core functionality of the Entity Framework.</span></span> <span data-ttu-id="6da43-163">Esta funcionalidad incluye la capacidad de consultar, insertar, actualizar y eliminar datos trabajando con objetos fuertemente tipados.</span><span class="sxs-lookup"><span data-stu-id="6da43-163">This functionality includes the capability to query, insert, update, and delete data by working with strongly typed objects.</span></span> <span data-ttu-id="6da43-164">La clase `ProductContext` agrega acceso a la clase de modelo de `CartItem` recién agregada.</span><span class="sxs-lookup"><span data-stu-id="6da43-164">The `ProductContext` class adds access to the newly added `CartItem` model class.</span></span>

### <a name="managing-the-shopping-cart-business-logic"></a><span data-ttu-id="6da43-165">Administrar la lógica de negocios de la cesta de la compra</span><span class="sxs-lookup"><span data-stu-id="6da43-165">Managing the Shopping Cart Business Logic</span></span>

<span data-ttu-id="6da43-166">A continuación, creará la clase `ShoppingCart` en una nueva carpeta *lógica* .</span><span class="sxs-lookup"><span data-stu-id="6da43-166">Next, you'll create the `ShoppingCart` class in a new *Logic* folder.</span></span> <span data-ttu-id="6da43-167">La clase `ShoppingCart` controla el acceso a los datos a la tabla `CartItem`.</span><span class="sxs-lookup"><span data-stu-id="6da43-167">The `ShoppingCart` class handles data access to the `CartItem` table.</span></span> <span data-ttu-id="6da43-168">La clase también incluirá la lógica de negocios para agregar, quitar y actualizar elementos en el carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="6da43-168">The class will also include the business logic to add, remove, and update items in the shopping cart.</span></span>

<span data-ttu-id="6da43-169">La lógica de carro de la compra que va a agregar contendrá la funcionalidad para administrar las siguientes acciones:</span><span class="sxs-lookup"><span data-stu-id="6da43-169">The shopping cart logic that you will add will contain the functionality to manage the following actions:</span></span>

1. <span data-ttu-id="6da43-170">Agregar elementos al carro de la compra</span><span class="sxs-lookup"><span data-stu-id="6da43-170">Adding items to the shopping cart</span></span>
2. <span data-ttu-id="6da43-171">Quitar elementos del carro de la compra</span><span class="sxs-lookup"><span data-stu-id="6da43-171">Removing items from the shopping cart</span></span>
3. <span data-ttu-id="6da43-172">Obtención del ID. de carro de la compra</span><span class="sxs-lookup"><span data-stu-id="6da43-172">Getting the shopping cart ID</span></span>
4. <span data-ttu-id="6da43-173">Recuperación de elementos desde el carro de la compra</span><span class="sxs-lookup"><span data-stu-id="6da43-173">Retrieving items from the shopping cart</span></span>
5. <span data-ttu-id="6da43-174">Calcular el total de todos los elementos del carro de la compra</span><span class="sxs-lookup"><span data-stu-id="6da43-174">Totaling the amount of all the shopping cart items</span></span>
6. <span data-ttu-id="6da43-175">Actualización de los datos del carro de la compra</span><span class="sxs-lookup"><span data-stu-id="6da43-175">Updating the shopping cart data</span></span>

<span data-ttu-id="6da43-176">Una página de carro de la compra (*ShoppingCart. aspx*) y la clase de carro de la compra se utilizarán juntas para tener acceso a los datos del carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="6da43-176">A shopping cart page (*ShoppingCart.aspx*) and the shopping cart class will be used together to access shopping cart data.</span></span> <span data-ttu-id="6da43-177">La página carro de la compra mostrará todos los elementos que el usuario agrega al carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="6da43-177">The shopping cart page will display all the items the user adds to the shopping cart.</span></span> <span data-ttu-id="6da43-178">Además de la página y la clase del carro de la compra, creará una página (*AddToCart. aspx*) para agregar productos al carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="6da43-178">Besides the shopping cart page and class, you'll create a page (*AddToCart.aspx*) to add products to the shopping cart.</span></span> <span data-ttu-id="6da43-179">También agregará código a la página *productlist. aspx* y a la página *productdetails. aspx* que proporcionará un vínculo a la página *AddToCart. aspx* para que el usuario pueda agregar productos al carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="6da43-179">You will also add code to the *ProductList.aspx* page and the *ProductDetails.aspx* page that will provide a link to the *AddToCart.aspx* page, so that the user can add products to the shopping cart.</span></span>

<span data-ttu-id="6da43-180">En el diagrama siguiente se muestra el proceso básico que se produce cuando el usuario agrega un producto al carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="6da43-180">The following diagram shows the basic process that occurs when the user adds a product to the shopping cart.</span></span>

![Carro de la compra: adición al carro de la compra](shopping-cart/_static/image3.png)

<span data-ttu-id="6da43-182">Cuando el usuario haga clic en el vínculo **Agregar al carro** en la página *productlist. aspx* o en la página *productdetails. aspx* , la aplicación navegará a la página *AddToCart. aspx* y, a continuación, automáticamente a la página *ShoppingCart. aspx* .</span><span class="sxs-lookup"><span data-stu-id="6da43-182">When the user clicks the **Add To Cart** link on either the *ProductList.aspx* page or the *ProductDetails.aspx* page, the application will navigate to the *AddToCart.aspx* page and then automatically to the *ShoppingCart.aspx* page.</span></span> <span data-ttu-id="6da43-183">La página *AddToCart. aspx* agregará el producto Select al carro de la compra llamando a un método de la clase ShoppingCart.</span><span class="sxs-lookup"><span data-stu-id="6da43-183">The *AddToCart.aspx* page will add the select product to the shopping cart by calling a method in the ShoppingCart class.</span></span> <span data-ttu-id="6da43-184">La página *ShoppingCart. aspx* mostrará los productos que se han agregado al carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="6da43-184">The *ShoppingCart.aspx* page will display the products that have been added to the shopping cart.</span></span>

#### <a name="creating-the-shopping-cart-class"></a><span data-ttu-id="6da43-185">Creación de la clase de carro de la compra</span><span class="sxs-lookup"><span data-stu-id="6da43-185">Creating the Shopping Cart Class</span></span>

<span data-ttu-id="6da43-186">La clase `ShoppingCart` se agregará a una carpeta independiente en la aplicación para que se produzca una distinción clara entre el modelo (carpeta modelos), las páginas (carpeta raíz) y la lógica (carpeta lógica).</span><span class="sxs-lookup"><span data-stu-id="6da43-186">The `ShoppingCart` class will be added to a separate folder in the application so that there will be a clear distinction between the model (Models folder), the pages (root folder) and the logic (Logic folder).</span></span>

1. <span data-ttu-id="6da43-187">En **Explorador de soluciones**, haga clic con el botón derecho en el proyecto **WingtipToys**y seleccione **Agregar**-&gt;**nueva carpeta**.</span><span class="sxs-lookup"><span data-stu-id="6da43-187">In **Solution Explorer**, right-click the **WingtipToys**project and select **Add**-&gt;**New Folder**.</span></span> <span data-ttu-id="6da43-188">Asigne un nombre a la nueva *lógica*de carpeta.</span><span class="sxs-lookup"><span data-stu-id="6da43-188">Name the new folder *Logic*.</span></span>
2. <span data-ttu-id="6da43-189">Haga clic con el botón secundario en la carpeta *lógica* y, a continuación, seleccione **Agregar** -&gt; **nuevo elemento**.</span><span class="sxs-lookup"><span data-stu-id="6da43-189">Right-click the *Logic* folder and then select **Add** -&gt; **New Item**.</span></span>
3. <span data-ttu-id="6da43-190">Agregue un nuevo archivo de clase denominado *ShoppingCartActions.CS*.</span><span class="sxs-lookup"><span data-stu-id="6da43-190">Add a new class file named *ShoppingCartActions.cs*.</span></span>
4. <span data-ttu-id="6da43-191">Reemplace el código predeterminado por el código siguiente:</span><span class="sxs-lookup"><span data-stu-id="6da43-191">Replace the default code with the following code:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample3.cs)]

<span data-ttu-id="6da43-192">El método `AddToCart` permite incluir productos individuales en el carro de la compra en función del `ID`del producto.</span><span class="sxs-lookup"><span data-stu-id="6da43-192">The `AddToCart` method enables individual products to be included in the shopping cart based on the product `ID`.</span></span> <span data-ttu-id="6da43-193">El producto se agrega al carro o, si el carro ya contiene un elemento para ese producto, se incrementa la cantidad.</span><span class="sxs-lookup"><span data-stu-id="6da43-193">The product is added to the cart, or if the cart already contains an item for that product, the quantity is incremented.</span></span>

<span data-ttu-id="6da43-194">El método `GetCartId` devuelve el `ID` de carro para el usuario.</span><span class="sxs-lookup"><span data-stu-id="6da43-194">The `GetCartId` method returns the cart `ID` for the user.</span></span> <span data-ttu-id="6da43-195">El `ID` del carro se usa para realizar el seguimiento de los elementos que tiene un usuario en su carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="6da43-195">The cart `ID` is used to track the items that a user has in their shopping cart.</span></span> <span data-ttu-id="6da43-196">Si el usuario no tiene un carro existente `ID`, se crea un nuevo carro `ID`.</span><span class="sxs-lookup"><span data-stu-id="6da43-196">If the user does not have an existing cart `ID`, a new cart `ID` is created for them.</span></span> <span data-ttu-id="6da43-197">Si el usuario ha iniciado sesión como usuario registrado, el carro `ID` se establece en su nombre de usuario.</span><span class="sxs-lookup"><span data-stu-id="6da43-197">If the user is signed in as a registered user, the cart `ID` is set to their user name.</span></span> <span data-ttu-id="6da43-198">Sin embargo, si el usuario no ha iniciado sesión, el carro `ID` se establece en un valor único (un GUID).</span><span class="sxs-lookup"><span data-stu-id="6da43-198">However, if the user is not signed in, the cart `ID` is set to a unique value (a GUID).</span></span> <span data-ttu-id="6da43-199">Un GUID garantiza que solo se crea un carro para cada usuario, en función de la sesión.</span><span class="sxs-lookup"><span data-stu-id="6da43-199">A GUID ensures that only one cart is created for each user, based on session.</span></span>

<span data-ttu-id="6da43-200">El método `GetCartItems` devuelve una lista de los elementos del carro de la compra del usuario.</span><span class="sxs-lookup"><span data-stu-id="6da43-200">The `GetCartItems` method returns a list of shopping cart items for the user.</span></span> <span data-ttu-id="6da43-201">Más adelante en este tutorial, verá que el enlace de modelos se usa para mostrar los elementos del carro en el carro de la compra con el método `GetCartItems`.</span><span class="sxs-lookup"><span data-stu-id="6da43-201">Later in this tutorial, you will see that model binding is used to display the cart items in the shopping cart using the `GetCartItems` method.</span></span>

### <a name="creating-the-add-to-cart-functionality"></a><span data-ttu-id="6da43-202">Creación de la funcionalidad de complementos</span><span class="sxs-lookup"><span data-stu-id="6da43-202">Creating the Add-To-Cart Functionality</span></span>

<span data-ttu-id="6da43-203">Como se mencionó anteriormente, creará una página de procesamiento denominada *AddToCart. aspx* que se utilizará para agregar nuevos productos al carro de la compra del usuario.</span><span class="sxs-lookup"><span data-stu-id="6da43-203">As mentioned earlier, you will create a processing page named *AddToCart.aspx* that will be used to add new products to the shopping cart of the user.</span></span> <span data-ttu-id="6da43-204">Esta página llamará al método `AddToCart` en la clase `ShoppingCart` que acaba de crear.</span><span class="sxs-lookup"><span data-stu-id="6da43-204">This page will call the `AddToCart` method in the `ShoppingCart` class that you just created.</span></span> <span data-ttu-id="6da43-205">La página *AddToCart. aspx* esperará que se le pase un `ID` del producto.</span><span class="sxs-lookup"><span data-stu-id="6da43-205">The *AddToCart.aspx* page will expect that a product `ID` is passed to it.</span></span> <span data-ttu-id="6da43-206">Este `ID` de producto se usará al llamar al método `AddToCart` en la clase `ShoppingCart`.</span><span class="sxs-lookup"><span data-stu-id="6da43-206">This product `ID` will be used when calling the `AddToCart` method in the `ShoppingCart` class.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="6da43-207">Modificará el código subyacente (*AddToCart.aspx.CS*) de esta página, no la interfaz de usuario de la página (*AddToCart. aspx*).</span><span class="sxs-lookup"><span data-stu-id="6da43-207">You will be modifying the code-behind (*AddToCart.aspx.cs*) for this page, not the page UI (*AddToCart.aspx*).</span></span>

#### <a name="to-create-the-add-to-cart-functionality"></a><span data-ttu-id="6da43-208">Para crear la funcionalidad del complemento de carro:</span><span class="sxs-lookup"><span data-stu-id="6da43-208">To create the Add-To-Cart functionality:</span></span>

1. <span data-ttu-id="6da43-209">En **Explorador de soluciones**, haga clic con el botón secundario en el proyecto **WingtipToys**, haga clic en **Agregar** -&gt; **nuevo elemento**.</span><span class="sxs-lookup"><span data-stu-id="6da43-209">In **Solution Explorer**, right-click the **WingtipToys**project, click **Add** -&gt; **New Item**.</span></span>  
   <span data-ttu-id="6da43-210">Se abrirá el cuadro de diálogo **Agregar nuevo elemento**.</span><span class="sxs-lookup"><span data-stu-id="6da43-210">The **Add New Item** dialog box is displayed.</span></span>
2. <span data-ttu-id="6da43-211">Agregue una nueva página estándar (formulario web) a la aplicación denominada *AddToCart. aspx*.</span><span class="sxs-lookup"><span data-stu-id="6da43-211">Add a standard new page (Web Form) to the application named *AddToCart.aspx*.</span></span> 

    ![Carro de la compra: agregar formulario web](shopping-cart/_static/image4.png)
3. <span data-ttu-id="6da43-213">En **Explorador de soluciones**, haga clic con el botón secundario en la página *AddToCart. aspx* y, a continuación, haga clic en **Ver código**.</span><span class="sxs-lookup"><span data-stu-id="6da43-213">In **Solution Explorer**, right-click the *AddToCart.aspx* page and then click **View Code**.</span></span> <span data-ttu-id="6da43-214">El archivo de código subyacente *AddToCart.aspx.CS* se abre en el editor.</span><span class="sxs-lookup"><span data-stu-id="6da43-214">The *AddToCart.aspx.cs* code-behind file is opened in the editor.</span></span>
4. <span data-ttu-id="6da43-215">Reemplace el código existente en el código subyacente de *AddToCart.aspx.CS* por el siguiente:</span><span class="sxs-lookup"><span data-stu-id="6da43-215">Replace the existing code in the *AddToCart.aspx.cs* code-behind with the following:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample4.cs)]

<span data-ttu-id="6da43-216">Cuando se carga la página *AddToCart. aspx* , el `ID` de producto se recupera de la cadena de consulta.</span><span class="sxs-lookup"><span data-stu-id="6da43-216">When the *AddToCart.aspx* page is loaded, the product `ID` is retrieved from the query string.</span></span> <span data-ttu-id="6da43-217">A continuación, se crea una instancia de la clase carro de la compra y se usa para llamar al método `AddToCart` que agregó anteriormente en este tutorial.</span><span class="sxs-lookup"><span data-stu-id="6da43-217">Next, an instance of the shopping cart class is created and used to call the `AddToCart` method that you added earlier in this tutorial.</span></span> <span data-ttu-id="6da43-218">El método `AddToCart`, contenido en el archivo *ShoppingCartActions.CS* , incluye la lógica para agregar el producto seleccionado al carro de la compra o incrementar la cantidad de producto del producto seleccionado.</span><span class="sxs-lookup"><span data-stu-id="6da43-218">The `AddToCart` method, contained in the *ShoppingCartActions.cs* file, includes the logic to add the selected product to the shopping cart or increment the product quantity of the selected product.</span></span> <span data-ttu-id="6da43-219">Si el producto no se ha agregado al carro de la compra, el producto se agrega a la tabla de `CartItem` de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="6da43-219">If the product hasn't been added to the shopping cart, the product is added to the `CartItem` table of the database.</span></span> <span data-ttu-id="6da43-220">Si el producto ya se ha agregado al carro de la compra y el usuario agrega un elemento adicional del mismo producto, la cantidad del producto se incrementa en la tabla `CartItem`.</span><span class="sxs-lookup"><span data-stu-id="6da43-220">If the product has already been added to the shopping cart and the user adds an additional item of the same product, the product quantity is incremented in the `CartItem` table.</span></span> <span data-ttu-id="6da43-221">Por último, la página redirige de nuevo a la página *ShoppingCart. aspx* que agregará en el paso siguiente, donde el usuario ve una lista actualizada de los elementos del carro.</span><span class="sxs-lookup"><span data-stu-id="6da43-221">Finally, the page redirects back to the *ShoppingCart.aspx* page that you'll add in the next step, where the user sees an updated list of items in the cart.</span></span>

<span data-ttu-id="6da43-222">Como se mencionó anteriormente, un usuario `ID` se usa para identificar los productos que están asociados a un usuario específico.</span><span class="sxs-lookup"><span data-stu-id="6da43-222">As previously mentioned, a user `ID` is used to identify the products that are associated with a specific user.</span></span> <span data-ttu-id="6da43-223">Este `ID` se agrega a una fila de la tabla `CartItem` cada vez que el usuario agrega un producto al carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="6da43-223">This `ID` is added to a row in the `CartItem` table each time the user adds a product to the shopping cart.</span></span>

### <a name="creating-the-shopping-cart-ui"></a><span data-ttu-id="6da43-224">Creación de la interfaz de usuario del carro de la compra</span><span class="sxs-lookup"><span data-stu-id="6da43-224">Creating the Shopping Cart UI</span></span>

<span data-ttu-id="6da43-225">La página *ShoppingCart. aspx* mostrará los productos que el usuario ha agregado a su carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="6da43-225">The *ShoppingCart.aspx* page will display the products that the user has added to their shopping cart.</span></span> <span data-ttu-id="6da43-226">También proporciona la capacidad de agregar, quitar y actualizar elementos en el carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="6da43-226">It will also provide the ability to add, remove and update items in the shopping cart.</span></span>

1. <span data-ttu-id="6da43-227">En **Explorador de soluciones**, haga clic con el botón secundario en **WingtipToys**, haga clic en **Agregar** -&gt; **nuevo elemento**.</span><span class="sxs-lookup"><span data-stu-id="6da43-227">In **Solution Explorer**, right-click **WingtipToys**, click **Add** -&gt; **New Item**.</span></span>  
   <span data-ttu-id="6da43-228">Se abrirá el cuadro de diálogo **Agregar nuevo elemento**.</span><span class="sxs-lookup"><span data-stu-id="6da43-228">The **Add New Item** dialog box is displayed.</span></span>
2. <span data-ttu-id="6da43-229">Agregue una nueva página (formulario web) que incluya una página maestra seleccionando **Web Forms mediante la página maestra**.</span><span class="sxs-lookup"><span data-stu-id="6da43-229">Add a new page (Web Form) that includes a master page by selecting **Web Form using Master Page**.</span></span> <span data-ttu-id="6da43-230">Asigne a la nueva página el nombre *ShoppingCart. aspx*.</span><span class="sxs-lookup"><span data-stu-id="6da43-230">Name the new page *ShoppingCart.aspx*.</span></span>
3. <span data-ttu-id="6da43-231">Seleccione **site. Master** para adjuntar la página maestra a la página *. aspx* recién creada.</span><span class="sxs-lookup"><span data-stu-id="6da43-231">Select **Site.Master** to attach the master page to the newly created *.aspx* page.</span></span>
4. <span data-ttu-id="6da43-232">En la página *ShoppingCart. aspx* , reemplace el marcado existente por el marcado siguiente:</span><span class="sxs-lookup"><span data-stu-id="6da43-232">In the *ShoppingCart.aspx* page, replace the existing markup with the following markup:</span></span>   

    [!code-aspx[Main](shopping-cart/samples/sample5.aspx)]

<span data-ttu-id="6da43-233">La página *ShoppingCart. aspx* incluye un control **GridView** denominado `CartList`.</span><span class="sxs-lookup"><span data-stu-id="6da43-233">The *ShoppingCart.aspx* page includes a **GridView** control named `CartList`.</span></span> <span data-ttu-id="6da43-234">Este control utiliza el enlace de modelos para enlazar los datos del carro de la compra de la base de datos al control **GridView** .</span><span class="sxs-lookup"><span data-stu-id="6da43-234">This control uses model binding to bind the shopping cart data from the database to the **GridView** control.</span></span> <span data-ttu-id="6da43-235">Al establecer la propiedad `ItemType` del control **GridView** , la expresión de enlace de datos `Item` está disponible en el marcado del control y el control se vuelve fuertemente tipado.</span><span class="sxs-lookup"><span data-stu-id="6da43-235">When you set the `ItemType` property of the **GridView** control, the data-binding expression `Item` is available in the markup of the control and the control becomes strongly typed.</span></span> <span data-ttu-id="6da43-236">Como se mencionó anteriormente en esta serie de tutoriales, puede seleccionar detalles del objeto de `Item` mediante IntelliSense.</span><span class="sxs-lookup"><span data-stu-id="6da43-236">As mentioned earlier in this tutorial series, you can select details of the `Item` object using IntelliSense.</span></span> <span data-ttu-id="6da43-237">Para configurar un control de datos para que use el enlace de modelos para seleccionar datos, establezca la propiedad `SelectMethod` del control.</span><span class="sxs-lookup"><span data-stu-id="6da43-237">To configure a data control to use model binding to select data, you set the `SelectMethod` property of the control.</span></span> <span data-ttu-id="6da43-238">En el marcado anterior, establezca el `SelectMethod` para utilizar el método GetShoppingCartItems que devuelve una lista de objetos `CartItem`.</span><span class="sxs-lookup"><span data-stu-id="6da43-238">In the markup above, you set the `SelectMethod` to use the GetShoppingCartItems method which returns a list of `CartItem` objects.</span></span> <span data-ttu-id="6da43-239">El control de datos **GridView** llama al método en el momento adecuado del ciclo de vida de la página y enlaza automáticamente los datos devueltos.</span><span class="sxs-lookup"><span data-stu-id="6da43-239">The **GridView** data control calls the method at the appropriate time in the page life cycle and automatically binds the returned data.</span></span> <span data-ttu-id="6da43-240">Todavía se debe agregar el método `GetShoppingCartItems`.</span><span class="sxs-lookup"><span data-stu-id="6da43-240">The `GetShoppingCartItems` method must still be added.</span></span>

#### <a name="retrieving-the-shopping-cart-items"></a><span data-ttu-id="6da43-241">Recuperación de los elementos del carro de la compra</span><span class="sxs-lookup"><span data-stu-id="6da43-241">Retrieving the Shopping Cart Items</span></span>

<span data-ttu-id="6da43-242">A continuación, agregue código al código subyacente de *ShoppingCart.aspx.CS* para recuperar y rellenar la interfaz de usuario del carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="6da43-242">Next, you add code to the *ShoppingCart.aspx.cs* code-behind to retrieve and populate the Shopping Cart UI.</span></span>

1. <span data-ttu-id="6da43-243">En **Explorador de soluciones**, haga clic con el botón secundario en la página *ShoppingCart. aspx* y, a continuación, haga clic en **Ver código**.</span><span class="sxs-lookup"><span data-stu-id="6da43-243">In **Solution Explorer**, right-click the *ShoppingCart.aspx* page and then click **View Code**.</span></span> <span data-ttu-id="6da43-244">El archivo de código subyacente *ShoppingCart.aspx.CS* se abre en el editor.</span><span class="sxs-lookup"><span data-stu-id="6da43-244">The *ShoppingCart.aspx.cs* code-behind file is opened in the editor.</span></span>
2. <span data-ttu-id="6da43-245">Reemplace el código existente por el siguiente:</span><span class="sxs-lookup"><span data-stu-id="6da43-245">Replace the existing code with the following:</span></span>  

    [!code-csharp[Main](shopping-cart/samples/sample6.cs)]

<span data-ttu-id="6da43-246">Como se mencionó anteriormente, el control de datos `GridView` llama al método `GetShoppingCartItems` en el momento adecuado del ciclo de vida de la página y enlaza automáticamente los datos devueltos.</span><span class="sxs-lookup"><span data-stu-id="6da43-246">As mentioned above, the `GridView` data control calls the `GetShoppingCartItems` method at the appropriate time in the page life cycle and automatically binds the returned data.</span></span> <span data-ttu-id="6da43-247">El método `GetShoppingCartItems` crea una instancia del objeto `ShoppingCartActions`.</span><span class="sxs-lookup"><span data-stu-id="6da43-247">The `GetShoppingCartItems` method creates an instance of the `ShoppingCartActions` object.</span></span> <span data-ttu-id="6da43-248">A continuación, el código usa esa instancia para devolver los elementos del carro llamando al método `GetCartItems`.</span><span class="sxs-lookup"><span data-stu-id="6da43-248">Then, the code uses that instance to return the items in the cart by calling the `GetCartItems` method.</span></span>

### <a name="adding-products-to-the-shopping-cart"></a><span data-ttu-id="6da43-249">Agregar productos al carro de la compra</span><span class="sxs-lookup"><span data-stu-id="6da43-249">Adding Products to the Shopping Cart</span></span>

<span data-ttu-id="6da43-250">Cuando se muestra la página *productlist. aspx* o *productdetails. aspx* , el usuario podrá agregar el producto al carro de la compra mediante un vínculo.</span><span class="sxs-lookup"><span data-stu-id="6da43-250">When either the *ProductList.aspx* or the *ProductDetails.aspx* page is displayed, the user will be able to add the product to the shopping cart using a link.</span></span> <span data-ttu-id="6da43-251">Al hacer clic en el vínculo, la aplicación navega a la página de procesamiento denominada *AddToCart. aspx*.</span><span class="sxs-lookup"><span data-stu-id="6da43-251">When they click the link, the application navigates to the processing page named *AddToCart.aspx*.</span></span> <span data-ttu-id="6da43-252">La página *AddToCart. aspx* llamará al método `AddToCart` de la clase `ShoppingCart` que agregó anteriormente en este tutorial.</span><span class="sxs-lookup"><span data-stu-id="6da43-252">The *AddToCart.aspx* page will call the `AddToCart` method in the `ShoppingCart` class that you added earlier in this tutorial.</span></span>

<span data-ttu-id="6da43-253">Ahora, agregará un vínculo **Agregar al carro** a las páginas *productlist. aspx* y *productdetails. aspx* .</span><span class="sxs-lookup"><span data-stu-id="6da43-253">Now, you'll add an **Add to Cart** link to both the *ProductList.aspx* page and the *ProductDetails.aspx* page.</span></span> <span data-ttu-id="6da43-254">Este vínculo incluirá el `ID` del producto que se recupera de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="6da43-254">This link will include the product `ID` that is retrieved from the database.</span></span>

1. <span data-ttu-id="6da43-255">En **Explorador de soluciones**, busque y abra la página denominada *productlist. aspx*.</span><span class="sxs-lookup"><span data-stu-id="6da43-255">In **Solution Explorer**, find and open the page named *ProductList.aspx*.</span></span>
2. <span data-ttu-id="6da43-256">Agregue el marcado resaltado en amarillo a la página *productlist. aspx* para que toda la página aparezca de la manera siguiente:</span><span class="sxs-lookup"><span data-stu-id="6da43-256">Add the markup highlighted in yellow to the *ProductList.aspx* page so that the entire page appears as follows:</span></span>  

    [!code-aspx[Main](shopping-cart/samples/sample7.aspx?highlight=50-54)]

### <a name="testing-the-shopping-cart"></a><span data-ttu-id="6da43-257">Probar el carro de la compra</span><span class="sxs-lookup"><span data-stu-id="6da43-257">Testing the Shopping Cart</span></span>

<span data-ttu-id="6da43-258">Ejecute la aplicación para ver cómo agrega productos al carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="6da43-258">Run the application to see how you add products to the shopping cart.</span></span>

1. <span data-ttu-id="6da43-259">Presione **F5** para ejecutar la aplicación.</span><span class="sxs-lookup"><span data-stu-id="6da43-259">Press **F5** to run the application.</span></span>  
 <span data-ttu-id="6da43-260">Después de que el proyecto vuelva a crear la base de datos, el explorador se abrirá y mostrará la página *default. aspx* .</span><span class="sxs-lookup"><span data-stu-id="6da43-260">After the project recreates the database, the browser will open and show the *Default.aspx* page.</span></span>
2. <span data-ttu-id="6da43-261">Seleccione **automóviles** en el menú de navegación categoría.</span><span class="sxs-lookup"><span data-stu-id="6da43-261">Select **Cars** from the category navigation menu.</span></span>  
 <span data-ttu-id="6da43-262">Se muestra la página *productlist. aspx* que muestra solo los productos incluidos en la categoría "automóviles".</span><span class="sxs-lookup"><span data-stu-id="6da43-262">The *ProductList.aspx* page is displayed showing only products included in the "Cars" category.</span></span> 

    ![Carro de la compra: automóviles](shopping-cart/_static/image5.png)
3. <span data-ttu-id="6da43-264">Haga clic en el vínculo **Agregar al carro** situado junto al primer producto que aparece (el automóvil convertible).</span><span class="sxs-lookup"><span data-stu-id="6da43-264">Click the **Add to Cart** link next to the first product listed (the convertible car).</span></span>   
 <span data-ttu-id="6da43-265">Se muestra la página *ShoppingCart. aspx* , que muestra la selección en el carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="6da43-265">The *ShoppingCart.aspx* page is displayed, showing the selection in your shopping cart.</span></span> 

    ![Carro de la compra: carro](shopping-cart/_static/image6.png)
4. <span data-ttu-id="6da43-267">Para ver productos adicionales, seleccione **aviones** en el menú de navegación categoría.</span><span class="sxs-lookup"><span data-stu-id="6da43-267">View additional products by selecting **Planes** from the category navigation menu.</span></span>
5. <span data-ttu-id="6da43-268">Haga clic en el vínculo **Agregar al carro** situado junto al primer producto de la lista.</span><span class="sxs-lookup"><span data-stu-id="6da43-268">Click the **Add to Cart** link next to the first product listed.</span></span>  
 <span data-ttu-id="6da43-269">La página *ShoppingCart. aspx* se muestra con el elemento adicional.</span><span class="sxs-lookup"><span data-stu-id="6da43-269">The *ShoppingCart.aspx* page is displayed with the additional item.</span></span>
6. <span data-ttu-id="6da43-270">Cierre el explorador.</span><span class="sxs-lookup"><span data-stu-id="6da43-270">Close the browser.</span></span>

### <a name="calculating-and-displaying-the-order-total"></a><span data-ttu-id="6da43-271">Calcular y mostrar el total del pedido</span><span class="sxs-lookup"><span data-stu-id="6da43-271">Calculating and Displaying the Order Total</span></span>

<span data-ttu-id="6da43-272">Además de agregar productos al carro de la compra, agregará un método `GetTotal` a la clase `ShoppingCart` y mostrará el importe total del pedido en la página carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="6da43-272">In addition to adding products to the shopping cart, you will add a `GetTotal` method to the `ShoppingCart` class and display the total order amount in the shopping cart page.</span></span>

1. <span data-ttu-id="6da43-273">En **Explorador de soluciones**, abra el archivo *ShoppingCartActions.CS* en la carpeta *Logic* .</span><span class="sxs-lookup"><span data-stu-id="6da43-273">In **Solution Explorer**, open the *ShoppingCartActions.cs* file in the *Logic* folder.</span></span>
2. <span data-ttu-id="6da43-274">Agregue el siguiente método de `GetTotal` resaltado en amarillo a la clase `ShoppingCart`, de modo que la clase aparezca como sigue:</span><span class="sxs-lookup"><span data-stu-id="6da43-274">Add the following `GetTotal` method highlighted in yellow to the `ShoppingCart` class, so that the class appears as follows:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample8.cs?highlight=85-97)]

<span data-ttu-id="6da43-275">En primer lugar, el método `GetTotal` obtiene el identificador del carro de la compra del usuario.</span><span class="sxs-lookup"><span data-stu-id="6da43-275">First, the `GetTotal` method gets the ID of the shopping cart for the user.</span></span> <span data-ttu-id="6da43-276">Después, el método obtiene el total del carro multiplicando el precio del producto por la cantidad de producto de cada producto que se muestra en el carro.</span><span class="sxs-lookup"><span data-stu-id="6da43-276">Then the method gets the cart total by multiplying the product price by the product quantity for each product listed in the cart.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="6da43-277">En el código anterior se usa el tipo que acepta valores NULL "`int?`".</span><span class="sxs-lookup"><span data-stu-id="6da43-277">The above code uses the nullable type "`int?`".</span></span> <span data-ttu-id="6da43-278">Los tipos que aceptan valores NULL pueden representar todos los valores de un tipo subyacente y también como un valor null.</span><span class="sxs-lookup"><span data-stu-id="6da43-278">Nullable types can represent all the values of an underlying type, and also as a null value.</span></span> <span data-ttu-id="6da43-279">Para obtener más información, vea [usar tipos que aceptan valores NULL](https://msdn.microsoft.com/library/2cf62fcy(v=vs.110).aspx).</span><span class="sxs-lookup"><span data-stu-id="6da43-279">For more information see, [Using Nullable Types](https://msdn.microsoft.com/library/2cf62fcy(v=vs.110).aspx).</span></span>

### <a name="modify-the-shopping-cart-display"></a><span data-ttu-id="6da43-280">Modificar la presentación del carro de la compra</span><span class="sxs-lookup"><span data-stu-id="6da43-280">Modify the Shopping Cart Display</span></span>

<span data-ttu-id="6da43-281">A continuación, modificará el código de la página *ShoppingCart. aspx* para llamar al método `GetTotal` y mostrará el total en la página *ShoppingCart. aspx* cuando se cargue la página.</span><span class="sxs-lookup"><span data-stu-id="6da43-281">Next you'll modify the code for the *ShoppingCart.aspx* page to call the `GetTotal` method and display that total on the *ShoppingCart.aspx* page when the page loads.</span></span>

1. <span data-ttu-id="6da43-282">En **Explorador de soluciones**, haga clic con el botón secundario en la página *ShoppingCart. aspx* y seleccione **Ver código**.</span><span class="sxs-lookup"><span data-stu-id="6da43-282">In **Solution Explorer**, right-click the *ShoppingCart.aspx* page and select **View Code**.</span></span>
2. <span data-ttu-id="6da43-283">En el archivo *ShoppingCart.aspx.CS* , actualice el controlador de `Page_Load` agregando el siguiente código resaltado en amarillo:</span><span class="sxs-lookup"><span data-stu-id="6da43-283">In the *ShoppingCart.aspx.cs* file, update the `Page_Load` handler by adding the following code highlighted in yellow:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample9.cs?highlight=16-31)]

<span data-ttu-id="6da43-284">Cuando se carga la página *ShoppingCart. aspx* , carga el objeto de carro de la compra y, a continuación, recupera el total del carro de la compra llamando al método `GetTotal` de la clase `ShoppingCart`.</span><span class="sxs-lookup"><span data-stu-id="6da43-284">When the *ShoppingCart.aspx* page loads, it loads the shopping cart object and then retrieves the shopping cart total by calling the `GetTotal` method of the `ShoppingCart` class.</span></span> <span data-ttu-id="6da43-285">Si el carro de la compra está vacío, se muestra un mensaje al efecto.</span><span class="sxs-lookup"><span data-stu-id="6da43-285">If the shopping cart is empty, a message to that effect is displayed.</span></span>

### <a name="testing-the-shopping-cart-total"></a><span data-ttu-id="6da43-286">Prueba del total del carro de la compra</span><span class="sxs-lookup"><span data-stu-id="6da43-286">Testing the Shopping Cart Total</span></span>

<span data-ttu-id="6da43-287">Ejecute la aplicación ahora para ver cómo no solo puede Agregar un producto al carro de la compra, pero puede ver el total del carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="6da43-287">Run the application now to see how you can not only add a product to the shopping cart, but you can see the shopping cart total.</span></span>

1. <span data-ttu-id="6da43-288">Presione **F5** para ejecutar la aplicación.</span><span class="sxs-lookup"><span data-stu-id="6da43-288">Press **F5** to run the application.</span></span>  
 <span data-ttu-id="6da43-289">El explorador se abrirá y mostrará la página *default. aspx* .</span><span class="sxs-lookup"><span data-stu-id="6da43-289">The browser will open and show the *Default.aspx* page.</span></span>
2. <span data-ttu-id="6da43-290">Seleccione **automóviles** en el menú de navegación categoría.</span><span class="sxs-lookup"><span data-stu-id="6da43-290">Select **Cars** from the category navigation menu.</span></span>
3. <span data-ttu-id="6da43-291">Haga clic en el vínculo **Agregar al carro** junto al primer producto.</span><span class="sxs-lookup"><span data-stu-id="6da43-291">Click the **Add To Cart** link next to the first product.</span></span>   
 <span data-ttu-id="6da43-292">La página *ShoppingCart. aspx* se muestra con el total del pedido.</span><span class="sxs-lookup"><span data-stu-id="6da43-292">The *ShoppingCart.aspx* page is displayed with the order total.</span></span> 

    ![Carro de la compra: total del carro](shopping-cart/_static/image7.png)
4. <span data-ttu-id="6da43-294">Agregue otros productos (por ejemplo, un plano) al carro.</span><span class="sxs-lookup"><span data-stu-id="6da43-294">Add some other products (for example, a plane) to the cart.</span></span>
5. <span data-ttu-id="6da43-295">La página *ShoppingCart. aspx* se muestra con un total actualizado de todos los productos que ha agregado.</span><span class="sxs-lookup"><span data-stu-id="6da43-295">The *ShoppingCart.aspx* page is displayed with an updated total for all the products you've added.</span></span> 

    ![Carro de la compra-varios productos](shopping-cart/_static/image8.png)
6. <span data-ttu-id="6da43-297">Cierre la ventana del explorador para detener la aplicación en ejecución.</span><span class="sxs-lookup"><span data-stu-id="6da43-297">Stop the running app by closing the browser window.</span></span>

### <a name="adding-update-and-checkout-buttons-to-the-shopping-cart"></a><span data-ttu-id="6da43-298">Adición de botones de actualización y desprotección al carro de la compra</span><span class="sxs-lookup"><span data-stu-id="6da43-298">Adding Update and Checkout Buttons to the Shopping Cart</span></span>

<span data-ttu-id="6da43-299">Para permitir que los usuarios modifiquen el carro de la compra, agregará un botón **Actualizar** y un botón **Desproteger** en la página carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="6da43-299">To allow the users to modify the shopping cart, you'll add an **Update** button and a **Checkout** button to the shopping cart page.</span></span> <span data-ttu-id="6da43-300">El botón **Desproteger** no se utiliza hasta más adelante en esta serie de tutoriales.</span><span class="sxs-lookup"><span data-stu-id="6da43-300">The **Checkout** button is not used until later in this tutorial series.</span></span>

1. <span data-ttu-id="6da43-301">En **Explorador de soluciones**, abra la página *ShoppingCart. aspx* en la raíz del proyecto de aplicación Web.</span><span class="sxs-lookup"><span data-stu-id="6da43-301">In **Solution Explorer**, open the *ShoppingCart.aspx* page in the root of the web application project.</span></span>
2. <span data-ttu-id="6da43-302">Para agregar el botón **Actualizar** y el botón **Desproteger** a la página *ShoppingCart. aspx* , agregue el marcado resaltado en amarillo al marcado existente, tal como se muestra en el código siguiente:</span><span class="sxs-lookup"><span data-stu-id="6da43-302">To add the **Update** button and the **Checkout** button to the *ShoppingCart.aspx* page, add the markup highlighted in yellow to the existing markup, as shown in the following code:</span></span>   

    [!code-aspx[Main](shopping-cart/samples/sample10.aspx?highlight=36-45)]

<span data-ttu-id="6da43-303">Cuando el usuario haga clic en el botón **Actualizar** , se llamará al controlador de eventos `UpdateBtn_Click`.</span><span class="sxs-lookup"><span data-stu-id="6da43-303">When the user clicks the **Update** button, the `UpdateBtn_Click` event handler will be called.</span></span> <span data-ttu-id="6da43-304">Este controlador de eventos llamará al código que agregará en el paso siguiente.</span><span class="sxs-lookup"><span data-stu-id="6da43-304">This event handler will call the code that you'll add in the next step.</span></span>

<span data-ttu-id="6da43-305">A continuación, puede actualizar el código contenido en el archivo *ShoppingCart.aspx.CS* para recorrer los elementos del carro y llamar a los métodos `RemoveItem` y `UpdateItem`.</span><span class="sxs-lookup"><span data-stu-id="6da43-305">Next, you can update the code contained in the *ShoppingCart.aspx.cs* file to loop through the cart items and call the `RemoveItem` and `UpdateItem` methods.</span></span>

1. <span data-ttu-id="6da43-306">En **Explorador de soluciones**, abra el archivo *ShoppingCart.aspx.CS* en la raíz del proyecto de aplicación Web.</span><span class="sxs-lookup"><span data-stu-id="6da43-306">In **Solution Explorer**, open the *ShoppingCart.aspx.cs* file in the root of the web application project.</span></span>
2. <span data-ttu-id="6da43-307">Agregue las siguientes secciones de código resaltadas en amarillo al archivo *ShoppingCart.aspx.CS* :</span><span class="sxs-lookup"><span data-stu-id="6da43-307">Add the following code sections highlighted in yellow to the *ShoppingCart.aspx.cs* file:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample11.cs?highlight=9-11,33,44-89)]

<span data-ttu-id="6da43-308">Cuando el usuario hace clic en el botón **Actualizar** de la página *ShoppingCart. aspx* , se llama al método UpdateCartItems.</span><span class="sxs-lookup"><span data-stu-id="6da43-308">When the user clicks the **Update** button on the *ShoppingCart.aspx* page, the UpdateCartItems method is called.</span></span> <span data-ttu-id="6da43-309">El método UpdateCartItems obtiene los valores actualizados de cada elemento en el carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="6da43-309">The UpdateCartItems method gets the updated values for each item in the shopping cart.</span></span> <span data-ttu-id="6da43-310">A continuación, el método UpdateCartItems llama al método `UpdateShoppingCartDatabase` (agregado y explicado en el paso siguiente) para agregar o quitar elementos del carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="6da43-310">Then, the UpdateCartItems method calls the `UpdateShoppingCartDatabase` method (added and explained in the next step) to either add or remove items from the shopping cart.</span></span> <span data-ttu-id="6da43-311">Una vez actualizada la base de datos para reflejar las actualizaciones en el carro de la compra, el control **GridView** se actualiza en la página del carro de la compra llamando al método `DataBind` para **GridView**.</span><span class="sxs-lookup"><span data-stu-id="6da43-311">Once the database has been updated to reflect the updates to the shopping cart, the **GridView** control is updated on the shopping cart page by calling the `DataBind` method for the **GridView**.</span></span> <span data-ttu-id="6da43-312">Además, el importe total del pedido en la página del carro de la compra se actualiza para reflejar la lista actualizada de elementos.</span><span class="sxs-lookup"><span data-stu-id="6da43-312">Also, the total order amount on the shopping cart page is updated to reflect the updated list of items.</span></span>

### <a name="updating-and-removing-shopping-cart-items"></a><span data-ttu-id="6da43-313">Actualización y eliminación de elementos del carro de la compra</span><span class="sxs-lookup"><span data-stu-id="6da43-313">Updating and Removing Shopping Cart Items</span></span>

<span data-ttu-id="6da43-314">En la página *ShoppingCart. aspx* , puede ver que se han agregado controles para actualizar la cantidad de un elemento y quitar un elemento.</span><span class="sxs-lookup"><span data-stu-id="6da43-314">On the *ShoppingCart.aspx* page, you can see controls have been added for updating the quantity of an item and removing an item.</span></span> <span data-ttu-id="6da43-315">Ahora, agregue el código que hará que estos controles funcionen.</span><span class="sxs-lookup"><span data-stu-id="6da43-315">Now, add the code that will make these controls work.</span></span>

1. <span data-ttu-id="6da43-316">En **Explorador de soluciones**, abra el archivo *ShoppingCartActions.CS* en la carpeta *Logic* .</span><span class="sxs-lookup"><span data-stu-id="6da43-316">In **Solution Explorer**, open the *ShoppingCartActions.cs* file in the *Logic* folder.</span></span>
2. <span data-ttu-id="6da43-317">Agregue el siguiente código resaltado en amarillo al archivo de clase *ShoppingCartActions.CS* :</span><span class="sxs-lookup"><span data-stu-id="6da43-317">Add the following code highlighted in yellow to the *ShoppingCartActions.cs* class file:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample12.cs?highlight=99-213)]

<span data-ttu-id="6da43-318">El método `UpdateShoppingCartDatabase`, al que se llama desde el método `UpdateCartItems` de la página *ShoppingCart.aspx.CS* , contiene la lógica para actualizar o quitar elementos del carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="6da43-318">The `UpdateShoppingCartDatabase` method, called from the `UpdateCartItems` method on the *ShoppingCart.aspx.cs* page, contains the logic to either update or remove items from the shopping cart.</span></span> <span data-ttu-id="6da43-319">El método `UpdateShoppingCartDatabase` recorre en iteración todas las filas de la lista de carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="6da43-319">The `UpdateShoppingCartDatabase` method iterates through all the rows within the shopping cart list.</span></span> <span data-ttu-id="6da43-320">Si se ha marcado un elemento de carro de la compra para quitarlo o la cantidad es menor que uno, se llama al método `RemoveItem`.</span><span class="sxs-lookup"><span data-stu-id="6da43-320">If a shopping cart item has been marked to be removed, or the quantity is less than one, the `RemoveItem` method is called.</span></span> <span data-ttu-id="6da43-321">De lo contrario, se comprueba si hay actualizaciones en el elemento de carro de la compra cuando se llama al método `UpdateItem`.</span><span class="sxs-lookup"><span data-stu-id="6da43-321">Otherwise, the shopping cart item is checked for updates when the `UpdateItem` method is called.</span></span> <span data-ttu-id="6da43-322">Una vez que se ha quitado o actualizado el elemento del carro de la compra, se guardan los cambios de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="6da43-322">After the shopping cart item has been removed or updated, the database changes are saved.</span></span>

<span data-ttu-id="6da43-323">La estructura de `ShoppingCartUpdates` se usa para contener todos los elementos del carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="6da43-323">The `ShoppingCartUpdates` structure is used to hold all the shopping cart items.</span></span> <span data-ttu-id="6da43-324">El método `UpdateShoppingCartDatabase` usa la estructura `ShoppingCartUpdates` para determinar si es necesario actualizar o quitar alguno de los elementos.</span><span class="sxs-lookup"><span data-stu-id="6da43-324">The `UpdateShoppingCartDatabase` method uses the `ShoppingCartUpdates` structure to determine if any of the items need to be updated or removed.</span></span>

<span data-ttu-id="6da43-325">En el siguiente tutorial, usará el método `EmptyCart` para borrar el carro de la compra después de comprar productos.</span><span class="sxs-lookup"><span data-stu-id="6da43-325">In the next tutorial, you will use the `EmptyCart` method to clear the shopping cart after purchasing products.</span></span> <span data-ttu-id="6da43-326">Pero por ahora, usará el método `GetCount` que acaba de agregar al archivo *ShoppingCartActions.CS* para determinar cuántos elementos hay en el carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="6da43-326">But for now, you will use the `GetCount` method that you just added to the *ShoppingCartActions.cs* file to determine how many items are in the shopping cart.</span></span>

### <a name="adding-a-shopping-cart-counter"></a><span data-ttu-id="6da43-327">Agregar un contador de carro de la compra</span><span class="sxs-lookup"><span data-stu-id="6da43-327">Adding a Shopping Cart Counter</span></span>

<span data-ttu-id="6da43-328">Para permitir al usuario ver el número total de elementos del carro de la compra, agregará un contador a la página *site. Master* .</span><span class="sxs-lookup"><span data-stu-id="6da43-328">To allow the user to view the total number of items in the shopping cart, you will add a counter to the *Site.Master* page.</span></span> <span data-ttu-id="6da43-329">Este contador también actuará como un vínculo al carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="6da43-329">This counter will also act as a link to the shopping cart.</span></span>

1. <span data-ttu-id="6da43-330">En **Explorador de soluciones**, abra la página *site. Master* .</span><span class="sxs-lookup"><span data-stu-id="6da43-330">In **Solution Explorer**, open the *Site.Master* page.</span></span>
2. <span data-ttu-id="6da43-331">Modifique el marcado agregando el vínculo del contador de carro de la compra como se muestra en amarillo a la sección de navegación para que aparezca de la manera siguiente:</span><span class="sxs-lookup"><span data-stu-id="6da43-331">Modify the markup by adding the shopping cart counter link as shown in yellow to the navigation section so it appears as follows:</span></span>  

    [!code-html[Main](shopping-cart/samples/sample13.html?highlight=6)]
3. <span data-ttu-id="6da43-332">A continuación, actualice el código subyacente del archivo *site.Master.CS* agregando el código resaltado en amarillo como se indica a continuación:</span><span class="sxs-lookup"><span data-stu-id="6da43-332">Next, update the code-behind of the *Site.Master.cs* file by adding the code highlighted in yellow as follows:</span></span>  

    [!code-csharp[Main](shopping-cart/samples/sample14.cs?highlight=11,77-84)]

<span data-ttu-id="6da43-333">Antes de que la página se represente como HTML, se genera el evento `Page_PreRender`.</span><span class="sxs-lookup"><span data-stu-id="6da43-333">Before the page is rendered as HTML, the `Page_PreRender` event is raised.</span></span> <span data-ttu-id="6da43-334">En el controlador de `Page_PreRender`, el recuento total del carro de la compra se determina mediante una llamada al método `GetCount`.</span><span class="sxs-lookup"><span data-stu-id="6da43-334">In the `Page_PreRender` handler, the total count of the shopping cart is determined by calling the `GetCount` method.</span></span> <span data-ttu-id="6da43-335">El valor devuelto se agrega al intervalo de `cartCount` incluido en el marcado de la página *site. Master* .</span><span class="sxs-lookup"><span data-stu-id="6da43-335">The returned value is added to the `cartCount` span included in the markup of the *Site.Master* page.</span></span> <span data-ttu-id="6da43-336">La `<span>` etiquetas permite representar correctamente los elementos internos.</span><span class="sxs-lookup"><span data-stu-id="6da43-336">The `<span>` tags enables the inner elements to be properly rendered.</span></span> <span data-ttu-id="6da43-337">Cuando se muestre cualquier página del sitio, se mostrará el total del carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="6da43-337">When any page of the site is displayed, the shopping cart total will be displayed.</span></span> <span data-ttu-id="6da43-338">El usuario también puede hacer clic en el total del carro de la compra para mostrar el carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="6da43-338">The user can also click the shopping cart total to display the shopping cart.</span></span>

## <a name="testing-the-completed-shopping-cart"></a><span data-ttu-id="6da43-339">Probar el carro de la compra completado</span><span class="sxs-lookup"><span data-stu-id="6da43-339">Testing the Completed Shopping Cart</span></span>

<span data-ttu-id="6da43-340">Ahora puede ejecutar la aplicación para ver cómo puede Agregar, eliminar y actualizar elementos en el carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="6da43-340">You can run the application now to see how you can add, delete, and update items in the shopping cart.</span></span> <span data-ttu-id="6da43-341">El total del carro de la compra reflejará el costo total de todos los artículos en el carro de la compra.</span><span class="sxs-lookup"><span data-stu-id="6da43-341">The shopping cart total will reflect the total cost of all items in the shopping cart.</span></span>

1. <span data-ttu-id="6da43-342">Presione **F5** para ejecutar la aplicación.</span><span class="sxs-lookup"><span data-stu-id="6da43-342">Press **F5** to run the application.</span></span>  
 <span data-ttu-id="6da43-343">El explorador se abre y muestra la página *default. aspx* .</span><span class="sxs-lookup"><span data-stu-id="6da43-343">The browser opens and shows the *Default.aspx* page.</span></span>
2. <span data-ttu-id="6da43-344">Seleccione **automóviles** en el menú de navegación categoría.</span><span class="sxs-lookup"><span data-stu-id="6da43-344">Select **Cars** from the category navigation menu.</span></span>
3. <span data-ttu-id="6da43-345">Haga clic en el vínculo **Agregar al carro** junto al primer producto.</span><span class="sxs-lookup"><span data-stu-id="6da43-345">Click the **Add To Cart** link next to the first product.</span></span>   
 <span data-ttu-id="6da43-346">La página *ShoppingCart. aspx* se muestra con el total del pedido.</span><span class="sxs-lookup"><span data-stu-id="6da43-346">The *ShoppingCart.aspx* page is displayed with the order total.</span></span>
4. <span data-ttu-id="6da43-347">Seleccione **planes** en el menú de navegación categoría.</span><span class="sxs-lookup"><span data-stu-id="6da43-347">Select **Planes** from the category navigation menu.</span></span>
5. <span data-ttu-id="6da43-348">Haga clic en el vínculo **Agregar al carro** junto al primer producto.</span><span class="sxs-lookup"><span data-stu-id="6da43-348">Click the **Add To Cart** link next to the first product.</span></span>
6. <span data-ttu-id="6da43-349">Establezca la cantidad del primer elemento en el carro de la compra en 3 y active la casilla **quitar elemento** del segundo elemento.<a id="a"></a></span><span class="sxs-lookup"><span data-stu-id="6da43-349">Set the quantity of the first item in the shopping cart to 3 and select the **Remove Item** check box of the second item.<a id="a"></a></span></span>
7. <span data-ttu-id="6da43-350">Haga clic en el botón **Actualizar** para actualizar la página del carro de la compra y mostrar el nuevo total del pedido.</span><span class="sxs-lookup"><span data-stu-id="6da43-350">Click the **Update** button to update the shopping cart page and display the new order total.</span></span> 

    ![Carro de la compra: actualización del carro](shopping-cart/_static/image9.png)

## <a name="summary"></a><span data-ttu-id="6da43-352">Resumen</span><span class="sxs-lookup"><span data-stu-id="6da43-352">Summary</span></span>

<span data-ttu-id="6da43-353">En este tutorial, ha creado un carro de la compra para la aplicación de ejemplo de formularios Web de Wingtip Toys.</span><span class="sxs-lookup"><span data-stu-id="6da43-353">In this tutorial, you have created a shopping cart for the Wingtip Toys Web Forms sample application.</span></span> <span data-ttu-id="6da43-354">Durante este tutorial, ha usado Entity Framework Code First, anotaciones de datos, controles de datos fuertemente tipados y enlace de modelos.</span><span class="sxs-lookup"><span data-stu-id="6da43-354">During this tutorial you have used Entity Framework Code First, data annotations, strongly typed data controls, and model binding.</span></span>

<span data-ttu-id="6da43-355">El carro de la compra permite agregar, eliminar y actualizar los artículos que el usuario ha seleccionado para su compra.</span><span class="sxs-lookup"><span data-stu-id="6da43-355">The shopping cart supports adding, deleting, and updating items that the user has selected for purchase.</span></span> <span data-ttu-id="6da43-356">Además de implementar la funcionalidad de carro de la compra, ha aprendido cómo mostrar los elementos del carro de la compra en un control **GridView** y calcular el total del pedido.</span><span class="sxs-lookup"><span data-stu-id="6da43-356">In addition to implementing the shopping cart functionality, you have learned how to display shopping cart items in a **GridView** control and calculate the order total.</span></span>

## <a name="addition-information"></a><span data-ttu-id="6da43-357">Información adicional</span><span class="sxs-lookup"><span data-stu-id="6da43-357">Addition Information</span></span>

[<span data-ttu-id="6da43-358">Introducción al estado de sesión de ASP.NET</span><span class="sxs-lookup"><span data-stu-id="6da43-358">ASP.NET Session State Overview</span></span>](https://msdn.microsoft.com/library/ms178581.aspx)

> [!div class="step-by-step"]
> <span data-ttu-id="6da43-359">[Anterior](display_data_items_and_details.md)
> [Siguiente](checkout-and-payment-with-paypal.md)</span><span class="sxs-lookup"><span data-stu-id="6da43-359">[Previous](display_data_items_and_details.md)
[Next](checkout-and-payment-with-paypal.md)</span></span>
