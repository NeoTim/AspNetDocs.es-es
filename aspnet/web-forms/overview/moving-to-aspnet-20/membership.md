---
uid: web-forms/overview/moving-to-aspnet-20/membership
title: Membresía ? Microsoft Docs
author: rick-anderson
description: ASP.NET pertenencia se basa en el éxito del modelo de autenticación de formularios a partir de ASP.NET 1.x. ASP.NET autenticación de formularios proporciona una manera conveniente de...
ms.author: riande
ms.date: 02/20/2005
ms.assetid: f2339485-5d78-4c5e-8c0a-dc9b8a315345
msc.legacyurl: /web-forms/overview/moving-to-aspnet-20/membership
msc.type: authoredcontent
ms.openlocfilehash: ed48c11cbd483de088239bad7c2452b7fc60a1cf
ms.sourcegitcommit: 022f79dbc1350e0c6ffaa1e7e7c6e850cdabf9af
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 04/17/2020
ms.locfileid: "81543774"
---
# <a name="membership"></a><span data-ttu-id="5be05-104">Pertenencia</span><span class="sxs-lookup"><span data-stu-id="5be05-104">Membership</span></span>

<span data-ttu-id="5be05-105">por [Microsoft](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="5be05-105">by [Microsoft](https://github.com/microsoft)</span></span>

> <span data-ttu-id="5be05-106">ASP.NET pertenencia se basa en el éxito del modelo de autenticación de formularios a partir de ASP.NET 1.x.</span><span class="sxs-lookup"><span data-stu-id="5be05-106">ASP.NET Membership builds on the success of the Forms authentication model from ASP.NET 1.x.</span></span> <span data-ttu-id="5be05-107">ASP.NET autenticación de formularios proporciona una manera cómoda de incorporar un formulario de inicio de sesión en la aplicación ASP.NET y validar a los usuarios con una base de datos u otro almacén de datos.</span><span class="sxs-lookup"><span data-stu-id="5be05-107">ASP.NET Forms authentication provides a convenient way to incorporate a login form into your ASP.NET application and validate users against a database or other data store.</span></span>

<span data-ttu-id="5be05-108">ASP.NET pertenencia se basa en el éxito del modelo de autenticación de formularios a partir de ASP.NET 1.x.</span><span class="sxs-lookup"><span data-stu-id="5be05-108">ASP.NET Membership builds on the success of the Forms authentication model from ASP.NET 1.x.</span></span> <span data-ttu-id="5be05-109">ASP.NET autenticación de formularios proporciona una manera cómoda de incorporar un formulario de inicio de sesión en la aplicación ASP.NET y validar a los usuarios con una base de datos u otro almacén de datos.</span><span class="sxs-lookup"><span data-stu-id="5be05-109">ASP.NET Forms authentication provides a convenient way to incorporate a login form into your ASP.NET application and validate users against a database or other data store.</span></span> <span data-ttu-id="5be05-110">Los miembros de la clase FormsAuthentication permiten gestionar las cookies para la autenticación, comprobar si hay un inicio de sesión válido, cerrar la sesión de un usuario, etc. Sin embargo, la implementación de la autenticación de formularios en una aplicación ASP.NET 1.x puede requerir una cantidad justa de código.</span><span class="sxs-lookup"><span data-stu-id="5be05-110">The members of the FormsAuthentication class make it possible to handle cookies for authentication, check for a valid login, log a user out etc. However, implementing Forms authentication in an ASP.NET 1.x application can require a fair amount of code.</span></span>

<span data-ttu-id="5be05-111">La membresía en ASP.NET 2.0 es un avance importante sobre el uso de la autenticación de formularios por sí solo.</span><span class="sxs-lookup"><span data-stu-id="5be05-111">Membership in ASP.NET 2.0 is a major advancement over using Forms authentication alone.</span></span> <span data-ttu-id="5be05-112">(La pertenencia es más sólida cuando se combina con la autenticación de formularios, pero el uso de la autenticación de formularios no es un requisito.) Como verá pronto, puede usar ASP.NET membership y los controles de inicio de sesión en ASP.NET 2.0 para implementar un sistema de pertenencia eficaz sin escribir mucho código en absoluto.</span><span class="sxs-lookup"><span data-stu-id="5be05-112">(Membership is most robust when coupled with Forms authentication, but using Forms authentication is not a requirement.) As you'll soon see, you can use ASP.NET Membership and the login controls in ASP.NET 2.0 to implement a powerful membership system without writing much code at all.</span></span>

## <a name="implementing-membership-in-aspnet-20"></a><span data-ttu-id="5be05-113">Implementación de la membresía en ASP.NET 2.0</span><span class="sxs-lookup"><span data-stu-id="5be05-113">Implementing Membership in ASP.NET 2.0</span></span>

<span data-ttu-id="5be05-114">La membresía se implementa siguiendo cuatro pasos.</span><span class="sxs-lookup"><span data-stu-id="5be05-114">Membership is implemented by following four steps.</span></span> <span data-ttu-id="5be05-115">Tenga en cuenta que hay muchos subpasos que están implicados, así como la configuración opcional que se puede implementar también.</span><span class="sxs-lookup"><span data-stu-id="5be05-115">Keep in mind that there are many sub-steps that are involved as well as optional configuration that can be implemented as well.</span></span> <span data-ttu-id="5be05-116">Estos pasos están diseñados para ilustrar el panorama general de la configuración de la pertenencia.</span><span class="sxs-lookup"><span data-stu-id="5be05-116">These steps are meant to illustrate the big picture of configuring membership.</span></span>

1. <span data-ttu-id="5be05-117">Cree la base de datos de pertenencia (si SQL Server se usa como almacén de pertenencia.)</span><span class="sxs-lookup"><span data-stu-id="5be05-117">Create your membership database (if SQL Server is used as the membership store.)</span></span>
2. <span data-ttu-id="5be05-118">Especifique las opciones de pertenencia en los archivos de configuración de las aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="5be05-118">Specify the membership options in your applications configuration files.</span></span> <span data-ttu-id="5be05-119">(La pertenencia está habilitada de forma predeterminada.)</span><span class="sxs-lookup"><span data-stu-id="5be05-119">(Membership is enabled by default.)</span></span>
3. <span data-ttu-id="5be05-120">Determine el tipo de almacén de pertenencia que desea usar.</span><span class="sxs-lookup"><span data-stu-id="5be05-120">Determine the type of membership store you want to use.</span></span> <span data-ttu-id="5be05-121">Las opciones son:</span><span class="sxs-lookup"><span data-stu-id="5be05-121">Options are:</span></span> 

    - <span data-ttu-id="5be05-122">Microsoft SQL Server (versión 7.0 o posterior)</span><span class="sxs-lookup"><span data-stu-id="5be05-122">Microsoft SQL Server (version 7.0 or later)</span></span>
    - <span data-ttu-id="5be05-123">Almacén de Active Directory</span><span class="sxs-lookup"><span data-stu-id="5be05-123">Active Directory Store</span></span>
    - <span data-ttu-id="5be05-124">Proveedor de membresía personalizado</span><span class="sxs-lookup"><span data-stu-id="5be05-124">Custom membership provider</span></span>
4. <span data-ttu-id="5be05-125">Configure la aplicación para la autenticación de formularios ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="5be05-125">Configure the application for ASP.NET Forms authentication.</span></span> <span data-ttu-id="5be05-126">Una vez más, la pertenencia está diseñada para aprovechar la autenticación de formularios, pero el uso de la autenticación de formularios no es un requisito.</span><span class="sxs-lookup"><span data-stu-id="5be05-126">Once again, Membership is designed to take advantage of Forms authentication, but using Forms authentication is not a requirement.</span></span>
5. <span data-ttu-id="5be05-127">Defina cuentas de usuario para la pertenencia y configure roles si lo desea.</span><span class="sxs-lookup"><span data-stu-id="5be05-127">Define user accounts for membership and configure roles if desired.</span></span>

## <a name="creating-the-membership-database"></a><span data-ttu-id="5be05-128">Creación de la base de datos de miembros</span><span class="sxs-lookup"><span data-stu-id="5be05-128">Creating the Membership Database</span></span>

<span data-ttu-id="5be05-129">Si usa SQL Server 7.0 o posterior como almacén de\_pertenencia, puede usar la utilidad aspnet regsql (disponible más fácilmente desde el símbolo del sistema de Visual Studio .NET 2005) para configurar la base de datos.</span><span class="sxs-lookup"><span data-stu-id="5be05-129">If you're using SQL Server 7.0 or later as your membership store, you can use the aspnet\_regsql utility (available most easily from the Visual Studio .NET 2005 Command Prompt) to configure your database.</span></span> <span data-ttu-id="5be05-130">La utilidad\_aspnet regsql se puede utilizar como una herramienta de símbolo del sistema o a través de un asistente de GUI.</span><span class="sxs-lookup"><span data-stu-id="5be05-130">The aspnet\_regsql utility can be used as a command prompt tool or via a GUI wizard.</span></span> <span data-ttu-id="5be05-131">El método del asistente es la forma más fácil de configurar la base de datos.</span><span class="sxs-lookup"><span data-stu-id="5be05-131">The wizard method is the easiest way to configure your database.</span></span> <span data-ttu-id="5be05-132">Para acceder al asistente, simplemente ejecute el siguiente comando:</span><span class="sxs-lookup"><span data-stu-id="5be05-132">To access the wizard, simply run the following command:</span></span>

`aspnet_regsql W`

<span data-ttu-id="5be05-133">Una vez que ejecute ese comando, se le presentará el Asistente para la instalación de SQL ServerSQL Server ASP.NET como se muestra a continuación.</span><span class="sxs-lookup"><span data-stu-id="5be05-133">Once you run that command, you will be presented with the ASP.NET SQL Server Setup Wizard as shown below.</span></span>

![](membership/_static/image1.jpg)

<span data-ttu-id="5be05-134">**Figura 1**</span><span class="sxs-lookup"><span data-stu-id="5be05-134">**Figure 1**</span></span>

<span data-ttu-id="5be05-135">El Asistente para la instalación de SQL ServerSQL Server ASP.NET crea el sitio Web en la instancia que especifique en el asistente.</span><span class="sxs-lookup"><span data-stu-id="5be05-135">The ASP.NET SQL Server Setup Wizard creates the Web site in the instance you specify in the wizard.</span></span> <span data-ttu-id="5be05-136">Sin embargo, ASP.NET usará la cadena de conexión en el archivo machine.config para conectarse a la base de datos.</span><span class="sxs-lookup"><span data-stu-id="5be05-136">However, ASP.NET will use the connection string in the machine.config file to connect to your database.</span></span> <span data-ttu-id="5be05-137">De forma predeterminada, esta cadena de conexión apuntará a una instancia de SQL Server 2005, por lo que si usa una instancia de SQL Server 2000 o SQL Server 7.0, deberá modificar la cadena de conexión en el archivo machine.config.</span><span class="sxs-lookup"><span data-stu-id="5be05-137">By default, this connection string will point to a SQL Server 2005 instance, so if you are using a SQL Server 2000 or SQL Server 7.0 instance, you will need to modify the connection string in the machine.config file.</span></span> <span data-ttu-id="5be05-138">Esa cadena de conexión se puede encontrar aquí:</span><span class="sxs-lookup"><span data-stu-id="5be05-138">That connection string can be located here:</span></span>

[!code-xml[Main](membership/samples/sample1.xml)]

<span data-ttu-id="5be05-139">Desafortunadamente, si no modifica la cadena de conexión, ASP.NET no le dará un error descriptivo.</span><span class="sxs-lookup"><span data-stu-id="5be05-139">Unfortunately, if you don't modify the connection string, ASP.NET will not give you a descriptive error.</span></span> <span data-ttu-id="5be05-140">Simplemente seguirá quejándose diciendo que no ha creado la base de datos.</span><span class="sxs-lookup"><span data-stu-id="5be05-140">It will just continue to complain saying that you haven't created the database.</span></span> <span data-ttu-id="5be05-141">En el caso anterior, he modificado la cadena de conexión para que apunte a mi instancia local de SQL Server 2000.</span><span class="sxs-lookup"><span data-stu-id="5be05-141">In the case above, I have modified the connection string to point to my local SQL Server 2000 instance.</span></span>

## <a name="specifying-configuration-and-adding-users-and-roles"></a><span data-ttu-id="5be05-142">Especificar la configuración y agregar usuarios y roles</span><span class="sxs-lookup"><span data-stu-id="5be05-142">Specifying Configuration and Adding Users and Roles</span></span>

<span data-ttu-id="5be05-143">El siguiente paso para configurar membership es agregar la información necesaria al archivo web.config de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="5be05-143">The next step in configuring Membership is to add the necessary information to the web.config file of the application.</span></span> <span data-ttu-id="5be05-144">En ASP.NET 1.x, modificar el archivo web.config era a veces difícil debido al uso de lowerCamelCase y la falta de Intellisense.</span><span class="sxs-lookup"><span data-stu-id="5be05-144">In ASP.NET 1.x, modifying the web.config file was sometimes difficult because of the use of lowerCamelCase and the lack of Intellisense.</span></span> <span data-ttu-id="5be05-145">Visual Studio .NET 2005 facilita mucho la tarea con Intellisense para los archivos de configuración, pero ASP.NET 2.0 va un paso más allá al proporcionar una interfaz web para editar archivos de configuración.</span><span class="sxs-lookup"><span data-stu-id="5be05-145">Visual Studio .NET 2005 makes the task much easier with Intellisense for configuration files, but ASP.NET 2.0 goes one step further by providing a Web interface for editing configuration files.</span></span>

<span data-ttu-id="5be05-146">Puede iniciar la interfaz Web haciendo clic en el botón Configuración de ASP.NET de la barra de herramientas del Explorador de soluciones, como se muestra a continuación.</span><span class="sxs-lookup"><span data-stu-id="5be05-146">You can launch the Web interface by clicking the ASP.NET Configuration button on the Solution Explorer toolbar as shown below.</span></span> <span data-ttu-id="5be05-147">También puede iniciar la interfaz Web a través de ventanas emergentes que se muestran cuando se insertan los controles de inicio de sesión.</span><span class="sxs-lookup"><span data-stu-id="5be05-147">You can also launch the Web interface via pop-ups that are displayed when Login controls are inserted.</span></span>

![](membership/_static/image2.jpg)

<span data-ttu-id="5be05-148">**Figura 2**</span><span class="sxs-lookup"><span data-stu-id="5be05-148">**Figure 2**</span></span>

<span data-ttu-id="5be05-149">Esto inicia la herramienta de administración de sitios web ASP.NET que se muestra a continuación.</span><span class="sxs-lookup"><span data-stu-id="5be05-149">This launches the ASP.NET Web Site Administration Tool shown below.</span></span> <span data-ttu-id="5be05-150">La administración de sitios web de ASP.NET es una interfaz de cuatro pestañas que facilita la administración de la configuración de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="5be05-150">The ASP.NET Web Site Administration is a four-tab interface that makes it easy to manage application settings.</span></span> <span data-ttu-id="5be05-151">Las siguientes pestañas están disponibles:</span><span class="sxs-lookup"><span data-stu-id="5be05-151">The following tabs are available:</span></span>

- <span data-ttu-id="5be05-152">**Inicio**</span><span class="sxs-lookup"><span data-stu-id="5be05-152">**Home**</span></span>
- <span data-ttu-id="5be05-153">**Seguridad** Configure usuarios, roles y acceso.</span><span class="sxs-lookup"><span data-stu-id="5be05-153">**Security** Configure users, roles, and access.</span></span>
- <span data-ttu-id="5be05-154">**Aplicación** Configure los ajustes de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="5be05-154">**Application** Configure application settings.</span></span>
- <span data-ttu-id="5be05-155">**Proveedor** Configure y pruebe el proveedor de pertenencia a aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="5be05-155">**Provider** Configure and test your applications membership provider.</span></span>

<span data-ttu-id="5be05-156">La herramienta de administración de sitios web le permite crear fácilmente nuevos usuarios, crear nuevos roles y administrar usuarios y roles.</span><span class="sxs-lookup"><span data-stu-id="5be05-156">The Web Site Administration Tool allows you to easily create new users, create new roles, and to manage users and roles.</span></span> <span data-ttu-id="5be05-157">Esta capacidad no está disponible en la interfaz de Windows.</span><span class="sxs-lookup"><span data-stu-id="5be05-157">This ability is not available in the Windows interface.</span></span> <span data-ttu-id="5be05-158">La interfaz de Windows le permite definir fácilmente la configuración de autorización y agregar, eliminar y administrar proveedores, capacidades que no están en la Herramienta de administración de sitios web.</span><span class="sxs-lookup"><span data-stu-id="5be05-158">The Windows interface allows you to easily define authorization settings and to add, delete, and manage providers, capabilities that are not in the Web Site Administration Tool.</span></span>

<span data-ttu-id="5be05-159">Para iniciar la interfaz de Windows, abra el complemento Internet Information Services, haga clic con el botón derecho en la aplicación y elija Propiedades.</span><span class="sxs-lookup"><span data-stu-id="5be05-159">To launch the Windows interface, open the Internet Information Services snap-in, right-click on your application, and choose Properties.</span></span> <span data-ttu-id="5be05-160">Haga clic en la pestaña ASP.NET y, a continuación, haga clic en el botón Editar configuración.</span><span class="sxs-lookup"><span data-stu-id="5be05-160">Click the ASP.NET tab and then click the Edit Configuration button.</span></span> <span data-ttu-id="5be05-161">(La aplicación debe ejecutarse en ASP.NET 2.0 para que se habilite el botón Editar configuración.</span><span class="sxs-lookup"><span data-stu-id="5be05-161">(The application must be running under ASP.NET 2.0 for the Edit Configuration button to be enabled.</span></span> <span data-ttu-id="5be05-162">También puede configurar la versión ASP.NET en el cuadro de diálogo ASP.NET.) El cuadro de diálogo Configuración de ASP.NET se muestra como se muestra a continuación.</span><span class="sxs-lookup"><span data-stu-id="5be05-162">You can configure the ASP.NET version in the ASP.NET dialog as well.) The ASP.NET Configuration Settings dialog is displayed as shown below.</span></span>

![](membership/_static/image3.jpg)

<span data-ttu-id="5be05-163">**Figura 3**</span><span class="sxs-lookup"><span data-stu-id="5be05-163">**Figure 3**</span></span>

<span data-ttu-id="5be05-164">En la pestaña General, se muestran las cadenas de conexión y la configuración de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="5be05-164">On the General tab, connection strings and application settings are listed.</span></span> <span data-ttu-id="5be05-165">Cualquier configuración en cursiva se define en un archivo de configuración principal (ya sea machine.config o web.config en un nivel superior) y los valores que no están en cursiva son del archivo de configuración de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="5be05-165">Any settings in italics are defined in a parent configuration file (either the machine.config or a web.config at a higher level) and settings not in italics are from the applications configuration file.</span></span> <span data-ttu-id="5be05-166">Si se agrega, quita o edita una configuración en el nivel de aplicación, ASP.NET agregará, quitará o modificará la configuración en los niveles de aplicación web.config en lugar de quitar la configuración del archivo de configuración del que se hereda.</span><span class="sxs-lookup"><span data-stu-id="5be05-166">If a setting is added, removed, or edited at the application level, ASP.NET will add, remove, or modify the setting at the application levels web.config instead of removing the setting from the configuration file from which it is inherited.</span></span>

<span data-ttu-id="5be05-167">La pestaña Autenticación se muestra a continuación.</span><span class="sxs-lookup"><span data-stu-id="5be05-167">The Authentication tab is shown below.</span></span> <span data-ttu-id="5be05-168">Aquí es donde configurará sus ajustes de membresía.</span><span class="sxs-lookup"><span data-stu-id="5be05-168">This is where you will configure your membership settings.</span></span> <span data-ttu-id="5be05-169">La configuración de autenticación de formularios, los proveedores de pertenencia y los proveedores de roles se pueden configurar aquí.</span><span class="sxs-lookup"><span data-stu-id="5be05-169">Forms authentication settings, membership providers, and role providers can be configured here.</span></span>

![](membership/_static/image4.jpg)

<span data-ttu-id="5be05-170">**Figura 4**</span><span class="sxs-lookup"><span data-stu-id="5be05-170">**Figure 4**</span></span>

## <a name="implementing-membership-in-your-application"></a><span data-ttu-id="5be05-171">Implementación de la membresía en su solicitud</span><span class="sxs-lookup"><span data-stu-id="5be05-171">Implementing Membership in Your Application</span></span>

<span data-ttu-id="5be05-172">La forma más fácil de implementar ASP.NET pertenencia 2.0 a la aplicación es usar los controles de inicio de sesión proporcionados.</span><span class="sxs-lookup"><span data-stu-id="5be05-172">The easiest way to implement ASP.NET 2.0 membership in your application is to use the provided Logon controls.</span></span> <span data-ttu-id="5be05-173">Este método le permite implementar los conceptos básicos de ASP.NET pertenencia 2.0 sin escribir ningún código en absoluto.</span><span class="sxs-lookup"><span data-stu-id="5be05-173">This method allows you to implement the basics of ASP.NET 2.0 membership without writing any code at all.</span></span>

<span data-ttu-id="5be05-174">Los siguientes controles de inicio de sesión están disponibles en ASP.NET 2.0:</span><span class="sxs-lookup"><span data-stu-id="5be05-174">The following Logon controls are available in ASP.NET 2.0:</span></span>

## <a name="login-control"></a><span data-ttu-id="5be05-175">Control de inicio de sesión</span><span class="sxs-lookup"><span data-stu-id="5be05-175">Login Control</span></span>

<span data-ttu-id="5be05-176">El control de inicio de sesión proporciona una interfaz para que alguien inicie sesión en su sistema de pertenencia.</span><span class="sxs-lookup"><span data-stu-id="5be05-176">The Login control provides an interface for someone to log into your membership system.</span></span> <span data-ttu-id="5be05-177">Le proporciona un cuadro de texto de nombre de usuario y contraseña y un botón de inicio de sesión.</span><span class="sxs-lookup"><span data-stu-id="5be05-177">It provides you with a username and password textbox and a login button.</span></span> <span data-ttu-id="5be05-178">Muchas otras características comunes como un enlace para registrarse para las personas que aún no lo han hecho, una casilla de verificación que permite al usuario iniciar sesión automáticamente en visitas posteriores, un enlace para un recordatorio de contraseña, etc. Todas las características del control de inicio de sesión se pueden personalizar a través de las propiedades del control.</span><span class="sxs-lookup"><span data-stu-id="5be05-178">Many other common features such as a link to register for people who have not yet done so, a checkbox that allows the user to automatically login on subsequent visits, a link for a password reminder, etc. All features of the Login control are customizable via the properties of the control.</span></span>

<span data-ttu-id="5be05-179">En ASP.NET 1.x, los desarrolladores tenían que escribir una buena cantidad de código para realizar una búsqueda al usar la autenticación de formularios.</span><span class="sxs-lookup"><span data-stu-id="5be05-179">In ASP.NET 1.x, developers had to write a fair amount of code to do a lookup when using Forms authentication.</span></span> <span data-ttu-id="5be05-180">Con ASP.NET membresía 2.0, puede validar a los usuarios sin escribir ningún código en absoluto.</span><span class="sxs-lookup"><span data-stu-id="5be05-180">With ASP.NET 2.0 membership, you can validate users without writing any code at all.</span></span> <span data-ttu-id="5be05-181">ASP.NET hará automáticamente la búsqueda del usuario por usted.</span><span class="sxs-lookup"><span data-stu-id="5be05-181">ASP.NET will automatically do the look-up of the user for you.</span></span> <span data-ttu-id="5be05-182">(Si usa el control Login sin usar ASP.NET pertenencia, puede usar el método **OnAuthenticate** para validar el usuario.)</span><span class="sxs-lookup"><span data-stu-id="5be05-182">(If you are using the Login control without using ASP.NET membership, you can use the **OnAuthenticate** method to validate the user.)</span></span>

## <a name="loginview-control"></a><span data-ttu-id="5be05-183">Control LoginView</span><span class="sxs-lookup"><span data-stu-id="5be05-183">LoginView Control</span></span>

<span data-ttu-id="5be05-184">El control LoginView es un control con plantilla que proporciona dos plantillas de forma predeterminada; El AnonymousTemplate y el LoggedInTemplate.</span><span class="sxs-lookup"><span data-stu-id="5be05-184">The LoginView control is a templated control that provides two templates by default; the AnonymousTemplate and the LoggedInTemplate.</span></span> <span data-ttu-id="5be05-185">La plantilla que se muestra viene determinada por si el usuario ha iniciado sesión o no en el sistema de pertenencia.</span><span class="sxs-lookup"><span data-stu-id="5be05-185">The template that is displayed is determined by whether or not the user is logged into your membership system.</span></span> <span data-ttu-id="5be05-186">Este control se utiliza normalmente para mostrar un control de inicio de sesión cuando un usuario aún no ha iniciado sesión y un control LoginStatus u otros controles de inicio de sesión cuando el usuario ha iniciado sesión.</span><span class="sxs-lookup"><span data-stu-id="5be05-186">This control is typically used to display a Login control when a user has not yet logged in and a LoginStatus control and/or other login controls when the user has logged in.</span></span> <span data-ttu-id="5be05-187">Si usa la administración de roles en la aplicación ASP.NET, el control LoginView puede mostrar una plantilla específica basada en el rol de usuarios.</span><span class="sxs-lookup"><span data-stu-id="5be05-187">If you are using role management in your ASP.NET application, the LoginView control can display a specific template based upon the users role.</span></span> <span data-ttu-id="5be05-188">(Más adelante se tratará más adelante sobre ASP.NET administración de roles.)</span><span class="sxs-lookup"><span data-stu-id="5be05-188">(More on ASP.NET role management will be covered later.)</span></span>

## <a name="passwordrecovery-control"></a><span data-ttu-id="5be05-189">PasswordRecovery Control</span><span class="sxs-lookup"><span data-stu-id="5be05-189">PasswordRecovery Control</span></span>

<span data-ttu-id="5be05-190">El control PasswordRecovery permite a los usuarios recibir un correo electrónico con su contraseña actual o restablecer su contraseña.</span><span class="sxs-lookup"><span data-stu-id="5be05-190">The PasswordRecovery control allows users to receive an email with his or her current password or reset his or her password.</span></span> <span data-ttu-id="5be05-191">El texto claro y las contraseñas cifradas se pueden recuperar y enviar por correo electrónico a los usuarios.</span><span class="sxs-lookup"><span data-stu-id="5be05-191">Clear text and encrypted passwords can be recovered and emailed to users.</span></span> <span data-ttu-id="5be05-192">Si se aplica un algoritmo hash a la contraseña, no se puede recuperar.</span><span class="sxs-lookup"><span data-stu-id="5be05-192">If the password is hashed, it cannot be recovered.</span></span> <span data-ttu-id="5be05-193">En su lugar, el usuario deberá realizar un restablecimiento de contraseña.</span><span class="sxs-lookup"><span data-stu-id="5be05-193">Instead the user will be required to perform a password reset.</span></span>

## <a name="loginstatus-control"></a><span data-ttu-id="5be05-194">LoginStatus Control</span><span class="sxs-lookup"><span data-stu-id="5be05-194">LoginStatus Control</span></span>

<span data-ttu-id="5be05-195">El control LoginStatus se utiliza para mostrar un indicador de inicio de sesión a los usuarios que no han iniciado sesión y un indicador de cierre de sesión a los usuarios que han iniciado sesión actualmente.</span><span class="sxs-lookup"><span data-stu-id="5be05-195">The LoginStatus control is used to display a login indicator to users who are not logged in and a logout indicator to users who are currently logged in.</span></span> <span data-ttu-id="5be05-196">La propiedad Request.IsAuthenticated se utiliza para determinar qué indicador mostrar.</span><span class="sxs-lookup"><span data-stu-id="5be05-196">The Request.IsAuthenticated property is used to determine which indicator to display.</span></span> <span data-ttu-id="5be05-197">El indicador mostrado por el LoginStatus control puede ser texto (implementado a través de la **LoginText** y **LogoutText** propiedades) o imágenes (implementado a través de la **LoginImageUrl** y **LogoutImageUrl** propiedades.)</span><span class="sxs-lookup"><span data-stu-id="5be05-197">The indicator displayed by the LoginStatus control can be text (implemented via the **LoginText** and **LogoutText** properties) or images (implemented via the **LoginImageUrl** and **LogoutImageUrl** properties.)</span></span>

<span data-ttu-id="5be05-198">Cuando un usuario cierra la sesión a través del control LoginStatus, se le redirige a la dirección URL especificada por la propiedad **LogoutPageUrl.**</span><span class="sxs-lookup"><span data-stu-id="5be05-198">When a user logs out via the LoginStatus control, he or she is redirected to the URL specified by the **LogoutPageUrl** property.</span></span> <span data-ttu-id="5be05-199">Si no se establece esa propiedad, se actualiza la página actual.</span><span class="sxs-lookup"><span data-stu-id="5be05-199">If that property is not set, the current page is refreshed.</span></span> <span data-ttu-id="5be05-200">Dado que el sitio probablemente está protegido por la autenticación de formularios, la actualización de la página actual redirigirá al usuario a la página de inicio de sesión del sitio.</span><span class="sxs-lookup"><span data-stu-id="5be05-200">Since the site is likely protected by Forms authentication, the refresh of the current page will redirect the user to the login page for the site.</span></span>

## <a name="loginname-control"></a><span data-ttu-id="5be05-201">LoginName Control</span><span class="sxs-lookup"><span data-stu-id="5be05-201">LoginName Control</span></span>

<span data-ttu-id="5be05-202">El control LoginName muestra el nombre de usuario del usuario que ha iniciado sesión actualmente en el sitio.</span><span class="sxs-lookup"><span data-stu-id="5be05-202">The LoginName control displays the username of the user currently logged into the site.</span></span>

## <a name="createuserwizard-control"></a><span data-ttu-id="5be05-203">CreateUserWizard Control</span><span class="sxs-lookup"><span data-stu-id="5be05-203">CreateUserWizard Control</span></span>

<span data-ttu-id="5be05-204">El control CreateUserWizard proporciona a los usuarios una forma cómoda de registrarse en el sistema de pertenencia.</span><span class="sxs-lookup"><span data-stu-id="5be05-204">The CreateUserWizard control provides users with a convenient way to register for your membership system.</span></span> <span data-ttu-id="5be05-205">Puede agregar pasos (implementados como una colección de WizardSteps) a través de la interfaz que se muestra a continuación.</span><span class="sxs-lookup"><span data-stu-id="5be05-205">You can add steps (implemented as a collection of WizardSteps) via the interface shown below.</span></span>

![](membership/_static/image5.jpg)

<span data-ttu-id="5be05-206">**Figura 5**</span><span class="sxs-lookup"><span data-stu-id="5be05-206">**Figure 5**</span></span>

<span data-ttu-id="5be05-207">El CreateUserWizard es un control con plantilla que deriva de la Wizard clase y proporciona las siguientes plantillas:</span><span class="sxs-lookup"><span data-stu-id="5be05-207">The CreateUserWizard is a templated control that derives from the Wizard class and provides the following templates:</span></span>

- <span data-ttu-id="5be05-208">**HeaderTemplate** Esta plantilla controla la apariencia del encabezado del asistente.</span><span class="sxs-lookup"><span data-stu-id="5be05-208">**HeaderTemplate** This template controls the appearance of the header of the wizard.</span></span>
- <span data-ttu-id="5be05-209">**SidebarTemplate** Esta plantilla controla el aspecto de la barra lateral del asistente.</span><span class="sxs-lookup"><span data-stu-id="5be05-209">**SidebarTemplate** This template controls the appearance of the sidebar of the wizard.</span></span>
- <span data-ttu-id="5be05-210">**StartNavigationTemplate** Esta plantilla controla la apariencia de la navegación son del asistente en el paso de inicio.</span><span class="sxs-lookup"><span data-stu-id="5be05-210">**StartNavigationTemplate** This template controls the appearance of the navigation are of the wizard at the start step.</span></span>
- <span data-ttu-id="5be05-211">**StepNavigationTemplate** Esta plantilla controla la apariencia del área de navegación cuando no está en el paso de inicio o fin.</span><span class="sxs-lookup"><span data-stu-id="5be05-211">**StepNavigationTemplate** This template controls the appearance of the navigation area when not in the start or finish step.</span></span>
- <span data-ttu-id="5be05-212">**FinishNavigationTemplate** Esta plantilla controla la apariencia del área de navegación cuando se encuentra en el paso de finalización.</span><span class="sxs-lookup"><span data-stu-id="5be05-212">**FinishNavigationTemplate** This template controls the appearance of the navigation area when on the finish step.</span></span>

<span data-ttu-id="5be05-213">Además, para cada paso que agregue al Asistente, ASP.NET creará una plantilla personalizada que contiene ContentTemplate y CustomNavigationTemplate para ese paso.</span><span class="sxs-lookup"><span data-stu-id="5be05-213">Additionally, for each step that you add to the Wizard, ASP.NET will create a custom template that contains both a ContentTemplate and a CustomNavigationTemplate for that step.</span></span> <span data-ttu-id="5be05-214">Para obtener información detallada sobre cómo personalizar CreateUserWizard, consulte la documentación de VS.NET 2005:</span><span class="sxs-lookup"><span data-stu-id="5be05-214">For full details on customizing the CreateUserWizard, see the VS.NET 2005 documentation:</span></span>

## <a name="changepassword-control"></a><span data-ttu-id="5be05-215">ChangePassword Control</span><span class="sxs-lookup"><span data-stu-id="5be05-215">ChangePassword Control</span></span>

<span data-ttu-id="5be05-216">El control ChangePassword permite a los usuarios cambiar su contraseña.</span><span class="sxs-lookup"><span data-stu-id="5be05-216">The ChangePassword control allows users to change his or her password.</span></span> <span data-ttu-id="5be05-217">Si el DisplayUserName propiedad es true (es false de forma predeterminada), el usuario puede cambiar su contraseña cuando no han iniciado sesión.</span><span class="sxs-lookup"><span data-stu-id="5be05-217">If the DisplayUserName property is true (it is false by default), the user can change his or her password when they are not logged in.</span></span> <span data-ttu-id="5be05-218">Si el usuario ya *ha* iniciado sesión y la propiedad DisplayUserName es true, el usuario podrá cambiar la contraseña de otro usuario que no ha iniciado sesión siempre que conozca el ID de usuario de ese usuario.</span><span class="sxs-lookup"><span data-stu-id="5be05-218">If the user *is* already logged in and the DisplayUserName property is true, the user will be able to change the password of another user that is not logged in providing they know the user ID of that user.</span></span>

<span data-ttu-id="5be05-219">Tenga en cuenta que si desea que los usuarios puedan cambiar las contraseñas sin tener que iniciar sesión, deberá asegurarse de que la página en la que se muestra el control ChangePassword permite el acceso anónimo.</span><span class="sxs-lookup"><span data-stu-id="5be05-219">Keep in mind that if you want users to be able to change passwords without having to log in, you will need to ensure that the page on which the ChangePassword control is displayed allows anonymous access.</span></span> <span data-ttu-id="5be05-220">Obviamente, los usuarios tendrán que proporcionar su contraseña antigua con el fin de cambiar su contraseña.</span><span class="sxs-lookup"><span data-stu-id="5be05-220">Obviously, users will have to provide their old password in order to change their password.</span></span>

## <a name="role-management"></a><span data-ttu-id="5be05-221">Administración de roles</span><span class="sxs-lookup"><span data-stu-id="5be05-221">Role Management</span></span>

<span data-ttu-id="5be05-222">La administración de roles le permite asignar usuarios a un rol determinado y, a continuación, restringir el acceso a determinados archivos o carpetas en función de ese rol.</span><span class="sxs-lookup"><span data-stu-id="5be05-222">Role management allows you to assign users to a particular role and then restrict access to certain file or folders based on that role.</span></span> <span data-ttu-id="5be05-223">La administración de roles también proporciona una API para que pueda determinar mediante programación el rol de alguien o determinar todos los usuarios de un rol determinado y responder en consecuencia.</span><span class="sxs-lookup"><span data-stu-id="5be05-223">Role management also provides an API so that you can programmatically determine someones role or determine all users in a particular role and respond accordingly.</span></span>

<span data-ttu-id="5be05-224">La administración de roles no es un requisito en ASP.NET pertenencia, ni la pertenencia es un requisito para usar la administración de roles.</span><span class="sxs-lookup"><span data-stu-id="5be05-224">Role management is not a requirement in ASP.NET membership, nor is membership a requirement in order to use role management.</span></span> <span data-ttu-id="5be05-225">Sin embargo, los dos se complementan muy bien y es probable que los desarrolladores los utilicen junto sin igual.</span><span class="sxs-lookup"><span data-stu-id="5be05-225">However, the two supplement each other nicely and it is likely that developers will use them in conjunction with each other.</span></span>

<span data-ttu-id="5be05-226">Para habilitar la administración de roles en la aplicación, realice el siguiente cambio en el archivo web.config:</span><span class="sxs-lookup"><span data-stu-id="5be05-226">To enable role management in your application, make the following change in your web.config file:</span></span>

[!code-xml[Main](membership/samples/sample2.xml)]

<span data-ttu-id="5be05-227">Cuando el atributo **cacheRolesInCookie** se establece en true, ASP.NET almacena en caché una pertenencia a un rol de usuario en una cookie en el cliente.</span><span class="sxs-lookup"><span data-stu-id="5be05-227">When the **cacheRolesInCookie** attribute is set to true, ASP.NET caches a users role membership in a cookie on the client.</span></span> <span data-ttu-id="5be05-228">Esto permite que las búsquedas de roles se produzcan sin llamadas a RoleProvider.</span><span class="sxs-lookup"><span data-stu-id="5be05-228">This allows role lookups to occur without calls into the RoleProvider.</span></span> <span data-ttu-id="5be05-229">Al usar este atributo, se recomienda a los desarrolladores que se aseguren de que el atributo **cookieProtection** está establecido en All.</span><span class="sxs-lookup"><span data-stu-id="5be05-229">When using this attribute, developers are encouraged to ensure that the **cookieProtection** attribute is set to All.</span></span> <span data-ttu-id="5be05-230">(Esta es la configuración predeterminada.) Esto garantiza que los datos de las cookies estén cifrados y ayuda a garantizar que el contenido de las cookies no se haya modificado.</span><span class="sxs-lookup"><span data-stu-id="5be05-230">(This is the default setting.) This ensures that the cookie data are encrypted and helps to ensure that the cookies contents haven't been altered.</span></span> <span data-ttu-id="5be05-231">Los roles se pueden agregar mediante la Herramienta de administración de sitios web.</span><span class="sxs-lookup"><span data-stu-id="5be05-231">Roles can be added using the Web Site Administration Tool.</span></span> <span data-ttu-id="5be05-232">Le permite definir fácilmente roles, configurar el acceso a partes del sitio en función de esos roles y asignar usuarios a roles.</span><span class="sxs-lookup"><span data-stu-id="5be05-232">It allows you to easily define roles, configure access to parts of the site based on those roles, and assign users to roles.</span></span>

![](membership/_static/image6.jpg)

<span data-ttu-id="5be05-233">**Figura 6**</span><span class="sxs-lookup"><span data-stu-id="5be05-233">**Figure 6**</span></span>

<span data-ttu-id="5be05-234">Como se muestra arriba, se pueden agregar nuevos roles simplemente introduciendo el nombre del rol y, a continuación, haciendo clic en Agregar rol.</span><span class="sxs-lookup"><span data-stu-id="5be05-234">As shown above, new roles can be added by simply entering the name of the role and then clicking Add Role.</span></span> <span data-ttu-id="5be05-235">Los roles existentes se pueden administrar o eliminar haciendo clic en el vínculo adecuado de la lista de roles existentes.</span><span class="sxs-lookup"><span data-stu-id="5be05-235">Existing roles can be managed or deleted by clicking the appropriate link in the list of existing roles.</span></span>

<span data-ttu-id="5be05-236">Al administrar un rol, puede agregar o quitar usuarios como se muestra a continuación.</span><span class="sxs-lookup"><span data-stu-id="5be05-236">When you manage a role, you can add or remove users as shown below.</span></span>

![](membership/_static/image7.jpg)

<span data-ttu-id="5be05-237">**Figura 7**</span><span class="sxs-lookup"><span data-stu-id="5be05-237">**Figure 7**</span></span>

<span data-ttu-id="5be05-238">Al marcar la casilla de verificación Usuario está en rol, puede agregar fácilmente un usuario a un rol específico.</span><span class="sxs-lookup"><span data-stu-id="5be05-238">By checking the User Is In Role checkbox, you can easily add a user to a specific role.</span></span> <span data-ttu-id="5be05-239">ASP.NET actualizará automáticamente su base de datos de miembros con las entradas adecuadas.</span><span class="sxs-lookup"><span data-stu-id="5be05-239">ASP.NET will automatically update your membership database with the appropriate entries.</span></span> <span data-ttu-id="5be05-240">También querrá configurar reglas de acceso para la aplicación.</span><span class="sxs-lookup"><span data-stu-id="5be05-240">You will also want to configure access rules for your application.</span></span> <span data-ttu-id="5be05-241">ASP.NET desarrolladores 1.x están familiarizados con hacer esto a través del &lt;elemento de autorización&gt; en el archivo web.config, y esa opción todavía está disponible en ASP.NET 2.0.</span><span class="sxs-lookup"><span data-stu-id="5be05-241">ASP.NET 1.x developers are familiar with doing this via the &lt;authorization&gt; element in the web.config file, and that option is still available in ASP.NET 2.0.</span></span> <span data-ttu-id="5be05-242">Sin embargo, es más fácil administrar las reglas de acceso mediante la herramienta de administración de sitios web, como se muestra a continuación.</span><span class="sxs-lookup"><span data-stu-id="5be05-242">However, its easier to manage access rules using the Web Site Administration Tool as shown below.</span></span>

![](membership/_static/image8.jpg)

<span data-ttu-id="5be05-243">**Figura 8**</span><span class="sxs-lookup"><span data-stu-id="5be05-243">**Figure 8**</span></span>

<span data-ttu-id="5be05-244">En este caso, se resalta la carpeta Administración (es difícil de ver porque la herramienta la resalta en gris claro) y se ha concedido acceso al rol Administradores.</span><span class="sxs-lookup"><span data-stu-id="5be05-244">In this case, the Administration folder is highlighted (its difficult to see because the tool highlights it in light gray) and the Administrators role has been granted access.</span></span> <span data-ttu-id="5be05-245">Se deniega nado a todos los demás usuarios.</span><span class="sxs-lookup"><span data-stu-id="5be05-245">All other users are denied.</span></span> <span data-ttu-id="5be05-246">Puede hacer clic en el icono de la cabeza para seleccionar una regla y luego utilizar los botones Subir y Bajar para organizar las reglas.</span><span class="sxs-lookup"><span data-stu-id="5be05-246">You can click on the head icon to select a rule and then use the Move Up and Move Down buttons to arrange the rules.</span></span> <span data-ttu-id="5be05-247">Al igual &lt;que&gt; con el elemento de autorización ASP.NET, las reglas se procesan en el orden en que aparecen.</span><span class="sxs-lookup"><span data-stu-id="5be05-247">As with the ASP.NET &lt;authorization&gt; element, rules are processed in the order in which they appear.</span></span> <span data-ttu-id="5be05-248">En otras palabras, si se invirtieya el orden de las reglas en la toma anterior, nadie tendría acceso a la carpeta Administración porque la primera regla que ASP.NET encontraría sería la regla que deniega a todos a la carpeta.</span><span class="sxs-lookup"><span data-stu-id="5be05-248">In other words, if the order of rules in the shot above were reversed, no one would have access to the Administration folder because the first rule that ASP.NET would encounter would be the rule that denies everyone to the folder.</span></span>

<span data-ttu-id="5be05-249">ASP.NET 2.0 agrega un archivo web.config a la carpeta para la que está especificando una regla de acceso.</span><span class="sxs-lookup"><span data-stu-id="5be05-249">ASP.NET 2.0 adds a web.config file to the folder for which you are specifying an access rule.</span></span> <span data-ttu-id="5be05-250">Las reglas de acceso se pueden editar a través del archivo de configuración o a través de la Herramienta de administración del sitio web.</span><span class="sxs-lookup"><span data-stu-id="5be05-250">Access rules can be edited via the configuration file or via the Web Site Administration Tool.</span></span> <span data-ttu-id="5be05-251">En otras palabras, la Herramienta de administración de sitios web es simplemente una interfaz a través de la cual el archivo de configuración se puede editar en un entorno fácil de usar.</span><span class="sxs-lookup"><span data-stu-id="5be05-251">In other words, the Web Site Administration Tool is simply an interface through which the configuration file can be edited in a user-friendly environment.</span></span>

## <a name="using-roles-in-code"></a><span data-ttu-id="5be05-252">Uso de roles en el código</span><span class="sxs-lookup"><span data-stu-id="5be05-252">Using Roles in Code</span></span>

<span data-ttu-id="5be05-253">La API para la administración de roles no ha cambiado desde la versión 1.x.</span><span class="sxs-lookup"><span data-stu-id="5be05-253">The API for role management has not changed since version 1.x.</span></span> <span data-ttu-id="5be05-254">El **IsInRole** método se utiliza para determinar si un usuario está en un rol determinado.</span><span class="sxs-lookup"><span data-stu-id="5be05-254">The **IsInRole** method is used to determine if a user is in a particular role.</span></span>

[!code-csharp[Main](membership/samples/sample3.cs)]

<span data-ttu-id="5be05-255">ASP.NET también crea una instancia de RolePrincipal como miembro del contexto actual.</span><span class="sxs-lookup"><span data-stu-id="5be05-255">ASP.NET also creates a RolePrincipal instance as a member of the current context.</span></span> <span data-ttu-id="5be05-256">El objeto RolePrincipal se puede utilizar para obtener todos los roles a los que pertenece el usuario de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="5be05-256">The RolePrincipal object can be used to obtain all of the roles to which the user belongs as follows:</span></span>

[!code-csharp[Main](membership/samples/sample4.cs)]

## <a name="using-rolegroups-with-the-loginview-control"></a><span data-ttu-id="5be05-257">Uso de RoleGroups con el control LoginView</span><span class="sxs-lookup"><span data-stu-id="5be05-257">Using RoleGroups with the LoginView Control</span></span>

<span data-ttu-id="5be05-258">Ahora que tiene una comprensión de la administración de roles y la pertenencia, permite discutir brevemente cómo el control LoginView aprovecha esta capacidad en ASP.NET 2.0.</span><span class="sxs-lookup"><span data-stu-id="5be05-258">Now that you have an understanding of role management and membership, lets discuss briefly how the LoginView control takes advantage of this capability in ASP.NET 2.0.</span></span> <span data-ttu-id="5be05-259">Como se ha explicado anteriormente, el control LoginView es un control con plantilla que contiene dos plantillas de forma predeterminada; El AnonymousTemplate y el LoggedInTemplate.</span><span class="sxs-lookup"><span data-stu-id="5be05-259">As previously discussed, the LoginView control is a templated control that contains two templates by default; the AnonymousTemplate and the LoggedInTemplate.</span></span> <span data-ttu-id="5be05-260">Dentro del cuadro de diálogo Tareas de LoginView hay un vínculo (que se muestra a continuación) que le permite editar RoleGroups.</span><span class="sxs-lookup"><span data-stu-id="5be05-260">Within the LoginView Tasks dialog is a link (shown below) that allows you to edit RoleGroups.</span></span>

![](membership/_static/image9.jpg)

<span data-ttu-id="5be05-261">**Figura 9**</span><span class="sxs-lookup"><span data-stu-id="5be05-261">**Figure 9**</span></span>

<span data-ttu-id="5be05-262">Cada objeto RoleGroup contiene una matriz de cadenas que define a qué roles se aplica RoleGroup.</span><span class="sxs-lookup"><span data-stu-id="5be05-262">Each RoleGroup object contains an array of strings that defines which roles that RoleGroup applies to.</span></span> <span data-ttu-id="5be05-263">Para agregar un nuevo RoleGroup al control LoginView, haga clic en el vínculo Editar Grupos de roles.</span><span class="sxs-lookup"><span data-stu-id="5be05-263">To add a new RoleGroup to the LoginView control, click the Edit RoleGroups link.</span></span> <span data-ttu-id="5be05-264">En la imagen anterior, puede ver que he agregado un nuevo RoleGroup para administradores.</span><span class="sxs-lookup"><span data-stu-id="5be05-264">In the image above, you can see that I have added a new RoleGroup for Administrators.</span></span> <span data-ttu-id="5be05-265">Al seleccionar ese RoleGroup (RoleGroup[0]) en la lista desplegable Vistas, puedo configurar una plantilla que solo se mostrará a los miembros del rol Administradores.</span><span class="sxs-lookup"><span data-stu-id="5be05-265">By selecting that RoleGroup (RoleGroup[0]) from the Views dropdown, I can configure a template that will only be displayed to members of the Administrators role.</span></span> <span data-ttu-id="5be05-266">En la imagen siguiente, he agregado un nuevo RoleGroup que se aplica a los miembros del rol Sales y el rol de distribución.</span><span class="sxs-lookup"><span data-stu-id="5be05-266">In the image below, I have added a new RoleGroup that applies to members of the Sales role and the Distribution role.</span></span> <span data-ttu-id="5be05-267">Esto agrega un segundo RoleGroup a la vistas desplegable en el inicio de sesión tareas cuadro de diálogo y cualquier cosa agregada a esa plantilla será visible para cualquier usuario en el Sales o Distribución rol.</span><span class="sxs-lookup"><span data-stu-id="5be05-267">This adds a second RoleGroup to the Views dropdown in the LoginView Tasks dialog and anything added to that template will be visible by any user in either the Sales or Distribution role.</span></span>

![](membership/_static/image10.jpg)

<span data-ttu-id="5be05-268">**Figura 10**</span><span class="sxs-lookup"><span data-stu-id="5be05-268">**Figure 10**</span></span>

## <a name="overriding-the-existing-membership-provider"></a><span data-ttu-id="5be05-269">Reemplazar al Proveedor de Membresía Existente</span><span class="sxs-lookup"><span data-stu-id="5be05-269">Overriding the Existing Membership Provider</span></span>

<span data-ttu-id="5be05-270">Hay un par de maneras en las que puede ampliar la funcionalidad de ASP.NET pertenencia.</span><span class="sxs-lookup"><span data-stu-id="5be05-270">There are a couple of ways that you can extend the functionality of ASP.NET membership.</span></span> <span data-ttu-id="5be05-271">En primer lugar, obviamente puede cambiar la funcionalidad existente de la SqlMembershipProvider clase heredando de ella y reemplazando sus métodos.</span><span class="sxs-lookup"><span data-stu-id="5be05-271">First of all, you can obviously change the existing functionality of the SqlMembershipProvider class by inheriting from it and overriding its methods.</span></span> <span data-ttu-id="5be05-272">Por ejemplo, si desea implementar su propia funcionalidad cuando se crean usuarios, puede crear su propia clase que hereda de SqlMembershipProvider de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="5be05-272">For example, if you want to implement your own functionality when users are created, you can create your own class that inherits from SqlMembershipProvider as follows:</span></span>

[!code-csharp[Main](membership/samples/sample5.cs)]

<span data-ttu-id="5be05-273">Si, por otro lado, desea crear su propio proveedor (para almacenar la información de pertenencia en una base de datos de Access, por ejemplo), puede crear su propio proveedor.</span><span class="sxs-lookup"><span data-stu-id="5be05-273">If, on the other hand, you want to create your own provider (to store your membership information in an Access database, for example), you can create your own provider.</span></span>

## <a name="creating-your-own-membership-provider"></a><span data-ttu-id="5be05-274">Creación de su propio proveedor de membresía</span><span class="sxs-lookup"><span data-stu-id="5be05-274">Creating Your Own Membership Provider</span></span>

<span data-ttu-id="5be05-275">Para crear su propio proveedor de pertenencia, primero tendrá que crear una clase que herede de la MembershipProvider clase.</span><span class="sxs-lookup"><span data-stu-id="5be05-275">To create your own membership provider, you will first need to create a class that inherits from the MembershipProvider class.</span></span> <span data-ttu-id="5be05-276">Si usa VB.NET, Visual Studio 2005 agregará los códigos auxiliares para todos los métodos que necesita invalidar.</span><span class="sxs-lookup"><span data-stu-id="5be05-276">If you are using VB.NET, Visual Studio 2005 will add the stubs for all of the methods that you need to override.</span></span> <span data-ttu-id="5be05-277">Si está utilizando C, depende de usted para agregar los stubs.</span><span class="sxs-lookup"><span data-stu-id="5be05-277">If you are using C#, its up to you to add the stubs.</span></span>

<span data-ttu-id="5be05-278">Deberá anular lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="5be05-278">You will need to override the following:</span></span>

- <span data-ttu-id="5be05-279">Propiedad ApplicationName</span><span class="sxs-lookup"><span data-stu-id="5be05-279">ApplicationName property</span></span>
- <span data-ttu-id="5be05-280">Función ChangePassword</span><span class="sxs-lookup"><span data-stu-id="5be05-280">ChangePassword function</span></span>
- <span data-ttu-id="5be05-281">Función ChangePasswordQuestionAndAnswer</span><span class="sxs-lookup"><span data-stu-id="5be05-281">ChangePasswordQuestionAndAnswer function</span></span>
- <span data-ttu-id="5be05-282">Función CreateUser</span><span class="sxs-lookup"><span data-stu-id="5be05-282">CreateUser function</span></span>
- <span data-ttu-id="5be05-283">Función DeleteUser</span><span class="sxs-lookup"><span data-stu-id="5be05-283">DeleteUser function</span></span>
- <span data-ttu-id="5be05-284">Propiedad EnablePasswordReset</span><span class="sxs-lookup"><span data-stu-id="5be05-284">EnablePasswordReset property</span></span>
- <span data-ttu-id="5be05-285">Propiedad EnablePasswordRetrieval</span><span class="sxs-lookup"><span data-stu-id="5be05-285">EnablePasswordRetrieval property</span></span>
- <span data-ttu-id="5be05-286">Función FindUsersByEmail</span><span class="sxs-lookup"><span data-stu-id="5be05-286">FindUsersByEmail function</span></span>
- <span data-ttu-id="5be05-287">Función FindUsersByName</span><span class="sxs-lookup"><span data-stu-id="5be05-287">FindUsersByName function</span></span>
- <span data-ttu-id="5be05-288">Función GetAllUsers</span><span class="sxs-lookup"><span data-stu-id="5be05-288">GetAllUsers function</span></span>
- <span data-ttu-id="5be05-289">Función GetNumberOfUsersOnline</span><span class="sxs-lookup"><span data-stu-id="5be05-289">GetNumberOfUsersOnline function</span></span>
- <span data-ttu-id="5be05-290">Función GetPassword</span><span class="sxs-lookup"><span data-stu-id="5be05-290">GetPassword function</span></span>
- <span data-ttu-id="5be05-291">Función GetUser</span><span class="sxs-lookup"><span data-stu-id="5be05-291">GetUser function</span></span>
- <span data-ttu-id="5be05-292">Función GetUserNameByEmail</span><span class="sxs-lookup"><span data-stu-id="5be05-292">GetUserNameByEmail function</span></span>
- <span data-ttu-id="5be05-293">Propiedad MaxInvalidPasswordAttempts</span><span class="sxs-lookup"><span data-stu-id="5be05-293">MaxInvalidPasswordAttempts property</span></span>
- <span data-ttu-id="5be05-294">Propiedad MinRequiredNonAlphanumericCharacters</span><span class="sxs-lookup"><span data-stu-id="5be05-294">MinRequiredNonAlphanumericCharacters property</span></span>
- <span data-ttu-id="5be05-295">Propiedad MinRequiredPasswordLength</span><span class="sxs-lookup"><span data-stu-id="5be05-295">MinRequiredPasswordLength property</span></span>
- <span data-ttu-id="5be05-296">Propiedad PasswordAttemptWindow</span><span class="sxs-lookup"><span data-stu-id="5be05-296">PasswordAttemptWindow property</span></span>
- <span data-ttu-id="5be05-297">Propiedad PasswordFormat</span><span class="sxs-lookup"><span data-stu-id="5be05-297">PasswordFormat property</span></span>
- <span data-ttu-id="5be05-298">Propiedad PasswordStrengthRegularExpression</span><span class="sxs-lookup"><span data-stu-id="5be05-298">PasswordStrengthRegularExpression property</span></span>
- <span data-ttu-id="5be05-299">Requierela propiedad QuestionAndAnswer</span><span class="sxs-lookup"><span data-stu-id="5be05-299">RequiresQuestionAndAnswer property</span></span>
- <span data-ttu-id="5be05-300">Requierela propiedadUniqueEmail</span><span class="sxs-lookup"><span data-stu-id="5be05-300">RequiresUniqueEmail property</span></span>
- <span data-ttu-id="5be05-301">Función ResetPassword</span><span class="sxs-lookup"><span data-stu-id="5be05-301">ResetPassword function</span></span>
- <span data-ttu-id="5be05-302">Desbloquear función de usuario</span><span class="sxs-lookup"><span data-stu-id="5be05-302">Unlock user function</span></span>
- <span data-ttu-id="5be05-303">UpdateFunción UpdateUser</span><span class="sxs-lookup"><span data-stu-id="5be05-303">UpdateUser function</span></span>
- <span data-ttu-id="5be05-304">Función ValidateUser</span><span class="sxs-lookup"><span data-stu-id="5be05-304">ValidateUser function</span></span>

<span data-ttu-id="5be05-305">Esa es una lista bastante para implementar como un desarrollador de C.</span><span class="sxs-lookup"><span data-stu-id="5be05-305">Thats quite a list to implement as a C# developer.</span></span> <span data-ttu-id="5be05-306">Es posible que le resulte más fácil crear la clase en VB.NET sin ninguna implementación y, a continuación, use .NET Reflector o una herramienta similar para convertir el código a C.</span><span class="sxs-lookup"><span data-stu-id="5be05-306">You may find it easier to create the class in VB.NET without any implementation and then use .NET Reflector or a similar tool to convert the code to C#.</span></span>

<span data-ttu-id="5be05-307">La cadena de conexión y otras propiedades deben establecerse en sus valores predeterminados en el Initialize método.</span><span class="sxs-lookup"><span data-stu-id="5be05-307">The connection string and other properties should be set to their defaults in the Initialize method.</span></span> <span data-ttu-id="5be05-308">(El Initialize método se desencadena cuando el proveedor se carga en tiempo de ejecución.) El segundo parámetro para el Initialize método es de tipo System.Collections.Specialized.NameValueCollection y es una referencia al elemento &lt;add&gt; que está asociado con el proveedor personalizado en el archivo web.config.</span><span class="sxs-lookup"><span data-stu-id="5be05-308">(The Initialize method is fired when the provider is loaded at runtime.) The second parameter to the Initialize method is of type System.Collections.Specialized.NameValueCollection and is a reference to the &lt;add&gt; element that is associated with your custom provider in the web.config file.</span></span> <span data-ttu-id="5be05-309">Esa entrada tiene el siguiente aspecto:</span><span class="sxs-lookup"><span data-stu-id="5be05-309">That entry looks like the following:</span></span>

[!code-xml[Main](membership/samples/sample6.xml)]

<span data-ttu-id="5be05-310">Este es un ejemplo de la Initialize método.</span><span class="sxs-lookup"><span data-stu-id="5be05-310">Here is an example of the Initialize method.</span></span>

[!code-csharp[Main](membership/samples/sample7.cs)]

<span data-ttu-id="5be05-311">Para validar al usuario cuando envíe su formulario de inicio de sesión, deberá utilizar el método ValidateUser.</span><span class="sxs-lookup"><span data-stu-id="5be05-311">In order to validate the user when they submit your login form, you will need to use the ValidateUser method.</span></span> <span data-ttu-id="5be05-312">Este método se desencadena cuando el usuario hace clic en el botón de inicio de sesión en el control de inicio de sesión.</span><span class="sxs-lookup"><span data-stu-id="5be05-312">This method fires when the user clicks the login button in the Login control.</span></span> <span data-ttu-id="5be05-313">Colocará el código que realiza la búsqueda de usuarios en este método.</span><span class="sxs-lookup"><span data-stu-id="5be05-313">You will place your code that does the user lookup in this method.</span></span>

<span data-ttu-id="5be05-314">Como puede ver, escribir su propio proveedor de membresía no es difícil y le permite ampliar esta poderosa funcionalidad de ASP.NET 2.0.</span><span class="sxs-lookup"><span data-stu-id="5be05-314">As you can see, writing your own membership provider is not difficult and allows you to extend this powerful functionality of ASP.NET 2.0.</span></span>
