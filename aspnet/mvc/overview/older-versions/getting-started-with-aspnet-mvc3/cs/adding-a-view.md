---
uid: mvc/overview/older-versions/getting-started-with-aspnet-mvc3/cs/adding-a-view
title: Agregar una vista (C#) | Microsoft Docs
author: Rick-Anderson
description: Este tutorial le enseñará los aspectos básicos de la creación de una aplicación web MVC de ASP.NET con Microsoft Visual Web Developer 2010 Express Service Pack 1, que es...
ms.author: riande
ms.date: 01/12/2011
ms.assetid: abc7c78d-cb09-4a4c-a887-61bc401d40e3
msc.legacyurl: /mvc/overview/older-versions/getting-started-with-aspnet-mvc3/cs/adding-a-view
msc.type: authoredcontent
ms.openlocfilehash: b4a1316feb8d9b7f3ef5ca4755bf1cc5b23e6ef9
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 03/06/2020
ms.locfileid: "78498847"
---
# <a name="adding-a-view-c"></a><span data-ttu-id="a3c6d-103">Agregar una vista (C#)</span><span class="sxs-lookup"><span data-stu-id="a3c6d-103">Adding a View (C#)</span></span>

<span data-ttu-id="a3c6d-104">por [Rick Anderson](https://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="a3c6d-104">by [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

> > [!NOTE]
> > <span data-ttu-id="a3c6d-105">[Hay disponible una](../../../getting-started/introduction/getting-started.md) versión actualizada de este tutorial que usa ASP.NET MVC 5 y Visual Studio 2013.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-105">An updated version of this tutorial is available [here](../../../getting-started/introduction/getting-started.md) that uses ASP.NET MVC 5 and Visual Studio 2013.</span></span> <span data-ttu-id="a3c6d-106">Es más seguro, mucho más fácil de seguir y demuestra más características.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-106">It's more secure, much simpler to follow and demonstrates more features.</span></span>
> 
> 
> <span data-ttu-id="a3c6d-107">Este tutorial le enseñará los aspectos básicos de la creación de una aplicación web MVC de ASP.NET con Microsoft Visual Web Developer 2010 Express Service Pack 1, que es una versión gratuita de Microsoft Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-107">This tutorial will teach you the basics of building an ASP.NET MVC Web application using Microsoft Visual Web Developer 2010 Express Service Pack 1, which is a free version of Microsoft Visual Studio.</span></span> <span data-ttu-id="a3c6d-108">Antes de empezar, asegúrese de que ha instalado los requisitos previos que se enumeran a continuación.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-108">Before you start, make sure you've installed the prerequisites listed below.</span></span> <span data-ttu-id="a3c6d-109">Para instalar todos ellos, haga clic en el vínculo siguiente: [instalador de plataforma web](https://www.microsoft.com/web/gallery/install.aspx?appid=VWD2010SP1Pack).</span><span class="sxs-lookup"><span data-stu-id="a3c6d-109">You can install all of them by clicking the following link: [Web Platform Installer](https://www.microsoft.com/web/gallery/install.aspx?appid=VWD2010SP1Pack).</span></span> <span data-ttu-id="a3c6d-110">Como alternativa, puede instalar individualmente los requisitos previos con los siguientes vínculos:</span><span class="sxs-lookup"><span data-stu-id="a3c6d-110">Alternatively, you can individually install the prerequisites using the following links:</span></span>
> 
> - [<span data-ttu-id="a3c6d-111">Requisitos previos de Visual Studio Web Developer Express SP1</span><span class="sxs-lookup"><span data-stu-id="a3c6d-111">Visual Studio Web Developer Express SP1 prerequisites</span></span>](https://www.microsoft.com/web/gallery/install.aspx?appid=VWD2010SP1Pack)
> - [<span data-ttu-id="a3c6d-112">ASP.NET MVC 3 Tools Update</span><span class="sxs-lookup"><span data-stu-id="a3c6d-112">ASP.NET MVC 3 Tools Update</span></span>](https://www.microsoft.com/web/gallery/install.aspx?appsxml=&amp;appid=MVC3)
> - <span data-ttu-id="a3c6d-113">[SQL Server Compact 4,0](https://www.microsoft.com/web/gallery/install.aspx?appid=SQLCE;SQLCEVSTools_4_0)(compatibilidad con herramientas y tiempo de ejecución)</span><span class="sxs-lookup"><span data-stu-id="a3c6d-113">[SQL Server Compact 4.0](https://www.microsoft.com/web/gallery/install.aspx?appid=SQLCE;SQLCEVSTools_4_0)(runtime + tools support)</span></span>
> 
> <span data-ttu-id="a3c6d-114">Si utiliza Visual Studio 2010 en lugar de Visual Web Developer 2010, instale los requisitos previos haciendo clic en el siguiente vínculo: [requisitos previos de Visual Studio 2010](https://www.microsoft.com/web/gallery/install.aspx?appsxml=&amp;appid=VS2010SP1Pack).</span><span class="sxs-lookup"><span data-stu-id="a3c6d-114">If you're using Visual Studio 2010 instead of Visual Web Developer 2010, install the prerequisites by clicking the following link: [Visual Studio 2010 prerequisites](https://www.microsoft.com/web/gallery/install.aspx?appsxml=&amp;appid=VS2010SP1Pack).</span></span>
> 
> <span data-ttu-id="a3c6d-115">Hay disponible un proyecto de Visual C# Web Developer con código fuente para acompañar este tema.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-115">A Visual Web Developer project with C# source code is available to accompany this topic.</span></span> <span data-ttu-id="a3c6d-116">[Descargue la C# versión](https://code.msdn.microsoft.com/Introduction-to-MVC-3-10d1b098).</span><span class="sxs-lookup"><span data-stu-id="a3c6d-116">[Download the C# version](https://code.msdn.microsoft.com/Introduction-to-MVC-3-10d1b098).</span></span> <span data-ttu-id="a3c6d-117">Si prefiere Visual Basic, cambie a la [versión Visual Basic](../vb/intro-to-aspnet-mvc-3.md) de este tutorial.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-117">If you prefer Visual Basic, switch to the [Visual Basic version](../vb/intro-to-aspnet-mvc-3.md) of this tutorial.</span></span>

<span data-ttu-id="a3c6d-118">En esta sección, va a modificar la clase `HelloWorldController` para usar los archivos de plantilla de vista con el fin de encapsular correctamente el proceso de generación de respuestas HTML a un cliente.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-118">In this section you're going to modify the `HelloWorldController` class to use view template files to cleanly encapsulate the process of generating HTML responses to a client.</span></span>

<span data-ttu-id="a3c6d-119">Creará un archivo de plantilla de vista mediante el nuevo [motor de vista de Razor](https://weblogs.asp.net/scottgu/archive/2010/07/02/introducing-razor.aspx) que se presentó con ASP.NET MVC 3.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-119">You'll create a view template file using the new [Razor view engine](https://weblogs.asp.net/scottgu/archive/2010/07/02/introducing-razor.aspx) introduced with ASP.NET MVC 3.</span></span> <span data-ttu-id="a3c6d-120">Las plantillas de vista basadas en Razor tienen una extensión de archivo *. cshtml* y proporcionan una forma elegante de crear la C#salida HTML mediante.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-120">Razor-based view templates have a *.cshtml* file extension, and provide an elegant way to create HTML output using C#.</span></span> <span data-ttu-id="a3c6d-121">Razor minimiza el número de caracteres y pulsaciones de teclas necesarios al escribir una plantilla de vista y habilita un flujo de trabajo de codificación de fluido rápido.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-121">Razor minimizes the number of characters and keystrokes required when writing a view template, and enables a fast, fluid coding workflow.</span></span>

<span data-ttu-id="a3c6d-122">Empiece usando una plantilla de vista con el método `Index` en la clase `HelloWorldController`.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-122">Start by using a view template with the `Index` method in the `HelloWorldController` class.</span></span> <span data-ttu-id="a3c6d-123">Actualmente, el método `Index` devuelve una cadena con un mensaje que está codificado de forma rígida en la clase de controlador.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-123">Currently the `Index` method returns a string with a message that is hard-coded in the controller class.</span></span> <span data-ttu-id="a3c6d-124">Cambie el método de `Index` para que devuelva un objeto `View`, como se muestra a continuación:</span><span class="sxs-lookup"><span data-stu-id="a3c6d-124">Change the `Index` method to return a `View` object, as shown in the following:</span></span>

[!code-csharp[Main](adding-a-view/samples/sample1.cs)]

<span data-ttu-id="a3c6d-125">Este código usa una plantilla de vista para generar una respuesta HTML al explorador.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-125">This code uses a view template to generate an HTML response to the browser.</span></span> <span data-ttu-id="a3c6d-126">En el proyecto, agregue una plantilla de vista que pueda usar con el método `Index`.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-126">In the project, add a view template that you can use with the `Index` method.</span></span> <span data-ttu-id="a3c6d-127">Para ello, haga clic con el botón secundario dentro del método `Index` y haga clic en **Agregar vista**.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-127">To do this, right-click inside the `Index` method and click **Add View**.</span></span>

![](adding-a-view/_static/image1.png)

<span data-ttu-id="a3c6d-128">Aparece el cuadro de diálogo **Agregar vista** .</span><span class="sxs-lookup"><span data-stu-id="a3c6d-128">The **Add View** dialog box appears.</span></span> <span data-ttu-id="a3c6d-129">Deje los valores predeterminados tal y como están y haga clic en el botón **Agregar** :</span><span class="sxs-lookup"><span data-stu-id="a3c6d-129">Leave the defaults the way they are and click the **Add** button:</span></span>

![](adding-a-view/_static/image2.png)

<span data-ttu-id="a3c6d-130">Se crean la carpeta *MvcMovie\Views\HelloWorld* y el archivo *MvcMovie\Views\HelloWorld\Index.cshtml* .</span><span class="sxs-lookup"><span data-stu-id="a3c6d-130">The *MvcMovie\Views\HelloWorld* folder and the *MvcMovie\Views\HelloWorld\Index.cshtml* file are created.</span></span> <span data-ttu-id="a3c6d-131">Puede verlos en **Explorador de soluciones**:</span><span class="sxs-lookup"><span data-stu-id="a3c6d-131">You can see them in **Solution Explorer**:</span></span>

![](adding-a-view/_static/image3.png)

<span data-ttu-id="a3c6d-132">A continuación se muestra el archivo *index. cshtml* que se creó:</span><span class="sxs-lookup"><span data-stu-id="a3c6d-132">The following shows the *Index.cshtml* file that was created:</span></span>

<span data-ttu-id="a3c6d-133">[![HelloWorldIndex](adding-a-view/_static/image5.png)](adding-a-view/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="a3c6d-133">[![HelloWorldIndex](adding-a-view/_static/image5.png)](adding-a-view/_static/image4.png)</span></span>

<span data-ttu-id="a3c6d-134">Agregue cierto código HTML bajo la etiqueta `<h2>`.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-134">Add some HTML under the `<h2>` tag.</span></span> <span data-ttu-id="a3c6d-135">A continuación se muestra el archivo *MvcMovie\Views\HelloWorld\Index.cshtml* modificado.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-135">The modified *MvcMovie\Views\HelloWorld\Index.cshtml* file is shown below.</span></span>

[!code-cshtml[Main](adding-a-view/samples/sample2.cshtml)]

<span data-ttu-id="a3c6d-136">Ejecute la aplicación y vaya al controlador de `HelloWorld` (`http://localhost:xxxx/HelloWorld`).</span><span class="sxs-lookup"><span data-stu-id="a3c6d-136">Run the application and browse to the `HelloWorld` controller (`http://localhost:xxxx/HelloWorld`).</span></span> <span data-ttu-id="a3c6d-137">El método `Index` del controlador no hace mucho trabajo; simplemente ejecutó la instrucción `return View()`, que especificaba que el método debe utilizar un archivo de plantilla de vista para representar una respuesta al explorador.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-137">The `Index` method in your controller didn't do much work; it simply ran the statement `return View()`, which specified that the method should use a view template file to render a response to the browser.</span></span> <span data-ttu-id="a3c6d-138">Dado que no especificó explícitamente el nombre del archivo de plantilla de vista que se va a usar, ASP.NET MVC tenía como valor predeterminado el archivo de vista *index. cshtml* en la carpeta *\Views\HelloWorld* .</span><span class="sxs-lookup"><span data-stu-id="a3c6d-138">Because you didn't explicitly specify the name of the view template file to use, ASP.NET MVC defaulted to using the *Index.cshtml* view file in the *\Views\HelloWorld* folder.</span></span> <span data-ttu-id="a3c6d-139">En la imagen siguiente se muestra la cadena codificada de forma rígida en la vista.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-139">The image below shows the string hard-coded in the view.</span></span>

![](adding-a-view/_static/image6.png)

<span data-ttu-id="a3c6d-140">Parece bastante bueno.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-140">Looks pretty good.</span></span> <span data-ttu-id="a3c6d-141">Sin embargo, tenga en cuenta que la barra de título del explorador indica "índice" y el título grande de la página indica "mi aplicación MVC".</span><span class="sxs-lookup"><span data-stu-id="a3c6d-141">However, notice that the browser's title bar says "Index" and the big title on the page says "My MVC Application."</span></span> <span data-ttu-id="a3c6d-142">Vamos a cambiarlos.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-142">Let's change those.</span></span>

## <a name="changing-views-and-layout-pages"></a><span data-ttu-id="a3c6d-143">Cambiar vistas y páginas de diseño</span><span class="sxs-lookup"><span data-stu-id="a3c6d-143">Changing Views and Layout Pages</span></span>

<span data-ttu-id="a3c6d-144">En primer lugar, desea cambiar el título "mi aplicación MVC" en la parte superior de la página.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-144">First, you want to change the "My MVC Application" title at the top of the page.</span></span> <span data-ttu-id="a3c6d-145">Ese texto es común a todas las páginas.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-145">That text is common to every page.</span></span> <span data-ttu-id="a3c6d-146">En realidad, se implementa en un solo lugar del proyecto, aunque aparezca en todas las páginas de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-146">It actually is implemented in only one place in the project, even though it appears on every page in the application.</span></span> <span data-ttu-id="a3c6d-147">Vaya a la carpeta */views/Shared* en **Explorador de soluciones** y abra el archivo *\_layout. cshtml* .</span><span class="sxs-lookup"><span data-stu-id="a3c6d-147">Go to the */Views/Shared* folder in **Solution Explorer** and open the *\_Layout.cshtml* file.</span></span> <span data-ttu-id="a3c6d-148">Este archivo se denomina *Página de diseño* y es el "Shell" compartido que usan todas las demás páginas.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-148">This file is called a *layout page* and it's the shared "shell" that all other pages use.</span></span>

<span data-ttu-id="a3c6d-149">[![_LayoutCshtml](adding-a-view/_static/image8.png)](adding-a-view/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="a3c6d-149">[![_LayoutCshtml](adding-a-view/_static/image8.png)](adding-a-view/_static/image7.png)</span></span>

<span data-ttu-id="a3c6d-150">Las plantillas de diseño permiten especificar el diseño del contenedor HTML del sitio en un solo lugar y, después, aplicarlo en varias páginas del sitio.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-150">Layout templates allow you to specify the HTML container layout of your site in one place and then apply it across multiple pages in your site.</span></span> <span data-ttu-id="a3c6d-151">Observe la línea `@RenderBody()` situada cerca de la parte inferior del archivo.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-151">Note the `@RenderBody()` line near the bottom of the file.</span></span> <span data-ttu-id="a3c6d-152">`RenderBody` es un marcador de posición en el que se muestran todas las páginas específicas de la vista que se crean, "encapsuladas" en la página de diseño.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-152">`RenderBody` is a placeholder where all the view-specific pages you create show up, "wrapped" in the layout page.</span></span> <span data-ttu-id="a3c6d-153">Cambie el título del título en la plantilla de diseño de "My MVC Application" a "MVC Movie app".</span><span class="sxs-lookup"><span data-stu-id="a3c6d-153">Change the title heading in the layout template from "My MVC Application" to "MVC Movie App".</span></span>

[!code-cshtml[Main](adding-a-view/samples/sample3.cshtml)]

<span data-ttu-id="a3c6d-154">Ejecute la aplicación y observe que ahora dice "MVC Movie app".</span><span class="sxs-lookup"><span data-stu-id="a3c6d-154">Run the application and notice that it now says "MVC Movie App".</span></span> <span data-ttu-id="a3c6d-155">Haga clic en el vínculo **About (acerca de** ) y verá cómo la página muestra también "MVC Movie app".</span><span class="sxs-lookup"><span data-stu-id="a3c6d-155">Click the **About** link, and you see how that page shows "MVC Movie App", too.</span></span> <span data-ttu-id="a3c6d-156">Pudimos realizar el cambio una vez en la plantilla de diseño y hacer que todas las páginas del sitio reflejen el nuevo título.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-156">We were able to make the change once in the layout template and have all pages on the site reflect the new title.</span></span>

![](adding-a-view/_static/image9.png)

<span data-ttu-id="a3c6d-157">A continuación se muestra el archivo completo *\_layout. cshtml* :</span><span class="sxs-lookup"><span data-stu-id="a3c6d-157">The complete *\_Layout.cshtml* file is shown below:</span></span>

[!code-cshtml[Main](adding-a-view/samples/sample4.cshtml)]

<span data-ttu-id="a3c6d-158">Ahora, vamos a cambiar el título de la página de índice (ver).</span><span class="sxs-lookup"><span data-stu-id="a3c6d-158">Now, let's change the title of the Index page (view).</span></span>

<span data-ttu-id="a3c6d-159">Abra *MvcMovie\Views\HelloWorld\Index.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-159">Open *MvcMovie\Views\HelloWorld\Index.cshtml*.</span></span> <span data-ttu-id="a3c6d-160">Hay dos lugares para hacer un cambio: en primer lugar, el texto que aparece en el título del explorador y, a continuación, en el encabezado secundario (el elemento `<h2>`).</span><span class="sxs-lookup"><span data-stu-id="a3c6d-160">There are two places to make a change: first, the text that appears in the title of the browser, and then in the secondary header (the `<h2>` element).</span></span> <span data-ttu-id="a3c6d-161">Haremos que sean algo diferentes para que pueda ver qué parte del código cambia cada área de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-161">You'll make them slightly different so you can see which bit of code changes which part of the app.</span></span>

[!code-cshtml[Main](adding-a-view/samples/sample5.cshtml)]

<span data-ttu-id="a3c6d-162">Para indicar el título HTML que se va a mostrar, el código anterior establece una propiedad `Title` del objeto `ViewBag` (que se encuentra en la plantilla de vista *index. cshtml* ).</span><span class="sxs-lookup"><span data-stu-id="a3c6d-162">To indicate the HTML title to display, the code above sets a `Title` property of the `ViewBag` object (which is in the *Index.cshtml* view template).</span></span> <span data-ttu-id="a3c6d-163">Si vuelve a examinar el código fuente de la plantilla de diseño, observará que la plantilla usa este valor en el elemento `<title>` como parte de la `<head>` sección del código HTML.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-163">If you look back at the source code of the layout template, you'll notice that the template uses this value in the `<title>` element as part of the `<head>` section of the HTML.</span></span> <span data-ttu-id="a3c6d-164">Con este enfoque, puede pasar fácilmente otros parámetros entre la plantilla de vista y el archivo de diseño.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-164">Using this approach, you can easily pass other parameters between your view template and your layout file.</span></span>

<span data-ttu-id="a3c6d-165">Ejecute la aplicación y vaya a `http://localhost:xx/HelloWorld`.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-165">Run the application and browse to `http://localhost:xx/HelloWorld`.</span></span> <span data-ttu-id="a3c6d-166">Tenga en cuenta que el título del explorador, el encabezado principal y los encabezados secundarios han cambiado.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-166">Notice that the browser title, the primary heading, and the secondary headings have changed.</span></span> <span data-ttu-id="a3c6d-167">(Si no ve los cambios en el explorador, es posible que esté viendo contenido almacenado en caché.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-167">(If you don't see changes in the browser, you might be viewing cached content.</span></span> <span data-ttu-id="a3c6d-168">Presione Ctrl+F5 en el explorador para forzar que se cargue la respuesta del servidor).</span><span class="sxs-lookup"><span data-stu-id="a3c6d-168">Press Ctrl+F5 in your browser to force the response from the server to be loaded.)</span></span>

<span data-ttu-id="a3c6d-169">Observe también cómo el contenido de la plantilla de vista *index. cshtml* se combinó con la plantilla de vista *\_layout. cshtml* y se envió una única respuesta HTML al explorador.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-169">Also notice how the content in the *Index.cshtml* view template was merged with the *\_Layout.cshtml* view template and a single HTML response was sent to the browser.</span></span> <span data-ttu-id="a3c6d-170">Con las plantillas de diseño es realmente fácil hacer cambios para que se apliquen en todas las páginas de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-170">Layout templates make it really easy to make changes that apply across all of the pages in your application.</span></span>

![](adding-a-view/_static/image10.png)

<span data-ttu-id="a3c6d-171">Nuestra pequeña cantidad de "datos", en este caso, el mensaje "Hello from our View Template!" (Hola desde nuestra plantilla de vista),</span><span class="sxs-lookup"><span data-stu-id="a3c6d-171">Our little bit of "data" (in this case the "Hello from our View Template!"</span></span> <span data-ttu-id="a3c6d-172">están codificados de forma rígida.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-172">message) is hard-coded, though.</span></span> <span data-ttu-id="a3c6d-173">La aplicación de MVC tiene una "V" (vista) y ha obtenido una "C" (controlador), pero todavía no tiene una "M" (modelo).</span><span class="sxs-lookup"><span data-stu-id="a3c6d-173">The MVC application has a "V" (view) and you've got a "C" (controller), but no "M" (model) yet.</span></span> <span data-ttu-id="a3c6d-174">En breve, veremos cómo crear una base de datos y recuperar los datos del modelo.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-174">Shortly, we'll walk through how create a database and retrieve model data from it.</span></span>

## <a name="passing-data-from-the-controller-to-the-view"></a><span data-ttu-id="a3c6d-175">Pasar datos del controlador a la vista</span><span class="sxs-lookup"><span data-stu-id="a3c6d-175">Passing Data from the Controller to the View</span></span>

<span data-ttu-id="a3c6d-176">Sin embargo, antes de ir a una base de datos y hablar acerca de los modelos, vamos a hablar primero sobre cómo pasar información desde el controlador a una vista.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-176">Before we go to a database and talk about models, though, let's first talk about passing information from the controller to a view.</span></span> <span data-ttu-id="a3c6d-177">Las clases de controlador se invocan en respuesta a una solicitud de dirección URL entrante.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-177">Controller classes are invoked in response to an incoming URL request.</span></span> <span data-ttu-id="a3c6d-178">Una clase de controlador es donde se escribe el código que controla los parámetros de entrada, recupera datos de una base de datos y, en última instancia, decide qué tipo de respuesta devolver al explorador.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-178">A controller class is where you write the code that handles the incoming parameters, retrieves data from a database, and ultimately decides what type of response to send back to the browser.</span></span> <span data-ttu-id="a3c6d-179">Las plantillas de vista se pueden usar desde un controlador para generar y dar formato a una respuesta HTML en el explorador.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-179">View templates can then be used from a controller to generate and format an HTML response to the browser.</span></span>

<span data-ttu-id="a3c6d-180">Los controladores son responsables de proporcionar los datos u objetos necesarios para que una plantilla de vista represente una respuesta al explorador.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-180">Controllers are responsible for providing whatever data or objects are required in order for a view template to render a response to the browser.</span></span> <span data-ttu-id="a3c6d-181">Una plantilla de vista nunca debe realizar la lógica de negocios ni interactuar directamente con una base de datos.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-181">A view template should never perform business logic or interact with a database directly.</span></span> <span data-ttu-id="a3c6d-182">En su lugar, debería funcionar solo con los datos proporcionados por el controlador.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-182">Instead, it should work only with the data that's provided to it by the controller.</span></span> <span data-ttu-id="a3c6d-183">Mantener esta "separación de preocupaciones" ayuda a mantener el código limpio y más fácil de mantener.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-183">Maintaining this "separation of concerns" helps keep your code clean and more maintainable.</span></span>

<span data-ttu-id="a3c6d-184">Actualmente, el método de acción `Welcome` de la clase `HelloWorldController` toma un `name` y un parámetro `numTimes` y, a continuación, genera los valores directamente en el explorador.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-184">Currently, the `Welcome` action method in the `HelloWorldController` class takes a `name` and a `numTimes` parameter and then outputs the values directly to the browser.</span></span> <span data-ttu-id="a3c6d-185">En lugar de hacer que el controlador represente esta respuesta como una cadena, vamos a cambiar el controlador para usar una plantilla de vista en su lugar.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-185">Rather than have the controller render this response as a string, let's change the controller to use a view template instead.</span></span> <span data-ttu-id="a3c6d-186">La plantilla de vista generará una respuesta dinámica, lo que significa que debe pasar las partes de datos adecuadas desde el controlador a la vista para que se genere la respuesta.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-186">The view template will generate a dynamic response, which means that you need to pass appropriate bits of data from the controller to the view in order to generate the response.</span></span> <span data-ttu-id="a3c6d-187">Para ello, haga que el controlador Coloque los datos dinámicos que necesita la plantilla de vista en un objeto `ViewBag` al que pueda tener acceso la plantilla de vista.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-187">You can do this by having the controller put the dynamic data that the view template needs in a `ViewBag` object that the view template can then access.</span></span>

<span data-ttu-id="a3c6d-188">Vuelva al archivo *HelloWorldController.CS* y cambie el método `Welcome` para agregar un `Message` y `NumTimes` valor al objeto `ViewBag`.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-188">Return to the *HelloWorldController.cs* file and change the `Welcome` method to add a `Message` and `NumTimes` value to the `ViewBag` object.</span></span> <span data-ttu-id="a3c6d-189">`ViewBag` es un objeto dinámico, lo que significa que puede colocar todo lo que desee en él. el objeto `ViewBag` no tiene ninguna propiedad definida hasta que coloque algo dentro de ella.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-189">`ViewBag` is a dynamic object, which means you can put whatever you want in to it; the `ViewBag` object has no defined properties until you put something inside it.</span></span> <span data-ttu-id="a3c6d-190">El archivo *HelloWorldController.cs* completo tiene este aspecto:</span><span class="sxs-lookup"><span data-stu-id="a3c6d-190">The complete *HelloWorldController.cs* file looks like this:</span></span>

[!code-csharp[Main](adding-a-view/samples/sample6.cs)]

<span data-ttu-id="a3c6d-191">Ahora, el objeto de `ViewBag` contiene datos que se pasarán a la vista automáticamente.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-191">Now the `ViewBag` object contains data that will be passed to the view automatically.</span></span>

<span data-ttu-id="a3c6d-192">A continuación, necesitará una plantilla de vista de bienvenida.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-192">Next, you need a Welcome view template!</span></span> <span data-ttu-id="a3c6d-193">En el menú **depurar** , seleccione compilar **MvcMovie** para asegurarse de que se compila el proyecto.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-193">In the **Debug** menu, select **Build MvcMovie** to make sure the project is compiled.</span></span>

<span data-ttu-id="a3c6d-194">[![BuildHelloWorld](adding-a-view/_static/image12.png)](adding-a-view/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="a3c6d-194">[![BuildHelloWorld](adding-a-view/_static/image12.png)](adding-a-view/_static/image11.png)</span></span>

<span data-ttu-id="a3c6d-195">A continuación, haga clic con el botón secundario dentro del método `Welcome` y haga clic en **Agregar vista**.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-195">Then right-click inside the `Welcome` method and click **Add View**.</span></span> <span data-ttu-id="a3c6d-196">Este es el aspecto del cuadro de diálogo **Agregar vista** :</span><span class="sxs-lookup"><span data-stu-id="a3c6d-196">Here's what the **Add View** dialog box looks like:</span></span>

![](adding-a-view/_static/image13.png)

<span data-ttu-id="a3c6d-197">Haga clic en **Agregar**y, a continuación, agregue el siguiente código en el elemento `<h2>` del nuevo archivo *welcome. cshtml* .</span><span class="sxs-lookup"><span data-stu-id="a3c6d-197">Click **Add**, and then add the following code under the `<h2>` element in the new *Welcome.cshtml* file.</span></span> <span data-ttu-id="a3c6d-198">Creará un bucle que dice "Hello" tantas veces como indique el usuario.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-198">You'll create a loop that says "Hello" as many times as the user says it should.</span></span> <span data-ttu-id="a3c6d-199">A continuación se muestra el archivo *welcome. cshtml* completo.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-199">The complete *Welcome.cshtml* file is shown below.</span></span>

[!code-cshtml[Main](adding-a-view/samples/sample7.cshtml)]

<span data-ttu-id="a3c6d-200">Ejecute la aplicación y vaya a la siguiente dirección URL:</span><span class="sxs-lookup"><span data-stu-id="a3c6d-200">Run the application and browse to the following URL:</span></span>

`http://localhost:xx/HelloWorld/Welcome?name=Scott&numtimes=4`

<span data-ttu-id="a3c6d-201">Ahora los datos se toman de la dirección URL y se pasan al controlador automáticamente.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-201">Now data is taken from the URL and passed to the controller automatically.</span></span> <span data-ttu-id="a3c6d-202">El controlador empaqueta los datos en un objeto `ViewBag` y pasa ese objeto a la vista.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-202">The controller packages the data into a `ViewBag` object and passes that object to the view.</span></span> <span data-ttu-id="a3c6d-203">A continuación, la vista muestra los datos como HTML al usuario.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-203">The view then displays the data as HTML to the user.</span></span>

![](adding-a-view/_static/image14.png)

<span data-ttu-id="a3c6d-204">Bueno, todo esto era un tipo de "M" para el modelo, pero no el tipo de base de datos.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-204">Well, that was a kind of an "M" for model, but not the database kind.</span></span> <span data-ttu-id="a3c6d-205">Vamos a aprovechar lo que hemos aprendido para crear una base de datos de películas.</span><span class="sxs-lookup"><span data-stu-id="a3c6d-205">Let's take what we've learned and create a database of movies.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="a3c6d-206">[Anterior](adding-a-controller.md)
> [Siguiente](adding-a-model.md)</span><span class="sxs-lookup"><span data-stu-id="a3c6d-206">[Previous](adding-a-controller.md)
[Next](adding-a-model.md)</span></span>
