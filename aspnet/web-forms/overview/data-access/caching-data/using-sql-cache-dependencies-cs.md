---
uid: web-forms/overview/data-access/caching-data/using-sql-cache-dependencies-cs
title: Usar dependencias de caché deC#SQL () | Microsoft Docs
author: rick-anderson
description: La estrategia de almacenamiento en caché más sencilla consiste en permitir que los datos almacenados en caché expiren después de un período de tiempo especificado. Pero este sencillo enfoque significa que los datos almacenados en caché maintai...
ms.author: riande
ms.date: 05/30/2007
ms.assetid: 0e91842c-7f10-4aed-8c23-4ee3e2774014
msc.legacyurl: /web-forms/overview/data-access/caching-data/using-sql-cache-dependencies-cs
msc.type: authoredcontent
ms.openlocfilehash: 5bc27a08e39606c25b8f99d6ea057d2a853f08a6
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 11/28/2019
ms.locfileid: "74611978"
---
# <a name="using-sql-cache-dependencies-c"></a><span data-ttu-id="4df2e-104">Usar dependencias de caché de SQL (C#)</span><span class="sxs-lookup"><span data-stu-id="4df2e-104">Using SQL Cache Dependencies (C#)</span></span>

<span data-ttu-id="4df2e-105">por [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="4df2e-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="4df2e-106">[Descargar código](https://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_61_CS.zip) o [Descargar PDF](using-sql-cache-dependencies-cs/_static/datatutorial61cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="4df2e-106">[Download Code](https://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_61_CS.zip) or [Download PDF](using-sql-cache-dependencies-cs/_static/datatutorial61cs1.pdf)</span></span>

> <span data-ttu-id="4df2e-107">La estrategia de almacenamiento en caché más sencilla consiste en permitir que los datos almacenados en caché expiren después de un período de tiempo especificado.</span><span class="sxs-lookup"><span data-stu-id="4df2e-107">The simplest caching strategy is to allow cached data to expire after a specified period of time.</span></span> <span data-ttu-id="4df2e-108">Pero este sencillo enfoque significa que los datos almacenados en caché no mantienen ninguna asociación con su origen de datos subyacente, lo que da lugar a datos obsoletos que se retienen demasiado largos o datos actuales que han expirado demasiado pronto.</span><span class="sxs-lookup"><span data-stu-id="4df2e-108">But this simple approach means that the cached data maintains no association with its underlying data source, resulting in stale data that is held too long or current data that is expired too soon.</span></span> <span data-ttu-id="4df2e-109">Un mejor enfoque consiste en usar la clase SqlCacheDependency para que los datos permanezcan en la memoria caché hasta que los datos subyacentes se hayan modificado en la base de datos SQL.</span><span class="sxs-lookup"><span data-stu-id="4df2e-109">A better approach is to use the SqlCacheDependency class so that data remains cached until its underlying data has been modified in the SQL database.</span></span> <span data-ttu-id="4df2e-110">En este tutorial se muestra cómo hacerlo.</span><span class="sxs-lookup"><span data-stu-id="4df2e-110">This tutorial shows you how.</span></span>

## <a name="introduction"></a><span data-ttu-id="4df2e-111">Introducción</span><span class="sxs-lookup"><span data-stu-id="4df2e-111">Introduction</span></span>

<span data-ttu-id="4df2e-112">Las técnicas de almacenamiento en caché examinadas en los [datos de almacenamiento en caché con los datos ObjectDataSource](caching-data-with-the-objectdatasource-cs.md) y [caching en los tutoriales de arquitectura](caching-data-in-the-architecture-cs.md) usaban una expiración basada en el tiempo para expulsar los datos de la memoria caché después de un período especificado.</span><span class="sxs-lookup"><span data-stu-id="4df2e-112">The caching techniques examined in the [Caching Data with the ObjectDataSource](caching-data-with-the-objectdatasource-cs.md) and [Caching Data in the Architecture](caching-data-in-the-architecture-cs.md) tutorials used a time-based expiry to evict the data from the cache after a specified period.</span></span> <span data-ttu-id="4df2e-113">Este enfoque es la manera más sencilla de equilibrar las ventajas de rendimiento del almacenamiento en caché frente a la obsolescencia de los datos.</span><span class="sxs-lookup"><span data-stu-id="4df2e-113">This approach is the simplest way to balance the performance gains of caching against data staleness.</span></span> <span data-ttu-id="4df2e-114">Al seleccionar un tiempo de expiración de *x* segundos, un desarrollador de páginas conviene disfrutar de las ventajas de rendimiento del almacenamiento en caché durante solo *x* segundos, pero puede resultar fácil que los datos nunca queden obsoletos más que un máximo de *x* segundos.</span><span class="sxs-lookup"><span data-stu-id="4df2e-114">By selecting a time expiry of *x* seconds, a page developer concedes to enjoy the performance benefits of caching for only *x* seconds, but can rest easy that her data will never be stale longer than a maximum of *x* seconds.</span></span> <span data-ttu-id="4df2e-115">Por supuesto, para los datos estáticos, *x* puede extenderse hasta la duración de la aplicación Web, como se examinó en el tutorial de [Inicio de datos de almacenamiento en caché al iniciar la aplicación](caching-data-at-application-startup-cs.md) .</span><span class="sxs-lookup"><span data-stu-id="4df2e-115">Of course, for static data, *x* can be extended to the lifetime of the web application, as was examined in the [Caching Data at Application Startup](caching-data-at-application-startup-cs.md) tutorial.</span></span>

<span data-ttu-id="4df2e-116">Al almacenar en caché los datos de la base de datos, a menudo se elige una expiración basada en el tiempo para facilitar su uso, pero con frecuencia es una solución inadecuada.</span><span class="sxs-lookup"><span data-stu-id="4df2e-116">When caching database data, a time-based expiry is often chosen for its ease of use but is frequently an inadequate solution.</span></span> <span data-ttu-id="4df2e-117">Idealmente, los datos de la base de datos permanecerán en caché hasta que se hayan modificado los datos subyacentes en la base de datos. solo entonces se expulsará la memoria caché.</span><span class="sxs-lookup"><span data-stu-id="4df2e-117">Ideally, the database data would remain cached until the underlying data has been modified in the database; only then would the cache be evicted.</span></span> <span data-ttu-id="4df2e-118">Este enfoque maximiza las ventajas de rendimiento del almacenamiento en caché y minimiza la duración de los datos obsoletos.</span><span class="sxs-lookup"><span data-stu-id="4df2e-118">This approach maximizes the performance benefits of caching and minimizes the duration of stale data.</span></span> <span data-ttu-id="4df2e-119">Sin embargo, para disfrutar de estas ventajas, debe existir algún sistema que sepa cuándo se han modificado los datos de la base de datos subyacente y expulsa los elementos correspondientes de la memoria caché.</span><span class="sxs-lookup"><span data-stu-id="4df2e-119">However, in order to enjoy these benefits there must be some system in place that knows when the underlying database data has been modified and evicts the corresponding items from the cache.</span></span> <span data-ttu-id="4df2e-120">Antes de ASP.NET 2,0, los desarrolladores de páginas eran responsables de implementar este sistema.</span><span class="sxs-lookup"><span data-stu-id="4df2e-120">Prior to ASP.NET 2.0, page developers were responsible for implementing this system.</span></span>

<span data-ttu-id="4df2e-121">ASP.NET 2,0 proporciona una [clase`SqlCacheDependency`](https://msdn.microsoft.com/library/system.web.caching.sqlcachedependency.aspx) y la infraestructura necesaria para determinar cuándo se ha producido un cambio en la base de datos, de modo que se puedan desalojar los elementos almacenados en caché correspondientes.</span><span class="sxs-lookup"><span data-stu-id="4df2e-121">ASP.NET 2.0 provides a [`SqlCacheDependency` class](https://msdn.microsoft.com/library/system.web.caching.sqlcachedependency.aspx) and the necessary infrastructure to determine when a change has occurred in the database so that the corresponding cached items can be evicted.</span></span> <span data-ttu-id="4df2e-122">Hay dos técnicas para determinar cuándo han cambiado los datos subyacentes: notificación y sondeo.</span><span class="sxs-lookup"><span data-stu-id="4df2e-122">There are two techniques for determining when the underlying data has changed: notification and polling.</span></span> <span data-ttu-id="4df2e-123">Después de analizar las diferencias entre notificaciones y sondeo, crearemos la infraestructura necesaria para admitir el sondeo y, después, exploraremos cómo usar la clase `SqlCacheDependency` en escenarios declarativos y mediante programación.</span><span class="sxs-lookup"><span data-stu-id="4df2e-123">After discussing the differences between notification and polling, we'll create the infrastructure necessary to support polling and then explore how to use the `SqlCacheDependency` class in declarative and programmatically scenarios.</span></span>

## <a name="understanding-notification-and-polling"></a><span data-ttu-id="4df2e-124">Descripción de las notificaciones y el sondeo</span><span class="sxs-lookup"><span data-stu-id="4df2e-124">Understanding Notification and Polling</span></span>

<span data-ttu-id="4df2e-125">Existen dos técnicas que se pueden utilizar para determinar cuándo se han modificado los datos de una base de datos: notificación y sondeo.</span><span class="sxs-lookup"><span data-stu-id="4df2e-125">There are two techniques that can be used to determine when the data in a database has been modified: notification and polling.</span></span> <span data-ttu-id="4df2e-126">Con la notificación, la base de datos alerta automáticamente al tiempo de ejecución de ASP.NET cuando se han cambiado los resultados de una consulta determinada desde la última vez que se ejecutó la consulta, momento en el que se expulsan los elementos almacenados en caché asociados a la consulta.</span><span class="sxs-lookup"><span data-stu-id="4df2e-126">With notification, the database automatically alerts the ASP.NET runtime when the results of a particular query have been changed since the query was last executed, at which point the cached items associated with the query are evicted.</span></span> <span data-ttu-id="4df2e-127">Con el sondeo, el servidor de base de datos mantiene información acerca de Cuándo se han actualizado por última vez las tablas concretas.</span><span class="sxs-lookup"><span data-stu-id="4df2e-127">With polling, the database server maintains information about when particular tables have last been updated.</span></span> <span data-ttu-id="4df2e-128">El tiempo de ejecución de ASP.NET sondea periódicamente la base de datos para comprobar qué tablas han cambiado desde que se introdujeron en la memoria caché.</span><span class="sxs-lookup"><span data-stu-id="4df2e-128">The ASP.NET runtime periodically polls the database to check what tables have changed since they were entered into the cache.</span></span> <span data-ttu-id="4df2e-129">Las tablas cuyos datos se han modificado tienen sus elementos de caché asociados expulsados.</span><span class="sxs-lookup"><span data-stu-id="4df2e-129">Those tables whose data has been modified have their associated cache items evicted.</span></span>

<span data-ttu-id="4df2e-130">La opción de notificación requiere menos configuración que el sondeo y es más granular, ya que realiza un seguimiento de los cambios en el nivel de consulta en lugar de en el nivel de tabla.</span><span class="sxs-lookup"><span data-stu-id="4df2e-130">The notification option requires less setup than polling and is more granular since it tracks changes at the query level rather than at the table level.</span></span> <span data-ttu-id="4df2e-131">Desafortunadamente, las notificaciones solo están disponibles en las ediciones completas de Microsoft SQL Server 2005 (es decir, las ediciones que no son Express).</span><span class="sxs-lookup"><span data-stu-id="4df2e-131">Unfortunately, notifications are only available in the full editions of Microsoft SQL Server 2005 (i.e., the non-Express editions).</span></span> <span data-ttu-id="4df2e-132">Sin embargo, la opción de sondeo se puede usar para todas las versiones de Microsoft SQL Server de 7,0 a 2005.</span><span class="sxs-lookup"><span data-stu-id="4df2e-132">However, the polling option can be used for all versions of Microsoft SQL Server from 7.0 to 2005.</span></span> <span data-ttu-id="4df2e-133">Dado que estos tutoriales usan la edición Express de SQL Server 2005, nos centraremos en la configuración y el uso de la opción de sondeo.</span><span class="sxs-lookup"><span data-stu-id="4df2e-133">Since these tutorials use the Express edition of SQL Server 2005, we will focus on setting up and using the polling option.</span></span> <span data-ttu-id="4df2e-134">Consulte la sección lecturas adicionales al final de este tutorial para obtener más recursos sobre las capacidades de notificación de SQL Server 2005 s.</span><span class="sxs-lookup"><span data-stu-id="4df2e-134">Consult the Further Reading section at the end of this tutorial for further resources on SQL Server 2005 s notification capabilities.</span></span>

<span data-ttu-id="4df2e-135">Con el sondeo, la base de datos debe configurarse para incluir una tabla denominada `AspNet_SqlCacheTablesForChangeNotification` que tenga tres columnas: `tableName`, `notificationCreated`y `changeId`.</span><span class="sxs-lookup"><span data-stu-id="4df2e-135">With polling, the database must be configured to include a table named `AspNet_SqlCacheTablesForChangeNotification` that has three columns - `tableName`, `notificationCreated`, and `changeId`.</span></span> <span data-ttu-id="4df2e-136">Esta tabla contiene una fila para cada tabla que tiene datos que pueden ser necesarios para usarse en una dependencia de caché de SQL en la aplicación Web.</span><span class="sxs-lookup"><span data-stu-id="4df2e-136">This table contains a row for each table that has data that might need to be used in a SQL cache dependency in the web application.</span></span> <span data-ttu-id="4df2e-137">La columna `tableName` especifica el nombre de la tabla mientras `notificationCreated` indica la fecha y la hora en que se agregó la fila a la tabla.</span><span class="sxs-lookup"><span data-stu-id="4df2e-137">The `tableName` column specifies the name of the table while `notificationCreated` indicates the date and time the row was added to the table.</span></span> <span data-ttu-id="4df2e-138">La columna `changeId` es de tipo `int` y tiene un valor inicial de 0.</span><span class="sxs-lookup"><span data-stu-id="4df2e-138">The `changeId` column is of type `int` and has an initial value of 0.</span></span> <span data-ttu-id="4df2e-139">Su valor se incrementa con cada modificación de la tabla.</span><span class="sxs-lookup"><span data-stu-id="4df2e-139">Its value is incremented with each modification to the table.</span></span>

<span data-ttu-id="4df2e-140">Además de la tabla de `AspNet_SqlCacheTablesForChangeNotification`, la base de datos también necesita incluir desencadenadores en cada una de las tablas que pueden aparecer en una dependencia de caché de SQL.</span><span class="sxs-lookup"><span data-stu-id="4df2e-140">In addition to the `AspNet_SqlCacheTablesForChangeNotification` table, the database also needs to include triggers on each of the tables that may appear in a SQL cache dependency.</span></span> <span data-ttu-id="4df2e-141">Estos desencadenadores se ejecutan cada vez que se inserta, actualiza o elimina una fila y se incrementa el valor de la tabla s `changeId` en `AspNet_SqlCacheTablesForChangeNotification`.</span><span class="sxs-lookup"><span data-stu-id="4df2e-141">These triggers are executed whenever a row is inserted, updated, or deleted and increment the table s `changeId` value in `AspNet_SqlCacheTablesForChangeNotification`.</span></span>

<span data-ttu-id="4df2e-142">El tiempo de ejecución de ASP.NET realiza un seguimiento de la `changeId` actual para una tabla al almacenar datos en caché mediante un objeto `SqlCacheDependency`.</span><span class="sxs-lookup"><span data-stu-id="4df2e-142">The ASP.NET runtime tracks the current `changeId` for a table when caching data using a `SqlCacheDependency` object.</span></span> <span data-ttu-id="4df2e-143">La base de datos se comprueba periódicamente y los objetos de `SqlCacheDependency` cuyo `changeId` difiere del valor de la base de datos se expulsan, ya que un valor de `changeId` diferente indica que se ha producido un cambio en la tabla desde que se almacenaron en caché los datos.</span><span class="sxs-lookup"><span data-stu-id="4df2e-143">The database is periodically checked and any `SqlCacheDependency` objects whose `changeId` differs from the value in the database are evicted since a differing `changeId` value indicates that there has been a change to the table since the data was cached.</span></span>

## <a name="step-1-exploring-theaspnet_regsqlexecommand-line-program"></a><span data-ttu-id="4df2e-144">Paso 1: explorar el programa de línea de comandos`aspnet_regsql.exe`</span><span class="sxs-lookup"><span data-stu-id="4df2e-144">Step 1: Exploring the`aspnet_regsql.exe`Command Line Program</span></span>

<span data-ttu-id="4df2e-145">Con el enfoque de sondeo, la base de datos debe configurarse para que contenga la infraestructura descrita anteriormente: una tabla predefinida (`AspNet_SqlCacheTablesForChangeNotification`), una serie de procedimientos almacenados y desencadenadores en cada una de las tablas que se pueden usar en las dependencias de caché de SQL en la aplicación Web.</span><span class="sxs-lookup"><span data-stu-id="4df2e-145">With the polling approach the database must be setup to contain the infrastructure described above: a predefined table (`AspNet_SqlCacheTablesForChangeNotification`), a handful of stored procedures, and triggers on each of the tables that may be used in SQL cache dependencies in the web application.</span></span> <span data-ttu-id="4df2e-146">Estas tablas, procedimientos almacenados y desencadenadores se pueden crear a través del programa de línea de comandos `aspnet_regsql.exe`, que se encuentra en la carpeta `$WINDOWS$\Microsoft.NET\Framework\version`.</span><span class="sxs-lookup"><span data-stu-id="4df2e-146">These tables, stored procedures, and triggers can be created through the command line program `aspnet_regsql.exe`, which is found in the `$WINDOWS$\Microsoft.NET\Framework\version` folder.</span></span> <span data-ttu-id="4df2e-147">Para crear la tabla de `AspNet_SqlCacheTablesForChangeNotification` y los procedimientos almacenados asociados, ejecute lo siguiente desde la línea de comandos:</span><span class="sxs-lookup"><span data-stu-id="4df2e-147">To create the `AspNet_SqlCacheTablesForChangeNotification` table and associated stored procedures, run the following from the command line:</span></span>

[!code-console[Main](using-sql-cache-dependencies-cs/samples/sample1.cmd)]

> [!NOTE]
> <span data-ttu-id="4df2e-148">Para ejecutar estos comandos, el inicio de sesión de base de datos especificado debe estar en los roles [`db_securityadmin`](https://msdn.microsoft.com/library/ms188685.aspx) y [`db_ddladmin`](https://msdn.microsoft.com/library/ms190667.aspx) .</span><span class="sxs-lookup"><span data-stu-id="4df2e-148">To execute these commands the specified database login must be in the [`db_securityadmin`](https://msdn.microsoft.com/library/ms188685.aspx) and [`db_ddladmin`](https://msdn.microsoft.com/library/ms190667.aspx) roles.</span></span> <span data-ttu-id="4df2e-149">Para examinar el T-SQL enviado a la base de datos mediante el programa de línea de comandos `aspnet_regsql.exe`, consulte [esta entrada de blog](http://scottonwriting.net/sowblog/posts/10709.aspx).</span><span class="sxs-lookup"><span data-stu-id="4df2e-149">To examine the T-SQL sent to the database by the `aspnet_regsql.exe` command line program, refer to [this blog entry](http://scottonwriting.net/sowblog/posts/10709.aspx).</span></span>

<span data-ttu-id="4df2e-150">Por ejemplo, para agregar la infraestructura de sondeo a una base de datos de Microsoft SQL Server denominada `pubs` en un servidor de base de datos denominado `ScottsServer` con la autenticación de Windows, navegue hasta el directorio adecuado y, desde la línea de comandos, escriba:</span><span class="sxs-lookup"><span data-stu-id="4df2e-150">For example, to add the infrastructure for polling to a Microsoft SQL Server database named `pubs` on a database server named `ScottsServer` using Windows Authentication, navigate to the appropriate directory and, from the command line, enter:</span></span>

[!code-console[Main](using-sql-cache-dependencies-cs/samples/sample2.cmd)]

<span data-ttu-id="4df2e-151">Una vez agregada la infraestructura de nivel de base de datos, es necesario agregar los desencadenadores a las tablas que se usarán en las dependencias de caché de SQL.</span><span class="sxs-lookup"><span data-stu-id="4df2e-151">After the database-level infrastructure has been added, we need to add the triggers to those tables that will be used in SQL cache dependencies.</span></span> <span data-ttu-id="4df2e-152">Vuelva a usar el programa de línea de comandos `aspnet_regsql.exe`, pero especifique el nombre de la tabla con el modificador `-t` y, en lugar de usar el modificador `-ed` use `-et`, como se indica a continuación:</span><span class="sxs-lookup"><span data-stu-id="4df2e-152">Use the `aspnet_regsql.exe` command line program again, but specify the table name using the `-t` switch and instead of using the `-ed` switch use `-et`, like so:</span></span>

[!code-html[Main](using-sql-cache-dependencies-cs/samples/sample3.html)]

<span data-ttu-id="4df2e-153">Para agregar los desencadenadores a las tablas `authors` y `titles` en la base de datos de `pubs` en `ScottsServer`, use:</span><span class="sxs-lookup"><span data-stu-id="4df2e-153">To add the triggers to the `authors` and `titles` tables on the `pubs` database on `ScottsServer`, use:</span></span>

[!code-console[Main](using-sql-cache-dependencies-cs/samples/sample4.cmd)]

<span data-ttu-id="4df2e-154">En este tutorial, agregue los desencadenadores a las tablas `Products`, `Categories`y `Suppliers`.</span><span class="sxs-lookup"><span data-stu-id="4df2e-154">For this tutorial add the triggers to the `Products`, `Categories`, and `Suppliers` tables.</span></span> <span data-ttu-id="4df2e-155">Veremos la sintaxis de línea de comandos concreta en el paso 3.</span><span class="sxs-lookup"><span data-stu-id="4df2e-155">We'll look at the particular command line syntax in Step 3.</span></span>

## <a name="step-2-referencing-a-microsoft-sql-server-2005-express-edition-database-inapp_data"></a><span data-ttu-id="4df2e-156">Paso 2: hacer referencia a una base de datos de Microsoft SQL Server 2005 Express Edition en`App_Data`</span><span class="sxs-lookup"><span data-stu-id="4df2e-156">Step 2: Referencing a Microsoft SQL Server 2005 Express Edition Database in`App_Data`</span></span>

<span data-ttu-id="4df2e-157">El programa de línea de comandos `aspnet_regsql.exe` requiere la base de datos y el nombre del servidor para poder agregar la infraestructura de sondeo necesaria.</span><span class="sxs-lookup"><span data-stu-id="4df2e-157">The `aspnet_regsql.exe` command line program requires the database and server name in order to add the necessary polling infrastructure.</span></span> <span data-ttu-id="4df2e-158">Pero ¿cuál es el nombre del servidor y la base de datos de una base de datos Microsoft SQL Server 2005 Express que se encuentra en la carpeta `App_Data`?</span><span class="sxs-lookup"><span data-stu-id="4df2e-158">But what is the database and server name for a Microsoft SQL Server 2005 Express database that resides in the `App_Data` folder?</span></span> <span data-ttu-id="4df2e-159">En lugar de tener que detectar cuáles son los nombres de los servidores y las bases de datos, encontramos que el enfoque más sencillo consiste en adjuntar la base de datos a la instancia de `localhost\SQLExpress` Database y cambiar el nombre de los datos mediante [SQL Server Management Studio](https://msdn.microsoft.com/library/ms174173.aspx).</span><span class="sxs-lookup"><span data-stu-id="4df2e-159">Rather than having to discover what the database and server names are, I ve found that the simplest approach is to attach the database to the `localhost\SQLExpress` database instance and rename the data using [SQL Server Management Studio](https://msdn.microsoft.com/library/ms174173.aspx).</span></span> <span data-ttu-id="4df2e-160">Si tiene una de las versiones completas de SQL Server 2005 instaladas en el equipo, es probable que ya tenga SQL Server Management Studio instalado en el equipo.</span><span class="sxs-lookup"><span data-stu-id="4df2e-160">If you have one of the full versions of SQL Server 2005 installed on your machine, then you likely already have SQL Server Management Studio installed on your computer.</span></span> <span data-ttu-id="4df2e-161">Si solo tiene la edición Express, puede descargar el [Microsoft SQL Server gratuito Management Studio Express Edition](https://www.microsoft.com/downloads/details.aspx?displaylang=en&amp;FamilyID=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796).</span><span class="sxs-lookup"><span data-stu-id="4df2e-161">If you only have the Express edition, you can download the free [Microsoft SQL Server Management Studio Express Edition](https://www.microsoft.com/downloads/details.aspx?displaylang=en&amp;FamilyID=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796).</span></span>

<span data-ttu-id="4df2e-162">Empiece por cerrar Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="4df2e-162">Start by closing Visual Studio.</span></span> <span data-ttu-id="4df2e-163">Después, abra SQL Server Management Studio y elija conectarse al servidor de `localhost\SQLExpress` mediante la autenticación de Windows.</span><span class="sxs-lookup"><span data-stu-id="4df2e-163">Next, open SQL Server Management Studio and choose to connect to the `localhost\SQLExpress` server using Windows Authentication.</span></span>

![Adjuntar al servidor de localhost\SQLExpress](using-sql-cache-dependencies-cs/_static/image1.gif)

<span data-ttu-id="4df2e-165">**Figura 1**: asociar al servidor de `localhost\SQLExpress`</span><span class="sxs-lookup"><span data-stu-id="4df2e-165">**Figure 1**: Attach to the `localhost\SQLExpress` Server</span></span>

<span data-ttu-id="4df2e-166">Después de conectarse al servidor, Management Studio mostrará el servidor y tendrá subcarpetas para las bases de datos, la seguridad, etc.</span><span class="sxs-lookup"><span data-stu-id="4df2e-166">After connecting to the server, Management Studio will show the server and have subfolders for the databases, security, and so forth.</span></span> <span data-ttu-id="4df2e-167">Haga clic con el botón derecho en la carpeta bases de datos y elija la opción adjuntar.</span><span class="sxs-lookup"><span data-stu-id="4df2e-167">Right-click on the Databases folder and choose the Attach option.</span></span> <span data-ttu-id="4df2e-168">Se abrirá el cuadro de diálogo Adjuntar bases de datos (consulte la figura 2).</span><span class="sxs-lookup"><span data-stu-id="4df2e-168">This will bring up the Attach Databases dialog box (see Figure 2).</span></span> <span data-ttu-id="4df2e-169">Haga clic en el botón Agregar y seleccione la carpeta `NORTHWND.MDF` base de datos en la carpeta de `App_Data` de la aplicación Web.</span><span class="sxs-lookup"><span data-stu-id="4df2e-169">Click the Add button and select the `NORTHWND.MDF` database folder in your web application s `App_Data` folder.</span></span>

<span data-ttu-id="4df2e-170">[![adjunte el archivo NORTHWND. Base de datos MDF de la carpeta App_Data](using-sql-cache-dependencies-cs/_static/image2.gif)](using-sql-cache-dependencies-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="4df2e-170">[![Attach the NORTHWND.MDF Database from the App_Data Folder](using-sql-cache-dependencies-cs/_static/image2.gif)](using-sql-cache-dependencies-cs/_static/image1.png)</span></span>

<span data-ttu-id="4df2e-171">**Figura 2**: Adjunte la base de datos de `NORTHWND.MDF` desde la carpeta `App_Data` ([haga clic para ver la imagen de tamaño completo](using-sql-cache-dependencies-cs/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="4df2e-171">**Figure 2**: Attach the `NORTHWND.MDF` Database from the `App_Data` Folder ([Click to view full-size image](using-sql-cache-dependencies-cs/_static/image2.png))</span></span>

<span data-ttu-id="4df2e-172">Esto agregará la base de datos a la carpeta de bases de datos.</span><span class="sxs-lookup"><span data-stu-id="4df2e-172">This will add the database to the Databases folder.</span></span> <span data-ttu-id="4df2e-173">El nombre de la base de datos puede ser la ruta de acceso completa al archivo de base de datos o la ruta de acceso completa antepuesto con un [GUID](http://en.wikipedia.org/wiki/Globally_Unique_Identifier).</span><span class="sxs-lookup"><span data-stu-id="4df2e-173">The database name might be the full path to the database file or the full path prepended with a [GUID](http://en.wikipedia.org/wiki/Globally_Unique_Identifier).</span></span> <span data-ttu-id="4df2e-174">Para evitar tener que escribir este nombre de base de datos larga al usar la herramienta de línea de comandos ASPNET\_regsql. exe, cambie el nombre de la base de datos a un nombre más descriptivo; para ello, haga clic con el botón secundario en base de datos adjunta y elija cambiar nombre.</span><span class="sxs-lookup"><span data-stu-id="4df2e-174">To avoid having to type in this lengthy database name when using the aspnet\_regsql.exe command line tool, rename the database to a more human-friendly name by right-clicking on database just attached and choosing Rename.</span></span> <span data-ttu-id="4df2e-175">He cambiado el nombre de mi base de datos a tutoriales de datos.</span><span class="sxs-lookup"><span data-stu-id="4df2e-175">I ve renamed my database to DataTutorials .</span></span>

![Cambiar el nombre de la base de datos adjunta a un nombre más descriptivo](using-sql-cache-dependencies-cs/_static/image3.gif)

<span data-ttu-id="4df2e-177">**Figura 3**: cambiar el nombre de la base de datos adjunta a un nombre más descriptivo</span><span class="sxs-lookup"><span data-stu-id="4df2e-177">**Figure 3**: Rename the Attached Database to a More Human-Friendly Name</span></span>

## <a name="step-3-adding-the-polling-infrastructure-to-the-northwind-database"></a><span data-ttu-id="4df2e-178">Paso 3: agregar la infraestructura de sondeo a la base de datos Northwind</span><span class="sxs-lookup"><span data-stu-id="4df2e-178">Step 3: Adding the Polling Infrastructure to the Northwind Database</span></span>

<span data-ttu-id="4df2e-179">Ahora que hemos adjuntado la base de datos de `NORTHWND.MDF` desde la carpeta `App_Data`, se ha vuelto a preparar para agregar la infraestructura de sondeo.</span><span class="sxs-lookup"><span data-stu-id="4df2e-179">Now that we have attached the `NORTHWND.MDF` database from the `App_Data` folder, we re ready to add the polling infrastructure.</span></span> <span data-ttu-id="4df2e-180">Suponiendo que ha cambiado el nombre de la base de datos a los tutoriales de datos, ejecute los cuatro comandos siguientes:</span><span class="sxs-lookup"><span data-stu-id="4df2e-180">Assuming that you ve renamed the database to DataTutorials, run the following four commands:</span></span>

[!code-console[Main](using-sql-cache-dependencies-cs/samples/sample5.cmd)]

<span data-ttu-id="4df2e-181">Después de ejecutar estos cuatro comandos, haga clic con el botón derecho en el nombre de la base de datos en Management Studio, vaya al submenú tareas y elija Desasociar.</span><span class="sxs-lookup"><span data-stu-id="4df2e-181">After running these four commands, right-click on the database name in Management Studio, go to the Tasks submenu, and choose Detach.</span></span> <span data-ttu-id="4df2e-182">Después, cierre Management Studio y vuelva a abrir Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="4df2e-182">Then close Management Studio and reopen Visual Studio.</span></span>

<span data-ttu-id="4df2e-183">Una vez que Visual Studio se ha reabierto, profundice en la base de datos a través de la Explorador de servidores.</span><span class="sxs-lookup"><span data-stu-id="4df2e-183">Once Visual Studio has reopened, drill into the database through the Server Explorer.</span></span> <span data-ttu-id="4df2e-184">Tenga en cuenta la nueva tabla (`AspNet_SqlCacheTablesForChangeNotification`), los nuevos procedimientos almacenados y los desencadenadores en las tablas `Products`, `Categories`y `Suppliers`.</span><span class="sxs-lookup"><span data-stu-id="4df2e-184">Note the new table (`AspNet_SqlCacheTablesForChangeNotification`), the new stored procedures, and the triggers on the `Products`, `Categories`, and `Suppliers` tables.</span></span>

![La base de datos ahora incluye la infraestructura de sondeo necesaria](using-sql-cache-dependencies-cs/_static/image4.gif)

<span data-ttu-id="4df2e-186">**Figura 4**: la base de datos ahora incluye la infraestructura de sondeo necesaria</span><span class="sxs-lookup"><span data-stu-id="4df2e-186">**Figure 4**: The Database Now Includes the Necessary Polling Infrastructure</span></span>

## <a name="step-4-configuring-the-polling-service"></a><span data-ttu-id="4df2e-187">Paso 4: configurar el servicio de sondeo</span><span class="sxs-lookup"><span data-stu-id="4df2e-187">Step 4: Configuring the Polling Service</span></span>

<span data-ttu-id="4df2e-188">Después de crear las tablas, los desencadenadores y los procedimientos almacenados necesarios en la base de datos, el último paso es configurar el servicio de sondeo, que se realiza a través de `Web.config` especificando las bases de datos que se van a usar y la frecuencia de sondeo en milisegundos.</span><span class="sxs-lookup"><span data-stu-id="4df2e-188">After creating the needed tables, triggers, and stored procedures in the database, the final step is to configure the polling service, which is done through `Web.config` by specifying the databases to use and the polling frequency in milliseconds.</span></span> <span data-ttu-id="4df2e-189">El marcado siguiente sondea la base de datos Northwind una vez por segundo.</span><span class="sxs-lookup"><span data-stu-id="4df2e-189">The following markup polls the Northwind database once every second.</span></span>

[!code-xml[Main](using-sql-cache-dependencies-cs/samples/sample6.xml)]

<span data-ttu-id="4df2e-190">El valor `name` del elemento `<add>` (NorthwindDB) asocia un nombre legible con una base de datos determinada.</span><span class="sxs-lookup"><span data-stu-id="4df2e-190">The `name` value in the `<add>` element ( NorthwindDB ) associates a human-readable name with a particular database.</span></span> <span data-ttu-id="4df2e-191">Al trabajar con dependencias de caché de SQL, es necesario hacer referencia al nombre de la base de datos que se define aquí, así como a la tabla en la que se basan los datos almacenados en caché.</span><span class="sxs-lookup"><span data-stu-id="4df2e-191">When working with SQL cache dependencies, we'll need to refer to the database name defined here as well as the table that the cached data is based on.</span></span> <span data-ttu-id="4df2e-192">Veremos cómo usar la clase `SqlCacheDependency` para asociar mediante programación las dependencias de caché de SQL con los datos almacenados en caché en el paso 6.</span><span class="sxs-lookup"><span data-stu-id="4df2e-192">We'll see how to use the `SqlCacheDependency` class to programmatically associate SQL cache dependencies with cached data in Step 6.</span></span>

<span data-ttu-id="4df2e-193">Una vez establecida una dependencia de caché de SQL, el sistema de sondeo se conectará a las bases de datos definidas en la `<databases>` elementos cada `pollTime` milisegundos y ejecutará el `AspNet_SqlCachePollingStoredProcedure` procedimiento almacenado.</span><span class="sxs-lookup"><span data-stu-id="4df2e-193">Once a SQL cache dependency has been established, the polling system will connect to the databases defined in the `<databases>` elements every `pollTime` milliseconds and execute the `AspNet_SqlCachePollingStoredProcedure` stored procedure.</span></span> <span data-ttu-id="4df2e-194">Este procedimiento almacenado, que se volvió a agregar en el paso 3 con la herramienta de línea de comandos `aspnet_regsql.exe`, devuelve los valores `tableName` y `changeId` de cada registro de `AspNet_SqlCacheTablesForChangeNotification`.</span><span class="sxs-lookup"><span data-stu-id="4df2e-194">This stored procedure - which was added back in Step 3 using the `aspnet_regsql.exe` command line tool - returns the `tableName` and `changeId` values for each record in `AspNet_SqlCacheTablesForChangeNotification`.</span></span> <span data-ttu-id="4df2e-195">Las dependencias de caché de SQL obsoletas se expulsan de la memoria caché.</span><span class="sxs-lookup"><span data-stu-id="4df2e-195">Outdated SQL cache dependencies are evicted from the cache.</span></span>

<span data-ttu-id="4df2e-196">El valor `pollTime` presenta un equilibrio entre el rendimiento y la obsolescencia de los datos.</span><span class="sxs-lookup"><span data-stu-id="4df2e-196">The `pollTime` setting introduces a tradeoff between performance and data staleness.</span></span> <span data-ttu-id="4df2e-197">Un valor de `pollTime` pequeño aumenta el número de solicitudes a la base de datos, pero expulsa más rápidamente los datos obsoletos de la memoria caché.</span><span class="sxs-lookup"><span data-stu-id="4df2e-197">A small `pollTime` value increases the number of requests to the database, but more quickly evicts stale data from the cache.</span></span> <span data-ttu-id="4df2e-198">Un valor `pollTime` mayor reduce el número de solicitudes de base de datos, pero aumenta el retraso que transcurre entre el momento en que cambia el servidor back-end y el momento en que se expulsan los elementos de caché relacionados.</span><span class="sxs-lookup"><span data-stu-id="4df2e-198">A larger `pollTime` value reduces the number of database requests, but increases the delay between when the backend data changes and when the related cache items are evicted.</span></span> <span data-ttu-id="4df2e-199">Afortunadamente, la solicitud de base de datos está ejecutando un procedimiento almacenado simple que devuelve solo unas pocas filas de una tabla simple y ligera.</span><span class="sxs-lookup"><span data-stu-id="4df2e-199">Fortunately, the database request is executing a simple stored procedure that s returning just a few rows from a simple, lightweight table.</span></span> <span data-ttu-id="4df2e-200">Pero experimente con distintos valores de `pollTime` para encontrar un equilibrio ideal entre el acceso a la base de datos y la obsolescencia de los datos de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="4df2e-200">But do experiment with different `pollTime` values to find an ideal balance between database access and data staleness for your application.</span></span> <span data-ttu-id="4df2e-201">El valor de `pollTime` más pequeño permitido es 500.</span><span class="sxs-lookup"><span data-stu-id="4df2e-201">The smallest `pollTime` value allowed is 500.</span></span>

> [!NOTE]
> <span data-ttu-id="4df2e-202">En el ejemplo anterior se proporciona un único `pollTime` valor en el elemento `<sqlCacheDependency>`, pero se puede especificar opcionalmente el valor `pollTime` en el elemento `<add>`.</span><span class="sxs-lookup"><span data-stu-id="4df2e-202">The above example provides a single `pollTime` value in the `<sqlCacheDependency>` element, but you can optionally specify the `pollTime` value in the `<add>` element.</span></span> <span data-ttu-id="4df2e-203">Esto es útil si tiene varias bases de datos especificadas y desea personalizar la frecuencia de sondeo por base de datos.</span><span class="sxs-lookup"><span data-stu-id="4df2e-203">This is useful if you have multiple databases specified and want to customize the polling frequency per database.</span></span>

## <a name="step-5-declaratively-working-with-sql-cache-dependencies"></a><span data-ttu-id="4df2e-204">Paso 5: trabajar de forma declarativa con las dependencias de caché de SQL</span><span class="sxs-lookup"><span data-stu-id="4df2e-204">Step 5: Declaratively Working with SQL Cache Dependencies</span></span>

<span data-ttu-id="4df2e-205">En los pasos 1 a 4, analizamos cómo configurar la infraestructura de base de datos necesaria y configurar el sistema de sondeo.</span><span class="sxs-lookup"><span data-stu-id="4df2e-205">In Steps 1 through 4 we looked at how to setup the necessary database infrastructure and configure the polling system.</span></span> <span data-ttu-id="4df2e-206">Con esta infraestructura implementada, ahora se pueden agregar elementos a la memoria caché de datos con una dependencia de caché de SQL asociada mediante técnicas de programación o declarativas.</span><span class="sxs-lookup"><span data-stu-id="4df2e-206">With this infrastructure in place, we can now add items to the data cache with an associated SQL cache dependency using either programmatic or declarative techniques.</span></span> <span data-ttu-id="4df2e-207">En este paso, examinaremos cómo trabajar mediante declaración con las dependencias de caché de SQL.</span><span class="sxs-lookup"><span data-stu-id="4df2e-207">In this step we'll examine how to declaratively work with SQL cache dependencies.</span></span> <span data-ttu-id="4df2e-208">En el paso 6 veremos el enfoque de programación.</span><span class="sxs-lookup"><span data-stu-id="4df2e-208">In Step 6 we'll look at the programmatic approach.</span></span>

<span data-ttu-id="4df2e-209">Los [datos de almacenamiento en caché con el](caching-data-with-the-objectdatasource-cs.md) tutorial de ObjectDataSource exploraron las capacidades de almacenamiento en caché declarativo de ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="4df2e-209">The [Caching Data with the ObjectDataSource](caching-data-with-the-objectdatasource-cs.md) tutorial explored the declarative caching capabilities of the ObjectDataSource.</span></span> <span data-ttu-id="4df2e-210">Con solo establecer la propiedad `EnableCaching` en `true` y la propiedad `CacheDuration` en un intervalo de tiempo, ObjectDataSource almacenará automáticamente en caché los datos devueltos de su objeto subyacente para el intervalo especificado.</span><span class="sxs-lookup"><span data-stu-id="4df2e-210">By simply setting the `EnableCaching` property to `true` and the `CacheDuration` property to some time interval, the ObjectDataSource will automatically cache the data returned from its underlying object for the specified interval.</span></span> <span data-ttu-id="4df2e-211">ObjectDataSource también puede usar una o varias dependencias de caché de SQL.</span><span class="sxs-lookup"><span data-stu-id="4df2e-211">The ObjectDataSource can also use one or more SQL cache dependencies.</span></span>

<span data-ttu-id="4df2e-212">Para demostrar el uso de las dependencias de caché de SQL mediante declaración, abra la página `SqlCacheDependencies.aspx` en la carpeta `Caching` y arrastre un control GridView desde el cuadro de herramientas hasta el diseñador.</span><span class="sxs-lookup"><span data-stu-id="4df2e-212">To demonstrate using SQL cache dependencies declaratively, open the `SqlCacheDependencies.aspx` page in the `Caching` folder and drag a GridView from the Toolbox onto the Designer.</span></span> <span data-ttu-id="4df2e-213">Establezca el `ID` de GridView en `ProductsDeclarative` y, desde su etiqueta inteligente, elija enlazarlo a un nuevo ObjectDataSource denominado `ProductsDataSourceDeclarative`.</span><span class="sxs-lookup"><span data-stu-id="4df2e-213">Set the GridView s `ID` to `ProductsDeclarative` and, from its smart tag, choose to bind it to a new ObjectDataSource named `ProductsDataSourceDeclarative`.</span></span>

<span data-ttu-id="4df2e-214">[![crear un nuevo ObjectDataSource denominado ProductsDataSourceDeclarative](using-sql-cache-dependencies-cs/_static/image5.gif)](using-sql-cache-dependencies-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="4df2e-214">[![Create a New ObjectDataSource Named ProductsDataSourceDeclarative](using-sql-cache-dependencies-cs/_static/image5.gif)](using-sql-cache-dependencies-cs/_static/image3.png)</span></span>

<span data-ttu-id="4df2e-215">**Figura 5**: crear un nuevo ObjectDataSource denominado `ProductsDataSourceDeclarative` ([haga clic para ver la imagen de tamaño completo](using-sql-cache-dependencies-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="4df2e-215">**Figure 5**: Create a New ObjectDataSource Named `ProductsDataSourceDeclarative` ([Click to view full-size image](using-sql-cache-dependencies-cs/_static/image4.png))</span></span>

<span data-ttu-id="4df2e-216">Configure ObjectDataSource para usar la clase `ProductsBLL` y establezca la lista desplegable de la pestaña seleccionar en `GetProducts()`.</span><span class="sxs-lookup"><span data-stu-id="4df2e-216">Configure the ObjectDataSource to use the `ProductsBLL` class and set the drop-down list in the SELECT tab to `GetProducts()`.</span></span> <span data-ttu-id="4df2e-217">En la pestaña actualizar, elija la sobrecarga `UpdateProduct` con tres parámetros de entrada: `productName`, `unitPrice`y `productID`.</span><span class="sxs-lookup"><span data-stu-id="4df2e-217">In the UPDATE tab, choose the `UpdateProduct` overload with three input parameters - `productName`, `unitPrice`, and `productID`.</span></span> <span data-ttu-id="4df2e-218">Establezca las listas desplegables en (ninguno) en las pestañas insertar y eliminar.</span><span class="sxs-lookup"><span data-stu-id="4df2e-218">Set the drop-down lists to (None) in the INSERT and DELETE tabs.</span></span>

<span data-ttu-id="4df2e-219">[![usar la sobrecarga UpdateProduct con tres parámetros de entrada](using-sql-cache-dependencies-cs/_static/image6.gif)](using-sql-cache-dependencies-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="4df2e-219">[![Use the UpdateProduct Overload with Three Input Parameters](using-sql-cache-dependencies-cs/_static/image6.gif)](using-sql-cache-dependencies-cs/_static/image5.png)</span></span>

<span data-ttu-id="4df2e-220">**Figura 6**: uso de la sobrecarga UpdateProduct con tres parámetros de entrada ([haga clic para ver la imagen de tamaño completo](using-sql-cache-dependencies-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="4df2e-220">**Figure 6**: Use the UpdateProduct Overload with Three Input Parameters ([Click to view full-size image](using-sql-cache-dependencies-cs/_static/image6.png))</span></span>

<span data-ttu-id="4df2e-221">[![establecer la lista desplegable en (ninguno) para las pestañas insertar y eliminar](using-sql-cache-dependencies-cs/_static/image7.gif)](using-sql-cache-dependencies-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="4df2e-221">[![Set the Drop-Down List to (None) for the INSERT and DELETE Tabs](using-sql-cache-dependencies-cs/_static/image7.gif)](using-sql-cache-dependencies-cs/_static/image7.png)</span></span>

<span data-ttu-id="4df2e-222">**Figura 7**: establezca la lista desplegable en (ninguno) para las pestañas insertar y eliminar ([haga clic para ver la imagen de tamaño completo](using-sql-cache-dependencies-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="4df2e-222">**Figure 7**: Set the Drop-Down List to (None) for the INSERT and DELETE Tabs ([Click to view full-size image](using-sql-cache-dependencies-cs/_static/image8.png))</span></span>

<span data-ttu-id="4df2e-223">Después de completar el Asistente para configurar orígenes de datos, Visual Studio creará BoundFields y CheckBoxFields en GridView para cada uno de los campos de datos.</span><span class="sxs-lookup"><span data-stu-id="4df2e-223">After completing the Configure Data Source wizard, Visual Studio will create BoundFields and CheckBoxFields in the GridView for each of the data fields.</span></span> <span data-ttu-id="4df2e-224">Quite todos los campos, excepto `ProductName`, `CategoryName`y `UnitPrice`, y dé formato a estos campos como considere oportunos.</span><span class="sxs-lookup"><span data-stu-id="4df2e-224">Remove all fields but `ProductName`, `CategoryName`, and `UnitPrice`, and format these fields as you see fit.</span></span> <span data-ttu-id="4df2e-225">En la etiqueta inteligente de GridView s, active las casillas habilitar paginación, habilitar ordenación y habilitar edición.</span><span class="sxs-lookup"><span data-stu-id="4df2e-225">From the GridView s smart tag, check the Enable Paging, Enable Sorting, and Enable Editing checkboxes.</span></span> <span data-ttu-id="4df2e-226">Visual Studio establecerá la propiedad ObjectDataSource s `OldValuesParameterFormatString` en `original_{0}`.</span><span class="sxs-lookup"><span data-stu-id="4df2e-226">Visual Studio will set the ObjectDataSource s `OldValuesParameterFormatString` property to `original_{0}`.</span></span> <span data-ttu-id="4df2e-227">Para que la característica de edición de GridView funcione correctamente, quite esta propiedad completamente de la sintaxis declarativa o vuelva a establecerla en su valor predeterminado, `{0}`.</span><span class="sxs-lookup"><span data-stu-id="4df2e-227">In order for the GridView s edit feature to work properly, either remove this property entirely from the declarative syntax or set it back to its default value, `{0}`.</span></span>

<span data-ttu-id="4df2e-228">Por último, agregue un control Web Label sobre GridView y establezca su propiedad `ID` en `ODSEvents` y su propiedad `EnableViewState` en `false`.</span><span class="sxs-lookup"><span data-stu-id="4df2e-228">Finally, add a Label Web control above the GridView and set its `ID` property to `ODSEvents` and its `EnableViewState` property to `false`.</span></span> <span data-ttu-id="4df2e-229">Después de realizar estos cambios, el marcado declarativo de la página debe ser similar al siguiente.</span><span class="sxs-lookup"><span data-stu-id="4df2e-229">After making these changes, your page s declarative markup should look similar to the following.</span></span> <span data-ttu-id="4df2e-230">Tenga en cuenta que he realizado varias personalizaciones estéticas en los campos de GridView que no son necesarios para mostrar la funcionalidad de dependencia de caché de SQL.</span><span class="sxs-lookup"><span data-stu-id="4df2e-230">Note that I ve made a number of aesthetic customizations to the GridView fields that are not necessary to demonstrate the SQL cache dependency functionality.</span></span>

[!code-aspx[Main](using-sql-cache-dependencies-cs/samples/sample7.aspx)]

<span data-ttu-id="4df2e-231">A continuación, cree un controlador de eventos para el evento ObjectDataSource s `Selecting` y agregue el código siguiente:</span><span class="sxs-lookup"><span data-stu-id="4df2e-231">Next, create an event handler for the ObjectDataSource s `Selecting` event and in it add the following code:</span></span>

[!code-csharp[Main](using-sql-cache-dependencies-cs/samples/sample8.cs)]

<span data-ttu-id="4df2e-232">Recuerde que el evento ObjectDataSource s `Selecting` solo se activa cuando se recuperan datos de su objeto subyacente.</span><span class="sxs-lookup"><span data-stu-id="4df2e-232">Recall that the ObjectDataSource s `Selecting` event fires only when retrieving data from its underlying object.</span></span> <span data-ttu-id="4df2e-233">Si ObjectDataSource obtiene acceso a los datos desde su propia memoria caché, este evento no se desencadena.</span><span class="sxs-lookup"><span data-stu-id="4df2e-233">If the ObjectDataSource accesses the data from its own cache, this event is not fired.</span></span>

<span data-ttu-id="4df2e-234">Ahora, visite esta página a través de un explorador.</span><span class="sxs-lookup"><span data-stu-id="4df2e-234">Now, visit this page through a browser.</span></span> <span data-ttu-id="4df2e-235">Puesto que todavía estamos implementando cualquier almacenamiento en caché, cada vez que se pagina, ordena o edita la cuadrícula, la página debe mostrar el texto, seleccionando evento desencadenado, como se muestra en la figura 8.</span><span class="sxs-lookup"><span data-stu-id="4df2e-235">Since we ve yet to implement any caching, each time you page, sort, or edit the grid the page should display the text, �Selecting event fired, as Figure 8 shows.</span></span>

<span data-ttu-id="4df2e-236">[![el evento ObjectDataSource s Selecting se activa cada vez que se pagina, edita o ordena el control GridView](using-sql-cache-dependencies-cs/_static/image8.gif)](using-sql-cache-dependencies-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="4df2e-236">[![The ObjectDataSource s Selecting Event Fires Each Time the GridView is Paged, Edited, or Sorted](using-sql-cache-dependencies-cs/_static/image8.gif)](using-sql-cache-dependencies-cs/_static/image9.png)</span></span>

<span data-ttu-id="4df2e-237">**Figura 8**: el evento ObjectDataSource s `Selecting` se activa cada vez que se pagina, edita o ordena el control GridView ([haga clic para ver la imagen de tamaño completo](using-sql-cache-dependencies-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="4df2e-237">**Figure 8**: The ObjectDataSource s `Selecting` Event Fires Each Time the GridView is Paged, Edited, or Sorted ([Click to view full-size image](using-sql-cache-dependencies-cs/_static/image10.png))</span></span>

<span data-ttu-id="4df2e-238">Como vimos en los [datos de almacenamiento en caché con el](caching-data-with-the-objectdatasource-cs.md) tutorial de ObjectDataSource, establecer la propiedad `EnableCaching` en `true` hace que ObjectDataSource almacene en caché sus datos durante la duración especificada por su propiedad `CacheDuration`.</span><span class="sxs-lookup"><span data-stu-id="4df2e-238">As we saw in the [Caching Data with the ObjectDataSource](caching-data-with-the-objectdatasource-cs.md) tutorial, setting the `EnableCaching` property to `true` causes the ObjectDataSource to cache its data for the duration specified by its `CacheDuration` property.</span></span> <span data-ttu-id="4df2e-239">ObjectDataSource también tiene una [propiedad`SqlCacheDependency`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.sqlcachedependency.aspx), que agrega una o más dependencias de caché SQL a los datos almacenados en caché mediante el patrón:</span><span class="sxs-lookup"><span data-stu-id="4df2e-239">The ObjectDataSource also has a [`SqlCacheDependency` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.sqlcachedependency.aspx), which adds one or more SQL cache dependencies to the cached data using the pattern:</span></span>

[!code-css[Main](using-sql-cache-dependencies-cs/samples/sample9.css)]

<span data-ttu-id="4df2e-240">Donde *DatabaseName* es el nombre de la base de datos tal y como se especifica en el atributo `name` del elemento `<add>` de `Web.config`y *TableName* es el nombre de la tabla de base de datos.</span><span class="sxs-lookup"><span data-stu-id="4df2e-240">Where *databaseName* is the name of the database as specified in the `name` attribute of the `<add>` element in `Web.config`, and *tableName* is the name of the database table.</span></span> <span data-ttu-id="4df2e-241">Por ejemplo, para crear un ObjectDataSource que almacene en memoria caché los datos de forma indefinida según una dependencia de caché de SQL en la tabla de `Products` de Northwind, establezca la propiedad ObjectDataSource s `EnableCaching` en `true` y su propiedad `SqlCacheDependency` en NorthwindDB: Products.</span><span class="sxs-lookup"><span data-stu-id="4df2e-241">For example, to create an ObjectDataSource that caches data indefinitely based on a SQL cache dependency against the Northwind s `Products` table, set the ObjectDataSource s `EnableCaching` property to `true` and its `SqlCacheDependency` property to NorthwindDB:Products .</span></span>

> [!NOTE]
> <span data-ttu-id="4df2e-242">Puede usar una dependencia de caché de SQL *y* una expiración basada en tiempo estableciendo `EnableCaching` en `true`, `CacheDuration` en el intervalo de tiempo y `SqlCacheDependency` a los nombres de base de datos y tabla.</span><span class="sxs-lookup"><span data-stu-id="4df2e-242">You can use a SQL cache dependency *and* a time-based expiry by setting `EnableCaching` to `true`, `CacheDuration` to the time interval, and `SqlCacheDependency` to the database and table name(s).</span></span> <span data-ttu-id="4df2e-243">ObjectDataSource expulsará sus datos cuando se alcance la expiración basada en el tiempo o cuando el sistema de sondeo tenga en cuenta que los datos de la base de datos subyacente han cambiado, lo que suceda primero.</span><span class="sxs-lookup"><span data-stu-id="4df2e-243">The ObjectDataSource will evict its data when the time-based expiry is reached or when the polling system notes that the underlying database data has changed, whichever happens first.</span></span>

<span data-ttu-id="4df2e-244">GridView en `SqlCacheDependencies.aspx` muestra datos de dos tablas: `Products` y `Categories` (el campo Product s `CategoryName` se recupera a través de un `JOIN` en `Categories`).</span><span class="sxs-lookup"><span data-stu-id="4df2e-244">The GridView in `SqlCacheDependencies.aspx` displays data from two tables - `Products` and `Categories` (the product s `CategoryName` field is retrieved via a `JOIN` on `Categories`).</span></span> <span data-ttu-id="4df2e-245">Por lo tanto, queremos especificar dos dependencias de caché de SQL: NorthwindDB: Products; NorthwindDB: categorías.</span><span class="sxs-lookup"><span data-stu-id="4df2e-245">Therefore, we want to specify two SQL cache dependencies: NorthwindDB:Products;NorthwindDB:Categories .</span></span>

<span data-ttu-id="4df2e-246">[![configurar ObjectDataSource para admitir el almacenamiento en caché mediante dependencias de caché de SQL en productos y categorías](using-sql-cache-dependencies-cs/_static/image9.gif)](using-sql-cache-dependencies-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="4df2e-246">[![Configure the ObjectDataSource to Support Caching Using SQL Cache Dependencies on Products and Categories](using-sql-cache-dependencies-cs/_static/image9.gif)](using-sql-cache-dependencies-cs/_static/image11.png)</span></span>

<span data-ttu-id="4df2e-247">**Figura 9**: configuración de ObjectDataSource para admitir el almacenamiento en caché mediante dependencias de caché de SQL en `Products` y `Categories` ([haga clic para ver la imagen de tamaño completo](using-sql-cache-dependencies-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="4df2e-247">**Figure 9**: Configure the ObjectDataSource to Support Caching Using SQL Cache Dependencies on `Products` and `Categories` ([Click to view full-size image](using-sql-cache-dependencies-cs/_static/image12.png))</span></span>

<span data-ttu-id="4df2e-248">Después de configurar ObjectDataSource para admitir el almacenamiento en caché, vuelva a visitar la página a través de un explorador.</span><span class="sxs-lookup"><span data-stu-id="4df2e-248">After configuring the ObjectDataSource to support caching, revisit the page through a browser.</span></span> <span data-ttu-id="4df2e-249">Una vez más, el texto que seleccione evento desencadenado debe aparecer en la primera visita de la página, pero debería desaparecer al paginar, ordenar o hacer clic en los botones editar o cancelar.</span><span class="sxs-lookup"><span data-stu-id="4df2e-249">Again, the text �Selecting event fired should appear on the first page visit, but should go away when paging, sorting, or clicking the Edit or Cancel buttons.</span></span> <span data-ttu-id="4df2e-250">Esto se debe a que, una vez que los datos se cargan en la memoria caché de ObjectDataSource, permanece allí hasta que se modifican las tablas `Products` o `Categories` o los datos se actualizan a través de GridView.</span><span class="sxs-lookup"><span data-stu-id="4df2e-250">This is because after the data is loaded into the ObjectDataSource s cache, it remains there until the `Products` or `Categories` tables are modified or the data is updated through the GridView.</span></span>

<span data-ttu-id="4df2e-251">Después de la paginación a través de la cuadrícula y de anotar la falta de texto desencadenado por el evento, abra una nueva ventana del explorador y vaya al tutorial de conceptos básicos de la sección edición, inserción y eliminación (`~/EditInsertDelete/Basics.aspx`).</span><span class="sxs-lookup"><span data-stu-id="4df2e-251">After paging through the grid and noting the lack of the �Selecting event fired text, open a new browser window and navigate to the Basics tutorial in the Editing, Inserting, and Deleting section (`~/EditInsertDelete/Basics.aspx`).</span></span> <span data-ttu-id="4df2e-252">Actualice el nombre o el precio de un producto.</span><span class="sxs-lookup"><span data-stu-id="4df2e-252">Update the name or price of a product.</span></span> <span data-ttu-id="4df2e-253">A continuación, desde hasta la primera ventana del explorador, vea una página de datos diferente, ordene la cuadrícula o haga clic en el botón de edición de una fila.</span><span class="sxs-lookup"><span data-stu-id="4df2e-253">Then, from to the first browser window, view a different page of data, sort the grid, or click a row s Edit button.</span></span> <span data-ttu-id="4df2e-254">Esta vez, el evento seleccionado debe volver a aparecer, ya que se han modificado los datos de la base de datos subyacente (vea la figura 10).</span><span class="sxs-lookup"><span data-stu-id="4df2e-254">This time, the �Selecting event fired should reappear, as the underlying database data has been modified (see Figure 10).</span></span> <span data-ttu-id="4df2e-255">Si el texto no aparece, espere unos instantes e inténtelo de nuevo.</span><span class="sxs-lookup"><span data-stu-id="4df2e-255">If the text does not appear, wait a few moments and try again.</span></span> <span data-ttu-id="4df2e-256">Recuerde que el servicio de sondeo está comprobando los cambios en la tabla `Products` cada `pollTime` milisegundos, por lo que hay un retraso entre el momento en que se actualizan los datos subyacentes y el momento en que se expulsan los datos almacenados en caché.</span><span class="sxs-lookup"><span data-stu-id="4df2e-256">Remember that the polling service is checking for changes to the `Products` table every `pollTime` milliseconds, so there is a delay between when the underlying data is updated and when the cached data is evicted.</span></span>

<span data-ttu-id="4df2e-257">[![modificación de la tabla Products expulsa los datos del producto almacenados en caché](using-sql-cache-dependencies-cs/_static/image10.gif)](using-sql-cache-dependencies-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="4df2e-257">[![Modifying the Products Table Evicts the Cached Product Data](using-sql-cache-dependencies-cs/_static/image10.gif)](using-sql-cache-dependencies-cs/_static/image13.png)</span></span>

<span data-ttu-id="4df2e-258">**Figura 10**: modificación de la tabla de productos expulsa los datos de producto almacenados en caché ([haga clic para ver la imagen de tamaño completo](using-sql-cache-dependencies-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="4df2e-258">**Figure 10**: Modifying the Products Table Evicts the Cached Product Data ([Click to view full-size image](using-sql-cache-dependencies-cs/_static/image14.png))</span></span>

## <a name="step-6-programmatically-working-with-thesqlcachedependencyclass"></a><span data-ttu-id="4df2e-259">Paso 6: trabajar mediante programación con la clase`SqlCacheDependency`</span><span class="sxs-lookup"><span data-stu-id="4df2e-259">Step 6: Programmatically Working with the`SqlCacheDependency`Class</span></span>

<span data-ttu-id="4df2e-260">Los [datos de almacenamiento en caché en el](caching-data-in-the-architecture-cs.md) tutorial de arquitectura examinaron las ventajas de usar una capa de almacenamiento en caché independiente en la arquitectura en lugar de acoplar estrechamente el almacenamiento en caché con ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="4df2e-260">The [Caching Data in the Architecture](caching-data-in-the-architecture-cs.md) tutorial looked at the benefits of using a separate Caching Layer in the architecture as opposed to tightly coupling the caching with the ObjectDataSource.</span></span> <span data-ttu-id="4df2e-261">En ese tutorial, creamos una clase `ProductsCL` para mostrar cómo trabajar con la caché de datos mediante programación.</span><span class="sxs-lookup"><span data-stu-id="4df2e-261">In that tutorial we created a `ProductsCL` class to demonstrate programmatically working with the data cache.</span></span> <span data-ttu-id="4df2e-262">Para usar las dependencias de caché de SQL en la capa de almacenamiento en caché, use la clase `SqlCacheDependency`.</span><span class="sxs-lookup"><span data-stu-id="4df2e-262">To utilize SQL cache dependencies in the Caching Layer, use the `SqlCacheDependency` class.</span></span>

<span data-ttu-id="4df2e-263">Con el sistema de sondeo, un objeto de `SqlCacheDependency` debe estar asociado a una base de datos y un par de tablas determinados.</span><span class="sxs-lookup"><span data-stu-id="4df2e-263">With the polling system, a `SqlCacheDependency` object must be associated with a particular database and table pair.</span></span> <span data-ttu-id="4df2e-264">El código siguiente, por ejemplo, crea un objeto `SqlCacheDependency` basado en la tabla de `Products` de datos Northwind:</span><span class="sxs-lookup"><span data-stu-id="4df2e-264">The following code, for example, creates a `SqlCacheDependency` object based on the Northwind database s `Products` table:</span></span>

[!code-csharp[Main](using-sql-cache-dependencies-cs/samples/sample10.cs)]

<span data-ttu-id="4df2e-265">Los dos parámetros de entrada del constructor `SqlCacheDependency` s son los nombres de base de datos y tabla, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="4df2e-265">The two input parameters to the `SqlCacheDependency` s constructor are the database and table names, respectively.</span></span> <span data-ttu-id="4df2e-266">Al igual que con la propiedad ObjectDataSource s `SqlCacheDependency`, el nombre de la base de datos utilizado es el mismo que el valor especificado en el atributo `name` del elemento `<add>` en `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="4df2e-266">Like with the ObjectDataSource s `SqlCacheDependency` property, the database name used is the same as the value specified in the `name` attribute of the `<add>` element in `Web.config`.</span></span> <span data-ttu-id="4df2e-267">El nombre de la tabla es el nombre real de la tabla de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="4df2e-267">The table name is the actual name of the database table.</span></span>

<span data-ttu-id="4df2e-268">Para asociar un `SqlCacheDependency` con un elemento agregado a la memoria caché de datos, utilice una de las sobrecargas del método `Insert` que acepta una dependencia.</span><span class="sxs-lookup"><span data-stu-id="4df2e-268">To associate a `SqlCacheDependency` with an item added to the data cache, use one of the `Insert` method overloads that accepts a dependency.</span></span> <span data-ttu-id="4df2e-269">El código siguiente agrega un *valor* a la memoria caché de datos durante un tiempo indefinido, pero lo asocia a un `SqlCacheDependency` en la tabla `Products`.</span><span class="sxs-lookup"><span data-stu-id="4df2e-269">The following code adds *value* to the data cache for an indefinite duration, but associates it with a `SqlCacheDependency` on the `Products` table.</span></span> <span data-ttu-id="4df2e-270">En Resumen, el *valor* permanece en la memoria caché hasta que se expulsa debido a las restricciones de memoria o porque el sistema de sondeo ha detectado que la tabla de `Products` ha cambiado desde que se almacenó en caché.</span><span class="sxs-lookup"><span data-stu-id="4df2e-270">In short, *value* will remain in the cache until it is evicted due to memory constraints or because the polling system has detected that the `Products` table has changed since it was cached.</span></span>

[!code-csharp[Main](using-sql-cache-dependencies-cs/samples/sample11.cs)]

<span data-ttu-id="4df2e-271">La clase de `ProductsCL` de la capa de almacenamiento en caché almacena actualmente los datos de la tabla de `Products` con una expiración basada en el tiempo de 60 segundos.</span><span class="sxs-lookup"><span data-stu-id="4df2e-271">The Caching Layer s `ProductsCL` class currently caches data from the `Products` table using a time-based expiry of 60 seconds.</span></span> <span data-ttu-id="4df2e-272">Permita actualizar esta clase para que use las dependencias de caché de SQL en su lugar.</span><span class="sxs-lookup"><span data-stu-id="4df2e-272">Let s update this class so that it uses SQL cache dependencies instead.</span></span> <span data-ttu-id="4df2e-273">El método de `AddCacheItem` de `ProductsCL` clase, que es responsable de agregar los datos a la memoria caché, actualmente contiene el código siguiente:</span><span class="sxs-lookup"><span data-stu-id="4df2e-273">The `ProductsCL` class s `AddCacheItem` method, which is responsible for adding the data to the cache, currently contains the following code:</span></span>

[!code-csharp[Main](using-sql-cache-dependencies-cs/samples/sample12.cs)]

<span data-ttu-id="4df2e-274">Actualice este código para usar un objeto de `SqlCacheDependency` en lugar de la dependencia de caché de `MasterCacheKeyArray`:</span><span class="sxs-lookup"><span data-stu-id="4df2e-274">Update this code to use a `SqlCacheDependency` object instead of the `MasterCacheKeyArray` cache dependency:</span></span>

[!code-csharp[Main](using-sql-cache-dependencies-cs/samples/sample13.cs)]

<span data-ttu-id="4df2e-275">Para probar esta funcionalidad, agregue un control GridView a la página bajo el `ProductsDeclarative` GridView existente.</span><span class="sxs-lookup"><span data-stu-id="4df2e-275">To test this functionality, add a GridView to the page beneath the existing `ProductsDeclarative` GridView.</span></span> <span data-ttu-id="4df2e-276">Establezca este nuevo `ID` de GridView en `ProductsProgrammatic` y, a través de su etiqueta inteligente, enlácelo a un nuevo ObjectDataSource denominado `ProductsDataSourceProgrammatic`.</span><span class="sxs-lookup"><span data-stu-id="4df2e-276">Set this new GridView s `ID` to `ProductsProgrammatic` and, through its smart tag, bind it to a new ObjectDataSource named `ProductsDataSourceProgrammatic`.</span></span> <span data-ttu-id="4df2e-277">Configure ObjectDataSource para usar la clase `ProductsCL`, estableciendo las listas desplegables de las pestañas seleccionar y actualizar en `GetProducts` y `UpdateProduct`, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="4df2e-277">Configure the ObjectDataSource to use the `ProductsCL` class, setting the drop-down lists in the SELECT and UPDATE tabs to `GetProducts` and `UpdateProduct`, respectively.</span></span>

<span data-ttu-id="4df2e-278">[![configurar ObjectDataSource para usar la clase ProductsCL](using-sql-cache-dependencies-cs/_static/image11.gif)](using-sql-cache-dependencies-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="4df2e-278">[![Configure the ObjectDataSource to Use the ProductsCL Class](using-sql-cache-dependencies-cs/_static/image11.gif)](using-sql-cache-dependencies-cs/_static/image15.png)</span></span>

<span data-ttu-id="4df2e-279">**Figura 11**: configuración de ObjectDataSource para usar la clase `ProductsCL` ([haga clic para ver la imagen de tamaño completo](using-sql-cache-dependencies-cs/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="4df2e-279">**Figure 11**: Configure the ObjectDataSource to Use the `ProductsCL` Class ([Click to view full-size image](using-sql-cache-dependencies-cs/_static/image16.png))</span></span>

<span data-ttu-id="4df2e-280">[![Seleccione el método GetProducts en la lista desplegable seleccionar s.](using-sql-cache-dependencies-cs/_static/image12.gif)](using-sql-cache-dependencies-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="4df2e-280">[![Select the GetProducts Method from the SELECT Tab s Drop-Down List](using-sql-cache-dependencies-cs/_static/image12.gif)](using-sql-cache-dependencies-cs/_static/image17.png)</span></span>

<span data-ttu-id="4df2e-281">**Figura 12**: seleccione el método de `GetProducts` en la lista desplegable seleccionar s Tab ([haga clic para ver la imagen a tamaño completo](using-sql-cache-dependencies-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="4df2e-281">**Figure 12**: Select the `GetProducts` Method from the SELECT Tab s Drop-Down List ([Click to view full-size image](using-sql-cache-dependencies-cs/_static/image18.png))</span></span>

<span data-ttu-id="4df2e-282">[![elegir el método UpdateProduct en la lista desplegable actualizar pestaña s](using-sql-cache-dependencies-cs/_static/image13.gif)](using-sql-cache-dependencies-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="4df2e-282">[![Choose the UpdateProduct Method from the UPDATE Tab s Drop-Down List](using-sql-cache-dependencies-cs/_static/image13.gif)](using-sql-cache-dependencies-cs/_static/image19.png)</span></span>

<span data-ttu-id="4df2e-283">**Figura 13**: elija el método UpdateProduct en la lista desplegable actualizar pestaña s ([haga clic para ver la imagen a tamaño completo](using-sql-cache-dependencies-cs/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="4df2e-283">**Figure 13**: Choose the UpdateProduct Method from the UPDATE Tab s Drop-Down List ([Click to view full-size image](using-sql-cache-dependencies-cs/_static/image20.png))</span></span>

<span data-ttu-id="4df2e-284">Después de completar el Asistente para configurar orígenes de datos, Visual Studio creará BoundFields y CheckBoxFields en GridView para cada uno de los campos de datos.</span><span class="sxs-lookup"><span data-stu-id="4df2e-284">After completing the Configure Data Source wizard, Visual Studio will create BoundFields and CheckBoxFields in the GridView for each of the data fields.</span></span> <span data-ttu-id="4df2e-285">Al igual que con el primer GridView agregado a esta página, quite todos los campos, pero `ProductName`, `CategoryName`y `UnitPrice`, y dé formato a estos campos como considere oportunos.</span><span class="sxs-lookup"><span data-stu-id="4df2e-285">Like with the first GridView added to this page, remove all fields but `ProductName`, `CategoryName`, and `UnitPrice`, and format these fields as you see fit.</span></span> <span data-ttu-id="4df2e-286">En la etiqueta inteligente de GridView s, active las casillas habilitar paginación, habilitar ordenación y habilitar edición.</span><span class="sxs-lookup"><span data-stu-id="4df2e-286">From the GridView s smart tag, check the Enable Paging, Enable Sorting, and Enable Editing checkboxes.</span></span> <span data-ttu-id="4df2e-287">Al igual que con el `ProductsDataSourceDeclarative` ObjectDataSource, Visual Studio establecerá la propiedad `ProductsDataSourceProgrammatic` ObjectDataSource s `OldValuesParameterFormatString` en `original_{0}`.</span><span class="sxs-lookup"><span data-stu-id="4df2e-287">As with the `ProductsDataSourceDeclarative` ObjectDataSource, Visual Studio will set the `ProductsDataSourceProgrammatic` ObjectDataSource s `OldValuesParameterFormatString` property to `original_{0}`.</span></span> <span data-ttu-id="4df2e-288">Para que la característica de edición de GridView funcione correctamente, vuelva a establecer esta propiedad en `{0}` (o quite la asignación de propiedad de la sintaxis declarativa por completo).</span><span class="sxs-lookup"><span data-stu-id="4df2e-288">In order for the GridView s edit feature to work properly, set this property back to `{0}` (or remove the property assignment from the declarative syntax altogether).</span></span>

<span data-ttu-id="4df2e-289">Después de completar estas tareas, el marcado declarativo de GridView y ObjectDataSource resultante debe ser similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="4df2e-289">After completing these tasks, the resulting GridView and ObjectDataSource declarative markup should look like the following:</span></span>

[!code-aspx[Main](using-sql-cache-dependencies-cs/samples/sample14.aspx)]

<span data-ttu-id="4df2e-290">Para probar la dependencia de caché de SQL en la capa de almacenamiento en caché, establezca un punto de interrupción en el método `ProductCL` Class s `AddCacheItem` y, a continuación, inicie la depuración.</span><span class="sxs-lookup"><span data-stu-id="4df2e-290">To test the SQL cache dependency in the Caching Layer set a breakpoint in the `ProductCL` class s `AddCacheItem` method and then start debugging.</span></span> <span data-ttu-id="4df2e-291">La primera vez que visita `SqlCacheDependencies.aspx`, se debe alcanzar el punto de interrupción, ya que los datos se solicitan por primera vez y se colocan en la memoria caché.</span><span class="sxs-lookup"><span data-stu-id="4df2e-291">When you first visit `SqlCacheDependencies.aspx`, the breakpoint should be hit as the data is requested for the first time and placed into the cache.</span></span> <span data-ttu-id="4df2e-292">A continuación, desplácese a otra página de GridView u ordene una de las columnas.</span><span class="sxs-lookup"><span data-stu-id="4df2e-292">Next, move to another page in the GridView or sort one of the columns.</span></span> <span data-ttu-id="4df2e-293">Esto hace que GridView reconsulte sus datos, pero los datos se deben encontrar en la memoria caché, ya que la tabla de base de datos de `Products` no se ha modificado.</span><span class="sxs-lookup"><span data-stu-id="4df2e-293">This causes the GridView to requery its data, but the data should be found in the cache since the `Products` database table has not been modified.</span></span> <span data-ttu-id="4df2e-294">Si los datos no se encuentran repetidamente en la memoria caché, asegúrese de que hay suficiente memoria disponible en el equipo e inténtelo de nuevo.</span><span class="sxs-lookup"><span data-stu-id="4df2e-294">If the data is repeatedly not found in the cache, make sure there is sufficient memory available on your computer and try again.</span></span>

<span data-ttu-id="4df2e-295">Después de paginar a través de algunas páginas de GridView, abra una segunda ventana del explorador y vaya al tutorial de conceptos básicos de la sección edición, inserción y eliminación (`~/EditInsertDelete/Basics.aspx`).</span><span class="sxs-lookup"><span data-stu-id="4df2e-295">After paging through a few pages of the GridView, open a second browser window and navigate to the Basics tutorial in the Editing, Inserting, and Deleting section (`~/EditInsertDelete/Basics.aspx`).</span></span> <span data-ttu-id="4df2e-296">Actualice un registro de la tabla productos y, a continuación, desde la primera ventana del explorador, vea una nueva página o haga clic en uno de los encabezados de ordenación.</span><span class="sxs-lookup"><span data-stu-id="4df2e-296">Update a record from the Products table and then, from the first browser window, view a new page or click on one of the sorting headers.</span></span>

<span data-ttu-id="4df2e-297">En este escenario, verá una de estas dos cosas: se alcanzará el punto de interrupción, lo que indica que los datos almacenados en caché se expulsón debido al cambio en la base de datos. o bien, no se alcanzará el punto de interrupción, lo que significa que `SqlCacheDependencies.aspx` ahora muestra los datos obsoletos.</span><span class="sxs-lookup"><span data-stu-id="4df2e-297">In this scenario you will see one of two things: either the breakpoint will be hit, indicating that the cached data was evicted due to the change in the database; or, the breakpoint will not be hit, meaning that `SqlCacheDependencies.aspx` is now showing stale data.</span></span> <span data-ttu-id="4df2e-298">Si no se alcanza el punto de interrupción, es probable que el servicio de sondeo todavía no se haya desencadenado desde que se cambiaron los datos.</span><span class="sxs-lookup"><span data-stu-id="4df2e-298">If the breakpoint is not hit, it is likely because the polling service has not yet fired since the data was changed.</span></span> <span data-ttu-id="4df2e-299">Recuerde que el servicio de sondeo está comprobando los cambios en la tabla `Products` cada `pollTime` milisegundos, por lo que hay un retraso entre el momento en que se actualizan los datos subyacentes y el momento en que se expulsan los datos almacenados en caché.</span><span class="sxs-lookup"><span data-stu-id="4df2e-299">Remember that the polling service is checking for changes to the `Products` table every `pollTime` milliseconds, so there is a delay between when the underlying data is updated and when the cached data is evicted.</span></span>

> [!NOTE]
> <span data-ttu-id="4df2e-300">Es más probable que este retraso aparezca al editar uno de los productos a través de GridView en `SqlCacheDependencies.aspx`.</span><span class="sxs-lookup"><span data-stu-id="4df2e-300">This delay is more likely to appear when editing one of the products through the GridView in `SqlCacheDependencies.aspx`.</span></span> <span data-ttu-id="4df2e-301">En los [datos de almacenamiento en caché en el tutorial de arquitectura](caching-data-in-the-architecture-cs.md) se ha agregado la `MasterCacheKeyArray` dependencia de caché para asegurarse de que los datos que se editan mediante el método `ProductsCL` clase s `UpdateProduct` se expulsó de la memoria caché.</span><span class="sxs-lookup"><span data-stu-id="4df2e-301">In the [Caching Data in the Architecture](caching-data-in-the-architecture-cs.md) tutorial we added the `MasterCacheKeyArray` cache dependency to ensure that the data being edited through the `ProductsCL` class s `UpdateProduct` method was evicted from the cache.</span></span> <span data-ttu-id="4df2e-302">Sin embargo, reemplazamos esta dependencia de caché al modificar el método `AddCacheItem` anteriormente en este paso y, por lo tanto, la clase `ProductsCL` continuará mostrando los datos almacenados en caché hasta que el sistema de sondeo apunte el cambio a la tabla `Products`.</span><span class="sxs-lookup"><span data-stu-id="4df2e-302">However, we replaced this cache dependency when modifying the `AddCacheItem` method earlier in this step and therefore the `ProductsCL` class will continue to show the cached data until the polling system notes the change to the `Products` table.</span></span> <span data-ttu-id="4df2e-303">Veremos cómo volver a introducir la dependencia de caché `MasterCacheKeyArray` en el paso 7.</span><span class="sxs-lookup"><span data-stu-id="4df2e-303">We'll see how to reintroduce the `MasterCacheKeyArray` cache dependency in Step 7.</span></span>

## <a name="step-7-associating-multiple-dependencies-with-a-cached-item"></a><span data-ttu-id="4df2e-304">Paso 7: asociar varias dependencias a un elemento almacenado en caché</span><span class="sxs-lookup"><span data-stu-id="4df2e-304">Step 7: Associating Multiple Dependencies with a Cached Item</span></span>

<span data-ttu-id="4df2e-305">Recuerde que la dependencia de caché de `MasterCacheKeyArray` se usa para asegurarse de que *todos los* datos relacionados con el producto se expulsan de la memoria caché cuando se actualiza un único elemento asociado en él.</span><span class="sxs-lookup"><span data-stu-id="4df2e-305">Recall that the `MasterCacheKeyArray` cache dependency is used to ensure that *all* product-related data is evicted from the cache when any single item associated within it is updated.</span></span> <span data-ttu-id="4df2e-306">Por ejemplo, el método `GetProductsByCategoryID(categoryID)` almacena en caché `ProductsDataTables` instancias para cada valor *CategoryID* único.</span><span class="sxs-lookup"><span data-stu-id="4df2e-306">For example, the `GetProductsByCategoryID(categoryID)` method caches `ProductsDataTables` instances for each unique *categoryID* value.</span></span> <span data-ttu-id="4df2e-307">Si se expulsa uno de estos objetos, el `MasterCacheKeyArray` dependencia de caché garantiza que los demás también se quiten.</span><span class="sxs-lookup"><span data-stu-id="4df2e-307">If one of these objects is evicted, the `MasterCacheKeyArray` cache dependency ensures that the others are also removed.</span></span> <span data-ttu-id="4df2e-308">Sin esta dependencia de caché, cuando se modifican los datos en caché, existe la posibilidad de que otros datos de productos almacenados en caché no estén actualizados.</span><span class="sxs-lookup"><span data-stu-id="4df2e-308">Without this cache dependency, when the cached data is modified the possibility exists that other cached product data may be out of date.</span></span> <span data-ttu-id="4df2e-309">Por lo tanto, es importante mantener el `MasterCacheKeyArray` dependencia de caché al usar las dependencias de caché de SQL.</span><span class="sxs-lookup"><span data-stu-id="4df2e-309">Consequently, it s important that we maintain the `MasterCacheKeyArray` cache dependency when using SQL cache dependencies.</span></span> <span data-ttu-id="4df2e-310">Sin embargo, el método de caché de datos s `Insert` solo permite un objeto de dependencia.</span><span class="sxs-lookup"><span data-stu-id="4df2e-310">However, the data cache s `Insert` method only allows for a single dependency object.</span></span>

<span data-ttu-id="4df2e-311">Además, al trabajar con dependencias de caché de SQL, es posible que necesitemos asociar varias tablas de base de datos como dependencias.</span><span class="sxs-lookup"><span data-stu-id="4df2e-311">Furthermore, when working with SQL cache dependencies we may need to associate multiple database tables as dependencies.</span></span> <span data-ttu-id="4df2e-312">Por ejemplo, la `ProductsDataTable` almacenada en la memoria caché de la clase `ProductsCL` contiene los nombres de categoría y proveedor de cada producto, pero el método `AddCacheItem` solo utiliza una dependencia en `Products`.</span><span class="sxs-lookup"><span data-stu-id="4df2e-312">For example, the `ProductsDataTable` cached in the `ProductsCL` class contains the category and supplier names for each product, but the `AddCacheItem` method only uses a dependency on `Products`.</span></span> <span data-ttu-id="4df2e-313">En esta situación, si el usuario actualiza el nombre de una categoría o proveedor, los datos del producto almacenados en caché permanecerán en la memoria caché y no estarán actualizados.</span><span class="sxs-lookup"><span data-stu-id="4df2e-313">In this situation, if the user updates the name of a category or supplier, the cached product data will remain in the cache and be out of date.</span></span> <span data-ttu-id="4df2e-314">Por lo tanto, deseamos que los datos del producto almacenados en caché dependan no solo de la tabla `Products`, sino también de las tablas `Categories` y `Suppliers`.</span><span class="sxs-lookup"><span data-stu-id="4df2e-314">Therefore, we want to make the cached product data dependent on not only the `Products` table, but on the `Categories` and `Suppliers` tables as well.</span></span>

<span data-ttu-id="4df2e-315">La [clase`AggregateCacheDependency`](https://msdn.microsoft.com/library/system.web.caching.aggregatecachedependency.aspx) proporciona un medio para asociar varias dependencias a un elemento de la memoria caché.</span><span class="sxs-lookup"><span data-stu-id="4df2e-315">The [`AggregateCacheDependency` class](https://msdn.microsoft.com/library/system.web.caching.aggregatecachedependency.aspx) provides a means for associating multiple dependencies with a cache item.</span></span> <span data-ttu-id="4df2e-316">Empiece por crear una instancia de `AggregateCacheDependency`.</span><span class="sxs-lookup"><span data-stu-id="4df2e-316">Start by creating an `AggregateCacheDependency` instance.</span></span> <span data-ttu-id="4df2e-317">A continuación, agregue el conjunto de dependencias mediante el método `AggregateCacheDependency` s `Add`.</span><span class="sxs-lookup"><span data-stu-id="4df2e-317">Next, add the set of dependencies using the `AggregateCacheDependency` s `Add` method.</span></span> <span data-ttu-id="4df2e-318">Al insertar el elemento en la memoria caché de datos después, pase la instancia de `AggregateCacheDependency`.</span><span class="sxs-lookup"><span data-stu-id="4df2e-318">When inserting the item into the data cache thereafter, pass in the `AggregateCacheDependency` instance.</span></span> <span data-ttu-id="4df2e-319">Cuando *alguna* de las dependencias de la instancia de `AggregateCacheDependency` cambie, se expulsará el elemento almacenado en caché.</span><span class="sxs-lookup"><span data-stu-id="4df2e-319">When *any* of the `AggregateCacheDependency` instance s dependencies change, the cached item will be evicted.</span></span>

<span data-ttu-id="4df2e-320">A continuación se muestra el código actualizado para el método de `AddCacheItem` de clase `ProductsCL`.</span><span class="sxs-lookup"><span data-stu-id="4df2e-320">The following shows the updated code for the `ProductsCL` class s `AddCacheItem` method.</span></span> <span data-ttu-id="4df2e-321">El método crea el `MasterCacheKeyArray` dependencia de caché junto con `SqlCacheDependency` objetos para las tablas `Products`, `Categories`y `Suppliers`.</span><span class="sxs-lookup"><span data-stu-id="4df2e-321">The method creates the `MasterCacheKeyArray` cache dependency along with `SqlCacheDependency` objects for the `Products`, `Categories`, and `Suppliers` tables.</span></span> <span data-ttu-id="4df2e-322">Todos ellos se combinan en uno `AggregateCacheDependency` objeto denominado `aggregateDependencies`, que se pasa al método `Insert`.</span><span class="sxs-lookup"><span data-stu-id="4df2e-322">These are all combined into one `AggregateCacheDependency` object named `aggregateDependencies`, which is then passed into the `Insert` method.</span></span>

[!code-csharp[Main](using-sql-cache-dependencies-cs/samples/sample15.cs)]

<span data-ttu-id="4df2e-323">Pruebe este nuevo código. Ahora, los cambios en las tablas `Products`, `Categories`o `Suppliers` provocan que se expulsen los datos almacenados en caché.</span><span class="sxs-lookup"><span data-stu-id="4df2e-323">Test this new code out. Now changes to the `Products`, `Categories`, or `Suppliers` tables cause the cached data to be evicted.</span></span> <span data-ttu-id="4df2e-324">Además, el método de `UpdateProduct` de `ProductsCL` clase, al que se llama al editar un producto a través de GridView, expulsa la dependencia de la caché de `MasterCacheKeyArray`, lo que hace que se expulsen los `ProductsDataTable` almacenados en caché y que los datos se vuelvan a recuperar en la solicitud siguiente.</span><span class="sxs-lookup"><span data-stu-id="4df2e-324">Moreover, the `ProductsCL` class s `UpdateProduct` method, which is called when editing a product through the GridView, evicts the `MasterCacheKeyArray` cache dependency, which causes the cached `ProductsDataTable` to be evicted and the data to be re-retrieved on the next request.</span></span>

> [!NOTE]
> <span data-ttu-id="4df2e-325">Las dependencias de caché de SQL también se pueden usar con el [almacenamiento en caché de resultados](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/caching/output.aspx).</span><span class="sxs-lookup"><span data-stu-id="4df2e-325">SQL cache dependencies can also be used with [output caching](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/caching/output.aspx).</span></span> <span data-ttu-id="4df2e-326">Para obtener una demostración de esta funcionalidad, vea: [usar el almacenamiento en caché de resultados de ASP.net con SQL Server](https://msdn.microsoft.com/library/e3w8402y(VS.80).aspx).</span><span class="sxs-lookup"><span data-stu-id="4df2e-326">For a demonstration of this functionality, see: [Using ASP.NET Output Caching with SQL Server](https://msdn.microsoft.com/library/e3w8402y(VS.80).aspx).</span></span>

## <a name="summary"></a><span data-ttu-id="4df2e-327">Resumen</span><span class="sxs-lookup"><span data-stu-id="4df2e-327">Summary</span></span>

<span data-ttu-id="4df2e-328">Al almacenar en caché los datos de la base de datos, los datos se conservarán idealmente en la memoria caché hasta que se modifiquen en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="4df2e-328">When caching database data, the data will ideally remain in the cache until it is modified in the database.</span></span> <span data-ttu-id="4df2e-329">Con ASP.NET 2,0, se pueden crear y usar dependencias de caché de SQL en escenarios declarativos y de programación.</span><span class="sxs-lookup"><span data-stu-id="4df2e-329">With ASP.NET 2.0, SQL cache dependencies can be created and used in both declarative and programmatic scenarios.</span></span> <span data-ttu-id="4df2e-330">Uno de los desafíos de este enfoque es detectar cuándo se han modificado los datos.</span><span class="sxs-lookup"><span data-stu-id="4df2e-330">One of the challenges with this approach is in discovering when the data has been modified.</span></span> <span data-ttu-id="4df2e-331">Las versiones completas de Microsoft SQL Server 2005 proporcionan funciones de notificación que pueden avisar a una aplicación cuando ha cambiado el resultado de una consulta.</span><span class="sxs-lookup"><span data-stu-id="4df2e-331">The full versions of Microsoft SQL Server 2005 provide notification capabilities that can alert an application when a query result has changed.</span></span> <span data-ttu-id="4df2e-332">En el caso de la edición Express de SQL Server 2005 y versiones anteriores de SQL Server, se debe usar en su lugar un sistema de sondeo.</span><span class="sxs-lookup"><span data-stu-id="4df2e-332">For the Express Edition of SQL Server 2005 and older versions of SQL Server, a polling system must be used instead.</span></span> <span data-ttu-id="4df2e-333">Afortunadamente, la configuración de la infraestructura de sondeo necesaria es bastante sencilla.</span><span class="sxs-lookup"><span data-stu-id="4df2e-333">Fortunately, setting up the necessary polling infrastructure is fairly straightforward.</span></span>

<span data-ttu-id="4df2e-334">¡ Feliz programación!</span><span class="sxs-lookup"><span data-stu-id="4df2e-334">Happy Programming!</span></span>

## <a name="further-reading"></a><span data-ttu-id="4df2e-335">Información adicional</span><span class="sxs-lookup"><span data-stu-id="4df2e-335">Further Reading</span></span>

<span data-ttu-id="4df2e-336">Para obtener más información sobre los temas descritos en este tutorial, consulte los siguientes recursos:</span><span class="sxs-lookup"><span data-stu-id="4df2e-336">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="4df2e-337">Uso de notificaciones de consulta en Microsoft SQL Server 2005</span><span class="sxs-lookup"><span data-stu-id="4df2e-337">Using Query Notifications in Microsoft SQL Server 2005</span></span>](https://msdn.microsoft.com/library/ms175110.aspx)
- [<span data-ttu-id="4df2e-338">Crear una notificación de consulta</span><span class="sxs-lookup"><span data-stu-id="4df2e-338">Creating a Query Notification</span></span>](https://msdn.microsoft.com/library/ms188669.aspx)
- <span data-ttu-id="4df2e-339">[Almacenar en caché en ASP.NET con la clase `SqlCacheDependency`](https://msdn.microsoft.com/library/ms178604(VS.80).aspx)</span><span class="sxs-lookup"><span data-stu-id="4df2e-339">[Caching in ASP.NET with the `SqlCacheDependency` Class](https://msdn.microsoft.com/library/ms178604(VS.80).aspx)</span></span>
- <span data-ttu-id="4df2e-340">[Herramienta de registro de SQL Server de ASP.NET (`aspnet_regsql.exe`)](https://msdn.microsoft.com/library/ms229862(vs.80).aspx)</span><span class="sxs-lookup"><span data-stu-id="4df2e-340">[ASP.NET SQL Server Registration Tool (`aspnet_regsql.exe`)](https://msdn.microsoft.com/library/ms229862(vs.80).aspx)</span></span>
- [<span data-ttu-id="4df2e-341">Información general de `SqlCacheDependency`</span><span class="sxs-lookup"><span data-stu-id="4df2e-341">Overview of `SqlCacheDependency`</span></span>](http://www.aspnetresources.com/blog/sql_cache_depedency_overview.aspx)

## <a name="about-the-author"></a><span data-ttu-id="4df2e-342">Acerca del autor</span><span class="sxs-lookup"><span data-stu-id="4df2e-342">About the Author</span></span>

<span data-ttu-id="4df2e-343">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor de siete libros de ASP/ASP. net y fundador de [4GuysFromRolla.com](http://www.4guysfromrolla.com), ha estado trabajando con las tecnologías Web de Microsoft desde 1998.</span><span class="sxs-lookup"><span data-stu-id="4df2e-343">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="4df2e-344">Scott funciona como consultor, profesor y redactor independiente.</span><span class="sxs-lookup"><span data-stu-id="4df2e-344">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="4df2e-345">Su último libro se [*enseña a ASP.NET 2,0 en 24 horas*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="4df2e-345">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="4df2e-346">Puede ponerse en contacto con usted en [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="4df2e-346">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="4df2e-347">o a través de su blog, que encontrará en [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="4df2e-347">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="4df2e-348">Agradecimiento especial a</span><span class="sxs-lookup"><span data-stu-id="4df2e-348">Special Thanks To</span></span>

<span data-ttu-id="4df2e-349">Muchos revisores útiles revisaron esta serie de tutoriales.</span><span class="sxs-lookup"><span data-stu-id="4df2e-349">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="4df2e-350">Los revisores responsables de este tutorial eran Marko Rangel, Teresa Murphy y Hilton Giesenow.</span><span class="sxs-lookup"><span data-stu-id="4df2e-350">Lead reviewers for this tutorial were Marko Rangel, Teresa Murphy, and Hilton Giesenow.</span></span> <span data-ttu-id="4df2e-351">¿Está interesado en revisar los próximos artículos de MSDN?</span><span class="sxs-lookup"><span data-stu-id="4df2e-351">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="4df2e-352">En caso afirmativo, suéltelo en [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="4df2e-352">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="4df2e-353">[Anterior](caching-data-at-application-startup-cs.md)
> [Siguiente](caching-data-with-the-objectdatasource-vb.md)</span><span class="sxs-lookup"><span data-stu-id="4df2e-353">[Previous](caching-data-at-application-startup-cs.md)
[Next](caching-data-with-the-objectdatasource-vb.md)</span></span>
