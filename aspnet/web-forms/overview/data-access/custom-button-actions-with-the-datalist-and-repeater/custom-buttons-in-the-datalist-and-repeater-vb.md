---
uid: web-forms/overview/data-access/custom-button-actions-with-the-datalist-and-repeater/custom-buttons-in-the-datalist-and-repeater-vb
title: Botones personalizados en los controles DataList y Repeater (VB) | Microsoft Docs
author: rick-anderson
description: En este tutorial vamos a crear una interfaz que usa un control Repeater para mostrar las categorías en el sistema, y cada categoría de proporcionar un botón para mostrar su associ...
ms.author: riande
ms.date: 11/13/2006
ms.assetid: 1afdb14d-6e49-4e1f-aead-2934730d472e
msc.legacyurl: /web-forms/overview/data-access/custom-button-actions-with-the-datalist-and-repeater/custom-buttons-in-the-datalist-and-repeater-vb
msc.type: authoredcontent
ms.openlocfilehash: c88c3c01dc641d5076ac99f4e1cf2b2fb1681ffd
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 03/01/2019
ms.locfileid: "57027232"
---
<a name="custom-buttons-in-the-datalist-and-repeater-vb"></a><span data-ttu-id="779a5-103">Botones personalizados en los controles DataList y Repeater (VB)</span><span class="sxs-lookup"><span data-stu-id="779a5-103">Custom Buttons in the DataList and Repeater (VB)</span></span>
====================
<span data-ttu-id="779a5-104">por [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="779a5-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="779a5-105">[Descargue la aplicación de ejemplo](http://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_46_VB.exe) o [descargar PDF](custom-buttons-in-the-datalist-and-repeater-vb/_static/datatutorial46vb1.pdf)</span><span class="sxs-lookup"><span data-stu-id="779a5-105">[Download Sample App](http://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_46_VB.exe) or [Download PDF](custom-buttons-in-the-datalist-and-repeater-vb/_static/datatutorial46vb1.pdf)</span></span>

> <span data-ttu-id="779a5-106">En este tutorial vamos a crear una interfaz que usa un control Repeater para mostrar las categorías en el sistema, y cada categoría de proporcionar un botón para mostrar sus productos asociados con un control BulletedList.</span><span class="sxs-lookup"><span data-stu-id="779a5-106">In this tutorial we'll build an interface that uses a Repeater to list the categories in the system, with each category providing a button to show its associated products using a BulletedList control.</span></span>


## <a name="introduction"></a><span data-ttu-id="779a5-107">Introducción</span><span class="sxs-lookup"><span data-stu-id="779a5-107">Introduction</span></span>

<span data-ttu-id="779a5-108">A lo largo de los últimos tutoriales diecisiete DataList y Repeater, se ve crea los ejemplos de solo lectura y edición y eliminación de ejemplos.</span><span class="sxs-lookup"><span data-stu-id="779a5-108">Throughout the past seventeen DataList and Repeater tutorials, we ve created both read-only examples and editing and deleting examples.</span></span> <span data-ttu-id="779a5-109">Para facilitar la edición y eliminación de capacidades dentro de un control DataList, agregamos botones al control DataList s `ItemTemplate` que, al hacer clic, produjo una devolución de datos y se genera un evento de DataList correspondiente al botón s `CommandName` propiedad.</span><span class="sxs-lookup"><span data-stu-id="779a5-109">To facilitate editing and deleting capabilities within a DataList, we added buttons to the DataList s `ItemTemplate` that, when clicked, caused a postback and raised a DataList event corresponding to the button s `CommandName` property.</span></span> <span data-ttu-id="779a5-110">Por ejemplo, al agregar un botón para el `ItemTemplate` con un `CommandName` DataList s hace que el valor de propiedad de edición `EditCommand` para desencadenar en postback; una con el `CommandName` eliminar genera el `DeleteCommand`.</span><span class="sxs-lookup"><span data-stu-id="779a5-110">For example, adding a button to the `ItemTemplate` with a `CommandName` property value of Edit causes the DataList s `EditCommand` to fire on postback; one with the `CommandName` Delete raises the `DeleteCommand`.</span></span>

<span data-ttu-id="779a5-111">Además para editar y eliminar botones, los controles DataList y Repeater pueden incluir también los botones, LinkButtons o ImageButtons que, al hacer clic, realizar alguna lógica personalizada de servidor.</span><span class="sxs-lookup"><span data-stu-id="779a5-111">In addition to Edit and Delete buttons, the DataList and Repeater controls can also include Buttons, LinkButtons, or ImageButtons that, when clicked, perform some custom server-side logic.</span></span> <span data-ttu-id="779a5-112">En este tutorial vamos a crear una interfaz que usa un control Repeater para mostrar las categorías en el sistema.</span><span class="sxs-lookup"><span data-stu-id="779a5-112">In this tutorial we'll build an interface that uses a Repeater to list the categories in the system.</span></span> <span data-ttu-id="779a5-113">Para cada categoría, el control Repeater incluirá un botón para mostrar la categoría de productos asociada con un control BulletedList (consulte la figura 1).</span><span class="sxs-lookup"><span data-stu-id="779a5-113">For each category, the Repeater will include a button to show the category s associated products using a BulletedList control (see Figure 1).</span></span>


<span data-ttu-id="779a5-114">[![Al hacer clic en el vínculo Mostrar productos se muestra los productos de s de categoría en una lista con viñetas](custom-buttons-in-the-datalist-and-repeater-vb/_static/image2.png)](custom-buttons-in-the-datalist-and-repeater-vb/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="779a5-114">[![Clicking the Show Products Link Displays the Category s Products in a Bulleted List](custom-buttons-in-the-datalist-and-repeater-vb/_static/image2.png)](custom-buttons-in-the-datalist-and-repeater-vb/_static/image1.png)</span></span>

<span data-ttu-id="779a5-115">**Figura 1**: Al hacer clic en la muestra de vínculo Mostrar productos de la categoría de productos de s en una lista con viñetas ([haga clic aquí para ver imagen en tamaño completo](custom-buttons-in-the-datalist-and-repeater-vb/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="779a5-115">**Figure 1**: Clicking the Show Products Link Displays the Category s Products in a Bulleted List ([Click to view full-size image](custom-buttons-in-the-datalist-and-repeater-vb/_static/image3.png))</span></span>


## <a name="step-1-adding-the-custom-button-tutorial-web-pages"></a><span data-ttu-id="779a5-116">Paso 1: Adición de las páginas Web del Tutorial botón personalizado</span><span class="sxs-lookup"><span data-stu-id="779a5-116">Step 1: Adding the Custom Button Tutorial Web Pages</span></span>

<span data-ttu-id="779a5-117">Antes de adentrarnos en cómo agregar un botón personalizado, permiten s primero dedique un momento para crear las páginas ASP.NET en nuestro proyecto de sitio Web que necesitaremos para este tutorial.</span><span class="sxs-lookup"><span data-stu-id="779a5-117">Before we look at how to add a custom button, let s first take a moment to create the ASP.NET pages in our website project that we'll need for this tutorial.</span></span> <span data-ttu-id="779a5-118">Empiece por agregar una nueva carpeta denominada `CustomButtonsDataListRepeater`.</span><span class="sxs-lookup"><span data-stu-id="779a5-118">Start by adding a new folder named `CustomButtonsDataListRepeater`.</span></span> <span data-ttu-id="779a5-119">A continuación, agregue las siguientes dos páginas ASP.NET a la carpeta y asegúrese de asociar cada página con el `Site.master` página maestra:</span><span class="sxs-lookup"><span data-stu-id="779a5-119">Next, add the following two ASP.NET pages to that folder, making sure to associate each page with the `Site.master` master page:</span></span>

- `Default.aspx`
- `CustomButtons.aspx`


![Agregar las páginas ASP.NET para los tutoriales relacionados con los botones personalizados](custom-buttons-in-the-datalist-and-repeater-vb/_static/image4.png)

<span data-ttu-id="779a5-121">**Figura 2**: Agregar las páginas ASP.NET para los tutoriales relacionados con los botones personalizados</span><span class="sxs-lookup"><span data-stu-id="779a5-121">**Figure 2**: Add the ASP.NET Pages for the Custom Buttons-Related Tutorials</span></span>


<span data-ttu-id="779a5-122">Al igual que en las demás carpetas `Default.aspx` en el `CustomButtonsDataListRepeater` carpeta mostrará una lista de los tutoriales en su sección.</span><span class="sxs-lookup"><span data-stu-id="779a5-122">Like in the other folders, `Default.aspx` in the `CustomButtonsDataListRepeater` folder will list the tutorials in its section.</span></span> <span data-ttu-id="779a5-123">Recuerde que el `SectionLevelTutorialListing.ascx` Control de usuario proporciona esta funcionalidad.</span><span class="sxs-lookup"><span data-stu-id="779a5-123">Recall that the `SectionLevelTutorialListing.ascx` User Control provides this functionality.</span></span> <span data-ttu-id="779a5-124">Agregar este Control de usuario a `Default.aspx` arrastrándolo desde el Explorador de soluciones en la página de vista de diseño de s.</span><span class="sxs-lookup"><span data-stu-id="779a5-124">Add this User Control to `Default.aspx` by dragging it from the Solution Explorer onto the page s Design view.</span></span>


<span data-ttu-id="779a5-125">[![Agregar el Control de usuario SectionLevelTutorialListing.ascx a Default.aspx](custom-buttons-in-the-datalist-and-repeater-vb/_static/image6.png)](custom-buttons-in-the-datalist-and-repeater-vb/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="779a5-125">[![Add the SectionLevelTutorialListing.ascx User Control to Default.aspx](custom-buttons-in-the-datalist-and-repeater-vb/_static/image6.png)](custom-buttons-in-the-datalist-and-repeater-vb/_static/image5.png)</span></span>

<span data-ttu-id="779a5-126">**Figura 3**: Agregar el `SectionLevelTutorialListing.ascx` Control de usuario `Default.aspx` ([haga clic aquí para ver imagen en tamaño completo](custom-buttons-in-the-datalist-and-repeater-vb/_static/image7.png))</span><span class="sxs-lookup"><span data-stu-id="779a5-126">**Figure 3**: Add the `SectionLevelTutorialListing.ascx` User Control to `Default.aspx` ([Click to view full-size image](custom-buttons-in-the-datalist-and-repeater-vb/_static/image7.png))</span></span>


<span data-ttu-id="779a5-127">Por último, agregue las páginas como entradas para el `Web.sitemap` archivo.</span><span class="sxs-lookup"><span data-stu-id="779a5-127">Lastly, add the pages as entries to the `Web.sitemap` file.</span></span> <span data-ttu-id="779a5-128">En concreto, agregue el siguiente marcado después de la paginación y ordenación con los controles DataList y Repeater `<siteMapNode>`:</span><span class="sxs-lookup"><span data-stu-id="779a5-128">Specifically, add the following markup after the Paging and Sorting with the DataList and Repeater `<siteMapNode>`:</span></span>


[!code-xml[Main](custom-buttons-in-the-datalist-and-repeater-vb/samples/sample1.xml)]

<span data-ttu-id="779a5-129">Después de actualizar `Web.sitemap`, dedique un momento para ver el sitio Web de tutoriales a través de un explorador.</span><span class="sxs-lookup"><span data-stu-id="779a5-129">After updating `Web.sitemap`, take a moment to view the tutorials website through a browser.</span></span> <span data-ttu-id="779a5-130">El menú de la izquierda ahora incluye elementos para la edición, inserción y eliminación de tutoriales.</span><span class="sxs-lookup"><span data-stu-id="779a5-130">The menu on the left now includes items for the editing, inserting, and deleting tutorials.</span></span>


![El mapa del sitio incluye ahora la entrada para el Tutorial de botones personalizados](custom-buttons-in-the-datalist-and-repeater-vb/_static/image8.png)

<span data-ttu-id="779a5-132">**Figura 4**: El mapa del sitio incluye ahora la entrada para el Tutorial de botones personalizados</span><span class="sxs-lookup"><span data-stu-id="779a5-132">**Figure 4**: The Site Map Now Includes the Entry for the Custom Buttons Tutorial</span></span>


## <a name="step-2-adding-the-list-of-categories"></a><span data-ttu-id="779a5-133">Paso 2: Adición de la lista de categorías</span><span class="sxs-lookup"><span data-stu-id="779a5-133">Step 2: Adding the List of Categories</span></span>

<span data-ttu-id="779a5-134">Para este tutorial se necesita crear un control Repeater que enumera todas las categorías, junto con un control LinkButton mostrar productos que, al hacer clic, muestra los productos de la categoría asociada s en una lista con viñetas.</span><span class="sxs-lookup"><span data-stu-id="779a5-134">For this tutorial we need to create a Repeater that lists all categories along with a Show Products LinkButton that, when clicked, displays the associated category s products in a bulleted list.</span></span> <span data-ttu-id="779a5-135">Permiten s en primer lugar cree un control Repeater simple que muestra las categorías en el sistema.</span><span class="sxs-lookup"><span data-stu-id="779a5-135">Let s first create a simple Repeater that lists the categories in the system.</span></span> <span data-ttu-id="779a5-136">Comience abriendo la `CustomButtons.aspx` página en el `CustomButtonsDataListRepeater` carpeta.</span><span class="sxs-lookup"><span data-stu-id="779a5-136">Start by opening the `CustomButtons.aspx` page in the `CustomButtonsDataListRepeater` folder.</span></span> <span data-ttu-id="779a5-137">Arrastre un control Repeater desde el cuadro de herramientas hasta el diseñador y el conjunto de sus `ID` propiedad `Categories`.</span><span class="sxs-lookup"><span data-stu-id="779a5-137">Drag a Repeater from the Toolbox onto the Designer and set its `ID` property to `Categories`.</span></span> <span data-ttu-id="779a5-138">A continuación, cree un nuevo control de origen de datos de la etiqueta inteligente de s Repeater.</span><span class="sxs-lookup"><span data-stu-id="779a5-138">Next, create a new data source control from the Repeater s smart tag.</span></span> <span data-ttu-id="779a5-139">En concreto, cree un nuevo control ObjectDataSource denominado `CategoriesDataSource` que selecciona los datos desde el `CategoriesBLL` clase s `GetCategories()` método.</span><span class="sxs-lookup"><span data-stu-id="779a5-139">Specifically, create a new ObjectDataSource control named `CategoriesDataSource` that selects its data from the `CategoriesBLL` class s `GetCategories()` method.</span></span>


<span data-ttu-id="779a5-140">[![Configurar el origen ObjectDataSource para usar el método de clase CategoriesBLL s GetCategories()](custom-buttons-in-the-datalist-and-repeater-vb/_static/image10.png)](custom-buttons-in-the-datalist-and-repeater-vb/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="779a5-140">[![Configure the ObjectDataSource to Use the CategoriesBLL Class s GetCategories() Method](custom-buttons-in-the-datalist-and-repeater-vb/_static/image10.png)](custom-buttons-in-the-datalist-and-repeater-vb/_static/image9.png)</span></span>

<span data-ttu-id="779a5-141">**Figura 5**: Configurar el origen ObjectDataSource que se usarán el `CategoriesBLL` clase s `GetCategories()` método ([haga clic aquí para ver imagen en tamaño completo](custom-buttons-in-the-datalist-and-repeater-vb/_static/image11.png))</span><span class="sxs-lookup"><span data-stu-id="779a5-141">**Figure 5**: Configure the ObjectDataSource to Use the `CategoriesBLL` Class s `GetCategories()` Method ([Click to view full-size image](custom-buttons-in-the-datalist-and-repeater-vb/_static/image11.png))</span></span>


<span data-ttu-id="779a5-142">A diferencia del control DataList, para que Visual Studio crea un valor predeterminado `ItemTemplate` según el origen de datos, las plantillas de Repeater s deben definirse manualmente.</span><span class="sxs-lookup"><span data-stu-id="779a5-142">Unlike the DataList control, for which Visual Studio creates a default `ItemTemplate` based on the data source, the Repeater s templates must be manually defined.</span></span> <span data-ttu-id="779a5-143">Además, las plantillas de Repeater s deben crearse y editarse mediante declaración (es decir, hay s editar plantillas no opción en la etiqueta inteligente del control Repeater s).</span><span class="sxs-lookup"><span data-stu-id="779a5-143">Furthermore, the Repeater s templates must be created and edited declaratively (that is, there s no Edit Templates option in the Repeater s smart tag).</span></span>

<span data-ttu-id="779a5-144">Haga clic en la ficha de origen en la esquina inferior izquierda y agregue un `ItemTemplate` que muestra el nombre de categoría s en un `<h3>` elemento y su descripción en un párrafo de etiquetas; incluye una `SeparatorTemplate` que muestra una regla horizontal (`<hr />`) entre cada uno categoría.</span><span class="sxs-lookup"><span data-stu-id="779a5-144">Click on the Source tab in the bottom left corner and add an `ItemTemplate` that displays the category s name in an `<h3>` element and its description in a paragraph tag; include a `SeparatorTemplate` that displays a horizontal rule (`<hr />`) between each category.</span></span> <span data-ttu-id="779a5-145">Agregue también un control LinkButton con su `Text` propiedad establecida en Mostrar productos.</span><span class="sxs-lookup"><span data-stu-id="779a5-145">Also add a LinkButton with its `Text` property set to Show Products.</span></span> <span data-ttu-id="779a5-146">Después de completar estos pasos, el marcado declarativo s de página debe ser similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="779a5-146">After completing these steps, your page s declarative markup should look like the following:</span></span>


[!code-aspx[Main](custom-buttons-in-the-datalist-and-repeater-vb/samples/sample2.aspx)]

<span data-ttu-id="779a5-147">Figura 6 muestra la página cuando se ve mediante un explorador.</span><span class="sxs-lookup"><span data-stu-id="779a5-147">Figure 6 shows the page when viewed through a browser.</span></span> <span data-ttu-id="779a5-148">Cada nombre de categoría y descripción se muestran.</span><span class="sxs-lookup"><span data-stu-id="779a5-148">Each category name and description is listed.</span></span> <span data-ttu-id="779a5-149">El botón Mostrar productos, al hacer clic, produce un postback pero aún no realiza ninguna acción.</span><span class="sxs-lookup"><span data-stu-id="779a5-149">The Show Products button, when clicked, causes a postback but does not yet perform any action.</span></span>


<span data-ttu-id="779a5-150">[![Cada nombre de categoría y la descripción se muestran, junto con un control LinkButton mostrar productos](custom-buttons-in-the-datalist-and-repeater-vb/_static/image13.png)](custom-buttons-in-the-datalist-and-repeater-vb/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="779a5-150">[![Each Category s Name and Description is Displayed, Along with a Show Products LinkButton](custom-buttons-in-the-datalist-and-repeater-vb/_static/image13.png)](custom-buttons-in-the-datalist-and-repeater-vb/_static/image12.png)</span></span>

<span data-ttu-id="779a5-151">**Figura 6**: Cada nombre de categoría y la descripción se muestran, junto con un control LinkButton mostrar productos ([haga clic aquí para ver imagen en tamaño completo](custom-buttons-in-the-datalist-and-repeater-vb/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="779a5-151">**Figure 6**: Each Category s Name and Description is Displayed, Along with a Show Products LinkButton ([Click to view full-size image](custom-buttons-in-the-datalist-and-repeater-vb/_static/image14.png))</span></span>


## <a name="step-3-executing-server-side-logic-when-the-show-products-linkbutton-is-clicked"></a><span data-ttu-id="779a5-152">Paso 3: Hacer clic en ejecutar servidor lógica cuando el mostrar productos LinkButton</span><span class="sxs-lookup"><span data-stu-id="779a5-152">Step 3: Executing Server-Side Logic When the Show Products LinkButton is Clicked</span></span>

<span data-ttu-id="779a5-153">Cada vez que se hace clic en un botón, LinkButton o ImageButton dentro de una plantilla en un control DataList o Repeater, se produce un postback y la s DataList o Repeater `ItemCommand` desencadena el evento.</span><span class="sxs-lookup"><span data-stu-id="779a5-153">Anytime a Button, LinkButton, or ImageButton within a template in a DataList or Repeater is clicked, a postback occurs and the DataList or Repeater s `ItemCommand` event fires.</span></span> <span data-ttu-id="779a5-154">Además el `ItemCommand` eventos, el control DataList control también puede generar más específico, otro evento si el botón s `CommandName` propiedad está establecida en una de las cadenas reservadas (eliminar, editar, Cancelar, Update o Select), pero la `ItemCommand` evento es *siempre* desencadena.</span><span class="sxs-lookup"><span data-stu-id="779a5-154">In addition to the `ItemCommand` event, the DataList control may also raise another, more specific event if the button s `CommandName` property is set to one of the reserved strings ( Delete, Edit, Cancel, Update, or Select ), but the `ItemCommand` event is *always* fired.</span></span>

<span data-ttu-id="779a5-155">Cuando se hace clic en un botón dentro de un control DataList o Repeater, a menudo, necesitamos pasar (como qué botón se hizo clic (en el caso de que puede haber varios botones dentro del control, por ejemplo, tanto una edición y botón Eliminar) y quizás algo de información adicional el valor de clave principal del elemento cuyo botón se hizo clic).</span><span class="sxs-lookup"><span data-stu-id="779a5-155">When a button is clicked within a DataList or Repeater, oftentimes we need to pass along which button was clicked (in the case that there may be multiple buttons within the control, such as both an Edit and Delete button) and perhaps some additional information (such as the primary key value of the item whose button was clicked).</span></span> <span data-ttu-id="779a5-156">El botón, LinkButton y ImageButton proporcionan dos propiedades cuyos valores se pasan a la `ItemCommand` controlador de eventos:</span><span class="sxs-lookup"><span data-stu-id="779a5-156">The Button, LinkButton, and ImageButton provide two properties whose values are passed to the `ItemCommand` event handler:</span></span>

- <span data-ttu-id="779a5-157">`CommandName` una cadena que se utiliza normalmente para identificar cada botón en la plantilla</span><span class="sxs-lookup"><span data-stu-id="779a5-157">`CommandName` a string typically used to identify each button in the template</span></span>
- <span data-ttu-id="779a5-158">`CommandArgument` usan normalmente para almacenar el valor de algún campo de datos, como el valor de clave principal</span><span class="sxs-lookup"><span data-stu-id="779a5-158">`CommandArgument` commonly used to hold the value of some data field, such as the primary key value</span></span>

<span data-ttu-id="779a5-159">Este ejemplo, establezca la s LinkButton `CommandName` propiedad ShowProducts y enlace el valor de clave principal actual de registro s `CategoryID` a la `CommandArgument` propiedad utilizando la sintaxis de enlace de datos `CategoryArgument='<%# Eval("CategoryID") %>'`.</span><span class="sxs-lookup"><span data-stu-id="779a5-159">For this example, set the LinkButton s `CommandName` property to ShowProducts and bind the current record s primary key value `CategoryID` to the `CommandArgument` property using the databinding syntax `CategoryArgument='<%# Eval("CategoryID") %>'`.</span></span> <span data-ttu-id="779a5-160">Después de especificar estas dos propiedades, la sintaxis declarativa del control LinkButton s debería ser similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="779a5-160">After specifying these two properties, the LinkButton s declarative syntax should look like the following:</span></span>


[!code-aspx[Main](custom-buttons-in-the-datalist-and-repeater-vb/samples/sample3.aspx)]

<span data-ttu-id="779a5-161">Cuando se presiona el botón, se produce un postback y la s DataList o Repeater `ItemCommand` desencadena el evento.</span><span class="sxs-lookup"><span data-stu-id="779a5-161">When the button is clicked, a postback occurs and the DataList or Repeater s `ItemCommand` event fires.</span></span> <span data-ttu-id="779a5-162">El controlador de eventos se pasa en el botón s `CommandName` y `CommandArgument` valores.</span><span class="sxs-lookup"><span data-stu-id="779a5-162">The event handler is passed the button s `CommandName` and `CommandArgument` values.</span></span>

<span data-ttu-id="779a5-163">Crear un controlador de eventos para el control Repeater s `ItemCommand` eventos y anote el segundo parámetro pasan al controlador de eventos (denominado `e`).</span><span class="sxs-lookup"><span data-stu-id="779a5-163">Create an event handler for the Repeater s `ItemCommand` event and note the second parameter passed into the event handler (named `e`).</span></span> <span data-ttu-id="779a5-164">Este segundo parámetro es de tipo [ `RepeaterCommandEventArgs` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeatercommandeventargs.aspx) y tiene las siguientes cuatro propiedades:</span><span class="sxs-lookup"><span data-stu-id="779a5-164">This second parameter is of type [`RepeaterCommandEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeatercommandeventargs.aspx) and has the following four properties:</span></span>

- <span data-ttu-id="779a5-165">`CommandArgument` el valor del botón ha hecho clic s `CommandArgument` propiedad</span><span class="sxs-lookup"><span data-stu-id="779a5-165">`CommandArgument` the value of the clicked button s `CommandArgument` property</span></span>
- <span data-ttu-id="779a5-166">`CommandName` el valor del botón s `CommandName` propiedad</span><span class="sxs-lookup"><span data-stu-id="779a5-166">`CommandName` the value of the button s `CommandName` property</span></span>
- <span data-ttu-id="779a5-167">`CommandSource` una referencia al control de botón que se hizo clic</span><span class="sxs-lookup"><span data-stu-id="779a5-167">`CommandSource` a reference to the button control that was clicked</span></span>
- <span data-ttu-id="779a5-168">`Item` una referencia a la [ `RepeaterItem` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeateritem.aspx) que contiene el botón que se hizo clic; cada registro enlazado a Repeater se manifiesta como un `RepeaterItem`</span><span class="sxs-lookup"><span data-stu-id="779a5-168">`Item` a reference to the [`RepeaterItem`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeateritem.aspx) that contains the button that was clicked; each record bound to the Repeater is manifested as a `RepeaterItem`</span></span>

<span data-ttu-id="779a5-169">Desde la categoría seleccionada s `CategoryID` se pasa a través de la `CommandArgument` propiedad, podemos obtener el conjunto de productos asociados con la categoría seleccionada en el `ItemCommand` controlador de eventos.</span><span class="sxs-lookup"><span data-stu-id="779a5-169">Since the selected category s `CategoryID` is passed in via the `CommandArgument` property, we can get the set of products associated with the selected category in the `ItemCommand` event handler.</span></span> <span data-ttu-id="779a5-170">Estos productos, a continuación, se pueden enlazar a un control BulletedList en el `ItemTemplate` (que se ve aún para agregar).</span><span class="sxs-lookup"><span data-stu-id="779a5-170">These products can then be bound to a BulletedList control in the `ItemTemplate` (which we ve yet to add).</span></span> <span data-ttu-id="779a5-171">Todo lo que permanece, a continuación, consiste en Agregar BulletedList, haga referencia a él en el `ItemCommand` controlador de eventos y enlazar a él en el conjunto de productos para la categoría seleccionada, que abordaremos en el paso 4.</span><span class="sxs-lookup"><span data-stu-id="779a5-171">All that remains, then, is to add the BulletedList, reference it in the `ItemCommand` event handler, and bind to it the set of products for the selected category, which we'll tackle in Step 4.</span></span>

> [!NOTE]
> <span data-ttu-id="779a5-172">El control DataList s `ItemCommand` controlador de eventos se pasa un objeto de tipo [ `DataListCommandEventArgs` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalistcommandeventargs.aspx), que ofrece las mismas cuatro propiedades que el `RepeaterCommandEventArgs` clase.</span><span class="sxs-lookup"><span data-stu-id="779a5-172">The DataList s `ItemCommand` event handler is passed an object of type [`DataListCommandEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalistcommandeventargs.aspx), which offers the same four properties as the `RepeaterCommandEventArgs` class.</span></span>


## <a name="step-4-displaying-the-selected-category-s-products-in-a-bulleted-list"></a><span data-ttu-id="779a5-173">Paso 4: Mostrar los productos de s de la categoría seleccionada en una lista con viñetas</span><span class="sxs-lookup"><span data-stu-id="779a5-173">Step 4: Displaying the Selected Category s Products in a Bulleted List</span></span>

<span data-ttu-id="779a5-174">Los productos de la categoría seleccionada s pueden mostrarse en el control Repeater s `ItemTemplate` con cualquier número de controles.</span><span class="sxs-lookup"><span data-stu-id="779a5-174">The selected category s products can be displayed within the Repeater s `ItemTemplate` using any number of controls.</span></span> <span data-ttu-id="779a5-175">Podríamos agregar que otro anidados Repeater, DataList, DropDownList, un GridView y así sucesivamente.</span><span class="sxs-lookup"><span data-stu-id="779a5-175">We could add another nested Repeater, a DataList, a DropDownList, a GridView, and so on.</span></span> <span data-ttu-id="779a5-176">Sin embargo, puesto que deseamos mostrar los productos como una lista con viñetas, vamos a usar el control BulletedList.</span><span class="sxs-lookup"><span data-stu-id="779a5-176">Since we want to display the products as a bulleted list, though, we'll use the BulletedList control.</span></span> <span data-ttu-id="779a5-177">Volver a la `CustomButtons.aspx` marcado declarativo s, agregue un control BulletedList a la `ItemTemplate` después de mostrar productos LinkButton.</span><span class="sxs-lookup"><span data-stu-id="779a5-177">Returning to the `CustomButtons.aspx` page s declarative markup, add a BulletedList control to the `ItemTemplate` after the Show Products LinkButton.</span></span> <span data-ttu-id="779a5-178">Establezca la s BulletedLists `ID` a `ProductsInCategory`.</span><span class="sxs-lookup"><span data-stu-id="779a5-178">Set the BulletedLists s `ID` to `ProductsInCategory`.</span></span> <span data-ttu-id="779a5-179">BulletedList muestra el valor del campo de datos especificado a través de la `DataTextField` propiedad; ya que este control tendrá la información del producto enlazado a él, establezca el `DataTextField` propiedad `ProductName`.</span><span class="sxs-lookup"><span data-stu-id="779a5-179">The BulletedList displays the value of the data field specified via the `DataTextField` property; since this control will have product information bound to it, set the `DataTextField` property to `ProductName`.</span></span>


[!code-aspx[Main](custom-buttons-in-the-datalist-and-repeater-vb/samples/sample4.aspx)]

<span data-ttu-id="779a5-180">En el `ItemCommand` controlador de eventos, hacen referencia a este control mediante `e.Item.FindControl("ProductsInCategory")` y enlácelo al conjunto de productos asociados con la categoría seleccionada.</span><span class="sxs-lookup"><span data-stu-id="779a5-180">In the `ItemCommand` event handler, reference this control using `e.Item.FindControl("ProductsInCategory")` and bind it to the set of products associated with the selected category.</span></span>


[!code-vb[Main](custom-buttons-in-the-datalist-and-repeater-vb/samples/sample5.vb)]

<span data-ttu-id="779a5-181">Antes de realizar cualquier acción en el `ItemCommand` controlador de eventos, lo s prudente compruebe primero el valor de entrada `CommandName`.</span><span class="sxs-lookup"><span data-stu-id="779a5-181">Before performing any action in the `ItemCommand` event handler, it s prudent to first check the value of the incoming `CommandName`.</span></span> <span data-ttu-id="779a5-182">Puesto que la `ItemCommand` controlador de eventos desencadena cuando *cualquier* botón se hizo clic, si hay varios botones en la plantilla, use el `CommandName` valor discernir qué acción realizar.</span><span class="sxs-lookup"><span data-stu-id="779a5-182">Since the `ItemCommand` event handler fires when *any* button is clicked, if there are multiple buttons in the template use the `CommandName` value to discern what action to take.</span></span> <span data-ttu-id="779a5-183">Comprobando el `CommandName` aquí es discutible, puesto que sólo tenemos un solo botón, pero es un buen hábito al formulario.</span><span class="sxs-lookup"><span data-stu-id="779a5-183">Checking the `CommandName` here is moot, since we only have a single button, but it is a good habit to form.</span></span> <span data-ttu-id="779a5-184">A continuación, el `CategoryID` de la categoría seleccionada se recuperan desde el `CommandArgument` propiedad.</span><span class="sxs-lookup"><span data-stu-id="779a5-184">Next, the `CategoryID` of the selected category is retrieved from the `CommandArgument` property.</span></span> <span data-ttu-id="779a5-185">El control de BulletedList en la plantilla, a continuación, se hace referencia y enlazado a los resultados de la `ProductsBLL` clase s `GetProductsByCategoryID(categoryID)` método.</span><span class="sxs-lookup"><span data-stu-id="779a5-185">The BulletedList control in the template is then referenced and bound to the results of the `ProductsBLL` class s `GetProductsByCategoryID(categoryID)` method.</span></span>

<span data-ttu-id="779a5-186">En los tutoriales anteriores que usan los botones dentro de un control DataList, tales como [una visión general de edición y eliminación de datos en el control DataList](../editing-and-deleting-data-through-the-datalist/an-overview-of-editing-and-deleting-data-in-the-datalist-vb.md), determinamos que el valor de clave principal de un elemento determinado a través de la `DataKeys` colección.</span><span class="sxs-lookup"><span data-stu-id="779a5-186">In previous tutorials that used the buttons within a DataList, such as [An Overview of Editing and Deleting Data in the DataList](../editing-and-deleting-data-through-the-datalist/an-overview-of-editing-and-deleting-data-in-the-datalist-vb.md), we determined the primary key value of a given item via the `DataKeys` collection.</span></span> <span data-ttu-id="779a5-187">Aunque este enfoque funciona bien con el control DataList, el control Repeater no tiene un `DataKeys` propiedad.</span><span class="sxs-lookup"><span data-stu-id="779a5-187">While this approach works well with the DataList, the Repeater does not have a `DataKeys` property.</span></span> <span data-ttu-id="779a5-188">En su lugar, debemos usar un enfoque alternativo para proporcionar el valor de clave principal, como a través del botón s `CommandArgument` propiedad o asignando el valor de clave principal a un control Web Label oculto dentro de la plantilla y leer su valor en el `ItemCommand`controlador de eventos mediante `e.Item.FindControl("LabelID")`.</span><span class="sxs-lookup"><span data-stu-id="779a5-188">Instead, we must use an alternative approach for supplying the primary key value, such as through the button s `CommandArgument` property or by assigning the primary key value to a hidden Label Web control within the template and reading its value back in the `ItemCommand` event handler using `e.Item.FindControl("LabelID")`.</span></span>

<span data-ttu-id="779a5-189">Después de completar la `ItemCommand` controlador de eventos, dedique un momento para probar esta página en un explorador.</span><span class="sxs-lookup"><span data-stu-id="779a5-189">After completing the `ItemCommand` event handler, take a moment to test out this page in a browser.</span></span> <span data-ttu-id="779a5-190">Como se muestra en la figura 7, al hacer clic en los productos Mostrar vínculo provoca una devolución de datos y muestra los productos para la categoría seleccionada en un BulletedList.</span><span class="sxs-lookup"><span data-stu-id="779a5-190">As Figure 7 shows, clicking the Show Products link causes a postback and displays the products for the selected category in a BulletedList.</span></span> <span data-ttu-id="779a5-191">Además, tenga en cuenta que esta información de producto permanece, incluso si se hace clic en otras categorías de vínculos de mostrar productos.</span><span class="sxs-lookup"><span data-stu-id="779a5-191">Furthermore, note that this product information remains, even if other categories Show Products links are clicked.</span></span>

> [!NOTE]
> <span data-ttu-id="779a5-192">Si desea modificar el comportamiento de este informe, tal que se enumeran los productos sólo una categoría s a la vez, basta con establecer el control BulletedList s `EnableViewState` propiedad `False`.</span><span class="sxs-lookup"><span data-stu-id="779a5-192">If you want to modify the behavior of this report, such that the only one category s products are listed at a time, simply set the BulletedList control s `EnableViewState` property to `False`.</span></span>


<span data-ttu-id="779a5-193">[![Un BulletedList se usa para mostrar los productos de la categoría seleccionada](custom-buttons-in-the-datalist-and-repeater-vb/_static/image16.png)](custom-buttons-in-the-datalist-and-repeater-vb/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="779a5-193">[![A BulletedList is used to Display the Products of the Selected Category](custom-buttons-in-the-datalist-and-repeater-vb/_static/image16.png)](custom-buttons-in-the-datalist-and-repeater-vb/_static/image15.png)</span></span>

<span data-ttu-id="779a5-194">**Figura 7**: Un BulletedList se usa para mostrar los productos de la categoría seleccionada ([haga clic aquí para ver imagen en tamaño completo](custom-buttons-in-the-datalist-and-repeater-vb/_static/image17.png))</span><span class="sxs-lookup"><span data-stu-id="779a5-194">**Figure 7**: A BulletedList is used to Display the Products of the Selected Category ([Click to view full-size image](custom-buttons-in-the-datalist-and-repeater-vb/_static/image17.png))</span></span>


## <a name="summary"></a><span data-ttu-id="779a5-195">Resumen</span><span class="sxs-lookup"><span data-stu-id="779a5-195">Summary</span></span>

<span data-ttu-id="779a5-196">Los controles DataList y Repeater pueden incluir cualquier número de botones, LinkButtons o ImageButtons dentro de sus plantillas.</span><span class="sxs-lookup"><span data-stu-id="779a5-196">The DataList and Repeater controls can include any number of Buttons, LinkButtons, or ImageButtons within their templates.</span></span> <span data-ttu-id="779a5-197">Estos botones, al hacer clic, hacer que una devolución de datos y generar el `ItemCommand` eventos.</span><span class="sxs-lookup"><span data-stu-id="779a5-197">Such buttons, when clicked, cause a postback and raise the `ItemCommand` event.</span></span> <span data-ttu-id="779a5-198">Para asociar la acción personalizada de servidor con un botón que se hace clic, cree un controlador de eventos para el `ItemCommand` eventos.</span><span class="sxs-lookup"><span data-stu-id="779a5-198">To associate custom server-side action with a button being clicked, create an event handler for the `ItemCommand` event.</span></span> <span data-ttu-id="779a5-199">En este controlador de eventos, primero compruebe entrante `CommandName` valor para determinar qué botón se hizo clic.</span><span class="sxs-lookup"><span data-stu-id="779a5-199">In this event handler first check the incoming `CommandName` value to determine which button was clicked.</span></span> <span data-ttu-id="779a5-200">Opcionalmente, se puede suministrar información adicional mediante el botón s `CommandArgument` propiedad.</span><span class="sxs-lookup"><span data-stu-id="779a5-200">Additional information can optionally be supplied through the button s `CommandArgument` property.</span></span>

<span data-ttu-id="779a5-201">Feliz programación.</span><span class="sxs-lookup"><span data-stu-id="779a5-201">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="779a5-202">Acerca del autor</span><span class="sxs-lookup"><span data-stu-id="779a5-202">About the Author</span></span>

<span data-ttu-id="779a5-203">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor de siete libros sobre ASP/ASP.NET y fundador de [4GuysFromRolla.com](http://www.4guysfromrolla.com), trabaja con tecnologías Web de Microsoft desde 1998.</span><span class="sxs-lookup"><span data-stu-id="779a5-203">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="779a5-204">Scott trabaja como consultor independiente, instructor y escritor.</span><span class="sxs-lookup"><span data-stu-id="779a5-204">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="779a5-205">Su último libro es [*SAM enseñar a usted mismo ASP.NET 2.0 en 24 horas*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="779a5-205">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="779a5-206">Puede ponerse en [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="779a5-206">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="779a5-207">o a través de su blog, que puede encontrarse en [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="779a5-207">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="779a5-208">Agradecimientos especiales a</span><span class="sxs-lookup"><span data-stu-id="779a5-208">Special Thanks To</span></span>

<span data-ttu-id="779a5-209">Esta serie de tutoriales ha sido revisada por muchos revisores útiles.</span><span class="sxs-lookup"><span data-stu-id="779a5-209">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="779a5-210">Revisor de clientes potencial para este tutorial era Dennis Patterson.</span><span class="sxs-lookup"><span data-stu-id="779a5-210">Lead reviewer for this tutorial was Dennis Patterson.</span></span> <span data-ttu-id="779a5-211">¿Está interesado en leer mi próximos artículos de MSDN?</span><span class="sxs-lookup"><span data-stu-id="779a5-211">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="779a5-212">Si es así, envíeme una línea en [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="779a5-212">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="779a5-213">Anterior</span><span class="sxs-lookup"><span data-stu-id="779a5-213">Previous</span></span>](custom-buttons-in-the-datalist-and-repeater-cs.md)
