---
uid: web-forms/overview/data-access/paging-and-sorting-with-the-datalist-and-repeater/sorting-data-in-a-datalist-or-repeater-control-cs
title: Ordenar datos en un control DataList o Repeater (C#) | Microsoft Docs
author: rick-anderson
description: En este tutorial, veremos cómo incluir la compatibilidad de ordenación en DataList y Repeater, y cómo crear una lista de datos o un repetidor cuyos datos puedan...
ms.author: riande
ms.date: 11/13/2006
ms.assetid: f52c302a-1b7c-46fe-8a13-8412c95cbf6d
msc.legacyurl: /web-forms/overview/data-access/paging-and-sorting-with-the-datalist-and-repeater/sorting-data-in-a-datalist-or-repeater-control-cs
msc.type: authoredcontent
ms.openlocfilehash: 66a09c637d33c812b39e0ce85a552bd71665a2e1
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 03/06/2020
ms.locfileid: "78502957"
---
# <a name="sorting-data-in-a-datalist-or-repeater-control-c"></a><span data-ttu-id="b3ba9-103">Ordenar datos en un control DataList o Repeater (C#)</span><span class="sxs-lookup"><span data-stu-id="b3ba9-103">Sorting Data in a DataList or Repeater Control (C#)</span></span>

<span data-ttu-id="b3ba9-104">por [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="b3ba9-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="b3ba9-105">[Descarga](https://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_45_CS.exe) de la aplicación de ejemplo o [descarga de PDF](sorting-data-in-a-datalist-or-repeater-control-cs/_static/datatutorial45cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="b3ba9-105">[Download Sample App](https://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_45_CS.exe) or [Download PDF](sorting-data-in-a-datalist-or-repeater-control-cs/_static/datatutorial45cs1.pdf)</span></span>

> <span data-ttu-id="b3ba9-106">En este tutorial, veremos cómo incluir la compatibilidad de ordenación en DataList y Repeater, y cómo crear una lista de datos o un repetidor cuyos datos se puedan paginar y ordenar.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-106">In this tutorial we'll examine how to include sorting support in the DataList and Repeater, as well as how to construct a DataList or Repeater whose data can be paged and sorted.</span></span>

## <a name="introduction"></a><span data-ttu-id="b3ba9-107">Introducción</span><span class="sxs-lookup"><span data-stu-id="b3ba9-107">Introduction</span></span>

<span data-ttu-id="b3ba9-108">En el [tutorial anterior](paging-report-data-in-a-datalist-or-repeater-control-cs.md) , hemos examinado cómo agregar compatibilidad de paginación a un DataList.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-108">In the [previous tutorial](paging-report-data-in-a-datalist-or-repeater-control-cs.md) we examined how to add paging support to a DataList.</span></span> <span data-ttu-id="b3ba9-109">Hemos creado un nuevo método en la clase `ProductsBLL` (`GetProductsAsPagedDataSource`) que devolvió un objeto `PagedDataSource`.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-109">We created a new method in the `ProductsBLL` class (`GetProductsAsPagedDataSource`) that returned a `PagedDataSource` object.</span></span> <span data-ttu-id="b3ba9-110">Cuando está enlazado a una lista de controles o un repetidor, DataList o Repeater mostraría solo la página de datos solicitada.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-110">When bound to a DataList or Repeater, the DataList or Repeater would display just the requested page of data.</span></span> <span data-ttu-id="b3ba9-111">Esta técnica es similar a la que usan internamente los controles GridView, DetailsView y FormView para proporcionar su funcionalidad de paginación predeterminada integrada.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-111">This technique is similar to what is used internally by the GridView, DetailsView, and FormView controls to provide their built-in default paging functionality.</span></span>

<span data-ttu-id="b3ba9-112">Además de ofrecer compatibilidad con la paginación, GridView también incluye compatibilidad con la ordenación de la caja.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-112">In addition to offering paging support, the GridView also includes out of the box sorting support.</span></span> <span data-ttu-id="b3ba9-113">Ni DataList ni Repeater proporcionan funcionalidad de ordenación integrada; sin embargo, las características de ordenación se pueden agregar con un poco de código.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-113">Neither the DataList nor Repeater provides built-in sorting functionality; however, sorting features can be added with a bit of code.</span></span> <span data-ttu-id="b3ba9-114">En este tutorial, veremos cómo incluir la compatibilidad de ordenación en DataList y Repeater, y cómo crear una lista de datos o un repetidor cuyos datos se puedan paginar y ordenar.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-114">In this tutorial we'll examine how to include sorting support in the DataList and Repeater, as well as how to construct a DataList or Repeater whose data can be paged and sorted.</span></span>

## <a name="a-review-of-sorting"></a><span data-ttu-id="b3ba9-115">Revisión de la ordenación</span><span class="sxs-lookup"><span data-stu-id="b3ba9-115">A Review of Sorting</span></span>

<span data-ttu-id="b3ba9-116">Como vimos en el tutorial de [paginación y ordenación de datos de informe](../paging-and-sorting/paging-and-sorting-report-data-cs.md) , el control GridView proporciona compatibilidad con la ordenación fuera del cuadro.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-116">As we saw in the [Paging and Sorting Report Data](../paging-and-sorting/paging-and-sorting-report-data-cs.md) tutorial, the GridView control provides out of the box sorting support.</span></span> <span data-ttu-id="b3ba9-117">Cada campo GridView puede tener un `SortExpression`asociado, que indica el campo de datos por el que ordenar los datos.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-117">Each GridView field can have an associated `SortExpression`, which indicates the data field by which to sort the data.</span></span> <span data-ttu-id="b3ba9-118">Cuando la propiedad GridView s `AllowSorting` está establecida en `true`, cada campo de GridView que tenga un valor de propiedad `SortExpression` tiene su encabezado representado como LinkButton.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-118">When the GridView s `AllowSorting` property is set to `true`, each GridView field that has a `SortExpression` property value has its header rendered as a LinkButton.</span></span> <span data-ttu-id="b3ba9-119">Cuando un usuario hace clic en un encabezado de campo de GridView determinado, se produce un postback y los datos se ordenan de acuerdo con el `SortExpression`del campo en el que se hace clic.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-119">When a user clicks a particular GridView field s header, a postback occurs and the data is sorted according to the clicked field s `SortExpression`.</span></span>

<span data-ttu-id="b3ba9-120">El control GridView también tiene una propiedad `SortExpression`, que almacena el `SortExpression` del campo GridView por el que se ordenan los datos.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-120">The GridView control has a `SortExpression` property as well, which stores the `SortExpression` of the GridView field the data is sorted by.</span></span> <span data-ttu-id="b3ba9-121">Además, una propiedad `SortDirection` indica si los datos se van a ordenar en orden ascendente o descendente (si un usuario hace clic en un vínculo de encabezado s de campo de GridView determinado dos veces consecutivas, se alterna el criterio de ordenación).</span><span class="sxs-lookup"><span data-stu-id="b3ba9-121">Additionally, a `SortDirection` property indicates whether the data is to be sorted in ascending or descending order (if a user clicks a particular GridView field s header link twice in succession, the sort order is toggled).</span></span>

<span data-ttu-id="b3ba9-122">Cuando GridView se enlaza a su control de origen de datos, entrega sus propiedades `SortExpression` y `SortDirection` al control de origen de datos.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-122">When the GridView is bound to its data source control, it hands off its `SortExpression` and `SortDirection` properties to the data source control.</span></span> <span data-ttu-id="b3ba9-123">El control de origen de datos recupera los datos y, a continuación, los ordena según las propiedades `SortExpression` y `SortDirection` proporcionadas.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-123">The data source control retrieves the data and then sorts it according to the supplied `SortExpression` and `SortDirection` properties.</span></span> <span data-ttu-id="b3ba9-124">Después de ordenar los datos, el control de origen de datos lo devuelve a GridView.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-124">After sorting the data, the data source control returns it to the GridView.</span></span>

<span data-ttu-id="b3ba9-125">Para replicar esta funcionalidad con los controles DataList o Repeater, es necesario:</span><span class="sxs-lookup"><span data-stu-id="b3ba9-125">To replicate this functionality with the DataList or Repeater controls, we must:</span></span>

- <span data-ttu-id="b3ba9-126">Crear una interfaz de ordenación</span><span class="sxs-lookup"><span data-stu-id="b3ba9-126">Create a sorting interface</span></span>
- <span data-ttu-id="b3ba9-127">Recuerde el campo de datos por el que ordenar y si desea ordenar en orden ascendente o descendente.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-127">Remember the data field to sort by and whether to sort in ascending or descending order</span></span>
- <span data-ttu-id="b3ba9-128">Indicar a ObjectDataSource que ordene los datos por un campo de datos determinado</span><span class="sxs-lookup"><span data-stu-id="b3ba9-128">Instruct the ObjectDataSource to sort the data by a particular data field</span></span>

<span data-ttu-id="b3ba9-129">Abordaremos estas tres tareas en los pasos 3 y 4.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-129">We'll tackle these three tasks in steps 3 and 4.</span></span> <span data-ttu-id="b3ba9-130">A continuación, examinaremos cómo incluir la compatibilidad con la paginación y la ordenación en una lista de elementos o un repetidor.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-130">Following that, we'll examine how to include both paging and sorting support in a DataList or Repeater.</span></span>

## <a name="step-2-displaying-the-products-in-a-repeater"></a><span data-ttu-id="b3ba9-131">Paso 2: mostrar los productos en un repetidor</span><span class="sxs-lookup"><span data-stu-id="b3ba9-131">Step 2: Displaying the Products in a Repeater</span></span>

<span data-ttu-id="b3ba9-132">Antes de preocuparse por la implementación de alguna de las funcionalidades relacionadas con la ordenación, deje que se empiece por enumerar los productos en un control Repeater.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-132">Before we worry about implementing any of the sorting-related functionality, let s start by listing the products in a Repeater control.</span></span> <span data-ttu-id="b3ba9-133">Para empezar, abra la página `Sorting.aspx` de la carpeta `PagingSortingDataListRepeater`.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-133">Start by opening the `Sorting.aspx` page in the `PagingSortingDataListRepeater` folder.</span></span> <span data-ttu-id="b3ba9-134">Agregue un control Repeater a la página web, estableciendo su propiedad `ID` en `SortableProducts`.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-134">Add a Repeater control to the web page, setting its `ID` property to `SortableProducts`.</span></span> <span data-ttu-id="b3ba9-135">En la etiqueta inteligente Repeater s, cree un nuevo ObjectDataSource denominado `ProductsDataSource` y configúrelo para recuperar datos del método `ProductsBLL` Class s `GetProducts()`.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-135">From the Repeater s smart tag, create a new ObjectDataSource named `ProductsDataSource` and configure it to retrieve data from the `ProductsBLL` class s `GetProducts()` method.</span></span> <span data-ttu-id="b3ba9-136">Seleccione la opción (ninguno) en las listas desplegables de las pestañas insertar, actualizar y eliminar.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-136">Select the (None) option from the drop-down lists in the INSERT, UPDATE, and DELETE tabs.</span></span>

<span data-ttu-id="b3ba9-137">[![crear un ObjectDataSource y configurarlo para que use el método GetProductsAsPagedDataSource ()](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image2.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="b3ba9-137">[![Create an ObjectDataSource and Configure it to Use the GetProductsAsPagedDataSource() Method](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image2.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image1.png)</span></span>

<span data-ttu-id="b3ba9-138">**Figura 1**: crear un ObjectDataSource y configurarlo para usar el método `GetProductsAsPagedDataSource()` ([haga clic para ver la imagen de tamaño completo](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="b3ba9-138">**Figure 1**: Create an ObjectDataSource and Configure it to Use the `GetProductsAsPagedDataSource()` Method ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image3.png))</span></span>

<span data-ttu-id="b3ba9-139">[![establecer las listas desplegables de las pestañas actualizar, insertar y eliminar en (ninguna)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image5.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="b3ba9-139">[![Set the Drop-Down Lists in the UPDATE, INSERT, and DELETE tabs to (None)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image5.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image4.png)</span></span>

<span data-ttu-id="b3ba9-140">**Figura 2**: establecer las listas desplegables de las pestañas actualizar, insertar y eliminar en (ninguna) ([haga clic para ver la imagen a tamaño completo](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="b3ba9-140">**Figure 2**: Set the Drop-Down Lists in the UPDATE, INSERT, and DELETE tabs to (None) ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image6.png))</span></span>

<span data-ttu-id="b3ba9-141">A diferencia de la lista de datos, Visual Studio no crea automáticamente un `ItemTemplate` para el control Repeater después de enlazarlo a un origen de datos.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-141">Unlike with the DataList, Visual Studio does not automatically create an `ItemTemplate` for the Repeater control after binding it to a data source.</span></span> <span data-ttu-id="b3ba9-142">Además, debemos agregar este `ItemTemplate` mediante declaración, ya que la etiqueta inteligente control de repetidor no tiene la opción editar plantillas que se encuentra en la lista de elementos.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-142">Furthermore, we must add this `ItemTemplate` declaratively, as the Repeater control s smart tag lacks the Edit Templates option found in the DataList s.</span></span> <span data-ttu-id="b3ba9-143">Permita que use la misma `ItemTemplate` del tutorial anterior, que muestra el nombre, el proveedor y la categoría del producto.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-143">Let s use the same `ItemTemplate` from the previous tutorial, which displayed the product s name, supplier, and category.</span></span>

<span data-ttu-id="b3ba9-144">Después de agregar el `ItemTemplate`, el marcado declarativo de Repeater y ObjectDataSource s debe ser similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="b3ba9-144">After adding the `ItemTemplate`, the Repeater and ObjectDataSource s declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample1.aspx)]

<span data-ttu-id="b3ba9-145">En la ilustración 3 se muestra esta página cuando se ve a través de un explorador.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-145">Figure 3 shows this page when viewed through a browser.</span></span>

<span data-ttu-id="b3ba9-146">[![se muestra cada nombre de producto, proveedor y categoría](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image8.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="b3ba9-146">[![Each Product s Name, Supplier, and Category is Displayed](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image8.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image7.png)</span></span>

<span data-ttu-id="b3ba9-147">**Figura 3**: se muestra cada nombre de producto, proveedor y categoría ([haga clic para ver la imagen de tamaño completo](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="b3ba9-147">**Figure 3**: Each Product s Name, Supplier, and Category is Displayed ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image9.png))</span></span>

## <a name="step-3-instructing-the-objectdatasource-to-sort-the-data"></a><span data-ttu-id="b3ba9-148">Paso 3: indicar a ObjectDataSource que ordene los datos</span><span class="sxs-lookup"><span data-stu-id="b3ba9-148">Step 3: Instructing the ObjectDataSource to Sort the Data</span></span>

<span data-ttu-id="b3ba9-149">Para ordenar los datos que se muestran en el repetidor, es necesario informar al origen ObjectDataSource de la expresión de ordenación por la que se deben ordenar los datos.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-149">To sort the data displayed in the Repeater, we need to inform the ObjectDataSource of the sort expression by which the data should be sorted.</span></span> <span data-ttu-id="b3ba9-150">Antes de que ObjectDataSource recupere sus datos, primero desencadena su [evento`Selecting`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.selecting.aspx), lo que proporciona una oportunidad para que podamos especificar una expresión de ordenación.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-150">Before the ObjectDataSource retrieves its data, it first fires its [`Selecting` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.selecting.aspx), which provides an opportunity for us to specify a sort expression.</span></span> <span data-ttu-id="b3ba9-151">Al controlador de eventos `Selecting` se le pasa un objeto de tipo [`ObjectDataSourceSelectingEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasourceselectingeventargs.aspx), que tiene una propiedad denominada [`Arguments`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasourceselectingeventargs.arguments.aspx) de tipo [`DataSourceSelectArguments`](https://msdn.microsoft.com/library/system.web.ui.datasourceselectarguments.aspx).</span><span class="sxs-lookup"><span data-stu-id="b3ba9-151">The `Selecting` event handler is passed an object of type [`ObjectDataSourceSelectingEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasourceselectingeventargs.aspx), which has a property named [`Arguments`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasourceselectingeventargs.arguments.aspx) of type [`DataSourceSelectArguments`](https://msdn.microsoft.com/library/system.web.ui.datasourceselectarguments.aspx).</span></span> <span data-ttu-id="b3ba9-152">La clase `DataSourceSelectArguments` está diseñada para pasar solicitudes relacionadas con datos de un consumidor de datos al control de origen de datos e incluye una [propiedad`SortExpression`](https://msdn.microsoft.com/library/system.web.ui.datasourceselectarguments.sortexpression.aspx).</span><span class="sxs-lookup"><span data-stu-id="b3ba9-152">The `DataSourceSelectArguments` class is designed to pass data-related requests from a consumer of data to the data source control, and includes a [`SortExpression` property](https://msdn.microsoft.com/library/system.web.ui.datasourceselectarguments.sortexpression.aspx).</span></span>

<span data-ttu-id="b3ba9-153">Para pasar información de ordenación de la página ASP.NET a ObjectDataSource, cree un controlador de eventos para el evento `Selecting` y use el código siguiente:</span><span class="sxs-lookup"><span data-stu-id="b3ba9-153">To pass sorting information from the ASP.NET page to the ObjectDataSource, create an event handler for the `Selecting` event and use the following code:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample2.cs)]

<span data-ttu-id="b3ba9-154">El valor de *sortExpression* debe tener asignado el nombre del campo de datos para ordenar los datos (como NombreProducto).</span><span class="sxs-lookup"><span data-stu-id="b3ba9-154">The *sortExpression* value should be assigned the name of the data field to sort the data by (such as ProductName ).</span></span> <span data-ttu-id="b3ba9-155">No hay ninguna propiedad relacionada con la dirección de ordenación, por lo que si desea ordenar los datos en orden descendente, anexe la cadena DESC al valor de *sortExpression* (como NombreProducto DESC).</span><span class="sxs-lookup"><span data-stu-id="b3ba9-155">There is no sort direction-related property, so if you want to sort the data in descending order, append the string DESC to the *sortExpression* value (such as ProductName DESC ).</span></span>

<span data-ttu-id="b3ba9-156">Continúe y pruebe los distintos valores codificados de forma rígida para *sortExpression* y pruebe los resultados en un explorador.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-156">Go ahead and try some different hard-coded values for *sortExpression* and test the results in a browser.</span></span> <span data-ttu-id="b3ba9-157">Como se muestra en la figura 4, cuando se usa ProductName DESC como *sortExpression*, los productos se ordenan por su nombre en orden alfabético inverso.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-157">As Figure 4 shows, when using ProductName DESC as the *sortExpression*, the products are sorted by their name in reverse alphabetical order.</span></span>

<span data-ttu-id="b3ba9-158">[![los productos se ordenan por su nombre en orden alfabético inverso](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image11.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="b3ba9-158">[![The Products are Sorted by their Name in Reverse Alphabetical Order](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image11.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image10.png)</span></span>

<span data-ttu-id="b3ba9-159">**Figura 4**: los productos se ordenan por su nombre en orden alfabético inverso ([haga clic para ver la imagen de tamaño completo](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="b3ba9-159">**Figure 4**: The Products are Sorted by their Name in Reverse Alphabetical Order ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image12.png))</span></span>

## <a name="step-4-creating-the-sorting-interface-and-remembering-the-sort-expression-and-direction"></a><span data-ttu-id="b3ba9-160">Paso 4: crear la interfaz de ordenación y recordar la expresión y la dirección de ordenación</span><span class="sxs-lookup"><span data-stu-id="b3ba9-160">Step 4: Creating the Sorting Interface and Remembering the Sort Expression and Direction</span></span>

<span data-ttu-id="b3ba9-161">La activación de la compatibilidad de ordenación en GridView convierte cada texto de encabezado de campo que se ordene en un LinkButton que, cuando se hace clic en él, ordena los datos según corresponda.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-161">Turning on sorting support in the GridView converts each sortable field s header text into a LinkButton that, when clicked, sorts the data accordingly.</span></span> <span data-ttu-id="b3ba9-162">Dicha interfaz de ordenación tiene sentido para GridView, donde sus datos se colocan de forma ordenada en las columnas.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-162">Such a sorting interface makes sense for the GridView, where its data is neatly laid out in columns.</span></span> <span data-ttu-id="b3ba9-163">En el caso de los controles DataList y Repeater, sin embargo, se necesita una interfaz de ordenación diferente.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-163">For the DataList and Repeater controls, however, a different sorting interface is needed.</span></span> <span data-ttu-id="b3ba9-164">Una interfaz de ordenación común para una lista de datos (en lugar de una cuadrícula de datos) es una lista desplegable que proporciona los campos por los que se pueden ordenar los datos.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-164">A common sorting interface for a list of data (as opposed to a grid of data), is a drop-down list that provides the fields by which the data can be sorted.</span></span> <span data-ttu-id="b3ba9-165">Permita que implemente una interfaz de este tipo para este tutorial.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-165">Let s implement such an interface for this tutorial.</span></span>

<span data-ttu-id="b3ba9-166">Agregue un control Web DropDownList sobre el `SortableProducts` Repeater y establezca su propiedad `ID` en `SortBy`.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-166">Add a DropDownList Web control above the `SortableProducts` Repeater and set its `ID` property to `SortBy`.</span></span> <span data-ttu-id="b3ba9-167">En el ventana Propiedades, haga clic en los puntos suspensivos de la propiedad `Items` para abrir el editor de la colección ListItem.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-167">From the Properties window, click the ellipses in the `Items` property to bring up the ListItem Collection Editor.</span></span> <span data-ttu-id="b3ba9-168">Agregue `ListItem` s para ordenar los datos por los campos `ProductName`, `CategoryName`y `SupplierName`.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-168">Add `ListItem` s to sort the data by the `ProductName`, `CategoryName`, and `SupplierName` fields.</span></span> <span data-ttu-id="b3ba9-169">Agregue también un `ListItem` para ordenar los productos por su nombre en orden alfabético inverso.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-169">Also add a `ListItem` to sort the products by their name in reverse alphabetical order.</span></span>

<span data-ttu-id="b3ba9-170">El `ListItem` `Text` propiedades se pueden establecer en cualquier valor (como nombre), pero las propiedades de `Value` deben establecerse en el nombre del campo de datos (como NombreProducto).</span><span class="sxs-lookup"><span data-stu-id="b3ba9-170">The `ListItem` `Text` properties can be set to any value (such as Name ), but the `Value` properties must be set to the name of the data field (such as ProductName ).</span></span> <span data-ttu-id="b3ba9-171">Para ordenar los resultados en orden descendente, anexe la cadena DESC al nombre del campo de datos, como ProductName DESC.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-171">To sort the results in descending order, append the string DESC to the data field name, like ProductName DESC .</span></span>

![Agregue un ListItem para cada uno de los campos de datos que se van a ordenar](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image13.png)

<span data-ttu-id="b3ba9-173">**Figura 5**: adición de una `ListItem` para cada uno de los campos de datos que se van a ordenar</span><span class="sxs-lookup"><span data-stu-id="b3ba9-173">**Figure 5**: Add a `ListItem` for Each of the Sortable Data Fields</span></span>

<span data-ttu-id="b3ba9-174">Por último, agregue un control Web Button a la derecha de DropDownList.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-174">Finally, add a Button Web control to the right of the DropDownList.</span></span> <span data-ttu-id="b3ba9-175">Establezca su `ID` en `RefreshRepeater` y su propiedad `Text` en actualizar.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-175">Set its `ID` to `RefreshRepeater` and its `Text` property to Refresh .</span></span>

<span data-ttu-id="b3ba9-176">Después de crear el `ListItem` s y agregar el botón de actualización, la sintaxis declarativa DropDownList y Button s debe ser similar a la siguiente:</span><span class="sxs-lookup"><span data-stu-id="b3ba9-176">After creating the `ListItem` s and adding the Refresh button, the DropDownList and Button s declarative syntax should look similar to the following:</span></span>

[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample3.aspx)]

<span data-ttu-id="b3ba9-177">Una vez completado el DropDownList de ordenación, es necesario actualizar el controlador de eventos de `Selecting` de ObjectDataSource para que use la propiedad `SortBy``ListItem` s `Value` seleccionada en lugar de una expresión de ordenación codificada de forma rígida.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-177">With the sorting DropDownList complete, we next need to update the ObjectDataSource s `Selecting` event handler so that it uses the selected `SortBy``ListItem` s `Value` property as opposed to a hard-coded sort expression.</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample4.cs)]

<span data-ttu-id="b3ba9-178">En este momento, al visitar la página por primera vez, los productos se ordenarán inicialmente por el `ProductName` campo de datos, ya que los `SortBy` `ListItem` seleccionados de forma predeterminada (consulte la figura 6).</span><span class="sxs-lookup"><span data-stu-id="b3ba9-178">At this point when first visiting the page the products will initially be sorted by the `ProductName` data field, as it s the `SortBy` `ListItem` selected by default (see Figure 6).</span></span> <span data-ttu-id="b3ba9-179">Si selecciona una opción de ordenación diferente, como categoría, y hace clic en actualizar, se producirá un postback y se volverán a ordenar los datos por el nombre de la categoría, tal como se muestra en la figura 7.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-179">Selecting a different sorting option such as Category and clicking Refresh will cause a postback and re-sort the data by the category name, as Figure 7 shows.</span></span>

<span data-ttu-id="b3ba9-180">[![los productos se ordenan inicialmente por su nombre](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image15.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image14.png)</span><span class="sxs-lookup"><span data-stu-id="b3ba9-180">[![The Products are Initially Sorted by their Name](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image15.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image14.png)</span></span>

<span data-ttu-id="b3ba9-181">**Figura 6**: los productos se ordenan inicialmente por su nombre ([haga clic para ver la imagen de tamaño completo](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="b3ba9-181">**Figure 6**: The Products are Initially Sorted by their Name ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image16.png))</span></span>

<span data-ttu-id="b3ba9-182">[![los productos están ahora ordenados por categoría](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image18.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="b3ba9-182">[![The Products are Now Sorted by Category](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image18.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image17.png)</span></span>

<span data-ttu-id="b3ba9-183">**Figura 7**: los productos están ahora ordenados por categoría ([haga clic para ver la imagen de tamaño completo](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image19.png))</span><span class="sxs-lookup"><span data-stu-id="b3ba9-183">**Figure 7**: The Products are Now Sorted by Category ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image19.png))</span></span>

> [!NOTE]
> <span data-ttu-id="b3ba9-184">Al hacer clic en el botón actualizar, los datos se vuelven a ordenar automáticamente porque se ha deshabilitado el estado de vista Repeater s, lo que provoca que el repetidor se vuelva a enlazar a su origen de datos en cada postback.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-184">Clicking the Refresh button causes the data to automatically be re-sorted because the Repeater s view state has been disabled, thereby causing the Repeater to rebind to its data source on every postback.</span></span> <span data-ttu-id="b3ba9-185">Si deja el estado de vista Repeater s habilitado, el cambio de la lista desplegable de ordenación no tendrá ningún efecto en el criterio de ordenación.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-185">If you ve left the Repeater s view state enabled, changing the sorting drop-down list won't have any affect on the sort order.</span></span> <span data-ttu-id="b3ba9-186">Para solucionar este error, cree un controlador de eventos para el evento del botón actualizar s `Click` y vuelva a enlazar el repetidor a su origen de datos (llamando al método Repeater s `DataBind()`).</span><span class="sxs-lookup"><span data-stu-id="b3ba9-186">To remedy this, create an event handler for the Refresh Button s `Click` event and rebind the Repeater to its data source (by calling the Repeater s `DataBind()` method).</span></span>

## <a name="remembering-the-sort-expression-and-direction"></a><span data-ttu-id="b3ba9-187">Recordar la expresión de ordenación y la dirección</span><span class="sxs-lookup"><span data-stu-id="b3ba9-187">Remembering the Sort Expression and Direction</span></span>

<span data-ttu-id="b3ba9-188">Al crear una lista de datos que se puede ordenar o un repetidor en una página en la que pueden producirse postbacks relacionados sin orden, es imperativo que la expresión de ordenación y la dirección se recuerden en los postbacks.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-188">When creating a sortable DataList or Repeater on a page where non-sort related postbacks may occur, it s imperative that the sort expression and direction be remembered across postbacks.</span></span> <span data-ttu-id="b3ba9-189">Por ejemplo, Imagine que hemos actualizado el repetidor en este tutorial para incluir un botón eliminar con cada producto.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-189">For example, imagine that we updated the Repeater in this tutorial to include a Delete button with each product.</span></span> <span data-ttu-id="b3ba9-190">Cuando el usuario hace clic en el botón eliminar, se ejecuta código para eliminar el producto seleccionado y, a continuación, volver a enlazar los datos al repetidor.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-190">When the user clicks the Delete button we d run some code to delete the selected product and then rebind the data to the Repeater.</span></span> <span data-ttu-id="b3ba9-191">Si los detalles de ordenación no se conservan en el postback, los datos que se muestran en la pantalla se revertirán al criterio de ordenación original.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-191">If the sort details are not persisted across postback, the data displayed on screen will revert to the original sort order.</span></span>

<span data-ttu-id="b3ba9-192">En este tutorial, el DropDownList guarda implícitamente la expresión de ordenación y la dirección en su estado de vista para nosotros.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-192">For this tutorial, the DropDownList implicitly saves the sort expression and direction in its view state for us.</span></span> <span data-ttu-id="b3ba9-193">Si usamos una interfaz de ordenación diferente, por ejemplo, LinkButtons que proporcionó las distintas opciones de ordenación, es necesario tener cuidado de recordar el criterio de ordenación en los postbacks.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-193">If we were using a different sorting interface one with, say, LinkButtons that provided the various sorting options we d need to take care to remember the sort order across postbacks.</span></span> <span data-ttu-id="b3ba9-194">Esto puede lograrse mediante el almacenamiento de los parámetros de ordenación en el estado de vista de la página, incluyendo el parámetro de ordenación en la cadena de consulta o a través de otra técnica de persistencia de estado.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-194">This could be accomplished by storing the sorting parameters in the page s view state, by including the sort parameter in the querystring, or through some other state persistence technique.</span></span>

<span data-ttu-id="b3ba9-195">En los siguientes ejemplos de este tutorial se explica cómo conservar los detalles de ordenación en el estado de vista de la página.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-195">Future examples in this tutorial explore how to persist the sorting details in the page s view state.</span></span>

## <a name="step-5-adding-sorting-support-to-a-datalist-that-uses-default-paging"></a><span data-ttu-id="b3ba9-196">Paso 5: agregar compatibilidad de ordenación a una lista de usuarios que usa la paginación predeterminada</span><span class="sxs-lookup"><span data-stu-id="b3ba9-196">Step 5: Adding Sorting Support to a DataList that Uses Default Paging</span></span>

<span data-ttu-id="b3ba9-197">En el [tutorial anterior](paging-report-data-in-a-datalist-or-repeater-control-cs.md) , hemos examinado cómo implementar la paginación predeterminada con un DataList.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-197">In the [preceding tutorial](paging-report-data-in-a-datalist-or-repeater-control-cs.md) we examined how to implement default paging with a DataList.</span></span> <span data-ttu-id="b3ba9-198">Vamos a ampliar este ejemplo anterior para incluir la posibilidad de ordenar los datos paginados.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-198">Let s extend this previous example to include the ability to sort the paged data.</span></span> <span data-ttu-id="b3ba9-199">Comience abriendo las páginas `SortingWithDefaultPaging.aspx` y `Paging.aspx` en la carpeta `PagingSortingDataListRepeater`.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-199">Start by opening the `SortingWithDefaultPaging.aspx` and `Paging.aspx` pages in the `PagingSortingDataListRepeater` folder.</span></span> <span data-ttu-id="b3ba9-200">En la página `Paging.aspx`, haga clic en el botón origen para ver el marcado declarativo de la página.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-200">From the `Paging.aspx` page, click on the Source button to view the page s declarative markup.</span></span> <span data-ttu-id="b3ba9-201">Copiar el texto seleccionado (vea la figura 8) y pegarlo en el marcado declarativo de `SortingWithDefaultPaging.aspx` entre las etiquetas de `<asp:Content>`.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-201">Copy the selected text (see Figure 8) and paste it into the declarative markup of `SortingWithDefaultPaging.aspx` between the `<asp:Content>` tags.</span></span>

<span data-ttu-id="b3ba9-202">[![replicar el marcado declarativo en las etiquetas &lt;ASP: Content&gt; de paging. aspx a SortingWithDefaultPaging. aspx](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image21.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image20.png)</span><span class="sxs-lookup"><span data-stu-id="b3ba9-202">[![Replicate the Declarative Markup in the &lt;asp:Content&gt; Tags from Paging.aspx to SortingWithDefaultPaging.aspx](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image21.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image20.png)</span></span>

<span data-ttu-id="b3ba9-203">**Figura 8**: replicación del marcado declarativo en las etiquetas de `<asp:Content>` de `Paging.aspx` a `SortingWithDefaultPaging.aspx` ([haga clic para ver la imagen de tamaño completo](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image22.png))</span><span class="sxs-lookup"><span data-stu-id="b3ba9-203">**Figure 8**: Replicate the Declarative Markup in the `<asp:Content>` Tags from `Paging.aspx` to `SortingWithDefaultPaging.aspx` ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image22.png))</span></span>

<span data-ttu-id="b3ba9-204">Después de copiar el marcado declarativo, copie los métodos y las propiedades de la clase de código subyacente de la página `Paging.aspx` en la clase de código subyacente para `SortingWithDefaultPaging.aspx`.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-204">After copying the declarative markup, copy the methods and properties in the `Paging.aspx` page s code-behind class to the code-behind class for `SortingWithDefaultPaging.aspx`.</span></span> <span data-ttu-id="b3ba9-205">A continuación, dedique un momento a ver la página de `SortingWithDefaultPaging.aspx` en un explorador.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-205">Next, take a moment to view the `SortingWithDefaultPaging.aspx` page in a browser.</span></span> <span data-ttu-id="b3ba9-206">Debe presentar la misma funcionalidad y apariencia que `Paging.aspx`.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-206">It should exhibit the same functionality and appearance as `Paging.aspx`.</span></span>

## <a name="enhancing-productsbll-to-include-a-default-paging-and-sorting-method"></a><span data-ttu-id="b3ba9-207">Mejorar ProductsBLL para incluir un método de paginación y ordenación predeterminados</span><span class="sxs-lookup"><span data-stu-id="b3ba9-207">Enhancing ProductsBLL to Include a Default Paging and Sorting Method</span></span>

<span data-ttu-id="b3ba9-208">En el tutorial anterior, creamos un método `GetProductsAsPagedDataSource(pageIndex, pageSize)` en la clase `ProductsBLL` que devolvía un objeto `PagedDataSource`.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-208">In the previous tutorial we created a `GetProductsAsPagedDataSource(pageIndex, pageSize)` method in the `ProductsBLL` class that returned a `PagedDataSource` object.</span></span> <span data-ttu-id="b3ba9-209">Este objeto de `PagedDataSource` se ha rellenado con *todos* los productos (a través del método de `GetProducts()` BLL), pero cuando se enlaza a la lista de datos, solo se mostraban los registros correspondientes a los parámetros de entrada *pageIndex* y *pageSize* especificados.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-209">This `PagedDataSource` object was populated with *all* of the products (via the BLL s `GetProducts()` method), but when bound to the DataList only those records corresponding to the specified *pageIndex* and *pageSize* input parameters were displayed.</span></span>

<span data-ttu-id="b3ba9-210">Anteriormente en este tutorial hemos agregado la compatibilidad de ordenación mediante la especificación de la expresión de ordenación del controlador de eventos ObjectDataSource s `Selecting`.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-210">Earlier in this tutorial we added sorting support by specifying the sort expression from the ObjectDataSource s `Selecting` event handler.</span></span> <span data-ttu-id="b3ba9-211">Esto funciona bien cuando se devuelve ObjectDataSource a un objeto que se puede ordenar, como el `ProductsDataTable` devuelto por el método `GetProducts()`.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-211">This works well when the ObjectDataSource is returned an object that can be sorted, like the `ProductsDataTable` returned by the `GetProducts()` method.</span></span> <span data-ttu-id="b3ba9-212">Sin embargo, el objeto `PagedDataSource` devuelto por el método `GetProductsAsPagedDataSource` no admite la ordenación de su origen de datos interno.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-212">However, the `PagedDataSource` object returned by the `GetProductsAsPagedDataSource` method does not support sorting of its inner data source.</span></span> <span data-ttu-id="b3ba9-213">En su lugar, es necesario ordenar los resultados devueltos por el método `GetProducts()` *antes* de colocarlos en el `PagedDataSource`.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-213">Instead, we need to sort the results returned from the `GetProducts()` method *before* we put it in the `PagedDataSource`.</span></span>

<span data-ttu-id="b3ba9-214">Para ello, cree un nuevo método en la clase `ProductsBLL` `GetProductsSortedAsPagedDataSource(sortExpression, pageIndex, pageSize)`.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-214">To accomplish this, create a new method in the `ProductsBLL` class, `GetProductsSortedAsPagedDataSource(sortExpression, pageIndex, pageSize)`.</span></span> <span data-ttu-id="b3ba9-215">Para ordenar los `ProductsDataTable` devueltos por el método `GetProducts()`, especifique la propiedad `Sort` de su `DataTableView`predeterminada:</span><span class="sxs-lookup"><span data-stu-id="b3ba9-215">To sort the `ProductsDataTable` returned by the `GetProducts()` method, specify the `Sort` property of its default `DataTableView`:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample5.cs)]

<span data-ttu-id="b3ba9-216">El método `GetProductsSortedAsPagedDataSource` difiere ligeramente del `GetProductsAsPagedDataSource` método creado en el tutorial anterior.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-216">The `GetProductsSortedAsPagedDataSource` method differs only slightly from the `GetProductsAsPagedDataSource` method created in the previous tutorial.</span></span> <span data-ttu-id="b3ba9-217">En concreto, `GetProductsSortedAsPagedDataSource` acepta un parámetro de entrada adicional `sortExpression` y asigna este valor a la propiedad `Sort` del `DefaultView``ProductDataTable` s.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-217">In particular, `GetProductsSortedAsPagedDataSource` accepts an additional input parameter `sortExpression` and assigns this value to the `Sort` property of the `ProductDataTable` s `DefaultView`.</span></span> <span data-ttu-id="b3ba9-218">Unas cuantas líneas de código más adelante, al `PagedDataSource` objeto s DataSource se le asigna el `DefaultView``ProductDataTable` s.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-218">A few lines of code later, the `PagedDataSource` object s DataSource is assigned the `ProductDataTable` s `DefaultView`.</span></span>

## <a name="calling-the-getproductssortedaspageddatasource-method-and-specifying-the-value-for-the-sortexpression-input-parameter"></a><span data-ttu-id="b3ba9-219">Llamar al método GetProductsSortedAsPagedDataSource y especificar el valor para el parámetro de entrada SortExpression</span><span class="sxs-lookup"><span data-stu-id="b3ba9-219">Calling the GetProductsSortedAsPagedDataSource Method and Specifying the Value for the SortExpression Input Parameter</span></span>

<span data-ttu-id="b3ba9-220">Con el método `GetProductsSortedAsPagedDataSource` completado, el siguiente paso es proporcionar el valor para este parámetro.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-220">With the `GetProductsSortedAsPagedDataSource` method complete, the next step is to provide the value for this parameter.</span></span> <span data-ttu-id="b3ba9-221">ObjectDataSource in `SortingWithDefaultPaging.aspx` está configurado actualmente para llamar al método `GetProductsAsPagedDataSource` y pasa los dos parámetros de entrada a través de sus dos `QueryStringParameters`, que se especifican en la colección `SelectParameters`.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-221">The ObjectDataSource in `SortingWithDefaultPaging.aspx` is currently configured to call the `GetProductsAsPagedDataSource` method and passes in the two input parameters through its two `QueryStringParameters`, which are specified in the `SelectParameters` collection.</span></span> <span data-ttu-id="b3ba9-222">Estos dos `QueryStringParameters` indican que el origen del método *`GetProductsAsPagedDataSource` s y* los parámetros *pageSize* proceden de los campos QueryString `pageIndex` y `pageSize`.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-222">These two `QueryStringParameters` indicate that the source for the `GetProductsAsPagedDataSource` method s *pageIndex* and *pageSize* parameters come from the querystring fields `pageIndex` and `pageSize`.</span></span>

<span data-ttu-id="b3ba9-223">Actualice la propiedad ObjectDataSource s `SelectMethod` para que invoque el nuevo método `GetProductsSortedAsPagedDataSource`.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-223">Update the ObjectDataSource s `SelectMethod` property so that it invokes the new `GetProductsSortedAsPagedDataSource` method.</span></span> <span data-ttu-id="b3ba9-224">A continuación, agregue una nueva `QueryStringParameter` de modo que se tenga acceso al parámetro de entrada *sortExpression* desde el campo QueryString `sortExpression`.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-224">Then, add a new `QueryStringParameter` so that the *sortExpression* input parameter is accessed from the querystring field `sortExpression`.</span></span> <span data-ttu-id="b3ba9-225">Establezca el `DefaultValue` de `QueryStringParameter` s en ProductName.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-225">Set the `QueryStringParameter` s `DefaultValue` to ProductName .</span></span>

<span data-ttu-id="b3ba9-226">Después de estos cambios, el marcado declarativo de ObjectDataSource s debería ser similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="b3ba9-226">After these changes, the ObjectDataSource s declarative markup should look like:</span></span>

[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample6.aspx)]

<span data-ttu-id="b3ba9-227">En este punto, la página `SortingWithDefaultPaging.aspx` ordenará los resultados alfabéticamente por el nombre del producto (consulte la figura 9).</span><span class="sxs-lookup"><span data-stu-id="b3ba9-227">At this point, the `SortingWithDefaultPaging.aspx` page will sort its results alphabetically by the product name (see Figure 9).</span></span> <span data-ttu-id="b3ba9-228">Esto se debe a que, de forma predeterminada, se pasa un valor de ProductName como el parámetro `GetProductsSortedAsPagedDataSource` Method s *sortExpression* .</span><span class="sxs-lookup"><span data-stu-id="b3ba9-228">This is because, by default, a value of ProductName is passed in as the `GetProductsSortedAsPagedDataSource` method s *sortExpression* parameter.</span></span>

<span data-ttu-id="b3ba9-229">[![de forma predeterminada, los resultados se ordenan por NombreProducto](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image24.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="b3ba9-229">[![By Default, the Results are Sorted by ProductName](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image24.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image23.png)</span></span>

<span data-ttu-id="b3ba9-230">**Figura 9**: de forma predeterminada, los resultados se ordenan por `ProductName` ([haga clic para ver la imagen de tamaño completo](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image25.png))</span><span class="sxs-lookup"><span data-stu-id="b3ba9-230">**Figure 9**: By Default, the Results are Sorted by `ProductName` ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image25.png))</span></span>

<span data-ttu-id="b3ba9-231">Si agrega manualmente un `sortExpression` campo QueryString como `SortingWithDefaultPaging.aspx?sortExpression=CategoryName` los resultados se ordenarán por el `sortExpression`especificado.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-231">If you manually add a `sortExpression` querystring field such as `SortingWithDefaultPaging.aspx?sortExpression=CategoryName` the results will be sorted by the specified `sortExpression`.</span></span> <span data-ttu-id="b3ba9-232">Sin embargo, este parámetro `sortExpression` no se incluye en la cadena de QueryString al pasar a una página de datos diferente.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-232">However, this `sortExpression` parameter is not included in the querystring when moving to a different page of data.</span></span> <span data-ttu-id="b3ba9-233">De hecho, al hacer clic en los botones de la página siguiente o en la última página, se vuelve a `Paging.aspx`.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-233">In fact, clicking on the Next or Last page buttons takes us back to `Paging.aspx`!</span></span> <span data-ttu-id="b3ba9-234">Además, actualmente no hay ninguna interfaz de ordenación.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-234">Furthermore, there s currently no sorting interface.</span></span> <span data-ttu-id="b3ba9-235">La única forma en que un usuario puede cambiar el criterio de ordenación de los datos paginados es mediante la manipulación directa de QueryString.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-235">The only way a user can change the sort order of the paged data is by manipulating the querystring directly.</span></span>

## <a name="creating-the-sorting-interface"></a><span data-ttu-id="b3ba9-236">Crear la interfaz de ordenación</span><span class="sxs-lookup"><span data-stu-id="b3ba9-236">Creating the Sorting Interface</span></span>

<span data-ttu-id="b3ba9-237">Primero es necesario actualizar el método de `RedirectUser` para enviar al usuario a `SortingWithDefaultPaging.aspx` (en lugar de `Paging.aspx`) e incluir el valor `sortExpression` en la cadena de la cadena de actualización.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-237">We first need to update the `RedirectUser` method to send the user to `SortingWithDefaultPaging.aspx` (instead of `Paging.aspx`) and to include the `sortExpression` value in the querystring.</span></span> <span data-ttu-id="b3ba9-238">También se debe agregar una propiedad con nombre de nivel de página de solo lectura `SortExpression`.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-238">We should also add a read-only, page-level named `SortExpression` property.</span></span> <span data-ttu-id="b3ba9-239">Esta propiedad, similar a las propiedades `PageIndex` y `PageSize` creadas en el tutorial anterior, devuelve el valor del campo `sortExpression` QueryString si existe y el valor predeterminado (ProductName) en caso contrario.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-239">This property, similar to the `PageIndex` and `PageSize` properties created in the previous tutorial, returns the value of the `sortExpression` querystring field if it exists, and the default value ( ProductName ) otherwise.</span></span>

<span data-ttu-id="b3ba9-240">Actualmente, el método `RedirectUser` acepta solo un parámetro de entrada único el índice de la página que se va a mostrar.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-240">Currently the `RedirectUser` method accepts only a single input parameter the index of the page to display.</span></span> <span data-ttu-id="b3ba9-241">Sin embargo, puede haber ocasiones en que desee redirigir al usuario a una página de datos determinada mediante una expresión de ordenación distinta de la especificada en la cadena de tipo.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-241">However, there may be times when we want to redirect the user to a particular page of data using a sort expression other than what s specified in the querystring.</span></span> <span data-ttu-id="b3ba9-242">En un momento, vamos a crear la interfaz de ordenación para esta página, que incluirá una serie de controles Web de botón para ordenar los datos por una columna especificada.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-242">In a moment we'll create the sorting interface for this page, which will include a series of Button Web controls for sorting the data by a specified column.</span></span> <span data-ttu-id="b3ba9-243">Cuando se hace clic en uno de estos botones, queremos redirigir al usuario pasando el valor de expresión de ordenación adecuado.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-243">When one of those Buttons is clicked, we want to redirect the user passing in the appropriate sort expression value.</span></span> <span data-ttu-id="b3ba9-244">Para proporcionar esta funcionalidad, cree dos versiones del método `RedirectUser`.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-244">To provide this functionality, create two versions of the `RedirectUser` method.</span></span> <span data-ttu-id="b3ba9-245">El primero debe aceptar solo el índice de la página que se va a mostrar, mientras que el segundo acepta el índice de la página y la expresión de ordenación.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-245">The first one should accept just the page index to display, while the second one accepts the page index and sort expression.</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample7.cs)]

<span data-ttu-id="b3ba9-246">En el primer ejemplo de este tutorial, creamos una interfaz de ordenación mediante DropDownList.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-246">In the first example in this tutorial, we created a sorting interface using a DropDownList.</span></span> <span data-ttu-id="b3ba9-247">En este ejemplo, vamos a usar tres controles Web de botón situados encima de la lista de elementos para ordenar por `ProductName`, uno para `CategoryName`y otro para `SupplierName`.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-247">For this example, let s use three Button Web controls positioned above the DataList one for sorting by `ProductName`, one for `CategoryName`, and one for `SupplierName`.</span></span> <span data-ttu-id="b3ba9-248">Agregue los tres controles Web Button, estableciendo sus `ID` y `Text` propiedades de forma adecuada:</span><span class="sxs-lookup"><span data-stu-id="b3ba9-248">Add the three Button Web controls, setting their `ID` and `Text` properties appropriately:</span></span>

[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample8.aspx)]

<span data-ttu-id="b3ba9-249">A continuación, cree un controlador de eventos `Click` para cada uno.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-249">Next, create a `Click` event handler for each.</span></span> <span data-ttu-id="b3ba9-250">Los controladores de eventos deben llamar al método `RedirectUser`, devolviendo el usuario a la primera página con la expresión de ordenación adecuada.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-250">The event handlers should call the `RedirectUser` method, returning the user to the first page using the appropriate sort expression.</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample9.cs)]

<span data-ttu-id="b3ba9-251">Al visitar la página por primera vez, los datos se ordenan alfabéticamente por el nombre del producto (consulte la figura 9).</span><span class="sxs-lookup"><span data-stu-id="b3ba9-251">When first visiting the page, the data is sorted by the product name alphabetically (refer back to Figure 9).</span></span> <span data-ttu-id="b3ba9-252">Haga clic en el botón siguiente para avanzar a la segunda página de datos y, a continuación, haga clic en el botón Ordenar por categoría.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-252">Click the Next button to advance to the second page of data and then click the Sort by Category button.</span></span> <span data-ttu-id="b3ba9-253">Esto nos devuelve a la primera página de datos, ordenada por nombre de categoría (consulte la figura 10).</span><span class="sxs-lookup"><span data-stu-id="b3ba9-253">This returns us to the first page of data, sorted by category name (see Figure 10).</span></span> <span data-ttu-id="b3ba9-254">Del mismo modo, al hacer clic en el botón Ordenar por proveedor se ordenan los datos por proveedor a partir de la primera página de datos.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-254">Likewise, clicking the Sort by Supplier button sorts the data by supplier starting from the first page of data.</span></span> <span data-ttu-id="b3ba9-255">La opción de ordenación se recuerda a medida que se paginan los datos.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-255">The sort choice is remembered as the data is paged through.</span></span> <span data-ttu-id="b3ba9-256">En la figura 11 se muestra la página después de ordenar por categoría y, a continuación, avanzar hasta la decimotercer página de datos.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-256">Figure 11 shows the page after sorting by category and then advancing to the thirteenth page of data.</span></span>

<span data-ttu-id="b3ba9-257">[![los productos se ordenan por categoría](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image27.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image26.png)</span><span class="sxs-lookup"><span data-stu-id="b3ba9-257">[![The Products are Sorted by Category](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image27.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image26.png)</span></span>

<span data-ttu-id="b3ba9-258">**Figura 10**: los productos se ordenan por categoría ([haga clic para ver la imagen de tamaño completo](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image28.png))</span><span class="sxs-lookup"><span data-stu-id="b3ba9-258">**Figure 10**: The Products are Sorted by Category ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image28.png))</span></span>

<span data-ttu-id="b3ba9-259">[![se recuerda la expresión de ordenación al paginar a través de los datos](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image30.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="b3ba9-259">[![The Sort Expression is Remembered When Paging Through the Data](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image30.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image29.png)</span></span>

<span data-ttu-id="b3ba9-260">**Figura 11**: la expresión de ordenación se recuerda al paginar a través de los datos ([haga clic para ver la imagen de tamaño completo](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image31.png))</span><span class="sxs-lookup"><span data-stu-id="b3ba9-260">**Figure 11**: The Sort Expression is Remembered When Paging Through the Data ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image31.png))</span></span>

## <a name="step-6-custom-paging-through-records-in-a-repeater"></a><span data-ttu-id="b3ba9-261">Paso 6: paginación personalizada a través de los registros de un repetidor</span><span class="sxs-lookup"><span data-stu-id="b3ba9-261">Step 6: Custom Paging Through Records in a Repeater</span></span>

<span data-ttu-id="b3ba9-262">El ejemplo de DataList examinado en el paso 5 páginas a través de sus datos mediante la técnica de paginación predeterminada ineficaz.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-262">The DataList example examined in step 5 pages through its data using the inefficient default paging technique.</span></span> <span data-ttu-id="b3ba9-263">Al paginar a través de cantidades de datos suficientemente grandes, es fundamental que se use la paginación personalizada.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-263">When paging through sufficiently large amounts of data, it is imperative that custom paging be used.</span></span> <span data-ttu-id="b3ba9-264">De nuevo en la [paginación eficaz a través de grandes cantidades de datos](../paging-and-sorting/efficiently-paging-through-large-amounts-of-data-cs.md) y la ordenación de tutoriales de [datos paginados personalizados](../paging-and-sorting/sorting-custom-paged-data-cs.md) , hemos examinado las diferencias entre la paginación predeterminada y la paginación personalizada y los métodos creados en el BLL para usar la paginación personalizada y la ordenación de datos paginados personalizados.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-264">Back in the [Efficiently Paging Through Large Amounts of Data](../paging-and-sorting/efficiently-paging-through-large-amounts-of-data-cs.md) and [Sorting Custom Paged Data](../paging-and-sorting/sorting-custom-paged-data-cs.md) tutorials, we examined the differences between default and custom paging and created methods in the BLL for utilizing custom paging and sorting custom paged data.</span></span> <span data-ttu-id="b3ba9-265">En concreto, en estos dos tutoriales anteriores se han agregado los tres métodos siguientes a la clase `ProductsBLL`:</span><span class="sxs-lookup"><span data-stu-id="b3ba9-265">In particular, in these two previous tutorials we added the following three methods to the `ProductsBLL` class:</span></span>

- <span data-ttu-id="b3ba9-266">`GetProductsPaged(startRowIndex, maximumRows)` devuelve un subconjunto determinado de registros a partir de *startRowIndex* y no supera *maximumRows*.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-266">`GetProductsPaged(startRowIndex, maximumRows)` returns a particular subset of records starting at *startRowIndex* and not exceeding *maximumRows*.</span></span>
- <span data-ttu-id="b3ba9-267">`GetProductsPagedAndSorted(sortExpression, startRowIndex, maximumRows)` devuelve un subconjunto determinado de registros ordenados por el parámetro de entrada *sortExpression* especificado.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-267">`GetProductsPagedAndSorted(sortExpression, startRowIndex, maximumRows)` returns a particular subset of records sorted by the specified *sortExpression* input parameter.</span></span>
- <span data-ttu-id="b3ba9-268">`TotalNumberOfProducts()` proporciona el número total de registros de la tabla de base de datos `Products`.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-268">`TotalNumberOfProducts()` provides the total number of records in the `Products` database table.</span></span>

<span data-ttu-id="b3ba9-269">Estos métodos se pueden utilizar para paginar y ordenar de forma eficaz los datos mediante un control DataList o Repeater.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-269">These methods can be used to efficiently page and sort through data using a DataList or Repeater control.</span></span> <span data-ttu-id="b3ba9-270">Para ilustrar esto, deje que empiece por crear un control Repeater con compatibilidad con la paginación personalizada. a continuación, agregaremos funcionalidades de ordenación.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-270">To illustrate this, let s start by creating a Repeater control with custom paging support; we'll then add sorting capabilities.</span></span>

<span data-ttu-id="b3ba9-271">Abra la página `SortingWithCustomPaging.aspx` en la carpeta `PagingSortingDataListRepeater` y agregue un repetidor a la página, estableciendo su propiedad `ID` en `Products`.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-271">Open the `SortingWithCustomPaging.aspx` page in the `PagingSortingDataListRepeater` folder and add a Repeater to the page, setting its `ID` property to `Products`.</span></span> <span data-ttu-id="b3ba9-272">En la etiqueta inteligente Repeater s, cree un nuevo ObjectDataSource denominado `ProductsDataSource`.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-272">From the Repeater s smart tag, create a new ObjectDataSource named `ProductsDataSource`.</span></span> <span data-ttu-id="b3ba9-273">Configúrela para seleccionar los datos del método `ProductsBLL` Class s `GetProductsPaged`.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-273">Configure it to select its data from the `ProductsBLL` class s `GetProductsPaged` method.</span></span>

<span data-ttu-id="b3ba9-274">[![configurar ObjectDataSource para usar el método ProductsBLL de la clase GetProductsPaged](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image33.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image32.png)</span><span class="sxs-lookup"><span data-stu-id="b3ba9-274">[![Configure the ObjectDataSource to Use the ProductsBLL Class s GetProductsPaged Method](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image33.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image32.png)</span></span>

<span data-ttu-id="b3ba9-275">**Figura 12**: configuración de ObjectDataSource para usar el método `ProductsBLL` Class s `GetProductsPaged` ([haga clic para ver la imagen de tamaño completo](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image34.png))</span><span class="sxs-lookup"><span data-stu-id="b3ba9-275">**Figure 12**: Configure the ObjectDataSource to Use the `ProductsBLL` Class s `GetProductsPaged` Method ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image34.png))</span></span>

<span data-ttu-id="b3ba9-276">Establezca las listas desplegables de las pestañas actualizar, insertar y eliminar en (ninguno) y, a continuación, haga clic en el botón siguiente.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-276">Set the drop-down lists in the UPDATE, INSERT, and DELETE tabs to (None) and then click the Next button.</span></span> <span data-ttu-id="b3ba9-277">Ahora, el Asistente para configurar el origen de datos solicita los orígenes de los parámetros de entrada `GetProductsPaged` Method s *startRowIndex* y *maximumRows* .</span><span class="sxs-lookup"><span data-stu-id="b3ba9-277">The Configure Data Source wizard now prompts for the sources of the `GetProductsPaged` method s *startRowIndex* and *maximumRows* input parameters.</span></span> <span data-ttu-id="b3ba9-278">En realidad, estos parámetros de entrada se omiten.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-278">In actuality, these input parameters are ignored.</span></span> <span data-ttu-id="b3ba9-279">En su lugar, los valores de *startRowIndex* y *maximumRows* se pasarán a través de la propiedad `Arguments` del controlador de eventos de `Selecting` de ObjectDataSource, al igual *que en* el caso de la primera demostración de este tutorial.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-279">Instead, the *startRowIndex* and *maximumRows* values will be passed in through the `Arguments` property in the ObjectDataSource s `Selecting` event handler, just like how we specified the *sortExpression* in this tutorial s first demo.</span></span> <span data-ttu-id="b3ba9-280">Por lo tanto, deje las listas desplegables de origen del parámetro en el asistente establecido en ninguno.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-280">Therefore, leave the parameter source drop-down lists in the wizard set at None .</span></span>

<span data-ttu-id="b3ba9-281">[![dejar los orígenes de parámetro establecidos en ninguno](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image36.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="b3ba9-281">[![Leave the Parameter Sources Set to None](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image36.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image35.png)</span></span>

<span data-ttu-id="b3ba9-282">**Figura 13**: deje los orígenes de parámetro establecidos en ninguno ([haga clic para ver la imagen de tamaño completo](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image37.png))</span><span class="sxs-lookup"><span data-stu-id="b3ba9-282">**Figure 13**: Leave the Parameter Sources Set to None ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image37.png))</span></span>

> [!NOTE]
> <span data-ttu-id="b3ba9-283">*No* establezca la propiedad ObjectDataSource s `EnablePaging` en `true`.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-283">Do *not* set the ObjectDataSource s `EnablePaging` property to `true`.</span></span> <span data-ttu-id="b3ba9-284">Esto hará que ObjectDataSource incluya automáticamente sus propios parámetros *startRowIndex* y *maximumRows* en la lista de parámetros existentes `SelectMethod` s.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-284">This will cause the ObjectDataSource to automatically include its own *startRowIndex* and *maximumRows* parameters to the `SelectMethod` s existing parameter list.</span></span> <span data-ttu-id="b3ba9-285">La propiedad `EnablePaging` es útil cuando se enlazan datos paginados personalizados a un control GridView, DetailsView o FormView porque estos controles esperan ciertos comportamientos de ObjectDataSource que solo están disponibles cuando se `true``EnablePaging` propiedad.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-285">The `EnablePaging` property is useful when binding custom paged data to a GridView, DetailsView, or FormView control because these controls expect certain behavior from the ObjectDataSource that s only available when `EnablePaging` property is `true`.</span></span> <span data-ttu-id="b3ba9-286">Dado que tenemos que agregar manualmente la compatibilidad de paginación para los controles DataList y Repeater, deje esta propiedad establecida en `false` (el valor predeterminado), ya que vamos a incluir en la funcionalidad necesaria directamente dentro de nuestra página de ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-286">Since we have to manually add the paging support for the DataList and Repeater, leave this property set to `false` (the default), as we'll bake in the needed functionality directly within our ASP.NET page.</span></span>

<span data-ttu-id="b3ba9-287">Por último, defina los `ItemTemplate` repetidores para que se muestren el nombre del producto, la categoría y el proveedor.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-287">Finally, define the Repeater s `ItemTemplate` so that the product s name, category, and supplier are shown.</span></span> <span data-ttu-id="b3ba9-288">Después de estos cambios, la sintaxis declarativa Repeater y de ObjectDataSource s debe ser similar a la siguiente:</span><span class="sxs-lookup"><span data-stu-id="b3ba9-288">After these changes, the Repeater and ObjectDataSource s declarative syntax should look similar to the following:</span></span>

[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample10.aspx)]

<span data-ttu-id="b3ba9-289">Dedique un momento a visitar la página a través de un explorador y tenga en cuenta que no se devuelve ningún registro.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-289">Take a moment to visit the page through a browser and note that no records are returned.</span></span> <span data-ttu-id="b3ba9-290">Esto se debe a que aún no se deben especificar los valores de los parámetros *startRowIndex* y *maximumRows* . por lo tanto, los valores de 0 se pasan para ambos.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-290">This is because we ve yet to specify the *startRowIndex* and *maximumRows* parameter values; therefore, values of 0 are being passed in for both.</span></span> <span data-ttu-id="b3ba9-291">Para especificar estos valores, cree un controlador de eventos para el evento ObjectDataSource s `Selecting` y establezca estos valores de parámetros mediante programación en valores codificados de forma rígida de 0 y 5, respectivamente:</span><span class="sxs-lookup"><span data-stu-id="b3ba9-291">To specify these values, create an event handler for the ObjectDataSource s `Selecting` event and set these parameters values programmatically to hard-coded values of 0 and 5, respectively:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample11.cs)]

<span data-ttu-id="b3ba9-292">Con este cambio, la página, cuando se ve a través de un explorador, muestra los primeros cinco productos.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-292">With this change, the page, when viewed through a browser, shows the first five products.</span></span>

<span data-ttu-id="b3ba9-293">[![se muestran los cinco primeros registros](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image39.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image38.png)</span><span class="sxs-lookup"><span data-stu-id="b3ba9-293">[![The First Five Records are Displayed](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image39.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image38.png)</span></span>

<span data-ttu-id="b3ba9-294">**Figura 14**: se muestran los primeros cinco registros ([haga clic para ver la imagen de tamaño completo](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image40.png))</span><span class="sxs-lookup"><span data-stu-id="b3ba9-294">**Figure 14**: The First Five Records are Displayed ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image40.png))</span></span>

> [!NOTE]
> <span data-ttu-id="b3ba9-295">Los productos que se muestran en la figura 14 se ordenan por nombre de producto porque el `GetProductsPaged` procedimiento almacenado que realiza la consulta de paginación personalizada eficaz ordena los resultados por `ProductName`.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-295">The products listed in Figure 14 happen to be sorted by product name because the `GetProductsPaged` stored procedure that performs the efficient custom paging query orders the results by `ProductName`.</span></span>

<span data-ttu-id="b3ba9-296">Con el fin de permitir que el usuario recorra las páginas, es necesario realizar un seguimiento del índice de la fila inicial y de las filas máximas, y recordar estos valores en los postbacks.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-296">In order to allow the user to step through the pages, we need to keep track of the start row index and maximum rows and remember these values across postbacks.</span></span> <span data-ttu-id="b3ba9-297">En el ejemplo de paginación predeterminada usamos campos QueryString para conservar estos valores. en esta demostración, se conserva esta información en el estado de vista de la página.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-297">In the default paging example we used querystring fields to persist these values; for this demo, let s persist this information in the page s view state.</span></span> <span data-ttu-id="b3ba9-298">Cree las dos propiedades siguientes:</span><span class="sxs-lookup"><span data-stu-id="b3ba9-298">Create the following two properties:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample12.cs)]

<span data-ttu-id="b3ba9-299">A continuación, actualice el código del controlador de eventos de selección para que use las propiedades `StartRowIndex` y `MaximumRows` en lugar de los valores codificados de forma rígida de 0 y 5:</span><span class="sxs-lookup"><span data-stu-id="b3ba9-299">Next, update the code in the Selecting event handler so that it uses the `StartRowIndex` and `MaximumRows` properties instead of the hard-coded values of 0 and 5:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample13.cs)]

<span data-ttu-id="b3ba9-300">En este momento, la página sigue mostrando solo los cinco primeros registros.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-300">At this point our page still shows just the first five records.</span></span> <span data-ttu-id="b3ba9-301">Sin embargo, con estas propiedades en su lugar, se vuelve a preparar la creación de la interfaz de paginación.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-301">However, with these properties in place, we re ready to create our paging interface.</span></span>

## <a name="adding-the-paging-interface"></a><span data-ttu-id="b3ba9-302">Agregar la interfaz de paginación</span><span class="sxs-lookup"><span data-stu-id="b3ba9-302">Adding the Paging Interface</span></span>

<span data-ttu-id="b3ba9-303">Permita a s usar la misma interfaz de paginación primera, anterior, siguiente y última que se usó en el ejemplo de paginación predeterminada, incluido el control Web de etiqueta que muestra la página de datos que se está viendo y el número total de páginas.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-303">Let s use the same First, Previous, Next, Last paging interface used in the default paging example, including the Label Web control that displays what page of data is being viewed and how many total pages exist.</span></span> <span data-ttu-id="b3ba9-304">Agregue los cuatro controles Web Button y la etiqueta debajo del repetidor.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-304">Add the four Button Web controls and Label below the Repeater.</span></span>

[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample14.aspx)]

<span data-ttu-id="b3ba9-305">A continuación, cree controladores de eventos de `Click` para los cuatro botones.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-305">Next, create `Click` event handlers for the four Buttons.</span></span> <span data-ttu-id="b3ba9-306">Cuando se hace clic en uno de estos botones, es necesario actualizar el `StartRowIndex` y volver a enlazar los datos al repetidor.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-306">When one of these Buttons is clicked, we need to update the `StartRowIndex` and rebind the data to the Repeater.</span></span> <span data-ttu-id="b3ba9-307">El código de los botones primero, anterior y siguiente es lo bastante sencillo, pero para el último botón ¿cómo se determina el índice de la fila inicial de la última página de datos?</span><span class="sxs-lookup"><span data-stu-id="b3ba9-307">The code for the First, Previous, and Next buttons is simple enough, but for the Last button how do we determine the start row index for the last page of data?</span></span> <span data-ttu-id="b3ba9-308">Para calcular este índice, así como para poder determinar si se deben habilitar los botones siguiente y último, es necesario saber cuántos registros se van a paginar en total.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-308">To compute this index as well as being able to determine whether the Next and Last buttons should be enabled we need to know how many records in total are being paged through.</span></span> <span data-ttu-id="b3ba9-309">Podemos determinar esto llamando al método `ProductsBLL` Class s `TotalNumberOfProducts()`.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-309">We can determine this by calling the `ProductsBLL` class s `TotalNumberOfProducts()` method.</span></span> <span data-ttu-id="b3ba9-310">Permita crear una propiedad de nivel de página de solo lectura denominada `TotalRowCount` que devuelva los resultados del método `TotalNumberOfProducts()`:</span><span class="sxs-lookup"><span data-stu-id="b3ba9-310">Let s create a read-only, page-level property named `TotalRowCount` that returns the results of the `TotalNumberOfProducts()` method:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample15.cs)]

<span data-ttu-id="b3ba9-311">Con esta propiedad, ahora podemos determinar el índice de la fila de inicio de la última página.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-311">With this property we can now determine the last page s start row index.</span></span> <span data-ttu-id="b3ba9-312">En concreto, es el resultado entero del `TotalRowCount` menos 1 dividido por `MaximumRows`, multiplicado por `MaximumRows`.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-312">Specifically, it s the integer result of the `TotalRowCount` minus 1 divided by `MaximumRows`, multiplied by `MaximumRows`.</span></span> <span data-ttu-id="b3ba9-313">Ahora podemos escribir los controladores de eventos de `Click` para los cuatro botones de la interfaz de paginación:</span><span class="sxs-lookup"><span data-stu-id="b3ba9-313">We can now write the `Click` event handlers for the four paging interface buttons:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample16.cs)]

<span data-ttu-id="b3ba9-314">Por último, es necesario deshabilitar los botones primero y anterior de la interfaz de paginación al ver la primera página de datos y los botones siguiente y último al ver la última página.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-314">Finally, we need to disable the First and Previous buttons in the paging interface when viewing the first page of data and the Next and Last buttons when viewing the last page.</span></span> <span data-ttu-id="b3ba9-315">Para ello, agregue el código siguiente al controlador de eventos ObjectDataSource s `Selecting`:</span><span class="sxs-lookup"><span data-stu-id="b3ba9-315">To accomplish this, add the following code to the ObjectDataSource s `Selecting` event handler:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample17.cs)]

<span data-ttu-id="b3ba9-316">Después de agregar estos controladores de eventos `Click` y el código para habilitar o deshabilitar los elementos de la interfaz de paginación basados en el índice de la fila inicial actual, pruebe la página en un explorador.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-316">After adding these `Click` event handlers and the code to enable or disable the paging interface elements based on the current start row index, test the page in a browser.</span></span> <span data-ttu-id="b3ba9-317">Como se muestra en la figura 15, al visitar la página por primera vez, se deshabilitan los botones primero y anterior.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-317">As Figure 15 illustrates, when first visiting the page the First and Previous buttons will are disabled.</span></span> <span data-ttu-id="b3ba9-318">Al hacer clic en siguiente se muestra la segunda página de datos, mientras que al hacer clic en último se muestra la página final (vea las figuras 16 y 17).</span><span class="sxs-lookup"><span data-stu-id="b3ba9-318">Clicking Next shows the second page of data, while clicking Last displays the final page (see Figures 16 and 17).</span></span> <span data-ttu-id="b3ba9-319">Al ver la última página de datos, se deshabilitan los botones siguiente y último.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-319">When viewing the last page of data both the Next and Last buttons are disabled.</span></span>

<span data-ttu-id="b3ba9-320">[![los botones anterior y último están deshabilitados al ver la primera página de productos](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image42.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image41.png)</span><span class="sxs-lookup"><span data-stu-id="b3ba9-320">[![The Previous and Last Buttons are Disabled When Viewing the First Page of Products](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image42.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image41.png)</span></span>

<span data-ttu-id="b3ba9-321">**Figura 15**: los botones anterior y último están deshabilitados al ver la primera página de productos ([haga clic para ver la imagen de tamaño completo](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image43.png))</span><span class="sxs-lookup"><span data-stu-id="b3ba9-321">**Figure 15**: The Previous and Last Buttons are Disabled When Viewing the First Page of Products ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image43.png))</span></span>

<span data-ttu-id="b3ba9-322">[![se muestra la segunda página de productos](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image45.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image44.png)</span><span class="sxs-lookup"><span data-stu-id="b3ba9-322">[![The Second Page of Products are Displayed](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image45.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image44.png)</span></span>

<span data-ttu-id="b3ba9-323">**Figura 16**: se muestra la segunda página de productos ([haga clic para ver la imagen de tamaño completo](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image46.png))</span><span class="sxs-lookup"><span data-stu-id="b3ba9-323">**Figure 16**: The Second Page of Products are Displayed ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image46.png))</span></span>

<span data-ttu-id="b3ba9-324">[![al hacer clic en Last, se muestra la página final de los datos](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image48.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image47.png)</span><span class="sxs-lookup"><span data-stu-id="b3ba9-324">[![Clicking Last Displays the Final Page of Data](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image48.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image47.png)</span></span>

<span data-ttu-id="b3ba9-325">**Figura 17**: al hacer clic en Last, se muestra la página final de los datos ([haga clic para ver la imagen de tamaño completo](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image49.png))</span><span class="sxs-lookup"><span data-stu-id="b3ba9-325">**Figure 17**: Clicking Last Displays the Final Page of Data ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image49.png))</span></span>

## <a name="step-7-including-sorting-support-with-the-custom-paged-repeater"></a><span data-ttu-id="b3ba9-326">Paso 7: incluir compatibilidad de ordenación con el repetidor personalizado paginado</span><span class="sxs-lookup"><span data-stu-id="b3ba9-326">Step 7: Including Sorting Support with the Custom Paged Repeater</span></span>

<span data-ttu-id="b3ba9-327">Una vez implementada la paginación personalizada, se vuelve a preparar para incluir la compatibilidad con la ordenación.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-327">Now that custom paging has been implemented, we re ready to include sorting support.</span></span> <span data-ttu-id="b3ba9-328">El método `ProductsBLL` Class s `GetProductsPagedAndSorted` tiene los mismos parámetros de entrada *startRowIndex* y *maximumRows* que `GetProductsPaged`, pero permite un parámetro de entrada de *sortExpression* adicional.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-328">The `ProductsBLL` class s `GetProductsPagedAndSorted` method has the same *startRowIndex* and *maximumRows* input parameters as `GetProductsPaged`, but permits an additional *sortExpression* input parameter.</span></span> <span data-ttu-id="b3ba9-329">Para usar el método `GetProductsPagedAndSorted` de `SortingWithCustomPaging.aspx`, es necesario realizar los pasos siguientes:</span><span class="sxs-lookup"><span data-stu-id="b3ba9-329">To use the `GetProductsPagedAndSorted` method from `SortingWithCustomPaging.aspx`, we need to perform the following steps:</span></span>

1. <span data-ttu-id="b3ba9-330">Cambie la propiedad ObjectDataSource s `SelectMethod` de `GetProductsPaged` a `GetProductsPagedAndSorted`.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-330">Change the ObjectDataSource s `SelectMethod` property from `GetProductsPaged` to `GetProductsPagedAndSorted`.</span></span>
2. <span data-ttu-id="b3ba9-331">Agregue un objeto *sortExpression* `Parameter` a la colección de `SelectParameters` de ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-331">Add a *sortExpression* `Parameter` object to the ObjectDataSource s `SelectParameters` collection.</span></span>
3. <span data-ttu-id="b3ba9-332">Cree una propiedad de `SortExpression` de nivel de página privada que conserve su valor en los postbacks mediante el estado de vista de la página.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-332">Create a private, page-level `SortExpression` property that persists its value across postbacks through the page s view state.</span></span>
4. <span data-ttu-id="b3ba9-333">Actualice el controlador de eventos ObjectDataSource s `Selecting` para asignar el parámetro ObjectDataSource s *sortExpression* al valor de la propiedad `SortExpression` de nivel de página.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-333">Update the ObjectDataSource s `Selecting` event handler to assign the ObjectDataSource s *sortExpression* parameter the value of the page-level `SortExpression` property.</span></span>
5. <span data-ttu-id="b3ba9-334">Cree la interfaz de ordenación.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-334">Create the sorting interface.</span></span>

<span data-ttu-id="b3ba9-335">Empiece por actualizar la propiedad ObjectDataSource s `SelectMethod` y agregando un `Parameter`*sortExpression* .</span><span class="sxs-lookup"><span data-stu-id="b3ba9-335">Start by updating the ObjectDataSource s `SelectMethod` property and adding a *sortExpression* `Parameter`.</span></span> <span data-ttu-id="b3ba9-336">Asegúrese de que el valor de la propiedad *sortExpression* `Parameter` s `Type` está establecido en `String`.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-336">Make sure that the *sortExpression* `Parameter` s `Type` property is set to `String`.</span></span> <span data-ttu-id="b3ba9-337">Después de completar estas dos primeras tareas, el marcado declarativo de ObjectDataSource s debería tener un aspecto similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="b3ba9-337">After completing these first two tasks, the ObjectDataSource s declarative markup should look like the following:</span></span>

[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample18.aspx)]

<span data-ttu-id="b3ba9-338">A continuación, necesitamos una propiedad de `SortExpression` de nivel de página cuyo valor se serialice en el estado de vista.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-338">Next, we need a page-level `SortExpression` property whose value is serialized to view state.</span></span> <span data-ttu-id="b3ba9-339">Si no se ha establecido ningún valor de expresión de ordenación, use ProductName como valor predeterminado:</span><span class="sxs-lookup"><span data-stu-id="b3ba9-339">If no sort expression value has been set, use ProductName as the default:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample19.cs)]

<span data-ttu-id="b3ba9-340">Antes de que ObjectDataSource invoque el método `GetProductsPagedAndSorted` es necesario establecer el `Parameter` *sortExpression* en el valor de la propiedad `SortExpression`.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-340">Before the ObjectDataSource invokes the `GetProductsPagedAndSorted` method we need to set the *sortExpression* `Parameter` to the value of the `SortExpression` property.</span></span> <span data-ttu-id="b3ba9-341">En el controlador de eventos `Selecting`, agregue la siguiente línea de código:</span><span class="sxs-lookup"><span data-stu-id="b3ba9-341">In the `Selecting` event handler, add the following line of code:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample20.cs)]

<span data-ttu-id="b3ba9-342">Todo lo que queda es implementar la interfaz de ordenación.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-342">All that remains is to implement the sorting interface.</span></span> <span data-ttu-id="b3ba9-343">Como hicimos en el último ejemplo, permita que la interfaz de ordenación se implemente mediante tres controles Web de botón que permiten al usuario ordenar los resultados por nombre de producto, categoría o proveedor.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-343">As we did in the last example, let s have the sorting interface implemented using three Button Web controls that allow the user to sort the results by product name, category, or supplier.</span></span>

[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample21.aspx)]

<span data-ttu-id="b3ba9-344">Cree `Click` controladores de eventos para estos tres controles de botón.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-344">Create `Click` event handlers for these three Button controls.</span></span> <span data-ttu-id="b3ba9-345">En el controlador de eventos, restablezca el `StartRowIndex` en 0, establezca el `SortExpression` en el valor adecuado y vuelva a enlazar los datos al repetidor:</span><span class="sxs-lookup"><span data-stu-id="b3ba9-345">In the event handler, reset the `StartRowIndex` to 0, set the `SortExpression` to the appropriate value, and rebind the data to the Repeater:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample22.cs)]

<span data-ttu-id="b3ba9-346">Eso es todo lo que tiene que hacer.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-346">That s all there is to it!</span></span> <span data-ttu-id="b3ba9-347">Aunque se han implementado varios pasos para obtener la paginación y la ordenación personalizadas, los pasos son muy similares a los necesarios para la paginación predeterminada.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-347">While there were a number of steps to get custom paging and sorting implemented, the steps were very similar to those needed for default paging.</span></span> <span data-ttu-id="b3ba9-348">En la figura 18 se muestran los productos al ver la última página de datos cuando se ordenan por categoría.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-348">Figure 18 shows the products when viewing the last page of data when sorted by category.</span></span>

<span data-ttu-id="b3ba9-349">[![se muestra la última página de datos, ordenada por categoría,](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image51.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image50.png)</span><span class="sxs-lookup"><span data-stu-id="b3ba9-349">[![The Last Page of Data, Sorted by Category, is Displayed](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image51.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image50.png)</span></span>

<span data-ttu-id="b3ba9-350">**Figura 18**: se muestra la última página de datos, ordenada por categoría, ([haga clic para ver la imagen de tamaño completo](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image52.png))</span><span class="sxs-lookup"><span data-stu-id="b3ba9-350">**Figure 18**: The Last Page of Data, Sorted by Category, is Displayed ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image52.png))</span></span>

> [!NOTE]
> <span data-ttu-id="b3ba9-351">En los ejemplos anteriores, cuando se usaba la ordenación por el NombreProveedor del proveedor como expresión de ordenación.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-351">In previous examples, when sorting by the supplier SupplierName was used as the sort expression.</span></span> <span data-ttu-id="b3ba9-352">Sin embargo, para la implementación de paginación personalizada, es necesario usar CompanyName.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-352">However, for the custom paging implementation, we need to use CompanyName.</span></span> <span data-ttu-id="b3ba9-353">Esto se debe a que el procedimiento almacenado responsable de la implementación de la paginación personalizada `GetProductsPagedAndSorted` pasa la expresión de ordenación a la palabra clave `ROW_NUMBER()`, la palabra clave `ROW_NUMBER()` requiere el nombre de columna real en lugar de un alias.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-353">This is because the stored procedure responsible for implementing custom paging `GetProductsPagedAndSorted` passes the sort expression into the `ROW_NUMBER()` keyword, The `ROW_NUMBER()` keyword requires the actual column name rather than an alias.</span></span> <span data-ttu-id="b3ba9-354">Por lo tanto, se debe usar `CompanyName` (el nombre de la columna en la tabla de `Suppliers`) en lugar del alias usado en la consulta de `SELECT` (`SupplierName`) para la expresión de ordenación.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-354">Therefore, we must use `CompanyName` (the name of the column in the `Suppliers` table) rather than the alias used in the `SELECT` query (`SupplierName`) for the sort expression.</span></span>

## <a name="summary"></a><span data-ttu-id="b3ba9-355">Resumen</span><span class="sxs-lookup"><span data-stu-id="b3ba9-355">Summary</span></span>

<span data-ttu-id="b3ba9-356">Ni los controles DataList ni Repeater ofrecen compatibilidad con la ordenación integrada, pero con un poco de código y una interfaz de ordenación personalizada, se puede Agregar esta funcionalidad.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-356">Neither the DataList nor Repeater offer built-in sorting support, but with a bit of code and a custom sorting interface, such functionality can be added.</span></span> <span data-ttu-id="b3ba9-357">Al implementar la ordenación, pero no la paginación, la expresión de ordenación se puede especificar mediante el `DataSourceSelectArguments` objeto pasado al método de `Select` de ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-357">When implementing sorting, but not paging, the sort expression can be specified through the `DataSourceSelectArguments` object passed into the ObjectDataSource s `Select` method.</span></span> <span data-ttu-id="b3ba9-358">Esta propiedad `DataSourceSelectArguments` Object s `SortExpression` puede asignarse en el controlador de eventos ObjectDataSource s `Selecting`.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-358">This `DataSourceSelectArguments` object s `SortExpression` property can be assigned in the ObjectDataSource s `Selecting` event handler.</span></span>

<span data-ttu-id="b3ba9-359">Para agregar funciones de ordenación a una lista de controles o un repetidor que ya proporciona compatibilidad con la paginación, el enfoque más sencillo es personalizar la capa de lógica de negocios para incluir un método que acepte una expresión de ordenación.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-359">To add sorting capabilities to a DataList or Repeater that already provides paging support, the easiest approach is to customize the Business Logic Layer to include a method that accepts a sort expression.</span></span> <span data-ttu-id="b3ba9-360">Esta información se puede pasar a continuación a través de un parámetro en la `SelectParameters`de datos de origen de datos.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-360">This information can then be passed in through a parameter in the ObjectDataSource s `SelectParameters`.</span></span>

<span data-ttu-id="b3ba9-361">En este tutorial se realiza el examen de la paginación y la ordenación con los controles DataList y Repeater.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-361">This tutorial completes our examination of paging and sorting with the DataList and Repeater controls.</span></span> <span data-ttu-id="b3ba9-362">En el tutorial siguiente y el final se examinará cómo agregar controles Web de botón a las plantillas DataList y Repeater s para proporcionar una funcionalidad personalizada iniciada por el usuario para cada elemento.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-362">Our next and final tutorial will examine how to add Button Web controls to the DataList and Repeater s templates in order to provide some custom, user-initiated functionality on a per-item basis.</span></span>

<span data-ttu-id="b3ba9-363">¡ Feliz programación!</span><span class="sxs-lookup"><span data-stu-id="b3ba9-363">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="b3ba9-364">Acerca del autor</span><span class="sxs-lookup"><span data-stu-id="b3ba9-364">About the Author</span></span>

<span data-ttu-id="b3ba9-365">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor de siete libros de ASP/ASP. net y fundador de [4GuysFromRolla.com](http://www.4guysfromrolla.com), ha estado trabajando con las tecnologías Web de Microsoft desde 1998.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-365">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="b3ba9-366">Scott funciona como consultor, profesor y redactor independiente.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-366">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="b3ba9-367">Su último libro se [*enseña a ASP.NET 2,0 en 24 horas*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="b3ba9-367">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="b3ba9-368">Puede ponerse en contacto con usted en [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="b3ba9-368">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="b3ba9-369">o a través de su blog, que encontrará en [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="b3ba9-369">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="b3ba9-370">Agradecimiento especial a</span><span class="sxs-lookup"><span data-stu-id="b3ba9-370">Special Thanks To</span></span>

<span data-ttu-id="b3ba9-371">Muchos revisores útiles revisaron esta serie de tutoriales.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-371">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="b3ba9-372">El revisor responsable de este tutorial fue David Suru.</span><span class="sxs-lookup"><span data-stu-id="b3ba9-372">Lead reviewer for this tutorial was David Suru.</span></span> <span data-ttu-id="b3ba9-373">¿Está interesado en revisar los próximos artículos de MSDN?</span><span class="sxs-lookup"><span data-stu-id="b3ba9-373">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="b3ba9-374">En caso afirmativo, suéltelo en [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="b3ba9-374">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="b3ba9-375">[Anterior](paging-report-data-in-a-datalist-or-repeater-control-cs.md)
> [Siguiente](paging-report-data-in-a-datalist-or-repeater-control-vb.md)</span><span class="sxs-lookup"><span data-stu-id="b3ba9-375">[Previous](paging-report-data-in-a-datalist-or-repeater-control-cs.md)
[Next](paging-report-data-in-a-datalist-or-repeater-control-vb.md)</span></span>
