---
uid: mvc/overview/older-versions-1/contact-manager/iteration-6-use-test-driven-development-cs
title: 'Iteración #6: usar el desarrollo controlado por pruebas (C#) | Microsoft Docs'
author: microsoft
description: En esta iteración sexta, se agregan nuevas funciones a nuestra aplicación escribir pruebas unitarias en primer lugar y escribir código en las pruebas unitarias. En esta iteración,...
ms.author: riande
ms.date: 02/20/2009
ms.assetid: 013c3c26-7dc3-41d1-8064-f233c86008b5
msc.legacyurl: /mvc/overview/older-versions-1/contact-manager/iteration-6-use-test-driven-development-cs
msc.type: authoredcontent
ms.openlocfilehash: 3c4358a1b979ab95d8ac25551e21ee95d75e5eae
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 03/01/2019
ms.locfileid: "57026202"
---
<a name="iteration-6--use-test-driven-development-c"></a><span data-ttu-id="aa005-104">Iteración #6: usar el desarrollo controlado por pruebas (C#)</span><span class="sxs-lookup"><span data-stu-id="aa005-104">Iteration #6 – Use test-driven development (C#)</span></span>
====================
<span data-ttu-id="aa005-105">por [Microsoft](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="aa005-105">by [Microsoft](https://github.com/microsoft)</span></span>

[<span data-ttu-id="aa005-106">Descargue el código</span><span class="sxs-lookup"><span data-stu-id="aa005-106">Download Code</span></span>](iteration-6-use-test-driven-development-cs/_static/contactmanager_6_cs1.zip)

> <span data-ttu-id="aa005-107">En esta iteración sexta, se agregan nuevas funciones a nuestra aplicación escribir pruebas unitarias en primer lugar y escribir código en las pruebas unitarias.</span><span class="sxs-lookup"><span data-stu-id="aa005-107">In this sixth iteration, we add new functionality to our application by writing unit tests first and writing code against the unit tests.</span></span> <span data-ttu-id="aa005-108">En esta iteración, se agrega grupos de contactos.</span><span class="sxs-lookup"><span data-stu-id="aa005-108">In this iteration, we add contact groups.</span></span>


## <a name="building-a-contact-management-aspnet-mvc-application-c"></a><span data-ttu-id="aa005-109">Creación de una aplicación de MVC de ASP.NET de la administración de contactos (C#)</span><span class="sxs-lookup"><span data-stu-id="aa005-109">Building a Contact Management ASP.NET MVC Application (C#)</span></span>
  

<span data-ttu-id="aa005-110">En esta serie de tutoriales, creamos una aplicación de administración de contactos completa desde el principio para finalizar.</span><span class="sxs-lookup"><span data-stu-id="aa005-110">In this series of tutorials, we build an entire Contact Management application from start to finish.</span></span> <span data-ttu-id="aa005-111">La aplicación de Contact Manager permite almacenar información de contacto - nombres, números de teléfono y direcciones de correo electrónico: para obtener una lista de personas.</span><span class="sxs-lookup"><span data-stu-id="aa005-111">The Contact Manager application enables you to store contact information - names, phone numbers and email addresses - for a list of people.</span></span>

<span data-ttu-id="aa005-112">Creamos la aplicación a través de varias iteraciones.</span><span class="sxs-lookup"><span data-stu-id="aa005-112">We build the application over multiple iterations.</span></span> <span data-ttu-id="aa005-113">Con cada iteración, mejorar gradualmente la aplicación.</span><span class="sxs-lookup"><span data-stu-id="aa005-113">With each iteration, we gradually improve the application.</span></span> <span data-ttu-id="aa005-114">Es el objetivo de este enfoque de varias iteraciones para que pueda entender el motivo de cada cambio.</span><span class="sxs-lookup"><span data-stu-id="aa005-114">The goal of this multiple iteration approach is to enable you to understand the reason for each change.</span></span>

- <span data-ttu-id="aa005-115">Iteración #1: crear la aplicación.</span><span class="sxs-lookup"><span data-stu-id="aa005-115">Iteration #1 - Create the application.</span></span> <span data-ttu-id="aa005-116">En la primera iteración, se creará el Administrador de contactos de la manera más sencilla posible.</span><span class="sxs-lookup"><span data-stu-id="aa005-116">In the first iteration, we create the Contact Manager in the simplest way possible.</span></span> <span data-ttu-id="aa005-117">Se agrega compatibilidad para las operaciones de base de datos básica: Crear, leer, actualizar y eliminar (CRUD).</span><span class="sxs-lookup"><span data-stu-id="aa005-117">We add support for basic database operations: Create, Read, Update, and Delete (CRUD).</span></span>

- <span data-ttu-id="aa005-118">Iteración #2: hacer que la aplicación parezca interesante.</span><span class="sxs-lookup"><span data-stu-id="aa005-118">Iteration #2 - Make the application look nice.</span></span> <span data-ttu-id="aa005-119">En esta iteración, mejorar la apariencia de la aplicación mediante la modificación de la página principal de la vista de MVC de ASP.NET predeterminada y en cascada de hoja de estilos.</span><span class="sxs-lookup"><span data-stu-id="aa005-119">In this iteration, we improve the appearance of the application by modifying the default ASP.NET MVC view master page and cascading style sheet.</span></span>

- <span data-ttu-id="aa005-120">Iteración #3: agregar validación de formulario.</span><span class="sxs-lookup"><span data-stu-id="aa005-120">Iteration #3 - Add form validation.</span></span> <span data-ttu-id="aa005-121">En la tercera iteración, se agrega una validación de formulario básico.</span><span class="sxs-lookup"><span data-stu-id="aa005-121">In the third iteration, we add basic form validation.</span></span> <span data-ttu-id="aa005-122">Evitamos personas desde el envío de un formulario sin completar los campos obligatorios.</span><span class="sxs-lookup"><span data-stu-id="aa005-122">We prevent people from submitting a form without completing required form fields.</span></span> <span data-ttu-id="aa005-123">También hemos validar direcciones de correo electrónico y números de teléfono.</span><span class="sxs-lookup"><span data-stu-id="aa005-123">We also validate email addresses and phone numbers.</span></span>

- <span data-ttu-id="aa005-124">Iteración #4: hacer que la aplicación tenga un acoplamiento.</span><span class="sxs-lookup"><span data-stu-id="aa005-124">Iteration #4 - Make the application loosely coupled.</span></span> <span data-ttu-id="aa005-125">En este cuarta iteración, aprovechamos de varios patrones de diseño de software para que sea más fácil de mantener y modificar la aplicación de Contact Manager.</span><span class="sxs-lookup"><span data-stu-id="aa005-125">In this fourth iteration, we take advantage of several software design patterns to make it easier to maintain and modify the Contact Manager application.</span></span> <span data-ttu-id="aa005-126">Por ejemplo, se refactoriza nuestra aplicación para usar el patrón de repositorio y la inserción de dependencias.</span><span class="sxs-lookup"><span data-stu-id="aa005-126">For example, we refactor our application to use the Repository pattern and the Dependency Injection pattern.</span></span>

- <span data-ttu-id="aa005-127">Iteración #5: crear pruebas unitarias.</span><span class="sxs-lookup"><span data-stu-id="aa005-127">Iteration #5 - Create unit tests.</span></span> <span data-ttu-id="aa005-128">En la iteración quinta, realizamos nuestra aplicación más fácil de mantener y modificar mediante la adición de las pruebas unitarias.</span><span class="sxs-lookup"><span data-stu-id="aa005-128">In the fifth iteration, we make our application easier to maintain and modify by adding unit tests.</span></span> <span data-ttu-id="aa005-129">Hemos simular nuestras clases de modelo de datos y generar pruebas unitarias para nuestros controladores y la lógica de validación.</span><span class="sxs-lookup"><span data-stu-id="aa005-129">We mock our data model classes and build unit tests for our controllers and validation logic.</span></span>

- <span data-ttu-id="aa005-130">Iteración #6: usar el desarrollo controlado por pruebas.</span><span class="sxs-lookup"><span data-stu-id="aa005-130">Iteration #6 - Use test-driven development.</span></span> <span data-ttu-id="aa005-131">En esta iteración sexta, se agregan nuevas funciones a nuestra aplicación escribir pruebas unitarias en primer lugar y escribir código en las pruebas unitarias.</span><span class="sxs-lookup"><span data-stu-id="aa005-131">In this sixth iteration, we add new functionality to our application by writing unit tests first and writing code against the unit tests.</span></span> <span data-ttu-id="aa005-132">En esta iteración, se agrega grupos de contactos.</span><span class="sxs-lookup"><span data-stu-id="aa005-132">In this iteration, we add contact groups.</span></span>

- <span data-ttu-id="aa005-133">Iteración #7: agregar funcionalidad Ajax.</span><span class="sxs-lookup"><span data-stu-id="aa005-133">Iteration #7 - Add Ajax functionality.</span></span> <span data-ttu-id="aa005-134">En la iteración séptima, mejorar la capacidad de respuesta y el rendimiento de nuestra aplicación agregando compatibilidad con Ajax.</span><span class="sxs-lookup"><span data-stu-id="aa005-134">In the seventh iteration, we improve the responsiveness and performance of our application by adding support for Ajax.</span></span>

## <a name="this-iteration"></a><span data-ttu-id="aa005-135">Esta iteración</span><span class="sxs-lookup"><span data-stu-id="aa005-135">This Iteration</span></span>

<span data-ttu-id="aa005-136">En la iteración anterior de la aplicación de Contact Manager, hemos creado las pruebas unitarias para proporcionar una red de seguridad de nuestro código.</span><span class="sxs-lookup"><span data-stu-id="aa005-136">In the previous iteration of the Contact Manager application, we created unit tests to provide a safety net for our code.</span></span> <span data-ttu-id="aa005-137">La motivación para crear las pruebas unitarias era hacer que nuestro código sea más resistente a cambiar.</span><span class="sxs-lookup"><span data-stu-id="aa005-137">The motivation for creating the unit tests was to make our code more resilient to change.</span></span> <span data-ttu-id="aa005-138">Con las pruebas unitarias en su lugar, podemos alegremente realizar ningún cambio en nuestro código y saber inmediatamente si se ha interrumpido la funcionalidad existente.</span><span class="sxs-lookup"><span data-stu-id="aa005-138">With unit tests in place, we can happily make any change to our code and immediately know whether we have broken existing functionality.</span></span>

<span data-ttu-id="aa005-139">En esta iteración, usamos las pruebas unitarias para un propósito completamente diferente.</span><span class="sxs-lookup"><span data-stu-id="aa005-139">In this iteration, we use unit tests for an entirely different purpose.</span></span> <span data-ttu-id="aa005-140">En esta iteración, usamos las pruebas unitarias como parte de una filosofía de diseño de la aplicación llama a *desarrollo controlado por pruebas*.</span><span class="sxs-lookup"><span data-stu-id="aa005-140">In this iteration, we use unit tests as part of an application design philosophy called *test-driven development*.</span></span> <span data-ttu-id="aa005-141">Al poner en práctica desarrollo controlado por pruebas, escriba pruebas en primer lugar y, a continuación, escribir código en las pruebas.</span><span class="sxs-lookup"><span data-stu-id="aa005-141">When you practice test-driven development, you write tests first and then write code against the tests.</span></span>

<span data-ttu-id="aa005-142">Más concretamente, al practicar desarrollo controlado por pruebas, hay tres pasos que se completan al crear código (rojo / verde/de refactorización):</span><span class="sxs-lookup"><span data-stu-id="aa005-142">More precisely, when practicing test-driven development, there are three steps that you complete when creating code (Red/ Green/Refactor):</span></span>

1. <span data-ttu-id="aa005-143">Escribir una prueba unitaria que se produce un error (rojo)</span><span class="sxs-lookup"><span data-stu-id="aa005-143">Write a unit test that fails (Red)</span></span>
2. <span data-ttu-id="aa005-144">Escribir código que pasa la prueba unitaria (verde)</span><span class="sxs-lookup"><span data-stu-id="aa005-144">Write code that passes the unit test (Green)</span></span>
3. <span data-ttu-id="aa005-145">Refactorizar el código (refactorizar)</span><span class="sxs-lookup"><span data-stu-id="aa005-145">Refactor your code (Refactor)</span></span>

<span data-ttu-id="aa005-146">En primer lugar, escribir la prueba unitaria.</span><span class="sxs-lookup"><span data-stu-id="aa005-146">First, you write the unit test.</span></span> <span data-ttu-id="aa005-147">La prueba unitaria debe expresar la intención para cómo espera que el código se comportan.</span><span class="sxs-lookup"><span data-stu-id="aa005-147">The unit test should express your intention for how you expect your code to behave.</span></span> <span data-ttu-id="aa005-148">Al crear la prueba unitaria en primer lugar, debe generar un error en la prueba unitaria.</span><span class="sxs-lookup"><span data-stu-id="aa005-148">When you first create the unit test, the unit test should fail.</span></span> <span data-ttu-id="aa005-149">La prueba debe generar un error porque todavía no ha escrito ningún código de aplicación que cumple la prueba.</span><span class="sxs-lookup"><span data-stu-id="aa005-149">The test should fail because you have not yet written any application code that satisfies the test.</span></span>

<span data-ttu-id="aa005-150">A continuación, escribir suficiente código en orden para que pase la prueba unitaria.</span><span class="sxs-lookup"><span data-stu-id="aa005-150">Next, you write just enough code in order for the unit test to pass.</span></span> <span data-ttu-id="aa005-151">El objetivo es escribir el código de la manera laziest, sloppiest y más rápido posible.</span><span class="sxs-lookup"><span data-stu-id="aa005-151">The goal is to write the code in the laziest, sloppiest and fastest possible way.</span></span> <span data-ttu-id="aa005-152">No debe perder tiempo a pensar acerca de la arquitectura de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="aa005-152">You should not waste time thinking about the architecture of your application.</span></span> <span data-ttu-id="aa005-153">En su lugar, debe centrarse en escribir la cantidad mínima de código necesario para satisfacer la intención expresada por la prueba unitaria.</span><span class="sxs-lookup"><span data-stu-id="aa005-153">Instead, you should focus on writing the minimal amount of code necessary to satisfy the intention expressed by the unit test.</span></span>

<span data-ttu-id="aa005-154">Por último, después de haber escrito suficiente código, puede retroceder y considerar la arquitectura general de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="aa005-154">Finally, after you have written enough code, you can step back and consider the overall architecture of your application.</span></span> <span data-ttu-id="aa005-155">En este paso, vuelva a escribir (refactorizar) patrones de su código aprovechando las ventajas de diseño de software, como el modelo de repositorio para que el código sea más fácil de mantener.</span><span class="sxs-lookup"><span data-stu-id="aa005-155">In this step, you rewrite (refactor) your code by taking advantage of software design patterns -- such as the repository pattern -- so that your code is more maintainable.</span></span> <span data-ttu-id="aa005-156">Sin miedo puede volver a escribir el código en este paso porque el código está cubierto por las pruebas unitarias.</span><span class="sxs-lookup"><span data-stu-id="aa005-156">You can fearlessly rewrite your code in this step because your code is covered by unit tests.</span></span>

<span data-ttu-id="aa005-157">Hay muchas ventajas resultantes de practicar el desarrollo controlado por pruebas.</span><span class="sxs-lookup"><span data-stu-id="aa005-157">There are many benefits that result from practicing test-driven development.</span></span> <span data-ttu-id="aa005-158">En primer lugar, controlado por pruebas de desarrollo le obliga a centrarse en el código que realmente debe escribirse.</span><span class="sxs-lookup"><span data-stu-id="aa005-158">First, test-driven development forces you to focus on code that actually needs to be written.</span></span> <span data-ttu-id="aa005-159">Dado que constantemente se centran en escribir solo suficiente código para pasar una prueba determinada, se impide adentra en las malas hierbas y escribir grandes cantidades de código que nunca va a utilizar.</span><span class="sxs-lookup"><span data-stu-id="aa005-159">Because you are constantly focused on just writing enough code to pass a particular test, you are prevented from wandering into the weeds and writing massive amounts of code that you will never use.</span></span>

<span data-ttu-id="aa005-160">En segundo lugar, una metodología de diseño "Pruebe primero" obliga a escribir código desde la perspectiva de cómo se utilizará el código.</span><span class="sxs-lookup"><span data-stu-id="aa005-160">Second, a "test first" design methodology forces you to write code from the perspective of how your code will be used.</span></span> <span data-ttu-id="aa005-161">En otras palabras, cuando practica el desarrollo controlado por pruebas, se escribe constantemente las pruebas desde una perspectiva del usuario.</span><span class="sxs-lookup"><span data-stu-id="aa005-161">In other words, when practicing test-driven development, you are constantly writing your tests from a user perspective.</span></span> <span data-ttu-id="aa005-162">Por lo tanto, puede dar lugar a desarrollo controlado por pruebas en las API más limpia y sea más comprensibles.</span><span class="sxs-lookup"><span data-stu-id="aa005-162">Therefore, test-driven development can result in cleaner and more understandable APIs.</span></span>

<span data-ttu-id="aa005-163">Por último, desarrollo controlado por pruebas obliga a escribir pruebas unitarias como parte del proceso de escribir una aplicación normal.</span><span class="sxs-lookup"><span data-stu-id="aa005-163">Finally, test-driven development forces you to write unit tests as part of the normal process of writing an application.</span></span> <span data-ttu-id="aa005-164">Cuando se acerca el plazo del proyecto, las pruebas normalmente es lo primero que sale de la ventana.</span><span class="sxs-lookup"><span data-stu-id="aa005-164">As a project deadline approaches, testing is typically the first thing that goes out the window.</span></span> <span data-ttu-id="aa005-165">Cuando practica el desarrollo controlado por pruebas, por otro lado, es más probable que sea realmente virtuoso sobre cómo escribir pruebas unitarias porque desarrollo controlado por pruebas realiza las pruebas unitarias central en el proceso de creación de una aplicación.</span><span class="sxs-lookup"><span data-stu-id="aa005-165">When practicing test-driven development, on the other hand, you are more likely to be virtuous about writing unit tests because test-driven development makes unit tests central to the process of building an application.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="aa005-166">Para más información sobre el desarrollo controlado por pruebas, le recomiendo que lea el libro de Michael Feathers **Working Effectively with Legacy Code**.</span><span class="sxs-lookup"><span data-stu-id="aa005-166">To learn more about test-driven development, I recommend that you read Michael Feathers book **Working Effectively with Legacy Code**.</span></span>


<span data-ttu-id="aa005-167">En esta iteración, agregamos una nueva característica a nuestra aplicación de Contact Manager.</span><span class="sxs-lookup"><span data-stu-id="aa005-167">In this iteration, we add a new feature to our Contact Manager application.</span></span> <span data-ttu-id="aa005-168">Se agrega compatibilidad con grupos de contactos.</span><span class="sxs-lookup"><span data-stu-id="aa005-168">We add support for Contact Groups.</span></span> <span data-ttu-id="aa005-169">Puede usar grupos de contacto para organizar los contactos en categorías, como Business y Friend.</span><span class="sxs-lookup"><span data-stu-id="aa005-169">You can use Contact Groups to organize your contacts into categories such as Business and Friend groups.</span></span>

<span data-ttu-id="aa005-170">Vamos a agregar esta nueva funcionalidad a nuestra aplicación siguiendo un proceso de desarrollo controlado por pruebas.</span><span class="sxs-lookup"><span data-stu-id="aa005-170">We'll add this new functionality to our application by following a process of test-driven development.</span></span> <span data-ttu-id="aa005-171">Vamos a escribir las pruebas unitarias en primer lugar y escribiremos todo nuestro código frente a estas pruebas.</span><span class="sxs-lookup"><span data-stu-id="aa005-171">We'll write our unit tests first and we'll write all of our code against these tests.</span></span>

## <a name="what-gets-tested"></a><span data-ttu-id="aa005-172">¿Qué Obtiene probado</span><span class="sxs-lookup"><span data-stu-id="aa005-172">What Gets Tested</span></span>

<span data-ttu-id="aa005-173">Como se explicó en la iteración anterior, normalmente no escribir pruebas unitarias para la lógica de acceso a datos o ver lógica.</span><span class="sxs-lookup"><span data-stu-id="aa005-173">As we discussed in the previous iteration, you typically do not write unit tests for data access logic or view logic.</span></span> <span data-ttu-id="aa005-174">Cuando no las pruebas unitarias de t escritura lógica del acceso a datos porque el acceso a una base de datos es una operación relativamente lenta.</span><span class="sxs-lookup"><span data-stu-id="aa005-174">You don t write unit tests for data access logic because accessing a database is a relatively slow operation.</span></span> <span data-ttu-id="aa005-175">Cuando no las pruebas unitarias de t escritura para la lógica de la vista porque el acceso a una vista requiere poner en marcha un servidor web que es una operación relativamente lenta.</span><span class="sxs-lookup"><span data-stu-id="aa005-175">You don t write unit tests for view logic because accessing a view requires spinning up a web server which is a relatively slow operation.</span></span> <span data-ttu-id="aa005-176">T no debe escribir una prueba unitaria a menos que la prueba se puede ejecutar una y otra vez muy rápida</span><span class="sxs-lookup"><span data-stu-id="aa005-176">You shouldn t write a unit test unless the test can be executed over and over again very fast</span></span>

<span data-ttu-id="aa005-177">Porque el desarrollo controlado por pruebas está controlado por pruebas unitarias, inicialmente nos centramos en escribir el controlador y la lógica empresarial.</span><span class="sxs-lookup"><span data-stu-id="aa005-177">Because test-driven development is driven by unit tests, we focus initially on writing controller and business logic.</span></span> <span data-ttu-id="aa005-178">Evite la tocar la base de datos o vistas.</span><span class="sxs-lookup"><span data-stu-id="aa005-178">We avoid touching the database or views.</span></span> <span data-ttu-id="aa005-179">Hemos ganado t modificar la base de datos o crear nuestras vistas hasta el final de este tutorial.</span><span class="sxs-lookup"><span data-stu-id="aa005-179">We won t modify the database or create our views until the very end of this tutorial.</span></span> <span data-ttu-id="aa005-180">Comenzaremos con lo que se pueden probar.</span><span class="sxs-lookup"><span data-stu-id="aa005-180">We start with what can be tested.</span></span>

## <a name="creating-user-stories"></a><span data-ttu-id="aa005-181">Crear casos de usuario</span><span class="sxs-lookup"><span data-stu-id="aa005-181">Creating User Stories</span></span>

<span data-ttu-id="aa005-182">Cuando practica el desarrollo controlado por pruebas, siempre se inicia mediante la escritura de una prueba.</span><span class="sxs-lookup"><span data-stu-id="aa005-182">When practicing test-driven development, you always start by writing a test.</span></span> <span data-ttu-id="aa005-183">Inmediatamente, esto plantea la pregunta: ¿Cómo se decide qué prueba para escribir primero?</span><span class="sxs-lookup"><span data-stu-id="aa005-183">This immediately raises the question: How do you decide what test to write first?</span></span> <span data-ttu-id="aa005-184">Para responder esta pregunta, debe escribir un conjunto de [ **casos de usuario**](http://en.wikipedia.org/wiki/User_stories).</span><span class="sxs-lookup"><span data-stu-id="aa005-184">To answer this question, you should write a set of [**user stories**](http://en.wikipedia.org/wiki/User_stories).</span></span>

<span data-ttu-id="aa005-185">Un caso de usuario es una breve descripción de (normalmente una frase) de un requisito de software.</span><span class="sxs-lookup"><span data-stu-id="aa005-185">A user story is a very brief (usually one sentence) description of a software requirement.</span></span> <span data-ttu-id="aa005-186">Debe ser una descripción técnica de un requisito de escribir desde la perspectiva del usuario.</span><span class="sxs-lookup"><span data-stu-id="aa005-186">It should be a non-technical description of a requirement written from a user perspective.</span></span>

<span data-ttu-id="aa005-187">Este es el conjunto de casos de usuario que se describen las características necesarias para la nueva funcionalidad de grupo de contactos s:</span><span class="sxs-lookup"><span data-stu-id="aa005-187">Here s the set of user stories that describe the features required by the new Contact Group functionality:</span></span>

1. <span data-ttu-id="aa005-188">Usuario puede ver una lista de grupos de contactos.</span><span class="sxs-lookup"><span data-stu-id="aa005-188">User can view a list of contact groups.</span></span>
2. <span data-ttu-id="aa005-189">Usuario puede crear un nuevo grupo de contactos.</span><span class="sxs-lookup"><span data-stu-id="aa005-189">User can create a new contact group.</span></span>
3. <span data-ttu-id="aa005-190">Usuario puede eliminar un grupo de contactos existente.</span><span class="sxs-lookup"><span data-stu-id="aa005-190">User can delete an existing contact group.</span></span>
4. <span data-ttu-id="aa005-191">Usuario puede seleccionar un grupo de contactos al crear un nuevo contacto.</span><span class="sxs-lookup"><span data-stu-id="aa005-191">User can select a contact group when creating a new contact.</span></span>
5. <span data-ttu-id="aa005-192">Usuario puede seleccionar un grupo de contactos al editar un contacto ya existente.</span><span class="sxs-lookup"><span data-stu-id="aa005-192">User can select a contact group when editing an existing contact.</span></span>
6. <span data-ttu-id="aa005-193">Se muestra una lista de grupos de contactos en la vista de índice.</span><span class="sxs-lookup"><span data-stu-id="aa005-193">A list of contact groups is displayed in the Index view.</span></span>
7. <span data-ttu-id="aa005-194">Cuando un usuario hace clic en un grupo de contactos, se muestra una lista de contactos coincidentes.</span><span class="sxs-lookup"><span data-stu-id="aa005-194">When a user clicks a contact group, a list of matching contacts is displayed.</span></span>

<span data-ttu-id="aa005-195">Tenga en cuenta que esta lista de casos de usuario es perfectamente comprensible por un cliente.</span><span class="sxs-lookup"><span data-stu-id="aa005-195">Notice that this list of user stories is completely understandable by a customer.</span></span> <span data-ttu-id="aa005-196">No hay ninguna mención de detalles de implementación técnica.</span><span class="sxs-lookup"><span data-stu-id="aa005-196">There is no mention of technical implementation details.</span></span>

<span data-ttu-id="aa005-197">Mientras que en el proceso de compilar la aplicación, el conjunto de casos de usuario puede ser más refinado.</span><span class="sxs-lookup"><span data-stu-id="aa005-197">While in the process of building your application, the set of user stories can become more refined.</span></span> <span data-ttu-id="aa005-198">Un caso de usuario que puede dividir en varios casos (requisitos).</span><span class="sxs-lookup"><span data-stu-id="aa005-198">You might break a user story into multiple stories (requirements).</span></span> <span data-ttu-id="aa005-199">Por ejemplo, podría decidir que crear un nuevo grupo de contactos debe implicar la validación.</span><span class="sxs-lookup"><span data-stu-id="aa005-199">For example, you might decide that creating a new contact group should involve validation.</span></span> <span data-ttu-id="aa005-200">Envío de un grupo de contactos sin nombre debe devolver un error de validación.</span><span class="sxs-lookup"><span data-stu-id="aa005-200">Submitting a contact group without a name should return a validation error.</span></span>

<span data-ttu-id="aa005-201">Después de crear una lista de los casos de usuario, está listo para escribir las primeras pruebas unitarias.</span><span class="sxs-lookup"><span data-stu-id="aa005-201">After you create a list of user stories, you are ready to write your first unit test.</span></span> <span data-ttu-id="aa005-202">Comenzaremos por crear una prueba unitaria para ver la lista de grupos de contactos.</span><span class="sxs-lookup"><span data-stu-id="aa005-202">We'll start by creating a unit test for viewing the list of contact groups.</span></span>

## <a name="listing-contact-groups"></a><span data-ttu-id="aa005-203">Enumerar grupos de contactos</span><span class="sxs-lookup"><span data-stu-id="aa005-203">Listing Contact Groups</span></span>

<span data-ttu-id="aa005-204">Nuestro primer caso de usuario es que un usuario debe ser capaz de ver una lista de grupos de contactos.</span><span class="sxs-lookup"><span data-stu-id="aa005-204">Our first user story is that a user should be able to view a list of contact groups.</span></span> <span data-ttu-id="aa005-205">Es necesario expresar esta historia con una prueba.</span><span class="sxs-lookup"><span data-stu-id="aa005-205">We need to express this story with a test.</span></span>

<span data-ttu-id="aa005-206">Crear una nueva prueba unitaria con el botón secundario de la carpeta controladores en el proyecto ContactManager.Tests, seleccionar **Add, nueva prueba**y seleccionando la **de prueba unitaria** plantilla (consulte la figura 1).</span><span class="sxs-lookup"><span data-stu-id="aa005-206">Create a new unit test by right-clicking the Controllers folder in the ContactManager.Tests project, selecting **Add, New Test**, and selecting the **Unit Test** template (see Figure 1).</span></span> <span data-ttu-id="aa005-207">Nombre de la nueva unidad GroupControllerTest.cs de prueba y haga clic en el **Aceptar** botón.</span><span class="sxs-lookup"><span data-stu-id="aa005-207">Name the new unit test GroupControllerTest.cs and click the **OK** button.</span></span>


<span data-ttu-id="aa005-208">[![Adición de la prueba unitaria GroupControllerTest](iteration-6-use-test-driven-development-cs/_static/image1.jpg)](iteration-6-use-test-driven-development-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="aa005-208">[![Adding the GroupControllerTest unit test](iteration-6-use-test-driven-development-cs/_static/image1.jpg)](iteration-6-use-test-driven-development-cs/_static/image1.png)</span></span>

<span data-ttu-id="aa005-209">**Figura 01**: Adición de la prueba unitaria GroupControllerTest ([haga clic aquí para ver imagen en tamaño completo](iteration-6-use-test-driven-development-cs/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="aa005-209">**Figure 01**: Adding the GroupControllerTest unit test([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image2.png))</span></span>


<span data-ttu-id="aa005-210">La primera prueba unitaria se encuentra en el listado 1.</span><span class="sxs-lookup"><span data-stu-id="aa005-210">Our first unit test is contained in Listing 1.</span></span> <span data-ttu-id="aa005-211">Esta prueba comprueba que el método Index() del controlador grupo devuelve un conjunto de grupos.</span><span class="sxs-lookup"><span data-stu-id="aa005-211">This test verifies that the Index() method of the Group controller returns a set of Groups.</span></span> <span data-ttu-id="aa005-212">La prueba comprueba que se devuelve en la vista una colección de grupos de datos.</span><span class="sxs-lookup"><span data-stu-id="aa005-212">The test verifies that a collection of Groups is returned in view data.</span></span>

<span data-ttu-id="aa005-213">**Listado 1 - Controllers\GroupControllerTest.cs**</span><span class="sxs-lookup"><span data-stu-id="aa005-213">**Listing 1 - Controllers\GroupControllerTest.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample1.cs)]

<span data-ttu-id="aa005-214">Cuando se escribe primero el código en el listado 1 en Visual Studio, obtendrá una gran cantidad de líneas onduladas rojas.</span><span class="sxs-lookup"><span data-stu-id="aa005-214">When you first type the code in Listing 1 in Visual Studio, you'll get a lot of red squiggly lines.</span></span> <span data-ttu-id="aa005-215">No hemos creado las clases GroupController o grupo.</span><span class="sxs-lookup"><span data-stu-id="aa005-215">We have not created the GroupController or Group classes.</span></span>

<span data-ttu-id="aa005-216">En este momento, se puede generar incluso t nuestra aplicación, por lo que se puede ejecutar la primera prueba unitaria.</span><span class="sxs-lookup"><span data-stu-id="aa005-216">At this point, we can t even build our application so we can t execute our first unit test.</span></span> <span data-ttu-id="aa005-217">S buena.</span><span class="sxs-lookup"><span data-stu-id="aa005-217">That s good.</span></span> <span data-ttu-id="aa005-218">Que se considera una prueba fallida.</span><span class="sxs-lookup"><span data-stu-id="aa005-218">That counts as a failing test.</span></span> <span data-ttu-id="aa005-219">Por lo tanto, ahora tenemos permiso para empezar a escribir código de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="aa005-219">Therefore, we now have permission to start writing application code.</span></span> <span data-ttu-id="aa005-220">Es necesario escribir código suficiente para ejecutar la prueba.</span><span class="sxs-lookup"><span data-stu-id="aa005-220">We need to write enough code to execute our test.</span></span>

<span data-ttu-id="aa005-221">La clase de controlador de grupo en el listado 2 contiene el mínimo de código necesario para pasar la prueba unitaria.</span><span class="sxs-lookup"><span data-stu-id="aa005-221">The Group controller class in Listing 2 contains the bare minimum of code required to pass the unit test.</span></span> <span data-ttu-id="aa005-222">La acción de Index() devuelve una lista codificada de forma estática de grupos (la clase del grupo se define en el listado 3).</span><span class="sxs-lookup"><span data-stu-id="aa005-222">The Index() action returns a statically coded list of Groups (the Group class is defined in Listing 3).</span></span>

<span data-ttu-id="aa005-223">**Listado 2 - Controllers\GroupController.cs**</span><span class="sxs-lookup"><span data-stu-id="aa005-223">**Listing 2 - Controllers\GroupController.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample2.cs)]

<span data-ttu-id="aa005-224">**Listado 3 - Models\Group.cs**</span><span class="sxs-lookup"><span data-stu-id="aa005-224">**Listing 3 - Models\Group.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample3.cs)]

<span data-ttu-id="aa005-225">Una vez que se agregue las clases GroupController y grupo a nuestro proyecto, nuestra primera prueba unitaria se completa correctamente (consulte la figura 2).</span><span class="sxs-lookup"><span data-stu-id="aa005-225">After we add the GroupController and Group classes to our project, our first unit test completes successfully (see Figure 2).</span></span> <span data-ttu-id="aa005-226">Lo que hemos hecho el trabajo mínimo necesario para pasar la prueba.</span><span class="sxs-lookup"><span data-stu-id="aa005-226">We have done the minimum work required to pass the test.</span></span> <span data-ttu-id="aa005-227">Es el momento para celebrar.</span><span class="sxs-lookup"><span data-stu-id="aa005-227">It is time to celebrate.</span></span>


<span data-ttu-id="aa005-228">[![¡Success!](iteration-6-use-test-driven-development-cs/_static/image2.jpg)](iteration-6-use-test-driven-development-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="aa005-228">[![Success!](iteration-6-use-test-driven-development-cs/_static/image2.jpg)](iteration-6-use-test-driven-development-cs/_static/image3.png)</span></span>

<span data-ttu-id="aa005-229">**Figura 02**: ¡Success! ([Haga clic aquí para ver imagen en tamaño completo](iteration-6-use-test-driven-development-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="aa005-229">**Figure 02**: Success!([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image4.png))</span></span>


## <a name="creating-contact-groups"></a><span data-ttu-id="aa005-230">Creación de grupos de contactos</span><span class="sxs-lookup"><span data-stu-id="aa005-230">Creating Contact Groups</span></span>

<span data-ttu-id="aa005-231">Ahora podemos pasar al segundo caso de usuario.</span><span class="sxs-lookup"><span data-stu-id="aa005-231">Now we can move on to the second user story.</span></span> <span data-ttu-id="aa005-232">Es necesario que pueda crear nuevos grupos de contactos.</span><span class="sxs-lookup"><span data-stu-id="aa005-232">We need to be able to create new contact groups.</span></span> <span data-ttu-id="aa005-233">Es necesario expresar la intención con una prueba.</span><span class="sxs-lookup"><span data-stu-id="aa005-233">We need to express this intention with a test.</span></span>

<span data-ttu-id="aa005-234">La prueba en el listado 4 comprueba que el método con un nuevo grupo agrega el grupo a la lista de grupos devueltos por el método Index() de Create() la llamada.</span><span class="sxs-lookup"><span data-stu-id="aa005-234">The test in Listing 4 verifies that calling the Create() method with a new Group adds the Group to the list of Groups returned by the Index() method.</span></span> <span data-ttu-id="aa005-235">En otras palabras, si creo un nuevo grupo, a continuación, debería poder obtener el nuevo grupo de la lista de grupos devueltos por el método Index().</span><span class="sxs-lookup"><span data-stu-id="aa005-235">In other words, if I create a new group then I should be able to get the new Group back from the list of Groups returned by the Index() method.</span></span>

<span data-ttu-id="aa005-236">**Listado 4 - Controllers\GroupControllerTest.cs**</span><span class="sxs-lookup"><span data-stu-id="aa005-236">**Listing 4 - Controllers\GroupControllerTest.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample4.cs)]

<span data-ttu-id="aa005-237">El método Create() con un nuevo grupo de contacto del controlador de grupo llama a la prueba en el listado 4.</span><span class="sxs-lookup"><span data-stu-id="aa005-237">The test in Listing 4 calls the Group controller Create() method with a new contact Group.</span></span> <span data-ttu-id="aa005-238">A continuación, la prueba comprueba que una llamada del controlador de grupo Index() método devuelve el nuevo grupo en los datos de vista.</span><span class="sxs-lookup"><span data-stu-id="aa005-238">Next, the test verifies that calling the Group controller Index() method returns the new Group in view data.</span></span>

<span data-ttu-id="aa005-239">El controlador de grupo modificado en el listado 5 contiene el mínimo de los cambios necesarios para pasar la nueva prueba.</span><span class="sxs-lookup"><span data-stu-id="aa005-239">The modified Group controller in Listing 5 contains the bare minimum of changes required to pass the new test.</span></span>

<span data-ttu-id="aa005-240">**Listado 5 - Controllers\GroupController.cs**</span><span class="sxs-lookup"><span data-stu-id="aa005-240">**Listing 5 - Controllers\GroupController.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample5.cs)]

## <a name="the-group-controller-in-listing-5-has-a-new-create-action-this-action-adds-a-group-to-a-collection-of-groups-notice-that-the-index-action-has-been-modified-to-return-the-contents-of-the-collection-of-groups"></a><span data-ttu-id="aa005-241">El controlador de grupo en el listado 5 tiene una nueva acción Create().</span><span class="sxs-lookup"><span data-stu-id="aa005-241">The Group controller in Listing 5 has a new Create() action.</span></span> <span data-ttu-id="aa005-242">Esta acción agrega un grupo a una colección de grupos.</span><span class="sxs-lookup"><span data-stu-id="aa005-242">This action adds a Group to a collection of Groups.</span></span> <span data-ttu-id="aa005-243">Tenga en cuenta que se ha modificado la acción de Index() para devolver el contenido de la colección de grupos.</span><span class="sxs-lookup"><span data-stu-id="aa005-243">Notice that the Index() action has been modified to return the contents of the collection of Groups.</span></span>

<span data-ttu-id="aa005-244">Una vez más, hemos realizado la cantidad mínima de trabajo que se le pida que pase la prueba unitaria.</span><span class="sxs-lookup"><span data-stu-id="aa005-244">Once again, we have performed the bare minimum amount of work required to pass the unit test.</span></span> <span data-ttu-id="aa005-245">Después de realizar estos cambios en el controlador de grupo, todos de nuestra unidad superan las pruebas.</span><span class="sxs-lookup"><span data-stu-id="aa005-245">After we make these changes to the Group controller, all of our unit tests pass.</span></span>

## <a name="adding-validation"></a><span data-ttu-id="aa005-246">Agregar una validación</span><span class="sxs-lookup"><span data-stu-id="aa005-246">Adding Validation</span></span>

<span data-ttu-id="aa005-247">Este requisito no se ha indicado explícitamente en el caso de usuario.</span><span class="sxs-lookup"><span data-stu-id="aa005-247">This requirement was not stated explicitly in the user story.</span></span> <span data-ttu-id="aa005-248">Sin embargo, es razonable exigir que un grupo tiene un nombre.</span><span class="sxs-lookup"><span data-stu-id="aa005-248">However, it is reasonable to require that a Group have a name.</span></span> <span data-ttu-id="aa005-249">En caso contrario, el organizar los contactos en grupos no sería muy útil.</span><span class="sxs-lookup"><span data-stu-id="aa005-249">Otherwise, organizing contacts into Groups would not be very useful.</span></span>

<span data-ttu-id="aa005-250">Listado 6 contiene una nueva prueba que expresa la intención.</span><span class="sxs-lookup"><span data-stu-id="aa005-250">Listing 6 contains a new test that expresses this intention.</span></span> <span data-ttu-id="aa005-251">Esta prueba comprueba se intenta crear un grupo sin proporcionar un nombre da como resultado un mensaje de error de validación en el estado del modelo.</span><span class="sxs-lookup"><span data-stu-id="aa005-251">This test verifies that attempting to create a Group without supplying a name results in a validation error message in model state.</span></span>

<span data-ttu-id="aa005-252">**Listado 6 - Controllers\GroupControllerTest.cs**</span><span class="sxs-lookup"><span data-stu-id="aa005-252">**Listing 6 - Controllers\GroupControllerTest.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample6.cs)]

<span data-ttu-id="aa005-253">Con el fin de satisfacer esta prueba, necesitamos agregar una propiedad de nombre a nuestra clase de grupo (consulte el listado 7).</span><span class="sxs-lookup"><span data-stu-id="aa005-253">In order to satisfy this test, we need to add a Name property to our Group class (see Listing 7).</span></span> <span data-ttu-id="aa005-254">Además, tenemos que agregar una pequeña cantidad de lógica de validación a nuestro controlador grupo s Create() acción (consulte el listado 8).</span><span class="sxs-lookup"><span data-stu-id="aa005-254">Furthermore, we need to add a tiny bit of validation logic to our Group controller s Create() action (see Listing 8).</span></span>

<span data-ttu-id="aa005-255">**Listado 7 - Models\Group.cs**</span><span class="sxs-lookup"><span data-stu-id="aa005-255">**Listing 7 - Models\Group.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample7.cs)]

<span data-ttu-id="aa005-256">**Listado 8 - Controllers\GroupController.cs**</span><span class="sxs-lookup"><span data-stu-id="aa005-256">**Listing 8 - Controllers\GroupController.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample8.cs)]

<span data-ttu-id="aa005-257">Tenga en cuenta que el controlador de grupo Create() acción ahora contiene la lógica de validación y base de datos.</span><span class="sxs-lookup"><span data-stu-id="aa005-257">Notice that the Group controller Create() action now contains both validation and database logic.</span></span> <span data-ttu-id="aa005-258">Actualmente, la base de datos usada por el controlador del grupo consta de nada más que una colección en memoria.</span><span class="sxs-lookup"><span data-stu-id="aa005-258">Currently, the database used by the Group controller consists of nothing more than an in-memory collection.</span></span>

## <a name="time-to-refactor"></a><span data-ttu-id="aa005-259">Tiempo de refactorización</span><span class="sxs-lookup"><span data-stu-id="aa005-259">Time to Refactor</span></span>

<span data-ttu-id="aa005-260">El tercer paso en rojo/verde/de refactorización es la parte de refactorización.</span><span class="sxs-lookup"><span data-stu-id="aa005-260">The third step in Red/Green/Refactor is the Refactor part.</span></span> <span data-ttu-id="aa005-261">En este momento, es necesario el paso de nuestro código y tener en cuenta cómo podemos refactorizar la aplicación para mejorar su diseño.</span><span class="sxs-lookup"><span data-stu-id="aa005-261">At this point, we need to step back from our code and consider how we can refactor our application to improve its design.</span></span> <span data-ttu-id="aa005-262">La fase de Refactor es la fase en la que pensamos difíciles sobre la mejor manera de implementar los patrones y principios de diseño de software.</span><span class="sxs-lookup"><span data-stu-id="aa005-262">The Refactor stage is the stage at which we think hard about the best way of implementing software design principles and patterns.</span></span>

<span data-ttu-id="aa005-263">Estamos libres de modificar el código de cualquier forma que elegimos para mejorar el diseño del código.</span><span class="sxs-lookup"><span data-stu-id="aa005-263">We are free to modify our code in any way that we choose to improve the design of the code.</span></span> <span data-ttu-id="aa005-264">Tenemos una red de seguridad de las pruebas unitarias que nos impiden romper la funcionalidad existente.</span><span class="sxs-lookup"><span data-stu-id="aa005-264">We have a safety net of unit tests that prevent us from breaking existing functionality.</span></span>

<span data-ttu-id="aa005-265">En este momento, nuestro controlador de grupo es un lío desde la perspectiva del buen diseño de software.</span><span class="sxs-lookup"><span data-stu-id="aa005-265">Right now, our Group controller is a mess from the perspective of good software design.</span></span> <span data-ttu-id="aa005-266">El controlador de grupo contiene un caos complicado de validación y el código de acceso de datos.</span><span class="sxs-lookup"><span data-stu-id="aa005-266">The Group controller contains a tangled mess of validation and data access code.</span></span> <span data-ttu-id="aa005-267">Para evitar que infringe el principio de responsabilidad única, es necesario separar estas preocupaciones en clases diferentes.</span><span class="sxs-lookup"><span data-stu-id="aa005-267">To avoid violating the Single Responsibility Principle, we need to separate these concerns into different classes.</span></span>

<span data-ttu-id="aa005-268">Nuestra clase de controlador refactorizado grupo está contenida en el listado 9.</span><span class="sxs-lookup"><span data-stu-id="aa005-268">Our refactored Group controller class is contained in Listing 9.</span></span> <span data-ttu-id="aa005-269">El controlador se ha modificado para utilizar la capa de servicio ContactManager.</span><span class="sxs-lookup"><span data-stu-id="aa005-269">The controller has been modified to use the ContactManager service layer.</span></span> <span data-ttu-id="aa005-270">Se trata de la misma capa de servicio que se usa con el controlador de contacto.</span><span class="sxs-lookup"><span data-stu-id="aa005-270">This is the same service layer that we use with the Contact controller.</span></span>

<span data-ttu-id="aa005-271">Listado 10 contiene los nuevos métodos que se agrega a la capa de servicio ContactManager para admitir la validación, enumerar y crear grupos.</span><span class="sxs-lookup"><span data-stu-id="aa005-271">Listing 10 contains the new methods added to the ContactManager service layer to support validating, listing, and creating groups.</span></span> <span data-ttu-id="aa005-272">La interfaz IContactManagerService se actualizó para incluir los nuevos métodos.</span><span class="sxs-lookup"><span data-stu-id="aa005-272">The IContactManagerService interface was updated to include the new methods.</span></span>

<span data-ttu-id="aa005-273">Listado 11 contiene una nueva clase FakeContactManagerRepository que implementa la interfaz IContactManagerRepository.</span><span class="sxs-lookup"><span data-stu-id="aa005-273">Listing 11 contains a new FakeContactManagerRepository class that implements the IContactManagerRepository interface.</span></span> <span data-ttu-id="aa005-274">A diferencia de la clase EntityContactManagerRepository que también implementa la interfaz IContactManagerRepository, nuestra nueva clase FakeContactManagerRepository no se comunica con la base de datos.</span><span class="sxs-lookup"><span data-stu-id="aa005-274">Unlike the EntityContactManagerRepository class that also implements the IContactManagerRepository interface, our new FakeContactManagerRepository class does not communicate with the database.</span></span> <span data-ttu-id="aa005-275">La clase FakeContactManagerRepository usa una colección en memoria como un proxy para la base de datos.</span><span class="sxs-lookup"><span data-stu-id="aa005-275">The FakeContactManagerRepository class uses an in-memory collection as a proxy for the database.</span></span> <span data-ttu-id="aa005-276">Vamos a usar esta clase en nuestras pruebas de unidad como una capa de repositorio falsa.</span><span class="sxs-lookup"><span data-stu-id="aa005-276">We'll use this class in our unit tests as a fake repository layer.</span></span>

<span data-ttu-id="aa005-277">**Listado 9 - Controllers\GroupController.cs**</span><span class="sxs-lookup"><span data-stu-id="aa005-277">**Listing 9 - Controllers\GroupController.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample9.cs)]

<span data-ttu-id="aa005-278">**Listing 10 - Controllers\ContactManagerService.cs**</span><span class="sxs-lookup"><span data-stu-id="aa005-278">**Listing 10 - Controllers\ContactManagerService.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample10.cs)]

<span data-ttu-id="aa005-279">**Listing 11 - Controllers\FakeContactManagerRepository.cs**</span><span class="sxs-lookup"><span data-stu-id="aa005-279">**Listing 11 - Controllers\FakeContactManagerRepository.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample11.cs)]

<span data-ttu-id="aa005-280">Modificar el IContactManagerRepository interfaz requiere utilizar para implementar los métodos CreateGroup() y ListGroups() en la clase EntityContactManagerRepository.</span><span class="sxs-lookup"><span data-stu-id="aa005-280">Modifying the IContactManagerRepository interface requires use to implement the CreateGroup() and ListGroups() methods in the EntityContactManagerRepository class.</span></span> <span data-ttu-id="aa005-281">La forma laziest y rápida de hacerlo consiste en agregar los métodos auxiliares que tienen un aspecto similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="aa005-281">The laziest and fastest way to do this is to add stub methods that look like this:</span></span>   

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample12.cs)]


<span data-ttu-id="aa005-282">Por último, estos cambios en el diseño de nuestra aplicación nos obligan a realizar algunas modificaciones en nuestras pruebas unitarias.</span><span class="sxs-lookup"><span data-stu-id="aa005-282">Finally, these changes to the design of our application require us to make some modifications to our unit tests.</span></span> <span data-ttu-id="aa005-283">Ahora es necesario usar el FakeContactManagerRepository al realizar las pruebas unitarias.</span><span class="sxs-lookup"><span data-stu-id="aa005-283">We now need to use the FakeContactManagerRepository when performing the unit tests.</span></span> <span data-ttu-id="aa005-284">La clase GroupControllerTest actualizada se encuentra en el listado 12.</span><span class="sxs-lookup"><span data-stu-id="aa005-284">The updated GroupControllerTest class is contained in Listing 12.</span></span>

<span data-ttu-id="aa005-285">**Listado 12 - Controllers\GroupControllerTest.cs**</span><span class="sxs-lookup"><span data-stu-id="aa005-285">**Listing 12 - Controllers\GroupControllerTest.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample13.cs)]

<span data-ttu-id="aa005-286">Después de realizar todos estos cambios, una vez más, todas nuestras pruebas unitarias superadas.</span><span class="sxs-lookup"><span data-stu-id="aa005-286">After we make all of these changes, once again, all of our unit tests pass.</span></span> <span data-ttu-id="aa005-287">Hemos completado todo el ciclo de rojo/verde/de refactorización.</span><span class="sxs-lookup"><span data-stu-id="aa005-287">We have completed the entire cycle of Red/Green/Refactor.</span></span> <span data-ttu-id="aa005-288">Hemos implementado la primera casos de usuario de dos.</span><span class="sxs-lookup"><span data-stu-id="aa005-288">We have implemented the first two user stories.</span></span> <span data-ttu-id="aa005-289">Ahora tenemos compatibilidad con pruebas unitarias para los requisitos que se expresa en los casos de usuario.</span><span class="sxs-lookup"><span data-stu-id="aa005-289">We now have supporting unit tests for the requirements expressed in the user stories.</span></span> <span data-ttu-id="aa005-290">Implementar el resto de los casos de usuario consiste en repetir el mismo ciclo de rojo/verde/de refactorización.</span><span class="sxs-lookup"><span data-stu-id="aa005-290">Implementing the remainder of the user stories involves repeating the same cycle of Red/Green/Refactor.</span></span>

## <a name="modifying-our-database"></a><span data-ttu-id="aa005-291">Modificación de la base de datos</span><span class="sxs-lookup"><span data-stu-id="aa005-291">Modifying our Database</span></span>

<span data-ttu-id="aa005-292">Por desgracia, aunque nos hemos cumple todos los requisitos expresados por nuestras pruebas unitarias, nuestro trabajo no se realiza.</span><span class="sxs-lookup"><span data-stu-id="aa005-292">Unfortunately, even though we have satisfied all of the requirements expressed by our unit tests, our work is not done.</span></span> <span data-ttu-id="aa005-293">Necesitamos modificar nuestra base de datos.</span><span class="sxs-lookup"><span data-stu-id="aa005-293">We still need to modify our database.</span></span>

<span data-ttu-id="aa005-294">Es necesario crear una nueva tabla de base de datos del grupo.</span><span class="sxs-lookup"><span data-stu-id="aa005-294">We need to create a new Group database table.</span></span> <span data-ttu-id="aa005-295">Siga estos pasos:</span><span class="sxs-lookup"><span data-stu-id="aa005-295">Follow these steps:</span></span>

1. <span data-ttu-id="aa005-296">En la ventana Explorador de servidores, haga clic en la carpeta Tables y seleccione la opción de menú **agregar nueva tabla**.</span><span class="sxs-lookup"><span data-stu-id="aa005-296">In the Server Explorer window, right-click the Tables folder and select the menu option **Add New Table**.</span></span>
2. <span data-ttu-id="aa005-297">Escriba las dos columnas que se describe a continuación, en el Diseñador de tablas.</span><span class="sxs-lookup"><span data-stu-id="aa005-297">Enter the two columns described below in the Table Designer.</span></span>
3. <span data-ttu-id="aa005-298">Marque la columna de identificador como una clave principal y una columna de identidad.</span><span class="sxs-lookup"><span data-stu-id="aa005-298">Mark the Id column as a primary key and Identity column.</span></span>
4. <span data-ttu-id="aa005-299">Guarde la nueva tabla con los nombres de grupos, haga clic en el icono del disquete.</span><span class="sxs-lookup"><span data-stu-id="aa005-299">Save the new table with the name Groups by clicking the icon of the floppy.</span></span>

<a id="0.11_table01"></a>


| <span data-ttu-id="aa005-300">**Nombre de columna**</span><span class="sxs-lookup"><span data-stu-id="aa005-300">**Column Name**</span></span> | <span data-ttu-id="aa005-301">**Tipo de datos**</span><span class="sxs-lookup"><span data-stu-id="aa005-301">**Data Type**</span></span> | <span data-ttu-id="aa005-302">**Permitir valores null**</span><span class="sxs-lookup"><span data-stu-id="aa005-302">**Allow Nulls**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="aa005-303">Id.</span><span class="sxs-lookup"><span data-stu-id="aa005-303">Id</span></span> | <span data-ttu-id="aa005-304">int</span><span class="sxs-lookup"><span data-stu-id="aa005-304">int</span></span> | <span data-ttu-id="aa005-305">False</span><span class="sxs-lookup"><span data-stu-id="aa005-305">False</span></span> |
| <span data-ttu-id="aa005-306">nombre</span><span class="sxs-lookup"><span data-stu-id="aa005-306">Name</span></span> | <span data-ttu-id="aa005-307">nvarchar(50)</span><span class="sxs-lookup"><span data-stu-id="aa005-307">nvarchar(50)</span></span> | <span data-ttu-id="aa005-308">False</span><span class="sxs-lookup"><span data-stu-id="aa005-308">False</span></span> |


<span data-ttu-id="aa005-309">A continuación, se debe eliminar todos los datos de la tabla de contactos (en caso contrario, hemos ganado poder crear una relación entre las tablas de contactos y grupos).</span><span class="sxs-lookup"><span data-stu-id="aa005-309">Next, we need to delete all of the data from the Contacts table (otherwise, we won t be able to create a relationship between the Contacts and Groups tables).</span></span> <span data-ttu-id="aa005-310">Siga estos pasos:</span><span class="sxs-lookup"><span data-stu-id="aa005-310">Follow these steps:</span></span>

1. <span data-ttu-id="aa005-311">Haga clic en la tabla Contacts y seleccione la opción de menú **mostrar datos de tabla**.</span><span class="sxs-lookup"><span data-stu-id="aa005-311">Right-click the Contacts table and select the menu option **Show Table Data**.</span></span>
2. <span data-ttu-id="aa005-312">Eliminar todas las filas.</span><span class="sxs-lookup"><span data-stu-id="aa005-312">Delete all of the rows.</span></span>

<span data-ttu-id="aa005-313">A continuación, se debe definir una relación entre la tabla de base de datos de grupos y la tabla de base de datos de contactos existente.</span><span class="sxs-lookup"><span data-stu-id="aa005-313">Next, we need to define a relationship between the Groups database table and the existing Contacts database table.</span></span> <span data-ttu-id="aa005-314">Siga estos pasos:</span><span class="sxs-lookup"><span data-stu-id="aa005-314">Follow these steps:</span></span>

1. <span data-ttu-id="aa005-315">Haga doble clic en la tabla de contactos en la ventana Explorador de servidores para abrir el Diseñador de tablas.</span><span class="sxs-lookup"><span data-stu-id="aa005-315">Double-click the Contacts table in the Server Explorer window to open the Table Designer.</span></span>
2. <span data-ttu-id="aa005-316">Agregue una nueva columna de enteros a la tabla Contactos denominada GroupId.</span><span class="sxs-lookup"><span data-stu-id="aa005-316">Add a new integer column to the Contacts table named GroupId.</span></span>
3. <span data-ttu-id="aa005-317">Haga clic en el botón Relationship para abrir el cuadro de diálogo de relaciones de clave externa (consulte la figura 3).</span><span class="sxs-lookup"><span data-stu-id="aa005-317">Click the Relationship button to open the Foreign Key Relationships dialog (see Figure 3).</span></span>
4. <span data-ttu-id="aa005-318">Haga clic en el botón Agregar.</span><span class="sxs-lookup"><span data-stu-id="aa005-318">Click the Add button.</span></span>
5. <span data-ttu-id="aa005-319">Haga clic en el botón de puntos suspensivos que aparece junto al botón de tabla y la especificación de columnas.</span><span class="sxs-lookup"><span data-stu-id="aa005-319">Click the ellipsis button that appears next to the Table and Columns Specification button.</span></span>
6. <span data-ttu-id="aa005-320">En el cuadro de diálogo tablas y columnas, seleccione los grupos como la tabla de clave principal y el identificador como columna de clave principal.</span><span class="sxs-lookup"><span data-stu-id="aa005-320">In the Tables and Columns dialog, select Groups as the primary key table and Id as the primary key column.</span></span> <span data-ttu-id="aa005-321">Seleccionar contactos como la tabla de clave externa y GroupId como columna de clave externa (consulte la figura 4).</span><span class="sxs-lookup"><span data-stu-id="aa005-321">Select Contacts as the foreign key table and GroupId as the foreign key column (see Figure 4).</span></span> <span data-ttu-id="aa005-322">Haga clic en el botón Aceptar.</span><span class="sxs-lookup"><span data-stu-id="aa005-322">Click the OK button.</span></span>
7. <span data-ttu-id="aa005-323">En **especificación de INSERT y UPDATE**, seleccione el valor **Cascade** para **Eliminar regla**.</span><span class="sxs-lookup"><span data-stu-id="aa005-323">Under **INSERT and UPDATE Specification**, select the value **Cascade** for **Delete Rule**.</span></span>
8. <span data-ttu-id="aa005-324">Haga clic en el botón Cerrar para cerrar el cuadro de diálogo de relaciones de clave externa.</span><span class="sxs-lookup"><span data-stu-id="aa005-324">Click the Close button to close the Foreign Key Relationships dialog.</span></span>
9. <span data-ttu-id="aa005-325">Haga clic en el botón Guardar para guardar los cambios en la tabla Contactos.</span><span class="sxs-lookup"><span data-stu-id="aa005-325">Click the Save button to save the changes to the Contacts table.</span></span>


<span data-ttu-id="aa005-326">[![Creación de una relación de tabla de base de datos](iteration-6-use-test-driven-development-cs/_static/image3.jpg)](iteration-6-use-test-driven-development-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="aa005-326">[![Creating a database table relationship](iteration-6-use-test-driven-development-cs/_static/image3.jpg)](iteration-6-use-test-driven-development-cs/_static/image5.png)</span></span>

<span data-ttu-id="aa005-327">**Figura 03**: Creación de una relación de tabla de base de datos ([haga clic aquí para ver imagen en tamaño completo](iteration-6-use-test-driven-development-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="aa005-327">**Figure 03**: Creating a database table relationship ([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image6.png))</span></span>


<span data-ttu-id="aa005-328">[![Especificar las relaciones entre tablas](iteration-6-use-test-driven-development-cs/_static/image4.jpg)](iteration-6-use-test-driven-development-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="aa005-328">[![Specifying table relationships](iteration-6-use-test-driven-development-cs/_static/image4.jpg)](iteration-6-use-test-driven-development-cs/_static/image7.png)</span></span>

<span data-ttu-id="aa005-329">**Figura 04**: Especificar las relaciones entre tablas ([haga clic aquí para ver imagen en tamaño completo](iteration-6-use-test-driven-development-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="aa005-329">**Figure 04**: Specifying table relationships([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image8.png))</span></span>


### <a name="updating-our-data-model"></a><span data-ttu-id="aa005-330">Actualización de nuestro modelo de datos</span><span class="sxs-lookup"><span data-stu-id="aa005-330">Updating our Data Model</span></span>

<span data-ttu-id="aa005-331">A continuación, necesitamos actualizar nuestro modelo de datos para representar la nueva tabla de base de datos.</span><span class="sxs-lookup"><span data-stu-id="aa005-331">Next, we need to update our data model to represent the new database table.</span></span> <span data-ttu-id="aa005-332">Siga estos pasos:</span><span class="sxs-lookup"><span data-stu-id="aa005-332">Follow these steps:</span></span>

1. <span data-ttu-id="aa005-333">Haga doble clic en el archivo ContactManagerModel.edmx en la carpeta de modelos para abrir el Diseñador de entidades.</span><span class="sxs-lookup"><span data-stu-id="aa005-333">Double-click the ContactManagerModel.edmx file in the Models folder to open the Entity Designer.</span></span>
2. <span data-ttu-id="aa005-334">Haga clic en la superficie del diseñador y seleccione la opción de menú **actualizar modelo desde base de datos**.</span><span class="sxs-lookup"><span data-stu-id="aa005-334">Right-click the Designer surface and select the menu option **Update Model from Database**.</span></span>
3. <span data-ttu-id="aa005-335">En el asistente, seleccione los grupos de la tabla y haga clic en el acabado de botón (consulte la figura 5).</span><span class="sxs-lookup"><span data-stu-id="aa005-335">In the Update Wizard, select the Groups table and click the Finish button (see Figure 5).</span></span>
4. <span data-ttu-id="aa005-336">Haga clic en la entidad de grupos y seleccione la opción de menú **cambiar el nombre**.</span><span class="sxs-lookup"><span data-stu-id="aa005-336">Right-click the Groups entity and select the menu option **Rename**.</span></span> <span data-ttu-id="aa005-337">Cambiar el nombre de la *grupos* entidad *grupo* (simples).</span><span class="sxs-lookup"><span data-stu-id="aa005-337">Change the name of the *Groups* entity to *Group* (singular).</span></span>
5. <span data-ttu-id="aa005-338">Haga clic en la propiedad de navegación de grupos que aparece en la parte inferior de la entidad Contact.</span><span class="sxs-lookup"><span data-stu-id="aa005-338">Right-click the Groups navigation property that appears at the bottom of the Contact entity.</span></span> <span data-ttu-id="aa005-339">Cambiar el nombre de la *grupos* propiedad de navegación para *grupo* (simples).</span><span class="sxs-lookup"><span data-stu-id="aa005-339">Change the name of the *Groups* navigation property to *Group* (singular).</span></span>


<span data-ttu-id="aa005-340">[![Actualizar un modelo de Entity Framework desde la base de datos](iteration-6-use-test-driven-development-cs/_static/image5.jpg)](iteration-6-use-test-driven-development-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="aa005-340">[![Updating an Entity Framework model from the database](iteration-6-use-test-driven-development-cs/_static/image5.jpg)](iteration-6-use-test-driven-development-cs/_static/image9.png)</span></span>

<span data-ttu-id="aa005-341">**Figura 05**: Actualizar un modelo de Entity Framework desde la base de datos ([haga clic aquí para ver imagen en tamaño completo](iteration-6-use-test-driven-development-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="aa005-341">**Figure 05**: Updating an Entity Framework model from the database([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image10.png))</span></span>


<span data-ttu-id="aa005-342">Después de completar estos pasos, el modelo de datos representa tanto los contactos y grupos de tablas.</span><span class="sxs-lookup"><span data-stu-id="aa005-342">After you complete these steps, your data model will represent both the Contacts and Groups tables.</span></span> <span data-ttu-id="aa005-343">El Diseñador de entidades debería mostrar ambas entidades (consulte la figura 6).</span><span class="sxs-lookup"><span data-stu-id="aa005-343">The Entity Designer should show both entities (see Figure 6).</span></span>


<span data-ttu-id="aa005-344">[![Muestra el grupo y póngase en contacto con el Diseñador de entidades](iteration-6-use-test-driven-development-cs/_static/image6.jpg)](iteration-6-use-test-driven-development-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="aa005-344">[![Entity Designer displaying Group and Contact](iteration-6-use-test-driven-development-cs/_static/image6.jpg)](iteration-6-use-test-driven-development-cs/_static/image11.png)</span></span>

<span data-ttu-id="aa005-345">**Figura 06**: Muestra el grupo y póngase en contacto con el Diseñador de entidades ([haga clic aquí para ver imagen en tamaño completo](iteration-6-use-test-driven-development-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="aa005-345">**Figure 06**: Entity Designer displaying Group and Contact([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image12.png))</span></span>


### <a name="creating-our-repository-classes"></a><span data-ttu-id="aa005-346">Creación de nuestras clases de repositorio</span><span class="sxs-lookup"><span data-stu-id="aa005-346">Creating our Repository Classes</span></span>

<span data-ttu-id="aa005-347">A continuación, debemos implementar nuestra clase de repositorio.</span><span class="sxs-lookup"><span data-stu-id="aa005-347">Next, we need to implement our repository class.</span></span> <span data-ttu-id="aa005-348">En el transcurso de esta iteración, hemos agregado varios métodos nuevos a la interfaz IContactManagerRepository al escribir código para satisfacer las pruebas unitarias.</span><span class="sxs-lookup"><span data-stu-id="aa005-348">Over the course of this iteration, we added several new methods to the IContactManagerRepository interface while writing code to satisfy our unit tests.</span></span> <span data-ttu-id="aa005-349">La versión final de la interfaz IContactManagerRepository se encuentra en el listado 14.</span><span class="sxs-lookup"><span data-stu-id="aa005-349">The final version of the IContactManagerRepository interface is contained in Listing 14.</span></span>

<span data-ttu-id="aa005-350">**Listado 14 - Models\IContactManagerRepository.cs**</span><span class="sxs-lookup"><span data-stu-id="aa005-350">**Listing 14 - Models\IContactManagerRepository.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample14.cs)]

<span data-ttu-id="aa005-351">Nos haven t realmente implementa cualquiera de los métodos relacionados con el trabajo con grupos de contactos.</span><span class="sxs-lookup"><span data-stu-id="aa005-351">We haven t actually implemented any of the methods related to working with contact groups.</span></span> <span data-ttu-id="aa005-352">Actualmente, la clase EntityContactManagerRepository tiene los métodos auxiliares para cada uno de los métodos de grupo de contactos que aparecen en la interfaz IContactManagerRepository.</span><span class="sxs-lookup"><span data-stu-id="aa005-352">Currently, the EntityContactManagerRepository class has stub methods for each of the contact group methods listed in the IContactManagerRepository interface.</span></span> <span data-ttu-id="aa005-353">Por ejemplo, el método ListGroups() actualmente este aspecto:</span><span class="sxs-lookup"><span data-stu-id="aa005-353">For example, the ListGroups() method currently looks like this:</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample15.cs)]

<span data-ttu-id="aa005-354">Los métodos de código auxiliar nos permitía compilar la aplicación y pasar las pruebas unitarias.</span><span class="sxs-lookup"><span data-stu-id="aa005-354">The stub methods enabled us to compile our application and pass the unit tests.</span></span> <span data-ttu-id="aa005-355">Sin embargo, ahora es el momento para implementar estos métodos.</span><span class="sxs-lookup"><span data-stu-id="aa005-355">However, now it is time to actually implement these methods.</span></span> <span data-ttu-id="aa005-356">La versión final de la clase EntityContactManagerRepository se encuentra en el listado 13.</span><span class="sxs-lookup"><span data-stu-id="aa005-356">The final version of the EntityContactManagerRepository class is contained in Listing 13.</span></span>

<span data-ttu-id="aa005-357">**Listado 13 - Models\EntityContactManagerRepository.cs**</span><span class="sxs-lookup"><span data-stu-id="aa005-357">**Listing 13 - Models\EntityContactManagerRepository.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample16.cs)]

### <a name="creating-the-views"></a><span data-ttu-id="aa005-358">Creación de las vistas</span><span class="sxs-lookup"><span data-stu-id="aa005-358">Creating the Views</span></span>

<span data-ttu-id="aa005-359">Aplicación de ASP.NET MVC cuando se usa el motor de vistas ASP.NET de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="aa005-359">ASP.NET MVC application when you use the default ASP.NET view engine.</span></span> <span data-ttu-id="aa005-360">Por lo tanto, don t crear vistas en respuesta a una prueba unitaria determinada.</span><span class="sxs-lookup"><span data-stu-id="aa005-360">So, you don t create views in response to a particular unit test.</span></span> <span data-ttu-id="aa005-361">Sin embargo, dado que una aplicación sería inútil sin vistas, nos t puede completar esta iteración sin la creación y modificación de las vistas de la aplicación de Contact Manager.</span><span class="sxs-lookup"><span data-stu-id="aa005-361">However, because an application would be useless without views, we can t complete this iteration without creating and modifying the views contained in the Contact Manager application.</span></span>

<span data-ttu-id="aa005-362">Es necesario crear las siguientes nuevas vistas para administrar grupos de contactos (consulte la figura 7):</span><span class="sxs-lookup"><span data-stu-id="aa005-362">We need to create the following new views for managing contact groups (see Figure 7):</span></span>

- <span data-ttu-id="aa005-363">Views\Group\Index.aspx - muestra una lista de grupos de contactos</span><span class="sxs-lookup"><span data-stu-id="aa005-363">Views\Group\Index.aspx - Displays list of contact groups</span></span>
- <span data-ttu-id="aa005-364">Views\Group\Delete.aspx - formulario de confirmación de muestra para eliminar un grupo de contactos</span><span class="sxs-lookup"><span data-stu-id="aa005-364">Views\Group\Delete.aspx - Displays confirmation form for deleting a contact group</span></span>


<span data-ttu-id="aa005-365">[![La vista de índice de grupo](iteration-6-use-test-driven-development-cs/_static/image7.jpg)](iteration-6-use-test-driven-development-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="aa005-365">[![The Group Index view](iteration-6-use-test-driven-development-cs/_static/image7.jpg)](iteration-6-use-test-driven-development-cs/_static/image13.png)</span></span>

<span data-ttu-id="aa005-366">**Figura 07**: La vista de índice de grupo ([haga clic aquí para ver imagen en tamaño completo](iteration-6-use-test-driven-development-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="aa005-366">**Figure 07**: The Group Index view([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image14.png))</span></span>


<span data-ttu-id="aa005-367">Es necesario modificar las siguientes vistas existentes para que incluyan grupos de contactos:</span><span class="sxs-lookup"><span data-stu-id="aa005-367">We need to modify the following existing views so that they include contact groups:</span></span>

- <span data-ttu-id="aa005-368">Views\Home\Create.aspx</span><span class="sxs-lookup"><span data-stu-id="aa005-368">Views\Home\Create.aspx</span></span>
- <span data-ttu-id="aa005-369">Views\Home\Edit.aspx</span><span class="sxs-lookup"><span data-stu-id="aa005-369">Views\Home\Edit.aspx</span></span>
- <span data-ttu-id="aa005-370">Views\Home\Index.aspx</span><span class="sxs-lookup"><span data-stu-id="aa005-370">Views\Home\Index.aspx</span></span>

<span data-ttu-id="aa005-371">Puede ver las vistas modificadas echando un vistazo a la aplicación de Visual Studio que acompaña a este tutorial.</span><span class="sxs-lookup"><span data-stu-id="aa005-371">You can see the modified views by looking at the Visual Studio application that accompanies this tutorial.</span></span> <span data-ttu-id="aa005-372">Por ejemplo, la figura 8 muestra la vista de índice de contacto.</span><span class="sxs-lookup"><span data-stu-id="aa005-372">For example, Figure 8 illustrates the Contact Index view.</span></span>


<span data-ttu-id="aa005-373">[![La vista de índice de contacto](iteration-6-use-test-driven-development-cs/_static/image8.jpg)](iteration-6-use-test-driven-development-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="aa005-373">[![The Contact Index view](iteration-6-use-test-driven-development-cs/_static/image8.jpg)](iteration-6-use-test-driven-development-cs/_static/image15.png)</span></span>

<span data-ttu-id="aa005-374">**Figura 08**: La vista de índice de contacto ([haga clic aquí para ver imagen en tamaño completo](iteration-6-use-test-driven-development-cs/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="aa005-374">**Figure 08**: The Contact Index view([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image16.png))</span></span>


## <a name="summary"></a><span data-ttu-id="aa005-375">Resumen</span><span class="sxs-lookup"><span data-stu-id="aa005-375">Summary</span></span>

<span data-ttu-id="aa005-376">En esta iteración, hemos agregado nueva funcionalidad a nuestra aplicación de Contact Manager siguiendo una metodología de diseño de la aplicación de desarrollo controlado por pruebas.</span><span class="sxs-lookup"><span data-stu-id="aa005-376">In this iteration, we added new functionality to our Contact Manager application by following a test-driven development application design methodology.</span></span> <span data-ttu-id="aa005-377">Comenzamos creando un conjunto de casos de usuario.</span><span class="sxs-lookup"><span data-stu-id="aa005-377">We started by creating a set of user stories.</span></span> <span data-ttu-id="aa005-378">Hemos creado un conjunto de pruebas unitarias que se corresponde con los requisitos expresados por los casos de usuario.</span><span class="sxs-lookup"><span data-stu-id="aa005-378">We created a set of unit tests that corresponds to the requirements expressed by the user stories.</span></span> <span data-ttu-id="aa005-379">Por último, hemos escrito código suficiente para satisfacer los requisitos expresados por las pruebas unitarias.</span><span class="sxs-lookup"><span data-stu-id="aa005-379">Finally, we wrote just enough code to satisfy the requirements expressed by the unit tests.</span></span>

<span data-ttu-id="aa005-380">Una vez que hemos terminado de escribir código suficiente para satisfacer los requisitos expresados por las pruebas unitarias, hemos actualizado nuestra base de datos y vistas.</span><span class="sxs-lookup"><span data-stu-id="aa005-380">After we finished writing enough code to satisfy the requirements expressed by the unit tests, we updated our database and views.</span></span> <span data-ttu-id="aa005-381">Hemos agregado una nueva tabla de grupos a nuestra base de datos y actualizado nuestro modelo de datos de Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="aa005-381">We added a new Groups table to our database and updated our Entity Framework Data Model.</span></span> <span data-ttu-id="aa005-382">También se crea y se puede modificar un conjunto de vistas.</span><span class="sxs-lookup"><span data-stu-id="aa005-382">We also created and modified a set of views.</span></span>

<span data-ttu-id="aa005-383">En la siguiente iteración--la última iteración--se vuelva a escribir la aplicación para aprovechar las ventajas de Ajax.</span><span class="sxs-lookup"><span data-stu-id="aa005-383">In the next iteration -- the final iteration -- we rewrite our application to take advantage of Ajax.</span></span> <span data-ttu-id="aa005-384">Aprovechando las ventajas de Ajax, se mejorará la capacidad de respuesta y el rendimiento de la aplicación de Contact Manager.</span><span class="sxs-lookup"><span data-stu-id="aa005-384">By taking advantage of Ajax, we'll improve the responsiveness and performance of the Contact Manager application.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="aa005-385">[Anterior](iteration-5-create-unit-tests-cs.md)
> [Siguiente](iteration-7-add-ajax-functionality-cs.md)</span><span class="sxs-lookup"><span data-stu-id="aa005-385">[Previous](iteration-5-create-unit-tests-cs.md)
[Next](iteration-7-add-ajax-functionality-cs.md)</span></span>
