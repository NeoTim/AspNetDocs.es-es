---
uid: web-forms/overview/data-access/caching-data/caching-data-at-application-startup-cs
title: Almacenar datos en caché al iniciarC#la aplicación () | Microsoft Docs
author: rick-anderson
description: En cualquier aplicación Web, algunos datos se utilizarán con frecuencia y algunos datos se usarán con poca frecuencia. Podemos mejorar el rendimiento de nuestra aplicación ASP.NET b...
ms.author: riande
ms.date: 05/30/2007
ms.assetid: 22ca8efa-7cd1-45a7-b9ce-ce6eb3b3ff95
msc.legacyurl: /web-forms/overview/data-access/caching-data/caching-data-at-application-startup-cs
msc.type: authoredcontent
ms.openlocfilehash: a0b55b0df1b7843120de284891e16178df23fabe
ms.sourcegitcommit: fe5c7512383a9b0a05d321ff10d3cca1611556f0
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/05/2019
ms.locfileid: "70386568"
---
# <a name="caching-data-at-application-startup-c"></a><span data-ttu-id="472ca-104">Almacenar datos en caché al iniciar la aplicación (C#)</span><span class="sxs-lookup"><span data-stu-id="472ca-104">Caching Data at Application Startup (C#)</span></span>

<span data-ttu-id="472ca-105">por [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="472ca-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

[<span data-ttu-id="472ca-106">Descargar PDF</span><span class="sxs-lookup"><span data-stu-id="472ca-106">Download PDF</span></span>](caching-data-at-application-startup-cs/_static/datatutorial60cs1.pdf)

> <span data-ttu-id="472ca-107">En cualquier aplicación Web, algunos datos se utilizarán con frecuencia y algunos datos se usarán con poca frecuencia.</span><span class="sxs-lookup"><span data-stu-id="472ca-107">In any Web application some data will be frequently used and some data will be infrequently used.</span></span> <span data-ttu-id="472ca-108">Podemos mejorar el rendimiento de nuestra aplicación ASP.NET cargando de antemano los datos usados con frecuencia, una técnica conocida como almacenamiento en caché.</span><span class="sxs-lookup"><span data-stu-id="472ca-108">We can improve the performance of our ASP.NET application by loading in advance the frequently-used data, a technique known as Caching.</span></span> <span data-ttu-id="472ca-109">En este tutorial se muestra un enfoque para la carga proactiva, que consiste en cargar datos en la memoria caché al iniciarse la aplicación.</span><span class="sxs-lookup"><span data-stu-id="472ca-109">This tutorial demonstrates one approach to proactive loading, which is to load data into the cache at application startup.</span></span>

## <a name="introduction"></a><span data-ttu-id="472ca-110">Introducción</span><span class="sxs-lookup"><span data-stu-id="472ca-110">Introduction</span></span>

<span data-ttu-id="472ca-111">En los dos tutoriales anteriores se vio el almacenamiento en caché de los datos en los niveles de presentación y almacenamiento en caché.</span><span class="sxs-lookup"><span data-stu-id="472ca-111">The two previous tutorials looked at caching data in the Presentation and Caching Layers.</span></span> <span data-ttu-id="472ca-112">En el [almacenamiento de datos en caché con ObjectDataSource](caching-data-with-the-objectdatasource-cs.md), analizamos el uso de las características de almacenamiento en caché de ObjectDataSource para almacenar los datos en la capa de presentación.</span><span class="sxs-lookup"><span data-stu-id="472ca-112">In [Caching Data with the ObjectDataSource](caching-data-with-the-objectdatasource-cs.md), we looked at using the ObjectDataSource's caching features to cache data in the Presentation Layer.</span></span> <span data-ttu-id="472ca-113">[Almacenar en caché los datos de la arquitectura](caching-data-in-the-architecture-cs.md) examina Caching en un nuevo nivel de almacenamiento en caché independiente.</span><span class="sxs-lookup"><span data-stu-id="472ca-113">[Caching Data in the Architecture](caching-data-in-the-architecture-cs.md) examined caching in a new, separate Caching Layer.</span></span> <span data-ttu-id="472ca-114">Ambos tutoriales usaban la *carga reactiva* al trabajar con la memoria caché de datos.</span><span class="sxs-lookup"><span data-stu-id="472ca-114">Both of these tutorials used *reactive loading* in working with the data cache.</span></span> <span data-ttu-id="472ca-115">Con la carga reactiva, cada vez que se solicitan los datos, el sistema comprueba primero si está en la memoria caché.</span><span class="sxs-lookup"><span data-stu-id="472ca-115">With reactive loading, each time the data is requested, the system first checks if it's in the cache.</span></span> <span data-ttu-id="472ca-116">Si no es así, obtiene los datos del origen de origen, como la base de datos y, a continuación, los almacena en la memoria caché.</span><span class="sxs-lookup"><span data-stu-id="472ca-116">If not, it grabs the data from the originating source, such as the database, and then stores it in the cache.</span></span> <span data-ttu-id="472ca-117">La principal ventaja de la carga reactiva es su facilidad de implementación.</span><span class="sxs-lookup"><span data-stu-id="472ca-117">The main advantage to reactive loading is its ease of implementation.</span></span> <span data-ttu-id="472ca-118">Una de sus desventajas es el rendimiento desigual en todas las solicitudes.</span><span class="sxs-lookup"><span data-stu-id="472ca-118">One of its disadvantages is its uneven performance across requests.</span></span> <span data-ttu-id="472ca-119">Imagine una página que utiliza la capa de almacenamiento en caché del tutorial anterior para mostrar la información del producto.</span><span class="sxs-lookup"><span data-stu-id="472ca-119">Imagine a page that uses the Caching Layer from the preceding tutorial to display product information.</span></span> <span data-ttu-id="472ca-120">Cuando esta página se visita por primera vez, o se visita por primera vez después de que los datos en caché se hayan expulsado debido a restricciones de memoria o hasta que se haya alcanzado la expiración especificada, se deben recuperar los datos de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="472ca-120">When this page is visited for the first time, or visited for the first time after the cached data has been evicted due to memory constraints or the specified expiry having been reached, the data must be retrieved from the database.</span></span> <span data-ttu-id="472ca-121">Por lo tanto, estas solicitudes de usuarios tardarán más tiempo que las solicitudes de los usuarios a las que se puede atender desde la memoria caché.</span><span class="sxs-lookup"><span data-stu-id="472ca-121">Therefore, these users requests will take longer than users requests that can be served by the cache.</span></span>

<span data-ttu-id="472ca-122">La *carga proactiva* proporciona una estrategia alternativa de administración de la memoria caché que suaviza el rendimiento en todas las solicitudes mediante la carga de los datos almacenados en caché antes de que se necesiten.</span><span class="sxs-lookup"><span data-stu-id="472ca-122">*Proactive loading* provides an alternative cache management strategy that smoothes out the performance across requests by loading the cached data before it's needed.</span></span> <span data-ttu-id="472ca-123">Normalmente, la carga proactiva utiliza algún proceso que comprueba periódicamente o se le notifica cuando se ha producido una actualización de los datos subyacentes.</span><span class="sxs-lookup"><span data-stu-id="472ca-123">Typically, proactive loading uses some process that either periodically checks or is notified when there has been an update to the underlying data.</span></span> <span data-ttu-id="472ca-124">Este proceso actualiza la memoria caché para mantenerla actualizada.</span><span class="sxs-lookup"><span data-stu-id="472ca-124">This process then updates the cache to keep it fresh.</span></span> <span data-ttu-id="472ca-125">La carga proactiva es especialmente útil si los datos subyacentes proceden de una conexión de base de datos lenta, un servicio web o algún otro origen de datos especialmente lento.</span><span class="sxs-lookup"><span data-stu-id="472ca-125">Proactive loading is especially useful if the underlying data comes from a slow database connection, a Web service, or some other particularly sluggish data source.</span></span> <span data-ttu-id="472ca-126">Pero este enfoque para la carga proactiva es más difícil de implementar, ya que requiere crear, administrar e implementar un proceso para comprobar los cambios y actualizar la memoria caché.</span><span class="sxs-lookup"><span data-stu-id="472ca-126">But this approach to proactive loading is more difficult to implement, as it requires creating, managing, and deploying a process to check for changes and update the cache.</span></span>

<span data-ttu-id="472ca-127">Otro tipo de carga proactiva y el tipo que exploraremos en este tutorial es cargando datos en la memoria caché al iniciarse la aplicación.</span><span class="sxs-lookup"><span data-stu-id="472ca-127">Another flavor of proactive loading, and the type we'll be exploring in this tutorial, is loading data into the cache at application startup.</span></span> <span data-ttu-id="472ca-128">Este enfoque es especialmente útil para almacenar en caché datos estáticos, como los registros de las tablas de búsqueda de bases de datos.</span><span class="sxs-lookup"><span data-stu-id="472ca-128">This approach is especially useful for caching static data, such as the records in database lookup tables.</span></span>

> [!NOTE]
> <span data-ttu-id="472ca-129">Para obtener información más detallada sobre las diferencias entre la carga proactiva y reactiva, así como las listas de ventajas, desventajas y recomendaciones de implementación, consulte la sección [Administración del contenido de una caché](https://msdn.microsoft.com/library/ms978503.aspx) de la [Guía de arquitectura de almacenamiento en caché para .net Aplicaciones de Framework](https://msdn.microsoft.com/library/ms978498.aspx).</span><span class="sxs-lookup"><span data-stu-id="472ca-129">For a more in-depth look at the differences between proactive and reactive loading, as well as lists of pros, cons, and implementation recommendations, refer to the [Managing the Contents of a Cache](https://msdn.microsoft.com/library/ms978503.aspx) section of the [Caching Architecture Guide for .NET Framework Applications](https://msdn.microsoft.com/library/ms978498.aspx).</span></span>

## <a name="step-1-determining-what-data-to-cache-at-application-startup"></a><span data-ttu-id="472ca-130">Paso 1: Determinar qué datos se van a almacenar en caché al iniciar la aplicación</span><span class="sxs-lookup"><span data-stu-id="472ca-130">Step 1: Determining What Data to Cache at Application Startup</span></span>

<span data-ttu-id="472ca-131">Los ejemplos de almacenamiento en caché que usan la carga reactiva que hemos examinado en los dos tutoriales anteriores funcionan bien con los datos que pueden cambiar periódicamente y no tardan mucho tiempo en generarse.</span><span class="sxs-lookup"><span data-stu-id="472ca-131">The caching examples using reactive loading that we examined in the previous two tutorials work well with data that may periodically change and does not take exorbitantly long to generate.</span></span> <span data-ttu-id="472ca-132">Pero si los datos almacenados en caché no cambian nunca, la expiración usada por la carga reactiva es superflua.</span><span class="sxs-lookup"><span data-stu-id="472ca-132">But if the cached data never changes, the expiry used by reactive loading is superfluous.</span></span> <span data-ttu-id="472ca-133">Del mismo modo, si los datos que se almacenan en caché tardan demasiado tiempo en generarse, los usuarios cuyas solicitudes busquen la caché vacía tendrán que superar una espera prolongada mientras se recuperan los datos subyacentes.</span><span class="sxs-lookup"><span data-stu-id="472ca-133">Likewise, if the data being cached takes an exceedingly long time to generate, then those users whose requests find the cache empty will have to endure a lengthy wait while the underlying data is retrieved.</span></span> <span data-ttu-id="472ca-134">Considere la posibilidad de almacenar en memoria caché datos y datos estáticos que tardan mucho tiempo en generarse en el inicio de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="472ca-134">Consider caching static data and data that takes an exceptionally long time to generate at application startup.</span></span>

<span data-ttu-id="472ca-135">Mientras que las bases de datos tienen muchos valores dinámicos que cambian con frecuencia, la mayoría también tienen una cantidad equitativa de datos estáticos.</span><span class="sxs-lookup"><span data-stu-id="472ca-135">While databases have many dynamic, frequently-changing values, most also have a fair amount of static data.</span></span> <span data-ttu-id="472ca-136">Por ejemplo, prácticamente todos los modelos de datos tienen una o más columnas que contienen un valor determinado de un conjunto fijo de opciones.</span><span class="sxs-lookup"><span data-stu-id="472ca-136">For example, virtually all data models have one or more columns that contain a particular value from a fixed set of choices.</span></span> <span data-ttu-id="472ca-137">Una `Patients` tabla de base de datos `PrimaryLanguage` puede tener una columna, cuyo conjunto de valores puede ser inglés, español, Francés, Ruso, Japonés, etc.</span><span class="sxs-lookup"><span data-stu-id="472ca-137">A `Patients` database table might have a `PrimaryLanguage` column, whose set of values could be English, Spanish, French, Russian, Japanese, and so on.</span></span> <span data-ttu-id="472ca-138">A menudo, estos tipos de columnas se implementan mediante *tablas de búsqueda*.</span><span class="sxs-lookup"><span data-stu-id="472ca-138">Oftentimes, these types of columns are implemented using *lookup tables*.</span></span> <span data-ttu-id="472ca-139">En lugar de almacenar la cadena inglés o francés en `Patients` la tabla, se crea una segunda tabla con, normalmente, dos columnas: un identificador único y una descripción de cadena, con un registro para cada valor posible.</span><span class="sxs-lookup"><span data-stu-id="472ca-139">Rather than storing the string English or French in the `Patients` table, a second table is created that has, commonly, two columns - a unique identifier and a string description - with a record for each possible value.</span></span> <span data-ttu-id="472ca-140">La `PrimaryLanguage` columna de la `Patients` tabla almacena el identificador único correspondiente en la tabla de búsqueda.</span><span class="sxs-lookup"><span data-stu-id="472ca-140">The `PrimaryLanguage` column in the `Patients` table stores the corresponding unique identifier in the lookup table.</span></span> <span data-ttu-id="472ca-141">En la figura 1, el idioma principal del paciente John Doe es el inglés, mientras que Ed Johnson es ruso.</span><span class="sxs-lookup"><span data-stu-id="472ca-141">In Figure 1, patient John Doe's primary language is English, while Ed Johnson's is Russian.</span></span>

![La tabla de idiomas es una tabla de búsqueda utilizada por la tabla patients](caching-data-at-application-startup-cs/_static/image1.png)

<span data-ttu-id="472ca-143">**Figura 1**: La `Languages` tabla es una tabla de búsqueda utilizada por `Patients` la tabla</span><span class="sxs-lookup"><span data-stu-id="472ca-143">**Figure 1**: The `Languages` Table is a Lookup Table Used by the `Patients` Table</span></span>

<span data-ttu-id="472ca-144">La interfaz de usuario para editar o crear un nuevo paciente incluirá una lista desplegable de idiomas permitidos rellenados por los registros `Languages` de la tabla.</span><span class="sxs-lookup"><span data-stu-id="472ca-144">The user interface for editing or creating a new patient would include a drop-down list of allowable languages populated by the records in the `Languages` table.</span></span> <span data-ttu-id="472ca-145">Sin almacenamiento en caché, cada vez que se visita esta interfaz, el `Languages` sistema debe consultar la tabla.</span><span class="sxs-lookup"><span data-stu-id="472ca-145">Without caching, each time this interface is visited the system must query the `Languages` table.</span></span> <span data-ttu-id="472ca-146">Esto es excesivo e innecesario, ya que los valores de la tabla de búsqueda cambian con poca frecuencia, si es que se producen.</span><span class="sxs-lookup"><span data-stu-id="472ca-146">This is wasteful and unnecessary since lookup table values change very infrequently, if ever.</span></span>

<span data-ttu-id="472ca-147">Podríamos almacenar en caché `Languages` los datos con las mismas técnicas de carga reactiva examinadas en los tutoriales anteriores.</span><span class="sxs-lookup"><span data-stu-id="472ca-147">We could cache the `Languages` data using the same reactive loading techniques examined in the previous tutorials.</span></span> <span data-ttu-id="472ca-148">Sin embargo, la carga reactiva utiliza una expiración basada en el tiempo, que no es necesaria para los datos de la tabla de búsqueda estática.</span><span class="sxs-lookup"><span data-stu-id="472ca-148">Reactive loading, however, uses a time-based expiry, which is not needed for static lookup table data.</span></span> <span data-ttu-id="472ca-149">Aunque el almacenamiento en caché con la carga reactiva sería mejor que no almacenar en caché, el mejor enfoque sería cargar proactivamente los datos de la tabla de búsqueda en la memoria caché al iniciarse la aplicación.</span><span class="sxs-lookup"><span data-stu-id="472ca-149">While caching using reactive loading would be better than no caching at all, the best approach would be to proactively load the lookup table data into the cache at application startup.</span></span>

<span data-ttu-id="472ca-150">En este tutorial, veremos cómo almacenar en caché los datos de la tabla de búsqueda y otra información estática.</span><span class="sxs-lookup"><span data-stu-id="472ca-150">In this tutorial we will look at how to cache lookup table data and other static information.</span></span>

## <a name="step-2-examining-the-different-ways-to-cache-data"></a><span data-ttu-id="472ca-151">Paso 2: Examinar las distintas formas de almacenar datos en caché</span><span class="sxs-lookup"><span data-stu-id="472ca-151">Step 2: Examining the Different Ways to Cache Data</span></span>

<span data-ttu-id="472ca-152">La información se puede almacenar en caché mediante programación en una aplicación de ASP.NET mediante diversos enfoques.</span><span class="sxs-lookup"><span data-stu-id="472ca-152">Information can be programmatically cached in an ASP.NET application using a variety of approaches.</span></span> <span data-ttu-id="472ca-153">Ya vimos cómo usar la memoria caché de datos en los tutoriales anteriores.</span><span class="sxs-lookup"><span data-stu-id="472ca-153">We ve already seen how to use the data cache in previous tutorials.</span></span> <span data-ttu-id="472ca-154">Como alternativa, los objetos se pueden almacenar en caché mediante programación con *miembros estáticos* o el estado de la *aplicación*.</span><span class="sxs-lookup"><span data-stu-id="472ca-154">Alternatively, objects can be programmatically cached using *static members* or *application state*.</span></span>

<span data-ttu-id="472ca-155">Al trabajar con una clase, normalmente se debe crear una instancia de la clase antes de que se pueda tener acceso a sus miembros.</span><span class="sxs-lookup"><span data-stu-id="472ca-155">When working with a class, typically the class must first be instantiated before its members can be accessed.</span></span> <span data-ttu-id="472ca-156">Por ejemplo, para invocar un método de una de las clases de nuestra capa de lógica de negocios, primero debemos crear una instancia de la clase:</span><span class="sxs-lookup"><span data-stu-id="472ca-156">For example, in order to invoke a method from one of the classes in our Business Logic Layer, we must first create an instance of the class:</span></span>

[!code-csharp[Main](caching-data-at-application-startup-cs/samples/sample1.cs)]

<span data-ttu-id="472ca-157">Antes de poder invocar *SomeMethod* o trabajar con *SomeProperty*, primero debemos crear una instancia de la clase con la `new` palabra clave.</span><span class="sxs-lookup"><span data-stu-id="472ca-157">Before we can invoke *SomeMethod* or work with *SomeProperty*, we must first create an instance of the class using the `new` keyword.</span></span> <span data-ttu-id="472ca-158">*SomeMethod* y *SomeProperty* se asocian a una instancia determinada.</span><span class="sxs-lookup"><span data-stu-id="472ca-158">*SomeMethod* and *SomeProperty* are associated with a particular instance.</span></span> <span data-ttu-id="472ca-159">La duración de estos miembros está ligada a la duración de su objeto asociado.</span><span class="sxs-lookup"><span data-stu-id="472ca-159">The lifetime of these members is tied to the lifetime of their associated object.</span></span> <span data-ttu-id="472ca-160">Los *miembros estáticos*, por otro lado, son variables, propiedades y métodos que se comparten entre *todas* las instancias de la clase y, por consiguiente, tienen una duración siempre que la clase.</span><span class="sxs-lookup"><span data-stu-id="472ca-160">*Static members*, on the other hand, are variables, properties, and methods that are shared among *all* instances of the class and, consequently, have a lifetime as long as the class.</span></span> <span data-ttu-id="472ca-161">Los miembros estáticos se indican mediante `static`la palabra clave.</span><span class="sxs-lookup"><span data-stu-id="472ca-161">Static members are denoted by the keyword `static`.</span></span>

<span data-ttu-id="472ca-162">Además de los miembros estáticos, los datos se pueden almacenar en caché con el estado de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="472ca-162">In addition to static members, data can be cached using application state.</span></span> <span data-ttu-id="472ca-163">Cada aplicación de ASP.NET mantiene una colección de nombres y valores que se comparte entre todos los usuarios y páginas de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="472ca-163">Each ASP.NET application maintains a name/value collection that's shared across all users and pages of the application.</span></span> <span data-ttu-id="472ca-164">Se puede tener acceso a esta colección mediante la [ `Application` propiedad](https://msdn.microsoft.com/library/system.web.httpcontext.application.aspx)de la [ `HttpContext` clase](https://msdn.microsoft.com/library/system.web.httpcontext.aspx)y usarse desde la clase de código subyacente de una página de ASP.net como la siguiente:</span><span class="sxs-lookup"><span data-stu-id="472ca-164">This collection can be accessed using the [`HttpContext` class](https://msdn.microsoft.com/library/system.web.httpcontext.aspx)'s [`Application` property](https://msdn.microsoft.com/library/system.web.httpcontext.application.aspx), and used from an ASP.NET page's code-behind class like so:</span></span>

[!code-csharp[Main](caching-data-at-application-startup-cs/samples/sample2.cs)]

<span data-ttu-id="472ca-165">La memoria caché de datos proporciona una API mucho más rica para almacenar datos en caché, proporcionando mecanismos para expiraciones basadas en tiempo y dependencias, prioridades de elementos de caché, etc.</span><span class="sxs-lookup"><span data-stu-id="472ca-165">The data cache provides a much richer API for caching data, providing mechanisms for time- and dependency-based expiries, cache item priorities, and so forth.</span></span> <span data-ttu-id="472ca-166">Con los miembros estáticos y el estado de la aplicación, el desarrollador de páginas debe agregar manualmente dichas características.</span><span class="sxs-lookup"><span data-stu-id="472ca-166">With static members and application state, such features must be manually added by the page developer.</span></span> <span data-ttu-id="472ca-167">Sin embargo, cuando se almacenan en caché los datos durante el inicio de la aplicación durante el período de duración de la aplicación, se mootn las ventajas de la memoria caché de datos.</span><span class="sxs-lookup"><span data-stu-id="472ca-167">When caching data at application startup for the lifetime of the application, however, the data cache's advantages are moot.</span></span> <span data-ttu-id="472ca-168">En este tutorial veremos el código que usa las tres técnicas para almacenar en caché los datos estáticos.</span><span class="sxs-lookup"><span data-stu-id="472ca-168">In this tutorial we'll look at code that uses all three techniques for caching static data.</span></span>

## <a name="step-3-caching-thesupplierstable-data"></a><span data-ttu-id="472ca-169">Paso 3: Almacenar en`Suppliers`caché los datos de la tabla</span><span class="sxs-lookup"><span data-stu-id="472ca-169">Step 3: Caching the`Suppliers`Table Data</span></span>

<span data-ttu-id="472ca-170">Las tablas de base de datos Northwind que hemos implementado hasta la fecha no incluyen ninguna tabla de búsqueda tradicional.</span><span class="sxs-lookup"><span data-stu-id="472ca-170">The Northwind database tables we ve implemented to date do not include any traditional lookup tables.</span></span> <span data-ttu-id="472ca-171">Las cuatro DataTables implementadas en las tablas de modelo DAL All cuyos valores no son estáticos.</span><span class="sxs-lookup"><span data-stu-id="472ca-171">The four DataTables implemented in our DAL all model tables whose values are non-static.</span></span> <span data-ttu-id="472ca-172">En lugar de dedicar tiempo a agregar un nuevo DataTable a la capa Dal y, después, a una nueva clase y a los métodos de la capa BLL, en `Suppliers` este tutorial vamos a fingir que los datos de la tabla son estáticos.</span><span class="sxs-lookup"><span data-stu-id="472ca-172">Rather than spending the time to add a new DataTable to the DAL and then a new class and methods to the BLL, for this tutorial let's just pretend that the `Suppliers` table's data is static.</span></span> <span data-ttu-id="472ca-173">Por lo tanto, podríamos almacenar en caché estos datos en el inicio de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="472ca-173">Therefore, we could cache this data at application startup.</span></span>

<span data-ttu-id="472ca-174">Para empezar, cree una nueva clase denominada `StaticCache.cs` en la `CL` carpeta.</span><span class="sxs-lookup"><span data-stu-id="472ca-174">To start, create a new class named `StaticCache.cs` in the `CL` folder.</span></span>

![Crear la clase StaticCache.cs en la carpeta CL](caching-data-at-application-startup-cs/_static/image2.png)

<span data-ttu-id="472ca-176">**Figura 2**: Crear la `StaticCache.cs` clase en la `CL` carpeta</span><span class="sxs-lookup"><span data-stu-id="472ca-176">**Figure 2**: Create the `StaticCache.cs` Class in the `CL` Folder</span></span>

<span data-ttu-id="472ca-177">Necesitamos agregar un método que cargue los datos en el inicio en el almacén de caché adecuado, así como los métodos que devuelven datos de esta caché.</span><span class="sxs-lookup"><span data-stu-id="472ca-177">We need to add a method that loads the data at startup into the appropriate cache store, as well as methods that return data from this cache.</span></span>

[!code-csharp[Main](caching-data-at-application-startup-cs/samples/sample3.cs)]

<span data-ttu-id="472ca-178">En el código anterior se usa una variable miembro `suppliers`estática,, para almacenar los resultados `SuppliersBLL` del `GetSuppliers()` método de la clase, al que se `LoadStaticCache()` llama desde el método.</span><span class="sxs-lookup"><span data-stu-id="472ca-178">The above code uses a static member variable, `suppliers`, to hold the results from the `SuppliersBLL` class's `GetSuppliers()` method, which is called from the `LoadStaticCache()` method.</span></span> <span data-ttu-id="472ca-179">El `LoadStaticCache()` método está pensado para ser llamado durante el inicio de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="472ca-179">The `LoadStaticCache()` method is meant to be called during the application's start.</span></span> <span data-ttu-id="472ca-180">Una vez que estos datos se han cargado durante el inicio de la aplicación, cualquier página que necesite trabajar con los `StaticCache` datos de `GetSuppliers()` proveedor puede llamar al método de la clase.</span><span class="sxs-lookup"><span data-stu-id="472ca-180">Once this data has been loaded at application startup, any page that needs to work with supplier data can call the `StaticCache` class's `GetSuppliers()` method.</span></span> <span data-ttu-id="472ca-181">Por lo tanto, la llamada a la base de datos para obtener los proveedores solo se produce una vez, en el inicio de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="472ca-181">Therefore, the call to the database to get the suppliers only happens once, at application start.</span></span>

<span data-ttu-id="472ca-182">En lugar de usar una variable miembro estática como almacén de caché, podríamos haber usado el estado de la aplicación o la memoria caché de datos.</span><span class="sxs-lookup"><span data-stu-id="472ca-182">Rather than using a static member variable as the cache store, we could have alternatively used application state or the data cache.</span></span> <span data-ttu-id="472ca-183">En el código siguiente se muestra la clase retools para usar el estado de la aplicación:</span><span class="sxs-lookup"><span data-stu-id="472ca-183">The following code shows the class retooled to use application state:</span></span>

[!code-csharp[Main](caching-data-at-application-startup-cs/samples/sample4.cs)]

<span data-ttu-id="472ca-184">En `LoadStaticCache()`, la información del proveedor se almacena en la *clave*de variable de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="472ca-184">In `LoadStaticCache()`, the supplier information is stored to the application variable *key*.</span></span> <span data-ttu-id="472ca-185">Se devuelve como el tipo adecuado (`Northwind.SuppliersDataTable`) de. `GetSuppliers()`</span><span class="sxs-lookup"><span data-stu-id="472ca-185">It's returned as the appropriate type (`Northwind.SuppliersDataTable`) from `GetSuppliers()`.</span></span> <span data-ttu-id="472ca-186">Aunque se puede obtener acceso al estado de la aplicación en las clases de código subyacente de `Application["key"]`las páginas ASP.net con, en la `HttpContext.Current.Application["key"]` arquitectura se debe usar para obtener `HttpContext`el objeto actual.</span><span class="sxs-lookup"><span data-stu-id="472ca-186">While application state can be accessed in the code-behind classes of ASP.NET pages using `Application["key"]`, in the architecture we must use `HttpContext.Current.Application["key"]` in order to get the current `HttpContext`.</span></span>

<span data-ttu-id="472ca-187">Del mismo modo, la memoria caché de datos se puede usar como almacén de caché, como se muestra en el código siguiente:</span><span class="sxs-lookup"><span data-stu-id="472ca-187">Likewise, the data cache can be used as a cache store, as the following code shows:</span></span>

[!code-csharp[Main](caching-data-at-application-startup-cs/samples/sample5.cs)]

<span data-ttu-id="472ca-188">Para agregar un elemento a la memoria caché de datos sin expiración basada en el tiempo, `System.Web.Caching.Cache.NoAbsoluteExpiration` Utilice `System.Web.Caching.Cache.NoSlidingExpiration` los valores y como parámetros de entrada.</span><span class="sxs-lookup"><span data-stu-id="472ca-188">To add an item to the data cache with no time-based expiry, use the `System.Web.Caching.Cache.NoAbsoluteExpiration` and `System.Web.Caching.Cache.NoSlidingExpiration` values as input parameters.</span></span> <span data-ttu-id="472ca-189">Esta sobrecarga concreta del método de `Insert` la caché de datos se ha seleccionado para que se pueda especificar la *prioridad* del elemento de la memoria caché.</span><span class="sxs-lookup"><span data-stu-id="472ca-189">This particular overload of the data cache's `Insert` method was selected so that we could specify the *priority* of the cache item.</span></span> <span data-ttu-id="472ca-190">La prioridad se usa para determinar qué elementos se borrarán de la memoria caché cuando la memoria disponible se ejecute bajo.</span><span class="sxs-lookup"><span data-stu-id="472ca-190">The priority is used to determine what items to scavenge from the cache when available memory runs low.</span></span> <span data-ttu-id="472ca-191">Aquí usamos la prioridad `NotRemovable`, lo que garantiza que este elemento de caché no se borrará.</span><span class="sxs-lookup"><span data-stu-id="472ca-191">Here we use the priority `NotRemovable`, which ensures that this cache item won't be scavenged.</span></span>

> [!NOTE]
> <span data-ttu-id="472ca-192">La descarga de este tutorial implementa la `StaticCache` clase mediante el enfoque de variable de miembro estático.</span><span class="sxs-lookup"><span data-stu-id="472ca-192">This tutorial's download implements the `StaticCache` class using the static member variable approach.</span></span> <span data-ttu-id="472ca-193">El código de las técnicas de estado de la aplicación y caché de datos está disponible en los comentarios del archivo de clase.</span><span class="sxs-lookup"><span data-stu-id="472ca-193">The code for the application state and data cache techniques is available in the comments in the class file.</span></span>

## <a name="step-4-executing-code-at-application-startup"></a><span data-ttu-id="472ca-194">Paso 4: Ejecutar código al iniciar la aplicación</span><span class="sxs-lookup"><span data-stu-id="472ca-194">Step 4: Executing Code at Application Startup</span></span>

<span data-ttu-id="472ca-195">Para ejecutar código cuando se inicia una aplicación web por primera vez, es necesario crear un archivo `Global.asax`especial denominado.</span><span class="sxs-lookup"><span data-stu-id="472ca-195">To execute code when a web application first starts, we need to create a special file named `Global.asax`.</span></span> <span data-ttu-id="472ca-196">Este archivo puede contener controladores de eventos para eventos de nivel de aplicación, sesión y solicitud, y aquí es donde podemos agregar código que se ejecutará cada vez que se inicie la aplicación.</span><span class="sxs-lookup"><span data-stu-id="472ca-196">This file can contain event handlers for application-, session-, and request-level events, and it is here where we can add code that will be executed whenever the application starts.</span></span>

<span data-ttu-id="472ca-197">Agregue el `Global.asax` archivo al directorio raíz de la aplicación web; para ello, haga clic con el botón derecho en el nombre del proyecto de sitio web en el explorador de soluciones de Visual Studio y elija Agregar nuevo elemento.</span><span class="sxs-lookup"><span data-stu-id="472ca-197">Add the `Global.asax` file to your web application's root directory by right-clicking on the website project name in Visual Studio's Solution Explorer and choosing Add New Item.</span></span> <span data-ttu-id="472ca-198">En el cuadro de diálogo Agregar nuevo elemento, seleccione el tipo de elemento clase de aplicación global y, a continuación, haga clic en el botón Agregar.</span><span class="sxs-lookup"><span data-stu-id="472ca-198">From the Add New Item dialog box, select the Global Application Class item type and then click the Add button.</span></span>

> [!NOTE]
> <span data-ttu-id="472ca-199">Si ya tiene un `Global.asax` archivo en el proyecto, el tipo de elemento de clase de aplicación global no se mostrará en el cuadro de diálogo Agregar nuevo elemento.</span><span class="sxs-lookup"><span data-stu-id="472ca-199">If you already have a `Global.asax` file in your project, the Global Application Class item type will not be listed in the Add New Item dialog box.</span></span>

<span data-ttu-id="472ca-200">[![Agregar el archivo global. asax al directorio raíz de la aplicación Web](caching-data-at-application-startup-cs/_static/image4.png)](caching-data-at-application-startup-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="472ca-200">[![Add the Global.asax File to Your Web Application's Root Directory](caching-data-at-application-startup-cs/_static/image4.png)](caching-data-at-application-startup-cs/_static/image3.png)</span></span>

<span data-ttu-id="472ca-201">**Figura 3**: Agregue el `Global.asax` archivo al directorio raíz de la aplicación web ([haga clic para ver la imagen de tamaño completo](caching-data-at-application-startup-cs/_static/image5.png))</span><span class="sxs-lookup"><span data-stu-id="472ca-201">**Figure 3**: Add the `Global.asax` File to Your Web Application's Root Directory ([Click to view full-size image](caching-data-at-application-startup-cs/_static/image5.png))</span></span>

<span data-ttu-id="472ca-202">La plantilla `Global.asax` de archivo predeterminada incluye cinco métodos en una etiqueta del `<script>` lado servidor:</span><span class="sxs-lookup"><span data-stu-id="472ca-202">The default `Global.asax` file template includes five methods within a server-side `<script>` tag:</span></span>

- <span data-ttu-id="472ca-203">**`Application_Start`** se ejecuta cuando se inicia la aplicación web por primera vez.</span><span class="sxs-lookup"><span data-stu-id="472ca-203">**`Application_Start`** executes when the web application first starts</span></span>
- <span data-ttu-id="472ca-204">**`Application_End`** se ejecuta cuando se está cerrando la aplicación</span><span class="sxs-lookup"><span data-stu-id="472ca-204">**`Application_End`** runs when the application is shutting down</span></span>
- <span data-ttu-id="472ca-205">**`Application_Error`** se ejecuta siempre que una excepción no controlada llega a la aplicación.</span><span class="sxs-lookup"><span data-stu-id="472ca-205">**`Application_Error`** executes whenever an unhandled exception reaches the application</span></span>
- <span data-ttu-id="472ca-206">**`Session_Start`** se ejecuta cuando se crea una nueva sesión</span><span class="sxs-lookup"><span data-stu-id="472ca-206">**`Session_Start`** executes when a new session is created</span></span>
- <span data-ttu-id="472ca-207">**`Session_End`** se ejecuta cuando una sesión expira o se abandona</span><span class="sxs-lookup"><span data-stu-id="472ca-207">**`Session_End`** runs when a session is expired or abandoned</span></span>

<span data-ttu-id="472ca-208">Solo `Application_Start` se llama a este controlador de eventos una vez durante el ciclo de vida de una aplicación.</span><span class="sxs-lookup"><span data-stu-id="472ca-208">The `Application_Start` event handler is called only once during an application's life cycle.</span></span> <span data-ttu-id="472ca-209">La aplicación se inicia la primera vez que se solicita un recurso de ASP.net de la aplicación y continúa ejecutándose hasta que se reinicia la aplicación, lo que puede ocurrir si se modifica el contenido `/Bin` de la carpeta, `Global.asax`se modifica, se modifica el contenido de la `App_Code` carpeta o modificación del `Web.config` archivo, entre otras causas.</span><span class="sxs-lookup"><span data-stu-id="472ca-209">The application starts the first time an ASP.NET resource is requested from the application and continues to run until the application is restarted, which can happen by modifying the contents of the `/Bin` folder, modifying `Global.asax`, modifying the contents in the `App_Code` folder, or modifying the `Web.config` file, among other causes.</span></span> <span data-ttu-id="472ca-210">Consulte información general sobre el ciclo de vida de la [aplicación ASP.net](https://msdn.microsoft.com/library/ms178473.aspx) para obtener una explicación más detallada sobre el ciclo de vida de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="472ca-210">Refer to [ASP.NET Application Life Cycle Overview](https://msdn.microsoft.com/library/ms178473.aspx) for a more detailed discussion on the application life cycle.</span></span>

<span data-ttu-id="472ca-211">Para estos tutoriales, solo necesitamos agregar código al `Application_Start` método, así que no dude en quitar los demás.</span><span class="sxs-lookup"><span data-stu-id="472ca-211">For these tutorials we only need to add code to the `Application_Start` method, so feel free to remove the others.</span></span> <span data-ttu-id="472ca-212">En `Application_Start`, basta con llamar `StaticCache` al método `LoadStaticCache()` de la clase, que cargará y almacenará en caché la información del proveedor:</span><span class="sxs-lookup"><span data-stu-id="472ca-212">In `Application_Start`, simply call the `StaticCache` class's `LoadStaticCache()` method, which will load and cache the supplier information:</span></span>

[!code-aspx[Main](caching-data-at-application-startup-cs/samples/sample6.aspx)]

<span data-ttu-id="472ca-213">Así de simple.</span><span class="sxs-lookup"><span data-stu-id="472ca-213">That's all there is to it!</span></span> <span data-ttu-id="472ca-214">Al iniciarse la aplicación `LoadStaticCache()` , el método tomará la información del proveedor de la capa BLL y la almacenará en una variable miembro estática (o en el almacén de caché `StaticCache` que haya terminado usando en la clase).</span><span class="sxs-lookup"><span data-stu-id="472ca-214">At application startup, the `LoadStaticCache()` method will grab the supplier information from the BLL, and store it in a static member variable (or whatever cache store you ended up using in the `StaticCache` class).</span></span> <span data-ttu-id="472ca-215">Para comprobar este comportamiento, establezca un punto de interrupción `Application_Start` en el método y ejecute la aplicación.</span><span class="sxs-lookup"><span data-stu-id="472ca-215">To verify this behavior, set a breakpoint in the `Application_Start` method and run your application.</span></span> <span data-ttu-id="472ca-216">Tenga en cuenta que el punto de interrupción se alcanza en el inicio de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="472ca-216">Note that the breakpoint is hit upon the application starting.</span></span> <span data-ttu-id="472ca-217">Sin embargo, las solicitudes posteriores no hacen que `Application_Start` el método se ejecute.</span><span class="sxs-lookup"><span data-stu-id="472ca-217">Subsequent requests, however, do not cause the `Application_Start` method to execute.</span></span>

<span data-ttu-id="472ca-218">[![Usar un punto de interrupción para comprobar que se está ejecutando el controlador de eventos Application_Start](caching-data-at-application-startup-cs/_static/image7.png)](caching-data-at-application-startup-cs/_static/image6.png)</span><span class="sxs-lookup"><span data-stu-id="472ca-218">[![Use a Breakpoint to Verify that the Application_Start Event Handler is Being Executed](caching-data-at-application-startup-cs/_static/image7.png)](caching-data-at-application-startup-cs/_static/image6.png)</span></span>

<span data-ttu-id="472ca-219">**Figura 4**: Use un punto de interrupción para comprobar `Application_Start` que el controlador de eventos se está ejecutando ([haga clic para ver la imagen de tamaño completo](caching-data-at-application-startup-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="472ca-219">**Figure 4**: Use a Breakpoint to Verify that the `Application_Start` Event Handler is Being Executed ([Click to view full-size image](caching-data-at-application-startup-cs/_static/image8.png))</span></span>

> [!NOTE]
> <span data-ttu-id="472ca-220">Si no alcanza el punto de `Application_Start` interrupción la primera vez que inicia la depuración, se debe a que ya se ha iniciado la aplicación.</span><span class="sxs-lookup"><span data-stu-id="472ca-220">If you do not hit the `Application_Start` breakpoint when you first start debugging, it is because your application has already started.</span></span> <span data-ttu-id="472ca-221">Fuerce la aplicación para que se reinicie mediante `Global.asax` la `Web.config` modificación de los archivos o y, a continuación, vuelva a intentarlo.</span><span class="sxs-lookup"><span data-stu-id="472ca-221">Force the application to restart by modifying your `Global.asax` or `Web.config` files and then try again.</span></span> <span data-ttu-id="472ca-222">Simplemente puede Agregar (o quitar) una línea en blanco al final de uno de estos archivos para reiniciar rápidamente la aplicación.</span><span class="sxs-lookup"><span data-stu-id="472ca-222">You can simply add (or remove) a blank line at the end of one of these files to quickly restart the application.</span></span>

## <a name="step-5-displaying-the-cached-data"></a><span data-ttu-id="472ca-223">Paso 5: Mostrar los datos almacenados en caché</span><span class="sxs-lookup"><span data-stu-id="472ca-223">Step 5: Displaying the Cached Data</span></span>

<span data-ttu-id="472ca-224">En este momento, `StaticCache` la clase tiene una versión de los datos de proveedor almacenados en caché al iniciarse la aplicación a la `GetSuppliers()` que se puede tener acceso a través de su método.</span><span class="sxs-lookup"><span data-stu-id="472ca-224">At this point the `StaticCache` class has a version of the supplier data cached at application startup that can be accessed through its `GetSuppliers()` method.</span></span> <span data-ttu-id="472ca-225">Para trabajar con estos datos desde la capa de presentación, podemos usar un ObjectDataSource o invocar mediante programación `StaticCache` el método `GetSuppliers()` de la clase desde la clase de código subyacente de una página de ASP.net.</span><span class="sxs-lookup"><span data-stu-id="472ca-225">To work with this data from the Presentation Layer, we can use an ObjectDataSource or programmatically invoke the `StaticCache` class's `GetSuppliers()` method from an ASP.NET page's code-behind class.</span></span> <span data-ttu-id="472ca-226">Echemos un vistazo al uso de los controles ObjectDataSource y GridView para mostrar la información de proveedor almacenada en caché.</span><span class="sxs-lookup"><span data-stu-id="472ca-226">Let's look at using the ObjectDataSource and GridView controls to display the cached supplier information.</span></span>

<span data-ttu-id="472ca-227">Para empezar, Abra `AtApplicationStartup.aspx` la página en `Caching` la carpeta.</span><span class="sxs-lookup"><span data-stu-id="472ca-227">Start by opening the `AtApplicationStartup.aspx` page in the `Caching` folder.</span></span> <span data-ttu-id="472ca-228">Arrastre un control GridView desde el cuadro de herramientas hasta el diseñador `ID` y establezca `Suppliers`su propiedad en.</span><span class="sxs-lookup"><span data-stu-id="472ca-228">Drag a GridView from the Toolbox onto the designer, setting its `ID` property to `Suppliers`.</span></span> <span data-ttu-id="472ca-229">A continuación, desde la etiqueta inteligente de GridView, elija crear un nuevo ObjectDataSource `SuppliersCachedDataSource`denominado.</span><span class="sxs-lookup"><span data-stu-id="472ca-229">Next, from the GridView's smart tag choose to create a new ObjectDataSource named `SuppliersCachedDataSource`.</span></span> <span data-ttu-id="472ca-230">Configure ObjectDataSource para usar el `StaticCache` método de `GetSuppliers()` la clase.</span><span class="sxs-lookup"><span data-stu-id="472ca-230">Configure the ObjectDataSource to use the `StaticCache` class's `GetSuppliers()` method.</span></span>

<span data-ttu-id="472ca-231">[![Configurar ObjectDataSource para usar la clase StaticCache](caching-data-at-application-startup-cs/_static/image10.png)](caching-data-at-application-startup-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="472ca-231">[![Configure the ObjectDataSource to use the StaticCache Class](caching-data-at-application-startup-cs/_static/image10.png)](caching-data-at-application-startup-cs/_static/image9.png)</span></span>

<span data-ttu-id="472ca-232">**Figura 5**: Configurar ObjectDataSource para usar la clase `StaticCache` ([haga clic para ver la imagen de tamaño completo](caching-data-at-application-startup-cs/_static/image11.png))</span><span class="sxs-lookup"><span data-stu-id="472ca-232">**Figure 5**: Configure the ObjectDataSource to use the `StaticCache` Class ([Click to view full-size image](caching-data-at-application-startup-cs/_static/image11.png))</span></span>

<span data-ttu-id="472ca-233">[![Usar el método GetSuppliers () para recuperar los datos de proveedor almacenados en caché](caching-data-at-application-startup-cs/_static/image13.png)](caching-data-at-application-startup-cs/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="472ca-233">[![Use the GetSuppliers() Method to Retrieve the Cached Supplier Data](caching-data-at-application-startup-cs/_static/image13.png)](caching-data-at-application-startup-cs/_static/image12.png)</span></span>

<span data-ttu-id="472ca-234">**Ilustración 6**: Use el `GetSuppliers()` método para recuperar los datos de proveedor almacenados en caché ([haga clic para ver la imagen de tamaño completo](caching-data-at-application-startup-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="472ca-234">**Figure 6**: Use the `GetSuppliers()` Method to Retrieve the Cached Supplier Data ([Click to view full-size image](caching-data-at-application-startup-cs/_static/image14.png))</span></span>

<span data-ttu-id="472ca-235">Después de completar el asistente, Visual Studio agregará automáticamente BoundFields para cada uno de los campos `SuppliersDataTable`de datos de.</span><span class="sxs-lookup"><span data-stu-id="472ca-235">After completing the wizard, Visual Studio will automatically add BoundFields for each of the data fields in `SuppliersDataTable`.</span></span> <span data-ttu-id="472ca-236">El marcado declarativo de GridView y ObjectDataSource debe ser similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="472ca-236">Your GridView and ObjectDataSource's declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](caching-data-at-application-startup-cs/samples/sample7.aspx)]

<span data-ttu-id="472ca-237">En la ilustración 7 se muestra la página cuando se ve a través de un explorador.</span><span class="sxs-lookup"><span data-stu-id="472ca-237">Figure 7 shows the page when viewed through a browser.</span></span> <span data-ttu-id="472ca-238">La salida es la misma en la que se extrajeron los datos `SuppliersBLL` de la clase de la `StaticCache` capa BLL, pero el uso de la clase devuelve los datos del proveedor como almacenamiento en caché al iniciar la aplicación.</span><span class="sxs-lookup"><span data-stu-id="472ca-238">The output is the same had we pulled the data from the BLL's `SuppliersBLL` class, but using the `StaticCache` class returns the supplier data as cached at application startup.</span></span> <span data-ttu-id="472ca-239">Puede establecer puntos de interrupción en el `StaticCache` método de `GetSuppliers()` la clase para comprobar este comportamiento.</span><span class="sxs-lookup"><span data-stu-id="472ca-239">You can set breakpoints in the `StaticCache` class's `GetSuppliers()` method to verify this behavior.</span></span>

<span data-ttu-id="472ca-240">[![Los datos de proveedor almacenados en caché se muestran en un control GridView](caching-data-at-application-startup-cs/_static/image16.png)](caching-data-at-application-startup-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="472ca-240">[![The Cached Supplier Data is Displayed in a GridView](caching-data-at-application-startup-cs/_static/image16.png)](caching-data-at-application-startup-cs/_static/image15.png)</span></span>

<span data-ttu-id="472ca-241">**Figura 7**: Los datos de proveedor almacenados en caché se muestran en un control GridView ([haga clic para ver la imagen de tamaño completo](caching-data-at-application-startup-cs/_static/image17.png))</span><span class="sxs-lookup"><span data-stu-id="472ca-241">**Figure 7**: The Cached Supplier Data is Displayed in a GridView ([Click to view full-size image](caching-data-at-application-startup-cs/_static/image17.png))</span></span>

## <a name="summary"></a><span data-ttu-id="472ca-242">Resumen</span><span class="sxs-lookup"><span data-stu-id="472ca-242">Summary</span></span>

<span data-ttu-id="472ca-243">La mayoría de los modelos de datos contienen una cantidad equitativa de datos estáticos, que normalmente se implementan en forma de tablas de búsqueda.</span><span class="sxs-lookup"><span data-stu-id="472ca-243">Most every data model contains a fair amount of static data, usually implemented in the form of lookup tables.</span></span> <span data-ttu-id="472ca-244">Dado que esta información es estática, no hay ningún motivo para tener acceso continuamente a la base de datos cada vez que es necesario mostrar esta información.</span><span class="sxs-lookup"><span data-stu-id="472ca-244">Since this information is static, there's no reason to continually access the database each time this information needs to be displayed.</span></span> <span data-ttu-id="472ca-245">Además, debido a su naturaleza estática, al almacenar en caché los datos, no es necesario que expiren.</span><span class="sxs-lookup"><span data-stu-id="472ca-245">Furthermore, due to its static nature, when caching the data there's no need for an expiry.</span></span> <span data-ttu-id="472ca-246">En este tutorial vimos cómo tomar estos datos y almacenarlos en caché en la memoria caché de datos, en el estado de la aplicación y a través de una variable miembro estática.</span><span class="sxs-lookup"><span data-stu-id="472ca-246">In this tutorial we saw how to take such data and cache it in the data cache, application state, and through a static member variable.</span></span> <span data-ttu-id="472ca-247">Esta información se almacena en la memoria caché durante el inicio de la aplicación y permanece en la memoria caché a lo largo de la duración de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="472ca-247">This information is cached at application startup and remains in the cache throughout the application's lifetime.</span></span>

<span data-ttu-id="472ca-248">En este tutorial y en los dos últimos, hemos examinado los datos de almacenamiento en caché durante la duración de la aplicación, así como el uso de expiraciones basadas en el tiempo.</span><span class="sxs-lookup"><span data-stu-id="472ca-248">In this tutorial and the past two, we ve looked at caching data for the duration of the application's lifetime as well as using time-based expiries.</span></span> <span data-ttu-id="472ca-249">Sin embargo, al almacenar en caché los datos de la base de datos, una expiración basada en el tiempo puede ser menor que la ideal.</span><span class="sxs-lookup"><span data-stu-id="472ca-249">When caching database data, though, a time-based expiry may be less than ideal.</span></span> <span data-ttu-id="472ca-250">En lugar de vaciar periódicamente la memoria caché, sería óptimo desalojar solo el elemento almacenado en caché cuando se modifican los datos de la base de datos subyacente.</span><span class="sxs-lookup"><span data-stu-id="472ca-250">Rather than periodically flushing the cache, it would be optimal to only evict the cached item when the underlying database data is modified.</span></span> <span data-ttu-id="472ca-251">Este ideal es posible mediante el uso de dependencias de caché de SQL, que examinaremos en el siguiente tutorial.</span><span class="sxs-lookup"><span data-stu-id="472ca-251">This ideal is possible through the use of SQL cache dependencies, which we'll examine in our next tutorial.</span></span>

<span data-ttu-id="472ca-252">¡ Feliz programación!</span><span class="sxs-lookup"><span data-stu-id="472ca-252">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="472ca-253">Acerca del autor</span><span class="sxs-lookup"><span data-stu-id="472ca-253">About the Author</span></span>

<span data-ttu-id="472ca-254">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor de siete libros de ASP/ASP. net y fundador de [4GuysFromRolla.com](http://www.4guysfromrolla.com), ha estado trabajando con las tecnologías Web de Microsoft desde 1998.</span><span class="sxs-lookup"><span data-stu-id="472ca-254">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="472ca-255">Scott funciona como consultor, profesor y redactor independiente.</span><span class="sxs-lookup"><span data-stu-id="472ca-255">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="472ca-256">Su último libro es [*SAM enseñar a usted mismo ASP.NET 2.0 en 24 horas*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="472ca-256">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="472ca-257">Puede ponerse en contacto con [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="472ca-257">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="472ca-258">o a través de su blog, que encontrará en [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="472ca-258">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="472ca-259">Agradecimiento especial a</span><span class="sxs-lookup"><span data-stu-id="472ca-259">Special Thanks To</span></span>

<span data-ttu-id="472ca-260">Muchos revisores útiles revisaron esta serie de tutoriales.</span><span class="sxs-lookup"><span data-stu-id="472ca-260">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="472ca-261">Los revisores responsables de este tutorial eran Teresa Murphy y Zack Jones.</span><span class="sxs-lookup"><span data-stu-id="472ca-261">Lead reviewers for this tutorial were Teresa Murphy and Zack Jones.</span></span> <span data-ttu-id="472ca-262">¿Está interesado en revisar los próximos artículos de MSDN?</span><span class="sxs-lookup"><span data-stu-id="472ca-262">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="472ca-263">Si es así, suéltelo en una línea en [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="472ca-263">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="472ca-264">[Anterior](caching-data-in-the-architecture-cs.md)
> [Siguiente](using-sql-cache-dependencies-cs.md)</span><span class="sxs-lookup"><span data-stu-id="472ca-264">[Previous](caching-data-in-the-architecture-cs.md)
[Next](using-sql-cache-dependencies-cs.md)</span></span>
