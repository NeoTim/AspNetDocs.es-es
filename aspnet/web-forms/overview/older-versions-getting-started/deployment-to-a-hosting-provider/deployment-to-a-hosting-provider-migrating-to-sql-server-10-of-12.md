---
uid: web-forms/overview/older-versions-getting-started/deployment-to-a-hosting-provider/deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12
title: 'Implementación de una aplicación Web de ASP.NET con SQL Server Compact con Visual Studio o Visual Web Developer: migración a SQL Server-10 de 12 | Microsoft Docs'
author: tdykstra
description: En esta serie de tutoriales se muestra cómo implementar (publicar) un proyecto de aplicación Web de ASP.NET que incluye una base de datos de SQL Server Compact mediante Visual Stu...
ms.author: riande
ms.date: 11/17/2011
ms.assetid: a89d6f32-b71b-4036-8ff7-5f8ac2a6eca8
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deployment-to-a-hosting-provider/deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12
msc.type: authoredcontent
ms.openlocfilehash: c5281a42596d95e725b32e652c75785abe0fd64e
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 11/28/2019
ms.locfileid: "74640557"
---
# <a name="deploying-an-aspnet-web-application-with-sql-server-compact-using-visual-studio-or-visual-web-developer-migrating-to-sql-server---10-of-12"></a><span data-ttu-id="f2efc-103">Implementación de una aplicación Web de ASP.NET con SQL Server Compact con Visual Studio o Visual Web Developer: migración a SQL Server-10 de 12</span><span class="sxs-lookup"><span data-stu-id="f2efc-103">Deploying an ASP.NET Web Application with SQL Server Compact using Visual Studio or Visual Web Developer: Migrating to SQL Server - 10 of 12</span></span>

<span data-ttu-id="f2efc-104">por [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="f2efc-104">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

[<span data-ttu-id="f2efc-105">Descargar el proyecto de inicio</span><span class="sxs-lookup"><span data-stu-id="f2efc-105">Download Starter Project</span></span>](https://code.msdn.microsoft.com/Deploying-an-ASPNET-Web-4e31366b)

> <span data-ttu-id="f2efc-106">En esta serie de tutoriales se muestra cómo implementar (publicar) un proyecto de aplicación Web ASP.NET que incluye una base de datos SQL Server Compact mediante Visual Studio 2012 RC o Visual Studio Express 2012 RC para Web.</span><span class="sxs-lookup"><span data-stu-id="f2efc-106">This series of tutorials shows you how to deploy (publish) an ASP.NET web application project that includes a SQL Server Compact database by using Visual Studio 2012 RC or Visual Studio Express 2012 RC for Web.</span></span> <span data-ttu-id="f2efc-107">También puede usar Visual Studio 2010 si instala la actualización de publicación Web.</span><span class="sxs-lookup"><span data-stu-id="f2efc-107">You can also use Visual Studio 2010 if you install the Web Publish Update.</span></span> <span data-ttu-id="f2efc-108">Para obtener una introducción a la serie, vea [el primer tutorial de la serie](deployment-to-a-hosting-provider-introduction-1-of-12.md).</span><span class="sxs-lookup"><span data-stu-id="f2efc-108">For an introduction to the series, see [the first tutorial in the series](deployment-to-a-hosting-provider-introduction-1-of-12.md).</span></span>
> 
> <span data-ttu-id="f2efc-109">Para ver un tutorial que muestra las características de implementación que se introdujeron después de la versión RC de Visual Studio 2012, muestra cómo implementar SQL Server ediciones distintas de SQL Server Compact y muestra cómo realizar la implementación en Azure App Service Web Apps, vea [implementación web de ASP.net con Visual Studio](../../deployment/visual-studio-web-deployment/introduction.md).</span><span class="sxs-lookup"><span data-stu-id="f2efc-109">For a tutorial that shows deployment features introduced after the RC release of Visual Studio 2012, shows how to deploy SQL Server editions other than SQL Server Compact, and shows how to deploy to Azure App Service Web Apps, see [ASP.NET Web Deployment using Visual Studio](../../deployment/visual-studio-web-deployment/introduction.md).</span></span>

## <a name="overview"></a><span data-ttu-id="f2efc-110">Información general del</span><span class="sxs-lookup"><span data-stu-id="f2efc-110">Overview</span></span>

<span data-ttu-id="f2efc-111">En este tutorial se muestra cómo migrar de SQL Server Compact a SQL Server.</span><span class="sxs-lookup"><span data-stu-id="f2efc-111">This tutorial shows you how to migrate from SQL Server Compact to SQL Server.</span></span> <span data-ttu-id="f2efc-112">Uno de los motivos por los que podría querer hacer esto es aprovechar las ventajas de SQL Server características que SQL Server Compact no admite, como procedimientos almacenados, desencadenadores, vistas o replicación.</span><span class="sxs-lookup"><span data-stu-id="f2efc-112">One reason you might want to do that is to take advantage of SQL Server features that SQL Server Compact does not support, such as stored procedures, triggers, views, or replication.</span></span> <span data-ttu-id="f2efc-113">Para obtener más información sobre las diferencias entre SQL Server Compact y SQL Server, vea el tutorial [implementación de SQL Server Compact](deployment-to-a-hosting-provider-deploying-sql-server-compact-databases-2-of-12.md) .</span><span class="sxs-lookup"><span data-stu-id="f2efc-113">For more information about the differences between SQL Server Compact and SQL Server, see the [Deploying SQL Server Compact](deployment-to-a-hosting-provider-deploying-sql-server-compact-databases-2-of-12.md) tutorial.</span></span>

### <a name="sql-server-express-versus-full-sql-server-for-development"></a><span data-ttu-id="f2efc-114">SQL Server Express frente a SQL Server completos para el desarrollo</span><span class="sxs-lookup"><span data-stu-id="f2efc-114">SQL Server Express versus full SQL Server for Development</span></span>

<span data-ttu-id="f2efc-115">Una vez que haya decidido actualizar a SQL Server, es posible que desee usar SQL Server o SQL Server Express en los entornos de desarrollo y pruebas.</span><span class="sxs-lookup"><span data-stu-id="f2efc-115">Once you've decided to upgrade to SQL Server, you might want to use SQL Server or SQL Server Express in your development and test environments.</span></span> <span data-ttu-id="f2efc-116">Además de las diferencias en la compatibilidad de herramientas y en las características del motor de base de datos, existen diferencias en las implementaciones de proveedor entre SQL Server Compact y otras versiones de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="f2efc-116">In addition to the differences in tool support and in database engine features, there are differences in provider implementations between SQL Server Compact and other versions of SQL Server.</span></span> <span data-ttu-id="f2efc-117">Estas diferencias pueden hacer que el mismo código genere resultados diferentes.</span><span class="sxs-lookup"><span data-stu-id="f2efc-117">These differences can cause the same code to generate different results.</span></span> <span data-ttu-id="f2efc-118">Por lo tanto, si decide mantener SQL Server Compact como base de datos de desarrollo, debe probar exhaustivamente el sitio en SQL Server o SQL Server Express en un entorno de prueba antes de cada implementación en producción.</span><span class="sxs-lookup"><span data-stu-id="f2efc-118">Therefore, if you decide to keep SQL Server Compact as your development database, you should thoroughly test your site in SQL Server or SQL Server Express in a test environment before each deployment to production.</span></span>

<span data-ttu-id="f2efc-119">A diferencia de SQL Server Compact, SQL Server Express es esencialmente el mismo motor de base de datos y usa el mismo proveedor .NET que SQL Server completo.</span><span class="sxs-lookup"><span data-stu-id="f2efc-119">Unlike SQL Server Compact, SQL Server Express is essentially the same database engine and uses the same .NET provider as full SQL Server.</span></span> <span data-ttu-id="f2efc-120">Al probar con SQL Server Express, puede estar seguro de obtener los mismos resultados que con SQL Server.</span><span class="sxs-lookup"><span data-stu-id="f2efc-120">When you test with SQL Server Express, you can be confident of getting the same results as you will with SQL Server.</span></span> <span data-ttu-id="f2efc-121">Puede usar la mayoría de las herramientas de bases de datos con SQL Server Express que puede usar con SQL Server (una excepción importante es [SQL Server Profiler](https://msdn.microsoft.com/library/ms181091.aspx)) y admite otras características de SQL Server como procedimientos almacenados, vistas, desencadenadores y replicación.</span><span class="sxs-lookup"><span data-stu-id="f2efc-121">You can use most of the same database tools with SQL Server Express that you can use with SQL Server (a notable exception being [SQL Server Profiler](https://msdn.microsoft.com/library/ms181091.aspx)), and it supports other features of SQL Server like stored procedures, views, triggers, and replication.</span></span> <span data-ttu-id="f2efc-122">Sin embargo, normalmente tiene que usar SQL Server completo en un sitio web de producción.</span><span class="sxs-lookup"><span data-stu-id="f2efc-122">(You typically have to use full SQL Server in a production website, however.</span></span> <span data-ttu-id="f2efc-123">SQL Server Express puede ejecutarse en un entorno de hospedaje compartido, pero no se diseñó para eso y muchos proveedores de hospedaje no lo admiten).</span><span class="sxs-lookup"><span data-stu-id="f2efc-123">SQL Server Express can run in a shared hosting environment, but it was not designed for that, and many hosting providers do not support it.)</span></span>

<span data-ttu-id="f2efc-124">Si usa Visual Studio 2012, normalmente elige SQL Server Express LocalDB para el entorno de desarrollo, ya que es lo que se instala de forma predeterminada con Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="f2efc-124">If you are using Visual Studio 2012, you typically choose SQL Server Express LocalDB for your development environment because that is what is installed by default with Visual Studio.</span></span> <span data-ttu-id="f2efc-125">Sin embargo, LocalDB no funciona en IIS, por lo que para el entorno de prueba tiene que usar SQL Server o SQL Server Express.</span><span class="sxs-lookup"><span data-stu-id="f2efc-125">However, LocalDB does not work in IIS, so for your test environment you have to use either SQL Server or SQL Server Express.</span></span>

### <a name="combining-databases-versus-keeping-them-separate"></a><span data-ttu-id="f2efc-126">Combinar bases de datos frente a mantenerlas independientes</span><span class="sxs-lookup"><span data-stu-id="f2efc-126">Combining Databases versus Keeping Them Separate</span></span>

<span data-ttu-id="f2efc-127">La aplicación contoso University tiene dos bases de datos SQL Server Compact: la base de datos de pertenencia (*Aspnet. sdf*) y la base de datos de la aplicación (*School. sdf*).</span><span class="sxs-lookup"><span data-stu-id="f2efc-127">The Contoso University application has two SQL Server Compact databases: the membership database (*aspnet.sdf*) and the application database (*School.sdf*).</span></span> <span data-ttu-id="f2efc-128">Al migrar, puede migrar estas bases de datos a dos bases de datos independientes o a una base de datos única.</span><span class="sxs-lookup"><span data-stu-id="f2efc-128">When you migrate, you can migrate these databases to two separate databases or to a single database.</span></span> <span data-ttu-id="f2efc-129">Puede combinarlos para facilitar las combinaciones de bases de datos entre la base de datos de la aplicación y la base de datos de pertenencia.</span><span class="sxs-lookup"><span data-stu-id="f2efc-129">You might want to combine them in order to facilitate database joins between your application database and your membership database.</span></span> <span data-ttu-id="f2efc-130">El plan de hospedaje también puede proporcionar un motivo para combinarlos.</span><span class="sxs-lookup"><span data-stu-id="f2efc-130">Your hosting plan might also provide a reason to combine them.</span></span> <span data-ttu-id="f2efc-131">Por ejemplo, el proveedor de hospedaje puede cobrar más para varias bases de datos o incluso no permitir más de una base de datos.</span><span class="sxs-lookup"><span data-stu-id="f2efc-131">For example, the hosting provider might charge more for multiple databases or might not even allow more than one database.</span></span> <span data-ttu-id="f2efc-132">Este es el caso de la cuenta de hospedaje de Cytanium Lite que se usa en este tutorial, que permite una sola base de datos de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="f2efc-132">That's the case with the Cytanium Lite hosting account that's used for this tutorial, which allows only a single SQL Server database.</span></span>

<span data-ttu-id="f2efc-133">En este tutorial, migrará las dos bases de datos de esta manera:</span><span class="sxs-lookup"><span data-stu-id="f2efc-133">In this tutorial, you'll migrate your two databases this way:</span></span>

- <span data-ttu-id="f2efc-134">Migre a dos bases de datos LocalDB en el entorno de desarrollo.</span><span class="sxs-lookup"><span data-stu-id="f2efc-134">Migrate to two LocalDB databases in the development environment.</span></span>
- <span data-ttu-id="f2efc-135">Migre a dos bases de datos de SQL Server Express en el entorno de prueba.</span><span class="sxs-lookup"><span data-stu-id="f2efc-135">Migrate to two SQL Server Express databases in the test environment.</span></span>
- <span data-ttu-id="f2efc-136">Migre a una base de datos de SQL Server completa combinada en el entorno de producción.</span><span class="sxs-lookup"><span data-stu-id="f2efc-136">Migrate to one combined full SQL Server database in the production environment.</span></span>

<span data-ttu-id="f2efc-137">Aviso: Si recibe un mensaje de error o algo no funciona a medida que avanza en el tutorial, asegúrese de consultar la [Página de solución de problemas](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12.md).</span><span class="sxs-lookup"><span data-stu-id="f2efc-137">Reminder: If you get an error message or something doesn't work as you go through the tutorial, be sure to check the [troubleshooting page](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12.md).</span></span>

## <a name="installing-sql-server-express"></a><span data-ttu-id="f2efc-138">Instalación de SQL Server Express</span><span class="sxs-lookup"><span data-stu-id="f2efc-138">Installing SQL Server Express</span></span>

<span data-ttu-id="f2efc-139">SQL Server Express se instala automáticamente de forma predeterminada con Visual Studio 2010, pero de forma predeterminada no se instala con Visual Studio 2012.</span><span class="sxs-lookup"><span data-stu-id="f2efc-139">SQL Server Express is automatically installed by default with Visual Studio 2010, but by default it is not installed with Visual Studio 2012.</span></span> <span data-ttu-id="f2efc-140">Para instalar SQL Server Express 2012, haga clic en el siguiente vínculo:</span><span class="sxs-lookup"><span data-stu-id="f2efc-140">To install SQL Server 2012 Express, click the following link</span></span>

- [<span data-ttu-id="f2efc-141">SQL Server Express 2012</span><span class="sxs-lookup"><span data-stu-id="f2efc-141">SQL Server Express 2012</span></span>](https://www.microsoft.com/download/details.aspx?id=29062)

<span data-ttu-id="f2efc-142">Elija *ENU/x64/SQLEXPR\_x64\_ENU. exe* o *ENU/x86/SQLEXPR\_x86\_ENU. exe*y, en el Asistente para la instalación, acepte la configuración predeterminada.</span><span class="sxs-lookup"><span data-stu-id="f2efc-142">Choose *ENU/x64/SQLEXPR\_x64\_ENU.exe* or *ENU/x86/SQLEXPR\_x86\_ENU.exe*, and in the installation wizard accept the default settings.</span></span> <span data-ttu-id="f2efc-143">Para obtener más información acerca de las opciones de instalación, consulte [instalación de SQL Server 2012 desde el Asistente para la instalación (programa de instalación)](https://msdn.microsoft.com/library/ms143219.aspx).</span><span class="sxs-lookup"><span data-stu-id="f2efc-143">For more information about installation options, see [Install SQL Server 2012 from the Installation Wizard (Setup)](https://msdn.microsoft.com/library/ms143219.aspx).</span></span>

## <a name="creating-sql-server-express-databases-for-the-test-environment"></a><span data-ttu-id="f2efc-144">Crear bases de datos de SQL Server Express para el entorno de prueba</span><span class="sxs-lookup"><span data-stu-id="f2efc-144">Creating SQL Server Express Databases for the Test Environment</span></span>

<span data-ttu-id="f2efc-145">El siguiente paso consiste en crear las bases de datos de pertenencia y escuela de ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="f2efc-145">The next step is to create the ASP.NET membership and School databases.</span></span>

<span data-ttu-id="f2efc-146">En el **menú Ver** , seleccione **Explorador de servidores** (**Explorador de bases de datos** en Visual Web Developer) y, a continuación, haga clic con el botón secundario en conexiones de datos y seleccione **crear nueva SQL Server base**de **datos** .</span><span class="sxs-lookup"><span data-stu-id="f2efc-146">From the **View** menu select **Server Explorer** (**Database Explorer** in Visual Web Developer), and then right-click **Data Connections** and select **Create New SQL Server Database**.</span></span>

![Selecting_Create_New_SQL_Server_Database](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image1.png)

<span data-ttu-id="f2efc-148">En el cuadro de diálogo **crear nueva SQL Server base de datos** , escriba ".\SQLExpress" en el cuadro **nombre del servidor** y "ASPNET-test" en el cuadro Nombre de la **nueva base de datos** y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="f2efc-148">In the **Create New SQL Server Database** dialog box, enter ".\SQLExpress" in the **Server name** box and "aspnet-Test" in the **New database name** box, then click **OK**.</span></span>

![Create_New_SQL_Server_Database_aspnet](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image2.png)

<span data-ttu-id="f2efc-150">Siga el mismo procedimiento para crear una nueva base de datos de SQL Server Express School denominada "School-test".</span><span class="sxs-lookup"><span data-stu-id="f2efc-150">Follow the same procedure to create a new SQL Server Express School database named "School-Test".</span></span>

<span data-ttu-id="f2efc-151">(Va a anexar "Test" a estos nombres de base de datos, ya que más adelante creará una instancia adicional de cada base de datos para el entorno de desarrollo y tendrá que ser capaz de diferenciar los dos conjuntos de bases de datos).</span><span class="sxs-lookup"><span data-stu-id="f2efc-151">(You're appending "Test" to these database names because later you'll create an additional instance of each database for the development environment, and you need to be able to differentiate the two sets of databases.)</span></span>

<span data-ttu-id="f2efc-152">Ahora **Explorador de servidores** muestra las dos nuevas bases de datos.</span><span class="sxs-lookup"><span data-stu-id="f2efc-152">**Server Explorer** now shows the two new databases.</span></span>

![New_databases_in_Server_Explorer](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image3.png)

## <a name="creating-a-grant-script-for-the-new-databases"></a><span data-ttu-id="f2efc-154">Crear un script de concesión para las nuevas bases de datos</span><span class="sxs-lookup"><span data-stu-id="f2efc-154">Creating a Grant Script for the New Databases</span></span>

<span data-ttu-id="f2efc-155">Cuando la aplicación se ejecuta en IIS en el equipo de desarrollo, la aplicación obtiene acceso a la base de datos mediante las credenciales del grupo de aplicaciones predeterminadas.</span><span class="sxs-lookup"><span data-stu-id="f2efc-155">When the application runs in IIS on your development computer, the application accesses the database by using the default application pool's credentials.</span></span> <span data-ttu-id="f2efc-156">Sin embargo, de forma predeterminada, la identidad del grupo de aplicaciones no tiene permiso para abrir las bases de datos.</span><span class="sxs-lookup"><span data-stu-id="f2efc-156">However, by default, the application pool identity does not have permission to open the databases.</span></span> <span data-ttu-id="f2efc-157">Por lo tanto, tiene que ejecutar un script para conceder ese permiso.</span><span class="sxs-lookup"><span data-stu-id="f2efc-157">So you have to run a script to grant that permission.</span></span> <span data-ttu-id="f2efc-158">En esta sección, creará el script que ejecutará más adelante para asegurarse de que la aplicación puede abrir las bases de datos cuando se ejecuta en IIS.</span><span class="sxs-lookup"><span data-stu-id="f2efc-158">In this section you create the script that you'll run later to make sure that the application can open the databases when it runs in IIS.</span></span>

<span data-ttu-id="f2efc-159">En la carpeta *SolutionFiles* de la solución que ha creado en el tutorial [implementación del entorno de producción](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12.md) , cree un nuevo archivo SQL denominado *Grant. SQL*.</span><span class="sxs-lookup"><span data-stu-id="f2efc-159">In the solution's *SolutionFiles* folder that you created in the [Deploying to the Production Environment](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12.md) tutorial, create a new SQL file named *Grant.sql*.</span></span> <span data-ttu-id="f2efc-160">Copie los siguientes comandos SQL en el archivo y, a continuación, guarde y cierre el archivo:</span><span class="sxs-lookup"><span data-stu-id="f2efc-160">Copy the following SQL commands into the file, and then save and close the file:</span></span>

[!code-sql[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample1.sql)]

> [!NOTE]
> <span data-ttu-id="f2efc-161">Este script está diseñado para funcionar con SQL Server 2008 y con la configuración de IIS en Windows 7, tal y como se especifica en este tutorial.</span><span class="sxs-lookup"><span data-stu-id="f2efc-161">This script is designed to work with SQL Server 2008 and with the IIS settings in Windows 7 as they are specified in this tutorial.</span></span> <span data-ttu-id="f2efc-162">Si usa una versión diferente de SQL Server o de Windows, o si configura IIS en el equipo de forma diferente, es posible que se necesiten cambios en este script.</span><span class="sxs-lookup"><span data-stu-id="f2efc-162">If you're using a different version of SQL Server or of Windows, or if you set up IIS on your computer differently, changes to this script might be required.</span></span> <span data-ttu-id="f2efc-163">Para obtener más información sobre los scripts de SQL Server, vea [libros en pantalla de SQL Server](https://go.microsoft.com/fwlink/?LinkId=132511).</span><span class="sxs-lookup"><span data-stu-id="f2efc-163">For more information about SQL Server scripts, see [SQL Server Books Online](https://go.microsoft.com/fwlink/?LinkId=132511).</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="f2efc-164">**Nota de seguridad** Este script proporciona permisos de propietario de\_dB al usuario que tiene acceso a la base de datos en tiempo de ejecución, que es lo que tendrá en el entorno de producción.</span><span class="sxs-lookup"><span data-stu-id="f2efc-164">**Security Note** This script gives db\_owner permissions to the user that accesses the database at run time, which is what you'll have in the production environment.</span></span> <span data-ttu-id="f2efc-165">En algunos escenarios, es posible que desee especificar un usuario que tenga permisos de actualización de esquemas de base de datos completos solo para la implementación y especificar en tiempo de ejecución un usuario diferente que tenga permisos únicamente para leer y escribir datos.</span><span class="sxs-lookup"><span data-stu-id="f2efc-165">In some scenarios you might want to specify a user that has full database schema update permissions only for deployment, and specify for run time a different user that has permissions only to read and write data.</span></span> <span data-ttu-id="f2efc-166">Para obtener más información, vea **revisar los cambios automáticos de Web. config para migraciones de Code First** en [implementar en IIS como entorno de prueba](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12.md).</span><span class="sxs-lookup"><span data-stu-id="f2efc-166">For more information, see **Reviewing the Automatic Web.config Changes for Code First Migrations** in [Deploying to IIS as a Test Environment](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12.md).</span></span>

## <a name="configuring-database-deployment-for-the-test-environment"></a><span data-ttu-id="f2efc-167">Configurar la implementación de base de datos para el entorno de prueba</span><span class="sxs-lookup"><span data-stu-id="f2efc-167">Configuring Database Deployment for the Test Environment</span></span>

<span data-ttu-id="f2efc-168">A continuación, configurará Visual Studio para que realice las tareas siguientes para cada base de datos:</span><span class="sxs-lookup"><span data-stu-id="f2efc-168">Next, you'll configure Visual Studio so that it will do the following tasks for each database:</span></span>

- <span data-ttu-id="f2efc-169">Genere un script SQL que cree la estructura de la base de datos de origen (tablas, columnas, restricciones, etc.) en la base de datos de destino.</span><span class="sxs-lookup"><span data-stu-id="f2efc-169">Generate a SQL script that creates the source database's structure (tables, columns, constraints, etc.) in the destination database.</span></span>
- <span data-ttu-id="f2efc-170">Genera un script SQL que inserta los datos de la base de datos de origen en las tablas de la base de datos de destino.</span><span class="sxs-lookup"><span data-stu-id="f2efc-170">Generate a SQL script that inserts the source database's data into the tables in the destination database.</span></span>
- <span data-ttu-id="f2efc-171">Ejecute los scripts generados y el script de concesión que creó, en la base de datos de destino.</span><span class="sxs-lookup"><span data-stu-id="f2efc-171">Run the generated scripts, and the Grant script that you created, in the destination database.</span></span>

<span data-ttu-id="f2efc-172">Abra la ventana **propiedades del proyecto** y seleccione la pestaña **empaquetar/publicar SQL** .</span><span class="sxs-lookup"><span data-stu-id="f2efc-172">Open the **Project Properties** window and select the **Package/Publish SQL** tab.</span></span>

<span data-ttu-id="f2efc-173">Asegúrese de que **Active (release)** o **Release** está seleccionado en la lista desplegable **configuración** .</span><span class="sxs-lookup"><span data-stu-id="f2efc-173">Make sure that **Active (Release)** or **Release** is selected in the **Configuration** drop-down list.</span></span>

<span data-ttu-id="f2efc-174">Haga clic en **habilitar esta página**.</span><span class="sxs-lookup"><span data-stu-id="f2efc-174">Click **Enable this Page**.</span></span>

![Package_Publish_SQL_tab_Enable_This_page](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image4.png)

<span data-ttu-id="f2efc-176">Normalmente, la pestaña **empaquetar/publicar SQL** está deshabilitada porque especifica un método de implementación heredado.</span><span class="sxs-lookup"><span data-stu-id="f2efc-176">The **Package/Publish SQL** tab is normally disabled because it specifies a legacy deployment method.</span></span> <span data-ttu-id="f2efc-177">En la mayoría de los escenarios, debe configurar la implementación de base de datos en el Asistente para **publicación web** .</span><span class="sxs-lookup"><span data-stu-id="f2efc-177">For most scenarios, you should configure database deployment in the **Publish Web** wizard.</span></span> <span data-ttu-id="f2efc-178">La migración de SQL Server Compact a SQL Server o SQL Server Express es un caso especial para el que este método es una buena elección.</span><span class="sxs-lookup"><span data-stu-id="f2efc-178">Migrating from SQL Server Compact to SQL Server or SQL Server Express is a special case for which this method is a good choice.</span></span>

<span data-ttu-id="f2efc-179">Haga clic en **Importar desde web. config**.</span><span class="sxs-lookup"><span data-stu-id="f2efc-179">Click **Import from Web.config**.</span></span>

![Selecting_Import_from_Web. config](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image5.png)

<span data-ttu-id="f2efc-181">Visual Studio busca cadenas de conexión en el archivo *Web. config* , encuentra una para la base de datos de pertenencia y otra para la base de datos School, y agrega una fila que corresponde a cada cadena de conexión de la tabla de entradas de la **base de datos** .</span><span class="sxs-lookup"><span data-stu-id="f2efc-181">Visual Studio looks for connection strings in the *Web.config* file, finds one for the membership database and one for the School database, and adds a row corresponding to each connection string in the **Database Entries** table.</span></span> <span data-ttu-id="f2efc-182">Las cadenas de conexión que encuentra son para las bases de datos de SQL Server Compact existentes y el siguiente paso será configurar cómo y dónde implementar estas bases de datos.</span><span class="sxs-lookup"><span data-stu-id="f2efc-182">The connection strings it finds are for the existing SQL Server Compact databases, and your next step will be to configure how and where to deploy these databases.</span></span>

<span data-ttu-id="f2efc-183">Escriba la configuración de la implementación de la base de datos en la sección detalles de la entrada de la **base** **de datos** .</span><span class="sxs-lookup"><span data-stu-id="f2efc-183">You enter database deployment settings in the **Database Entry Details** section below the **Database Entries** table.</span></span> <span data-ttu-id="f2efc-184">La configuración que se muestra en la sección detalles de la entrada de la **base** de datos pertenece a la fila de la tabla entradas de la **base** de datos seleccionada, tal y como se muestra en la siguiente ilustración.</span><span class="sxs-lookup"><span data-stu-id="f2efc-184">The settings shown in the **Database Entry Details** section pertain to whichever row in the **Database Entries** table is selected, as shown in the following illustration.</span></span>

![Database_Entry_Details_section_of_Package_Publish_SQL_tab](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image6.png)

### <a name="configuring-deployment-settings-for-the-membership-database"></a><span data-ttu-id="f2efc-186">Configurar las opciones de implementación para la base de datos de pertenencia</span><span class="sxs-lookup"><span data-stu-id="f2efc-186">Configuring Deployment Settings for the Membership Database</span></span>

<span data-ttu-id="f2efc-187">Seleccione la fila **DefaultConnection-Deployment** en la tabla de entradas de la **base de datos** para configurar las opciones que se aplican a la base de datos de pertenencia.</span><span class="sxs-lookup"><span data-stu-id="f2efc-187">Select the **DefaultConnection-Deployment** row in the **Database Entries** table in order to configure settings that apply to the membership database.</span></span>

<span data-ttu-id="f2efc-188">En **cadena de conexión para la base de datos de destino**, escriba una cadena de conexión que apunte a la nueva base de datos de pertenencia a SQL Server Express.</span><span class="sxs-lookup"><span data-stu-id="f2efc-188">In **Connection string for destination database**, enter a connection string that points to the new SQL Server Express membership database.</span></span> <span data-ttu-id="f2efc-189">Puede obtener la cadena de conexión que necesita de **Explorador de servidores**.</span><span class="sxs-lookup"><span data-stu-id="f2efc-189">You can get the connection string you need from **Server Explorer**.</span></span> <span data-ttu-id="f2efc-190">En **Explorador de servidores**, expanda **conexiones de datos** y seleccione la base de datos **aspnetTest** y, a continuación, en la ventana **propiedades** , copie el valor de la **cadena de conexión** .</span><span class="sxs-lookup"><span data-stu-id="f2efc-190">In **Server Explorer**, expand **Data Connections** and select the **aspnetTest** database, then from the **Properties** window copy the **Connection String** value.</span></span>

![aspnet_connection_string_in_Server_Explorer](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image7.png)

<span data-ttu-id="f2efc-192">Aquí se reproduce la misma cadena de conexión:</span><span class="sxs-lookup"><span data-stu-id="f2efc-192">The same connection string is reproduced here:</span></span>

[!code-console[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample2.cmd)]

<span data-ttu-id="f2efc-193">Copie y pegue esta cadena de conexión en la **cadena de conexión para la base de datos de destino** en la pestaña **empaquetar/publicar SQL** .</span><span class="sxs-lookup"><span data-stu-id="f2efc-193">Copy and paste this connection string into **Connection string for destination database** in the **Package/Publish SQL** tab.</span></span>

<span data-ttu-id="f2efc-194">Asegúrese de que está seleccionada la opción **extraer datos o esquema de una base de datos existente** .</span><span class="sxs-lookup"><span data-stu-id="f2efc-194">Make sure that **Pull data and/or schema from an existing database** is selected.</span></span> <span data-ttu-id="f2efc-195">Esto es lo que hace que los scripts SQL se generen y se ejecuten automáticamente en la base de datos de destino.</span><span class="sxs-lookup"><span data-stu-id="f2efc-195">This is what causes SQL scripts to be automatically generated and run in the destination database.</span></span>

<span data-ttu-id="f2efc-196">La **cadena de conexión para el valor de la base de datos de origen** se extrae del archivo *Web. config* y apunta a la base de datos de SQL Server Compact de desarrollo.</span><span class="sxs-lookup"><span data-stu-id="f2efc-196">The **Connection string for the source database** value is extracted from the *Web.config* file and points to the development SQL Server Compact database.</span></span> <span data-ttu-id="f2efc-197">Esta es la base de datos de origen que se utilizará para generar los scripts que se ejecutarán más adelante en la base de datos de destino.</span><span class="sxs-lookup"><span data-stu-id="f2efc-197">This is the source database that will be used to generate the scripts that will run later in the destination database.</span></span> <span data-ttu-id="f2efc-198">Como desea implementar la versión de producción de la base de datos, cambie "aspnet-Dev. sdf" por "aspnet-Prod. sdf".</span><span class="sxs-lookup"><span data-stu-id="f2efc-198">Since you want to deploy the production version of the database, change "aspnet-Dev.sdf" to "aspnet-Prod.sdf".</span></span>

<span data-ttu-id="f2efc-199">Cambie **las opciones de scripting** de la base de datos del **esquema únicamente** a **esquemas y datos**, ya que desea copiar los datos (cuentas de usuario y roles), así como la estructura de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="f2efc-199">Change **Database scripting options** from **Schema Only** to **Schema and data**, since you want to copy your data (user accounts and roles) as well as the database structure.</span></span>

<span data-ttu-id="f2efc-200">Para configurar la implementación para que ejecute los scripts de concesión que creó anteriormente, tiene que agregarlos a la sección **scripts de base de datos** .</span><span class="sxs-lookup"><span data-stu-id="f2efc-200">To configure deployment to run the grant scripts that you created earlier, you have to add them to the **Database Scripts** section.</span></span> <span data-ttu-id="f2efc-201">Haga clic en **Agregar script**y, en el cuadro de diálogo **agregar scripts SQL** , navegue hasta la carpeta donde almacenó el script Grant (esta es la carpeta que contiene el archivo de solución).</span><span class="sxs-lookup"><span data-stu-id="f2efc-201">Click **Add Script**, and in the **Add SQL Scripts** dialog box, navigate to the folder where you stored the grant script (this is the folder that contains your solution file).</span></span> <span data-ttu-id="f2efc-202">Seleccione el archivo denominado *Grant. SQL*y haga clic en **abrir**.</span><span class="sxs-lookup"><span data-stu-id="f2efc-202">Select the file named *Grant.sql*, and click **Open**.</span></span>

<span data-ttu-id="f2efc-203">[![Select_File_dialog_box_grant_script](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image9.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image8.png)</span><span class="sxs-lookup"><span data-stu-id="f2efc-203">[![Select_File_dialog_box_grant_script](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image9.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image8.png)</span></span>

<span data-ttu-id="f2efc-204">La configuración de la fila **DefaultConnection-Deployment** en **las entradas** de la base de datos ahora es similar a la siguiente ilustración:</span><span class="sxs-lookup"><span data-stu-id="f2efc-204">The settings for the **DefaultConnection-Deployment** row in **Database Entries** now look like the following illustration:</span></span>

![Database_Entry_Details_for_DefaultConnection_Test](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image10.png)

### <a name="configuring-deployment-settings-for-the-school-database"></a><span data-ttu-id="f2efc-206">Configuración de las opciones de implementación de la base de datos School</span><span class="sxs-lookup"><span data-stu-id="f2efc-206">Configuring Deployment Settings for the School Database</span></span>

<span data-ttu-id="f2efc-207">A continuación, seleccione la fila **SchoolContext-Deployment** en la tabla de entradas de la **base de datos** para configurar las opciones de implementación de la base de datos School.</span><span class="sxs-lookup"><span data-stu-id="f2efc-207">Next, select the **SchoolContext-Deployment** row in the **Database Entries** table in order to configure deployment settings for the School database.</span></span>

<span data-ttu-id="f2efc-208">Puede usar el mismo método que usó anteriormente para obtener la cadena de conexión para la nueva base de datos de SQL Server Express.</span><span class="sxs-lookup"><span data-stu-id="f2efc-208">You can use the same method you used earlier to get the connection string for the new SQL Server Express database.</span></span> <span data-ttu-id="f2efc-209">Copie esta cadena de conexión en la **cadena de conexión para la base de datos de destino** en la pestaña **empaquetar/publicar SQL** .</span><span class="sxs-lookup"><span data-stu-id="f2efc-209">Copy this connection string into **Connection string for destination database** in the **Package/Publish SQL** tab.</span></span>

[!code-console[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample3.cmd)]

<span data-ttu-id="f2efc-210">Asegúrese de que está seleccionada la opción **extraer datos o esquema de una base de datos existente** .</span><span class="sxs-lookup"><span data-stu-id="f2efc-210">Make sure that **Pull data and/or schema from an existing database** is selected.</span></span>

<span data-ttu-id="f2efc-211">La **cadena de conexión para el valor de la base de datos de origen** se extrae del archivo *Web. config* y apunta a la base de datos de SQL Server Compact de desarrollo.</span><span class="sxs-lookup"><span data-stu-id="f2efc-211">The **Connection string for the source database** value is extracted from the *Web.config* file and points to the development SQL Server Compact database.</span></span> <span data-ttu-id="f2efc-212">Cambie "School-Dev. sdf" por "School-Prod. sdf" para implementar la versión de producción de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="f2efc-212">Change "School-Dev.sdf" to "School-Prod.sdf" to deploy the production version of the database.</span></span> <span data-ttu-id="f2efc-213">(Nunca ha creado un archivo School-Prod. sdf en la carpeta app\_Data, por lo que copiará ese archivo desde el entorno de prueba en la carpeta app\_data de la carpeta de proyecto ContosoUniversity más adelante).</span><span class="sxs-lookup"><span data-stu-id="f2efc-213">(You never created a School-Prod.sdf file in the App\_Data folder, so you'll copy that file from the test environment to the App\_Data folder in the ContosoUniversity project folder later.)</span></span>

<span data-ttu-id="f2efc-214">Cambiar **las opciones de scripting** de la base de **datos a esquemas y datos**.</span><span class="sxs-lookup"><span data-stu-id="f2efc-214">Change **Database scripting options** to **Schema and data**.</span></span>

<span data-ttu-id="f2efc-215">También desea ejecutar el script para conceder permiso de lectura y escritura para esta base de datos a la identidad del grupo de aplicaciones, por lo que debe agregar el archivo de script *Grant. SQL* como hizo para la base de datos de pertenencia.</span><span class="sxs-lookup"><span data-stu-id="f2efc-215">You also want to run the script to grant read and write permission for this database to the application pool identity, so add the *Grant.sql* script file as you did for the membership database.</span></span>

<span data-ttu-id="f2efc-216">Cuando haya terminado, la configuración de la fila **SchoolContext-Deployment** en **las entradas** de la base de datos será similar a la siguiente ilustración:</span><span class="sxs-lookup"><span data-stu-id="f2efc-216">When you're done, the settings for the **SchoolContext-Deployment** row in **Database Entries** look like the following illustration:</span></span>

![Database_Entry_Details_for_SchoolContext_Test](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image11.png)

<span data-ttu-id="f2efc-218">Guarde los cambios en la pestaña **empaquetar/publicar SQL** .</span><span class="sxs-lookup"><span data-stu-id="f2efc-218">Save the changes to the **Package/Publish SQL** tab.</span></span>

<span data-ttu-id="f2efc-219">Copie el archivo *School-Prod. sdf* de la carpeta de *datos de c:\inetpub\wwwroot\ContosoUniversity\App\_* en la carpeta *App\_Data* del proyecto ContosoUniversity.</span><span class="sxs-lookup"><span data-stu-id="f2efc-219">Copy the *School-Prod.sdf* file from the *c:\inetpub\wwwroot\ContosoUniversity\App\_Data* folder to the *App\_Data* folder in the ContosoUniversity project.</span></span>

### <a name="specifying-transacted-mode-for-the-grant-script"></a><span data-ttu-id="f2efc-220">Especificar el modo de transacción para el script Grant</span><span class="sxs-lookup"><span data-stu-id="f2efc-220">Specifying Transacted Mode for the Grant Script</span></span>

<span data-ttu-id="f2efc-221">El proceso de implementación genera scripts que implementan el esquema y los datos de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="f2efc-221">The deployment process generates scripts that deploy the database schema and data.</span></span> <span data-ttu-id="f2efc-222">De forma predeterminada, estos scripts se ejecutan en una transacción.</span><span class="sxs-lookup"><span data-stu-id="f2efc-222">By default, these scripts run in a transaction.</span></span> <span data-ttu-id="f2efc-223">Sin embargo, los scripts personalizados (como los scripts de concesión) no se ejecutan de forma predeterminada en una transacción.</span><span class="sxs-lookup"><span data-stu-id="f2efc-223">However, custom scripts (like the grant scripts) by default do not run in a transaction.</span></span> <span data-ttu-id="f2efc-224">Si el proceso de implementación mezcla los modos de transacción, es posible que obtenga un error de tiempo de espera cuando se ejecuten los scripts durante la implementación.</span><span class="sxs-lookup"><span data-stu-id="f2efc-224">If the deployment process mixes transaction modes, you might get a timeout error when the scripts run during deployment.</span></span> <span data-ttu-id="f2efc-225">En esta sección, modificará el archivo de proyecto para configurar los scripts personalizados para que se ejecuten en una transacción.</span><span class="sxs-lookup"><span data-stu-id="f2efc-225">In this section, you edit the project file in order to configure the custom scripts to run in a transaction.</span></span>

<span data-ttu-id="f2efc-226">En **Explorador de soluciones**, haga clic con el botón derecho en el proyecto **ContosoUniversity** y seleccione **descargar el proyecto**.</span><span class="sxs-lookup"><span data-stu-id="f2efc-226">In **Solution Explorer**, right-click the **ContosoUniversity** project and select **Unload Project**.</span></span>

![Unload_Project_in_Solution_Explorer](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image12.png)

<span data-ttu-id="f2efc-228">A continuación, vuelva a hacer clic con el botón derecho en el proyecto y seleccione **Editar ContosoUniversity. csproj**.</span><span class="sxs-lookup"><span data-stu-id="f2efc-228">Then right-click the project again and select **Edit ContosoUniversity.csproj**.</span></span>

![Edit_Project_in_Solution_Explorer](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image13.png)

<span data-ttu-id="f2efc-230">El editor de Visual Studio muestra el contenido XML del archivo de proyecto.</span><span class="sxs-lookup"><span data-stu-id="f2efc-230">The Visual Studio editor shows you the XML content of the project file.</span></span> <span data-ttu-id="f2efc-231">Observe que hay varios elementos `PropertyGroup`.</span><span class="sxs-lookup"><span data-stu-id="f2efc-231">Notice that there are several `PropertyGroup` elements.</span></span> <span data-ttu-id="f2efc-232">(En la imagen, se ha omitido el contenido de los elementos `PropertyGroup`).</span><span class="sxs-lookup"><span data-stu-id="f2efc-232">(In the image, the contents of the `PropertyGroup` elements have been omitted.)</span></span>

![Ventana del editor de archivos de proyecto](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image15.png)

<span data-ttu-id="f2efc-234">La primera, que no tiene ningún atributo `Condition`, es para los valores que se aplican independientemente de la configuración de compilación.</span><span class="sxs-lookup"><span data-stu-id="f2efc-234">The first one, which has no `Condition` attribute, is for settings that apply regardless of build configuration.</span></span> <span data-ttu-id="f2efc-235">Un `PropertyGroup` elemento solo se aplica a la configuración de compilación de depuración (tenga en cuenta el atributo `Condition`), uno solo se aplica a la configuración de compilación de versión y otro solo se aplica a la configuración de compilación de prueba.</span><span class="sxs-lookup"><span data-stu-id="f2efc-235">One `PropertyGroup` element applies only to the Debug build configuration (note the `Condition` attribute), one applies only to the Release build configuration, and one applies only to the Test build configuration.</span></span> <span data-ttu-id="f2efc-236">En el elemento `PropertyGroup` para la configuración de compilación de versión, verá un elemento `PublishDatabaseSettings` que contiene la configuración especificada en la pestaña **empaquetar/publicar SQL** . Hay un elemento `Object` que corresponde a cada uno de los scripts de concesión especificados (observe las dos instancias de "Grant. SQL").</span><span class="sxs-lookup"><span data-stu-id="f2efc-236">Within the `PropertyGroup` element for the Release build configuration, you'll see a `PublishDatabaseSettings` element that contains the settings you entered on the **Package/Publish SQL** tab. There is an `Object` element that corresponds to each of the grant scripts you specified (notice the two instances of "Grant.sql").</span></span> <span data-ttu-id="f2efc-237">De forma predeterminada, se `False`el atributo `Transacted` del elemento `Source` para cada script Grant.</span><span class="sxs-lookup"><span data-stu-id="f2efc-237">By default, the `Transacted` attribute of the `Source` element for each grant script is `False`.</span></span>

![Transacted_false](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image16.png)

<span data-ttu-id="f2efc-239">Cambie el valor del atributo `Transacted` del elemento `Source` a `True`.</span><span class="sxs-lookup"><span data-stu-id="f2efc-239">Change the value of the `Transacted` attribute of the `Source` element to `True`.</span></span>

![Transacted_true](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image17.png)

<span data-ttu-id="f2efc-241">Guarde y cierre el archivo del proyecto y, a continuación, haga clic con el botón derecho en el proyecto en **Explorador de soluciones** y seleccione **volver a cargar el proyecto**.</span><span class="sxs-lookup"><span data-stu-id="f2efc-241">Save and close the project file, and then right-click the project in **Solution Explorer** and select **Reload Project**.</span></span>

![Reload_project](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image18.png)

## <a name="setting-up-webconfig-transformations-for-the-connection-strings"></a><span data-ttu-id="f2efc-243">Configurar transformaciones de Web. config para las cadenas de conexión</span><span class="sxs-lookup"><span data-stu-id="f2efc-243">Setting up Web.Config Transformations for the Connection Strings</span></span>

<span data-ttu-id="f2efc-244">Las cadenas de conexión para las nuevas bases de datos de SQL Express que escribió en la pestaña **empaquetar/publicar SQL** se usan en Web deploy solo para actualizar la base de datos de destino durante la implementación.</span><span class="sxs-lookup"><span data-stu-id="f2efc-244">The connection strings for the new SQL Express databases that you entered on the **Package/Publish SQL** tab are used by Web Deploy only for updating the destination database during deployment.</span></span> <span data-ttu-id="f2efc-245">Todavía tiene que configurar transformaciones de *Web. config* para que las cadenas de conexión en el archivo *Web. config* implementado apunten a las nuevas bases de datos de SQL Server Express.</span><span class="sxs-lookup"><span data-stu-id="f2efc-245">You still have to set up *Web.config* transformations so that the connection strings in the deployed *Web.config* file point to the new SQL Server Express databases.</span></span> <span data-ttu-id="f2efc-246">(Cuando se usa la pestaña **empaquetar/publicar SQL** , no se pueden configurar cadenas de conexión en el perfil de publicación).</span><span class="sxs-lookup"><span data-stu-id="f2efc-246">(When you use the **Package/Publish SQL** tab, you can't configure connection strings in the publish profile.)</span></span>

<span data-ttu-id="f2efc-247">Abra *Web. test. config* y reemplace el elemento `connectionStrings` por el elemento `connectionStrings` en el ejemplo siguiente.</span><span class="sxs-lookup"><span data-stu-id="f2efc-247">Open *Web.Test.config* and replace the `connectionStrings` element with the `connectionStrings` element in the following example.</span></span> <span data-ttu-id="f2efc-248">(Asegúrese de que solo copia el elemento connectionStrings, no el código circundante que se muestra aquí para proporcionar contexto).</span><span class="sxs-lookup"><span data-stu-id="f2efc-248">(Make sure you only copy the connectionStrings element, not the surrounding code that is shown here to provide context.)</span></span>

[!code-xml[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample4.xml?highlight=2-11)]

<span data-ttu-id="f2efc-249">Este código hace que los atributos `connectionString` y `providerName` de cada elemento `add` se reemplacen en el archivo *Web. config* implementado.</span><span class="sxs-lookup"><span data-stu-id="f2efc-249">This code causes the `connectionString` and `providerName` attributes of each `add` element to be replaced in the deployed *Web.config* file.</span></span> <span data-ttu-id="f2efc-250">Estas cadenas de conexión no son idénticas a las que escribió en la pestaña **empaquetar/publicar SQL** . Se ha agregado el valor "MultipleActiveResultSets = True" porque es necesario para el Entity Framework y el Proveedores universales.</span><span class="sxs-lookup"><span data-stu-id="f2efc-250">These connection strings are not identical to the ones you entered in the **Package/Publish SQL** tab. The setting "MultipleActiveResultSets=True" has been added to them because it's required for the Entity Framework and the Universal Providers.</span></span>

## <a name="installing-sql-server-compact"></a><span data-ttu-id="f2efc-251">Instalación de SQL Server Compact</span><span class="sxs-lookup"><span data-stu-id="f2efc-251">Installing SQL Server Compact</span></span>

<span data-ttu-id="f2efc-252">El paquete NuGet de Sqlservercom proporciona los ensamblados del motor de base de datos de SQL Server Compact para la aplicación contoso University.</span><span class="sxs-lookup"><span data-stu-id="f2efc-252">The SqlServerCompact NuGet package provides the SQL Server Compact database engine assemblies for the Contoso University application.</span></span> <span data-ttu-id="f2efc-253">Pero ahora no es la aplicación, sino que Web Deploy que deben poder leer las bases de datos de SQL Server Compact para crear scripts que se ejecuten en las bases de datos de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="f2efc-253">But now it is not the application but Web Deploy that must be able to read the SQL Server Compact databases, in order to create scripts to run in the SQL Server databases.</span></span> <span data-ttu-id="f2efc-254">Para habilitar Web Deploy para leer las bases de datos de SQL Server Compact, instale SQL Server Compact en el equipo de desarrollo mediante el siguiente vínculo: [Microsoft SQL Server Compact 4,0](https://www.microsoft.com/downloads/details.aspx?FamilyID=15F7C9B3-A150-4AD2-823E-E4E0DCF85DF6).</span><span class="sxs-lookup"><span data-stu-id="f2efc-254">To enable Web Deploy to read SQL Server Compact databases, install SQL Server Compact on the development computer by using the following link: [Microsoft SQL Server Compact 4.0](https://www.microsoft.com/downloads/details.aspx?FamilyID=15F7C9B3-A150-4AD2-823E-E4E0DCF85DF6).</span></span>

## <a name="deploying-to-the-test-environment"></a><span data-ttu-id="f2efc-255">Implementar en el entorno de prueba</span><span class="sxs-lookup"><span data-stu-id="f2efc-255">Deploying to the Test Environment</span></span>

<span data-ttu-id="f2efc-256">Para publicar en el entorno de prueba, debe crear un perfil de publicación configurado para usar la pestaña **empaquetar/publicar SQL** para la publicación de bases de datos en lugar de la configuración de la base de datos de Perfil de publicación.</span><span class="sxs-lookup"><span data-stu-id="f2efc-256">In order to publish to the Test environment, you have to create a publish profile that is configured to use the **Package/Publish SQL** tab for database publishing instead of the publish profile database settings.</span></span>

<span data-ttu-id="f2efc-257">En primer lugar, elimine el perfil de prueba existente.</span><span class="sxs-lookup"><span data-stu-id="f2efc-257">First, delete the existing Test profile.</span></span>

<span data-ttu-id="f2efc-258">En **Explorador de soluciones**, haga clic con el botón secundario en el proyecto ContosoUniversity y haga clic en **publicar**.</span><span class="sxs-lookup"><span data-stu-id="f2efc-258">In **Solution Explorer**, right-click the ContosoUniversity project, and click **Publish**.</span></span>

<span data-ttu-id="f2efc-259">Seleccione la pestaña **perfil** .</span><span class="sxs-lookup"><span data-stu-id="f2efc-259">Select the **Profile** tab.</span></span>

<span data-ttu-id="f2efc-260">Haga clic en **administrar perfiles**.</span><span class="sxs-lookup"><span data-stu-id="f2efc-260">Click **Manage Profiles**.</span></span>

<span data-ttu-id="f2efc-261">Seleccione **prueba**, haga clic en **quitar**y, a continuación, haga clic en **cerrar**.</span><span class="sxs-lookup"><span data-stu-id="f2efc-261">Select **Test**, click **Remove**, and then click **Close**.</span></span>

<span data-ttu-id="f2efc-262">Cierre el Asistente para **publicación web** para guardar este cambio.</span><span class="sxs-lookup"><span data-stu-id="f2efc-262">Close the **Publish Web** wizard to save this change.</span></span>

<span data-ttu-id="f2efc-263">A continuación, cree un nuevo perfil de prueba y úselo para publicar el proyecto.</span><span class="sxs-lookup"><span data-stu-id="f2efc-263">Next, create a new Test profile and use it to publish the project.</span></span>

<span data-ttu-id="f2efc-264">En **Explorador de soluciones**, haga clic con el botón secundario en el proyecto ContosoUniversity y haga clic en **publicar**.</span><span class="sxs-lookup"><span data-stu-id="f2efc-264">In **Solution Explorer**, right-click the ContosoUniversity project, and click **Publish**.</span></span>

<span data-ttu-id="f2efc-265">Seleccione la pestaña **perfil** .</span><span class="sxs-lookup"><span data-stu-id="f2efc-265">Select the **Profile** tab.</span></span>

<span data-ttu-id="f2efc-266">Seleccione **&lt;nuevo...&gt;** en la lista desplegable y escriba "Test" como nombre del perfil.</span><span class="sxs-lookup"><span data-stu-id="f2efc-266">Select **&lt;New...&gt;** from the drop-down list, and enter "Test" as the profile name.</span></span>

<span data-ttu-id="f2efc-267">En el cuadro **dirección URL del servicio** , escriba *localhost*.</span><span class="sxs-lookup"><span data-stu-id="f2efc-267">In the **Service URL** box, enter *localhost*.</span></span>

<span data-ttu-id="f2efc-268">En el cuadro **sitio o aplicación** , escriba *sitio web predeterminado/ContosoUniversity*.</span><span class="sxs-lookup"><span data-stu-id="f2efc-268">In the **Site/application** box, enter *Default Web Site/ContosoUniversity*.</span></span>

<span data-ttu-id="f2efc-269">En el cuadro **dirección URL de destino** , escriba `http://localhost/ContosoUniversity/`.</span><span class="sxs-lookup"><span data-stu-id="f2efc-269">In the **Destination URL** box, enter `http://localhost/ContosoUniversity/`.</span></span>

<span data-ttu-id="f2efc-270">Haga clic en **Siguiente**.</span><span class="sxs-lookup"><span data-stu-id="f2efc-270">Click **Next**.</span></span>

<span data-ttu-id="f2efc-271">La pestaña **configuración** le advierte de que se ha configurado la pestaña **empaquetar/publicar SQL** y le ofrece la oportunidad de invalidarlos haciendo clic en habilitar las nuevas mejoras de publicación de bases de datos.</span><span class="sxs-lookup"><span data-stu-id="f2efc-271">The **Settings** tab warns you that the **Package/Publish SQL** tab has been configured, and it gives you an opportunity to override them by clicking enable the new database publishing improvements.</span></span> <span data-ttu-id="f2efc-272">En esta implementación no desea invalidar la configuración de la pestaña **empaquetar/publicar SQL** , por lo que solo tiene que hacer clic en **siguiente**.</span><span class="sxs-lookup"><span data-stu-id="f2efc-272">For this deployment you don't want to override the **Package/Publish SQL** tab settings, so just click **Next**.</span></span>

![Publish_Web_wizard_Settings_tab_Migrate](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image19.png)

<span data-ttu-id="f2efc-274">Un mensaje en la pestaña **vista previa** indica que **no hay ninguna base de datos seleccionada para publicar**, pero esto solo significa que la publicación de la base de datos no está configurada en el perfil de publicación.</span><span class="sxs-lookup"><span data-stu-id="f2efc-274">A message on the **Preview** tab indicates that **No databases are selected to publish**, but this only means that database publishing is not configured in the publish profile.</span></span>

<span data-ttu-id="f2efc-275">Haga clic en **Publicar**.</span><span class="sxs-lookup"><span data-stu-id="f2efc-275">Click **Publish**.</span></span>

![Publish_Web_wizard_Preview_tab_Migrate](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image20.png)

<span data-ttu-id="f2efc-277">Visual Studio implementa la aplicación y abre el explorador en la Página principal del sitio en el entorno de prueba.</span><span class="sxs-lookup"><span data-stu-id="f2efc-277">Visual Studio deploys the application and opens the browser to the home page of the site in the test environment.</span></span> <span data-ttu-id="f2efc-278">Ejecute la página instructores para ver que muestra los mismos datos que vio anteriormente.</span><span class="sxs-lookup"><span data-stu-id="f2efc-278">Run the Instructors page to see that it displays the same data that you saw earlier.</span></span> <span data-ttu-id="f2efc-279">Ejecute la página **Agregar estudiantes** , agregue un estudiante nuevo y, a continuación, vea el nuevo estudiante en **la página** Students.</span><span class="sxs-lookup"><span data-stu-id="f2efc-279">Run the **Add Students** page, add a new student, and then view the new student in the **Students** page.</span></span> <span data-ttu-id="f2efc-280">Comprueba que se puede actualizar la base de datos.</span><span class="sxs-lookup"><span data-stu-id="f2efc-280">This verifies that the you can update the database.</span></span> <span data-ttu-id="f2efc-281">Seleccione la página **Actualizar créditos** (debe iniciar sesión) para comprobar que la base de datos de pertenencia se ha implementado y que tiene acceso a ella.</span><span class="sxs-lookup"><span data-stu-id="f2efc-281">Select the **Update Credits** page (you'll need to log in) to verify that the membership database was deployed and you have access to it.</span></span>

## <a name="creating-a-sql-server-database-for-the-production-environment"></a><span data-ttu-id="f2efc-282">Crear una base de datos SQL Server para el entorno de producción</span><span class="sxs-lookup"><span data-stu-id="f2efc-282">Creating a SQL Server Database for the Production Environment</span></span>

<span data-ttu-id="f2efc-283">Ahora que ha implementado en el entorno de prueba, está listo para configurar la implementación en producción.</span><span class="sxs-lookup"><span data-stu-id="f2efc-283">Now that you've deployed to the test environment, you're ready to set up deployment to production.</span></span> <span data-ttu-id="f2efc-284">Comienza como hizo para el entorno de prueba mediante la creación de una base de datos en la que implementar.</span><span class="sxs-lookup"><span data-stu-id="f2efc-284">You begin as you did for the test environment, by creating a database to deploy to.</span></span> <span data-ttu-id="f2efc-285">Al recordar de la información general, el plan de hospedaje de Cytanium Lite solo permite una única base de datos de SQL Server, por lo que solo configurará una base de datos, no dos.</span><span class="sxs-lookup"><span data-stu-id="f2efc-285">As you recall from the Overview, the Cytanium Lite hosting plan only allows a single SQL Server database, so you will set up only one database, not two.</span></span> <span data-ttu-id="f2efc-286">Todas las tablas y los datos de las bases de datos de pertenencia y escuela SQL Server Compact se implementarán en una SQL Server base de datos de producción.</span><span class="sxs-lookup"><span data-stu-id="f2efc-286">All of the tables and data from the membership and School SQL Server Compact databases will be deployed into one SQL Server database in production.</span></span>

<span data-ttu-id="f2efc-287">Vaya al panel de control de Cytanium en [http://panel.cytanium.com](http://panel.cytanium.com).</span><span class="sxs-lookup"><span data-stu-id="f2efc-287">Go to the Cytanium control panel at [http://panel.cytanium.com](http://panel.cytanium.com).</span></span> <span data-ttu-id="f2efc-288">Mantenga el mouse sobre **las bases de datos** y, a continuación, haga clic en **SQL Server 2008**.</span><span class="sxs-lookup"><span data-stu-id="f2efc-288">Hold the mouse over **Databases** and then click **SQL Server 2008**.</span></span>

<span data-ttu-id="f2efc-289">[![Selecting_Databases_in_Control_Panel](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image22.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="f2efc-289">[![Selecting_Databases_in_Control_Panel](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image22.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image21.png)</span></span>

<span data-ttu-id="f2efc-290">En la página **SQL Server 2008** , haga clic en **crear base de datos**.</span><span class="sxs-lookup"><span data-stu-id="f2efc-290">In the **SQL Server 2008** page, click **Create Database**.</span></span>

<span data-ttu-id="f2efc-291">[![Selecting_Create_Database](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image24.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="f2efc-291">[![Selecting_Create_Database](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image24.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image23.png)</span></span>

<span data-ttu-id="f2efc-292">Asigne el nombre "School" a la base de datos y haga clic en **Guardar**.</span><span class="sxs-lookup"><span data-stu-id="f2efc-292">Name the database "School" and click **Save**.</span></span> <span data-ttu-id="f2efc-293">(La página agrega automáticamente el prefijo "contosou", por lo que el nombre efectivo será "contosouSchool").</span><span class="sxs-lookup"><span data-stu-id="f2efc-293">(The page automatically adds the prefix "contosou", so the effective name will be "contosouSchool".)</span></span>

<span data-ttu-id="f2efc-294">[![Naming_the_database](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image26.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="f2efc-294">[![Naming_the_database](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image26.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image25.png)</span></span>

<span data-ttu-id="f2efc-295">En la misma página, haga clic en **crear usuario**.</span><span class="sxs-lookup"><span data-stu-id="f2efc-295">On the same page, click **Create User**.</span></span> <span data-ttu-id="f2efc-296">En los servidores de Cytanium, en lugar de usar la seguridad integrada de Windows y permitir que la identidad del grupo de aplicaciones Abra la base de datos, creará un usuario que tenga autoridad para abrir la base de datos.</span><span class="sxs-lookup"><span data-stu-id="f2efc-296">On Cytanium's servers, rather than using integrated Windows security and letting the application pool identity open your database, you'll create a user that has authority to open your database.</span></span> <span data-ttu-id="f2efc-297">Agregará las credenciales del usuario a las cadenas de conexión que van en el archivo *Web. config* de producción.</span><span class="sxs-lookup"><span data-stu-id="f2efc-297">You'll add the user's credentials to the connection strings that go in the production *Web.config* file.</span></span> <span data-ttu-id="f2efc-298">En este paso, creará esas credenciales.</span><span class="sxs-lookup"><span data-stu-id="f2efc-298">In this step you create those credentials.</span></span>

<span data-ttu-id="f2efc-299">[![Creating_a_database_user](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image28.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="f2efc-299">[![Creating_a_database_user](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image28.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image27.png)</span></span>

<span data-ttu-id="f2efc-300">Rellene los campos obligatorios en la página **propiedades de usuario SQL** :</span><span class="sxs-lookup"><span data-stu-id="f2efc-300">Fill in the required fields in the **SQL User Properties** page:</span></span>

- <span data-ttu-id="f2efc-301">Escriba "ContosoUniversityUser" como nombre.</span><span class="sxs-lookup"><span data-stu-id="f2efc-301">Enter "ContosoUniversityUser" as the name.</span></span>
- <span data-ttu-id="f2efc-302">Escriba una contraseña.</span><span class="sxs-lookup"><span data-stu-id="f2efc-302">Enter a password.</span></span>
- <span data-ttu-id="f2efc-303">Seleccione **contosouSchool** como la base de datos predeterminada.</span><span class="sxs-lookup"><span data-stu-id="f2efc-303">Select **contosouSchool** as the default database.</span></span>
- <span data-ttu-id="f2efc-304">Active la casilla **contosouSchool** .</span><span class="sxs-lookup"><span data-stu-id="f2efc-304">Select the **contosouSchool** check box.</span></span>

<span data-ttu-id="f2efc-305">[![SQL_User_Properties_page](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image30.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="f2efc-305">[![SQL_User_Properties_page](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image30.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image29.png)</span></span>

## <a name="configuring-database-deployment-for-the-production-environment"></a><span data-ttu-id="f2efc-306">Configuración de la implementación de base de datos para el entorno de producción</span><span class="sxs-lookup"><span data-stu-id="f2efc-306">Configuring Database Deployment for the Production Environment</span></span>

<span data-ttu-id="f2efc-307">Ahora está listo para establecer la configuración de implementación de la base de datos en la pestaña **empaquetar/publicar SQL** , como hizo anteriormente para el entorno de prueba.</span><span class="sxs-lookup"><span data-stu-id="f2efc-307">Now you're ready to set up database deployment settings in the **Package/Publish SQL** tab, as you did earlier for the test environment.</span></span>

<span data-ttu-id="f2efc-308">Abra la ventana **propiedades del proyecto** , seleccione la pestaña **empaquetar/publicar SQL** y asegúrese de que la opción **activo (versión)** o **versión** está seleccionada en la lista desplegable **configuración** .</span><span class="sxs-lookup"><span data-stu-id="f2efc-308">Open the **Project Properties** window, select the **Package/Publish SQL** tab, and make sure that **Active (Release)** or **Release** is selected in the **Configuration** drop-down list.</span></span>

<span data-ttu-id="f2efc-309">Al configurar las opciones de implementación para cada base de datos, la diferencia clave entre lo que se hace en los entornos de prueba y producción es la forma de configurar cadenas de conexión.</span><span class="sxs-lookup"><span data-stu-id="f2efc-309">When you configure deployment settings for each database, the key difference between what you do for production and test environments is in how you configure connection strings.</span></span> <span data-ttu-id="f2efc-310">En el entorno de prueba, escribió diferentes cadenas de conexión a la base de datos de destino, pero para el entorno de producción la cadena de conexión de destino será la misma para ambas bases de datos.</span><span class="sxs-lookup"><span data-stu-id="f2efc-310">For the test environment you entered different destination database connection strings, but for the production environment the destination connection string will be the same for both databases.</span></span> <span data-ttu-id="f2efc-311">Esto se debe a que está implementando ambas bases de datos en una base de datos de producción.</span><span class="sxs-lookup"><span data-stu-id="f2efc-311">This is because you are deploying both databases to one database in production.</span></span>

### <a name="configuring-deployment-settings-for-the-membership-database"></a><span data-ttu-id="f2efc-312">Configurar las opciones de implementación para la base de datos de pertenencia</span><span class="sxs-lookup"><span data-stu-id="f2efc-312">Configuring Deployment Settings for the Membership Database</span></span>

<span data-ttu-id="f2efc-313">Para configurar las opciones que se aplican a la base de datos de pertenencia, seleccione la fila **DefaultConnection-Deployment** en la tabla de entradas de la **base de datos** .</span><span class="sxs-lookup"><span data-stu-id="f2efc-313">To configure settings that apply to the membership database, select the **DefaultConnection-Deployment** row in the **Database Entries** table.</span></span>

<span data-ttu-id="f2efc-314">En **cadena de conexión para la base de datos de destino**, escriba una cadena de conexión que apunte a la nueva base de datos de producción SQL Server que acaba de crear.</span><span class="sxs-lookup"><span data-stu-id="f2efc-314">In **Connection string for destination database**, enter a connection string that points to the new production SQL Server database that you just created.</span></span> <span data-ttu-id="f2efc-315">Puede obtener la cadena de conexión desde el correo electrónico de bienvenida.</span><span class="sxs-lookup"><span data-stu-id="f2efc-315">You can get the connection string from your welcome email.</span></span> <span data-ttu-id="f2efc-316">La parte relevante del correo electrónico contiene la siguiente cadena de conexión de ejemplo:</span><span class="sxs-lookup"><span data-stu-id="f2efc-316">The relevant part of the email contains the following sample connection string:</span></span>

[!code-console[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample5.cmd)]

<span data-ttu-id="f2efc-317">Después de reemplazar las tres variables, la cadena de conexión que necesita es similar a la de este ejemplo:</span><span class="sxs-lookup"><span data-stu-id="f2efc-317">After you replace the three variables, the connection string you need looks like this example:</span></span>

[!code-console[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample6.cmd)]

<span data-ttu-id="f2efc-318">Copie y pegue esta cadena de conexión en la **cadena de conexión para la base de datos de destino** en la pestaña **empaquetar/publicar SQL** .</span><span class="sxs-lookup"><span data-stu-id="f2efc-318">Copy and paste this connection string into **Connection string for destination database** in the **Package/Publish SQL** tab.</span></span>

<span data-ttu-id="f2efc-319">Asegúrese de que la opción **extraer datos o esquema de una base de datos existente** esté seleccionada y de que **las opciones de scripting** de la base de datos siguen siendo **esquema y datos**.</span><span class="sxs-lookup"><span data-stu-id="f2efc-319">Make sure that **Pull data and/or schema from an existing database** is still selected, and that **Database scripting options** is still **Schema and Data**.</span></span>

<span data-ttu-id="f2efc-320">En el cuadro **scripts de base de datos** , desactive la casilla situada junto al script Grant. SQL.</span><span class="sxs-lookup"><span data-stu-id="f2efc-320">In the **Database Scripts** box, clear the check box next to the Grant.sql script.</span></span>

![Disable_Grant_script](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image31.png)

### <a name="configuring-deployment-settings-for-the-school-database"></a><span data-ttu-id="f2efc-322">Configuración de las opciones de implementación de la base de datos School</span><span class="sxs-lookup"><span data-stu-id="f2efc-322">Configuring Deployment Settings for the School Database</span></span>

<span data-ttu-id="f2efc-323">A continuación, seleccione la fila **SchoolContext-Deployment** en la tabla de entradas de la **base de datos** para configurar las opciones de la base de datos School.</span><span class="sxs-lookup"><span data-stu-id="f2efc-323">Next, select the **SchoolContext-Deployment** row in the **Database Entries** table in order to configure the School database settings.</span></span>

<span data-ttu-id="f2efc-324">Copie la misma cadena de conexión en la **cadena de conexión de la base de datos de destino** que copió en ese campo para la base de datos de pertenencia.</span><span class="sxs-lookup"><span data-stu-id="f2efc-324">Copy the same connection string into **Connection string for destination database** that you copied into that field for the membership database.</span></span>

<span data-ttu-id="f2efc-325">Asegúrese de que la opción **extraer datos o esquema de una base de datos existente** esté seleccionada y de que **las opciones de scripting** de la base de datos siguen siendo **esquema y datos**.</span><span class="sxs-lookup"><span data-stu-id="f2efc-325">Make sure that **Pull data and/or schema from an existing database** is still selected, and that **Database scripting options** is still **Schema and Data**.</span></span>

<span data-ttu-id="f2efc-326">En el cuadro **scripts de base de datos** , desactive la casilla situada junto al script Grant. SQL.</span><span class="sxs-lookup"><span data-stu-id="f2efc-326">In the **Database Scripts** box, clear the check box next to the Grant.sql script.</span></span>

<span data-ttu-id="f2efc-327">Guarde los cambios en la pestaña **empaquetar/publicar SQL** .</span><span class="sxs-lookup"><span data-stu-id="f2efc-327">Save the changes to the **Package/Publish SQL** tab.</span></span>

## <a name="setting-up-webconfig-transforms-for-the-connection-strings-to-production-databases"></a><span data-ttu-id="f2efc-328">Configurar transformaciones de Web. config para las cadenas de conexión a bases de datos de producción</span><span class="sxs-lookup"><span data-stu-id="f2efc-328">Setting Up Web.Config Transforms for the Connection Strings to Production Databases</span></span>

<span data-ttu-id="f2efc-329">A continuación, configurará las transformaciones de *Web. config* para que las cadenas de conexión en el archivo *Web. config* implementado apunten a la nueva base de datos de producción.</span><span class="sxs-lookup"><span data-stu-id="f2efc-329">Next, you'll set up *Web.config* transformations so that the connection strings in the deployed *Web.config* file to point to the new production database.</span></span> <span data-ttu-id="f2efc-330">La cadena de conexión que especificó en la pestaña **empaquetar/publicar SQL** para web deploy que se va a usar es la misma que la que debe usar la aplicación, a excepción de la adición de la opción `MultipleResultSets`.</span><span class="sxs-lookup"><span data-stu-id="f2efc-330">The connection string that you entered on the **Package/Publish SQL** tab for Web Deploy to use is the same as the one the application needs to use, except for the addition of the `MultipleResultSets` option.</span></span>

<span data-ttu-id="f2efc-331">Abra *Web. Production. config* y reemplace el elemento `connectionStrings` por un elemento `connectionStrings` similar al siguiente ejemplo.</span><span class="sxs-lookup"><span data-stu-id="f2efc-331">Open *Web.Production.config* and replace the `connectionStrings` element with a `connectionStrings` element that looks like the following example.</span></span> <span data-ttu-id="f2efc-332">(Copie solo el elemento `connectionStrings`, no las etiquetas circundantes que se proporcionan para mostrar el contexto).</span><span class="sxs-lookup"><span data-stu-id="f2efc-332">(Only copy the `connectionStrings` element, not the surrounding tags that are provided to show the context.)</span></span>

[!code-xml[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample7.xml?highlight=2-11)]

<span data-ttu-id="f2efc-333">A veces se ven consejos que le indican que siempre Cifre las cadenas de conexión en el archivo *Web. config* .</span><span class="sxs-lookup"><span data-stu-id="f2efc-333">You sometimes see advice that tells you to always encrypt connection strings in the *Web.config* file.</span></span> <span data-ttu-id="f2efc-334">Esto podría ser adecuado si estuviera implementando en los servidores de la red de su empresa.</span><span class="sxs-lookup"><span data-stu-id="f2efc-334">This might be appropriate if you were deploying to servers on your own company's network.</span></span> <span data-ttu-id="f2efc-335">Sin embargo, cuando se implementa en un entorno de hospedaje compartido, está confiando en las prácticas de seguridad del proveedor de hospedaje y no es necesario ni práctico cifrar las cadenas de conexión.</span><span class="sxs-lookup"><span data-stu-id="f2efc-335">When you are deploying to a shared hosting environment, though, you're trusting the security practices of the hosting provider, and it's not necessary or practical to encrypt the connection strings.</span></span>

## <a name="deploying-to-the-production-environment"></a><span data-ttu-id="f2efc-336">Implementación en el entorno de producción</span><span class="sxs-lookup"><span data-stu-id="f2efc-336">Deploying to the Production Environment</span></span>

<span data-ttu-id="f2efc-337">Ahora está listo para realizar la implementación en producción.</span><span class="sxs-lookup"><span data-stu-id="f2efc-337">Now you're ready to deploy to production.</span></span> <span data-ttu-id="f2efc-338">Web Deploy leerá las bases de datos de SQL Server Compact en la carpeta *\_de datos* de la aplicación del proyecto y volverá a crear todas las tablas y los datos en la base de datos de SQL Server de producción.</span><span class="sxs-lookup"><span data-stu-id="f2efc-338">Web Deploy will read the SQL Server Compact databases in your project's *App\_Data* folder and re-create all of their tables and data in the production SQL Server database.</span></span> <span data-ttu-id="f2efc-339">Para publicar mediante la configuración de la pestaña **empaquetar/publicar web** , debe crear un nuevo perfil de publicación para producción.</span><span class="sxs-lookup"><span data-stu-id="f2efc-339">In order to publish by using the **Package/Publish Web** tab settings, you have to create a new publish profile for production.</span></span>

<span data-ttu-id="f2efc-340">En primer lugar, elimine el perfil de producción existente como hizo antes el perfil de prueba.</span><span class="sxs-lookup"><span data-stu-id="f2efc-340">First, delete the existing Production profile as you did the Test profile earlier.</span></span>

<span data-ttu-id="f2efc-341">En **Explorador de soluciones**, haga clic con el botón secundario en el proyecto ContosoUniversity y haga clic en **publicar**.</span><span class="sxs-lookup"><span data-stu-id="f2efc-341">In **Solution Explorer**, right-click the ContosoUniversity project, and click **Publish**.</span></span>

<span data-ttu-id="f2efc-342">Seleccione la pestaña **perfil** .</span><span class="sxs-lookup"><span data-stu-id="f2efc-342">Select the **Profile** tab.</span></span>

<span data-ttu-id="f2efc-343">Haga clic en **administrar perfiles**.</span><span class="sxs-lookup"><span data-stu-id="f2efc-343">Click **Manage Profiles**.</span></span>

<span data-ttu-id="f2efc-344">Seleccione **producción**, haga clic en **quitar**y, a continuación, haga clic en **cerrar**.</span><span class="sxs-lookup"><span data-stu-id="f2efc-344">Select **Production**, click **Remove**, and then click **Close**.</span></span>

<span data-ttu-id="f2efc-345">Cierre el Asistente para **publicación web** para guardar este cambio.</span><span class="sxs-lookup"><span data-stu-id="f2efc-345">Close the **Publish Web** wizard to save this change.</span></span>

<span data-ttu-id="f2efc-346">A continuación, cree un nuevo perfil de producción y úselo para publicar el proyecto.</span><span class="sxs-lookup"><span data-stu-id="f2efc-346">Next, create a new Production profile and use it to publish the project.</span></span>

<span data-ttu-id="f2efc-347">En **Explorador de soluciones**, haga clic con el botón secundario en el proyecto ContosoUniversity y haga clic en **publicar**.</span><span class="sxs-lookup"><span data-stu-id="f2efc-347">In **Solution Explorer**, right-click the ContosoUniversity project, and click **Publish**.</span></span>

<span data-ttu-id="f2efc-348">Seleccione la pestaña **perfil** .</span><span class="sxs-lookup"><span data-stu-id="f2efc-348">Select the **Profile** tab.</span></span>

<span data-ttu-id="f2efc-349">Haga clic en **importar**y seleccione el archivo. publishsettings que descargó anteriormente.</span><span class="sxs-lookup"><span data-stu-id="f2efc-349">Click **Import**, and select the .publishsettings file that you downloaded earlier.</span></span>

<span data-ttu-id="f2efc-350">En la pestaña **conexión** , cambie la **dirección URL de destino** a la dirección URL temporal correcta, que en este ejemplo es http://contosouniversity.com.vserver01.cytanium.com.</span><span class="sxs-lookup"><span data-stu-id="f2efc-350">On the **Connection** tab, change the **Destination URL** to the correct temporary URL, which in this example is http://contosouniversity.com.vserver01.cytanium.com.</span></span>

<span data-ttu-id="f2efc-351">Cambie el nombre del perfil a producción.</span><span class="sxs-lookup"><span data-stu-id="f2efc-351">Rename the profile to Production.</span></span> <span data-ttu-id="f2efc-352">(Seleccione la pestaña **perfil** y haga clic en **administrar perfiles** para hacerlo).</span><span class="sxs-lookup"><span data-stu-id="f2efc-352">(Select the **Profile** tab and click **Manage Profiles** to do that).</span></span>

<span data-ttu-id="f2efc-353">Cierre el Asistente para **publicación web** para guardar los cambios.</span><span class="sxs-lookup"><span data-stu-id="f2efc-353">Close the **Publish Web** wizard to save your changes.</span></span>

<span data-ttu-id="f2efc-354">En una aplicación real en la que se estaba actualizando la base de datos en producción, haría dos pasos adicionales ahora antes de publicar:</span><span class="sxs-lookup"><span data-stu-id="f2efc-354">In a real application in which the database was being updated in production, you would do two additional steps now before you publish:</span></span>

1. <span data-ttu-id="f2efc-355">Cargue *app\_offline. htm*, tal como se muestra en el tutorial [implementación del entorno de producción](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12.md) .</span><span class="sxs-lookup"><span data-stu-id="f2efc-355">Upload *app\_offline.htm*, as shown in the [Deploying to the Production Environment](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12.md) tutorial.</span></span>
2. <span data-ttu-id="f2efc-356">Use la **característica administrador de archivos** del panel de control de Cytanium para copiar los archivos *ASPNET-Prod. sdf* y *School-Prod. sdf* del sitio de producción a la carpeta *App\_Data* del proyecto ContosoUniversity.</span><span class="sxs-lookup"><span data-stu-id="f2efc-356">Use the **File Manager** feature of the Cytanium control panel to copy the *aspnet-Prod.sdf* and *School-Prod.sdf* files from the production site to the *App\_Data* folder of the ContosoUniversity project.</span></span> <span data-ttu-id="f2efc-357">Esto garantiza que los datos que se van a implementar en la nueva base de datos de SQL Server incluyen las actualizaciones más recientes realizadas por el sitio web de producción.</span><span class="sxs-lookup"><span data-stu-id="f2efc-357">This ensures that the data you're deploying to the new SQL Server database includes the latest updates made by your production website.</span></span>

<span data-ttu-id="f2efc-358">En la barra de herramientas de **publicación en Web** , asegúrese de que el perfil de **producción** está seleccionado y, a continuación, haga clic en **publicar**.</span><span class="sxs-lookup"><span data-stu-id="f2efc-358">In the **Web One Click Publish** toolbar, make sure that the **Production** profile is selected, and then click **Publish**.</span></span>

<span data-ttu-id="f2efc-359">Si cargó <em>app\_offline. htm</em> antes de la publicación, tendrá que usar la utilidad <strong>File Manager</strong> en el panel de control de Cytanium para eliminar la <em>aplicación\_sin conexión.</em> htm antes de la prueba.</span><span class="sxs-lookup"><span data-stu-id="f2efc-359">If you uploaded <em>app\_offline.htm</em> before publishing, you have to use the <strong>File Manager</strong> utility in the Cytanium control panel to delete <em>app\_offline.</em>htm before you test.</span></span> <span data-ttu-id="f2efc-360">También puede eliminar al mismo tiempo los archivos <em>. sdf</em> de la carpeta <em>App\_Data</em> .</span><span class="sxs-lookup"><span data-stu-id="f2efc-360">You can also at the same time delete the <em>.sdf</em> files from the <em>App\_Data</em> folder.</span></span>

<span data-ttu-id="f2efc-361">Ahora puede abrir un explorador y ir a la dirección URL de su sitio público para probar la aplicación de la misma manera que lo hizo después de implementar en el entorno de prueba.</span><span class="sxs-lookup"><span data-stu-id="f2efc-361">You can now open a browser and go to the URL of your public site to test the application the same way you did after deploying to the test environment.</span></span>

## <a name="switching-to-sql-server-express-localdb-in-development"></a><span data-ttu-id="f2efc-362">Cambiar a SQL Server Express LocalDB en desarrollo</span><span class="sxs-lookup"><span data-stu-id="f2efc-362">Switching to SQL Server Express LocalDB in Development</span></span>

<span data-ttu-id="f2efc-363">Como se explicó en la información general, suele ser mejor usar el mismo motor de base de datos en el desarrollo que se usa en pruebas y producción.</span><span class="sxs-lookup"><span data-stu-id="f2efc-363">As was explained in the Overview, it's generally best to use the same database engine in development that you use in test and production.</span></span> <span data-ttu-id="f2efc-364">(Recuerde que la ventaja de usar SQL Server Express en el desarrollo es que la base de datos funcionará de la misma forma en los entornos de desarrollo, prueba y producción). En esta sección, configurará el proyecto ContosoUniversity para usar SQL Server Express LocalDB al ejecutar la aplicación desde Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="f2efc-364">(Remember that the advantage to using SQL Server Express in development is that the database will work the same in your development, test, and production environments.) In this section you'll set up the ContosoUniversity project to use SQL Server Express LocalDB when you run the application from Visual Studio.</span></span>

<span data-ttu-id="f2efc-365">La manera más sencilla de realizar esta migración es dejar que Code First y el sistema de pertenencia creen nuevas bases de datos de desarrollo.</span><span class="sxs-lookup"><span data-stu-id="f2efc-365">The simplest way to perform this migration is to let Code First and the membership system create both new development databases for you.</span></span> <span data-ttu-id="f2efc-366">El uso de este método para migrar requiere tres pasos:</span><span class="sxs-lookup"><span data-stu-id="f2efc-366">Using this method to migrate requires three steps:</span></span>

1. <span data-ttu-id="f2efc-367">Cambie las cadenas de conexión para especificar las nuevas bases de datos de SQL Express LocalDB.</span><span class="sxs-lookup"><span data-stu-id="f2efc-367">Change the connection strings to specify new SQL Express LocalDB databases.</span></span>
2. <span data-ttu-id="f2efc-368">Ejecute la herramienta Administración de sitios web para crear un usuario administrador.</span><span class="sxs-lookup"><span data-stu-id="f2efc-368">Run the Web Site Administration Tool to create an administrator user.</span></span> <span data-ttu-id="f2efc-369">Esto crea la base de datos de pertenencia.</span><span class="sxs-lookup"><span data-stu-id="f2efc-369">This creates the membership database.</span></span>
3. <span data-ttu-id="f2efc-370">Use el comando Migraciones de Code First Update-Database para crear e inicializar la base de datos de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="f2efc-370">Use the Code First Migrations update-database command to create and seed the application database.</span></span>

### <a name="updating-connection-strings-in-the-webconfig-file"></a><span data-ttu-id="f2efc-371">Actualizar las cadenas de conexión en el archivo Web. config</span><span class="sxs-lookup"><span data-stu-id="f2efc-371">Updating Connection Strings in the Web.config file</span></span>

<span data-ttu-id="f2efc-372">Abra el archivo *Web. config* y reemplace el elemento `connectionStrings` por el código siguiente:</span><span class="sxs-lookup"><span data-stu-id="f2efc-372">Open the *Web.config* file and replace the `connectionStrings` element with the following code:</span></span>

[!code-xml[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample8.xml)]

### <a name="creating-the-membership-database"></a><span data-ttu-id="f2efc-373">Crear la base de datos de pertenencia</span><span class="sxs-lookup"><span data-stu-id="f2efc-373">Creating the Membership Database</span></span>

<span data-ttu-id="f2efc-374">En **Explorador de soluciones**, seleccione el proyecto ContosoUniversity y, a continuación, haga clic en **configuración de ASP.net** en el menú **proyecto** .</span><span class="sxs-lookup"><span data-stu-id="f2efc-374">In **Solution Explorer**, select the ContosoUniversity project, and then click **ASP.NET Configuration** in the **Project** menu.</span></span>

<span data-ttu-id="f2efc-375">Selecciona la pestaña Seguridad.</span><span class="sxs-lookup"><span data-stu-id="f2efc-375">Select the Security tab.</span></span>

<span data-ttu-id="f2efc-376">Haga clic en **crear o administrar roles**y, a continuación, cree un rol de **Administrador** .</span><span class="sxs-lookup"><span data-stu-id="f2efc-376">Click **Create or Manage Roles**, and then create an **Administrator** role.</span></span>

<span data-ttu-id="f2efc-377">Vuelva a la pestaña seguridad.</span><span class="sxs-lookup"><span data-stu-id="f2efc-377">Return to the Security tab.</span></span>

<span data-ttu-id="f2efc-378">Haga clic en **crear usuario**y, a continuación, active la casilla **Administrador** y cree un usuario denominado admin.</span><span class="sxs-lookup"><span data-stu-id="f2efc-378">Click **Create user**, and then select the **Administrator** check box and create a user named admin.</span></span>

<span data-ttu-id="f2efc-379">Cierre la **herramienta Administración de sitios web**.</span><span class="sxs-lookup"><span data-stu-id="f2efc-379">Close the **Web Site Administration Tool**.</span></span>

### <a name="creating-the-school-database"></a><span data-ttu-id="f2efc-380">Crear la base de datos School</span><span class="sxs-lookup"><span data-stu-id="f2efc-380">Creating the School Database</span></span>

<span data-ttu-id="f2efc-381">Abra la ventana consola del administrador de paquetes.</span><span class="sxs-lookup"><span data-stu-id="f2efc-381">Open the Package Manager Console window.</span></span>

<span data-ttu-id="f2efc-382">En la lista desplegable **proyecto predeterminado** , seleccione el proyecto CONTOSOUNIVERSITY. Dal.</span><span class="sxs-lookup"><span data-stu-id="f2efc-382">In the **Default project** drop-down list, select the ContosoUniversity.DAL project.</span></span>

<span data-ttu-id="f2efc-383">Escriba el comando siguiente:</span><span class="sxs-lookup"><span data-stu-id="f2efc-383">Enter the following command:</span></span>

[!code-powershell[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample9.ps1)]

<span data-ttu-id="f2efc-384">Migraciones de Code First aplica la migración inicial que crea la base de datos y, a continuación, aplica la migración de AddBirthDate y, a continuación, ejecuta el método de inicialización.</span><span class="sxs-lookup"><span data-stu-id="f2efc-384">Code First Migrations applies the Initial migration that creates the database and then applies the AddBirthDate migration, then it runs the Seed method.</span></span>

<span data-ttu-id="f2efc-385">Ejecute el sitio presionando Ctrl + F5.</span><span class="sxs-lookup"><span data-stu-id="f2efc-385">Run the site by pressing Control-F5.</span></span> <span data-ttu-id="f2efc-386">Como hizo con los entornos de prueba y producción, ejecute la página **Agregar estudiantes** , agregue un estudiante nuevo y, a continuación, vea el nuevo estudiante en la página **Students** .</span><span class="sxs-lookup"><span data-stu-id="f2efc-386">As you did for the test and production environments, run the **Add Students** page, add a new student, and then view the new student in the **Students** page.</span></span> <span data-ttu-id="f2efc-387">Esto comprueba que la base de datos School se ha creado e inicializado y que tiene acceso de lectura y escritura.</span><span class="sxs-lookup"><span data-stu-id="f2efc-387">This verifies that the School database was created and initialized and that you have read and write access to it.</span></span>

<span data-ttu-id="f2efc-388">Seleccione la página **Actualizar créditos** e inicie sesión para comprobar que la base de datos de pertenencia se ha implementado y que tiene acceso a ella.</span><span class="sxs-lookup"><span data-stu-id="f2efc-388">Select the **Update Credits** page and log in to verify that the membership database was deployed and that you have access to it.</span></span> <span data-ttu-id="f2efc-389">Si no migró las cuentas de usuario, cree una cuenta de administrador y, después, seleccione la página **Actualizar créditos** para comprobar que funciona.</span><span class="sxs-lookup"><span data-stu-id="f2efc-389">If you did not migrate your user accounts, create an administrator account and then select the **Update Credits** page to verify that it works.</span></span>

## <a name="cleaning-up-sql-server-compact-files"></a><span data-ttu-id="f2efc-390">Limpiar archivos de SQL Server Compact</span><span class="sxs-lookup"><span data-stu-id="f2efc-390">Cleaning Up SQL Server Compact Files</span></span>

<span data-ttu-id="f2efc-391">Ya no necesita archivos ni paquetes NuGet que se incluyeron para admitir SQL Server Compact.</span><span class="sxs-lookup"><span data-stu-id="f2efc-391">You no longer need files and NuGet packages that were included to support SQL Server Compact.</span></span> <span data-ttu-id="f2efc-392">Si lo desea (este paso no es necesario), puede limpiar las referencias y los archivos innecesarios.</span><span class="sxs-lookup"><span data-stu-id="f2efc-392">If you want (this step is not required), you can clean up unneeded files and references.</span></span>

<span data-ttu-id="f2efc-393">En **Explorador de soluciones**, elimine los archivos *. sdf* de la carpeta *App\_Data* y las carpetas *AMD64* y *x86* de la carpeta *bin* .</span><span class="sxs-lookup"><span data-stu-id="f2efc-393">In **Solution Explorer**, delete the *.sdf* files from the *App\_Data* folder and the *amd64* and *x86* folders from the *bin* folder.</span></span>

<span data-ttu-id="f2efc-394">En **Explorador de soluciones**, haga clic con el botón secundario en la solución (no en uno de los proyectos) y, a continuación, haga clic en **administrar paquetes NuGet para la solución**.</span><span class="sxs-lookup"><span data-stu-id="f2efc-394">In **Solution Explorer**, right-click the solution (not one of the projects), and then click **Manage NuGet Packages for Solution**.</span></span>

<span data-ttu-id="f2efc-395">En el panel izquierdo del cuadro de diálogo **administrar paquetes NuGet** , seleccione **paquetes instalados**.</span><span class="sxs-lookup"><span data-stu-id="f2efc-395">In the left pane of the **Manage NuGet Packages** dialog box, select **Installed packages**.</span></span>

<span data-ttu-id="f2efc-396">Seleccione el paquete **EntityFramework. sqlservercom** y haga clic en **administrar**.</span><span class="sxs-lookup"><span data-stu-id="f2efc-396">Select the **EntityFramework.SqlServerCompact** package and click **Manage**.</span></span>

<span data-ttu-id="f2efc-397">En el cuadro de diálogo **seleccionar proyectos** , se seleccionan ambos proyectos.</span><span class="sxs-lookup"><span data-stu-id="f2efc-397">In the **Select Projects** dialog box, both projects are selected.</span></span> <span data-ttu-id="f2efc-398">Para desinstalar el paquete en ambos proyectos, desactive ambas casillas y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="f2efc-398">To uninstall the package in both projects, clear both check boxes, then click **OK**.</span></span>

<span data-ttu-id="f2efc-399">En el cuadro de diálogo que le pregunta si desea desinstalar también los paquetes dependientes, haga clic en no.</span><span class="sxs-lookup"><span data-stu-id="f2efc-399">In the dialog box that asks if you want to uninstall the dependent packages also, click No.</span></span> <span data-ttu-id="f2efc-400">Uno de ellos es el Entity Framework paquete que se debe conservar.</span><span class="sxs-lookup"><span data-stu-id="f2efc-400">One of these is the Entity Framework package that you have to keep.</span></span>

<span data-ttu-id="f2efc-401">Siga el mismo procedimiento para desinstalar el paquete **sqlservercom** .</span><span class="sxs-lookup"><span data-stu-id="f2efc-401">Follow the same procedure to uninstall the **SqlServerCompact** package.</span></span> <span data-ttu-id="f2efc-402">(Los paquetes deben desinstalarse en este orden porque el paquete **EntityFramework. sqlservercom** depende del paquete **sqlservercom** ).</span><span class="sxs-lookup"><span data-stu-id="f2efc-402">(The packages must be uninstalled in this order because the **EntityFramework.SqlServerCompact** package depends on the **SqlServerCompact** package.)</span></span>

<span data-ttu-id="f2efc-403">Ahora se ha migrado correctamente a SQL Server Express y SQL Server completos.</span><span class="sxs-lookup"><span data-stu-id="f2efc-403">You have now successfully migrated to SQL Server Express and full SQL Server.</span></span> <span data-ttu-id="f2efc-404">En el siguiente tutorial, realizará otro cambio en la base de datos y verá cómo implementar los cambios de la base de datos cuando las bases de datos de prueba y de producción usan SQL Server Express y SQL Server completos.</span><span class="sxs-lookup"><span data-stu-id="f2efc-404">In the next tutorial you'll make another database change, and you'll see how to deploy database changes when your test and production databases use SQL Server Express and full SQL Server.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="f2efc-405">[Anterior](deployment-to-a-hosting-provider-deploying-a-database-update-9-of-12.md)
> [Siguiente](deployment-to-a-hosting-provider-deploying-a-sql-server-database-update-11-of-12.md)</span><span class="sxs-lookup"><span data-stu-id="f2efc-405">[Previous](deployment-to-a-hosting-provider-deploying-a-database-update-9-of-12.md)
[Next](deployment-to-a-hosting-provider-deploying-a-sql-server-database-update-11-of-12.md)</span></span>
