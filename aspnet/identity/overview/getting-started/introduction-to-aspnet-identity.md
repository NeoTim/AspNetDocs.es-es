---
uid: identity/overview/getting-started/introduction-to-aspnet-identity
title: Introducción a ASP.NET Identity-ASP.NET 4. x
author: jongalloway
description: El sistema de pertenencia de ASP.NET se presentó con ASP.NET 2,0 de vuelta en 2005 y, desde entonces, se han producido muchos cambios en las distintas formas de aplicaciones Web...
ms.author: riande
ms.date: 01/22/2019
ms.assetid: 38717fc1-5989-43cf-952d-4007cc1dd923
ms.custom: seoapril2019
msc.legacyurl: /identity/overview/getting-started/introduction-to-aspnet-identity
msc.type: authoredcontent
ms.openlocfilehash: 0268dfc16cd2cfb1e79ee14997a4c5eb247af950
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 03/06/2020
ms.locfileid: "78471739"
---
# <a name="introduction-to-aspnet-identity"></a><span data-ttu-id="45b86-103">Introducción a ASP.NET Identity</span><span class="sxs-lookup"><span data-stu-id="45b86-103">Introduction to ASP.NET Identity</span></span>

> <span data-ttu-id="45b86-104">El sistema de pertenencia de ASP.NET se presentó con ASP.NET 2,0 de vuelta en 2005 y, desde entonces, se han producido muchos cambios en las maneras en las que las aplicaciones web normalmente administran la autenticación y la autorización.</span><span class="sxs-lookup"><span data-stu-id="45b86-104">The ASP.NET membership system was introduced with ASP.NET 2.0 back in 2005, and since then there have been many changes in the ways web applications typically handle authentication and authorization.</span></span> <span data-ttu-id="45b86-105">ASP.NET Identity es una nueva visión de lo que debe ser el sistema de pertenencia al compilar aplicaciones modernas para la web, el teléfono o la tableta.</span><span class="sxs-lookup"><span data-stu-id="45b86-105">ASP.NET Identity is a fresh look at what the membership system should be when you are building modern applications for the web, phone, or tablet.</span></span>

## <a name="background-membership-in-aspnet"></a><span data-ttu-id="45b86-106">Background: pertenencia a ASP.NET</span><span class="sxs-lookup"><span data-stu-id="45b86-106">Background: Membership in ASP.NET</span></span>

### <a name="aspnet-membership"></a><span data-ttu-id="45b86-107">Pertenencia a ASP.NET</span><span class="sxs-lookup"><span data-stu-id="45b86-107">ASP.NET Membership</span></span>

<span data-ttu-id="45b86-108">La [pertenencia a ASP.net](https://msdn.microsoft.com/library/yh26yfzy(v=VS.100).aspx) se diseñó para resolver los requisitos de pertenencia a sitios que eran comunes en 2005, que implicaban la autenticación de formularios y una SQL Server base de datos para nombres de usuario, contraseñas y datos de perfil.</span><span class="sxs-lookup"><span data-stu-id="45b86-108">[ASP.NET Membership](https://msdn.microsoft.com/library/yh26yfzy(v=VS.100).aspx) was designed to solve site membership requirements that were common in 2005, which involved Forms Authentication, and a SQL Server database for user names, passwords, and profile data.</span></span> <span data-ttu-id="45b86-109">En la actualidad, hay una matriz mucho más amplia de opciones de almacenamiento de datos para las aplicaciones web y la mayoría de los desarrolladores desean habilitar sus sitios para usar proveedores de identidades sociales para la funcionalidad de autenticación y autorización.</span><span class="sxs-lookup"><span data-stu-id="45b86-109">Today there is a much broader array of data storage options for web applications, and most developers want to enable their sites to use social identity providers for authentication and authorization functionality.</span></span> <span data-ttu-id="45b86-110">Las limitaciones del diseño de la pertenencia a ASP.NET dificultan esta transición:</span><span class="sxs-lookup"><span data-stu-id="45b86-110">The limitations of ASP.NET Membership's design make this transition difficult:</span></span>

- <span data-ttu-id="45b86-111">El esquema de la base de datos se diseñó para SQL Server y no se puede cambiar.</span><span class="sxs-lookup"><span data-stu-id="45b86-111">The database schema was designed for SQL Server and you can't change it.</span></span> <span data-ttu-id="45b86-112">Puede agregar información de perfil, pero los datos adicionales se empaquetan en una tabla diferente, lo que dificulta el acceso a través de cualquier medio, excepto a través de la API del proveedor de perfiles.</span><span class="sxs-lookup"><span data-stu-id="45b86-112">You can add profile information, but the additional data is packed into a different table, which makes it difficult to access by any means except through the Profile Provider API.</span></span>
- <span data-ttu-id="45b86-113">El sistema del proveedor permite cambiar el almacén de datos de respaldo, pero el sistema está diseñado en torno a las suposiciones adecuadas para una base de datos relacional.</span><span class="sxs-lookup"><span data-stu-id="45b86-113">The provider system enables you to change the backing data store, but the system is designed around assumptions appropriate for a relational database.</span></span> <span data-ttu-id="45b86-114">Puede escribir un proveedor para almacenar información de pertenencia en un mecanismo de almacenamiento no relacional, como Azure Storage tablas, pero después tiene que solucionar el diseño relacional escribiendo gran cantidad de código y muchas excepciones `System.NotImplementedException` para los métodos que no se aplican a las bases de datos NoSQL.</span><span class="sxs-lookup"><span data-stu-id="45b86-114">You can write a provider to store membership information in a non-relational storage mechanism, such as Azure Storage Tables, but then you have to work around the relational design by writing much code and a lot of `System.NotImplementedException` exceptions for methods that don't apply to NoSQL databases.</span></span>
- <span data-ttu-id="45b86-115">Dado que la funcionalidad de inicio de sesión y cierre de sesión se basa en la autenticación de formularios, el sistema de pertenencia no puede usar [OWIN](../../../aspnet/overview/owin-and-katana/an-overview-of-project-katana.md).</span><span class="sxs-lookup"><span data-stu-id="45b86-115">Since the log-in/log-out functionality is based on Forms Authentication, the membership system can't use [OWIN](../../../aspnet/overview/owin-and-katana/an-overview-of-project-katana.md).</span></span> <span data-ttu-id="45b86-116">OWIN incluye componentes de middleware para la autenticación, incluida la compatibilidad con inicios de sesión mediante proveedores de identidades externos (por ejemplo, cuentas de Microsoft, Facebook, Google, Twitter) e inicios de sesión con cuentas de organización desde Active Directory locales o Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="45b86-116">OWIN includes middleware components for authentication, including support for log-ins using external identity providers (like Microsoft Accounts, Facebook, Google, Twitter), and log-ins using organizational accounts from on-premises Active Directory or Azure Active Directory.</span></span> <span data-ttu-id="45b86-117">OWIN también incluye compatibilidad con OAuth 2,0, JWT y CORS.</span><span class="sxs-lookup"><span data-stu-id="45b86-117">OWIN also includes support for OAuth 2.0, JWT and CORS.</span></span>

### <a name="aspnet-simple-membership"></a><span data-ttu-id="45b86-118">Pertenencia simple de ASP.NET</span><span class="sxs-lookup"><span data-stu-id="45b86-118">ASP.NET Simple Membership</span></span>

<span data-ttu-id="45b86-119">La [pertenencia simple a ASP.net](../../../web-pages/overview/security/16-adding-security-and-membership.md) se desarrolló como un sistema de pertenencia para ASP.NET Web pages.</span><span class="sxs-lookup"><span data-stu-id="45b86-119">[ASP.NET simple membership](../../../web-pages/overview/security/16-adding-security-and-membership.md) was developed as a membership system for ASP.NET Web Pages.</span></span> <span data-ttu-id="45b86-120">Se lanzó con WebMatrix y Visual Studio 2010 SP1.</span><span class="sxs-lookup"><span data-stu-id="45b86-120">It was released with WebMatrix and Visual Studio 2010 SP1.</span></span> <span data-ttu-id="45b86-121">El objetivo de la pertenencia simple era facilitar la incorporación de la funcionalidad de pertenencia a una aplicación de páginas Web.</span><span class="sxs-lookup"><span data-stu-id="45b86-121">The goal of Simple Membership was to make it easy to add membership functionality to a Web Pages application.</span></span>

<span data-ttu-id="45b86-122">La pertenencia simple facilitaba la personalización de la información de Perfil de usuario, pero también comparte los demás problemas con la pertenencia a ASP.NET y tiene algunas limitaciones:</span><span class="sxs-lookup"><span data-stu-id="45b86-122">Simple Membership did make it easier to customize user profile information, but it still shares the other problems with ASP.NET Membership, and it has some limitations:</span></span>

- <span data-ttu-id="45b86-123">Era difícil conservar los datos del sistema de pertenencia en un almacén no relacional.</span><span class="sxs-lookup"><span data-stu-id="45b86-123">It was hard to persist membership system data in a non-relational store.</span></span>
- <span data-ttu-id="45b86-124">No se puede usar con OWIN.</span><span class="sxs-lookup"><span data-stu-id="45b86-124">You can't use it with OWIN.</span></span>
- <span data-ttu-id="45b86-125">No funciona bien con los proveedores de pertenencia a ASP.NET existentes y no es extensible.</span><span class="sxs-lookup"><span data-stu-id="45b86-125">It doesn't work well with existing ASP.NET Membership providers, and it's not extensible.</span></span>

### <a name="aspnet-universal-providers"></a><span data-ttu-id="45b86-126">Proveedores universales de ASP.NET</span><span class="sxs-lookup"><span data-stu-id="45b86-126">ASP.NET Universal Providers</span></span>

<span data-ttu-id="45b86-127">[Proveedores universales de ASP.net](http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx) se desarrollaron para hacer posible la persistencia de la información de pertenencia en Microsoft Azure SQL Database y también funcionan con SQL Server Compact.</span><span class="sxs-lookup"><span data-stu-id="45b86-127">[ASP.NET Universal Providers](http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx) were developed to make it possible to persist membership information in Microsoft Azure SQL Database, and they also work with SQL Server Compact.</span></span> <span data-ttu-id="45b86-128">El Proveedores universales se compiló en Entity Framework Code First, lo que significa que el Proveedores universales se puede usar para conservar los datos en cualquier almacén compatible con EF.</span><span class="sxs-lookup"><span data-stu-id="45b86-128">The Universal Providers were built on Entity Framework Code First, which means that the Universal Providers can be used to persist data in any store supported by EF.</span></span> <span data-ttu-id="45b86-129">Con el Proveedores universales, el esquema de la base de datos también se limpió bastante.</span><span class="sxs-lookup"><span data-stu-id="45b86-129">With the Universal Providers, the database schema was cleaned up quite a lot as well.</span></span>

<span data-ttu-id="45b86-130">El Proveedores universales se basa en la infraestructura de pertenencia a ASP.NET, por lo que sigue teniendo las mismas limitaciones que el proveedor SqlMembership.</span><span class="sxs-lookup"><span data-stu-id="45b86-130">The Universal Providers are built on the ASP.NET Membership infrastructure, so they still carry the same limitations as the SqlMembership Provider.</span></span> <span data-ttu-id="45b86-131">Es decir, se diseñaron para bases de datos relacionales y es difícil personalizar la información del perfil y del usuario.</span><span class="sxs-lookup"><span data-stu-id="45b86-131">That is, they were designed for relational databases and it's hard to customize profile and user information.</span></span> <span data-ttu-id="45b86-132">Estos proveedores también usan la autenticación de formularios para la funcionalidad de inicio y cierre de sesión.</span><span class="sxs-lookup"><span data-stu-id="45b86-132">These providers also still use Forms Authentication for sign-in and sign-out functionality.</span></span>

## <a name="aspnet-identity"></a><span data-ttu-id="45b86-133">ASP.NET Identity</span><span class="sxs-lookup"><span data-stu-id="45b86-133">ASP.NET Identity</span></span>

<span data-ttu-id="45b86-134">Como el caso de pertenencia de ASP.NET ha evolucionado a lo largo de los años, el equipo de ASP.NET ha aprendido mucho de los comentarios de los clientes.</span><span class="sxs-lookup"><span data-stu-id="45b86-134">As the membership story in ASP.NET has evolved over the years, the ASP.NET team has learned a lot from feedback from customers.</span></span>

<span data-ttu-id="45b86-135">La suposición de que los usuarios inician sesión especificando un nombre de usuario y una contraseña que se han registrado en su propia aplicación ya no son válidos.</span><span class="sxs-lookup"><span data-stu-id="45b86-135">The assumption that users will sign in by entering a user name and password that they have registered in your own application is no longer valid.</span></span> <span data-ttu-id="45b86-136">La web ha vuelto a ser más social.</span><span class="sxs-lookup"><span data-stu-id="45b86-136">The web has become more social.</span></span> <span data-ttu-id="45b86-137">Los usuarios interactúan entre sí en tiempo real a través de canales sociales, como Facebook, Twitter y otros sitios web sociales.</span><span class="sxs-lookup"><span data-stu-id="45b86-137">Users are interacting with each other in real time through social channels such as Facebook, Twitter, and other social web sites.</span></span> <span data-ttu-id="45b86-138">Los desarrolladores desean que los usuarios puedan iniciar sesión con sus identidades sociales para que puedan tener una experiencia enriquecida en sus sitios Web.</span><span class="sxs-lookup"><span data-stu-id="45b86-138">Developers want users to be able to sign in with their social identities so that they can have a rich experience on their web sites.</span></span> <span data-ttu-id="45b86-139">Un sistema de pertenencia moderno debe habilitar los inicios de sesión basados en la redirección a proveedores de autenticación como Facebook, Twitter y otros.</span><span class="sxs-lookup"><span data-stu-id="45b86-139">A modern membership system must enable redirection-based log-ins to authentication providers such as Facebook, Twitter, and others.</span></span>

<span data-ttu-id="45b86-140">A medida que evolucionó el desarrollo web, se hicieron los patrones de desarrollo web.</span><span class="sxs-lookup"><span data-stu-id="45b86-140">As web development evolved, so did the patterns of web development.</span></span> <span data-ttu-id="45b86-141">La prueba unitaria del código de la aplicación se convirtió en una preocupación principal para los desarrolladores de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="45b86-141">Unit testing of application code became a core concern for application developers.</span></span> <span data-ttu-id="45b86-142">En 2008 ASP.NET agregó un nuevo marco basado en el patrón Model-View-Controller (MVC), en parte para ayudar a los desarrolladores a compilar aplicaciones ASP.NET de prueba unitarias.</span><span class="sxs-lookup"><span data-stu-id="45b86-142">In 2008 ASP.NET added a new framework based on the Model-View-Controller (MVC) pattern, in part to help developers build unit testable ASP.NET applications.</span></span> <span data-ttu-id="45b86-143">Los desarrolladores que quieren realizar pruebas unitarias de la lógica de la aplicación también querían poder hacerlo con el sistema de pertenencia.</span><span class="sxs-lookup"><span data-stu-id="45b86-143">Developers who wanted to unit test their application logic also wanted to be able to do that with the membership system.</span></span>

<span data-ttu-id="45b86-144">Teniendo en cuenta estos cambios en el desarrollo de aplicaciones Web, ASP.NET Identity se desarrolló con los siguientes objetivos:</span><span class="sxs-lookup"><span data-stu-id="45b86-144">Considering these changes in web application development, ASP.NET Identity was developed with the following goals:</span></span>

- <span data-ttu-id="45b86-145">**Un sistema ASP.NET Identity**</span><span class="sxs-lookup"><span data-stu-id="45b86-145">**One ASP.NET Identity system**</span></span>

    - <span data-ttu-id="45b86-146">ASP.NET Identity puede usarse con todos los marcos de trabajo de ASP.NET, como ASP.NET MVC, formularios Web Forms, Web pages, Web API y Signalr.</span><span class="sxs-lookup"><span data-stu-id="45b86-146">ASP.NET Identity can be used with all of the ASP.NET frameworks, such as ASP.NET MVC, Web Forms, Web Pages, Web API, and SignalR.</span></span>
    - <span data-ttu-id="45b86-147">ASP.NET Identity puede usarse al compilar aplicaciones Web, de teléfono, de tienda o híbridas.</span><span class="sxs-lookup"><span data-stu-id="45b86-147">ASP.NET Identity can be used when you are building web, phone, store, or hybrid applications.</span></span>
- <span data-ttu-id="45b86-148">**Facilidad de conexión de datos de perfil sobre el usuario**</span><span class="sxs-lookup"><span data-stu-id="45b86-148">**Ease of plugging in profile data about the user**</span></span>

    - <span data-ttu-id="45b86-149">Tiene control sobre el esquema de información de usuario y perfil.</span><span class="sxs-lookup"><span data-stu-id="45b86-149">You have control over the schema of user and profile information.</span></span> <span data-ttu-id="45b86-150">Por ejemplo, puede habilitar fácilmente el sistema para que almacene fechas de nacimiento escritas por los usuarios al registrar una cuenta en la aplicación.</span><span class="sxs-lookup"><span data-stu-id="45b86-150">For example, you can easily enable the system to store birth dates entered by users when they register an account in your application.</span></span>

- <span data-ttu-id="45b86-151">**Control Persistence**</span><span class="sxs-lookup"><span data-stu-id="45b86-151">**Persistence control**</span></span>

    - <span data-ttu-id="45b86-152">De forma predeterminada, el sistema ASP.NET Identity almacena toda la información de usuario en una base de datos.</span><span class="sxs-lookup"><span data-stu-id="45b86-152">By default, the ASP.NET Identity system stores all the user information in a database.</span></span> <span data-ttu-id="45b86-153">ASP.NET Identity usa Entity Framework Code First para implementar todo su mecanismo de persistencia.</span><span class="sxs-lookup"><span data-stu-id="45b86-153">ASP.NET Identity uses Entity Framework Code First to implement all of its persistence mechanism.</span></span>
    - <span data-ttu-id="45b86-154">Puesto que controla el esquema de la base de datos, las tareas comunes, como cambiar los nombres de tabla o cambiar el tipo de datos de las claves principales, son sencillas.</span><span class="sxs-lookup"><span data-stu-id="45b86-154">Since you control the database schema, common tasks such as changing table names or changing the data type of primary keys is simple to do.</span></span>
    - <span data-ttu-id="45b86-155">Es fácil conectar mecanismos de almacenamiento diferentes, como SharePoint, Azure Storage Table Service, bases de datos NoSQL, etc., sin tener que iniciar excepciones `System.NotImplementedExceptions`.</span><span class="sxs-lookup"><span data-stu-id="45b86-155">It's easy to plug in different storage mechanisms such as SharePoint, Azure Storage Table Service, NoSQL databases, etc., without having to throw `System.NotImplementedExceptions` exceptions.</span></span>
- <span data-ttu-id="45b86-156">**Capacidad de prueba unitaria**</span><span class="sxs-lookup"><span data-stu-id="45b86-156">**Unit testability**</span></span>

    - <span data-ttu-id="45b86-157">ASP.NET Identity hace que la aplicación web sea más comprobable.</span><span class="sxs-lookup"><span data-stu-id="45b86-157">ASP.NET Identity makes the web application more unit testable.</span></span> <span data-ttu-id="45b86-158">Puede escribir pruebas unitarias para las partes de la aplicación que utilizan ASP.NET Identity.</span><span class="sxs-lookup"><span data-stu-id="45b86-158">You can write unit tests for the parts of your application that use ASP.NET Identity.</span></span>
- <span data-ttu-id="45b86-159">**Proveedor de funciones**</span><span class="sxs-lookup"><span data-stu-id="45b86-159">**Role provider**</span></span>

    - <span data-ttu-id="45b86-160">Hay un proveedor de roles que le permite restringir el acceso a las partes de la aplicación por parte de los roles.</span><span class="sxs-lookup"><span data-stu-id="45b86-160">There is a role provider which lets you restrict access to parts of your application by roles.</span></span> <span data-ttu-id="45b86-161">Puede crear fácilmente roles como "admin" y agregar usuarios a los roles.</span><span class="sxs-lookup"><span data-stu-id="45b86-161">You can easily create roles such as "Admin" and add users to roles.</span></span>
- <span data-ttu-id="45b86-162">**Basado en notificaciones**</span><span class="sxs-lookup"><span data-stu-id="45b86-162">**Claims Based**</span></span>

    - <span data-ttu-id="45b86-163">ASP.NET Identity admite la autenticación basada en notificaciones, donde la identidad del usuario se representa como un conjunto de notificaciones.</span><span class="sxs-lookup"><span data-stu-id="45b86-163">ASP.NET Identity supports claims-based authentication, where the user's identity is represented as a set of claims.</span></span> <span data-ttu-id="45b86-164">Las notificaciones permiten a los desarrolladores ser mucho más expresivos en la descripción de la identidad de un usuario que los roles permitidos.</span><span class="sxs-lookup"><span data-stu-id="45b86-164">Claims allow developers to be a lot more expressive in describing a user's identity than roles allow.</span></span> <span data-ttu-id="45b86-165">Mientras que la pertenencia al rol es simplemente un booleano (miembro o no miembro), una demanda puede incluir información enriquecida sobre la identidad y la pertenencia del usuario.</span><span class="sxs-lookup"><span data-stu-id="45b86-165">Whereas role membership is just a boolean (member or non-member), a claim can include rich information about the user's identity and membership.</span></span>
- <span data-ttu-id="45b86-166">**Proveedores de inicio de sesión social**</span><span class="sxs-lookup"><span data-stu-id="45b86-166">**Social Login Providers**</span></span>

    - <span data-ttu-id="45b86-167">Puede agregar fácilmente inicios de sesión sociales, como cuenta de Microsoft, Facebook, Twitter, Google y otros a su aplicación, y almacenar los datos específicos del usuario en la aplicación.</span><span class="sxs-lookup"><span data-stu-id="45b86-167">You can easily add social log-ins such as Microsoft Account, Facebook, Twitter, Google, and others to your application, and store the user-specific data in your application.</span></span>

- <span data-ttu-id="45b86-168">**Integración OWIN**</span><span class="sxs-lookup"><span data-stu-id="45b86-168">**OWIN Integration**</span></span>

    - <span data-ttu-id="45b86-169">La autenticación ASP.NET se basa ahora en middleware OWIN que se puede usar en cualquier host basado en OWIN.</span><span class="sxs-lookup"><span data-stu-id="45b86-169">ASP.NET authentication is now based on OWIN middleware that can be used on any OWIN-based host.</span></span> <span data-ttu-id="45b86-170">ASP.NET Identity no tiene ninguna dependencia en System. Web.</span><span class="sxs-lookup"><span data-stu-id="45b86-170">ASP.NET Identity does not have any dependency on System.Web.</span></span> <span data-ttu-id="45b86-171">Es un marco OWIN totalmente compatible y se puede usar en cualquier aplicación hospedada por OWIN.</span><span class="sxs-lookup"><span data-stu-id="45b86-171">It is a fully compliant OWIN framework and can be used in any OWIN hosted application.</span></span>
    - <span data-ttu-id="45b86-172">ASP.NET Identity usa la autenticación OWIN para el inicio de sesión y el cierre de sesión de los usuarios en el sitio Web.</span><span class="sxs-lookup"><span data-stu-id="45b86-172">ASP.NET Identity uses OWIN Authentication for log-in/log-out of users in the web site.</span></span> <span data-ttu-id="45b86-173">Esto significa que, en lugar de usar FormsAuthentication para generar la cookie, la aplicación usa OWIN CookieAuthentication para hacerlo.</span><span class="sxs-lookup"><span data-stu-id="45b86-173">This means that instead of using FormsAuthentication to generate the cookie, the application uses OWIN CookieAuthentication to do that.</span></span>
- <span data-ttu-id="45b86-174">**Paquete NuGet**</span><span class="sxs-lookup"><span data-stu-id="45b86-174">**NuGet package**</span></span>

    - <span data-ttu-id="45b86-175">ASP.NET Identity se redistribuye como un paquete NuGet que se instala en las plantillas de ASP.NET MVC, Web Forms y Web API que se incluyen con Visual Studio 2017.</span><span class="sxs-lookup"><span data-stu-id="45b86-175">ASP.NET Identity is redistributed as a NuGet package which is installed in the ASP.NET MVC, Web Forms and Web API templates that ship with Visual Studio 2017.</span></span> <span data-ttu-id="45b86-176">Puede descargar este paquete de NuGet desde la galería de NuGet.</span><span class="sxs-lookup"><span data-stu-id="45b86-176">You can download this NuGet package from the NuGet gallery.</span></span>
    - <span data-ttu-id="45b86-177">La liberación de ASP.NET Identity como un paquete NuGet facilita que el equipo de ASP.NET itere en nuevas características y correcciones de errores y los entregue a los desarrolladores de forma ágil.</span><span class="sxs-lookup"><span data-stu-id="45b86-177">Releasing ASP.NET Identity as a NuGet package makes it easier for the ASP.NET team to iterate on new features and bug fixes, and deliver these to developers in an agile manner.</span></span>

## <a name="get-started-with-aspnet-identity"></a><span data-ttu-id="45b86-178">Introducción a ASP.NET Identity</span><span class="sxs-lookup"><span data-stu-id="45b86-178">Get started with ASP.NET Identity</span></span>

<span data-ttu-id="45b86-179">ASP.NET Identity se usa en las plantillas de proyecto de Visual Studio 2017 para ASP.NET MVC, Web Forms, Web API y SPA.</span><span class="sxs-lookup"><span data-stu-id="45b86-179">ASP.NET Identity is used in the Visual Studio 2017 project templates for ASP.NET MVC, Web Forms, Web API and SPA.</span></span> <span data-ttu-id="45b86-180">En este tutorial, veremos cómo se usan las plantillas de proyecto ASP.NET Identity para agregar funcionalidad para registrarse, iniciar sesión y cerrar la sesión de un usuario.</span><span class="sxs-lookup"><span data-stu-id="45b86-180">In this walkthrough, we'll illustrate how the project templates use ASP.NET Identity to add functionality to register, sign in and sign out a user.</span></span>

<span data-ttu-id="45b86-181">ASP.NET Identity se implementa mediante el procedimiento siguiente.</span><span class="sxs-lookup"><span data-stu-id="45b86-181">ASP.NET Identity is implemented using the following procedure.</span></span> <span data-ttu-id="45b86-182">El propósito de este artículo es proporcionarle una introducción de alto nivel de ASP.NET Identity. puede seguirlo paso a paso o simplemente leer los detalles.</span><span class="sxs-lookup"><span data-stu-id="45b86-182">The purpose of this article is to give you a high level overview of ASP.NET Identity; you can follow it step by step or just read the details.</span></span> <span data-ttu-id="45b86-183">Para obtener instrucciones más detalladas sobre cómo crear aplicaciones con ASP.NET Identity, incluido el uso de la nueva API para agregar usuarios, roles e información de perfil, consulte la sección pasos siguientes al final de este artículo.</span><span class="sxs-lookup"><span data-stu-id="45b86-183">For more detailed instructions on creating apps using ASP.NET Identity, including using the new API to add users, roles and profile information, see the Next Steps section at the end of this article.</span></span>

1. <span data-ttu-id="45b86-184">Cree una aplicación de ASP.NET MVC con cuentas individuales.</span><span class="sxs-lookup"><span data-stu-id="45b86-184">Create an ASP.NET MVC application with Individual Accounts.</span></span> <span data-ttu-id="45b86-185">Puede usar ASP.NET Identity en ASP.NET MVC, Web Forms, Web API, Signalr, etc. En este artículo, comenzaremos con una aplicación ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="45b86-185">You can use ASP.NET Identity in ASP.NET MVC, Web Forms, Web API, SignalR etc. In this article we will start with an ASP.NET MVC application.</span></span>  
  
    ![](introduction-to-aspnet-identity/_static/image1.png)
2. <span data-ttu-id="45b86-186">El proyecto creado contiene los tres paquetes siguientes para ASP.NET Identity.</span><span class="sxs-lookup"><span data-stu-id="45b86-186">The created project contains the following three packages for ASP.NET Identity.</span></span>

    - [`Microsoft.AspNet.Identity.EntityFramework`](http://www.nuget.org/packages/Microsoft.AspNet.Identity.EntityFramework/)  
   <span data-ttu-id="45b86-187">Este paquete tiene la implementación de Entity Framework de ASP.NET Identity que conservará los datos de ASP.NET Identity y el esquema que se SQL Server.</span><span class="sxs-lookup"><span data-stu-id="45b86-187">This package has the Entity Framework implementation of ASP.NET Identity which will persist the ASP.NET Identity data and schema to SQL Server.</span></span>
    - [`Microsoft.AspNet.Identity.Core`](http://www.nuget.org/packages/Microsoft.AspNet.Identity.Core/)  
   <span data-ttu-id="45b86-188">Este paquete tiene las interfaces principales para ASP.NET Identity.</span><span class="sxs-lookup"><span data-stu-id="45b86-188">This package has the core interfaces for ASP.NET Identity.</span></span> <span data-ttu-id="45b86-189">Este paquete se puede usar para escribir una implementación para ASP.NET Identity que tenga como destino distintos almacenes de persistencia, como Azure Table Storage, bases de datos NoSQL, etc.</span><span class="sxs-lookup"><span data-stu-id="45b86-189">This package can be used to write an implementation for ASP.NET Identity that targets different persistence stores such as Azure Table Storage, NoSQL databases etc.</span></span>
    - [`Microsoft.AspNet.Identity.OWIN`](http://www.nuget.org/packages/Microsoft.AspNet.Identity.Owin/)  
   <span data-ttu-id="45b86-190">Este paquete contiene funcionalidad que se usa para conectar la autenticación OWIN con ASP.NET Identity en aplicaciones ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="45b86-190">This package contains functionality that is used to plug in OWIN authentication with ASP.NET Identity in ASP.NET applications.</span></span> <span data-ttu-id="45b86-191">Se usa cuando se agrega la funcionalidad de inicio de sesión a la aplicación y se llama a middleware de autenticación de cookies OWIN para generar una cookie.</span><span class="sxs-lookup"><span data-stu-id="45b86-191">This is used when you add sign in functionality to your application and call into OWIN Cookie Authentication middleware to generate a cookie.</span></span>
3. <span data-ttu-id="45b86-192">Creación de un usuario.</span><span class="sxs-lookup"><span data-stu-id="45b86-192">Creating a user.</span></span>  
   <span data-ttu-id="45b86-193">Inicie la aplicación y, a continuación, haga clic en el vínculo **registrar** para crear un usuario.</span><span class="sxs-lookup"><span data-stu-id="45b86-193">Launch the application and then click on the **Register** link to create a user.</span></span> <span data-ttu-id="45b86-194">La siguiente imagen muestra la página de registro que recopila el nombre de usuario y la contraseña.</span><span class="sxs-lookup"><span data-stu-id="45b86-194">The following image shows the Register page that collects the user name and password.</span></span>  
  
    ![](introduction-to-aspnet-identity/_static/image2.png)  
  
   <span data-ttu-id="45b86-195">Cuando el usuario selecciona el botón **registrar** , la acción `Register` del controlador de cuenta crea el usuario mediante una llamada a la API de ASP.net Identity, como se resalta a continuación:</span><span class="sxs-lookup"><span data-stu-id="45b86-195">When the user selects the **Register** button, the `Register` action of the Account controller creates the user by calling the ASP.NET Identity API, as highlighted below:</span></span>

    [!code-csharp[Main](introduction-to-aspnet-identity/samples/sample1.cs?highlight=8-9)]
4. <span data-ttu-id="45b86-196">Inicie sesión.</span><span class="sxs-lookup"><span data-stu-id="45b86-196">Sign in.</span></span>  
   <span data-ttu-id="45b86-197">Si el usuario se creó correctamente, ha iniciado sesión en el método `SignInAsync`.</span><span class="sxs-lookup"><span data-stu-id="45b86-197">If the user was successfully created, she is signed in by the `SignInAsync` method.</span></span>  

    [!code-csharp[Main](introduction-to-aspnet-identity/samples/sample6.cs?highlight=12)]

   <span data-ttu-id="45b86-198">El método `SignInManager.SignInAsync` genera un [ClaimsIdentity](https://msdn.microsoft.com/library/system.security.claims.claimsidentity.aspx).</span><span class="sxs-lookup"><span data-stu-id="45b86-198">The `SignInManager.SignInAsync` method generates a [ClaimsIdentity](https://msdn.microsoft.com/library/system.security.claims.claimsidentity.aspx).</span></span> <span data-ttu-id="45b86-199">Como ASP.NET Identity y la autenticación de cookies OWIN son un sistema basado en notificaciones, el marco de trabajo requiere que la aplicación genere un ClaimsIdentity para el usuario.</span><span class="sxs-lookup"><span data-stu-id="45b86-199">Since ASP.NET Identity and OWIN Cookie Authentication are claims-based system, the framework requires the app to generate a ClaimsIdentity for the user.</span></span> <span data-ttu-id="45b86-200">ClaimsIdentity contiene información sobre todas las notificaciones para el usuario, como los roles a los que pertenece el usuario.</span><span class="sxs-lookup"><span data-stu-id="45b86-200">ClaimsIdentity has information about all the claims for the user, such as what roles the user belongs to.</span></span>   
 
5. <span data-ttu-id="45b86-201">Cierre la sesión.</span><span class="sxs-lookup"><span data-stu-id="45b86-201">Log off.</span></span>  
   <span data-ttu-id="45b86-202">Seleccione el vínculo **Cerrar sesión** para llamar a la acción de cierre de sesión en el controlador de cuentas.</span><span class="sxs-lookup"><span data-stu-id="45b86-202">Select the **Log off** link to call the LogOff action in the account controller.</span></span> 

    [!code-csharp[Main](introduction-to-aspnet-identity/samples/sample5.cs?highlight=6)]

   <span data-ttu-id="45b86-203">El código resaltado anterior muestra el método OWIN `AuthenticationManager.SignOut`.</span><span class="sxs-lookup"><span data-stu-id="45b86-203">The highlighted code above shows the OWIN `AuthenticationManager.SignOut` method.</span></span> <span data-ttu-id="45b86-204">Esto es análogo al método [FormsAuthentication. SignOut](https://msdn.microsoft.com/library/system.web.security.formsauthentication.signout.aspx) usado por el módulo [FormsAuthentication](https://msdn.microsoft.com/library/system.web.security.formsauthenticationmodule.aspx) en formularios Web Forms.</span><span class="sxs-lookup"><span data-stu-id="45b86-204">This is analogous to [FormsAuthentication.SignOut](https://msdn.microsoft.com/library/system.web.security.formsauthentication.signout.aspx) method used by the [FormsAuthentication](https://msdn.microsoft.com/library/system.web.security.formsauthenticationmodule.aspx) module in Web Forms.</span></span>

## <a name="components-of-aspnet-identity"></a><span data-ttu-id="45b86-205">Componentes de ASP.NET Identity</span><span class="sxs-lookup"><span data-stu-id="45b86-205">Components of ASP.NET Identity</span></span>

<span data-ttu-id="45b86-206">En el diagrama siguiente se muestran los componentes del sistema ASP.NET Identity (seleccione en [este](introduction-to-aspnet-identity/_static/image3.png) o en el diagrama para ampliarlo).</span><span class="sxs-lookup"><span data-stu-id="45b86-206">The diagram below shows the components of the ASP.NET Identity system (select on [this](introduction-to-aspnet-identity/_static/image3.png) or on the diagram to enlarge it).</span></span> <span data-ttu-id="45b86-207">Los paquetes en verde componen el sistema ASP.NET Identity.</span><span class="sxs-lookup"><span data-stu-id="45b86-207">The packages in green make up the ASP.NET Identity system.</span></span> <span data-ttu-id="45b86-208">Todos los demás paquetes son dependencias que se necesitan para usar el sistema ASP.NET Identity en aplicaciones ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="45b86-208">All the other packages are dependencies which are needed to use the ASP.NET Identity system in ASP.NET applications.</span></span>

[![](introduction-to-aspnet-identity/_static/image5.png)](introduction-to-aspnet-identity/_static/image4.png)

<span data-ttu-id="45b86-209">La siguiente es una breve descripción de los paquetes de NuGet no mencionados anteriormente:</span><span class="sxs-lookup"><span data-stu-id="45b86-209">The following is a brief description of the NuGet packages not mentioned previously:</span></span>

- [<span data-ttu-id="45b86-210">Microsoft.Owin.Security.Cookies</span><span class="sxs-lookup"><span data-stu-id="45b86-210">Microsoft.Owin.Security.Cookies</span></span>](http://www.nuget.org/packages/Microsoft.Owin.Security.Cookies/)  
 <span data-ttu-id="45b86-211">Middleware que permite que una aplicación use la autenticación basada en cookies, similar a la de ASP. Autenticación de formularios de la red.</span><span class="sxs-lookup"><span data-stu-id="45b86-211">Middleware that enables an application to use cookie based authentication, similar to ASP.NET's Forms Authentication.</span></span>
- [<span data-ttu-id="45b86-212">EntityFramework</span><span class="sxs-lookup"><span data-stu-id="45b86-212">EntityFramework</span></span>](http://www.nuget.org/packages/EntityFramework/)  
 <span data-ttu-id="45b86-213">Entity Framework es la tecnología de acceso a datos recomendada por Microsoft para las bases de datos relacionales.</span><span class="sxs-lookup"><span data-stu-id="45b86-213">Entity Framework is Microsoft's recommended data access technology for relational databases.</span></span>

## <a name="migrating-from-membership-to-aspnet-identity"></a><span data-ttu-id="45b86-214">Migración de la pertenencia a ASP.NET Identity</span><span class="sxs-lookup"><span data-stu-id="45b86-214">Migrating from Membership to ASP.NET Identity</span></span>

<span data-ttu-id="45b86-215">Esperamos proporcionar pronto instrucciones sobre cómo migrar las aplicaciones existentes que usan la pertenencia a ASP.NET o la pertenencia sencilla al nuevo sistema ASP.NET Identity.</span><span class="sxs-lookup"><span data-stu-id="45b86-215">We hope to soon provide guidance on migrating your existing apps that use ASP.NET Membership or Simple Membership to the new ASP.NET Identity system.</span></span>

## <a name="next-steps"></a><span data-ttu-id="45b86-216">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="45b86-216">Next Steps</span></span>

- [<span data-ttu-id="45b86-217">Creación de una aplicación ASP.NET MVC 5 con el inicio de sesión de Facebook y Google OAuth2 y OpenID</span><span class="sxs-lookup"><span data-stu-id="45b86-217">Create an ASP.NET MVC 5 App with Facebook and Google OAuth2 and OpenID Sign-on</span></span>](../../../mvc/overview/security/create-an-aspnet-mvc-5-app-with-facebook-and-google-oauth2-and-openid-sign-on.md)  
 <span data-ttu-id="45b86-218">En el tutorial se usa la API de ASP.NET Identity para agregar información de perfil a la base de datos de usuario y cómo autenticarse con Google y Facebook.</span><span class="sxs-lookup"><span data-stu-id="45b86-218">The tutorial uses the ASP.NET Identity API to add profile information to the user database, and how to authenticate with Google and Facebook.</span></span>
- [<span data-ttu-id="45b86-219">Crear una aplicación ASP.NET MVC con la autenticación y Base de datos SQL e implementar a Azure App Service</span><span class="sxs-lookup"><span data-stu-id="45b86-219">Create an ASP.NET MVC app with auth and SQL DB and deploy to Azure App Service</span></span>](https://docs.microsoft.com/aspnet/core/security/authorization/secure-data)  
 <span data-ttu-id="45b86-220">En este tutorial se muestra cómo usar la API de identidad para agregar usuarios y roles.</span><span class="sxs-lookup"><span data-stu-id="45b86-220">This tutorial shows how to use the Identity API to add users and roles.</span></span>
- [https://github.com/rustd/AspnetIdentitySample](https://github.com/rustd/AspnetIdentitySample)  
 <span data-ttu-id="45b86-221">Aplicación de ejemplo que muestra cómo agregar roles básicos y la compatibilidad con los usuarios, y cómo realizar roles y administración de usuarios.</span><span class="sxs-lookup"><span data-stu-id="45b86-221">Sample application that shows how to add basic roles and user support and how to do roles and user management.</span></span>
