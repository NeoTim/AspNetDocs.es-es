---
uid: web-forms/overview/deployment/configuring-team-foundation-server-for-web-deployment/configuring-permissions-for-team-build-deployment
title: Configuración de permisos para la implementación de Team Build | Microsoft Docs
author: jrjlee
description: En este tema se describe cómo configurar permisos para habilitar el servidor de compilación para implementar contenido en servidores web y servidores de bases de datos como parte de una b...
ms.author: riande
ms.date: 05/04/2012
ms.assetid: 2488a91e-b0a8-465a-b874-3233f724b56b
msc.legacyurl: /web-forms/overview/deployment/configuring-team-foundation-server-for-web-deployment/configuring-permissions-for-team-build-deployment
msc.type: authoredcontent
ms.openlocfilehash: 5699f72af6b8d7f18d1a2c631dfdedd63c66e1e6
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 03/06/2020
ms.locfileid: "78518509"
---
# <a name="configuring-permissions-for-team-build-deployment"></a><span data-ttu-id="8580b-103">Configurar permisos para la implementación de compilaciones de equipo</span><span class="sxs-lookup"><span data-stu-id="8580b-103">Configuring Permissions for Team Build Deployment</span></span>

<span data-ttu-id="8580b-104">por [Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="8580b-104">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="8580b-105">Descargar PDF</span><span class="sxs-lookup"><span data-stu-id="8580b-105">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="8580b-106">En este tema se describe cómo configurar los permisos para permitir que el servidor de compilación implemente contenido en servidores web y servidores de bases de datos como parte de un proceso de compilación automatizado.</span><span class="sxs-lookup"><span data-stu-id="8580b-106">This topic describes how to configure permissions to enable your build server to deploy content to web servers and database servers as part of an automated build process.</span></span>

<span data-ttu-id="8580b-107">Este tema forma parte de una serie de tutoriales basados en los requisitos de implementación empresarial de una empresa ficticia denominada Fabrikam, Inc. En esta serie de tutoriales se&#x2014;usa una solución de ejemplo de la&#x2014; [solución Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)para representar una aplicación web con un nivel de complejidad realista, como una aplicación ASP.NET MVC 3, un servicio Windows Communication Foundation (WCF) y un proyecto de base de datos.</span><span class="sxs-lookup"><span data-stu-id="8580b-107">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager solution](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="8580b-108">El método de implementación que se encuentra en el corazón de estos tutoriales se basa en el enfoque de archivo de proyecto dividido que se describe en [Descripción del archivo de proyecto](../web-deployment-in-the-enterprise/understanding-the-project-file.md), en el&#x2014;que el proceso de compilación se controla mediante dos archivos de proyecto que contiene instrucciones de compilación que se aplican a cada entorno de destino y uno que contiene la configuración de compilación e implementación específica del entorno.</span><span class="sxs-lookup"><span data-stu-id="8580b-108">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), in which the build process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="8580b-109">En tiempo de compilación, el archivo de proyecto específico del entorno se combina en el archivo de proyecto independiente del entorno para formar un conjunto completo de instrucciones de compilación.</span><span class="sxs-lookup"><span data-stu-id="8580b-109">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="task-overview"></a><span data-ttu-id="8580b-110">Información general sobre tareas</span><span class="sxs-lookup"><span data-stu-id="8580b-110">Task Overview</span></span>

<span data-ttu-id="8580b-111">Al instalar el servicio de compilación de Team Foundation Server (TFS) 2010, especifique la identidad con la que desea que se ejecute el servicio.</span><span class="sxs-lookup"><span data-stu-id="8580b-111">When you install the Team Foundation Server (TFS) 2010 build service, you specify the identity with which you want the service to run.</span></span> <span data-ttu-id="8580b-112">De forma predeterminada, esta es la cuenta de servicio de red.</span><span class="sxs-lookup"><span data-stu-id="8580b-112">By default, this is the Network Service account.</span></span> <span data-ttu-id="8580b-113">Como alternativa, puede configurar el servicio de compilación para que se ejecute con una cuenta de dominio.</span><span class="sxs-lookup"><span data-stu-id="8580b-113">Alternatively, you can configure the build service to run using a domain account.</span></span>

<span data-ttu-id="8580b-114">Cualquier tarea de implementación que requiera la autenticación de Windows y que planee automatizar mediante Team Build, se ejecutará con la identidad del servicio de compilación.</span><span class="sxs-lookup"><span data-stu-id="8580b-114">Any deployment tasks that require Windows authentication, and that you plan to automate using Team Build, will run using the build service identity.</span></span> <span data-ttu-id="8580b-115">Como tal, deberá conceder a la identidad del servicio de compilación los permisos necesarios para los servidores web y los servidores de bases de datos.</span><span class="sxs-lookup"><span data-stu-id="8580b-115">As such, you'll need to grant the build service identity any required permissions on your web servers and your database servers.</span></span>

> [!NOTE]
> <span data-ttu-id="8580b-116">La cuenta servicio de red usa la cuenta de equipo para autenticarse en otros equipos.</span><span class="sxs-lookup"><span data-stu-id="8580b-116">The Network Service account uses the machine account to authenticate to other computers.</span></span> <span data-ttu-id="8580b-117">Las cuentas de equipo adoptan el formato \* [nombre de dominio]\[nombre de máquina] \* **$** &#x2014;por ejemplo, **FABRIKAM\TFSBUILD $** .</span><span class="sxs-lookup"><span data-stu-id="8580b-117">Machine accounts take the form \*[domain name]\[machine name]\***$**&#x2014;for example, **FABRIKAM\TFSBUILD$**.</span></span> <span data-ttu-id="8580b-118">Como tal, si el servicio de compilación se ejecuta con la identidad de servicio de red, debe conceder los permisos necesarios a la identidad de la cuenta de equipo para el servidor de compilación.</span><span class="sxs-lookup"><span data-stu-id="8580b-118">As such, if your build service runs using the Network Service identity, you should grant any required permissions to the machine account identity for your build server.</span></span>

## <a name="configuring-web-server-permissions"></a><span data-ttu-id="8580b-119">Configuración de permisos del servidor Web</span><span class="sxs-lookup"><span data-stu-id="8580b-119">Configuring Web Server Permissions</span></span>

<span data-ttu-id="8580b-120">Como se describe en [elegir el enfoque adecuado para la implementación web](../configuring-server-environments-for-web-deployment/choosing-the-right-approach-to-web-deployment.md), hay dos enfoques principales que puede usar si desea implementar paquetes Web en un servidor Web remoto:</span><span class="sxs-lookup"><span data-stu-id="8580b-120">As described in [Choosing the Right Approach to Web Deployment](../configuring-server-environments-for-web-deployment/choosing-the-right-approach-to-web-deployment.md), there are two main approaches you can use if you want to deploy web packages to a remote web server:</span></span>

- <span data-ttu-id="8580b-121">Implemente la aplicación desde una ubicación remota mediante el destino del *servicio de Deployment Agent web* (también conocido como agente remoto) en el servidor de destino.</span><span class="sxs-lookup"><span data-stu-id="8580b-121">Deploy the application from a remote location by targeting the *Web Deployment Agent Service* (also known as the remote agent) on the destination server.</span></span>
- <span data-ttu-id="8580b-122">Implemente la aplicación desde una ubicación remota estableciendo como destino el controlador de Web Deploy de *Internet Information Services* (*IIS)* en el servidor de destino.</span><span class="sxs-lookup"><span data-stu-id="8580b-122">Deploy the application from a remote location by targeting the *Internet Information Services* (*IIS) Web Deploy Handler* on the destination server.</span></span>

<span data-ttu-id="8580b-123">El agente remoto tiene dos limitaciones clave en este caso:</span><span class="sxs-lookup"><span data-stu-id="8580b-123">The remote agent has two key limitations in this case:</span></span>

- <span data-ttu-id="8580b-124">El agente remoto solo admite la autenticación NTLM.</span><span class="sxs-lookup"><span data-stu-id="8580b-124">The remote agent supports only NTLM authentication.</span></span> <span data-ttu-id="8580b-125">En otras palabras, la implementación debe usar la identidad&#x2014;del servicio de compilación no se puede suplantar a otra cuenta.</span><span class="sxs-lookup"><span data-stu-id="8580b-125">In other words, the deployment must use the build service identity&#x2014;you can't impersonate another account.</span></span>
- <span data-ttu-id="8580b-126">Para usar el agente remoto, la cuenta que realiza la implementación debe ser un administrador en el servidor de destino.</span><span class="sxs-lookup"><span data-stu-id="8580b-126">To use the remote agent, the account that performs the deployment must be an administrator on the target server.</span></span>

<span data-ttu-id="8580b-127">Juntas, estas dos limitaciones hacen que el enfoque del agente remoto sea no deseable para una implementación automatizada de Team Build.</span><span class="sxs-lookup"><span data-stu-id="8580b-127">Together, these two limitations make the remote agent approach undesirable for an automated Team Build deployment.</span></span> <span data-ttu-id="8580b-128">Para usar este enfoque, debe convertir la cuenta de servicio de compilación en Administrador en cualquier servidor Web de destino.</span><span class="sxs-lookup"><span data-stu-id="8580b-128">To use this approach, you'd need to make the build service account an administrator on any target web servers.</span></span>

<span data-ttu-id="8580b-129">Por el contrario, el enfoque del controlador de Web Deploy ofrece varias ventajas:</span><span class="sxs-lookup"><span data-stu-id="8580b-129">In contrast, the Web Deploy Handler approach offers various advantages:</span></span>

- <span data-ttu-id="8580b-130">El controlador de Web Deploy admite la autenticación básica a través de HTTPS, que le permite pasar las credenciales de una cuenta alternativa a la herramienta de implementación web de IIS (Web Deploy).</span><span class="sxs-lookup"><span data-stu-id="8580b-130">The Web Deploy Handler supports basic authentication over HTTPS, which allows you to pass the credentials of an alternative account to the IIS Web Deployment Tool (Web Deploy).</span></span>
- <span data-ttu-id="8580b-131">Puede configurar los servidores Web de destino para permitir que los usuarios que no son administradores implementen contenido en sitios web de IIS específicos mediante el controlador de Web Deploy.</span><span class="sxs-lookup"><span data-stu-id="8580b-131">You can configure target web servers to allow non-administrator users to deploy content to specific IIS websites using the Web Deploy Handler.</span></span>

<span data-ttu-id="8580b-132">Como resultado, es claramente preferible destinar el controlador de Web Deploy al automatizar la implementación de paquetes web desde Team Build.</span><span class="sxs-lookup"><span data-stu-id="8580b-132">As a result, it's clearly preferable to target the Web Deploy Handler when you automate web package deployment from Team Build.</span></span> <span data-ttu-id="8580b-133">Este es el proceso recomendado:</span><span class="sxs-lookup"><span data-stu-id="8580b-133">This is the recommended process:</span></span>

1. <span data-ttu-id="8580b-134">Cree una cuenta de dominio con pocos privilegios para usarla en la implementación.</span><span class="sxs-lookup"><span data-stu-id="8580b-134">Create a low-privileged domain account to use for the deployment.</span></span>
2. <span data-ttu-id="8580b-135">Configure el controlador de Web Deploy y conceda a la cuenta los permisos necesarios para implementar contenido en un sitio web de IIS específico, como se describe en [configuración de un servidor web para la publicación de web deploy (controlador de web deploy)](../configuring-server-environments-for-web-deployment/configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler.md).</span><span class="sxs-lookup"><span data-stu-id="8580b-135">Configure the Web Deploy Handler and grant the account the required permissions to deploy content to a specific IIS website, as described in [Configuring a Web Server for Web Deploy Publishing (Web Deploy Handler)](../configuring-server-environments-for-web-deployment/configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler.md).</span></span>
3. <span data-ttu-id="8580b-136">Invoque Web Deploy y destine el controlador de Web Deploy mediante la autenticación básica y proporcione las credenciales de la cuenta de dominio que creó para realizar la implementación.</span><span class="sxs-lookup"><span data-stu-id="8580b-136">Invoke Web Deploy and target the Web Deploy Handler, using basic authentication and supplying the credentials of the domain account you created, to perform the deployment.</span></span>

<span data-ttu-id="8580b-137">En la solución de ejemplo [Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) , especifique el tipo de autenticación (básico o NTLM), las credenciales de web deploy y la dirección del punto de conexión (agente remoto o controlador de web deploy) en el archivo de proyecto específico del entorno.</span><span class="sxs-lookup"><span data-stu-id="8580b-137">In the [Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) sample solution, you specify the authentication type (basic or NTLM), the Web Deploy credentials, and the endpoint address (remote agent or Web Deploy Handler) in the environment-specific project file.</span></span> <span data-ttu-id="8580b-138">Estos valores se usan para formular y ejecutar un comando de Web Deploy cuando se ejecuta el archivo de proyecto.</span><span class="sxs-lookup"><span data-stu-id="8580b-138">These values are used to formulate and run a Web Deploy command when the project file is executed.</span></span> <span data-ttu-id="8580b-139">Para obtener más información, vea [implementar paquetes web](../web-deployment-in-the-enterprise/deploying-web-packages.md).</span><span class="sxs-lookup"><span data-stu-id="8580b-139">For more information, see [Deploying Web Packages](../web-deployment-in-the-enterprise/deploying-web-packages.md).</span></span>

<span data-ttu-id="8580b-140">Para obtener más información sobre cómo configurar el controlador de Web Deploy, incluido cómo configurar permisos, vea [configurar un servidor web para la publicación de web deploy (controlador de web deploy)](../configuring-server-environments-for-web-deployment/configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler.md).</span><span class="sxs-lookup"><span data-stu-id="8580b-140">For more information on configuring the Web Deploy Handler, including how to configure permissions, see [Configuring a Web Server for Web Deploy Publishing (Web Deploy Handler)](../configuring-server-environments-for-web-deployment/configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler.md).</span></span> <span data-ttu-id="8580b-141">Para obtener más información sobre la configuración del agente remoto, vea [configurar un servidor web para la publicación de web deploy (agente remoto)](../configuring-server-environments-for-web-deployment/configuring-a-web-server-for-web-deploy-publishing-remote-agent.md).</span><span class="sxs-lookup"><span data-stu-id="8580b-141">For more information on configuring the remote agent, see [Configuring a Web Server for Web Deploy Publishing (Remote Agent)](../configuring-server-environments-for-web-deployment/configuring-a-web-server-for-web-deploy-publishing-remote-agent.md).</span></span>

## <a name="configuring-database-server-permissions"></a><span data-ttu-id="8580b-142">Configuración de permisos de servidor de base de datos</span><span class="sxs-lookup"><span data-stu-id="8580b-142">Configuring Database Server Permissions</span></span>

<span data-ttu-id="8580b-143">Para implementar una base de datos en SQL Server, debe:</span><span class="sxs-lookup"><span data-stu-id="8580b-143">To deploy a database to SQL Server, you must:</span></span>

- <span data-ttu-id="8580b-144">Cree un inicio de sesión para la cuenta de implementación en la instancia de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="8580b-144">Create a login for the deploying account on the SQL Server instance.</span></span>
- <span data-ttu-id="8580b-145">Conceda los permisos de inicio de sesión **DBCreator** en la instancia de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="8580b-145">Grant the login **DBCreator** permissions on the SQL Server instance.</span></span>
- <span data-ttu-id="8580b-146">Después de la implementación inicial, agregue el inicio de sesión al rol de propietario de la base de datos **\_** en la base de datos de destino.</span><span class="sxs-lookup"><span data-stu-id="8580b-146">After the initial deployment, add the login to the **db\_owner** role on the target database.</span></span> <span data-ttu-id="8580b-147">Esto es necesario porque en las implementaciones posteriores, está modificando una base de datos existente en lugar de crear una nueva base de datos.</span><span class="sxs-lookup"><span data-stu-id="8580b-147">This is required because on subsequent deployments, you're modifying an existing database rather than creating a new database.</span></span>

<span data-ttu-id="8580b-148">Puede autenticarse en una instancia de SQL Server mediante la autenticación NTLM o la autenticación de SQL Server:</span><span class="sxs-lookup"><span data-stu-id="8580b-148">You can authenticate to a SQL Server instance using either NTLM authentication or SQL Server authentication:</span></span>

- <span data-ttu-id="8580b-149">Si usa la autenticación NTLM, debe conceder los permisos descritos anteriormente a la cuenta del servicio de compilación.</span><span class="sxs-lookup"><span data-stu-id="8580b-149">If you use NTLM authentication, you need to grant the permissions described above to the build service account.</span></span>
- <span data-ttu-id="8580b-150">Si usa la autenticación de SQL Server, debe conceder los permisos descritos anteriormente a la cuenta SQL Server.</span><span class="sxs-lookup"><span data-stu-id="8580b-150">If you use SQL Server authentication, you need to grant the permissions described above to the SQL Server account.</span></span> <span data-ttu-id="8580b-151">También debe incluir el SQL Server nombre de usuario y la contraseña en la cadena de conexión que usa para implementar la base de datos.</span><span class="sxs-lookup"><span data-stu-id="8580b-151">You also need to include the SQL Server user name and password in the connection string you use to deploy the database.</span></span>

<span data-ttu-id="8580b-152">Para obtener información paso a paso sobre cómo configurar permisos para la implementación de bases de datos, vea [configurar un servidor de base de datos para la publicación de web deploy](../configuring-server-environments-for-web-deployment/configuring-a-database-server-for-web-deploy-publishing.md).</span><span class="sxs-lookup"><span data-stu-id="8580b-152">For step-by-step details on how to configure permissions for database deployment, see [Configuring a Database Server for Web Deploy Publishing](../configuring-server-environments-for-web-deployment/configuring-a-database-server-for-web-deploy-publishing.md).</span></span>

## <a name="conclusion"></a><span data-ttu-id="8580b-153">Conclusión</span><span class="sxs-lookup"><span data-stu-id="8580b-153">Conclusion</span></span>

<span data-ttu-id="8580b-154">En este momento, debe comprender los permisos necesarios, junto con las opciones de autenticación abiertas, al automatizar las implementaciones de aplicaciones web y bases de datos desde Team Build.</span><span class="sxs-lookup"><span data-stu-id="8580b-154">At this point, you should understand the permissions required, together with the authentication options open to you, when you automate web application and database deployments from Team Build.</span></span> <span data-ttu-id="8580b-155">También debe poder implementar los permisos necesarios en los servidores Web de IIS y SQL Server servidores de bases de datos.</span><span class="sxs-lookup"><span data-stu-id="8580b-155">You should also be able to implement the necessary permissions on IIS web servers and SQL Server database servers.</span></span>

## <a name="further-reading"></a><span data-ttu-id="8580b-156">Información adicional</span><span class="sxs-lookup"><span data-stu-id="8580b-156">Further Reading</span></span>

<span data-ttu-id="8580b-157">Para obtener más información sobre la configuración de entornos de Windows Server para admitir la implementación remota, vea [configuración de entornos de servidor para la implementación web](../configuring-server-environments-for-web-deployment/configuring-server-environments-for-web-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="8580b-157">For more information on configuring Windows server environments to support remote deployment, see [Configuring Server Environments for Web Deployment](../configuring-server-environments-for-web-deployment/configuring-server-environments-for-web-deployment.md).</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="8580b-158">Anterior</span><span class="sxs-lookup"><span data-stu-id="8580b-158">Previous</span></span>](deploying-a-specific-build.md)
