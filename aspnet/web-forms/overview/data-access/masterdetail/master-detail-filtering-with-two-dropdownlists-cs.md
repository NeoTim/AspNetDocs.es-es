---
uid: web-forms/overview/data-access/masterdetail/master-detail-filtering-with-two-dropdownlists-cs
title: Maestro y detalles de filtrado con dos DropDownLists (C#) | Microsoft Docs
author: rick-anderson
description: Este tutorial amplía la relación principal-detalle para agregar una tercera capa, mediante dos controles de DropDownList para seleccionar la deseada registros primario y el elemento primario principal...
ms.author: riande
ms.date: 03/31/2010
ms.assetid: ac4b0d77-4816-4ded-afd0-88dab667aedd
msc.legacyurl: /web-forms/overview/data-access/masterdetail/master-detail-filtering-with-two-dropdownlists-cs
msc.type: authoredcontent
ms.openlocfilehash: 03d0cd7e835b5526af60a21679260f849714c37e
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 04/17/2019
ms.locfileid: "59421295"
---
# <a name="masterdetail-filtering-with-two-dropdownlists-c"></a><span data-ttu-id="f5f25-103">Filtrado de maestro y detalles con dos DropDownLists (C#)</span><span class="sxs-lookup"><span data-stu-id="f5f25-103">Master/Detail Filtering With Two DropDownLists (C#)</span></span>

<span data-ttu-id="f5f25-104">por [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="f5f25-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="f5f25-105">[Descargue la aplicación de ejemplo](http://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_8_CS.exe) o [descargar PDF](master-detail-filtering-with-two-dropdownlists-cs/_static/datatutorial08cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="f5f25-105">[Download Sample App](http://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_8_CS.exe) or [Download PDF](master-detail-filtering-with-two-dropdownlists-cs/_static/datatutorial08cs1.pdf)</span></span>

> <span data-ttu-id="f5f25-106">Este tutorial amplía la relación principal-detalle para agregar una tercera capa, mediante dos controles de DropDownList para seleccionar los registros primarios y el primario de segundo nivel deseados.</span><span class="sxs-lookup"><span data-stu-id="f5f25-106">This tutorial expands the master/detail relationship to add a third layer, using two DropDownList controls to select the desired parent and grandparent records.</span></span>


## <a name="introduction"></a><span data-ttu-id="f5f25-107">Introducción</span><span class="sxs-lookup"><span data-stu-id="f5f25-107">Introduction</span></span>

<span data-ttu-id="f5f25-108">En el [tutorial anterior](master-detail-filtering-with-a-dropdownlist-cs.md) hemos visto cómo mostrar un informe de detalles y maestras simple usando DropDownList único rellenado con las categorías y GridView que muestra los productos que pertenecen a la categoría seleccionada.</span><span class="sxs-lookup"><span data-stu-id="f5f25-108">In the [previous tutorial](master-detail-filtering-with-a-dropdownlist-cs.md) we examined how to display a simple master/details report using a single DropDownList populated with the categories and a GridView showing those products that belong to the selected category.</span></span> <span data-ttu-id="f5f25-109">Este modelo de informe funciona bien cuando la visualización de registros que tienen una relación de uno a varios y se pueden ampliar fácilmente para que funcione para escenarios que incluyen varias relaciones de uno a varios.</span><span class="sxs-lookup"><span data-stu-id="f5f25-109">This report pattern works well when displaying records that have a one-to-many relationship and can easily be extended to work for scenarios that include multiple one-to-many relationships.</span></span> <span data-ttu-id="f5f25-110">Por ejemplo, un sistema de entrada de pedidos tendría tablas que corresponden a los clientes, pedidos y artículos de línea de pedido.</span><span class="sxs-lookup"><span data-stu-id="f5f25-110">For example, an order entry system would have tables that correspond to customers, orders, and order line items.</span></span> <span data-ttu-id="f5f25-111">Un cliente determinado puede tener varios pedidos de cada pedido que consta de varios elementos.</span><span class="sxs-lookup"><span data-stu-id="f5f25-111">A given customer may have multiple orders with each order consisting of multiple items.</span></span> <span data-ttu-id="f5f25-112">Estos datos se pueden presentar al usuario con dos DropDownLists y GridView.</span><span class="sxs-lookup"><span data-stu-id="f5f25-112">Such data can be presented to the user with two DropDownLists and a GridView.</span></span> <span data-ttu-id="f5f25-113">El primer DropDownList tendría un elemento de lista para cada cliente en la base de datos con la segunda uno contenido que se va a los pedidos realizados por el cliente seleccionado.</span><span class="sxs-lookup"><span data-stu-id="f5f25-113">The first DropDownList would have a list item for each customer in the database with the second one's contents being the orders placed by the selected customer.</span></span> <span data-ttu-id="f5f25-114">Un control GridView haría una lista de los elementos de línea del pedido seleccionado.</span><span class="sxs-lookup"><span data-stu-id="f5f25-114">A GridView would list the line items from the selected order.</span></span>

<span data-ttu-id="f5f25-115">Mientras que la base de datos Northwind incluyen la información de detalles de pedido/customer/order canónico en su `Customers`, `Orders`, y `Order Details` tablas, estas tablas no se capturan en nuestra arquitectura.</span><span class="sxs-lookup"><span data-stu-id="f5f25-115">While the Northwind database include the canonical customer/order/order details information in its `Customers`, `Orders`, and `Order Details` tables, these tables aren't captured in our architecture.</span></span> <span data-ttu-id="f5f25-116">Sin embargo, aún podemos mostrar con dos DropDownLists dependientes.</span><span class="sxs-lookup"><span data-stu-id="f5f25-116">Nonetheless, we can still illustrate using two dependent DropDownLists.</span></span> <span data-ttu-id="f5f25-117">La primera DropDownList enumerará las categorías y el segundo los productos que pertenecen a la categoría seleccionada.</span><span class="sxs-lookup"><span data-stu-id="f5f25-117">The first DropDownList will list the categories and the second the products belonging to the selected category.</span></span> <span data-ttu-id="f5f25-118">DetailsView, a continuación, mostrará los detalles del producto seleccionado.</span><span class="sxs-lookup"><span data-stu-id="f5f25-118">A DetailsView will then list the details of the selected product.</span></span>

## <a name="step-1-creating-and-populating-the-categories-dropdownlist"></a><span data-ttu-id="f5f25-119">Paso 1: Crear y rellenar la DropDownList categorías</span><span class="sxs-lookup"><span data-stu-id="f5f25-119">Step 1: Creating and Populating the Categories DropDownList</span></span>

<span data-ttu-id="f5f25-120">Nuestro primer objetivo es agregar la DropDownList que enumera las categorías.</span><span class="sxs-lookup"><span data-stu-id="f5f25-120">Our first goal is to add the DropDownList that lists the categories.</span></span> <span data-ttu-id="f5f25-121">Estos pasos se describe detalladamente en el tutorial anterior, pero se resumen aquí por integridad.</span><span class="sxs-lookup"><span data-stu-id="f5f25-121">These steps were examined in detail in the preceding tutorial, but are summarized here for completeness.</span></span>

<span data-ttu-id="f5f25-122">Abra el `MasterDetailsDetails.aspx` página en el `Filtering` agregar DropDownList a la página de conjunto de carpetas, su `ID` propiedad a `Categories`y, a continuación, haga clic en el vínculo Configurar origen de datos en su etiqueta inteligente.</span><span class="sxs-lookup"><span data-stu-id="f5f25-122">Open the `MasterDetailsDetails.aspx` page in the `Filtering` folder, add a DropDownList to the page, set its `ID` property to `Categories`, and then click the Configure Data Source link in its smart tag.</span></span> <span data-ttu-id="f5f25-123">Desde el Asistente para configuración de orígenes de datos optar por agregar un nuevo origen de datos.</span><span class="sxs-lookup"><span data-stu-id="f5f25-123">From the Data Source Configuration Wizard choose to add a new data source.</span></span>


<span data-ttu-id="f5f25-124">[![Agregar un nuevo origen de datos para la DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image2.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="f5f25-124">[![Add a New Data Source for the DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image2.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image1.png)</span></span>

<span data-ttu-id="f5f25-125">**Figura 1**: Agregar un nuevo origen de datos para la DropDownList ([haga clic aquí para ver imagen en tamaño completo](master-detail-filtering-with-two-dropdownlists-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="f5f25-125">**Figure 1**: Add a New Data Source for the DropDownList ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image3.png))</span></span>


<span data-ttu-id="f5f25-126">El nuevo origen de datos de forma natural, debe ser un origen ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="f5f25-126">The new data source should, naturally, be an ObjectDataSource.</span></span> <span data-ttu-id="f5f25-127">Nombre de este nuevo origen ObjectDataSource `CategoriesDataSource` y hacer que se invoque la `CategoriesBLL` del objeto `GetCategories()` método.</span><span class="sxs-lookup"><span data-stu-id="f5f25-127">Name this new ObjectDataSource `CategoriesDataSource` and have it invoke the `CategoriesBLL` object's `GetCategories()` method.</span></span>


<span data-ttu-id="f5f25-128">[![Optar por usar la clase CategoriesBLL](master-detail-filtering-with-two-dropdownlists-cs/_static/image5.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="f5f25-128">[![Choose to Use the CategoriesBLL Class](master-detail-filtering-with-two-dropdownlists-cs/_static/image5.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image4.png)</span></span>

<span data-ttu-id="f5f25-129">**Figura 2**: Optar por usar la `CategoriesBLL` clase ([haga clic aquí para ver imagen en tamaño completo](master-detail-filtering-with-two-dropdownlists-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="f5f25-129">**Figure 2**: Choose to Use the `CategoriesBLL` Class ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image6.png))</span></span>


<span data-ttu-id="f5f25-130">[![Configurar el origen ObjectDataSource para usar el método GetCategories()](master-detail-filtering-with-two-dropdownlists-cs/_static/image8.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="f5f25-130">[![Configure the ObjectDataSource to Use the GetCategories() Method](master-detail-filtering-with-two-dropdownlists-cs/_static/image8.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image7.png)</span></span>

<span data-ttu-id="f5f25-131">**Figura 3**: Configurar el origen ObjectDataSource que se usarán el `GetCategories()` método ([haga clic aquí para ver imagen en tamaño completo](master-detail-filtering-with-two-dropdownlists-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="f5f25-131">**Figure 3**: Configure the ObjectDataSource to Use the `GetCategories()` Method ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image9.png))</span></span>


<span data-ttu-id="f5f25-132">Después de configurar el origen ObjectDataSource todavía es necesario especificar qué campo del origen de datos se debe mostrar en el `Categories` DropDownList y cuál debe estar configurado como el valor del elemento de lista.</span><span class="sxs-lookup"><span data-stu-id="f5f25-132">After configuring the ObjectDataSource we still need to specify which data source field should be displayed in the `Categories` DropDownList and which one should be configured as the value for the list item.</span></span> <span data-ttu-id="f5f25-133">Establecer el `CategoryName` campo como la presentación y `CategoryID` como el valor de cada elemento de lista.</span><span class="sxs-lookup"><span data-stu-id="f5f25-133">Set the `CategoryName` field as the display and `CategoryID` as the value for each list item.</span></span>


<span data-ttu-id="f5f25-134">[![Tiene la presentación de DropDownList el campo CategoryName y Use CategoryID como valor](master-detail-filtering-with-two-dropdownlists-cs/_static/image11.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="f5f25-134">[![Have the DropDownList Display the CategoryName Field and Use CategoryID as the Value](master-detail-filtering-with-two-dropdownlists-cs/_static/image11.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image10.png)</span></span>

<span data-ttu-id="f5f25-135">**Figura 4**: Tiene la presentación de DropDownList el `CategoryName` campo y Use `CategoryID` como el valor ([haga clic aquí para ver imagen en tamaño completo](master-detail-filtering-with-two-dropdownlists-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="f5f25-135">**Figure 4**: Have the DropDownList Display the `CategoryName` Field and Use `CategoryID` as the Value ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image12.png))</span></span>


<span data-ttu-id="f5f25-136">En este momento, tenemos un control DropDownList (`Categories`) que se rellena con los registros de la `Categories` tabla.</span><span class="sxs-lookup"><span data-stu-id="f5f25-136">At this point we have a DropDownList control (`Categories`) that's populated with the records from the `Categories` table.</span></span> <span data-ttu-id="f5f25-137">Cuando el usuario elige una nueva categoría de la lista desplegable desearemos una devolución de datos con el fin de actualizar el producto DropDownList que vamos a crear en el paso 2.</span><span class="sxs-lookup"><span data-stu-id="f5f25-137">When the user chooses a new category from the DropDownList we'll want a postback to occur in order to refresh the product DropDownList that we're going to create in Step 2.</span></span> <span data-ttu-id="f5f25-138">Por lo tanto, active la opción de Habilitar AutoPostBack desde el `categories` etiqueta inteligente de DropDownList.</span><span class="sxs-lookup"><span data-stu-id="f5f25-138">Therefore, check the Enable AutoPostBack option from the `categories` DropDownList's smart tag.</span></span>


<span data-ttu-id="f5f25-139">[![Habilitar AutoPostBack para categorías DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image14.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="f5f25-139">[![Enable AutoPostBack for the Categories DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image14.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image13.png)</span></span>

<span data-ttu-id="f5f25-140">**Figura 5**: Habilitar AutoPostBack para el `Categories` DropDownList ([haga clic aquí para ver imagen en tamaño completo](master-detail-filtering-with-two-dropdownlists-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="f5f25-140">**Figure 5**: Enable AutoPostBack for the `Categories` DropDownList ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image15.png))</span></span>


## <a name="step-2-displaying-the-selected-categorys-products-in-a-second-dropdownlist"></a><span data-ttu-id="f5f25-141">Paso 2: Mostrar los productos de la categoría seleccionada en un segundo DropDownList</span><span class="sxs-lookup"><span data-stu-id="f5f25-141">Step 2: Displaying the Selected Category's Products in a Second DropDownList</span></span>

<span data-ttu-id="f5f25-142">Con el `Categories` DropDownList completado, el siguiente paso consiste en Mostrar DropDownList de productos que pertenecen a la categoría seleccionada.</span><span class="sxs-lookup"><span data-stu-id="f5f25-142">With the `Categories` DropDownList completed, our next step is to display a DropDownList of products belonging to the selected category.</span></span> <span data-ttu-id="f5f25-143">Para lograr esto, agregue otro DropDownList a la página llamada `ProductsByCategory`.</span><span class="sxs-lookup"><span data-stu-id="f5f25-143">To accomplish this, add another DropDownList to the page named `ProductsByCategory`.</span></span> <span data-ttu-id="f5f25-144">Igual que con el `Categories` DropDownList, cree un nuevo origen ObjectDataSource para el `ProductsByCategory` DropDownList denominado `ProductsByCategoryDataSource`.</span><span class="sxs-lookup"><span data-stu-id="f5f25-144">As with the `Categories` DropDownList, create a new ObjectDataSource for the `ProductsByCategory` DropDownList named `ProductsByCategoryDataSource`.</span></span>


<span data-ttu-id="f5f25-145">[![Agregar un nuevo origen de datos para ProductsByCategory DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image17.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="f5f25-145">[![Add a New Data Source for the ProductsByCategory DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image17.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image16.png)</span></span>

<span data-ttu-id="f5f25-146">**Figura 6**: Agregar un nuevo origen de datos para el `ProductsByCategory` DropDownList ([haga clic aquí para ver imagen en tamaño completo](master-detail-filtering-with-two-dropdownlists-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="f5f25-146">**Figure 6**: Add a New Data Source for the `ProductsByCategory` DropDownList ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image18.png))</span></span>


<span data-ttu-id="f5f25-147">[![Crear un nuevo origen ObjectDataSource denominado ProductsByCategoryDataSource](master-detail-filtering-with-two-dropdownlists-cs/_static/image20.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="f5f25-147">[![Create a New ObjectDataSource Named ProductsByCategoryDataSource](master-detail-filtering-with-two-dropdownlists-cs/_static/image20.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image19.png)</span></span>

<span data-ttu-id="f5f25-148">**Figura 7**: Crear un nuevo origen ObjectDataSource denominado `ProductsByCategoryDataSource` ([haga clic aquí para ver imagen en tamaño completo](master-detail-filtering-with-two-dropdownlists-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="f5f25-148">**Figure 7**: Create a New ObjectDataSource Named `ProductsByCategoryDataSource` ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image21.png))</span></span>


<span data-ttu-id="f5f25-149">Puesto que la `ProductsByCategory` necesidades DropDownList para mostrar solo aquellos productos que pertenecen a la categoría seleccionada tiene el origen ObjectDataSource invocar el `GetProductsByCategoryID(categoryID)` método desde el `ProductsBLL` objeto.</span><span class="sxs-lookup"><span data-stu-id="f5f25-149">Since the `ProductsByCategory` DropDownList needs to display just those products belonging to the selected category, have the ObjectDataSource invoke the `GetProductsByCategoryID(categoryID)` method from the `ProductsBLL` object.</span></span>


<span data-ttu-id="f5f25-150">[![Optar por usar la clase ProductsBLL](master-detail-filtering-with-two-dropdownlists-cs/_static/image23.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="f5f25-150">[![Choose to Use the ProductsBLL Class](master-detail-filtering-with-two-dropdownlists-cs/_static/image23.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image22.png)</span></span>

<span data-ttu-id="f5f25-151">**Figura 8**: Optar por usar la `ProductsBLL` clase ([haga clic aquí para ver imagen en tamaño completo](master-detail-filtering-with-two-dropdownlists-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="f5f25-151">**Figure 8**: Choose to Use the `ProductsBLL` Class ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image24.png))</span></span>


<span data-ttu-id="f5f25-152">[![Configurar el origen ObjectDataSource para usar el método GetProductsByCategoryID(categoryID)](master-detail-filtering-with-two-dropdownlists-cs/_static/image26.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="f5f25-152">[![Configure the ObjectDataSource to Use the GetProductsByCategoryID(categoryID) Method](master-detail-filtering-with-two-dropdownlists-cs/_static/image26.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image25.png)</span></span>

<span data-ttu-id="f5f25-153">**Figura 9**: Configurar el origen ObjectDataSource que se usarán el `GetProductsByCategoryID(categoryID)` método ([haga clic aquí para ver imagen en tamaño completo](master-detail-filtering-with-two-dropdownlists-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="f5f25-153">**Figure 9**: Configure the ObjectDataSource to Use the `GetProductsByCategoryID(categoryID)` Method ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image27.png))</span></span>


<span data-ttu-id="f5f25-154">En el último paso del asistente es necesario especificar el valor de la *`categoryID`* parámetro.</span><span class="sxs-lookup"><span data-stu-id="f5f25-154">In the final step of the wizard we need to specify the value of the *`categoryID`* parameter.</span></span> <span data-ttu-id="f5f25-155">Asignar este parámetro para el elemento seleccionado de la `Categories` DropDownList.</span><span class="sxs-lookup"><span data-stu-id="f5f25-155">Assign this parameter to the selected item from the `Categories` DropDownList.</span></span>


<span data-ttu-id="f5f25-156">[![Extraer el valor del parámetro categoryID de la lista desplegable de categorías](master-detail-filtering-with-two-dropdownlists-cs/_static/image29.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="f5f25-156">[![Pull the categoryID Parameter Value from the Categories DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image29.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image28.png)</span></span>

<span data-ttu-id="f5f25-157">**Figura 10**: Extraer el *`categoryID`* valor del parámetro de la `Categories` DropDownList ([haga clic aquí para ver imagen en tamaño completo](master-detail-filtering-with-two-dropdownlists-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="f5f25-157">**Figure 10**: Pull the *`categoryID`* Parameter Value from the `Categories` DropDownList ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image30.png))</span></span>


<span data-ttu-id="f5f25-158">Con el origen ObjectDataSource configurado, todo lo que queda es especificar qué campos de origen de datos se usan para la presentación y el valor de los elementos de la DropDownList.</span><span class="sxs-lookup"><span data-stu-id="f5f25-158">With the ObjectDataSource configured, all that remains is to specify what data source fields are used for the display and value of the DropDownList's items.</span></span> <span data-ttu-id="f5f25-159">Mostrar el `ProductName` campo y use el `ProductID` campo como valor.</span><span class="sxs-lookup"><span data-stu-id="f5f25-159">Display the `ProductName` field and use the `ProductID` field as the value.</span></span>


<span data-ttu-id="f5f25-160">[![Especifique los campos de origen de datos utilizados para texto y las propiedades de valor de ListItems de DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image32.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="f5f25-160">[![Specify the Data Source Fields Used for the DropDownList's ListItems' Text and Value Properties](master-detail-filtering-with-two-dropdownlists-cs/_static/image32.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image31.png)</span></span>

<span data-ttu-id="f5f25-161">**Figura 11**: Especifique los campos de origen de datos usan para la DropDownList `ListItem` s' `Text` y `Value` propiedades ([haga clic aquí para ver imagen en tamaño completo](master-detail-filtering-with-two-dropdownlists-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="f5f25-161">**Figure 11**: Specify the Data Source Fields Used for the DropDownList's `ListItem` s' `Text` and `Value` Properties ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image33.png))</span></span>


<span data-ttu-id="f5f25-162">Con el origen ObjectDataSource y `ProductsByCategory` DropDownList configurado nuestra página mostrará dos DropDownLists: la primera mostrará una lista de todas las categorías mientras el segundo mostrará una lista de los productos que pertenecen a la categoría seleccionada.</span><span class="sxs-lookup"><span data-stu-id="f5f25-162">With the ObjectDataSource and `ProductsByCategory` DropDownList configured our page will display two DropDownLists: the first will list all of the categories while the second will list those products belonging to the selected category.</span></span> <span data-ttu-id="f5f25-163">Cuando el usuario selecciona una nueva categoría de la primera DropDownList, surgirán una devolución de datos y se repuntar DropDownList segundo, que muestra los productos que pertenecen a la categoría recién seleccionada.</span><span class="sxs-lookup"><span data-stu-id="f5f25-163">When the user selects a new category from the first DropDownList, a postback will ensue and the second DropDownList will be rebound, showing those products that belong to the newly selected category.</span></span> <span data-ttu-id="f5f25-164">Figuras 12 y 13 show `MasterDetailsDetails.aspx` en acción cuando se ve mediante un explorador.</span><span class="sxs-lookup"><span data-stu-id="f5f25-164">Figures 12 and 13 show `MasterDetailsDetails.aspx` in action when viewed through a browser.</span></span>


<span data-ttu-id="f5f25-165">[![Cuando se visita primero la página, se selecciona la categoría Bebidas](master-detail-filtering-with-two-dropdownlists-cs/_static/image35.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="f5f25-165">[![When First Visiting the Page, the Beverages Category is Selected](master-detail-filtering-with-two-dropdownlists-cs/_static/image35.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image34.png)</span></span>

<span data-ttu-id="f5f25-166">**Figura 12**: Cuando se visita primero la página, se selecciona la categoría bebidas ([haga clic aquí para ver imagen en tamaño completo](master-detail-filtering-with-two-dropdownlists-cs/_static/image36.png))</span><span class="sxs-lookup"><span data-stu-id="f5f25-166">**Figure 12**: When First Visiting the Page, the Beverages Category is Selected ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image36.png))</span></span>


<span data-ttu-id="f5f25-167">[![Elegir una categoría diferente muestra productos de la nueva categoría](master-detail-filtering-with-two-dropdownlists-cs/_static/image38.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="f5f25-167">[![Choosing a Different Category Displays the New Category's Products](master-detail-filtering-with-two-dropdownlists-cs/_static/image38.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image37.png)</span></span>

<span data-ttu-id="f5f25-168">**Figura 13**: Elegir un diferentes pantallas de la categoría de productos de la categoría nueva ([haga clic aquí para ver imagen en tamaño completo](master-detail-filtering-with-two-dropdownlists-cs/_static/image39.png))</span><span class="sxs-lookup"><span data-stu-id="f5f25-168">**Figure 13**: Choosing a Different Category Displays the New Category's Products ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image39.png))</span></span>


<span data-ttu-id="f5f25-169">Actualmente la `productsByCategory` DropDownList, cuando cambia, *no* producen un postback.</span><span class="sxs-lookup"><span data-stu-id="f5f25-169">Currently the `productsByCategory` DropDownList, when changed, does *not* cause a postback.</span></span> <span data-ttu-id="f5f25-170">Sin embargo, deseamos una devolución de datos que se produzca una vez que se agregue un DetailsView para mostrar los detalles del producto seleccionado (paso 3).</span><span class="sxs-lookup"><span data-stu-id="f5f25-170">However, we will want a postback to occur once we add a DetailsView to display the selected product's details (Step 3).</span></span> <span data-ttu-id="f5f25-171">Por consiguiente, compruebe la casilla de verificación Habilitar AutoPostBack desde el `productsByCategory` etiqueta inteligente de DropDownList.</span><span class="sxs-lookup"><span data-stu-id="f5f25-171">Therefore, check the Enable AutoPostBack checkbox from the `productsByCategory` DropDownList's smart tag.</span></span>


<span data-ttu-id="f5f25-172">[![Habilitar la característica AutoPostBack para el productsByCategory DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image41.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image40.png)</span><span class="sxs-lookup"><span data-stu-id="f5f25-172">[![Enable the AutoPostBack Feature for the productsByCategory DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image41.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image40.png)</span></span>

<span data-ttu-id="f5f25-173">**Figura 14**: Habilitar la característica AutoPostBack para el `productsByCategory` DropDownList ([haga clic aquí para ver imagen en tamaño completo](master-detail-filtering-with-two-dropdownlists-cs/_static/image42.png))</span><span class="sxs-lookup"><span data-stu-id="f5f25-173">**Figure 14**: Enable the AutoPostBack Feature for the `productsByCategory` DropDownList ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image42.png))</span></span>


## <a name="step-3-using-a-detailsview-to-display-details-for-the-selected-product"></a><span data-ttu-id="f5f25-174">Paso 3: Uso de DetailsView para mostrar los detalles del producto seleccionado</span><span class="sxs-lookup"><span data-stu-id="f5f25-174">Step 3: Using a DetailsView to Display Details for the Selected Product</span></span>

<span data-ttu-id="f5f25-175">El último paso es mostrar los detalles del producto seleccionado en DetailsView.</span><span class="sxs-lookup"><span data-stu-id="f5f25-175">The final step is to display the details for the selected product in a DetailsView.</span></span> <span data-ttu-id="f5f25-176">Para lograr esto, agregue un DetailsView a la página, establezca su `ID` propiedad `ProductDetails`y crear un nuevo origen ObjectDataSource para ella.</span><span class="sxs-lookup"><span data-stu-id="f5f25-176">To accomplish this, add a DetailsView to the page, set its `ID` property to `ProductDetails`, and create a new ObjectDataSource for it.</span></span> <span data-ttu-id="f5f25-177">Configurar este origen ObjectDataSource para extraer sus datos de la `ProductsBLL` la clase `GetProductByProductID(productID)` método utilizando el valor seleccionado de la `ProductsByCategory` DropDownList para el valor de la *`productID`* parámetro.</span><span class="sxs-lookup"><span data-stu-id="f5f25-177">Configure this ObjectDataSource to pull its data from the `ProductsBLL` class's `GetProductByProductID(productID)` method using the selected value of the `ProductsByCategory` DropDownList for the value of the *`productID`* parameter.</span></span>


<span data-ttu-id="f5f25-178">[![Optar por usar la clase ProductsBLL](master-detail-filtering-with-two-dropdownlists-cs/_static/image44.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image43.png)</span><span class="sxs-lookup"><span data-stu-id="f5f25-178">[![Choose to Use the ProductsBLL Class](master-detail-filtering-with-two-dropdownlists-cs/_static/image44.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image43.png)</span></span>

<span data-ttu-id="f5f25-179">**Figura 15**: Optar por usar la `ProductsBLL` clase ([haga clic aquí para ver imagen en tamaño completo](master-detail-filtering-with-two-dropdownlists-cs/_static/image45.png))</span><span class="sxs-lookup"><span data-stu-id="f5f25-179">**Figure 15**: Choose to Use the `ProductsBLL` Class ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image45.png))</span></span>


<span data-ttu-id="f5f25-180">[![Configurar el origen ObjectDataSource para usar el método GetProductByProductID(productID)](master-detail-filtering-with-two-dropdownlists-cs/_static/image47.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image46.png)</span><span class="sxs-lookup"><span data-stu-id="f5f25-180">[![Configure the ObjectDataSource to Use the GetProductByProductID(productID) Method](master-detail-filtering-with-two-dropdownlists-cs/_static/image47.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image46.png)</span></span>

<span data-ttu-id="f5f25-181">**Figura 16**: Configurar el origen ObjectDataSource que se usarán el `GetProductByProductID(productID)` método ([haga clic aquí para ver imagen en tamaño completo](master-detail-filtering-with-two-dropdownlists-cs/_static/image48.png))</span><span class="sxs-lookup"><span data-stu-id="f5f25-181">**Figure 16**: Configure the ObjectDataSource to Use the `GetProductByProductID(productID)` Method ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image48.png))</span></span>


<span data-ttu-id="f5f25-182">[![Extraer el valor del parámetro productID de ProductsByCategory DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image50.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image49.png)</span><span class="sxs-lookup"><span data-stu-id="f5f25-182">[![Pull the productID Parameter Value from the ProductsByCategory DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image50.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image49.png)</span></span>

<span data-ttu-id="f5f25-183">**Figura 17**: Extraer el *`productID`* valor del parámetro de la `ProductsByCategory` DropDownList ([haga clic aquí para ver imagen en tamaño completo](master-detail-filtering-with-two-dropdownlists-cs/_static/image51.png))</span><span class="sxs-lookup"><span data-stu-id="f5f25-183">**Figure 17**: Pull the *`productID`* Parameter Value from the `ProductsByCategory` DropDownList ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image51.png))</span></span>


<span data-ttu-id="f5f25-184">Puede elegir mostrar cualquiera de los campos disponibles en DetailsView.</span><span class="sxs-lookup"><span data-stu-id="f5f25-184">You can choose to display any of the available fields in the DetailsView.</span></span> <span data-ttu-id="f5f25-185">He optado por eliminar la `ProductID`, `SupplierID`, y `CategoryID` campos y reordenar los campos restantes con el formato.</span><span class="sxs-lookup"><span data-stu-id="f5f25-185">I've opted to remove the `ProductID`, `SupplierID`, and `CategoryID` fields and reordered and formatted the remaining fields.</span></span> <span data-ttu-id="f5f25-186">Además, borra el DetailsView `Height` y `Width` propiedades, lo que permite la DetailsView expandir el ancho necesario para obtener la mejor visualización de sus datos en lugar de tener limita a un tamaño especificado.</span><span class="sxs-lookup"><span data-stu-id="f5f25-186">In addition, I cleared out the DetailsView's `Height` and `Width` properties, allowing the DetailsView to expand to the width needed to best display its data rather than having it constrained to a specified size.</span></span> <span data-ttu-id="f5f25-187">A continuación aparece el marcado completo:</span><span class="sxs-lookup"><span data-stu-id="f5f25-187">The full markup appears below:</span></span>


[!code-aspx[Main](master-detail-filtering-with-two-dropdownlists-cs/samples/sample1.aspx)]

<span data-ttu-id="f5f25-188">Dedique un momento para probar la `MasterDetailsDetails.aspx` página en un explorador.</span><span class="sxs-lookup"><span data-stu-id="f5f25-188">Take a moment to try out the `MasterDetailsDetails.aspx` page in a browser.</span></span> <span data-ttu-id="f5f25-189">En un principio puede parecer que todo funciona según sea necesario, pero hay un pequeño problema.</span><span class="sxs-lookup"><span data-stu-id="f5f25-189">At first glance it may appear that everything is working as desired, but there's a subtle problem.</span></span> <span data-ttu-id="f5f25-190">Cuando se elige una nueva categoría la `ProductsByCategory` DropDownList se actualiza para incluir esos productos para la categoría seleccionada, pero el `ProductDetails` DetailsView continuado mostrar la información de producto anteriores.</span><span class="sxs-lookup"><span data-stu-id="f5f25-190">When you choose a new category the `ProductsByCategory` DropDownList is updated to include those products for the selected category, but the `ProductDetails` DetailsView continued to show the previous product information.</span></span> <span data-ttu-id="f5f25-191">DetailsView se actualiza cuando se elige un producto diferente para la categoría seleccionada.</span><span class="sxs-lookup"><span data-stu-id="f5f25-191">The DetailsView is updated when choosing a different product for the selected category.</span></span> <span data-ttu-id="f5f25-192">Además, si probar exhaustivamente suficientemente, encontrará que si elige continuamente nuevas categorías (por ejemplo, elegir bebidas desde el `Categories` DropDownList, a continuación, condimentos, a continuación, repostería) cada otra selección de categoría hace que el `ProductDetails`DetailsView en actualizarse.</span><span class="sxs-lookup"><span data-stu-id="f5f25-192">Furthermore, if you test thoroughly enough, you'll find that if you continually choose new categories (such as choosing Beverages from the `Categories` DropDownList, then Condiments, then Confections) every other category selection causes the `ProductDetails` DetailsView to be refreshed.</span></span>

<span data-ttu-id="f5f25-193">Para ayudar a concretar este problema, echemos un vistazo a un ejemplo concreto.</span><span class="sxs-lookup"><span data-stu-id="f5f25-193">To help concretize this problem, let's look at a specific example.</span></span> <span data-ttu-id="f5f25-194">Primera vez que visite la página Seleccionar la categoría bebidas y los productos relacionados se cargan en el `ProductsByCategory` DropDownList.</span><span class="sxs-lookup"><span data-stu-id="f5f25-194">When you first visit the page the Beverages category is selected and the related products are loaded in the `ProductsByCategory` DropDownList.</span></span> <span data-ttu-id="f5f25-195">Chai es el producto seleccionado y sus detalles se muestran en el `ProductDetails` DetailsView, tal como se muestra en la figura 18.</span><span class="sxs-lookup"><span data-stu-id="f5f25-195">Chai is the selected product and its details are displayed in the `ProductDetails` DetailsView, as shown in Figure 18.</span></span>


<span data-ttu-id="f5f25-196">[![Detalles del producto seleccionado se muestran en DetailsView](master-detail-filtering-with-two-dropdownlists-cs/_static/image53.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image52.png)</span><span class="sxs-lookup"><span data-stu-id="f5f25-196">[![The Selected Product's Details are Displayed in a DetailsView](master-detail-filtering-with-two-dropdownlists-cs/_static/image53.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image52.png)</span></span>

<span data-ttu-id="f5f25-197">**Figura 18**: Detalles del producto seleccionado se muestran en DetailsView ([haga clic aquí para ver imagen en tamaño completo](master-detail-filtering-with-two-dropdownlists-cs/_static/image54.png))</span><span class="sxs-lookup"><span data-stu-id="f5f25-197">**Figure 18**: The Selected Product's Details are Displayed in a DetailsView ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image54.png))</span></span>


<span data-ttu-id="f5f25-198">Si cambia la selección de categoría de bebidas a condimentos, se produce un postback y `ProductsByCategory` DropDownList se actualiza en consecuencia, pero DetailsView muestra detalles de Chai.</span><span class="sxs-lookup"><span data-stu-id="f5f25-198">If you change the category selection from Beverages to Condiments, a postback occurs and the `ProductsByCategory` DropDownList is updated accordingly, but the DetailsView still displays details for Chai.</span></span>


<span data-ttu-id="f5f25-199">[![Detalles de previamente seleccionado del producto son sigue mostrando](master-detail-filtering-with-two-dropdownlists-cs/_static/image56.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image55.png)</span><span class="sxs-lookup"><span data-stu-id="f5f25-199">[![The Previously Selected Product's Details are Still Displayed](master-detail-filtering-with-two-dropdownlists-cs/_static/image56.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image55.png)</span></span>

<span data-ttu-id="f5f25-200">**Figura 19**: Detalles previamente seleccionado del producto son sigue mostrando ([haga clic aquí para ver imagen en tamaño completo](master-detail-filtering-with-two-dropdownlists-cs/_static/image57.png))</span><span class="sxs-lookup"><span data-stu-id="f5f25-200">**Figure 19**: The Previously Selected Product's Details are Still Displayed ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image57.png))</span></span>


<span data-ttu-id="f5f25-201">Un nuevo producto en la lista de selección actualiza DetailsView según lo previsto.</span><span class="sxs-lookup"><span data-stu-id="f5f25-201">Picking a new product from the list refreshes the DetailsView as expected.</span></span> <span data-ttu-id="f5f25-202">Si elige una categoría nueva después de cambiar el producto, DetailsView nuevo no actualiza.</span><span class="sxs-lookup"><span data-stu-id="f5f25-202">If you pick a new category after changing the product, the DetailsView again won't refresh.</span></span> <span data-ttu-id="f5f25-203">Sin embargo, si en lugar de elegir un nuevo producto ha seleccionado una nueva categoría, se actualizarían DetailsView.</span><span class="sxs-lookup"><span data-stu-id="f5f25-203">However, if instead of choosing a new product you selected a new category, the DetailsView would refresh.</span></span> <span data-ttu-id="f5f25-204">¿Lo que en el mundo está ocurriendo aquí?</span><span class="sxs-lookup"><span data-stu-id="f5f25-204">What in the world is going on here?</span></span>

<span data-ttu-id="f5f25-205">El problema es un problema de tiempo de ciclo de vida de la página.</span><span class="sxs-lookup"><span data-stu-id="f5f25-205">The problem is a timing issue in the page's lifecycle.</span></span> <span data-ttu-id="f5f25-206">Cada vez que se solicita una página, que procede a través de una serie de pasos como su representación.</span><span class="sxs-lookup"><span data-stu-id="f5f25-206">Whenever a page is requested it proceeds through a number of steps as its rendering.</span></span> <span data-ttu-id="f5f25-207">En uno de estos pasos ObjectDataSource controla Compruebe si alguno de sus `SelectParameters` valores han cambiado.</span><span class="sxs-lookup"><span data-stu-id="f5f25-207">In one of these steps the ObjectDataSource controls check to see if any of their `SelectParameters` values have changed.</span></span> <span data-ttu-id="f5f25-208">Si es así, el control Web de datos enlazado a ObjectDataSource sabe que necesita para actualizar su presentación.</span><span class="sxs-lookup"><span data-stu-id="f5f25-208">If so, the data Web control bound to the ObjectDataSource knows that it needs to refresh its display.</span></span> <span data-ttu-id="f5f25-209">Por ejemplo, cuando se selecciona una nueva categoría, el `ProductsByCategoryDataSource` ObjectDataSource detecta que se han modificado sus valores de parámetro y el `ProductsByCategory` DropDownList vuelve a enlazar, obtención de los productos para la categoría seleccionada.</span><span class="sxs-lookup"><span data-stu-id="f5f25-209">For example, when a new category is selected, the `ProductsByCategoryDataSource` ObjectDataSource detects that its parameter values have changed and the `ProductsByCategory` DropDownList rebinds itself, getting the products for the selected category.</span></span>

<span data-ttu-id="f5f25-210">El problema que surge en esta situación es que se produzca el punto del ciclo de vida de la página que el ObjectDataSource buscan parámetros modificados *antes* de reenlace de los controles Web de datos asociados.</span><span class="sxs-lookup"><span data-stu-id="f5f25-210">The problem that arises in this situation is that the point in the page lifecycle that the ObjectDataSources check for changed parameters occurs *before* the rebinding of the associated data Web controls.</span></span> <span data-ttu-id="f5f25-211">Por lo tanto, al seleccionar una nueva categoría el `ProductsByCategoryDataSource` ObjectDataSource detecta un cambio en su valor de parámetro.</span><span class="sxs-lookup"><span data-stu-id="f5f25-211">Therefore, when selecting a new category the `ProductsByCategoryDataSource` ObjectDataSource detects a change in its parameter's value.</span></span> <span data-ttu-id="f5f25-212">ObjectDataSource utilizado por el `ProductDetails` DetailsView, sin embargo, no tenga en cuenta los cambios porque el `ProductsByCategory` DropDownList aún tiene que volver a enlazarse.</span><span class="sxs-lookup"><span data-stu-id="f5f25-212">The ObjectDataSource used by the `ProductDetails` DetailsView, however, doesn't note any such changes because the `ProductsByCategory` DropDownList has yet to be rebound.</span></span> <span data-ttu-id="f5f25-213">Más adelante en el ciclo de vida del `ProductsByCategory` DropDownList vuelve a enlazar a su origen ObjectDataSource, tomar los productos para la categoría recién seleccionada.</span><span class="sxs-lookup"><span data-stu-id="f5f25-213">Later in the lifecycle the `ProductsByCategory` DropDownList rebinds to its ObjectDataSource, grabbing the products for the newly selected category.</span></span> <span data-ttu-id="f5f25-214">Mientras el `ProductsByCategory` ha cambiado el valor de DropDownList, el `ProductDetails` ObjectDataSource de DetailsView ya lo ha hecho su comprobación de valores de parámetro; por lo tanto, DetailsView muestra sus resultados anteriores.</span><span class="sxs-lookup"><span data-stu-id="f5f25-214">While the `ProductsByCategory` DropDownList's value has changed, the `ProductDetails` DetailsView's ObjectDataSource has already done its parameter value check; therefore, the DetailsView displays its previous results.</span></span> <span data-ttu-id="f5f25-215">Esta interacción se muestra en la figura 20.</span><span class="sxs-lookup"><span data-stu-id="f5f25-215">This interaction is depicted in Figure 20.</span></span>


<span data-ttu-id="f5f25-216">[![El valor de ProductsByCategory DropDownList cambia después ObjectDataSource de ProductDetails DetailsView comprueba los cambios](master-detail-filtering-with-two-dropdownlists-cs/_static/image59.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image58.png)</span><span class="sxs-lookup"><span data-stu-id="f5f25-216">[![The ProductsByCategory DropDownList Value Changes After the ProductDetails DetailsView's ObjectDataSource Checks for Changes](master-detail-filtering-with-two-dropdownlists-cs/_static/image59.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image58.png)</span></span>

<span data-ttu-id="f5f25-217">**Figura 20**: El `ProductsByCategory` cambios de valor de DropDownList después la `ProductDetails` ObjectDataSource comprueba de DetailsView los cambios ([haga clic aquí para ver imagen en tamaño completo](master-detail-filtering-with-two-dropdownlists-cs/_static/image60.png))</span><span class="sxs-lookup"><span data-stu-id="f5f25-217">**Figure 20**: The `ProductsByCategory` DropDownList Value Changes After the `ProductDetails` DetailsView's ObjectDataSource Checks for Changes ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image60.png))</span></span>


<span data-ttu-id="f5f25-218">Para solucionar esto es necesario volver a enlazar explícitamente el `ProductDetails` DetailsView después el `ProductsByCategory` DropDownList se ha enlazado.</span><span class="sxs-lookup"><span data-stu-id="f5f25-218">To remedy this we need to explicitly rebind the `ProductDetails` DetailsView after the `ProductsByCategory` DropDownList has been bound.</span></span> <span data-ttu-id="f5f25-219">Podemos lograrlo mediante una llamada a la `ProductDetails` ovládacího prvku DetailsView `DataBind()` método cuando el `ProductsByCategory` de DropDownList `DataBound` desencadena el evento.</span><span class="sxs-lookup"><span data-stu-id="f5f25-219">We can accomplish this by calling the `ProductDetails` DetailsView's `DataBind()` method when the `ProductsByCategory` DropDownList's `DataBound` event fires.</span></span> <span data-ttu-id="f5f25-220">Agregue el siguiente código de controlador de eventos para el `MasterDetailsDetails.aspx` clase de código subyacente de la página (consulte la "[configurar valores de parámetro de ObjectDataSource mediante programación](../basic-reporting/programmatically-setting-the-objectdatasource-s-parameter-values-cs.md)" para obtener una explicación sobre cómo agregar un controlador de eventos):</span><span class="sxs-lookup"><span data-stu-id="f5f25-220">Add the following event handler code to the `MasterDetailsDetails.aspx` page's code-behind class (refer to the "[Programmatically Setting the ObjectDataSource's Parameter Values](../basic-reporting/programmatically-setting-the-objectdatasource-s-parameter-values-cs.md)" for a discussion on how to add an event handler):</span></span>


[!code-csharp[Main](master-detail-filtering-with-two-dropdownlists-cs/samples/sample2.cs)]

<span data-ttu-id="f5f25-221">Después de esta llamada explícita a la `ProductDetails` ovládacího prvku DetailsView `DataBind()` se ha agregado el método, el tutorial funciona según lo previsto.</span><span class="sxs-lookup"><span data-stu-id="f5f25-221">After this explicit call to the `ProductDetails` DetailsView's `DataBind()` method has been added, the tutorial works as expected.</span></span> <span data-ttu-id="f5f25-222">Información destacada de la figura 21 cómo esto cambiado remediar nuestro problema anterior.</span><span class="sxs-lookup"><span data-stu-id="f5f25-222">Figure 21 highlights how this changed remedied our earlier problem.</span></span>


<span data-ttu-id="f5f25-223">[![ProductDetails DetailsView es desencadena el evento del explícitamente actualiza cuando el ProductsByCategory DropDownList enlace de datos](master-detail-filtering-with-two-dropdownlists-cs/_static/image62.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image61.png)</span><span class="sxs-lookup"><span data-stu-id="f5f25-223">[![The ProductDetails DetailsView is Explicitly Refreshed When the ProductsByCategory DropDownList's DataBound Event Fires](master-detail-filtering-with-two-dropdownlists-cs/_static/image62.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image61.png)</span></span>

<span data-ttu-id="f5f25-224">**Figura 21**: El `ProductDetails` DetailsView es explícitamente actualiza cuando el `ProductsByCategory` de DropDownList `DataBound` desencadena el evento ([haga clic aquí para ver imagen en tamaño completo](master-detail-filtering-with-two-dropdownlists-cs/_static/image63.png))</span><span class="sxs-lookup"><span data-stu-id="f5f25-224">**Figure 21**: The `ProductDetails` DetailsView is Explicitly Refreshed When the `ProductsByCategory` DropDownList's `DataBound` Event Fires ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image63.png))</span></span>


## <a name="summary"></a><span data-ttu-id="f5f25-225">Resumen</span><span class="sxs-lookup"><span data-stu-id="f5f25-225">Summary</span></span>

<span data-ttu-id="f5f25-226">DropDownList sirve como un elemento de interfaz de usuario ideal para los informes de maestro y detalles donde hay una relación uno a varios entre los registros maestro y detalles.</span><span class="sxs-lookup"><span data-stu-id="f5f25-226">The DropDownList serves as an ideal user interface element for master/detail reports where there is a one-to-many relationship between the master and detail records.</span></span> <span data-ttu-id="f5f25-227">En el tutorial anterior, vimos cómo usar un único DropDownList para filtrar los productos que se muestra la categoría seleccionada.</span><span class="sxs-lookup"><span data-stu-id="f5f25-227">In the preceding tutorial we saw how to use a single DropDownList to filter the products displayed by the selected category.</span></span> <span data-ttu-id="f5f25-228">En este tutorial se reemplaza el control GridView de productos con un DropDownList y utiliza un DetailsView para mostrar los detalles del producto seleccionado.</span><span class="sxs-lookup"><span data-stu-id="f5f25-228">In this tutorial we replaced the GridView of products with a DropDownList, and used a DetailsView to display the details of the selected product.</span></span> <span data-ttu-id="f5f25-229">Los conceptos tratados en este tutorial se pueden ampliar fácilmente a los modelos de datos que implican varias relaciones de uno a varios, como clientes, pedidos y artículos del pedido.</span><span class="sxs-lookup"><span data-stu-id="f5f25-229">The concepts discussed in this tutorial can easily be extended to data models involving multiple one-to-many relationships, such as customers, orders, and order items.</span></span> <span data-ttu-id="f5f25-230">En general, siempre puede agregar un DropDownList para cada una de las entidades en las relaciones uno a varios "uno".</span><span class="sxs-lookup"><span data-stu-id="f5f25-230">In general, you can always add a DropDownList for each of the "one" entities in the one-to-many relationships.</span></span>

<span data-ttu-id="f5f25-231">Feliz programación.</span><span class="sxs-lookup"><span data-stu-id="f5f25-231">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="f5f25-232">Acerca del autor</span><span class="sxs-lookup"><span data-stu-id="f5f25-232">About the Author</span></span>

<span data-ttu-id="f5f25-233">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor de siete libros sobre ASP/ASP.NET y fundador de [4GuysFromRolla.com](http://www.4guysfromrolla.com), trabaja con tecnologías Web de Microsoft desde 1998.</span><span class="sxs-lookup"><span data-stu-id="f5f25-233">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="f5f25-234">Scott trabaja como consultor independiente, instructor y escritor.</span><span class="sxs-lookup"><span data-stu-id="f5f25-234">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="f5f25-235">Su último libro es [*SAM enseñar a usted mismo ASP.NET 2.0 en 24 horas*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="f5f25-235">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="f5f25-236">Puede ponerse en [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="f5f25-236">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="f5f25-237">o a través de su blog, que puede encontrarse en [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="f5f25-237">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="f5f25-238">Agradecimientos especiales a</span><span class="sxs-lookup"><span data-stu-id="f5f25-238">Special Thanks To</span></span>

<span data-ttu-id="f5f25-239">Esta serie de tutoriales ha sido revisada por muchos revisores útiles.</span><span class="sxs-lookup"><span data-stu-id="f5f25-239">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="f5f25-240">Revisor de clientes potencial para este tutorial era Hilton Giesenow.</span><span class="sxs-lookup"><span data-stu-id="f5f25-240">Lead reviewer for this tutorial was Hilton Giesenow.</span></span> <span data-ttu-id="f5f25-241">¿Está interesado en leer mi próximos artículos de MSDN?</span><span class="sxs-lookup"><span data-stu-id="f5f25-241">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="f5f25-242">Si es así, envíeme una línea en [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="f5f25-242">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="f5f25-243">[Anterior](master-detail-filtering-with-a-dropdownlist-cs.md)
> [Siguiente](master-detail-filtering-across-two-pages-cs.md)</span><span class="sxs-lookup"><span data-stu-id="f5f25-243">[Previous](master-detail-filtering-with-a-dropdownlist-cs.md)
[Next](master-detail-filtering-across-two-pages-cs.md)</span></span>
