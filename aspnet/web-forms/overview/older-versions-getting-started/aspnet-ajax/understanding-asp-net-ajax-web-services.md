---
uid: web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-asp-net-ajax-web-services
title: Descripción de servicios Web ASP.NET AJAX | Microsoft Docs
author: scottcate
description: Servicios Web son una parte integral de .NET framework que proporcionan una solución multiplataforma para intercambiar datos entre sistemas distribuidos. Aunque Web...
ms.author: riande
ms.date: 03/28/2008
ms.assetid: 3332d6e7-e2e1-4144-b805-e71d51e7e415
msc.legacyurl: /web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-asp-net-ajax-web-services
msc.type: authoredcontent
ms.openlocfilehash: e576e11d63f940f1683ed26d217ff255a31b007c
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 04/09/2019
ms.locfileid: "59388418"
---
# <a name="understanding-aspnet-ajax-web-services"></a><span data-ttu-id="8c44d-104">Descripción de los servicios web de ASP.NET AJAX</span><span class="sxs-lookup"><span data-stu-id="8c44d-104">Understanding ASP.NET AJAX Web Services</span></span>

<span data-ttu-id="8c44d-105">por [Scott Cate](https://github.com/scottcate)</span><span class="sxs-lookup"><span data-stu-id="8c44d-105">by [Scott Cate](https://github.com/scottcate)</span></span>

[<span data-ttu-id="8c44d-106">Descargar PDF</span><span class="sxs-lookup"><span data-stu-id="8c44d-106">Download PDF</span></span>](http://download.microsoft.com/download/C/1/9/C19A3451-1D14-477C-B703-54EF22E197EE/AJAX_tutorial05_Web_Services_with_MS_Ajax_cs.pdf)

> <span data-ttu-id="8c44d-107">Servicios Web son una parte integral de .NET framework que proporcionan una solución multiplataforma para intercambiar datos entre sistemas distribuidos.</span><span class="sxs-lookup"><span data-stu-id="8c44d-107">Web Services are an integral part of the .NET framework that provide a cross-platform solution for exchanging data between distributed systems.</span></span> <span data-ttu-id="8c44d-108">Aunque normalmente se usan los servicios Web para permitir que distintos sistemas operativos, modelos de objetos y lenguajes de programación para enviar y recibir datos, también puede usar para insertar datos en una página ASP.NET AJAX dinámicamente o enviar datos desde una página a un sistema back-end.</span><span class="sxs-lookup"><span data-stu-id="8c44d-108">Although Web Services are normally used to allow different operating systems, object models and programming languages to send and receive data, they can also be used to dynamically inject data into an ASP.NET AJAX page or send data from a page to a back-end system.</span></span> <span data-ttu-id="8c44d-109">Todo esto puede realizarse sin tener que recurrir para las operaciones de devolución de datos.</span><span class="sxs-lookup"><span data-stu-id="8c44d-109">All of this can be done without resorting to postback operations.</span></span>


## <a name="calling-web-services-with-aspnet-ajax"></a><span data-ttu-id="8c44d-110">Llamar a los servicios Web con ASP.NET AJAX</span><span class="sxs-lookup"><span data-stu-id="8c44d-110">Calling Web Services with ASP.NET AJAX</span></span>

<span data-ttu-id="8c44d-111">Dan Wahlin</span><span class="sxs-lookup"><span data-stu-id="8c44d-111">Dan Wahlin</span></span>

<span data-ttu-id="8c44d-112">Servicios Web son una parte integral de .NET framework que proporcionan una solución multiplataforma para intercambiar datos entre sistemas distribuidos.</span><span class="sxs-lookup"><span data-stu-id="8c44d-112">Web Services are an integral part of the .NET framework that provide a cross-platform solution for exchanging data between distributed systems.</span></span> <span data-ttu-id="8c44d-113">Aunque normalmente se usan los servicios Web para permitir que distintos sistemas operativos, modelos de objetos y lenguajes de programación para enviar y recibir datos, también puede usar para insertar datos en una página ASP.NET AJAX dinámicamente o enviar datos desde una página a un sistema back-end.</span><span class="sxs-lookup"><span data-stu-id="8c44d-113">Although Web Services are normally used to allow different operating systems, object models and programming languages to send and receive data, they can also be used to dynamically inject data into an ASP.NET AJAX page or send data from a page to a back-end system.</span></span> <span data-ttu-id="8c44d-114">Todo esto puede realizarse sin tener que recurrir para las operaciones de devolución de datos.</span><span class="sxs-lookup"><span data-stu-id="8c44d-114">All of this can be done without resorting to postback operations.</span></span>

<span data-ttu-id="8c44d-115">Mientras que el control UpdatePanel de ASP.NET AJAX proporciona una manera sencilla de AJAX habilitar cualquier página ASP.NET, puede haber ocasiones cuando necesite tener acceso dinámicamente a los datos en el servidor sin usar un control UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="8c44d-115">While the ASP.NET AJAX UpdatePanel control provides a simple way to AJAX enable any ASP.NET page, there may be times when you need to dynamically access data on the server without using an UpdatePanel.</span></span> <span data-ttu-id="8c44d-116">En este artículo verá cómo realizar esta tarea mediante la creación y consumo de servicios Web dentro de las páginas de AJAX de ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="8c44d-116">In this article you'll see how to accomplish this by creating and consuming Web Services within ASP.NET AJAX pages.</span></span>

<span data-ttu-id="8c44d-117">En este artículo se centrará en la funcionalidad disponible en las extensiones de AJAX de ASP.NET core, así como un control habilitado el servicio Web del Kit de herramientas de AJAX de ASP.NET llamado el AutoCompleteExtender.</span><span class="sxs-lookup"><span data-stu-id="8c44d-117">This article will focus on functionality available in the core ASP.NET AJAX Extensions as well as a Web Service enabled control in the ASP.NET AJAX Toolkit called the AutoCompleteExtender.</span></span> <span data-ttu-id="8c44d-118">Los temas incluyen la definición de los servicios de Web habilitado para AJAX, crear servidores proxy de cliente y llamar a servicios Web con JavaScript.</span><span class="sxs-lookup"><span data-stu-id="8c44d-118">Topics covered include defining AJAX-enabled Web Services, creating client proxies and calling Web Services with JavaScript.</span></span> <span data-ttu-id="8c44d-119">También verá cómo se pueden hacer llamadas a servicios Web directamente a los métodos de página ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="8c44d-119">You'll also see how Web Service calls can be made directly to ASP.NET page methods.</span></span>

## <a name="web-services-configuration"></a><span data-ttu-id="8c44d-120">Configuración de servicios Web</span><span class="sxs-lookup"><span data-stu-id="8c44d-120">Web Services Configuration</span></span>

<span data-ttu-id="8c44d-121">Cuando se crea un nuevo proyecto de sitio Web con Visual Studio 2008, el archivo web.config tiene un número de nuevas adiciones que no es posible que le resulte familiar a los usuarios de versiones anteriores de Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="8c44d-121">When a new Web Site project is created with Visual Studio 2008, the web.config file has a number of new additions that may be unfamiliar to users of previous versions of Visual Studio.</span></span> <span data-ttu-id="8c44d-122">Algunas de estas modificaciones para que puedan usar en las páginas mientras que otras personas definen requiere HttpHandlers y HttpModules, asigne el prefijo "asp" a los controles de AJAX de ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="8c44d-122">Some of these modifications map the "asp" prefix to ASP.NET AJAX controls so they can be used in pages while others define required HttpHandlers and HttpModules.</span></span> <span data-ttu-id="8c44d-123">Las modificaciones realizadas en el listado 1 muestra el `<httpHandlers>` elemento en el archivo web.config que afecta a las llamadas al servicio Web.</span><span class="sxs-lookup"><span data-stu-id="8c44d-123">Listing 1 shows modifications made to the `<httpHandlers>` element in web.config that affects Web Service calls.</span></span> <span data-ttu-id="8c44d-124">El valor predeterminado que HttpHandler usado para procesar las llamadas de ASMX es eliminado y reemplazado por una clase ScriptHandlerFactory ubicada en el ensamblado de System.Web.Extensions.dll.</span><span class="sxs-lookup"><span data-stu-id="8c44d-124">The default HttpHandler used to process .asmx calls is removed and replaced with a ScriptHandlerFactory class located in the System.Web.Extensions.dll assembly.</span></span> <span data-ttu-id="8c44d-125">System.Web.Extensions.dll contiene toda la funcionalidad básica usa ASP.NET AJAX.</span><span class="sxs-lookup"><span data-stu-id="8c44d-125">System.Web.Extensions.dll contains all of the core functionality used by ASP.NET AJAX.</span></span>

**<span data-ttu-id="8c44d-126">Listado 1.</span><span class="sxs-lookup"><span data-stu-id="8c44d-126">Listing 1.</span></span> <span data-ttu-id="8c44d-127">Configuración de controlador de servicio Web de ASP.NET AJAX</span><span class="sxs-lookup"><span data-stu-id="8c44d-127">ASP.NET AJAX Web Service Handler Configuration</span></span>**

[!code-xml[Main](understanding-asp-net-ajax-web-services/samples/sample1.xml)]

<span data-ttu-id="8c44d-128">Este reemplazo HttpHandler se realiza con el fin de permitir las llamadas de JavaScript Object Notation (JSON) se realiza desde las páginas de AJAX de ASP.NET para servicios Web de .NET mediante un proxy de servicio Web de JavaScript.</span><span class="sxs-lookup"><span data-stu-id="8c44d-128">This HttpHandler replacement is made in order to allow JavaScript Object Notation (JSON) calls to be made from ASP.NET AJAX pages to .NET Web Services using a JavaScript Web Service proxy.</span></span> <span data-ttu-id="8c44d-129">AJAX de ASP.NET envía mensajes JSON a los servicios Web en lugar de las llamadas de Protocolo Simple de acceso a objetos (SOAP) estándar asociadas normalmente a los servicios Web.</span><span class="sxs-lookup"><span data-stu-id="8c44d-129">ASP.NET AJAX sends JSON messages to Web Services as opposed to the standard Simple Object Access Protocol (SOAP) calls typically associated with Web Services.</span></span> <span data-ttu-id="8c44d-130">Esto da como resultado más pequeño mensajes de solicitud y respuesta general.</span><span class="sxs-lookup"><span data-stu-id="8c44d-130">This results in smaller request and response messages overall.</span></span> <span data-ttu-id="8c44d-131">También permite para un procesamiento más eficaz de los datos del lado cliente dado que la biblioteca de JavaScript de AJAX de ASP.NET está optimizada para trabajar con objetos JSON.</span><span class="sxs-lookup"><span data-stu-id="8c44d-131">It also allows for more efficient client-side processing of data since the ASP.NET AJAX JavaScript library is optimized to work with JSON objects.</span></span> <span data-ttu-id="8c44d-132">Listado 2 y listado 3 muestran ejemplos de mensajes de solicitud y respuesta del servicio Web serializados en formato JSON.</span><span class="sxs-lookup"><span data-stu-id="8c44d-132">Listing 2 and Listing 3 show examples of Web Service request and response messages serialized to JSON format.</span></span> <span data-ttu-id="8c44d-133">El mensaje de solicitud que se muestra en el listado 2 pasa un parámetro de país con un valor de "Bélgica" mientras el mensaje de respuesta en el listado 3 pasa una matriz de objetos Customer y sus propiedades asociadas.</span><span class="sxs-lookup"><span data-stu-id="8c44d-133">The request message shown in Listing 2 passes a country parameter with a value of "Belgium" while the response message in Listing 3 passes an array of Customer objects and their associated properties.</span></span>

**<span data-ttu-id="8c44d-134">Listado 2.</span><span class="sxs-lookup"><span data-stu-id="8c44d-134">Listing 2.</span></span> <span data-ttu-id="8c44d-135">Mensaje de solicitud de servicio Web serializada a JSON</span><span class="sxs-lookup"><span data-stu-id="8c44d-135">Web Service Request Message Serialized to JSON</span></span>**

[!code-json[Main](understanding-asp-net-ajax-web-services/samples/sample2.json)]

> *> [!NOTE]
> <span data-ttu-id="8c44d-136">el nombre de la operación se define como parte de la dirección URL del servicio web; Además, los mensajes de solicitud no se envían siempre a través de JSON.</span><span class="sxs-lookup"><span data-stu-id="8c44d-136">the operation name is defined as part of the URL to the web service; additionally, request messages are not always submitted via JSON.</span></span> <span data-ttu-id="8c44d-137">Servicios Web pueden usar el atributo ScriptMethod con el parámetro UseHttpGet establecido en true, lo que hace que los parámetros que se pasarán a través de un los parámetros de cadena de consulta.</span><span class="sxs-lookup"><span data-stu-id="8c44d-137">Web Services can utilize the ScriptMethod attribute with the UseHttpGet parameter set to true, which causes parameters to be passed via a the query string parameters.</span></span>*


**<span data-ttu-id="8c44d-138">Listado 3.</span><span class="sxs-lookup"><span data-stu-id="8c44d-138">Listing 3.</span></span> <span data-ttu-id="8c44d-139">Mensaje de respuesta del servicio Web serializada a JSON</span><span class="sxs-lookup"><span data-stu-id="8c44d-139">Web Service Response Message Serialized to JSON</span></span>**

[!code-json[Main](understanding-asp-net-ajax-web-services/samples/sample3.json)]

<span data-ttu-id="8c44d-140">En la sección siguiente verá cómo crear servicios Web capaz de controlar los mensajes de solicitud JSON y responder con tipos simples y complejos.</span><span class="sxs-lookup"><span data-stu-id="8c44d-140">In the next section you'll see how to create Web Services capable of handling JSON request messages and responding with both simple and complex types.</span></span>

## <a name="creating-ajax-enabled-web-services"></a><span data-ttu-id="8c44d-141">Creación de servicios Web con AJAX habilitado</span><span class="sxs-lookup"><span data-stu-id="8c44d-141">Creating AJAX-Enabled Web Services</span></span>

<span data-ttu-id="8c44d-142">El marco de ASP.NET AJAX proporciona varias maneras de llamar a servicios Web.</span><span class="sxs-lookup"><span data-stu-id="8c44d-142">The ASP.NET AJAX framework provides several different ways to call Web Services.</span></span> <span data-ttu-id="8c44d-143">Puede usar el control AutoCompleteExtender (disponible en el Kit de herramientas de AJAX de ASP.NET) o JavaScript.</span><span class="sxs-lookup"><span data-stu-id="8c44d-143">You can use the AutoCompleteExtender control (available in the ASP.NET AJAX Toolkit) or JavaScript.</span></span> <span data-ttu-id="8c44d-144">Sin embargo, antes de llamar a un servicio esté a AJAX para que se puede llamar mediante código de script de cliente.</span><span class="sxs-lookup"><span data-stu-id="8c44d-144">However, before calling a service you have to AJAX-enable it so that it can be called by client-script code.</span></span>

<span data-ttu-id="8c44d-145">Si está familiarizado con los servicios Web de ASP.NET, encontrará que fácilmente se pueden crear y servicios de habilitación de AJAX.</span><span class="sxs-lookup"><span data-stu-id="8c44d-145">Whether or not you're new to ASP.NET Web Services, you'll find it straightforward to create and AJAX-enable services.</span></span> <span data-ttu-id="8c44d-146">.NET framework admite la creación de servicios Web de ASP.NET desde su lanzamiento inicial en 2002 y ASP.NET AJAX Extensions ofrecen funcionalidad ampliada de AJAX que se basa en el conjunto predeterminado de .NET framework de características.</span><span class="sxs-lookup"><span data-stu-id="8c44d-146">The .NET framework has supported the creation of ASP.NET Web Services since its initial release in 2002 and the ASP.NET AJAX Extensions provide additional AJAX functionality that builds upon the .NET framework's default set of features.</span></span> <span data-ttu-id="8c44d-147">2008 Beta 2 de Visual Studio .NET tiene compatibilidad integrada para crear archivos de servicio Web de ASMX y deduce automáticamente el código asociado al lado de las clases de la clase System.Web.Services.WebService.</span><span class="sxs-lookup"><span data-stu-id="8c44d-147">Visual Studio .NET 2008 Beta 2 has built-in support for creating .asmx Web Service files and automatically derives associated code beside classes from the System.Web.Services.WebService class.</span></span> <span data-ttu-id="8c44d-148">A medida que agregue los métodos en la clase que se debe aplicar el atributo WebMethod en orden para poder llamar a los consumidores del servicio Web.</span><span class="sxs-lookup"><span data-stu-id="8c44d-148">As you add methods into the class you must apply the WebMethod attribute in order for them to be called by Web Service consumers.</span></span>

<span data-ttu-id="8c44d-149">Listado 4 muestra un ejemplo de cómo aplicar el atributo WebMethod a un método denominado GetCustomersByCountry().</span><span class="sxs-lookup"><span data-stu-id="8c44d-149">Listing 4 shows an example of applying the WebMethod attribute to a method named GetCustomersByCountry().</span></span>

**<span data-ttu-id="8c44d-150">Listado 4.</span><span class="sxs-lookup"><span data-stu-id="8c44d-150">Listing 4.</span></span> <span data-ttu-id="8c44d-151">Con el atributo WebMethod en un servicio Web</span><span class="sxs-lookup"><span data-stu-id="8c44d-151">Using the WebMethod Attribute in a Web Service</span></span>**

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample4.cs)]

<span data-ttu-id="8c44d-152">El método GetCustomersByCountry() acepta un parámetro de país y devuelve a un cliente de matriz de objetos.</span><span class="sxs-lookup"><span data-stu-id="8c44d-152">The GetCustomersByCountry() method accepts a country parameter and returns a Customer object array.</span></span> <span data-ttu-id="8c44d-153">El valor de país que se pasa al método se reenvía a una clase de nivel empresarial que a su vez llama a una clase de capa de datos para recuperar los datos de la base de datos, rellene las propiedades del objeto de cliente con datos y devolver la matriz.</span><span class="sxs-lookup"><span data-stu-id="8c44d-153">The country value passed into the method is forwarded to a business layer class which in turn calls a data layer class to retrieve the data from the database, fill the Customer object properties with data and return the array.</span></span>

## <a name="using-the-scriptservice-attribute"></a><span data-ttu-id="8c44d-154">Mediante el atributo ScriptService</span><span class="sxs-lookup"><span data-stu-id="8c44d-154">Using the ScriptService Attribute</span></span>

<span data-ttu-id="8c44d-155">Al agregar el atributo permite que el método GetCustomersByCountry() ser llamado por los clientes que envían mensajes estándar de SOAP al servicio Web WebMethod, no permite las llamadas JSON se realice desde aplicaciones de ASP.NET AJAX desde el principio.</span><span class="sxs-lookup"><span data-stu-id="8c44d-155">While adding the WebMethod attribute allows the GetCustomersByCountry() method to be called by clients that send standard SOAP messages to the Web Service, it doesn't allow JSON calls to be made from ASP.NET AJAX applications out of the box.</span></span> <span data-ttu-id="8c44d-156">Para permitir llamadas JSON realizarse tiene que aplicar la extensión de ASP.NET AJAX `ScriptService` a la clase de servicio Web.</span><span class="sxs-lookup"><span data-stu-id="8c44d-156">To allow JSON calls to be made you have to apply the ASP.NET AJAX Extension's `ScriptService` attribute to the Web Service class.</span></span> <span data-ttu-id="8c44d-157">Esto permite que un servicio Web enviar mensajes de respuesta con formato mediante JSON y permite el script de cliente llamar a un servicio mediante el envío de mensajes JSON.</span><span class="sxs-lookup"><span data-stu-id="8c44d-157">This enables a Web Service to send response messages formatted using JSON and allows client-side script to call a service by sending JSON messages.</span></span>

<span data-ttu-id="8c44d-158">Listado 5 muestra un ejemplo de cómo aplicar el atributo ScriptService a una clase de servicio Web denominada CustomersService.</span><span class="sxs-lookup"><span data-stu-id="8c44d-158">Listing 5 shows an example of applying the ScriptService attribute to a Web Service class named CustomersService.</span></span>

**<span data-ttu-id="8c44d-159">Listado 5.</span><span class="sxs-lookup"><span data-stu-id="8c44d-159">Listing 5.</span></span> <span data-ttu-id="8c44d-160">Mediante el atributo ScriptService AJAX-habilitar un servicio Web</span><span class="sxs-lookup"><span data-stu-id="8c44d-160">Using the ScriptService Attribute to AJAX-enable a Web Service</span></span>**

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample5.cs)]

<span data-ttu-id="8c44d-161">El atributo ScriptService actúa como un marcador que indica que se puede llamar desde código de script de AJAX.</span><span class="sxs-lookup"><span data-stu-id="8c44d-161">The ScriptService attribute acts as a marker that indicates it can be called from AJAX script code.</span></span> <span data-ttu-id="8c44d-162">Realmente no controla cualquiera de las tareas de serialización o deserialización de JSON que se producen en segundo plano.</span><span class="sxs-lookup"><span data-stu-id="8c44d-162">It doesn't actually handle any of the JSON serialization or deserialization tasks that occur behind the scenes.</span></span> <span data-ttu-id="8c44d-163">El ScriptHandlerFactory (configurado en web.config) y otras clases relacionadas para realizar la mayor parte del procesamiento de JSON.</span><span class="sxs-lookup"><span data-stu-id="8c44d-163">The ScriptHandlerFactory (configured in web.config) and other related classes do the bulk of JSON processing.</span></span>

## <a name="using-the-scriptmethod-attribute"></a><span data-ttu-id="8c44d-164">Mediante el atributo ScriptMethod</span><span class="sxs-lookup"><span data-stu-id="8c44d-164">Using the ScriptMethod Attribute</span></span>

<span data-ttu-id="8c44d-165">El atributo ScriptService es el único atributo de AJAX de ASP.NET que tiene que definirse en un servicio Web de .NET para poder que va a usar las páginas de AJAX de ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="8c44d-165">The ScriptService attribute is the only ASP.NET AJAX attribute that has to be defined in a .NET Web Service in order for it to be used by ASP.NET AJAX pages.</span></span> <span data-ttu-id="8c44d-166">Sin embargo, otro atributo denominado ScriptMethod también se puede aplicar directamente a los métodos Web en un servicio.</span><span class="sxs-lookup"><span data-stu-id="8c44d-166">However, another attribute named ScriptMethod can also be applied directly to Web Methods in a service.</span></span> <span data-ttu-id="8c44d-167">ScriptMethod define tres propiedades incluidos `UseHttpGet`, `ResponseFormat` y `XmlSerializeString`.</span><span class="sxs-lookup"><span data-stu-id="8c44d-167">ScriptMethod defines three properties including `UseHttpGet`, `ResponseFormat` and `XmlSerializeString`.</span></span> <span data-ttu-id="8c44d-168">Cambiar los valores de estas propiedades puede ser útil en casos donde el tipo de solicitud aceptada por un método Web debe cambiarse a GET, cuando un método Web debe devolver datos XML sin formato en forma de un `XmlDocument` o `XmlElement` objeto o cuando se devuelven los datos de un  servicio siempre se debe serializar como XML en lugar de JSON.</span><span class="sxs-lookup"><span data-stu-id="8c44d-168">Changing the values of these properties can be useful in cases where the type of request accepted by a Web Method needs to be changed to GET, when a Web Method needs to return raw XML data in the form of an `XmlDocument` or `XmlElement` object or when data returned from a service should always be serialized as XML instead of JSON.</span></span>

<span data-ttu-id="8c44d-169">La propiedad se puede utilizar cuando un método Web debe aceptar de UseHttpGet obtener solicitudes en lugar de las solicitudes POST.</span><span class="sxs-lookup"><span data-stu-id="8c44d-169">The UseHttpGet property can be used when a Web Method should accept GET requests as opposed to POST requests.</span></span> <span data-ttu-id="8c44d-170">Las solicitudes se envían mediante una dirección URL con parámetros de entrada del método Web convierte en parámetros de cadena de consulta.</span><span class="sxs-lookup"><span data-stu-id="8c44d-170">Requests are sent using a URL with Web Method input parameters converted to QueryString parameters.</span></span> <span data-ttu-id="8c44d-171">El UseHttpGet propiedad valor predeterminado es false y solo debe establecerse en `true` cuando las operaciones son conocidas son seguros y cuando los datos confidenciales no se pasan a un servicio Web.</span><span class="sxs-lookup"><span data-stu-id="8c44d-171">The UseHttpGet property defaults to false and should only be set to `true` when operations are known to be safe and when sensitive data is not passed to a Web Service.</span></span> <span data-ttu-id="8c44d-172">Listado 6 muestra un ejemplo de cómo utilizar el atributo ScriptMethod con la propiedad UseHttpGet.</span><span class="sxs-lookup"><span data-stu-id="8c44d-172">Listing 6 shows an example of using the ScriptMethod attribute with the UseHttpGet property.</span></span>

**<span data-ttu-id="8c44d-173">Listado 6.</span><span class="sxs-lookup"><span data-stu-id="8c44d-173">Listing 6.</span></span> <span data-ttu-id="8c44d-174">Usar el atributo ScriptMethod con la propiedad UseHttpGet.</span><span class="sxs-lookup"><span data-stu-id="8c44d-174">Using the ScriptMethod attribute with the UseHttpGet property.</span></span>**

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample6.cs)]

<span data-ttu-id="8c44d-175">Se muestra un ejemplo de los encabezados enviados cuando se llama al método de Web HttpGetEcho se muestra en el listado 6 siguiente:</span><span class="sxs-lookup"><span data-stu-id="8c44d-175">An example of the headers sent when the HttpGetEcho Web Method shown in Listing 6 is called are shown next:</span></span>

`GET /CustomerViewer/DemoService.asmx/HttpGetEcho?input=%22Input Value%22 HTTP/1.1`

<span data-ttu-id="8c44d-176">Además de permitir que los métodos Web Aceptar las solicitudes HTTP GET, también se puede usar el atributo ScriptMethod cuando las respuestas XML deben devolverse desde un servicio en lugar de JSON.</span><span class="sxs-lookup"><span data-stu-id="8c44d-176">In addition to allowing Web Methods to accept HTTP GET requests, the ScriptMethod attribute can also be used when XML responses need to be returned from a service rather than JSON.</span></span> <span data-ttu-id="8c44d-177">Por ejemplo, un servicio Web puede recuperar una fuente RSS de un sitio remoto y lo devuelve como un objeto XmlDocument o un XmlElement.</span><span class="sxs-lookup"><span data-stu-id="8c44d-177">For example, a Web Service may retrieve an RSS feed from a remote site and return it as an XmlDocument or XmlElement object.</span></span> <span data-ttu-id="8c44d-178">Datos de procesamiento de XML, a continuación, pueden producirse en el cliente.</span><span class="sxs-lookup"><span data-stu-id="8c44d-178">Processing of the XML data can then occur on the client.</span></span>

<span data-ttu-id="8c44d-179">Listado 7 muestra un ejemplo del uso de la propiedad ResponseFormat para especificar que se deben devolver los datos XML desde un método Web.</span><span class="sxs-lookup"><span data-stu-id="8c44d-179">Listing 7 shows an example of using the ResponseFormat property to specify that XML data should be returned from a Web Method.</span></span>

**<span data-ttu-id="8c44d-180">Listado 7.</span><span class="sxs-lookup"><span data-stu-id="8c44d-180">Listing 7.</span></span> <span data-ttu-id="8c44d-181">Usar el atributo ScriptMethod con la propiedad ResponseFormat.</span><span class="sxs-lookup"><span data-stu-id="8c44d-181">Using the ScriptMethod attribute with the ResponseFormat property.</span></span>**

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample7.cs)]

<span data-ttu-id="8c44d-182">También se puede usar la propiedad ResponseFormat junto con la propiedad XmlSerializeString.</span><span class="sxs-lookup"><span data-stu-id="8c44d-182">The ResponseFormat property can also be used along with the XmlSerializeString property.</span></span> <span data-ttu-id="8c44d-183">La propiedad XmlSerializeString tiene un valor predeterminado es False, lo que significa que todas devuelven tipos, excepto las cadenas devueltas desde un método Web se serializan como XML cuando el `ResponseFormat` propiedad está establecida en `ResponseFormat.Xml`.</span><span class="sxs-lookup"><span data-stu-id="8c44d-183">The XmlSerializeString property has a default value of false which means that all return types except strings returned from a Web Method are serialized as XML when the `ResponseFormat` property is set to `ResponseFormat.Xml`.</span></span> <span data-ttu-id="8c44d-184">Cuando `XmlSerializeString` está establecido en `true`, todos los tipos devueltos desde un método Web se serializan como XML, incluidos los tipos de cadena.</span><span class="sxs-lookup"><span data-stu-id="8c44d-184">When `XmlSerializeString` is set to `true`, all types returned from a Web Method are serialized as XML including string types.</span></span> <span data-ttu-id="8c44d-185">Si la propiedad ResponseFormat tiene un valor de `ResponseFormat.Json` XmlSerializeString se omite.</span><span class="sxs-lookup"><span data-stu-id="8c44d-185">If the ResponseFormat property has a value of `ResponseFormat.Json` the XmlSerializeString property is ignored.</span></span>

<span data-ttu-id="8c44d-186">Listado 8 muestra un ejemplo del uso de la propiedad XmlSerializeString para forzar las cadenas debe serializarse como XML.</span><span class="sxs-lookup"><span data-stu-id="8c44d-186">Listing 8 shows an example of using the XmlSerializeString property to force strings to be serialized as XML.</span></span>

**<span data-ttu-id="8c44d-187">Listado 8.</span><span class="sxs-lookup"><span data-stu-id="8c44d-187">Listing 8.</span></span> <span data-ttu-id="8c44d-188">Usar el atributo ScriptMethod con la propiedad XmlSerializeString</span><span class="sxs-lookup"><span data-stu-id="8c44d-188">Using the ScriptMethod attribute with the XmlSerializeString property</span></span>**

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample8.cs)]

<span data-ttu-id="8c44d-189">El valor devuelto de una llamada al método de Web GetXmlString se muestra en el listado 8 se muestra la siguiente:</span><span class="sxs-lookup"><span data-stu-id="8c44d-189">The value returned from calling the GetXmlString Web Method shown in Listing 8 is shown next:</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample9.cs)]

<span data-ttu-id="8c44d-190">Aunque el formato JSON predeterminado minimiza el tamaño total de mensajes de solicitud y respuesta y se consume más fácilmente por los clientes de AJAX de ASP.NET de una manera de exploradores, las propiedades ResponseFormat y XmlSerializeString pueden ser utilizados al cliente aplicaciones como Internet Explorer 5 o superior esperan que los datos XML que se devuelve desde un método Web.</span><span class="sxs-lookup"><span data-stu-id="8c44d-190">Although the default JSON format minimizes the overall size of request and response messages and is more readily consumed by ASP.NET AJAX clients in a cross-browser manner, the ResponseFormat and XmlSerializeString properties can be utilized when client applications such as Internet Explorer 5 or higher expect XML data to be returned from a Web Method.</span></span>

## <a name="working-with-complex-types"></a><span data-ttu-id="8c44d-191">Trabajar con tipos complejos</span><span class="sxs-lookup"><span data-stu-id="8c44d-191">Working with Complex Types</span></span>

<span data-ttu-id="8c44d-192">Listado 5 mostró un ejemplo de cómo devolver un tipo complejo denominado a cliente de un servicio Web.</span><span class="sxs-lookup"><span data-stu-id="8c44d-192">Listing 5 showed an example of returning a complex type named Customer from a Web Service.</span></span> <span data-ttu-id="8c44d-193">La clase Customer define varios tipos diferentes de simple internamente como propiedades como FirstName y LastName.</span><span class="sxs-lookup"><span data-stu-id="8c44d-193">The Customer class defines several different simple types internally as properties such as FirstName and LastName.</span></span> <span data-ttu-id="8c44d-194">Tipos complejos se usan como un parámetro de entrada o tipo de valor devuelto en un método Web con AJAX habilitado automáticamente se serializan en JSON antes de enviarse al lado de cliente.</span><span class="sxs-lookup"><span data-stu-id="8c44d-194">Complex types used as an input parameter or return type on an AJAX-enabled Web Method are automatically serialized into JSON before being sent to the client-side.</span></span> <span data-ttu-id="8c44d-195">Sin embargo, los tipos complejos anidados (aquellos definidos de forma interna dentro de otro tipo) no están disponibles para el cliente como objetos independientes de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="8c44d-195">However, nested complex types (those defined internally within another type) are not made available to the client as standalone objects by default.</span></span>

<span data-ttu-id="8c44d-196">En casos donde un tipo complejo anidado usado por un servicio Web también se debe usar en una página de cliente, el atributo GenerateScriptType de AJAX de ASP.NET puede agregarse al servicio Web.</span><span class="sxs-lookup"><span data-stu-id="8c44d-196">In cases where a nested complex type used by a Web Service must also be used in a client page, the ASP.NET AJAX GenerateScriptType attribute can be added to the Web Service.</span></span> <span data-ttu-id="8c44d-197">Por ejemplo, la clase CustomerDetails se muestra en el listado 9 contiene las propiedades de dirección y el sexo que ***representan tipos complejos anidados.***</span><span class="sxs-lookup"><span data-stu-id="8c44d-197">For example, the CustomerDetails class shown in Listing 9 contains Address and Gender properties which ***represent nested complex types.***</span></span>

**<span data-ttu-id="8c44d-198">Listado 9.</span><span class="sxs-lookup"><span data-stu-id="8c44d-198">Listing 9.</span></span> <span data-ttu-id="8c44d-199">La clase CustomerDetails que se muestra aquí contiene dos tipos complejos anidados.</span><span class="sxs-lookup"><span data-stu-id="8c44d-199">The CustomerDetails class shown here contains two nested complex types.</span></span>**

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample10.cs)]

<span data-ttu-id="8c44d-200">Los objetos dirección y el sexo definidos dentro de la clase CustomerDetails se muestra en el listado 9 no convierte automáticamente en estar disponibles para su uso en el lado cliente a través de JavaScript, ya que son tipos anidados (dirección es una clase y género es una enumeración).</span><span class="sxs-lookup"><span data-stu-id="8c44d-200">The Address and Gender objects defined within the CustomerDetails class shown in Listing 9 won't automatically be made available for use on the client-side via JavaScript since they are nested types (Address is a class and Gender is an enumeration).</span></span> <span data-ttu-id="8c44d-201">En situaciones donde un tipo anidado que se usa dentro de un servicio Web debe estar disponible en el lado cliente, se puede usar el atributo GenerateScriptType se ha mencionado anteriormente (consulte el listado 10).</span><span class="sxs-lookup"><span data-stu-id="8c44d-201">In situations where a nested type used within a Web Service must be available on the client-side, the GenerateScriptType attribute mentioned earlier can be used (see Listing 10).</span></span> <span data-ttu-id="8c44d-202">Este atributo se puede agregar varias veces en los casos donde se devuelven los diferentes tipos complejos anidados de un servicio.</span><span class="sxs-lookup"><span data-stu-id="8c44d-202">This attribute can be added multiple times in cases where different nested complex types are returned from a service.</span></span> <span data-ttu-id="8c44d-203">Se puede aplicar directamente a la clase de servicio Web o por encima de los métodos Web específicos.</span><span class="sxs-lookup"><span data-stu-id="8c44d-203">It can be applied directly to the Web Service class or above specific Web Methods.</span></span>

**<span data-ttu-id="8c44d-204">Listado 10.</span><span class="sxs-lookup"><span data-stu-id="8c44d-204">Listing 10.</span></span> <span data-ttu-id="8c44d-205">Mediante el atributo GenerateScriptService para definir los tipos anidados deben estar disponibles para el cliente.</span><span class="sxs-lookup"><span data-stu-id="8c44d-205">Using the GenerateScriptService attribute to define nested types that should be available to the client.</span></span>**

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample11.cs)]

<span data-ttu-id="8c44d-206">Aplicando la `GenerateScriptType` atributo a los tipos de servicio Web, la dirección y el sexo estarán automáticamente disponible para su uso por código de JavaScript de AJAX de ASP.NET del cliente.</span><span class="sxs-lookup"><span data-stu-id="8c44d-206">By applying the `GenerateScriptType` attribute to the Web Service, the Address and Gender types will automatically be made available for use by client-side ASP.NET AJAX JavaScript code.</span></span> <span data-ttu-id="8c44d-207">En el listado 11 se muestra un ejemplo de JavaScript que se genera automáticamente y se envía al cliente agregando el atributo GenerateScriptType en un servicio Web.</span><span class="sxs-lookup"><span data-stu-id="8c44d-207">An example of the JavaScript that is automatically generated and sent to the client by adding the GenerateScriptType attribute on a Web Service is shown in Listing 11.</span></span> <span data-ttu-id="8c44d-208">Verá cómo usar tipos complejos anidados más adelante en el artículo.</span><span class="sxs-lookup"><span data-stu-id="8c44d-208">You'll see how to use nested complex types later in the article.</span></span>

**<span data-ttu-id="8c44d-209">Listado 11.</span><span class="sxs-lookup"><span data-stu-id="8c44d-209">Listing 11.</span></span> <span data-ttu-id="8c44d-210">Tipos complejos anidados disponible a una página AJAX de ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="8c44d-210">Nested complex types made available to an ASP.NET AJAX page.</span></span>**

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample12.cs)]

<span data-ttu-id="8c44d-211">Ahora que ha visto cómo crear servicios Web y hacerlos accesibles a las páginas de ASP.NET AJAX, echemos un vistazo a cómo crear y utilizar a servidores proxy de JavaScript para que se pueden recuperar los datos o envía a los servicios Web.</span><span class="sxs-lookup"><span data-stu-id="8c44d-211">Now that you've seen how to create Web Services and make them accessible to ASP.NET AJAX pages, let's take a look at how to create and use JavaScript proxies so that data can be retrieved or sent to Web Services.</span></span>

## <a name="creating-javascript-proxies"></a><span data-ttu-id="8c44d-212">Crear a servidores proxy de JavaScript</span><span class="sxs-lookup"><span data-stu-id="8c44d-212">Creating JavaScript Proxies</span></span>

<span data-ttu-id="8c44d-213">Llamar a un servicio Web estándar (.NET u otra plataforma) normalmente implica la creación de un objeto proxy que intercepta las complejidades de envío de mensajes de solicitud y respuesta SOAP.</span><span class="sxs-lookup"><span data-stu-id="8c44d-213">Calling a standard Web Service (.NET or another platform) typically involves creating a proxy object that shields you from the complexities of sending SOAP request and response messages.</span></span> <span data-ttu-id="8c44d-214">Con las llamadas de servicio Web de ASP.NET AJAX, se pueden crear servidores proxy de JavaScript y usar llamar fácilmente a los servicios sin preocuparse por serializar y deserializar los mensajes JSON.</span><span class="sxs-lookup"><span data-stu-id="8c44d-214">With ASP.NET AJAX Web Service calls, JavaScript proxies can be created and used to easily call services without worrying about serializing and deserializing JSON messages.</span></span> <span data-ttu-id="8c44d-215">Servidores proxy de JavaScript pueden generarse automáticamente mediante el control ScriptManager de ASP.NET AJAX.</span><span class="sxs-lookup"><span data-stu-id="8c44d-215">JavaScript proxies can be automatically generated by using the ASP.NET AJAX ScriptManager control.</span></span>

<span data-ttu-id="8c44d-216">Creación de un proxy de JavaScript que puede llamar a servicios Web se logra mediante el uso de la propiedad de los servicios de ScriptManager.</span><span class="sxs-lookup"><span data-stu-id="8c44d-216">Creating a JavaScript proxy that can call Web Services is accomplished by using the ScriptManager's Services property.</span></span> <span data-ttu-id="8c44d-217">Esta propiedad permite definir uno o varios servicios que una página AJAX de ASP.NET puede llamar de forma asincrónica para enviar o recibir datos sin necesidad de realizar operaciones de devolución de datos.</span><span class="sxs-lookup"><span data-stu-id="8c44d-217">This property allows you to define one or more services that an ASP.NET AJAX page can call asynchronously to send or receive data without requiring postback operations.</span></span> <span data-ttu-id="8c44d-218">Definir un servicio mediante el uso de ASP.NET AJAX `ServiceReference` control y asignar la dirección URL del servicio Web para el control `Path` propiedad.</span><span class="sxs-lookup"><span data-stu-id="8c44d-218">You define a service by using the ASP.NET AJAX `ServiceReference` control and assigning the Web Service URL to the control's `Path` property.</span></span> <span data-ttu-id="8c44d-219">Listado 12 muestra un ejemplo de hacer referencia a un servicio denominado CustomersService.asmx.</span><span class="sxs-lookup"><span data-stu-id="8c44d-219">Listing 12 shows an example of referencing a service named CustomersService.asmx.</span></span>

[!code-aspx[Main](understanding-asp-net-ajax-web-services/samples/sample13.aspx)]

**<span data-ttu-id="8c44d-220">Lista 12.</span><span class="sxs-lookup"><span data-stu-id="8c44d-220">Listing 12.</span></span> <span data-ttu-id="8c44d-221">Definir un servicio Web en una página AJAX de ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="8c44d-221">Defining a Web Service used in an ASP.NET AJAX page.</span></span>**

<span data-ttu-id="8c44d-222">Agregar una referencia a la CustomersService.asmx a través del control ScriptManager, hace que un proxy de JavaScript que se genera dinámicamente y se hace referencia a la página.</span><span class="sxs-lookup"><span data-stu-id="8c44d-222">Adding a reference to the CustomersService.asmx through the ScriptManager control causes a JavaScript proxy to be dynamically generated and referenced by the page.</span></span> <span data-ttu-id="8c44d-223">El proxy está insertado utilizando el &lt;script&gt; etiquetar y se carga dinámicamente llamando el archivo CustomersService.asmx y anexar /js al final de la misma.</span><span class="sxs-lookup"><span data-stu-id="8c44d-223">The proxy is embedded by using the &lt;script&gt; tag and dynamically loaded by calling the CustomersService.asmx file and appending /js to the end of it.</span></span> <span data-ttu-id="8c44d-224">El ejemplo siguiente muestra cómo el proxy de JavaScript se incrusta en la página cuando se deshabilita la depuración en el archivo web.config:</span><span class="sxs-lookup"><span data-stu-id="8c44d-224">The following example shows how the JavaScript proxy is embedded in the page when debugging is disabled in web.config:</span></span>

[!code-html[Main](understanding-asp-net-ajax-web-services/samples/sample14.html)]

> *> [!NOTE]
> <span data-ttu-id="8c44d-225">Si gustaría ver el código de proxy de JavaScript real que se genera puede escribir la dirección URL del servicio Web de .NET deseado en el cuadro de dirección de Internet Explorer y anexar /js al final de la misma.</span><span class="sxs-lookup"><span data-stu-id="8c44d-225">If you'd like to see the actual JavaScript proxy code that is generated you can type the URL to the desired .NET Web Service into Internet Explorer's address box and append /js to the end of it.</span></span>*


<span data-ttu-id="8c44d-226">Si está habilitada la depuración en el archivo web.config de que una versión de depuración del proxy de JavaScript se incrustarán en la página como se muestra a continuación:</span><span class="sxs-lookup"><span data-stu-id="8c44d-226">If debugging is enabled in web.config a debug version of the JavaScript proxy will be embedded in the page as shown next:</span></span>

[!code-html[Main](understanding-asp-net-ajax-web-services/samples/sample15.html)]

<span data-ttu-id="8c44d-227">El proxy de JavaScript creado por el control ScriptManager también se puede insertar directamente en la página en lugar de hacer referencia mediante el &lt;script&gt; atributo src de la etiqueta.</span><span class="sxs-lookup"><span data-stu-id="8c44d-227">The JavaScript proxy created by the ScriptManager can also be embedded directly into the page rather than referenced using the &lt;script&gt; tag's src attribute.</span></span> <span data-ttu-id="8c44d-228">Esto puede hacerse estableciendo la propiedad de InlineScript ServiceReference del control en true (el valor predeterminado es false).</span><span class="sxs-lookup"><span data-stu-id="8c44d-228">This can be done by setting the ServiceReference control's InlineScript property to true (the default is false).</span></span> <span data-ttu-id="8c44d-229">Esto puede ser útil cuando un proxy no se comparte entre varias páginas y cuando se desea reducir el número de llamadas de red realizadas al servidor.</span><span class="sxs-lookup"><span data-stu-id="8c44d-229">This can be useful when a proxy isn't shared across multiple pages and when you'd like to reduce the number of network calls made to the server.</span></span> <span data-ttu-id="8c44d-230">Cuando InlineScript se establece en true el script de proxy no se almacena en caché del explorador, se recomienda el valor predeterminado es False en casos donde el proxy se usa por varias páginas en una aplicación de ASP.NET AJAX.</span><span class="sxs-lookup"><span data-stu-id="8c44d-230">When InlineScript is set to true the proxy script won't be cached by the browser so the default value of false is recommended in cases where the proxy is used by multiple pages in an ASP.NET AJAX application.</span></span> <span data-ttu-id="8c44d-231">Se muestra un ejemplo del uso de la propiedad InlineScript siguiente:</span><span class="sxs-lookup"><span data-stu-id="8c44d-231">An example of using the InlineScript property is shown next:</span></span>

[!code-aspx[Main](understanding-asp-net-ajax-web-services/samples/sample16.aspx)]

## <a name="using-javascript-proxies"></a><span data-ttu-id="8c44d-232">Uso de servidores proxy de JavaScript</span><span class="sxs-lookup"><span data-stu-id="8c44d-232">Using JavaScript Proxies</span></span>

<span data-ttu-id="8c44d-233">Una vez que una página de ASP.NET AJAX mediante el control ScriptManager hace referencia a un servicio Web, puede realizar una llamada al servicio Web y los datos devueltos pueden controlarse mediante funciones de devolución de llamada.</span><span class="sxs-lookup"><span data-stu-id="8c44d-233">Once a Web Service is referenced by an ASP.NET AJAX page using the ScriptManager control, a call can be made to the Web Service and the returned data can be handled using callback functions.</span></span> <span data-ttu-id="8c44d-234">Se llama a un servicio Web que hacen referencia a su espacio de nombres (si existe), nombre de clase y nombre del método Web.</span><span class="sxs-lookup"><span data-stu-id="8c44d-234">A Web Service is called by referencing its namespace (if one exists), class name and Web Method name.</span></span> <span data-ttu-id="8c44d-235">Todos los parámetros pasados al servicio Web se pueden definir junto con una función de devolución de llamada que controla los datos devueltos.</span><span class="sxs-lookup"><span data-stu-id="8c44d-235">Any parameters passed to the Web Service can be defined along with a callback function that handles the returned data.</span></span>

<span data-ttu-id="8c44d-236">En el listado 13 se muestra un ejemplo del uso de un proxy de JavaScript para llamar a un método Web denominado GetCustomersByCountry().</span><span class="sxs-lookup"><span data-stu-id="8c44d-236">An example of using a JavaScript proxy to call a Web Method named GetCustomersByCountry() is shown in Listing 13.</span></span> <span data-ttu-id="8c44d-237">La función GetCustomersByCountry() se llama cuando un usuario final hace clic en un botón en la página.</span><span class="sxs-lookup"><span data-stu-id="8c44d-237">The GetCustomersByCountry() function is called when an end user clicks a button on the page.</span></span>

**<span data-ttu-id="8c44d-238">Lista 13.</span><span class="sxs-lookup"><span data-stu-id="8c44d-238">Listing 13.</span></span> <span data-ttu-id="8c44d-239">Una llamada a un servicio Web con un proxy de JavaScript.</span><span class="sxs-lookup"><span data-stu-id="8c44d-239">Calling a Web Service with a JavaScript proxy.</span></span>**

[!code-javascript[Main](understanding-asp-net-ajax-web-services/samples/sample17.js)]

<span data-ttu-id="8c44d-240">El espacio de nombres InterfaceTraining hace referencia a esta llamada, CustomersService clase y método de Web GetCustomersByCountry definen en el servicio.</span><span class="sxs-lookup"><span data-stu-id="8c44d-240">This call references the InterfaceTraining namespace, CustomersService class and GetCustomersByCountry Web Method defined in the service.</span></span> <span data-ttu-id="8c44d-241">Pasa un valor de país obtenido de un control textbox, así como una función de devolución de llamada denominado OnWSRequestComplete que se debe invocar cuando finaliza la llamada asincrónica del servicio Web.</span><span class="sxs-lookup"><span data-stu-id="8c44d-241">It passes a country value obtained from a textbox as well as a callback function named OnWSRequestComplete that should be invoked when the asynchronous Web Service call returns.</span></span> <span data-ttu-id="8c44d-242">OnWSRequestComplete controla la matriz de objetos de cliente devuelto desde el servicio y los convierte en una tabla que se muestra en la página.</span><span class="sxs-lookup"><span data-stu-id="8c44d-242">OnWSRequestComplete handles the array of Customer objects returned from the service and converts them into a table that is displayed in the page.</span></span> <span data-ttu-id="8c44d-243">La salida generada por la llamada se muestra en la figura 1.</span><span class="sxs-lookup"><span data-stu-id="8c44d-243">The output generated from the call is shown in Figure 1.</span></span>


[![B<span data-ttu-id="8c44d-244">nlace datos obtenidos mediante la realización de una llamada AJAX asincrónica a un servicio Web.]</span><span class="sxs-lookup"><span data-stu-id="8c44d-244">inding data obtained by making an asynchronous AJAX call to a Web Service.]</span></span>(understanding-asp-net-ajax-web-services/_static/image2.png)](understanding-asp-net-ajax-web-services/_static/image1.png)

<span data-ttu-id="8c44d-245">**Figura 1**: Enlace de datos obtenidos mediante la realización de una llamada AJAX asincrónica a un servicio Web.</span><span class="sxs-lookup"><span data-stu-id="8c44d-245">**Figure 1**: Binding data obtained by making an asynchronous AJAX call to a Web Service.</span></span>  <span data-ttu-id="8c44d-246">([Haga clic aquí para ver imagen en tamaño completo](understanding-asp-net-ajax-web-services/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="8c44d-246">([Click to view full-size image](understanding-asp-net-ajax-web-services/_static/image3.png))</span></span>


<span data-ttu-id="8c44d-247">Servidores proxy de JavaScript también pueden realizar llamadas unidireccionales a servicios Web en casos donde se debe llamar un método Web pero el proxy no debe esperar una respuesta.</span><span class="sxs-lookup"><span data-stu-id="8c44d-247">JavaScript proxies can also make one-way calls to Web Services in cases where a Web Method should be called but the proxy shouldn't wait for a response.</span></span> <span data-ttu-id="8c44d-248">Por ejemplo, es posible que desee llamar a un servicio Web para iniciar un proceso como un flujo de trabajo, pero no espere a que un valor devuelto desde el servicio.</span><span class="sxs-lookup"><span data-stu-id="8c44d-248">For example, you may want to call a Web Service to start a process such as a work-flow but not wait for a return value from the service.</span></span> <span data-ttu-id="8c44d-249">En casos donde debe realizarse a un servicio de una llamada unidireccional, simplemente se puede omitir la función de devolución de llamada que se muestra en el listado 13.</span><span class="sxs-lookup"><span data-stu-id="8c44d-249">In cases where a one-way call needs to be made to a service, the callback function shown in Listing 13 can simply be omitted.</span></span> <span data-ttu-id="8c44d-250">Puesto que no se define ninguna función de devolución de llamada no esperará el objeto proxy para que el servicio Web devolver los datos.</span><span class="sxs-lookup"><span data-stu-id="8c44d-250">Since no callback function is defined the proxy object will not wait for the Web Service to return data.</span></span>

## <a name="handling-errors"></a><span data-ttu-id="8c44d-251">Control de errores</span><span class="sxs-lookup"><span data-stu-id="8c44d-251">Handling Errors</span></span>

<span data-ttu-id="8c44d-252">Devoluciones de llamadas asincrónicas a servicios Web pueden encontrar diferentes tipos de errores, como la red inactivo, el servicio Web que no está disponible o una excepción que se devuelven.</span><span class="sxs-lookup"><span data-stu-id="8c44d-252">Asynchronous callbacks to Web Services can encounter different types of errors such as the network being down, the Web Service being unavailable or an exception being returned.</span></span> <span data-ttu-id="8c44d-253">Afortunadamente, objetos proxy de JavaScript generados por el control ScriptManager permiten varias devoluciones de llamada a definirse para controlar errores y además de la devolución de llamada correcta que se muestra anteriormente.</span><span class="sxs-lookup"><span data-stu-id="8c44d-253">Fortunately, JavaScript proxy objects generated by the ScriptManager allow multiple callbacks to be defined to handle errors and failures in addition to the success callback shown earlier.</span></span> <span data-ttu-id="8c44d-254">Puede definirse una función de devolución de llamada de error inmediatamente después de la función de devolución de llamada estándar en la llamada al método Web tal como se muestra en el listado 14.</span><span class="sxs-lookup"><span data-stu-id="8c44d-254">An error callback function can be defined immediately after the standard callback function in the call to the Web Method as shown in Listing 14.</span></span>

**<span data-ttu-id="8c44d-255">Lista 14.</span><span class="sxs-lookup"><span data-stu-id="8c44d-255">Listing 14.</span></span> <span data-ttu-id="8c44d-256">Definir una función de devolución de llamada de error y mostrar los errores.</span><span class="sxs-lookup"><span data-stu-id="8c44d-256">Defining an error callback function and displaying errors.</span></span>**

[!code-javascript[Main](understanding-asp-net-ajax-web-services/samples/sample18.js)]

<span data-ttu-id="8c44d-257">Los errores que se producen cuando se llama al servicio Web desencadenarán la función de devolución de llamada OnWSRequestFailed() para llamarse que acepta un objeto que representa el error como un parámetro.</span><span class="sxs-lookup"><span data-stu-id="8c44d-257">Any errors that occur when the Web Service is called will trigger the OnWSRequestFailed() callback function to be called which accepts an object representing the error as a parameter.</span></span> <span data-ttu-id="8c44d-258">El objeto de error expone varias funciones diferentes para determinar la causa del error, así como si la llamada agotó el tiempo. Listado 14 muestra un ejemplo del uso de las funciones de error diferentes y la figura 2 muestra un ejemplo de la salida generada por las funciones.</span><span class="sxs-lookup"><span data-stu-id="8c44d-258">The error object exposes several different functions to determine the cause of the error as well as whether or not the call timed out. Listing 14 shows an example of using the different error functions and Figure 2 shows an example of the output generated by the functions.</span></span>


[![O<span data-ttu-id="8c44d-259">Resultad generado mediante una llamada a funciones de error de AJAX de ASP.NET.]</span><span class="sxs-lookup"><span data-stu-id="8c44d-259">utput generated by calling ASP.NET AJAX error functions.]</span></span>(understanding-asp-net-ajax-web-services/_static/image5.png)](understanding-asp-net-ajax-web-services/_static/image4.png)

<span data-ttu-id="8c44d-260">**Figura 2**: Salida generada mediante una llamada a funciones de error de AJAX de ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="8c44d-260">**Figure 2**: Output generated by calling ASP.NET AJAX error functions.</span></span>  <span data-ttu-id="8c44d-261">([Haga clic aquí para ver imagen en tamaño completo](understanding-asp-net-ajax-web-services/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="8c44d-261">([Click to view full-size image](understanding-asp-net-ajax-web-services/_static/image6.png))</span></span>


## <a name="handling-xml-data-returned-from-a-web-service"></a><span data-ttu-id="8c44d-262">Controlar los datos XML devueltos desde un servicio Web</span><span class="sxs-lookup"><span data-stu-id="8c44d-262">Handling XML Data Returned from a Web Service</span></span>

<span data-ttu-id="8c44d-263">Antes vimos cómo un método Web puede devolver datos XML sin formato mediante el atributo ScriptMethod junto con su propiedad ResponseFormat.</span><span class="sxs-lookup"><span data-stu-id="8c44d-263">Earlier you saw how a Web Method could return raw XML data by using the ScriptMethod attribute along with its ResponseFormat property.</span></span> <span data-ttu-id="8c44d-264">Cuando ResponseFormat se establece en ResponseFormat.Xml, los datos devueltos desde el servicio Web se serializan como XML en lugar de JSON.</span><span class="sxs-lookup"><span data-stu-id="8c44d-264">When ResponseFormat is set to ResponseFormat.Xml, data returned from the Web Service is serialized as XML rather than JSON.</span></span> <span data-ttu-id="8c44d-265">Esto puede ser útil cuando los datos XML deben pasarse directamente al cliente para el procesamiento con JavaScript o XSLT.</span><span class="sxs-lookup"><span data-stu-id="8c44d-265">This can be useful when XML data needs to be passed directly to the client for processing using JavaScript or XSLT.</span></span> <span data-ttu-id="8c44d-266">En este momento, Internet Explorer 5 o superior proporciona el mejor modelo de objeto del lado cliente para analizar y filtrar los datos XML debido a su compatibilidad integrada para MSXML.</span><span class="sxs-lookup"><span data-stu-id="8c44d-266">At the current time, Internet Explorer 5 or higher provides the best client-side object model for parsing and filtering XML data due to its built-in support for MSXML.</span></span>

<span data-ttu-id="8c44d-267">Recuperar datos XML de un servicio Web no es diferente de recuperar otros tipos de datos.</span><span class="sxs-lookup"><span data-stu-id="8c44d-267">Retrieving XML data from a Web Service is no different than retrieving other data types.</span></span> <span data-ttu-id="8c44d-268">Iniciar mediante la invocación del proxy de JavaScript para llamar a la función adecuada y definir una función de devolución de llamada.</span><span class="sxs-lookup"><span data-stu-id="8c44d-268">Start by invoking the JavaScript proxy to call the appropriate function and define a callback function.</span></span> <span data-ttu-id="8c44d-269">Una vez que se devuelve la llamada, a continuación, puede procesar los datos de la función de devolución de llamada.</span><span class="sxs-lookup"><span data-stu-id="8c44d-269">Once the call returns you can then process the data in the callback function.</span></span>

<span data-ttu-id="8c44d-270">Listado 15, muestra un ejemplo de una llamada a un método Web denominado GetRssFeed() que devuelve un objeto XmlElement.</span><span class="sxs-lookup"><span data-stu-id="8c44d-270">Listing 15 shows an example of calling a Web Method named GetRssFeed() that returns an XmlElement object.</span></span> <span data-ttu-id="8c44d-271">GetRssFeed() acepta un parámetro único que representa la dirección URL de la fuente RSS para recuperar.</span><span class="sxs-lookup"><span data-stu-id="8c44d-271">GetRssFeed() accepts a single parameter representing the URL for the RSS feed to retrieve.</span></span>

**<span data-ttu-id="8c44d-272">Lista 15.</span><span class="sxs-lookup"><span data-stu-id="8c44d-272">Listing 15.</span></span> <span data-ttu-id="8c44d-273">Trabajar con datos XML devueltos desde un servicio Web.</span><span class="sxs-lookup"><span data-stu-id="8c44d-273">Working with XML data returned from a Web Service.</span></span>**

[!code-html[Main](understanding-asp-net-ajax-web-services/samples/sample19.html)]

<span data-ttu-id="8c44d-274">En este ejemplo se pasa una dirección URL a una fuente RSS y procesa los datos XML devueltos en la función OnWSRequestComplete().</span><span class="sxs-lookup"><span data-stu-id="8c44d-274">This example passes a URL to an RSS feed and processes the returned XML data in the OnWSRequestComplete() function.</span></span> <span data-ttu-id="8c44d-275">OnWSRequestComplete() comprueba primero si el explorador es Internet Explorer para saber si el analizador MSXML está disponible.</span><span class="sxs-lookup"><span data-stu-id="8c44d-275">OnWSRequestComplete() first checks to see if the browser is Internet Explorer to know whether or not the MSXML parser is available.</span></span> <span data-ttu-id="8c44d-276">Si es así, se utiliza una instrucción XPath para buscar todos &lt;elemento&gt; etiquetas dentro de la fuente RSS.</span><span class="sxs-lookup"><span data-stu-id="8c44d-276">If it is, an XPath statement is used to locate all &lt;item&gt; tags within the RSS feed.</span></span> <span data-ttu-id="8c44d-277">A continuación, se recorre en iteración cada elemento y asociado &lt;título&gt; y &lt;vínculo&gt; etiquetas se encuentra y se procesan para mostrar los datos de cada elemento.</span><span class="sxs-lookup"><span data-stu-id="8c44d-277">Each item is then iterated through and the associated &lt;title&gt; and &lt;link&gt; tags are located and processed to display each item's data.</span></span> <span data-ttu-id="8c44d-278">Figura 3 muestra un ejemplo de la salida generada por la que hace ASP.NET AJAX a llamar a través de un proxy de JavaScript al método Web GetRssFeed().</span><span class="sxs-lookup"><span data-stu-id="8c44d-278">Figure 3 shows an example of the output generated from making an ASP.NET AJAX call through a JavaScript proxy to the GetRssFeed() Web Method.</span></span>

## <a name="handling-complex-types"></a><span data-ttu-id="8c44d-279">Administración de los tipos complejos</span><span class="sxs-lookup"><span data-stu-id="8c44d-279">Handling Complex Types</span></span>

<span data-ttu-id="8c44d-280">Tipos complejos que aceptan o devueltos por un servicio Web se exponen automáticamente a través de un proxy de JavaScript.</span><span class="sxs-lookup"><span data-stu-id="8c44d-280">Complex types accepted or returned by a Web Service are automatically exposed through a JavaScript proxy.</span></span> <span data-ttu-id="8c44d-281">Sin embargo, los tipos complejos anidados no son accesibles directamente en el lado cliente a menos que se aplica el atributo GenerateScriptType al servicio como se explicó anteriormente.</span><span class="sxs-lookup"><span data-stu-id="8c44d-281">However, nested complex types are not directly accessible on the client-side unless the GenerateScriptType attribute is applied to the service as discussed earlier.</span></span> <span data-ttu-id="8c44d-282">¿Por qué querría usar un tipo complejo anidado en el cliente?</span><span class="sxs-lookup"><span data-stu-id="8c44d-282">Why would you want to use a nested complex type on the client-side?</span></span>

<span data-ttu-id="8c44d-283">Para responder esta pregunta, suponga que una página AJAX de ASP.NET muestra los datos del cliente y permite que los usuarios finales actualizar la dirección de un cliente.</span><span class="sxs-lookup"><span data-stu-id="8c44d-283">To answer this question, assume that an ASP.NET AJAX page displays customer data and allows end users to update a customer's address.</span></span> <span data-ttu-id="8c44d-284">Si el servicio Web especifica que el tipo de dirección (un tipo complejo definido en una clase CustomerDetails) se puede enviar al cliente, a continuación, el proceso de actualización puede dividirse en funciones independientes para una mejor reutilización del código.</span><span class="sxs-lookup"><span data-stu-id="8c44d-284">If the Web Service specifies that the Address type (a complex type defined within a CustomerDetails class) can be sent to the client then the update process can be divided into separate functions for better code re-use.</span></span>


[![O<span data-ttu-id="8c44d-285">Resultad crear a partir de una llamada a un servicio Web que devuelve datos RSS].</span><span class="sxs-lookup"><span data-stu-id="8c44d-285">utput creating from calling a Web Service that returns RSS data.]</span></span>(understanding-asp-net-ajax-web-services/_static/image8.png)](understanding-asp-net-ajax-web-services/_static/image7.png)

<span data-ttu-id="8c44d-286">**Figura 3**: Creación de la llamada a un servicio Web que devuelve datos de RSS de salida.</span><span class="sxs-lookup"><span data-stu-id="8c44d-286">**Figure 3**: Output creating from calling a Web Service that returns RSS data.</span></span>  <span data-ttu-id="8c44d-287">([Haga clic aquí para ver imagen en tamaño completo](understanding-asp-net-ajax-web-services/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="8c44d-287">([Click to view full-size image](understanding-asp-net-ajax-web-services/_static/image9.png))</span></span>


<span data-ttu-id="8c44d-288">Lista 16 se muestra un ejemplo de código del lado cliente que invoca un objeto de dirección definido en un espacio de nombres del modelo, lo rellena con datos actualizados y lo asigna a la propiedad de dirección de un objeto CustomerDetails.</span><span class="sxs-lookup"><span data-stu-id="8c44d-288">Listing 16 shows an example of client-side code that invokes an Address object defined in a Model namespace, fills it with updated data and assigns it to a CustomerDetails object's Address property.</span></span> <span data-ttu-id="8c44d-289">El objeto CustomerDetails, a continuación, se pasa al servicio Web para su procesamiento.</span><span class="sxs-lookup"><span data-stu-id="8c44d-289">The CustomerDetails object is then passed to the Web Service for processing.</span></span>

**<span data-ttu-id="8c44d-290">Lista 16.</span><span class="sxs-lookup"><span data-stu-id="8c44d-290">Listing 16.</span></span> <span data-ttu-id="8c44d-291">Uso de tipos complejos anidados</span><span class="sxs-lookup"><span data-stu-id="8c44d-291">Using nested complex types</span></span>**

[!code-javascript[Main](understanding-asp-net-ajax-web-services/samples/sample20.js)]

## <a name="creating-and-using-page-methods"></a><span data-ttu-id="8c44d-292">Crear y usar los métodos de página</span><span class="sxs-lookup"><span data-stu-id="8c44d-292">Creating and Using Page Methods</span></span>

<span data-ttu-id="8c44d-293">Los servicios Web proporcionan una manera excelente para exponer servicios puedan volver a utilizar en una variedad de clientes, incluidas las páginas de AJAX de ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="8c44d-293">Web Services provide an excellent way to expose re-useable services to a variety of clients including ASP.NET AJAX pages.</span></span> <span data-ttu-id="8c44d-294">Sin embargo, puede haber casos donde se necesita una página para recuperar datos que alguna vez no usa o compartidos por otras páginas.</span><span class="sxs-lookup"><span data-stu-id="8c44d-294">However, there may be cases where a page needs to retrieve data that won't ever be used or shared by other pages.</span></span> <span data-ttu-id="8c44d-295">En este caso, convertir en un archivo .asmx para permitir que la página para acceder a los datos puede parecer excesivo puesto que el servicio sólo sirve para una sola página.</span><span class="sxs-lookup"><span data-stu-id="8c44d-295">In this case, making an .asmx file to allow the page to access the data may seem like overkill since the service is only used by a single page.</span></span>

<span data-ttu-id="8c44d-296">ASP.NET AJAX ofrece otro mecanismo para realizar las llamadas como de servicio Web sin necesidad de crear los archivos .asmx independiente.</span><span class="sxs-lookup"><span data-stu-id="8c44d-296">ASP.NET AJAX provides another mechanism for making Web Service-like calls without creating standalone .asmx files.</span></span> <span data-ttu-id="8c44d-297">Esto se realiza mediante una técnica que se denominan "métodos de página".</span><span class="sxs-lookup"><span data-stu-id="8c44d-297">This is done by using a technique referred to as "page methods".</span></span> <span data-ttu-id="8c44d-298">Página son métodos estáticos (compartidos en VB.NET) incrustados directamente en un archivo de página o código lateral que tienen el atributo WebMethod se les aplica.</span><span class="sxs-lookup"><span data-stu-id="8c44d-298">Page methods are static (shared in VB.NET) methods embedded directly in a page or code-beside file that have the WebMethod attribute applied to them.</span></span> <span data-ttu-id="8c44d-299">Al aplicar el atributo WebMethod se puede llamar mediante un objeto de JavaScript especial denominado PageMethods que se crea dinámicamente en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="8c44d-299">By applying the WebMethod attribute they can be called using a special JavaScript object named PageMethods that gets dynamically created at runtime.</span></span> <span data-ttu-id="8c44d-300">El objeto PageMethods actúa como un proxy que intercepta el proceso de serialización y deserialización de JSON.</span><span class="sxs-lookup"><span data-stu-id="8c44d-300">The PageMethods object acts as a proxy that shields you from the JSON serialization/deserialization process.</span></span> <span data-ttu-id="8c44d-301">Tenga en cuenta que para poder usar el objeto PageMethods debe establecer propiedad EnablePageMethods de ScriptManager en true.</span><span class="sxs-lookup"><span data-stu-id="8c44d-301">Note that in order to use the PageMethods object you must set the ScriptManager's EnablePageMethods property to true.</span></span>

[!code-aspx[Main](understanding-asp-net-ajax-web-services/samples/sample21.aspx)]

<span data-ttu-id="8c44d-302">Enumerar 17 muestra un ejemplo de definir dos métodos de página en una clase de código subyacente de ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="8c44d-302">Listing 17 shows an example of defining two page methods in an ASP.NET code-beside class.</span></span> <span data-ttu-id="8c44d-303">Estos métodos recuperan datos de una clase de la capa de negocio ubicada en la aplicación\_carpeta de código del sitio Web.</span><span class="sxs-lookup"><span data-stu-id="8c44d-303">These methods retrieve data from a business layer class located in the App\_Code folder of the Website.</span></span>

**<span data-ttu-id="8c44d-304">Listado 17.</span><span class="sxs-lookup"><span data-stu-id="8c44d-304">Listing 17.</span></span> <span data-ttu-id="8c44d-305">Definir los métodos de página.</span><span class="sxs-lookup"><span data-stu-id="8c44d-305">Defining page methods.</span></span>**

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample22.cs)]

<span data-ttu-id="8c44d-306">Cuando ScriptManager detecta la presencia de los métodos Web en la página genera una referencia dinámica a un objeto de PageMethods mencionado anteriormente.</span><span class="sxs-lookup"><span data-stu-id="8c44d-306">When ScriptManager detects the presence of Web Methods in the page it generates a dynamic reference to the PageMethods object mentioned earlier.</span></span> <span data-ttu-id="8c44d-307">Llamar a un método Web se consigue haciendo referencia a la clase PageMethods seguida del nombre del método y los datos de parámetro necesarios que deben pasarse.</span><span class="sxs-lookup"><span data-stu-id="8c44d-307">Calling a Web Method is accomplished by referencing the PageMethods class followed by the name of the method and any necessary parameter data that should be passed.</span></span> <span data-ttu-id="8c44d-308">Enumerar 18 muestra ejemplos de llamar a los dos métodos de página que se mostró anteriormente.</span><span class="sxs-lookup"><span data-stu-id="8c44d-308">Listing 18 shows examples of calling the two page methods shown earlier.</span></span>

**<span data-ttu-id="8c44d-309">Enumerar 18.</span><span class="sxs-lookup"><span data-stu-id="8c44d-309">Listing 18.</span></span> <span data-ttu-id="8c44d-310">Llamar a métodos de página con el objeto de PageMethods JavaScript.</span><span class="sxs-lookup"><span data-stu-id="8c44d-310">Calling page methods with the PageMethods JavaScript object.</span></span>**

[!code-javascript[Main](understanding-asp-net-ajax-web-services/samples/sample23.js)]

<span data-ttu-id="8c44d-311">Uso del objeto PageMethods es muy similar al uso de un objeto de proxy de JavaScript.</span><span class="sxs-lookup"><span data-stu-id="8c44d-311">Using the PageMethods object is very similar to using a JavaScript proxy object.</span></span> <span data-ttu-id="8c44d-312">En primer lugar debe especificar todos los datos del parámetro que se deben pasar al método de página y, a continuación, definen la función de devolución de llamada que se debe llamar cuando se devuelve la llamada asincrónica.</span><span class="sxs-lookup"><span data-stu-id="8c44d-312">You first specify all of the parameter data that should be passed to the page method and then define the callback function that should be called when the asynchronous call returns.</span></span> <span data-ttu-id="8c44d-313">También se puede especificar una devolución de llamada de error (consulte listado 14 para obtener un ejemplo de control de errores).</span><span class="sxs-lookup"><span data-stu-id="8c44d-313">A failure callback can also be specified (refer to Listing 14 for an example of handling failures).</span></span>

## <a name="the-autocompleteextender-and-the-aspnet-ajax-toolkit"></a><span data-ttu-id="8c44d-314">El AutoCompleteExtender y el Kit de herramientas de AJAX de ASP.NET</span><span class="sxs-lookup"><span data-stu-id="8c44d-314">The AutoCompleteExtender and the ASP.NET AJAX Toolkit</span></span>

<span data-ttu-id="8c44d-315">El Kit de herramientas de AJAX de ASP.NET (disponible en [ http://ajax.asp.net ](http://ajax.asp.net)) ofrece varios controles que pueden utilizarse para tener acceso a servicios Web.</span><span class="sxs-lookup"><span data-stu-id="8c44d-315">The ASP.NET AJAX Toolkit (available from [http://ajax.asp.net](http://ajax.asp.net)) offers several controls that can be used to access Web Services.</span></span> <span data-ttu-id="8c44d-316">En concreto, el Kit de herramientas contiene un control útil denominado `AutoCompleteExtender` que se puede utilizar para llamar a servicios Web y mostrar datos en las páginas sin escribir ningún código de JavaScript en absoluto.</span><span class="sxs-lookup"><span data-stu-id="8c44d-316">Specifically, the toolkit contains a useful control named `AutoCompleteExtender` that can be used to call Web Services and show data in pages without writing any JavaScript code at all.</span></span>

<span data-ttu-id="8c44d-317">El control AutoCompleteExtender puede utilizarse para extender la funcionalidad existente de un cuadro de texto y ayudar a los usuarios más localizar fácilmente los datos que está buscando.</span><span class="sxs-lookup"><span data-stu-id="8c44d-317">The AutoCompleteExtender control can be used to extend existing functionality of a textbox and help users more easily locate data they're looking for.</span></span> <span data-ttu-id="8c44d-318">A medida que escriben en un cuadro de texto el control puede usarse para consultar un servicio Web y muestra resultados debajo del cuadro de texto de forma dinámica.</span><span class="sxs-lookup"><span data-stu-id="8c44d-318">As they type into a textbox the control can be used to query a Web Service and shows results below the textbox dynamically.</span></span> <span data-ttu-id="8c44d-319">Figura 4 muestra un ejemplo del uso del control AutoCompleteExtender para mostrar los identificadores de cliente para una aplicación de soporte técnico.</span><span class="sxs-lookup"><span data-stu-id="8c44d-319">Figure 4 shows an example of using the AutoCompleteExtender control to display customer ids for a support application.</span></span> <span data-ttu-id="8c44d-320">Como el usuario escribe caracteres diferentes en el cuadro de texto, se mostrarán los diferentes elementos debajo de ella según los datos proporcionados.</span><span class="sxs-lookup"><span data-stu-id="8c44d-320">As the user types different characters into the textbox, different items will be shown below it based upon their input.</span></span> <span data-ttu-id="8c44d-321">Los usuarios, a continuación, pueden seleccionar el identificador de cliente deseada.</span><span class="sxs-lookup"><span data-stu-id="8c44d-321">Users can then select the desired customer id.</span></span>

<span data-ttu-id="8c44d-322">Uso de la AutoCompleteExtender dentro de una página AJAX de ASP.NET requiere que el ensamblado AjaxControlToolkit.dll agregarse a la carpeta bin del sitio Web.</span><span class="sxs-lookup"><span data-stu-id="8c44d-322">Using the AutoCompleteExtender within an ASP.NET AJAX page requires that the AjaxControlToolkit.dll assembly be added to the Website's bin folder.</span></span> <span data-ttu-id="8c44d-323">Una vez que se ha agregado el ensamblado del Kit de herramientas, desea hacer referencia a él en el archivo web.config para que los controles que contiene están disponibles para todas las páginas de una aplicación.</span><span class="sxs-lookup"><span data-stu-id="8c44d-323">Once the toolkit assembly has been added, you'll want to reference it in web.config so that the controls it contains are available to all pages in an application.</span></span> <span data-ttu-id="8c44d-324">Esto puede hacerse agregando la siguiente etiqueta dentro del archivo web.config &lt;controles&gt; etiqueta:</span><span class="sxs-lookup"><span data-stu-id="8c44d-324">This can be done by adding the following tag within web.config's &lt;controls&gt; tag:</span></span>

[!code-xml[Main](understanding-asp-net-ajax-web-services/samples/sample24.xml)]

<span data-ttu-id="8c44d-325">En casos donde sólo es necesario usar el control en una página específica puede hacer referencia a él mediante la adición de la directiva de referencia a la parte superior de una página como se muestra a continuación, en lugar de actualizar el archivo web.config:</span><span class="sxs-lookup"><span data-stu-id="8c44d-325">In cases where you only need to use the control in a specific page you can reference it by adding the Reference directive to the top of a page as shown next rather than updating web.config:</span></span>

[!code-aspx[Main](understanding-asp-net-ajax-web-services/samples/sample25.aspx)]


[![U<span data-ttu-id="8c44d-326">Destaque en el control AutoCompleteExtender.]</span><span class="sxs-lookup"><span data-stu-id="8c44d-326">sing the AutoCompleteExtender control.]</span></span>(understanding-asp-net-ajax-web-services/_static/image11.png)](understanding-asp-net-ajax-web-services/_static/image10.png)

<span data-ttu-id="8c44d-327">**Figura 4**: Uso del control AutoCompleteExtender.</span><span class="sxs-lookup"><span data-stu-id="8c44d-327">**Figure 4**: Using the AutoCompleteExtender control.</span></span>  <span data-ttu-id="8c44d-328">([Haga clic aquí para ver imagen en tamaño completo](understanding-asp-net-ajax-web-services/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="8c44d-328">([Click to view full-size image](understanding-asp-net-ajax-web-services/_static/image12.png))</span></span>


<span data-ttu-id="8c44d-329">Una vez que el sitio Web se ha configurado para usar el Kit de herramientas de AJAX de ASP.NET, un control AutoCompleteExtender puede agregarse en la página mucho que agregaría un control de servidor ASP.NET normal.</span><span class="sxs-lookup"><span data-stu-id="8c44d-329">Once the Website has been configured to use the ASP.NET AJAX Toolkit, an AutoCompleteExtender control can be added into the page much like you'd add a regular ASP.NET server control.</span></span> <span data-ttu-id="8c44d-330">Listado de 19, muestra un ejemplo del uso del control para llamar a un servicio Web.</span><span class="sxs-lookup"><span data-stu-id="8c44d-330">Listing 19 shows an example of using the control to call a Web Service.</span></span>

**<span data-ttu-id="8c44d-331">Enumerar 19.</span><span class="sxs-lookup"><span data-stu-id="8c44d-331">Listing 19.</span></span> <span data-ttu-id="8c44d-332">Uso del control AutoCompleteExtender de Kit de herramientas de AJAX de ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="8c44d-332">Using the ASP.NET AJAX Toolkit AutoCompleteExtender control.</span></span>**

[!code-aspx[Main](understanding-asp-net-ajax-web-services/samples/sample26.aspx)]

<span data-ttu-id="8c44d-333">El AutoCompleteExtender tiene varias propiedades, incluidas las propiedades ID y runat estándar que se encuentra en los controles de servidor.</span><span class="sxs-lookup"><span data-stu-id="8c44d-333">The AutoCompleteExtender has several different properties including the standard ID and runat properties found on server controls.</span></span> <span data-ttu-id="8c44d-334">Además, permite definir cuántos caracteres de un tipo de usuario final antes de que el servicio Web recibe consultas de datos.</span><span class="sxs-lookup"><span data-stu-id="8c44d-334">In addition to these, it allows you to define how many characters an end user types before the Web Service is queried for data.</span></span> <span data-ttu-id="8c44d-335">La propiedad MinimumPrefixLength que se muestra en la lista de 19 hace que el servicio se llama cada vez que se escribe un carácter en el cuadro de texto.</span><span class="sxs-lookup"><span data-stu-id="8c44d-335">The MinimumPrefixLength property shown in Listing 19 causes the service to be called each time a character is typed into the textbox.</span></span> <span data-ttu-id="8c44d-336">Conviene tener cuidado al establecer este valor, puesto que cada vez que el usuario escribe un carácter, el servicio Web que se llamará para buscar valores que coinciden con los caracteres en el cuadro de texto.</span><span class="sxs-lookup"><span data-stu-id="8c44d-336">You'll want to be careful setting this value since each time the user types a character the Web Service will be called to search for values that match the characters in the textbox.</span></span> <span data-ttu-id="8c44d-337">El servicio Web para llamar a, así como el método Web de destino se define mediante las propiedades ServicePath y ServiceMethod respectivamente.</span><span class="sxs-lookup"><span data-stu-id="8c44d-337">The Web Service to call as well as the target Web Method are defined using the ServicePath and ServiceMethod properties respectively.</span></span> <span data-ttu-id="8c44d-338">Por último, la propiedad TargetControlID identifica qué textbox para enlazar el control AutoCompleteExtender.</span><span class="sxs-lookup"><span data-stu-id="8c44d-338">Finally, the TargetControlID property identifies which textbox to hook the AutoCompleteExtender control to.</span></span>

<span data-ttu-id="8c44d-339">El servicio Web que se llama debe tener el atributo ScriptService aplican como se explicó anteriormente y el método Web de destino debe aceptar dos parámetros denominados prefixText y count.</span><span class="sxs-lookup"><span data-stu-id="8c44d-339">The Web Service being called must have the ScriptService attribute applied as discussed earlier and the target Web Method must accept two parameters named prefixText and count.</span></span> <span data-ttu-id="8c44d-340">El parámetro prefixText representa los caracteres escritos por el usuario final y el parámetro count representa cuántos elementos se devuelven (el valor predeterminado es 10).</span><span class="sxs-lookup"><span data-stu-id="8c44d-340">The prefixText parameter represents the characters typed by the end user and the count parameter represents how many items to return (the default is 10).</span></span> <span data-ttu-id="8c44d-341">Enumerar 20 muestra un ejemplo del método Web GetCustomerIDs llamado por el control AutoCompleteExtender mostrado anteriormente en la lista de 19.</span><span class="sxs-lookup"><span data-stu-id="8c44d-341">Listing 20 shows an example of the GetCustomerIDs Web Method called by the AutoCompleteExtender control shown earlier in Listing 19.</span></span> <span data-ttu-id="8c44d-342">El método Web llama a un método de la capa de negocio que a su vez llama a un nivel de datos método que controla el filtrado de los datos y devolver los resultados coincidentes.</span><span class="sxs-lookup"><span data-stu-id="8c44d-342">The Web Method calls a business layer method that in turn calls a data layer method that handles filtering the data and returning the matching results.</span></span> <span data-ttu-id="8c44d-343">El código para el método de la capa de datos se muestra en la lista de 21.</span><span class="sxs-lookup"><span data-stu-id="8c44d-343">The code for the data layer method is shown in Listing 21.</span></span>

**<span data-ttu-id="8c44d-344">Lista de 20.</span><span class="sxs-lookup"><span data-stu-id="8c44d-344">Listing 20.</span></span> <span data-ttu-id="8c44d-345">Filtrado de datos enviados desde el control AutoCompleteExtender.</span><span class="sxs-lookup"><span data-stu-id="8c44d-345">Filtering data sent from the AutoCompleteExtender control.</span></span>**

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample27.cs)]

**<span data-ttu-id="8c44d-346">Enumerar 21.</span><span class="sxs-lookup"><span data-stu-id="8c44d-346">Listing 21.</span></span> <span data-ttu-id="8c44d-347">Filtrar los resultados en función de entrada del usuario final.</span><span class="sxs-lookup"><span data-stu-id="8c44d-347">Filtering results based upon end user input.</span></span>**

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample28.cs)]

## <a name="conclusion"></a><span data-ttu-id="8c44d-348">Conclusión</span><span class="sxs-lookup"><span data-stu-id="8c44d-348">Conclusion</span></span>

<span data-ttu-id="8c44d-349">ASP.NET AJAX proporciona un soporte excelente para llamar a servicios Web sin escribir mucho código JavaScript personalizado para controlar los mensajes de solicitud y respuesta.</span><span class="sxs-lookup"><span data-stu-id="8c44d-349">ASP.NET AJAX provides excellent support for calling Web Services without writing a lot of custom JavaScript code to handle the request and response messages.</span></span> <span data-ttu-id="8c44d-350">En este artículo, ha visto cómo habilitar AJAX .NET Web Services para que puedan procesar mensajes JSON y cómo definir los servidores proxy de JavaScript mediante el control ScriptManager.</span><span class="sxs-lookup"><span data-stu-id="8c44d-350">In this article you've seen how to AJAX-enable .NET Web Services to enable them to process JSON messages and how to define JavaScript proxies using the ScriptManager control.</span></span> <span data-ttu-id="8c44d-351">También hemos visto cómo JavaScript se pueden utilizar proxies para llamar a servicios Web, controlar los tipos simples y complejos y lidiar con errores.</span><span class="sxs-lookup"><span data-stu-id="8c44d-351">You've also seen how JavaScript proxies can be used to call Web Services, handle simple and complex types and deal with failures.</span></span> <span data-ttu-id="8c44d-352">Por último, ha visto cómo se pueden usar los métodos de página para simplificar el proceso de creación y realización de llamadas de servicio Web y cómo puede proporcionar el control AutoCompleteExtender ayuda a los usuarios finales a medida que escriben.</span><span class="sxs-lookup"><span data-stu-id="8c44d-352">Finally, you've seen how page methods can be used to simplify the process of creating and making Web Service calls and how the AutoCompleteExtender control can provide help to end users as they type.</span></span> <span data-ttu-id="8c44d-353">Aunque ciertamente, disponible en ASP.NET AJAX UpdatePanel será el control de elección para muchos programadores de AJAX debido a su simplicidad, saber cómo llamar a servicios Web a través de servidores proxy de JavaScript puede ser útil en muchas aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="8c44d-353">Although the UpdatePanel available in ASP.NET AJAX will certainly be the control of choice for many AJAX programmers due to its simplicity, knowing how to call Web Services through JavaScript proxies can be useful in many applications.</span></span>

## <a name="bio"></a><span data-ttu-id="8c44d-354">Bio</span><span class="sxs-lookup"><span data-stu-id="8c44d-354">Bio</span></span>

<span data-ttu-id="8c44d-355">Dan Wahlin (Microsoft Most Valuable Professional para ASP.NET y servicios Web XML) es .NET development instructor y arquitectura consultor en formación técnica de interfaz ([http://www.interfacett.com](http://www.interfacett.com)).</span><span class="sxs-lookup"><span data-stu-id="8c44d-355">Dan Wahlin (Microsoft Most Valuable Professional for ASP.NET and XML Web Services) is a .NET development instructor and architecture consultant at Interface Technical Training ([http://www.interfacett.com](http://www.interfacett.com)).</span></span> <span data-ttu-id="8c44d-356">Dan fundó el XML para el sitio Web de desarrolladores de ASP.NET ([www.XMLforASP.NET](http://www.XMLforASP.NET)), se encuentra en la oficina del orador de INETA y es orador en varios congresos.</span><span class="sxs-lookup"><span data-stu-id="8c44d-356">Dan founded the XML for ASP.NET Developers Web site ([www.XMLforASP.NET](http://www.XMLforASP.NET)), is on the INETA Speaker's Bureau and speaks at several conferences.</span></span> <span data-ttu-id="8c44d-357">Dan coautor DNA de Windows (Wrox), ASP.NET Professional: Sugerencias, tutoriales y código (SAM), especialista en soluciones de ASP.NET 1.1, Professional ASP.NET 2.0 AJAX (Wrox), Hacks de MVP de ASP.NET 2.0 y XML creado para desarrolladores de ASP.NET (SAM).</span><span class="sxs-lookup"><span data-stu-id="8c44d-357">Dan co-authored Professional Windows DNA (Wrox), ASP.NET: Tips, Tutorials and Code (Sams), ASP.NET 1.1 Insider Solutions, Professional ASP.NET 2.0 AJAX (Wrox), ASP.NET 2.0 MVP Hacks and authored XML for ASP.NET Developers (Sams).</span></span> <span data-ttu-id="8c44d-358">Cuando no está escribiendo código, artículos o libros, Dan disfruta de escribir y grabar música y jugar golf y baloncesto con su esposa e hijos.</span><span class="sxs-lookup"><span data-stu-id="8c44d-358">When he's not writing code, articles or books, Dan enjoys writing and recording music and playing golf and basketball with his wife and kids.</span></span>

<span data-ttu-id="8c44d-359">Scott Cate ha estado trabajando con tecnologías Web de Microsoft desde 1997 y es el presidente de myKB.com ([www.myKB.com](http://www.myKB.com)) donde se especializa en la escritura de ASP.NET en función de las aplicaciones que se centra en soluciones de Software de Base de conocimiento.</span><span class="sxs-lookup"><span data-stu-id="8c44d-359">Scott Cate has been working with Microsoft Web technologies since 1997 and is the President of myKB.com ([www.myKB.com](http://www.myKB.com)) where he specializes in writing ASP.NET based applications focused on Knowledge Base Software solutions.</span></span> <span data-ttu-id="8c44d-360">Se puede establecer contacto con Scott por correo electrónico en [ scott.cate@myKB.com ](mailto:scott.cate@myKB.com) o su blog en [ScottCate.com](http://ScottCate.com)</span><span class="sxs-lookup"><span data-stu-id="8c44d-360">Scott can be contacted via email at [scott.cate@myKB.com](mailto:scott.cate@myKB.com) or his blog at [ScottCate.com](http://ScottCate.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="8c44d-361">[Anterior](understanding-asp-net-ajax-localization.md)
> [Siguiente](understanding-asp-net-ajax-debugging-capabilities.md)</span><span class="sxs-lookup"><span data-stu-id="8c44d-361">[Previous](understanding-asp-net-ajax-localization.md)
[Next](understanding-asp-net-ajax-debugging-capabilities.md)</span></span>
