---
uid: web-forms/overview/moving-to-aspnet-20/data-source-controls
title: Controles de origen de datos ? Microsoft Docs
author: rick-anderson
description: El control DataGrid de ASP.NET 1.x marcó una gran mejora en el acceso a datos en aplicaciones web. Sin embargo, no era tan fácil de usar como podría haber sido....
ms.author: riande
ms.date: 02/20/2005
ms.assetid: 78fd0e92-f9c6-4e96-a5e9-0375b307a828
msc.legacyurl: /web-forms/overview/moving-to-aspnet-20/data-source-controls
msc.type: authoredcontent
ms.openlocfilehash: 2b4302b509af57dc5d9db9de9ee824df767d0737
ms.sourcegitcommit: 022f79dbc1350e0c6ffaa1e7e7c6e850cdabf9af
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 04/17/2020
ms.locfileid: "81540225"
---
# <a name="data-source-controls"></a><span data-ttu-id="8e22e-104">Controles de origen de datos</span><span class="sxs-lookup"><span data-stu-id="8e22e-104">Data Source Controls</span></span>

<span data-ttu-id="8e22e-105">por [Microsoft](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="8e22e-105">by [Microsoft](https://github.com/microsoft)</span></span>

> <span data-ttu-id="8e22e-106">El control DataGrid de ASP.NET 1.x marcó una gran mejora en el acceso a datos en aplicaciones web.</span><span class="sxs-lookup"><span data-stu-id="8e22e-106">The DataGrid control in ASP.NET 1.x marked a great improvement in data access in Web applications.</span></span> <span data-ttu-id="8e22e-107">Sin embargo, no era tan fácil de usar como podría haber sido.</span><span class="sxs-lookup"><span data-stu-id="8e22e-107">However, it wasn't as user-friendly as it could have been.</span></span> <span data-ttu-id="8e22e-108">Todavía requería una cantidad considerable de código para obtener mucha funcionalidad útil de él.</span><span class="sxs-lookup"><span data-stu-id="8e22e-108">It still required a considerable amount of code to obtain much useful functionality from it.</span></span> <span data-ttu-id="8e22e-109">Tal es el modelo en todos los esfuerzos de acceso a datos en 1.x.</span><span class="sxs-lookup"><span data-stu-id="8e22e-109">Such is the model in all data access endeavors in 1.x.</span></span>

<span data-ttu-id="8e22e-110">El control DataGrid de ASP.NET 1.x marcó una gran mejora en el acceso a datos en aplicaciones web.</span><span class="sxs-lookup"><span data-stu-id="8e22e-110">The DataGrid control in ASP.NET 1.x marked a great improvement in data access in Web applications.</span></span> <span data-ttu-id="8e22e-111">Sin embargo, no era tan fácil de usar como podría haber sido.</span><span class="sxs-lookup"><span data-stu-id="8e22e-111">However, it wasn't as user-friendly as it could have been.</span></span> <span data-ttu-id="8e22e-112">Todavía requería una cantidad considerable de código para obtener mucha funcionalidad útil de él.</span><span class="sxs-lookup"><span data-stu-id="8e22e-112">It still required a considerable amount of code to obtain much useful functionality from it.</span></span> <span data-ttu-id="8e22e-113">Tal es el modelo en todos los esfuerzos de acceso a datos en 1.x.</span><span class="sxs-lookup"><span data-stu-id="8e22e-113">Such is the model in all data access endeavors in 1.x.</span></span>

<span data-ttu-id="8e22e-114">ASP.NET 2.0 aborda esto con en parte con controles de origen de datos.</span><span class="sxs-lookup"><span data-stu-id="8e22e-114">ASP.NET 2.0 addresses this with in part with data source controls.</span></span> <span data-ttu-id="8e22e-115">Los controles de origen de datos de ASP.NET 2.0 proporcionan a los desarrolladores un modelo declarativo para recuperar datos, mostrar datos y editar datos.</span><span class="sxs-lookup"><span data-stu-id="8e22e-115">The data source controls in ASP.NET 2.0 provide developers with a declarative model for retrieving data, displaying data, and editing data.</span></span> <span data-ttu-id="8e22e-116">El propósito de los controles de origen de datos es proporcionar una representación coherente de los datos a los controles enlazados a datos independientemente del origen de esos datos.</span><span class="sxs-lookup"><span data-stu-id="8e22e-116">The purpose of data source controls is to provide a consistent representation of data to data-bound controls regardless of the source of those data.</span></span> <span data-ttu-id="8e22e-117">En el corazón de los controles de origen de datos en ASP.NET 2.0 se encuentra la clase abstracta DataSourceControl.</span><span class="sxs-lookup"><span data-stu-id="8e22e-117">At the heart of the data source controls in ASP.NET 2.0 is the DataSourceControl abstract class.</span></span> <span data-ttu-id="8e22e-118">La clase DataSourceControl proporciona una implementación base de la interfaz IDataSource y la interfaz IListSource, la última de las cuales permite asignar el control de origen de datos como DataSource de un control enlazado a datos (a través de la nueva propiedad DataSourceId que se describe más adelante) y exponer los datos que hay como una lista.</span><span class="sxs-lookup"><span data-stu-id="8e22e-118">The DataSourceControl class provides a base implementation of the IDataSource interface and the IListSource interface, the latter of which allows you to assign the data source control as the DataSource of a data-bound control (via the new DataSourceId property discussed later) and expose the data therein as a list.</span></span> <span data-ttu-id="8e22e-119">Cada lista de datos de un control de origen de datos se expone como un DataSourceView objeto.</span><span class="sxs-lookup"><span data-stu-id="8e22e-119">Each list of data from a data source control is exposed as a DataSourceView object.</span></span> <span data-ttu-id="8e22e-120">El acceso a las instancias de DataSourceView lo proporciona la interfaz IDataSource.</span><span class="sxs-lookup"><span data-stu-id="8e22e-120">Access to the DataSourceView instances is provided by the IDataSource interface.</span></span> <span data-ttu-id="8e22e-121">Por ejemplo, el GetViewNames método devuelve un ICollection que le permite enumerar el DataSourceViews asociado a un control de origen de datos determinado y el GetView método le permite tener acceso a una determinada DataSourceView instancia por nombre.</span><span class="sxs-lookup"><span data-stu-id="8e22e-121">For example, the GetViewNames method returns an ICollection that allows you to enumerate the DataSourceViews associated with a particular data source control, and the GetView method allows you to access a particular DataSourceView instance by name.</span></span>

<span data-ttu-id="8e22e-122">Los controles de origen de datos no tienen interfaz de usuario.</span><span class="sxs-lookup"><span data-stu-id="8e22e-122">Data source controls have no user-interface.</span></span> <span data-ttu-id="8e22e-123">Se implementan como controles de servidor para que puedan admitir la sintaxis declarativa y para que tengan acceso al estado de página si lo desea.</span><span class="sxs-lookup"><span data-stu-id="8e22e-123">They are implemented as server controls so that they can support declarative syntax and so that they have access to page state if desired.</span></span> <span data-ttu-id="8e22e-124">Los controles de origen de datos no representan ningún marcado HTML en el cliente.</span><span class="sxs-lookup"><span data-stu-id="8e22e-124">Data source controls do not render any HTML markup to the client.</span></span>

> [!NOTE]
> <span data-ttu-id="8e22e-125">Como verá más adelante, también hay ventajas de almacenamiento en caché obtenidas mediante el uso de controles de origen de datos.</span><span class="sxs-lookup"><span data-stu-id="8e22e-125">As you'll see later, there are also caching benefits obtained by using data source controls.</span></span>

## <a name="storing-connection-strings"></a><span data-ttu-id="8e22e-126">Almacenamiento de cadenas de conexión</span><span class="sxs-lookup"><span data-stu-id="8e22e-126">Storing Connection Strings</span></span>

<span data-ttu-id="8e22e-127">Antes de empezar a ver cómo configurar los controles de origen de datos, debemos cubrir una nueva capacidad en ASP.NET 2.0 con respecto a las cadenas de conexión.</span><span class="sxs-lookup"><span data-stu-id="8e22e-127">Before we get into looking at how to configure data source controls, we should cover a new capability in ASP.NET 2.0 concerning connection strings.</span></span> <span data-ttu-id="8e22e-128">ASP.NET 2.0 introduce una nueva sección en el archivo de configuración que le permite almacenar fácilmente cadenas de conexión que se pueden leer dinámicamente en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="8e22e-128">ASP.NET 2.0 introduces a new section in the configuration file that allows you to easily store connection strings that can be read dynamically at runtime.</span></span> <span data-ttu-id="8e22e-129">La &lt;sección&gt; connectionStrings facilita el almacenamiento de cadenas de conexión.</span><span class="sxs-lookup"><span data-stu-id="8e22e-129">The &lt;connectionStrings&gt; section makes it easy to store connection strings.</span></span>

<span data-ttu-id="8e22e-130">El fragmento de código siguiente agrega una nueva cadena de conexión.</span><span class="sxs-lookup"><span data-stu-id="8e22e-130">The snippet below adds a new connection string.</span></span>

[!code-xml[Main](data-source-controls/samples/sample1.xml)]

> [!NOTE]
> <span data-ttu-id="8e22e-131">Al igual &lt;que&gt; con la &lt;sección&gt; appSettings, &lt;la sección&gt; connectionStrings aparece fuera de la sección system.web del archivo de configuración.</span><span class="sxs-lookup"><span data-stu-id="8e22e-131">Just as with the &lt;appSettings&gt; section, the &lt;connectionStrings&gt; section appears outside of the &lt;system.web&gt; section in the configuration file.</span></span>

<span data-ttu-id="8e22e-132">Para usar esta cadena de conexión, puede usar la sintaxis siguiente al establecer el atributo ConnectionString de un control de servidor.</span><span class="sxs-lookup"><span data-stu-id="8e22e-132">To use this connection string, you can use the following syntax when setting the ConnectionString attribute of a server control.</span></span>

[!code-aspx[Main](data-source-controls/samples/sample2.aspx)]

<span data-ttu-id="8e22e-133">La &lt;sección&gt; connectionStrings también se puede cifrar para que no se exponga información confidencial.</span><span class="sxs-lookup"><span data-stu-id="8e22e-133">The &lt;connectionStrings&gt; section can also be encrypted so that sensitive information is not exposed.</span></span> <span data-ttu-id="8e22e-134">Esa capacidad se cubrirá en un módulo posterior.</span><span class="sxs-lookup"><span data-stu-id="8e22e-134">That ability will be covered in a later module.</span></span>

## <a name="caching-data-sources"></a><span data-ttu-id="8e22e-135">Almacenamiento en caché de orígenes de datos</span><span class="sxs-lookup"><span data-stu-id="8e22e-135">Caching Data Sources</span></span>

<span data-ttu-id="8e22e-136">Cada DataSourceControl proporciona cuatro propiedades para configurar el almacenamiento en caché; EnableCaching, CacheDuration, CacheExpirationPolicy y CacheKeyDependency.</span><span class="sxs-lookup"><span data-stu-id="8e22e-136">Each DataSourceControl provides four properties for configuring caching; EnableCaching, CacheDuration, CacheExpirationPolicy, and CacheKeyDependency.</span></span>

## <a name="enablecaching"></a><span data-ttu-id="8e22e-137">EnableCaching</span><span class="sxs-lookup"><span data-stu-id="8e22e-137">EnableCaching</span></span>

<span data-ttu-id="8e22e-138">EnableCaching es una propiedad booleana que determina si el almacenamiento en caché está habilitado o no para el control de origen de datos.</span><span class="sxs-lookup"><span data-stu-id="8e22e-138">EnableCaching is a Boolean property that determines whether or not caching is enabled for the data source control.</span></span>

## <a name="cacheduration-property"></a><span data-ttu-id="8e22e-139">Propiedad CacheDuration</span><span class="sxs-lookup"><span data-stu-id="8e22e-139">CacheDuration Property</span></span>

<span data-ttu-id="8e22e-140">La propiedad CacheDuration establece el número de segundos que la memoria caché sigue siendo válida.</span><span class="sxs-lookup"><span data-stu-id="8e22e-140">The CacheDuration property sets the number of seconds that the cache remains valid.</span></span> <span data-ttu-id="8e22e-141">Establecer esta propiedad en **0** hace que la memoria caché siga siendo válida hasta que se invalide explícitamente.</span><span class="sxs-lookup"><span data-stu-id="8e22e-141">Setting this property to **0** causes the cache to remain valid until explicitly invalidated.</span></span>

## <a name="cacheexpirationpolicy-property"></a><span data-ttu-id="8e22e-142">Propiedad CacheExpirationPolicy</span><span class="sxs-lookup"><span data-stu-id="8e22e-142">CacheExpirationPolicy Property</span></span>

<span data-ttu-id="8e22e-143">La propiedad CacheExpirationPolicy se puede establecer en **Absolute** o **Sliding**.</span><span class="sxs-lookup"><span data-stu-id="8e22e-143">The CacheExpirationPolicy property can be set to either **Absolute** or **Sliding**.</span></span> <span data-ttu-id="8e22e-144">Establecerlo en Absoluto significa que la cantidad máxima de tiempo que los datos se almacenarán en caché es el número de segundos especificado por el CacheDuration propiedad.</span><span class="sxs-lookup"><span data-stu-id="8e22e-144">Setting it to Absolute means that the maximum amount of time that the data will be cached is the number of seconds specified by the CacheDuration property.</span></span> <span data-ttu-id="8e22e-145">Al establecerlo en Deslizamiento, el tiempo de expiración se restablece cuando se realiza cada operación.</span><span class="sxs-lookup"><span data-stu-id="8e22e-145">By setting it to Sliding, the expiration time is reset when each operation is performed.</span></span>

## <a name="cachekeydependency-property"></a><span data-ttu-id="8e22e-146">Propiedad CacheKeyDependency</span><span class="sxs-lookup"><span data-stu-id="8e22e-146">CacheKeyDependency Property</span></span>

<span data-ttu-id="8e22e-147">Si se especifica un valor de cadena para la propiedad CacheKeyDependency, ASP.NET configurará una nueva dependencia de caché basada en esa cadena.</span><span class="sxs-lookup"><span data-stu-id="8e22e-147">If a string value is specified for the CacheKeyDependency property, ASP.NET will set up a new cache dependency based on that string.</span></span> <span data-ttu-id="8e22e-148">Esto le permite invalidar explícitamente la memoria caché simplemente cambiando o quitando CacheKeyDependency.</span><span class="sxs-lookup"><span data-stu-id="8e22e-148">This allows you to explicitly invalidate the cache by simply changing or removing the CacheKeyDependency.</span></span>

<span data-ttu-id="8e22e-149">**Importante:** Si la suplantación está habilitada y el acceso al origen de datos y/o al contenido de los datos se basa en la identidad del cliente, se recomienda deshabilitar el almacenamiento en caché estableciendo EnableCaching en False.</span><span class="sxs-lookup"><span data-stu-id="8e22e-149">**Important**: If impersonation is enabled and access to the data source and/or content of data are based upon client identity, it is recommended that caching be disabled by setting EnableCaching to False.</span></span> <span data-ttu-id="8e22e-150">Si el almacenamiento en caché está habilitado en este escenario y un usuario distinto del usuario que solicitó originalmente los datos emite una solicitud, no se aplica la autorización al origen de datos.</span><span class="sxs-lookup"><span data-stu-id="8e22e-150">If caching is enabled in this scenario and a user other than the user who originally requested the data issues a request, authorization to the data source is not enforced.</span></span> <span data-ttu-id="8e22e-151">Los datos simplemente se servirán desde la memoria caché.</span><span class="sxs-lookup"><span data-stu-id="8e22e-151">The data will simply be served from cache.</span></span>

## <a name="the-sqldatasource-control"></a><span data-ttu-id="8e22e-152">El control SqlDataSource</span><span class="sxs-lookup"><span data-stu-id="8e22e-152">The SqlDataSource Control</span></span>

<span data-ttu-id="8e22e-153">El control SqlDataSource permite a un desarrollador tener acceso a los datos almacenados en cualquier base de datos relacional que admita ADO.NET.</span><span class="sxs-lookup"><span data-stu-id="8e22e-153">The SqlDataSource control allows a developer to access data stored in any relational database that supports ADO.NET.</span></span> <span data-ttu-id="8e22e-154">Puede utilizar el proveedor System.Data.SqlClient para tener acceso a una base de datos de SQL Server, el proveedor System.Data.OleDb, el proveedor System.Data.Odbc o el proveedor System.Data.OracleClient para tener acceso a Oracle.</span><span class="sxs-lookup"><span data-stu-id="8e22e-154">It can use the System.Data.SqlClient provider to access a SQL Server database, the System.Data.OleDb provider, the System.Data.Odbc provider, or the System.Data.OracleClient provider to access Oracle.</span></span> <span data-ttu-id="8e22e-155">Por lo tanto, SqlDataSource ciertamente no solo se usa para tener acceso a los datos de una base de datos de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="8e22e-155">Therefore, the SqlDataSource is certainly not only used for accessing data in a SQL Server database.</span></span>

<span data-ttu-id="8e22e-156">Para usar SqlDataSource, simplemente proporcione un valor para la propiedad ConnectionString y especifique un comando SQL o un procedimiento almacenado.</span><span class="sxs-lookup"><span data-stu-id="8e22e-156">In order to use the SqlDataSource, you simply provide a value for the ConnectionString property and specify a SQL command or stored procedure.</span></span> <span data-ttu-id="8e22e-157">El control SqlDataSource se encarga de trabajar con la arquitectura de ADO.NET subyacente.</span><span class="sxs-lookup"><span data-stu-id="8e22e-157">The SqlDataSource control takes care of working with the underlying ADO.NET architecture.</span></span> <span data-ttu-id="8e22e-158">Abre la conexión, consulta el origen de datos o ejecuta el procedimiento almacenado, devuelve los datos y, a continuación, cierra la conexión automáticamente.</span><span class="sxs-lookup"><span data-stu-id="8e22e-158">It opens the connection, queries the data source or executes the stored procedure, returns the data, and then closes the connection for you.</span></span>

> [!NOTE]
> <span data-ttu-id="8e22e-159">Dado que la clase DataSourceControl cierra automáticamente la conexión, debe reducir el número de llamadas de cliente generadas por la pérdida de conexiones de base de datos.</span><span class="sxs-lookup"><span data-stu-id="8e22e-159">Because the DataSourceControl class automatically closes the connection for you, it should reduce the number of customer calls generated by leaking database connections.</span></span>

<span data-ttu-id="8e22e-160">El fragmento de código siguiente enlaza un DropDownList control a un SqlDataSource control mediante la cadena de conexión que se almacena en el archivo de configuración como se muestra anteriormente.</span><span class="sxs-lookup"><span data-stu-id="8e22e-160">The code snippet below binds a DropDownList control to a SqlDataSource control using the connection string that is stored in the configuration file as shown above.</span></span>

[!code-aspx[Main](data-source-controls/samples/sample3.aspx)]

<span data-ttu-id="8e22e-161">Como se muestra anteriormente, el DataSourceMode propiedad de la SqlDataSource especifica el modo para el origen de datos.</span><span class="sxs-lookup"><span data-stu-id="8e22e-161">As illustrated above, the DataSourceMode property of the SqlDataSource specifies the mode for the data source.</span></span> <span data-ttu-id="8e22e-162">En el ejemplo anterior, el DataSourceMode se establece en DataReader.</span><span class="sxs-lookup"><span data-stu-id="8e22e-162">In the example above, the DataSourceMode is set to DataReader.</span></span> <span data-ttu-id="8e22e-163">En ese caso, el SqlDataSource devolverá un IDataReader objeto mediante un cursor de solo avance y de solo lectura.</span><span class="sxs-lookup"><span data-stu-id="8e22e-163">In that case, the SqlDataSource will return an IDataReader object using a forward-only and read-only cursor.</span></span> <span data-ttu-id="8e22e-164">El tipo especificado de objeto que se devuelve está controlado por el proveedor que se usa.</span><span class="sxs-lookup"><span data-stu-id="8e22e-164">The specified type of object that is returned is controlled by the provider that is used.</span></span> <span data-ttu-id="8e22e-165">En este caso, estoy usando el proveedor System.Data.SqlClient como se especifica en la &lt;sección connectionStrings&gt; del archivo web.config.</span><span class="sxs-lookup"><span data-stu-id="8e22e-165">In this case, I'm using the System.Data.SqlClient provider as specified in the &lt;connectionStrings&gt; section of the web.config file.</span></span> <span data-ttu-id="8e22e-166">Por lo tanto, el objeto que se devuelve será de tipo SqlDataReader.</span><span class="sxs-lookup"><span data-stu-id="8e22e-166">Therefore, the object that is returned will be of type SqlDataReader.</span></span> <span data-ttu-id="8e22e-167">Al especificar un DataSourceMode valor de DataSet, los datos se pueden almacenar en un DataSet en el servidor.</span><span class="sxs-lookup"><span data-stu-id="8e22e-167">By specifying a DataSourceMode value of DataSet, the data can be stored in a DataSet on the server.</span></span> <span data-ttu-id="8e22e-168">Este modo le permite añadir características como clasificación, paginación, etc. Si hubiera estado enlazando datos sqlDataSource a un control GridView, habría elegido el modo DataSet.</span><span class="sxs-lookup"><span data-stu-id="8e22e-168">This mode allows you to add features such as sorting, paging, etc. If I had been data-binding the SqlDataSource to a GridView control, I would have chosen the DataSet mode.</span></span> <span data-ttu-id="8e22e-169">Sin embargo, en el caso de un DropDownList, el modo DataReader es la opción correcta.</span><span class="sxs-lookup"><span data-stu-id="8e22e-169">However, in the case of a DropDownList, the DataReader mode is the correct choice.</span></span>

> [!NOTE]
> <span data-ttu-id="8e22e-170">Al almacenar en caché un SqlDataSource o un AccessDataSource, el DataSourceMode propiedad debe establecerse en DataSet.</span><span class="sxs-lookup"><span data-stu-id="8e22e-170">When caching a SqlDataSource or an AccessDataSource, the DataSourceMode property must be set to DataSet.</span></span> <span data-ttu-id="8e22e-171">Se producirá una excepción si habilita el almacenamiento en caché con un DataSourceMode de DataReader.</span><span class="sxs-lookup"><span data-stu-id="8e22e-171">An exception will occur if you enable caching with a DataSourceMode of DataReader.</span></span>

## <a name="sqldatasource-properties"></a><span data-ttu-id="8e22e-172">Propiedades sqlDataSource</span><span class="sxs-lookup"><span data-stu-id="8e22e-172">SqlDataSource Properties</span></span>

<span data-ttu-id="8e22e-173">A continuación se muestran algunas de las propiedades del control SqlDataSource.</span><span class="sxs-lookup"><span data-stu-id="8e22e-173">The following are some of the properties of the SqlDataSource control.</span></span>

### <a name="cancelselectonnullparameter"></a><span data-ttu-id="8e22e-174">CancelSelectOnNullParameter</span><span class="sxs-lookup"><span data-stu-id="8e22e-174">CancelSelectOnNullParameter</span></span>

<span data-ttu-id="8e22e-175">Valor booleano que especifica si se cancela un comando select si uno de los parámetros es null.</span><span class="sxs-lookup"><span data-stu-id="8e22e-175">A Boolean value that specifies whether a select command is canceled if one of the parameters is null.</span></span> <span data-ttu-id="8e22e-176">De forma predeterminada es True.</span><span class="sxs-lookup"><span data-stu-id="8e22e-176">True by default.</span></span>

### <a name="conflictdetection"></a><span data-ttu-id="8e22e-177">ConflictDetection</span><span class="sxs-lookup"><span data-stu-id="8e22e-177">ConflictDetection</span></span>

<span data-ttu-id="8e22e-178">En una situación en la que varios usuarios pueden actualizar un origen de datos al mismo tiempo, el ConflictDetection propiedad determina el comportamiento de la SqlDataSource control.</span><span class="sxs-lookup"><span data-stu-id="8e22e-178">In a situation where multiple users may be updating a data source at the same time, the ConflictDetection property determines the behavior of the SqlDataSource control.</span></span> <span data-ttu-id="8e22e-179">Esta propiedad se evalúa como uno de los valores de la ConflictOptions enumeración.</span><span class="sxs-lookup"><span data-stu-id="8e22e-179">This property evaluates to one of the values of the ConflictOptions enumeration.</span></span> <span data-ttu-id="8e22e-180">Esos valores son **CompareAllValues** y **OverwriteChanges**.</span><span class="sxs-lookup"><span data-stu-id="8e22e-180">Those values are **CompareAllValues** and **OverwriteChanges**.</span></span> <span data-ttu-id="8e22e-181">Si se establece en OverwriteChanges, la última persona que escriba datos en el origen de datos sobrescribe los cambios anteriores.</span><span class="sxs-lookup"><span data-stu-id="8e22e-181">If set to OverwriteChanges, the last person to write data to the data source overwrites any previous changes.</span></span> <span data-ttu-id="8e22e-182">Sin embargo, si el ConflictDetection propiedad está establecida en CompareAllValues, los parámetros se crean para las columnas devueltas por el SelectCommand y los parámetros también se crean para contener los valores originales en cada una de esas columnas que permiten el SqlDataSource para determinar si los valores han cambiado desde que se ejecutó SelectCommand.</span><span class="sxs-lookup"><span data-stu-id="8e22e-182">However, if the ConflictDetection property is set to CompareAllValues, parameters get created for the columns returned by the SelectCommand and parameters are also created to hold the original values in each of those columns allowing the SqlDataSource to determine whether or not the values have changed since the SelectCommand was executed.</span></span>

### <a name="deletecommand"></a><span data-ttu-id="8e22e-183">DeleteCommand</span><span class="sxs-lookup"><span data-stu-id="8e22e-183">DeleteCommand</span></span>

<span data-ttu-id="8e22e-184">Establece u obtiene la cadena SQL utilizada al eliminar filas de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="8e22e-184">Sets or gets the SQL string used when deleting rows from the database.</span></span> <span data-ttu-id="8e22e-185">Puede ser una consulta SQL o un nombre de procedimiento almacenado.</span><span class="sxs-lookup"><span data-stu-id="8e22e-185">This can either be a SQL query or a stored procedure name.</span></span>

### <a name="deletecommandtype"></a><span data-ttu-id="8e22e-186">DeleteCommandType</span><span class="sxs-lookup"><span data-stu-id="8e22e-186">DeleteCommandType</span></span>

<span data-ttu-id="8e22e-187">Establece u obtiene el tipo de comando delete, ya sea una consulta SQL (Text) o un procedimiento almacenado (StoredProcedure).</span><span class="sxs-lookup"><span data-stu-id="8e22e-187">Sets or gets the type of delete command, either a SQL query (Text) or a stored procedure (StoredProcedure).</span></span>

### <a name="deleteparameters"></a><span data-ttu-id="8e22e-188">DeleteParameters</span><span class="sxs-lookup"><span data-stu-id="8e22e-188">DeleteParameters</span></span>

<span data-ttu-id="8e22e-189">Devuelve los parámetros que usa deleteCommand del objeto SqlDataSourceView asociado al control SqlDataSource.</span><span class="sxs-lookup"><span data-stu-id="8e22e-189">Returns the parameters that are used by the DeleteCommand of the SqlDataSourceView object associated with the SqlDataSource control.</span></span>

### <a name="oldvaluesparameterformatstring"></a><span data-ttu-id="8e22e-190">OldValuesParameterFormatString</span><span class="sxs-lookup"><span data-stu-id="8e22e-190">OldValuesParameterFormatString</span></span>

<span data-ttu-id="8e22e-191">Esta propiedad se utiliza para especificar el formato de los parámetros de valor original en los casos en que el ConflictDetection propiedad está establecida en CompareAllValues.</span><span class="sxs-lookup"><span data-stu-id="8e22e-191">This property is used to specify the format of the original value parameters in cases where the ConflictDetection property is set to CompareAllValues.</span></span> <span data-ttu-id="8e22e-192">El valor {0} predeterminado es lo que significa que los parámetros de valor original tomarán el mismo nombre que el parámetro original.</span><span class="sxs-lookup"><span data-stu-id="8e22e-192">The default is {0} which means that original value parameters will take the same name as the original parameter.</span></span> <span data-ttu-id="8e22e-193">En otras palabras, si el nombre del campo @EmployeeIDes EmployeeID, el parámetro de valor original sería .</span><span class="sxs-lookup"><span data-stu-id="8e22e-193">In other words, if the field name is EmployeeID, the original value parameter would be @EmployeeID.</span></span>

### <a name="selectcommand"></a><span data-ttu-id="8e22e-194">SelectCommand</span><span class="sxs-lookup"><span data-stu-id="8e22e-194">SelectCommand</span></span>

<span data-ttu-id="8e22e-195">Establece u obtiene la cadena SQL que se usa para recuperar datos de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="8e22e-195">Sets or gets the SQL string that is used to retrieve data from the database.</span></span> <span data-ttu-id="8e22e-196">Puede ser una consulta SQL o un nombre de procedimiento almacenado.</span><span class="sxs-lookup"><span data-stu-id="8e22e-196">This can either be a SQL query or a stored procedure name.</span></span>

### <a name="selectcommandtype"></a><span data-ttu-id="8e22e-197">SelectCommandType</span><span class="sxs-lookup"><span data-stu-id="8e22e-197">SelectCommandType</span></span>

<span data-ttu-id="8e22e-198">Establece u obtiene el tipo de comando select, ya sea una consulta SQL (Text) o un procedimiento almacenado (StoredProcedure).</span><span class="sxs-lookup"><span data-stu-id="8e22e-198">Sets or gets the type of select command, either a SQL query (Text) or a stored procedure (StoredProcedure).</span></span>

### <a name="selectparameters"></a><span data-ttu-id="8e22e-199">SelectParameters</span><span class="sxs-lookup"><span data-stu-id="8e22e-199">SelectParameters</span></span>

<span data-ttu-id="8e22e-200">Devuelve los parámetros que usa SelectCommand del objeto SqlDataSourceView asociado al control SqlDataSource.</span><span class="sxs-lookup"><span data-stu-id="8e22e-200">Returns the parameters that are used by the SelectCommand of the SqlDataSourceView object associated with the SqlDataSource control.</span></span>

### <a name="sortparametername"></a><span data-ttu-id="8e22e-201">SortParameterName</span><span class="sxs-lookup"><span data-stu-id="8e22e-201">SortParameterName</span></span>

<span data-ttu-id="8e22e-202">Obtiene o establece el nombre de un parámetro de procedimiento almacenado que se usa al ordenar los datos recuperados por el control de origen de datos.</span><span class="sxs-lookup"><span data-stu-id="8e22e-202">Gets or sets the name of a stored procedure parameter that is used when sorting data retrieved by the data source control.</span></span> <span data-ttu-id="8e22e-203">Válido solo cuando SelectCommandType está establecido en StoredProcedure.</span><span class="sxs-lookup"><span data-stu-id="8e22e-203">Valid only when SelectCommandType is set to StoredProcedure.</span></span>

### <a name="sqlcachedependency"></a><span data-ttu-id="8e22e-204">SqlCacheDependency</span><span class="sxs-lookup"><span data-stu-id="8e22e-204">SqlCacheDependency</span></span>

<span data-ttu-id="8e22e-205">Cadena delimitada por punto y coma que especifica las bases de datos y tablas utilizadas en una dependencia de caché de SQL ServerSQL Server .</span><span class="sxs-lookup"><span data-stu-id="8e22e-205">A semi-colon delimited string specifying the databases and tables used in a SQL Server cache dependency.</span></span> <span data-ttu-id="8e22e-206">(Las dependencias de caché SQL se tratarán en un módulo posterior.)</span><span class="sxs-lookup"><span data-stu-id="8e22e-206">(SQL cache dependencies will be discussed in a later module.)</span></span>

### <a name="updatecommand"></a><span data-ttu-id="8e22e-207">Updatecommand</span><span class="sxs-lookup"><span data-stu-id="8e22e-207">UpdateCommand</span></span>

<span data-ttu-id="8e22e-208">Establece u obtiene la cadena SQL que se usa al actualizar datos en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="8e22e-208">Sets or gets the SQL string that is used when updating data in the database.</span></span> <span data-ttu-id="8e22e-209">Puede ser una consulta SQL o un nombre de procedimiento almacenado.</span><span class="sxs-lookup"><span data-stu-id="8e22e-209">This can either be a SQL query or a stored procedure name.</span></span>

### <a name="updatecommandtype"></a><span data-ttu-id="8e22e-210">UpdateCommandType</span><span class="sxs-lookup"><span data-stu-id="8e22e-210">UpdateCommandType</span></span>

<span data-ttu-id="8e22e-211">Establece u obtiene el tipo de comando de actualización, ya sea una consulta SQL (Texto) o un procedimiento almacenado (StoredProcedure).</span><span class="sxs-lookup"><span data-stu-id="8e22e-211">Sets or gets the type of update command, either a SQL query (Text) or a stored procedure (StoredProcedure).</span></span>

### <a name="updateparameters"></a><span data-ttu-id="8e22e-212">UpdateParameters</span><span class="sxs-lookup"><span data-stu-id="8e22e-212">UpdateParameters</span></span>

<span data-ttu-id="8e22e-213">Devuelve los parámetros que usa UpdateCommand del objeto SqlDataSourceView asociado al control SqlDataSource.</span><span class="sxs-lookup"><span data-stu-id="8e22e-213">Returns the parameters that are used by the UpdateCommand of the SqlDataSourceView object associated with the SqlDataSource control.</span></span>

## <a name="the-accessdatasource-control"></a><span data-ttu-id="8e22e-214">El control AccessDataSource</span><span class="sxs-lookup"><span data-stu-id="8e22e-214">The AccessDataSource Control</span></span>

<span data-ttu-id="8e22e-215">El AccessDataSource control se deriva de la SqlDataSource clase y se utiliza para enlazar datos a una base de datos de Microsoft Access.</span><span class="sxs-lookup"><span data-stu-id="8e22e-215">The AccessDataSource control derives from the SqlDataSource class and is used to data-bind to a Microsoft Access database.</span></span> <span data-ttu-id="8e22e-216">El ConnectionString propiedad para el AccessDataSource control es una propiedad de solo lectura.</span><span class="sxs-lookup"><span data-stu-id="8e22e-216">The ConnectionString property for the AccessDataSource control is a read-only property.</span></span> <span data-ttu-id="8e22e-217">En lugar de usar la propiedad ConnectionString, la propiedad DataFile se utiliza para apuntar a la base de datos de Access como se muestra a continuación.</span><span class="sxs-lookup"><span data-stu-id="8e22e-217">Instead of using the ConnectionString property, the DataFile property is used to point to the Access Database as shown below.</span></span>

[!code-aspx[Main](data-source-controls/samples/sample4.aspx)]

<span data-ttu-id="8e22e-218">AccessDataSource siempre establecerá el ProviderName de la base SqlDataSource en System.Data.OleDb y se conecta a la base de datos mediante el Microsoft.Jet.OLEDB.4.0 proveedor OLE DB.</span><span class="sxs-lookup"><span data-stu-id="8e22e-218">The AccessDataSource will always set the ProviderName of the base SqlDataSource to System.Data.OleDb and connects to the database using the Microsoft.Jet.OLEDB.4.0 OLE DB provider.</span></span> <span data-ttu-id="8e22e-219">No puede usar el control AccessDataSource para conectarse a una base de datos de Access protegida con contraseña.</span><span class="sxs-lookup"><span data-stu-id="8e22e-219">You cannot use the AccessDataSource control to connect to a password-protected Access database.</span></span> <span data-ttu-id="8e22e-220">Si tiene que conectarse a una base de datos protegida por contraseña, debe usar el Control SqlDataSource.</span><span class="sxs-lookup"><span data-stu-id="8e22e-220">If you have to connect to a password protected database, you should use the SqlDataSource control.</span></span>

> [!NOTE]
> <span data-ttu-id="8e22e-221">Las bases de datos de acceso almacenadas en el sitio Web deben colocarse en el directorio Datos de la aplicación.\_</span><span class="sxs-lookup"><span data-stu-id="8e22e-221">Access databases stored within the Web site should be placed in the App\_Data directory.</span></span> <span data-ttu-id="8e22e-222">ASP.NET no permite que se exploren los archivos de este directorio.</span><span class="sxs-lookup"><span data-stu-id="8e22e-222">ASP.NET does not allow files in this directory to be browsed.</span></span> <span data-ttu-id="8e22e-223">Deberá conceder a la cuenta de proceso permisos de lectura y escritura al directorio De datos de la aplicación\_al usar las bases de datos de Access.</span><span class="sxs-lookup"><span data-stu-id="8e22e-223">You will need to grant the process account Read and Write permissions to the App\_Data directory when using Access databases.</span></span>

## <a name="the-xmldatasource-control"></a><span data-ttu-id="8e22e-224">El control XmlDataSource</span><span class="sxs-lookup"><span data-stu-id="8e22e-224">The XmlDataSource Control</span></span>

<span data-ttu-id="8e22e-225">El XmlDataSource se utiliza para enlazar datos XML a controles enlazados a datos.</span><span class="sxs-lookup"><span data-stu-id="8e22e-225">The XmlDataSource is used to data-bind XML data to data-bound controls.</span></span> <span data-ttu-id="8e22e-226">Puede enlazar a un archivo XML mediante el DataFile propiedad o puede enlazar a una cadena XML mediante el Data propiedad.</span><span class="sxs-lookup"><span data-stu-id="8e22e-226">You can bind to an XML file using the DataFile property or you can bind to an XML string using the Data property.</span></span> <span data-ttu-id="8e22e-227">El XmlDataSource expone atributos XML como campos enlazables.</span><span class="sxs-lookup"><span data-stu-id="8e22e-227">The XmlDataSource exposes XML attributes as bindable fields.</span></span> <span data-ttu-id="8e22e-228">En los casos en los que necesite enlazar a valores que no están representados como atributos, deberá utilizar una transformación XSL.</span><span class="sxs-lookup"><span data-stu-id="8e22e-228">In cases where you need to bind to values that are not represented as attributes, you will need to use an XSL transform.</span></span> <span data-ttu-id="8e22e-229">También puede utilizar expresiones XPath para filtrar datos XML.</span><span class="sxs-lookup"><span data-stu-id="8e22e-229">You can also use XPath expressions to filter XML data.</span></span>

<span data-ttu-id="8e22e-230">Considere el siguiente archivo XML:</span><span class="sxs-lookup"><span data-stu-id="8e22e-230">Consider the following XML file:</span></span>

[!code-xml[Main](data-source-controls/samples/sample5.xml)]

<span data-ttu-id="8e22e-231">Observe que El XmlDataSource utiliza una propiedad XPath de *People/Person* para filtrar solo los &lt;nodos Person.&gt;</span><span class="sxs-lookup"><span data-stu-id="8e22e-231">Notice that the XmlDataSource uses an XPath property of *People/Person* in order to filter on just the &lt;Person&gt; nodes.</span></span> <span data-ttu-id="8e22e-232">El DropDownList, a continuación, enlaza datos a la LastName atributo mediante el DataTextField propiedad.</span><span class="sxs-lookup"><span data-stu-id="8e22e-232">The DropDownList then data-binds to the LastName attribute using the DataTextField property.</span></span>

<span data-ttu-id="8e22e-233">Aunque el xmlDataSource control se utiliza principalmente para enlazar datos a datos XML de solo lectura, es posible editar el archivo de datos XML.</span><span class="sxs-lookup"><span data-stu-id="8e22e-233">While the XmlDataSource control is primarily used to data-bind to read-only XML data, it is possible to edit the XML data file.</span></span> <span data-ttu-id="8e22e-234">Tenga en cuenta que, en estos casos, la inserción automática, la actualización y la eliminación de información en el archivo XML no se producen automáticamente como lo hace con otros controles de origen de datos.</span><span class="sxs-lookup"><span data-stu-id="8e22e-234">Note that in such cases, automatic insertion, updating, and deletion of information in the XML file does not happen automatically as it does with other data source controls.</span></span> <span data-ttu-id="8e22e-235">En su lugar, tendrá que escribir código para editar manualmente los datos mediante los siguientes métodos del control XmlDataSource.</span><span class="sxs-lookup"><span data-stu-id="8e22e-235">Instead, you will have to write code to manually edit the data using the following methods of the XmlDataSource control.</span></span>

### <a name="getxmldocument"></a><span data-ttu-id="8e22e-236">GetXmlDocument</span><span class="sxs-lookup"><span data-stu-id="8e22e-236">GetXmlDocument</span></span>

<span data-ttu-id="8e22e-237">Recupera un objeto XmlDocument que contiene el código XML recuperado por XmlDataSource.</span><span class="sxs-lookup"><span data-stu-id="8e22e-237">Retrieves an XmlDocument object containing the XML code retrieved by the XmlDataSource.</span></span>

### <a name="save"></a><span data-ttu-id="8e22e-238">Save</span><span class="sxs-lookup"><span data-stu-id="8e22e-238">Save</span></span>

<span data-ttu-id="8e22e-239">Guarda el XmlDocument en memoria en el origen de datos.</span><span class="sxs-lookup"><span data-stu-id="8e22e-239">Saves the in-memory XmlDocument back to the data source.</span></span>

<span data-ttu-id="8e22e-240">Es importante tener en cuenta que el método Save solo funcionará cuando se cumplan las dos condiciones siguientes:</span><span class="sxs-lookup"><span data-stu-id="8e22e-240">It's important to realize that the Save method will only work when the following two conditions are met:</span></span>

1. <span data-ttu-id="8e22e-241">El XmlDataSource está utilizando el DataFile propiedad para enlazar a un archivo XML en lugar de la Data propiedad para enlazar a datos XML en memoria.</span><span class="sxs-lookup"><span data-stu-id="8e22e-241">The XmlDataSource is using the DataFile property to bind to an XML file instead of the Data property to bind to in-memory XML data.</span></span>
2. <span data-ttu-id="8e22e-242">No se especifica ninguna transformación a través de la Transform o TransformFile propiedad.</span><span class="sxs-lookup"><span data-stu-id="8e22e-242">No transformation is specified via the Transform or TransformFile property.</span></span>

<span data-ttu-id="8e22e-243">Tenga en cuenta también que el Save método puede producir resultados inesperados cuando se llama por varios usuarios simultáneamente.</span><span class="sxs-lookup"><span data-stu-id="8e22e-243">Note also that the Save method can yield unexpected results when called by multiple users concurrently.</span></span>

## <a name="the-objectdatasource-control"></a><span data-ttu-id="8e22e-244">El ObjectDataSource Control</span><span class="sxs-lookup"><span data-stu-id="8e22e-244">The ObjectDataSource Control</span></span>

<span data-ttu-id="8e22e-245">Los controles de origen de datos que hemos cubierto hasta este punto son excelentes opciones para aplicaciones de dos niveles donde el control de origen de datos se comunica directamente con el almacén de datos.</span><span class="sxs-lookup"><span data-stu-id="8e22e-245">The data source controls that we have covered up to this point are excellent choices for two-tier applications where the data source control communicates directly to the data store.</span></span> <span data-ttu-id="8e22e-246">Sin embargo, muchas aplicaciones del mundo real son aplicaciones de varios niveles en las que un control de origen de datos puede necesitar comunicarse con un objeto de negocio que, a su vez, se comunica con la capa de datos.</span><span class="sxs-lookup"><span data-stu-id="8e22e-246">However, many real-world applications are multi-tier applications where a data source control might need to communicate to a business object which, in turn, communicates with the data layer.</span></span> <span data-ttu-id="8e22e-247">En estas situaciones, el origen ObjectDataSource rellena la factura muy bien.</span><span class="sxs-lookup"><span data-stu-id="8e22e-247">In these situations, the ObjectDataSource fills the bill nicely.</span></span> <span data-ttu-id="8e22e-248">ObjectDataSource funciona junto con un objeto de origen.</span><span class="sxs-lookup"><span data-stu-id="8e22e-248">The ObjectDataSource works in conjunction with a source object.</span></span> <span data-ttu-id="8e22e-249">El ObjectDataSource control creará una instancia del objeto de origen, llamar al método especificado y eliminar la instancia de objeto todo dentro del ámbito de una sola solicitud, si el objeto tiene métodos de instancia en lugar de métodos estáticos (Shared en Visual Basic).</span><span class="sxs-lookup"><span data-stu-id="8e22e-249">The ObjectDataSource control will create an instance of the source object, call the specified method, and dispose of the object instance all within the scope of a single request, if your object has instance methods instead of static methods (Shared in Visual Basic).</span></span> <span data-ttu-id="8e22e-250">Por lo tanto, el objeto debe ser sin estado.</span><span class="sxs-lookup"><span data-stu-id="8e22e-250">Therefore, your object must be stateless.</span></span> <span data-ttu-id="8e22e-251">Es decir, el objeto debe adquirir y liberar todos los recursos necesarios en el intervalo de una sola solicitud.</span><span class="sxs-lookup"><span data-stu-id="8e22e-251">That is, your object should acquire and release all required resources within the span of a single request.</span></span> <span data-ttu-id="8e22e-252">Puede controlar cómo se crea el objeto de origen controlando el evento ObjectCreating del control ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="8e22e-252">You can control how the source object is created by handling the ObjectCreating event of the ObjectDataSource control.</span></span> <span data-ttu-id="8e22e-253">Puede crear una instancia del objeto de origen y, a continuación, establecer la propiedad ObjectInstance de la clase ObjectDataSourceEventArgs en esa instancia.</span><span class="sxs-lookup"><span data-stu-id="8e22e-253">You can create an instance of the source object, and then set the ObjectInstance property of the ObjectDataSourceEventArgs class to that instance.</span></span> <span data-ttu-id="8e22e-254">El ObjectDataSource control usará la instancia que se crea en el ObjectCreating eventos en lugar de crear una instancia por sí mismo.</span><span class="sxs-lookup"><span data-stu-id="8e22e-254">The ObjectDataSource control will use the instance that is created in the ObjectCreating event instead of creating an instance on its own.</span></span>

<span data-ttu-id="8e22e-255">Si el objeto de origen de un ObjectDataSource control expone métodos estáticos públicos (Shared en Visual Basic) que se pueden llamar para recuperar y modificar datos, un ObjectDataSource control llamará a esos métodos directamente.</span><span class="sxs-lookup"><span data-stu-id="8e22e-255">If the source object for an ObjectDataSource control exposes public static methods (Shared in Visual Basic) that can be called to retrieve and modify data, an ObjectDataSource control will call those methods directly.</span></span> <span data-ttu-id="8e22e-256">Si un ObjectDataSource control debe crear una instancia del objeto de origen para realizar llamadas a métodos, el objeto debe incluir un constructor público que no toma ningún parámetro.</span><span class="sxs-lookup"><span data-stu-id="8e22e-256">If an ObjectDataSource control must create an instance of the source object in order to make method calls, the object must include a public constructor that takes no parameters.</span></span> <span data-ttu-id="8e22e-257">El ObjectDataSource control llamará a este constructor cuando crea una nueva instancia del objeto de origen.</span><span class="sxs-lookup"><span data-stu-id="8e22e-257">The ObjectDataSource control will call this constructor when it creates a new instance of the source object.</span></span>

<span data-ttu-id="8e22e-258">Si el objeto de origen no contiene un constructor público sin parámetros, puede crear una instancia del objeto de origen que usará el ObjectDataSource control en el ObjectCreating eventos.</span><span class="sxs-lookup"><span data-stu-id="8e22e-258">If the source object does not contain a public constructor without parameters, you can create an instance of the source object that will be used by the ObjectDataSource control in the ObjectCreating event.</span></span>

## <a name="specifying-object-methods"></a><span data-ttu-id="8e22e-259">Especificación de métodos de objeto</span><span class="sxs-lookup"><span data-stu-id="8e22e-259">Specifying Object Methods</span></span>

<span data-ttu-id="8e22e-260">El objeto de origen de un ObjectDataSource control puede contener cualquier número de métodos que se utilizan para seleccionar, insertar, actualizar o eliminar datos.</span><span class="sxs-lookup"><span data-stu-id="8e22e-260">The source object for an ObjectDataSource control can contain any number of methods that are used to select, insert, update, or delete data.</span></span> <span data-ttu-id="8e22e-261">El objectDataSource control denomina a estos métodos en función del nombre del método, tal como se identifica mediante el uso de la SelectMethod, InsertMethod, UpdateMethod, o DeleteMethod propiedad de la ObjectDataSource control.</span><span class="sxs-lookup"><span data-stu-id="8e22e-261">These methods are called by the ObjectDataSource control based on the name of the method, as identified by using either the SelectMethod, InsertMethod, UpdateMethod, or DeleteMethod property of the ObjectDataSource control.</span></span> <span data-ttu-id="8e22e-262">El objeto de origen también puede incluir un método SelectCount opcional, que se identifica mediante el control ObjectDataSource mediante la propiedad SelectCountMethod, que devuelve el recuento del número total de objetos en el origen de datos.</span><span class="sxs-lookup"><span data-stu-id="8e22e-262">The source object can also include an optional SelectCount method, which is identified by the ObjectDataSource control using the SelectCountMethod property, that returns the count of the total number of objects at the data source.</span></span> <span data-ttu-id="8e22e-263">El ObjectDataSource control llamará a la SelectCount método después de un Select se ha llamado al método para recuperar el número total de registros en el origen de datos para su uso al paginar.</span><span class="sxs-lookup"><span data-stu-id="8e22e-263">The ObjectDataSource control will call the SelectCount method after a Select method has been called to retrieve the total number of records at the data source for use when paging.</span></span>

## <a name="lab-using-data-source-controls"></a><span data-ttu-id="8e22e-264">Laboratorio mediante controles de origen de datos</span><span class="sxs-lookup"><span data-stu-id="8e22e-264">Lab Using Data Source Controls</span></span>

## <a name="exercise-1---displaying-data-with-the-sqldatasource-control"></a><span data-ttu-id="8e22e-265">Ejercicio 1 - Mostrar datos con el Control SqlDataSource</span><span class="sxs-lookup"><span data-stu-id="8e22e-265">Exercise 1 - Displaying Data with the SqlDataSource Control</span></span>

<span data-ttu-id="8e22e-266">El ejercicio siguiente usa el control SqlDataSource para conectarse a la base de datos Northwind.</span><span class="sxs-lookup"><span data-stu-id="8e22e-266">The following exercise uses the SqlDataSource control to connect to the Northwind database.</span></span> <span data-ttu-id="8e22e-267">Se supone que tiene acceso a la base de datos Northwind en una instancia de SQL Server 2000.</span><span class="sxs-lookup"><span data-stu-id="8e22e-267">It assumes that you have access to the Northwind database on a SQL Server 2000 instance.</span></span>

1. <span data-ttu-id="8e22e-268">Cree un nuevo sitio web de ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="8e22e-268">Create a new ASP.NET Web site.</span></span>
2. <span data-ttu-id="8e22e-269">Agregue un nuevo archivo web.config.</span><span class="sxs-lookup"><span data-stu-id="8e22e-269">Add a new web.config file.</span></span>

    1. <span data-ttu-id="8e22e-270">Haga clic con el botón derecho en el proyecto en el Explorador de soluciones y haga clic en Agregar nuevo elemento.</span><span class="sxs-lookup"><span data-stu-id="8e22e-270">Right-click on the project in Solution Explorer and click Add New Item.</span></span>
    2. <span data-ttu-id="8e22e-271">Elija Web Configuration File (Archivo de configuración web) en la lista de plantillas y haga clic en Add (Agregar).</span><span class="sxs-lookup"><span data-stu-id="8e22e-271">Choose Web Configuration File from the list of templates and click Add.</span></span>
3. <span data-ttu-id="8e22e-272">Edite &lt;la&gt; sección connectionStrings de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="8e22e-272">Edit the &lt;connectionStrings&gt; section as follows:</span></span> 

    [!code-aspx[Main](data-source-controls/samples/sample6.aspx)]
4. <span data-ttu-id="8e22e-273">Cambie a la vista Código y agregue un atributo &lt;ConnectionString y&gt; un atributo SelectCommand al control asp:SqlDataSource de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="8e22e-273">Switch to Code view and add a ConnectionString attribute and a SelectCommand attribute to the &lt;asp:SqlDataSource&gt; control as follows:</span></span> 

    [!code-aspx[Main](data-source-controls/samples/sample7.aspx)]
5. <span data-ttu-id="8e22e-274">En la vista Diseño, agregue un nuevo control GridView.</span><span class="sxs-lookup"><span data-stu-id="8e22e-274">From Design view, add a new GridView control.</span></span>
6. <span data-ttu-id="8e22e-275">En el elegir origen de datos menú desplegable en el GridView tareas menú, elija SqlDataSource1.</span><span class="sxs-lookup"><span data-stu-id="8e22e-275">From the Choose Data Source dropdown in the GridView Tasks menu, choose SqlDataSource1.</span></span>
7. <span data-ttu-id="8e22e-276">Haga clic con el botón derecho en Default.aspx y elija Ver en el explorador en el menú.</span><span class="sxs-lookup"><span data-stu-id="8e22e-276">Right-click on Default.aspx and choose View in Browser from the menu.</span></span> <span data-ttu-id="8e22e-277">Haga clic en Sí cuando se le pida que guarde.</span><span class="sxs-lookup"><span data-stu-id="8e22e-277">Click Yes when prompted to save.</span></span>
8. <span data-ttu-id="8e22e-278">El control GridView muestra los datos de la Products tabla.</span><span class="sxs-lookup"><span data-stu-id="8e22e-278">The GridView displays the data from the Products table.</span></span>

## <a name="exercise-2---editing-data-with-the-sqldatasource-control"></a><span data-ttu-id="8e22e-279">Ejercicio 2 - Edición de datos con el control SqlDataSource</span><span class="sxs-lookup"><span data-stu-id="8e22e-279">Exercise 2 - Editing Data with the SqlDataSource Control</span></span>

<span data-ttu-id="8e22e-280">En el siguiente ejercicio se muestra cómo enlazar datos un DropDownList control mediante la sintaxis declarativa y le permite editar los datos presentados en el DropDownList control.</span><span class="sxs-lookup"><span data-stu-id="8e22e-280">The following exercise demonstrates how to data bind a DropDownList control using the declarative syntax and allows you to edit the data presented in the DropDownList control.</span></span>

1. <span data-ttu-id="8e22e-281">En la vista Diseño, elimine el control GridView de Default.aspx.</span><span class="sxs-lookup"><span data-stu-id="8e22e-281">In Design view, delete the GridView control from Default.aspx.</span></span> 

    <span data-ttu-id="8e22e-282">**Importante:** Deje el control SqlDataSource en la página.</span><span class="sxs-lookup"><span data-stu-id="8e22e-282">**Important**: Leave the SqlDataSource control on the page.</span></span>
2. <span data-ttu-id="8e22e-283">Agregue un control DropDownList a Default.aspx.</span><span class="sxs-lookup"><span data-stu-id="8e22e-283">Add a DropDownList control to Default.aspx.</span></span>
3. <span data-ttu-id="8e22e-284">Cambie a la vista Origen.</span><span class="sxs-lookup"><span data-stu-id="8e22e-284">Switch to Source view.</span></span>
4. <span data-ttu-id="8e22e-285">Agregue un atributo DataSourceId, DataTextField y &lt;DataValueField al&gt; control asp:DropDownList de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="8e22e-285">Add a DataSourceId, DataTextField, and DataValueField attribute to the &lt;asp:DropDownList&gt; control as follows:</span></span> 

    [!code-aspx[Main](data-source-controls/samples/sample8.aspx)]
5. <span data-ttu-id="8e22e-286">Guarde Default.aspx y visualíselo en el explorador.</span><span class="sxs-lookup"><span data-stu-id="8e22e-286">Save Default.aspx and view it in the browser.</span></span> <span data-ttu-id="8e22e-287">Tenga en cuenta que El DropDownList contiene todos los productos de la base de datos Northwind.</span><span class="sxs-lookup"><span data-stu-id="8e22e-287">Note that the DropDownList contains all of the products from the Northwind database.</span></span>
6. <span data-ttu-id="8e22e-288">Cierre el explorador.</span><span class="sxs-lookup"><span data-stu-id="8e22e-288">Close the browser.</span></span>
7. <span data-ttu-id="8e22e-289">En la vista Origen de Default.aspx, agregue un nuevo control TextBox debajo del control DropDownList.</span><span class="sxs-lookup"><span data-stu-id="8e22e-289">In Source view of Default.aspx, add a new TextBox control below the DropDownList control.</span></span> <span data-ttu-id="8e22e-290">Cambie la propiedad ID de TextBox a txtProductName.</span><span class="sxs-lookup"><span data-stu-id="8e22e-290">Change the ID property of the TextBox to txtProductName.</span></span>
8. <span data-ttu-id="8e22e-291">En el TextBox control, agregue un nuevo Button control.</span><span class="sxs-lookup"><span data-stu-id="8e22e-291">Under the TextBox control, add a new Button control.</span></span> <span data-ttu-id="8e22e-292">Cambie la propiedad ID de Button a btnUpdate y la propiedad Text a **Update Product Name**.</span><span class="sxs-lookup"><span data-stu-id="8e22e-292">Change the ID property of the Button to btnUpdate and the Text property to **Update Product Name**.</span></span>
9. <span data-ttu-id="8e22e-293">En la vista Origen de Default.aspx, agregue una propiedad UpdateCommand y dos nuevos UpdateParameters a la etiqueta SqlDataSource de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="8e22e-293">In Source view of Default.aspx, add an UpdateCommand property and two new UpdateParameters to the SqlDataSource tag as follows:</span></span> 

    [!code-aspx[Main](data-source-controls/samples/sample9.aspx)]

    > [!NOTE]
    > <span data-ttu-id="8e22e-294">Tenga en cuenta que hay dos parámetros de actualización (ProductName y ProductID) agregados en este código.</span><span class="sxs-lookup"><span data-stu-id="8e22e-294">Note that there are two update parameters (ProductName and ProductID) added in this code.</span></span> <span data-ttu-id="8e22e-295">Estos parámetros se asignan a la Text propiedad de la txtProductName TextBox y el SelectedValue propiedad de la ddlProducts DropDownList.</span><span class="sxs-lookup"><span data-stu-id="8e22e-295">These parameters are mapped to the Text property of the txtProductName TextBox and the SelectedValue property of the ddlProducts DropDownList.</span></span>
10. <span data-ttu-id="8e22e-296">Cambie a la vista Diseño y haga doble clic en el control Button para agregar un controlador de eventos.</span><span class="sxs-lookup"><span data-stu-id="8e22e-296">Switch to Design view and double-click on the Button control to add an event handler.</span></span>
11. <span data-ttu-id="8e22e-297">Agregue el siguiente código al\_código btnUpdate Click:</span><span class="sxs-lookup"><span data-stu-id="8e22e-297">Add the following code to the btnUpdate\_Click code:</span></span> 

    [!code-csharp[Main](data-source-controls/samples/sample10.cs)]
12. <span data-ttu-id="8e22e-298">Haga clic con el botón derecho en Default.aspx y elija verlo en el explorador.</span><span class="sxs-lookup"><span data-stu-id="8e22e-298">Right-click on Default.aspx and choose to view it in the browser.</span></span> <span data-ttu-id="8e22e-299">Haga clic en Sí cuando se le pida que guarde todos los cambios.</span><span class="sxs-lookup"><span data-stu-id="8e22e-299">Click Yes when prompted to save all changes.</span></span>
13. <span data-ttu-id="8e22e-300">ASP.NET clases parciales 2.0 permiten la compilación en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="8e22e-300">ASP.NET 2.0 partial classes allow for compilation at runtime.</span></span> <span data-ttu-id="8e22e-301">No es necesario compilar una aplicación para que los cambios de código surtan efecto.</span><span class="sxs-lookup"><span data-stu-id="8e22e-301">It is not necessary to build an application in order to see code changes take effect.</span></span>
14. <span data-ttu-id="8e22e-302">Seleccione un producto de DropDownList.</span><span class="sxs-lookup"><span data-stu-id="8e22e-302">Select a product from the DropDownList.</span></span>
15. <span data-ttu-id="8e22e-303">Escriba un nuevo nombre para el producto seleccionado en el cuadro de texto y, a continuación, haga clic en el botón Actualizar.</span><span class="sxs-lookup"><span data-stu-id="8e22e-303">Enter a new name for the selected product in the TextBox and then click the Update button.</span></span>
16. <span data-ttu-id="8e22e-304">El nombre del producto se actualiza en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="8e22e-304">The product name is updated in the database.</span></span>

## <a name="exercise-3-using-the-objectdatasource-control"></a><span data-ttu-id="8e22e-305">Ejercicio 3 Uso del control ObjectDataSource</span><span class="sxs-lookup"><span data-stu-id="8e22e-305">Exercise 3 Using the ObjectDataSource Control</span></span>

<span data-ttu-id="8e22e-306">Este ejercicio demostrará cómo utilizar el ObjectDataSource control y un objeto de origen para interactuar con la base de datos Northwind.</span><span class="sxs-lookup"><span data-stu-id="8e22e-306">This exercise will demonstrate how to use the ObjectDataSource control and a source object to interact with the Northwind database.</span></span>

1. <span data-ttu-id="8e22e-307">Haga clic con el botón derecho en el proyecto en el Explorador de soluciones y haga clic en Agregar nuevo elemento.</span><span class="sxs-lookup"><span data-stu-id="8e22e-307">Right-click on the project in Solution Explorer and click on Add New Item.</span></span>
2. <span data-ttu-id="8e22e-308">Seleccione Formulario web en la lista de plantillas.</span><span class="sxs-lookup"><span data-stu-id="8e22e-308">Select Web Form in the templates list.</span></span> <span data-ttu-id="8e22e-309">Cambie el nombre a object.aspx y haga clic en Agregar.</span><span class="sxs-lookup"><span data-stu-id="8e22e-309">Change the name to object.aspx and click Add.</span></span>
3. <span data-ttu-id="8e22e-310">Haga clic con el botón derecho en el proyecto en el Explorador de soluciones y haga clic en Agregar nuevo elemento.</span><span class="sxs-lookup"><span data-stu-id="8e22e-310">Right-click on the project in Solution Explorer and click on Add New Item.</span></span>
4. <span data-ttu-id="8e22e-311">Seleccione Clase en la lista de plantillas.</span><span class="sxs-lookup"><span data-stu-id="8e22e-311">Select Class in the templates list.</span></span> <span data-ttu-id="8e22e-312">Cambie el nombre de la clase a NorthwindData.cs y haga clic en Agregar.</span><span class="sxs-lookup"><span data-stu-id="8e22e-312">Change the name of the class to NorthwindData.cs and click Add.</span></span>
5. <span data-ttu-id="8e22e-313">Haga clic en Sí cuando se le\_pida que agregue la clase a la carpeta Código de aplicación.</span><span class="sxs-lookup"><span data-stu-id="8e22e-313">Click Yes when prompted to add the class to the App\_Code folder.</span></span>
6. <span data-ttu-id="8e22e-314">Agregue el código siguiente al archivo NorthwindData.cs:</span><span class="sxs-lookup"><span data-stu-id="8e22e-314">Add the following code to the NorthwindData.cs file:</span></span> 

    [!code-csharp[Main](data-source-controls/samples/sample11.cs)]
7. <span data-ttu-id="8e22e-315">Agregue el código siguiente a la vista Origen de object.aspx:</span><span class="sxs-lookup"><span data-stu-id="8e22e-315">Add the following code to the Source view of object.aspx:</span></span> 

    [!code-aspx[Main](data-source-controls/samples/sample12.aspx)]
8. <span data-ttu-id="8e22e-316">Guarde todos los archivos y examine object.aspx.</span><span class="sxs-lookup"><span data-stu-id="8e22e-316">Save all files and browse object.aspx.</span></span>
9. <span data-ttu-id="8e22e-317">Interactúe con la interfaz viendo detalles, editando empleados, agregando empleados y eliminando empleados.</span><span class="sxs-lookup"><span data-stu-id="8e22e-317">Interact with the interface by viewing details, editing employees, adding employees, and deleting employees.</span></span>
