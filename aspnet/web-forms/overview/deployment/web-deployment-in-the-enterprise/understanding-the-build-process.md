---
uid: web-forms/overview/deployment/web-deployment-in-the-enterprise/understanding-the-build-process
title: Descripción del proceso de compilación | Microsoft Docs
author: jrjlee
description: En este tema se ofrece un tutorial de un proceso de compilación e implementación de escala empresarial. El enfoque descrito en este tema usa Engin personalizado de compilación de Microsoft...
ms.author: riande
ms.date: 05/04/2012
ms.assetid: 5b982451-547b-4a2f-a5dc-79bc64d84d40
msc.legacyurl: /web-forms/overview/deployment/web-deployment-in-the-enterprise/understanding-the-build-process
msc.type: authoredcontent
ms.openlocfilehash: 802d93f7ca987d018967275bae68b8c56d883a25
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 05/06/2019
ms.locfileid: "65130939"
---
# <a name="understanding-the-build-process"></a><span data-ttu-id="adaf6-104">Descripción del proceso de compilación</span><span class="sxs-lookup"><span data-stu-id="adaf6-104">Understanding the Build Process</span></span>

<span data-ttu-id="adaf6-105">por [Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="adaf6-105">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="adaf6-106">Descargar PDF</span><span class="sxs-lookup"><span data-stu-id="adaf6-106">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="adaf6-107">En este tema se ofrece un tutorial de un proceso de compilación e implementación de escala empresarial.</span><span class="sxs-lookup"><span data-stu-id="adaf6-107">This topic provides a walkthrough of an enterprise-scale build and deployment process.</span></span> <span data-ttu-id="adaf6-108">El enfoque descrito en este tema usa archivos de proyecto personalizados de Microsoft Build Engine (MSBuild) para proporcionar un mayor control sobre todos los aspectos del proceso.</span><span class="sxs-lookup"><span data-stu-id="adaf6-108">The approach described in this topic uses custom Microsoft Build Engine (MSBuild) project files to provide fine-grained control over every aspect of the process.</span></span> <span data-ttu-id="adaf6-109">Dentro de los archivos del proyecto, los destinos de MSBuild personalizados se utilizan para ejecutar utilidades de implementación como la herramienta de implementación de Web (MSDeploy.exe) de Internet Information Services (IIS) y la utilidad de implementación de la base de datos VSDBCMD.exe.</span><span class="sxs-lookup"><span data-stu-id="adaf6-109">Within the project files, custom MSBuild targets are used to run deployment utilities like the Internet Information Services (IIS) Web Deployment Tool (MSDeploy.exe) and the database deployment utility VSDBCMD.exe.</span></span>
> 
> > [!NOTE]
> > <span data-ttu-id="adaf6-110">El tema anterior, [descripción del archivo de proyecto](understanding-the-project-file.md), se describe los componentes clave de un archivo de proyecto de MSBuild e introdujo el concepto de división de archivos de proyecto para admitir la implementación en varios entornos de destino.</span><span class="sxs-lookup"><span data-stu-id="adaf6-110">The previous topic, [Understanding the Project File](understanding-the-project-file.md), described the key components of an MSBuild project file and introduced the concept of split project files to support deployment to multiple target environments.</span></span> <span data-ttu-id="adaf6-111">Si no ya está familiarizado con estos conceptos, debe revisar [descripción del archivo de proyecto](understanding-the-project-file.md) antes de trabajar en este tema.</span><span class="sxs-lookup"><span data-stu-id="adaf6-111">If you're not already familiar with these concepts, you should review [Understanding the Project File](understanding-the-project-file.md) before you work through this topic.</span></span>

<span data-ttu-id="adaf6-112">En este tema forma parte de una serie de tutoriales que se basa en los requisitos de implementación empresarial de una compañía ficticia denominada Fabrikam, Inc. Esta serie de tutoriales usa una solución de ejemplo&#x2014;el [solución Contact Manager](the-contact-manager-solution.md)&#x2014;para representar una aplicación web con un nivel realista de complejidad, incluida una aplicación ASP.NET MVC 3, una comunicación de Windows Servicio Foundation (WCF) y un proyecto de base de datos.</span><span class="sxs-lookup"><span data-stu-id="adaf6-112">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager solution](the-contact-manager-solution.md)&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="adaf6-113">El método de implementación en el corazón de estos tutoriales se basa en el enfoque de archivo de proyecto de división descrito en [descripción del archivo de proyecto](understanding-the-project-file.md), en que el proceso de compilación se controla mediante dos archivos de proyecto&#x2014;uno que contenga instrucciones que se aplican a todos los entornos de destino y que contiene la configuración de compilación e implementación específica del entorno de compilación.</span><span class="sxs-lookup"><span data-stu-id="adaf6-113">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Project File](understanding-the-project-file.md), in which the build process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="adaf6-114">En tiempo de compilación, se combina el archivo de proyecto específicos del entorno en el archivo de proyecto independiente del entorno para formar un conjunto completo de las instrucciones de compilación.</span><span class="sxs-lookup"><span data-stu-id="adaf6-114">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="build-and-deployment-overview"></a><span data-ttu-id="adaf6-115">Información general de implementación y compilación</span><span class="sxs-lookup"><span data-stu-id="adaf6-115">Build and Deployment Overview</span></span>

<span data-ttu-id="adaf6-116">En el [solución Contact Manager](the-contact-manager-solution.md), tres archivos controlan el proceso de compilación e implementación:</span><span class="sxs-lookup"><span data-stu-id="adaf6-116">In the [Contact Manager solution](the-contact-manager-solution.md), three files control the build and deployment process:</span></span>

- <span data-ttu-id="adaf6-117">Un *archivo de proyecto universal* (*Publish.proj*).</span><span class="sxs-lookup"><span data-stu-id="adaf6-117">A *universal project file* (*Publish.proj*).</span></span> <span data-ttu-id="adaf6-118">Este archivo contiene instrucciones de compilación e implementación que no cambian entre los entornos de destino.</span><span class="sxs-lookup"><span data-stu-id="adaf6-118">This contains build and deployment instructions that do not change between destination environments.</span></span>
- <span data-ttu-id="adaf6-119">Un *archivo de proyecto específicos del entorno* (*Env-Dev.proj*).</span><span class="sxs-lookup"><span data-stu-id="adaf6-119">An *environment-specific project file* (*Env-Dev.proj*).</span></span> <span data-ttu-id="adaf6-120">Esto contiene la configuración de compilación e implementación que es específicas de un entorno de destino determinado.</span><span class="sxs-lookup"><span data-stu-id="adaf6-120">This contains build and deployment settings that are specific to a particular destination environment.</span></span> <span data-ttu-id="adaf6-121">Por ejemplo, podría usar la *Env Dev.proj* archivo para proporcionar la configuración de un entorno de desarrollo o prueba y cree un archivo alternativo denominado *Env Stage.proj* proporcionar valores para un almacenamiento provisional entorno.</span><span class="sxs-lookup"><span data-stu-id="adaf6-121">For example, you could use the *Env-Dev.proj* file to provide settings for a developer or test environment and create an alternative file named *Env-Stage.proj* to provide settings for a staging environment.</span></span>
- <span data-ttu-id="adaf6-122">Un *archivo de comandos* (*publicar Dev.cmd*).</span><span class="sxs-lookup"><span data-stu-id="adaf6-122">A *command file* (*Publish-Dev.cmd*).</span></span> <span data-ttu-id="adaf6-123">Este archivo contiene un comando que especifica qué proyecto los archivos desea ejecutar de MSBuild.exe.</span><span class="sxs-lookup"><span data-stu-id="adaf6-123">This contains an MSBuild.exe command that specifies which project files you want to execute.</span></span> <span data-ttu-id="adaf6-124">Puede crear un archivo de comandos para cada entorno de destino, donde cada archivo contiene un comando de MSBuild.exe que especifica un archivo de proyecto específicos del entorno diferente.</span><span class="sxs-lookup"><span data-stu-id="adaf6-124">You can create a command file for every destination environment, where each file contains an MSBuild.exe command that specifies a different environment-specific project file.</span></span> <span data-ttu-id="adaf6-125">Esto permite al desarrollador implementar en distintos entornos simplemente al ejecutar el archivo de comando adecuado.</span><span class="sxs-lookup"><span data-stu-id="adaf6-125">This lets the developer deploy to different environments simply by running the appropriate command file.</span></span>

<span data-ttu-id="adaf6-126">En la solución de ejemplo, puede encontrar estos tres archivos en la carpeta de solución de publicación.</span><span class="sxs-lookup"><span data-stu-id="adaf6-126">In the sample solution, you can find these three files in the Publish solution folder.</span></span>

![](understanding-the-build-process/_static/image1.png)

<span data-ttu-id="adaf6-127">Antes de examinar estos archivos con más detalle, echemos un vistazo a cómo el proceso de compilación general funciona cuando se usa este enfoque.</span><span class="sxs-lookup"><span data-stu-id="adaf6-127">Before you look at these files in more detail, let's take a look at how the overall build process works when you use this approach.</span></span> <span data-ttu-id="adaf6-128">En un nivel alto, el proceso de compilación e implementación tiene este aspecto:</span><span class="sxs-lookup"><span data-stu-id="adaf6-128">At a high level, the build and deployment process looks like this:</span></span>

![](understanding-the-build-process/_static/image2.png)

<span data-ttu-id="adaf6-129">Lo primero que ocurre es que los dos archivos de proyecto&#x2014;uno que contiene las instrucciones de compilación e implementación universales y otro que contiene configuración específica del entorno&#x2014;se combinan en un único archivo de proyecto.</span><span class="sxs-lookup"><span data-stu-id="adaf6-129">The first thing that happens is that the two project files&#x2014;one containing universal build and deployment instructions, and one containing environment-specific settings&#x2014;are merged into a single project file.</span></span> <span data-ttu-id="adaf6-130">MSBuild, a continuación, funciona a través de las instrucciones que aparecen en el archivo de proyecto.</span><span class="sxs-lookup"><span data-stu-id="adaf6-130">MSBuild then works through the instructions in the project file.</span></span> <span data-ttu-id="adaf6-131">Crea cada uno de los proyectos de la solución, utilizando el archivo de proyecto para cada proyecto.</span><span class="sxs-lookup"><span data-stu-id="adaf6-131">It builds each of the projects in the solution, using the project file for each project.</span></span> <span data-ttu-id="adaf6-132">A continuación, llama a otras herramientas, como Web Deploy (MSDeploy.exe) y la utilidad VSDBCMD para implementar el contenido web y bases de datos en el entorno de destino.</span><span class="sxs-lookup"><span data-stu-id="adaf6-132">It then calls out to other tools, like Web Deploy (MSDeploy.exe) and the VSDBCMD utility to deploy your web content and databases to the target environment.</span></span>

<span data-ttu-id="adaf6-133">De principio a fin, el proceso de compilación e implementación realiza estas tareas:</span><span class="sxs-lookup"><span data-stu-id="adaf6-133">From start to finish, the build and deployment process performs these tasks:</span></span>

1. <span data-ttu-id="adaf6-134">Elimina el contenido del directorio de salida, como preparación para una compilación nueva.</span><span class="sxs-lookup"><span data-stu-id="adaf6-134">It deletes the contents of the output directory, in preparation for a fresh build.</span></span>
2. <span data-ttu-id="adaf6-135">Se compila cada proyecto de la solución:</span><span class="sxs-lookup"><span data-stu-id="adaf6-135">It builds each project in the solution:</span></span>

    1. <span data-ttu-id="adaf6-136">Para proyectos web&#x2014;en este caso, una aplicación web MVC de ASP.NET y WCF web service&#x2014;el proceso de compilación crea un paquete de implementación web para cada proyecto.</span><span class="sxs-lookup"><span data-stu-id="adaf6-136">For web projects&#x2014;in this case, an ASP.NET MVC web application and a WCF web service&#x2014;the build process creates a web deployment package for each project.</span></span>
    2. <span data-ttu-id="adaf6-137">Para los proyectos de base de datos, el proceso de compilación crea un manifiesto de implementación (archivo .deploymanifest) para cada proyecto.</span><span class="sxs-lookup"><span data-stu-id="adaf6-137">For database projects, the build process creates a deployment manifest (.deploymanifest file) for each project.</span></span>
3. <span data-ttu-id="adaf6-138">Usa la utilidad VSDBCMD.exe para implementar cada proyecto de base de datos de la solución, con distintas propiedades de los archivos de proyecto&#x2014;una cadena de conexión de destino y un nombre de base de datos&#x2014;junto con el archivo .deploymanifest.</span><span class="sxs-lookup"><span data-stu-id="adaf6-138">It uses the VSDBCMD.exe utility to deploy each database project in the solution, using various properties from the project files&#x2014;a target connection string and a database name&#x2014;together with the .deploymanifest file.</span></span>
4. <span data-ttu-id="adaf6-139">Usa la utilidad MSDeploy.exe para implementar cada proyecto web en la solución, usando las distintas propiedades de los archivos de proyecto para controlar el proceso de implementación.</span><span class="sxs-lookup"><span data-stu-id="adaf6-139">It uses the MSDeploy.exe utility to deploy each web project in the solution, using various properties from the project files to control the deployment process.</span></span>

<span data-ttu-id="adaf6-140">Puede usar la solución de ejemplo para realizar un seguimiento de este proceso con más detalle.</span><span class="sxs-lookup"><span data-stu-id="adaf6-140">You can use the sample solution to trace this process in more detail.</span></span>

> [!NOTE]
> <span data-ttu-id="adaf6-141">Para obtener instrucciones sobre cómo personalizar los archivos de proyecto específicos del entorno para sus propios entornos de servidor, consulte [configurar propiedades de implementación de un entorno de destino](../configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment.md).</span><span class="sxs-lookup"><span data-stu-id="adaf6-141">For guidance on how to customize the environment-specific project files for your own server environments, see [Configure Deployment Properties for a Target Environment](../configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment.md).</span></span>

## <a name="invoking-the-build-and-deployment-process"></a><span data-ttu-id="adaf6-142">Invocar el proceso de implementación y compilación</span><span class="sxs-lookup"><span data-stu-id="adaf6-142">Invoking the Build and Deployment Process</span></span>

<span data-ttu-id="adaf6-143">Para implementar la solución Contact Manager en un entorno de prueba para desarrolladores, el programador ejecuta la *publicar Dev.cmd* archivo de comandos.</span><span class="sxs-lookup"><span data-stu-id="adaf6-143">To deploy the Contact Manager solution to a developer test environment, the developer runs the *Publish-Dev.cmd* command file.</span></span> <span data-ttu-id="adaf6-144">Esto invoca MSBuild.exe, especificar *Publish.proj* como para ejecutar el archivo de proyecto y *Env Dev.proj* como valor de parámetro.</span><span class="sxs-lookup"><span data-stu-id="adaf6-144">This invokes MSBuild.exe, specifying *Publish.proj* as the project file to execute and *Env-Dev.proj* as a parameter value.</span></span>

[!code-console[Main](understanding-the-build-process/samples/sample1.cmd)]

> [!NOTE]
> <span data-ttu-id="adaf6-145">El **/fl** cambiar (abreviatura de **/fileLogger**) registra la salida de compilación en un archivo denominado *msbuild.log* en el directorio actual.</span><span class="sxs-lookup"><span data-stu-id="adaf6-145">The **/fl** switch (short for **/fileLogger**) logs the build output to a file named *msbuild.log* in the current directory.</span></span> <span data-ttu-id="adaf6-146">Para obtener más información, consulte el [referencia de línea de comandos de MSBuild](https://msdn.microsoft.com/library/ms164311.aspx).</span><span class="sxs-lookup"><span data-stu-id="adaf6-146">For more information, see the [MSBuild Command Line Reference](https://msdn.microsoft.com/library/ms164311.aspx).</span></span>

<span data-ttu-id="adaf6-147">En este momento, MSBuild comienza a ejecutarse, carga el *Publish.proj* archivo y empieza a procesar las instrucciones dentro de él.</span><span class="sxs-lookup"><span data-stu-id="adaf6-147">At this point, MSBuild starts running, loads the *Publish.proj* file, and starts processing the instructions within it.</span></span> <span data-ttu-id="adaf6-148">La primera instrucción indica a MSBuild para importar el proyecto de archivos que el **TargetEnvPropsFile** especifica el parámetro.</span><span class="sxs-lookup"><span data-stu-id="adaf6-148">The first instruction tells MSBuild to import the project file that the **TargetEnvPropsFile** parameter specifies.</span></span>

[!code-xml[Main](understanding-the-build-process/samples/sample2.xml)]

<span data-ttu-id="adaf6-149">El **TargetEnvPropsFile** parámetro especifica el *Env Dev.proj* de archivos, por lo que MSBuild combina el contenido de la *Env Dev.proj* el archivo en el  *Publish.proj* archivo.</span><span class="sxs-lookup"><span data-stu-id="adaf6-149">The **TargetEnvPropsFile** parameter specifies the *Env-Dev.proj* file, so MSBuild merges the contents of the *Env-Dev.proj* file into the *Publish.proj* file.</span></span>

<span data-ttu-id="adaf6-150">Los siguientes elementos MSBuild que se encuentra en el archivo de proyecto combinadas son grupos de propiedades.</span><span class="sxs-lookup"><span data-stu-id="adaf6-150">The next elements that MSBuild encounters in the merged project file are property groups.</span></span> <span data-ttu-id="adaf6-151">Las propiedades se procesan en el orden en que aparecen en el archivo.</span><span class="sxs-lookup"><span data-stu-id="adaf6-151">Properties are processed in the order in which they appear in the file.</span></span> <span data-ttu-id="adaf6-152">MSBuild crea un par de clave y valor para cada propiedad, que proporciona que se cumplen las condiciones especificadas.</span><span class="sxs-lookup"><span data-stu-id="adaf6-152">MSBuild creates a key-value pair for each property, providing that any specified conditions are met.</span></span> <span data-ttu-id="adaf6-153">Las propiedades definidas más adelante en el archivo sobrescribirá todas las propiedades con el mismo nombre que definió anteriormente en el archivo.</span><span class="sxs-lookup"><span data-stu-id="adaf6-153">Properties defined later in the file will overwrite any properties with the same name defined earlier in the file.</span></span> <span data-ttu-id="adaf6-154">Por ejemplo, considere la **OutputRoot** propiedades.</span><span class="sxs-lookup"><span data-stu-id="adaf6-154">For example, consider the **OutputRoot** properties.</span></span>

[!code-xml[Main](understanding-the-build-process/samples/sample3.xml)]

<span data-ttu-id="adaf6-155">Cuando MSBuild procesa la primera **OutputRoot** elemento, que proporciona un parámetro con el mismo nombre no se ha proporcionado, Establece el valor de la **OutputRoot** propiedad **... \Publish\Out**. Cuando encuentra el segundo **OutputRoot** elemento, si la condición se evalúa como **true**, sobrescribirá el valor de la **OutputRoot** propiedad con el valor de la **OutDir** parámetro.</span><span class="sxs-lookup"><span data-stu-id="adaf6-155">When MSBuild processes the first **OutputRoot** element, providing a similarly named parameter has not been provided, it sets the value of the **OutputRoot** property to **..\Publish\Out**. When it encounters the second **OutputRoot** element, if the condition evaluates to **true**, it will overwrite the value of the **OutputRoot** property with the value of the **OutDir** parameter.</span></span>

<span data-ttu-id="adaf6-156">El siguiente elemento que se encuentra MSBuild es un grupo de elemento único, que contiene un elemento denominado **ProjectsToBuild**.</span><span class="sxs-lookup"><span data-stu-id="adaf6-156">The next element that MSBuild encounters is a single item group, containing an item named **ProjectsToBuild**.</span></span>

[!code-xml[Main](understanding-the-build-process/samples/sample4.xml)]

<span data-ttu-id="adaf6-157">MSBuild procesa esta instrucción mediante la creación de una lista de elementos denominada **ProjectsToBuild**.</span><span class="sxs-lookup"><span data-stu-id="adaf6-157">MSBuild processes this instruction by building an item list named **ProjectsToBuild**.</span></span> <span data-ttu-id="adaf6-158">En este caso, la lista de elementos contiene un único valor&#x2014;la ruta de acceso y el nombre del archivo de solución.</span><span class="sxs-lookup"><span data-stu-id="adaf6-158">In this case, the item list contains a single value&#x2014;the path and filename of the solution file.</span></span>

<span data-ttu-id="adaf6-159">En este momento, los elementos restantes son objetivos.</span><span class="sxs-lookup"><span data-stu-id="adaf6-159">At this point, the remaining elements are targets.</span></span> <span data-ttu-id="adaf6-160">Destinos se procesan de forma diferente de propiedades y elementos&#x2014;básicamente, los destinos no se procesan a menos que se explícitamente especificados por el usuario o invocados por otra construcción dentro del archivo de proyecto.</span><span class="sxs-lookup"><span data-stu-id="adaf6-160">Targets are processed differently from properties and items&#x2014;essentially, targets are not processed unless they are either explicitly specified by the user or invoked by another construct within the project file.</span></span> <span data-ttu-id="adaf6-161">Recuerde que la apertura **proyecto** etiqueta incluye un **DefaultTargets** atributo.</span><span class="sxs-lookup"><span data-stu-id="adaf6-161">Recall that the opening **Project** tag includes a **DefaultTargets** attribute.</span></span>

[!code-xml[Main](understanding-the-build-process/samples/sample5.xml)]

<span data-ttu-id="adaf6-162">Esto indica a MSBuild que invoque el **FullPublish** destino, si los destinos no están especificados cuando se invoca MSBuild.exe.</span><span class="sxs-lookup"><span data-stu-id="adaf6-162">This instructs MSBuild to invoke the **FullPublish** target, if targets are not specified when MSBuild.exe is invoked.</span></span> <span data-ttu-id="adaf6-163">El **FullPublish** destino no contiene ninguna tarea; en su lugar, simplemente especifica una lista de dependencias.</span><span class="sxs-lookup"><span data-stu-id="adaf6-163">The **FullPublish** target doesn't contain any tasks; instead it simply specifies a list of dependencies.</span></span>

[!code-xml[Main](understanding-the-build-process/samples/sample6.xml)]

<span data-ttu-id="adaf6-164">Esta dependencia indica a MSBuild que la fecha en orden para ejecutar el **FullPublish** destino, debe invocar esta lista de destinos en el orden indicado:</span><span class="sxs-lookup"><span data-stu-id="adaf6-164">This dependency tells MSBuild that in order to execute the **FullPublish** target, it needs to invoke this list of targets in the order provided:</span></span>

1. <span data-ttu-id="adaf6-165">Se debe invocar el **Clean** destino.</span><span class="sxs-lookup"><span data-stu-id="adaf6-165">It must invoke the **Clean** target.</span></span>
2. <span data-ttu-id="adaf6-166">Se debe invocar el **BuildProjects** destino.</span><span class="sxs-lookup"><span data-stu-id="adaf6-166">It must invoke the **BuildProjects** target.</span></span>
3. <span data-ttu-id="adaf6-167">Se debe invocar el **GatherPackagesForPublishing** destino.</span><span class="sxs-lookup"><span data-stu-id="adaf6-167">It must invoke the **GatherPackagesForPublishing** target.</span></span>
4. <span data-ttu-id="adaf6-168">Se debe invocar el **PublishDbPackages** destino.</span><span class="sxs-lookup"><span data-stu-id="adaf6-168">It must invoke the **PublishDbPackages** target.</span></span>
5. <span data-ttu-id="adaf6-169">Se debe invocar el **PublishWebPackages** destino.</span><span class="sxs-lookup"><span data-stu-id="adaf6-169">It must invoke the **PublishWebPackages** target.</span></span>

### <a name="the-clean-target"></a><span data-ttu-id="adaf6-170">El destino Clean</span><span class="sxs-lookup"><span data-stu-id="adaf6-170">The Clean Target</span></span>

<span data-ttu-id="adaf6-171">El **Clean** destino básicamente elimina el directorio de salida y todo su contenido, como preparación para una compilación nueva.</span><span class="sxs-lookup"><span data-stu-id="adaf6-171">The **Clean** target basically deletes the output directory and all its contents, as preparation for a fresh build.</span></span>

[!code-xml[Main](understanding-the-build-process/samples/sample7.xml)]

<span data-ttu-id="adaf6-172">Tenga en cuenta que el destino incluye un **ItemGroup** elemento.</span><span class="sxs-lookup"><span data-stu-id="adaf6-172">Notice that the target includes an **ItemGroup** element.</span></span> <span data-ttu-id="adaf6-173">Al definir las propiedades o elementos dentro de un **destino** elemento, que está creando *dinámica* propiedades y elementos.</span><span class="sxs-lookup"><span data-stu-id="adaf6-173">When you define properties or items within a **Target** element, you're creating *dynamic* properties and items.</span></span> <span data-ttu-id="adaf6-174">En otras palabras, las propiedades o elementos no se procesan hasta que se ejecuta el destino.</span><span class="sxs-lookup"><span data-stu-id="adaf6-174">In other words, the properties or items aren't processed until the target is executed.</span></span> <span data-ttu-id="adaf6-175">El directorio de salida no existe o contiene archivos hasta que comience el proceso de compilación, lo que no se puede compilar el  **\_FilesToDelete** lista como un elemento estático; tendrá que esperar hasta que se están llevando a cabo la ejecución.</span><span class="sxs-lookup"><span data-stu-id="adaf6-175">The output directory might not exist or contain any files until the build process begins, so you can't build the **\_FilesToDelete** list as a static item; you have to wait until execution is underway.</span></span> <span data-ttu-id="adaf6-176">Por lo tanto, se crea la lista como un elemento dinámico dentro del destino.</span><span class="sxs-lookup"><span data-stu-id="adaf6-176">As such, you build the list as a dynamic item within the target.</span></span>

> [!NOTE]
> <span data-ttu-id="adaf6-177">En este caso, porque el **Clean** destino es la primera que se ejecuta, no es necesario usar un grupo de elementos dinámicos real.</span><span class="sxs-lookup"><span data-stu-id="adaf6-177">In this case, because the **Clean** target is the first to be executed, there's no real need to use a dynamic item group.</span></span> <span data-ttu-id="adaf6-178">Sin embargo, es recomendable usar las propiedades dinámicas y los elementos en este tipo de escenario, como es posible que desee ejecutar los destinos en un orden diferente en algún momento.</span><span class="sxs-lookup"><span data-stu-id="adaf6-178">However, it's good practice to use dynamic properties and items in this type of scenario, as you might want to execute targets in a different order at some point.</span></span>  
> <span data-ttu-id="adaf6-179">También debe tratar de evitar la declaración de elementos que nunca se usará.</span><span class="sxs-lookup"><span data-stu-id="adaf6-179">You should also aim to avoid declaring items that will never be used.</span></span> <span data-ttu-id="adaf6-180">Si tiene elementos que se usará sólo por un destino concreto, considere la posibilidad de colocarlas dentro del destino para quitar cualquier sobrecarga innecesaria en el proceso de compilación.</span><span class="sxs-lookup"><span data-stu-id="adaf6-180">If you have items that will only be used by a specific target, consider placing them inside the target to remove any unnecessary overhead on the build process.</span></span>

<span data-ttu-id="adaf6-181">Dinámica de elementos, el **Clean** destino es bastante sencillo y hace uso de los integrados **mensaje**, **eliminar**, y **RemoveDir**tareas para:</span><span class="sxs-lookup"><span data-stu-id="adaf6-181">Dynamic items aside, the **Clean** target is fairly straightforward and makes use of the built-in **Message**, **Delete**, and **RemoveDir** tasks to:</span></span>

1. <span data-ttu-id="adaf6-182">Enviar un mensaje al registrador.</span><span class="sxs-lookup"><span data-stu-id="adaf6-182">Send a message to the logger.</span></span>
2. <span data-ttu-id="adaf6-183">Crear una lista de archivos que desea eliminar.</span><span class="sxs-lookup"><span data-stu-id="adaf6-183">Build a list of files to delete.</span></span>
3. <span data-ttu-id="adaf6-184">Elimine los archivos.</span><span class="sxs-lookup"><span data-stu-id="adaf6-184">Delete the files.</span></span>
4. <span data-ttu-id="adaf6-185">Quite el directorio de salida.</span><span class="sxs-lookup"><span data-stu-id="adaf6-185">Remove the output directory.</span></span>

### <a name="the-buildprojects-target"></a><span data-ttu-id="adaf6-186">El destino BuildProjects</span><span class="sxs-lookup"><span data-stu-id="adaf6-186">The BuildProjects Target</span></span>

<span data-ttu-id="adaf6-187">El **BuildProjects** destino básicamente crea todos los proyectos de la solución de ejemplo.</span><span class="sxs-lookup"><span data-stu-id="adaf6-187">The **BuildProjects** target basically builds all the projects in the sample solution.</span></span>

[!code-xml[Main](understanding-the-build-process/samples/sample8.xml)]

<span data-ttu-id="adaf6-188">Este destino se ha descrito en detalle en el tema anterior, [descripción del archivo de proyecto](understanding-the-project-file.md), para ilustrar cómo tareas y destinos de hacer referencia a propiedades y elementos.</span><span class="sxs-lookup"><span data-stu-id="adaf6-188">This target was described in some detail in the previous topic, [Understanding the Project File](understanding-the-project-file.md), to illustrate how tasks and targets reference properties and items.</span></span> <span data-ttu-id="adaf6-189">En este momento, le interesa principalmente la **MSBuild** tarea.</span><span class="sxs-lookup"><span data-stu-id="adaf6-189">At this point, you're mainly interested in the **MSBuild** task.</span></span> <span data-ttu-id="adaf6-190">Puede usar esta tarea para compilar varios proyectos.</span><span class="sxs-lookup"><span data-stu-id="adaf6-190">You can use this task to build multiple projects.</span></span> <span data-ttu-id="adaf6-191">La tarea no crea una nueva instancia de MSBuild.exe; usa la instancia en ejecución actual para cada proyecto de compilación.</span><span class="sxs-lookup"><span data-stu-id="adaf6-191">The task does not create a new instance of MSBuild.exe; it uses the current running instance to build each project.</span></span> <span data-ttu-id="adaf6-192">Los puntos clave de interés en este ejemplo son las propiedades de implementación:</span><span class="sxs-lookup"><span data-stu-id="adaf6-192">The key points of interest in this example are the deployment properties:</span></span>

- <span data-ttu-id="adaf6-193">El **DeployOnBuild** propiedad indica a MSBuild para ejecutar las instrucciones de implementación en la configuración del proyecto una vez completada la compilación de cada proyecto.</span><span class="sxs-lookup"><span data-stu-id="adaf6-193">The **DeployOnBuild** property instructs MSBuild to run any deployment instructions in the project settings when the build of each project is complete.</span></span>
- <span data-ttu-id="adaf6-194">El **DeployTarget** propiedad identifica el destino que desea invocar una vez compilado el proyecto.</span><span class="sxs-lookup"><span data-stu-id="adaf6-194">The **DeployTarget** property identifies the target that you want to invoke after the project is built.</span></span> <span data-ttu-id="adaf6-195">En este caso, el **paquete** destino genera el resultado del proyecto en un paquete de web que se puede implementar.</span><span class="sxs-lookup"><span data-stu-id="adaf6-195">In this case, the **Package** target builds the project output into a deployable web package.</span></span>

> [!NOTE]
> <span data-ttu-id="adaf6-196">El **paquete** destino llama a la Web Publishing canalización (WPP), que proporciona la integración entre MSBuild y Web Deploy.</span><span class="sxs-lookup"><span data-stu-id="adaf6-196">The **Package** target invokes the Web Publishing Pipeline (WPP), which provides integration between MSBuild and Web Deploy.</span></span> <span data-ttu-id="adaf6-197">Si desea Eche un vistazo a los destinos integrados que proporciona el WPP, revise el *Microsoft.Web.Publishing.targets* archivo en la carpeta de %\MSBuild\Microsoft\VisualStudio\v10.0\Web % PROGRAMFILES (x 86).</span><span class="sxs-lookup"><span data-stu-id="adaf6-197">If you want to take a look at the built-in targets that the WPP provides, review the *Microsoft.Web.Publishing.targets* file in the %PROGRAMFILES(x86)%\MSBuild\Microsoft\VisualStudio\v10.0\Web folder.</span></span>

### <a name="the-gatherpackagesforpublishing-target"></a><span data-ttu-id="adaf6-198">El destino GatherPackagesForPublishing</span><span class="sxs-lookup"><span data-stu-id="adaf6-198">The GatherPackagesForPublishing Target</span></span>

<span data-ttu-id="adaf6-199">Si analiza el **GatherPackagesForPublishing** destino, observará que no contiene realmente ninguna tarea.</span><span class="sxs-lookup"><span data-stu-id="adaf6-199">If you study the **GatherPackagesForPublishing** target, you'll notice that it doesn't actually contain any tasks.</span></span> <span data-ttu-id="adaf6-200">En su lugar, contiene un grupo de elementos único que define tres elementos dinámicos.</span><span class="sxs-lookup"><span data-stu-id="adaf6-200">Instead, it contains a single item group that defines three dynamic items.</span></span>

[!code-xml[Main](understanding-the-build-process/samples/sample9.xml)]

<span data-ttu-id="adaf6-201">Estos elementos hacen referencia a los paquetes de implementación que se crearon cuando la **BuildProjects** se ha ejecutado el destino.</span><span class="sxs-lookup"><span data-stu-id="adaf6-201">These items refer to the deployment packages that were created when the **BuildProjects** target was executed.</span></span> <span data-ttu-id="adaf6-202">No se pudo define estos elementos estáticamente en el archivo de proyecto, ya que no existen los archivos a los que hacen referencia los elementos hasta que el **BuildProjects** se ejecuta el destino.</span><span class="sxs-lookup"><span data-stu-id="adaf6-202">You couldn't define these items statically in the project file, because the files to which the items refer don't exist until the **BuildProjects** target is executed.</span></span> <span data-ttu-id="adaf6-203">En su lugar, los elementos deben estar definidos dinámicamente en un destino que no se invoca hasta después de la **BuildProjects** se ejecuta el destino.</span><span class="sxs-lookup"><span data-stu-id="adaf6-203">Instead, the items must be defined dynamically within a target that is not invoked until after the **BuildProjects** target is executed.</span></span>

<span data-ttu-id="adaf6-204">No se usan los elementos dentro de este destino&#x2014;este destino basa simplemente los elementos y los metadatos asociados con cada valor del elemento.</span><span class="sxs-lookup"><span data-stu-id="adaf6-204">The items are not used within this target&#x2014;this target simply builds the items and the metadata associated with each item value.</span></span> <span data-ttu-id="adaf6-205">Una vez que se procesan estos elementos, el **PublishPackages** elemento contendrá dos valores, la ruta de acceso a la *ContactManager.Mvc.deploy.cmd* archivo y la ruta de acceso a la  *ContactManager.Service.deploy.cmd* archivo.</span><span class="sxs-lookup"><span data-stu-id="adaf6-205">Once these elements are processed, the **PublishPackages** item will contain two values, the path to the *ContactManager.Mvc.deploy.cmd* file and the path to the *ContactManager.Service.deploy.cmd* file.</span></span> <span data-ttu-id="adaf6-206">Web Deploy crea estos archivos como parte del paquete para cada proyecto web, y estos son los archivos que se deben invocar en el servidor de destino con el fin de implementar los paquetes.</span><span class="sxs-lookup"><span data-stu-id="adaf6-206">Web Deploy creates these files as part of the web package for each project, and these are the files that you must invoke on the destination server in order to deploy the packages.</span></span> <span data-ttu-id="adaf6-207">Si abre uno de estos archivos, básicamente, verá un comando MSDeploy.exe con distintos valores de parámetro de compilación específica.</span><span class="sxs-lookup"><span data-stu-id="adaf6-207">If you open up one of these files, you'll basically see an MSDeploy.exe command with various build-specific parameter values.</span></span>

<span data-ttu-id="adaf6-208">El **DbPublishPackages** elemento contendrá un valor único, la ruta de acceso a la *ContactManager.Database.deploymanifest* archivo.</span><span class="sxs-lookup"><span data-stu-id="adaf6-208">The **DbPublishPackages** item will contain a single value, the path to the *ContactManager.Database.deploymanifest* file.</span></span>

> [!NOTE]
> <span data-ttu-id="adaf6-209">Un archivo .deploymanifest se genera cuando se compila un proyecto de base de datos y usa el mismo esquema como un archivo de proyecto de MSBuild.</span><span class="sxs-lookup"><span data-stu-id="adaf6-209">A .deploymanifest file is generated when you build a database project, and it uses the same schema as an MSBuild project file.</span></span> <span data-ttu-id="adaf6-210">Contiene toda la información necesaria para implementar una base de datos, incluidos los detalles de los scripts anteriores y posteriores a la implementación y la ubicación del esquema de base de datos (.dbschema).</span><span class="sxs-lookup"><span data-stu-id="adaf6-210">It contains all the information required to deploy a database, including the location of the database schema (.dbschema) and details of any pre-deployment and post-deployment scripts.</span></span> <span data-ttu-id="adaf6-211">Para obtener más información, consulte [una visión general de base de datos de compilación e implementación de](https://msdn.microsoft.com/library/aa833165.aspx).</span><span class="sxs-lookup"><span data-stu-id="adaf6-211">For more information, see [An Overview of Database Build and Deployment](https://msdn.microsoft.com/library/aa833165.aspx).</span></span>

<span data-ttu-id="adaf6-212">Aprenderá más acerca de cómo los paquetes de implementación y manifiestos de implementación de la base de datos se crean y utilizan en [compilar y empaquetar proyectos de aplicación Web](building-and-packaging-web-application-projects.md) y [implementar proyectos de base de datos](deploying-database-projects.md).</span><span class="sxs-lookup"><span data-stu-id="adaf6-212">You'll learn more about how deployment packages and database deployment manifests are created and used in [Building and Packaging Web Application Projects](building-and-packaging-web-application-projects.md) and [Deploying Database Projects](deploying-database-projects.md).</span></span>

### <a name="the-publishdbpackages-target"></a><span data-ttu-id="adaf6-213">El destino PublishDbPackages</span><span class="sxs-lookup"><span data-stu-id="adaf6-213">The PublishDbPackages Target</span></span>

<span data-ttu-id="adaf6-214">Hablar brevemente, la **PublishDbPackages** destino llama a la utilidad VSDBCMD para implementar la **ContactManager** base de datos en un entorno de destino.</span><span class="sxs-lookup"><span data-stu-id="adaf6-214">Briefly speaking, the **PublishDbPackages** target invokes the VSDBCMD utility to deploy the **ContactManager** database to a target environment.</span></span> <span data-ttu-id="adaf6-215">Configuración de la implementación de la base de datos implica una gran cantidad de decisiones y los matices y obtendrá más información al respecto en [implementar proyectos de base de datos](deploying-database-projects.md) y [personalizar implementaciones de base de datos para varios entornos](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span><span class="sxs-lookup"><span data-stu-id="adaf6-215">Configuring database deployment involves lots of decisions and nuances, and you'll learn more about this in [Deploying Database Projects](deploying-database-projects.md) and [Customizing Database Deployments for Multiple Environments](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span></span> <span data-ttu-id="adaf6-216">En este tema, nos centraremos en cómo funciona realmente este destino.</span><span class="sxs-lookup"><span data-stu-id="adaf6-216">In this topic, we'll focus on how this target actually functions.</span></span>

<span data-ttu-id="adaf6-217">En primer lugar, observe que la etiqueta de apertura incluye un **salidas** atributo.</span><span class="sxs-lookup"><span data-stu-id="adaf6-217">First, notice that the opening tag includes an **Outputs** attribute.</span></span>

[!code-xml[Main](understanding-the-build-process/samples/sample10.xml)]

<span data-ttu-id="adaf6-218">Este es un ejemplo de *procesamiento por lotes de destino*.</span><span class="sxs-lookup"><span data-stu-id="adaf6-218">This is an example of *target batching*.</span></span> <span data-ttu-id="adaf6-219">En los archivos de proyecto de MSBuild, el procesamiento por lotes es una técnica para recorrer en iteración colecciones.</span><span class="sxs-lookup"><span data-stu-id="adaf6-219">In MSBuild project files, batching is a technique for iterating over collections.</span></span> <span data-ttu-id="adaf6-220">El valor de la **salidas** atributo, **"% (DbPublishPackages.Identity)"**, hace referencia a la **identidad** propiedad de metadatos de la **DbPublishPackages**  lista de elementos.</span><span class="sxs-lookup"><span data-stu-id="adaf6-220">The value of the **Outputs** attribute, **"%(DbPublishPackages.Identity)"**, refers to the **Identity** metadata property of the **DbPublishPackages** item list.</span></span> <span data-ttu-id="adaf6-221">Esta notación, \**Outputs=%\*\*\*(ItemList.ItemMetadataName)*, se traduce como:</span><span class="sxs-lookup"><span data-stu-id="adaf6-221">This notation, \**Outputs=%\*\*\*(ItemList.ItemMetadataName)*, is translated as:</span></span>

- <span data-ttu-id="adaf6-222">Dividir los elementos de **DbPublishPackages** en lotes de elementos que contienen los mismos **identidad** valor de metadatos.</span><span class="sxs-lookup"><span data-stu-id="adaf6-222">Split the items in **DbPublishPackages** into batches of items that contain the same **Identity** metadata value.</span></span>
- <span data-ttu-id="adaf6-223">Ejecutar el destino de una vez por lote.</span><span class="sxs-lookup"><span data-stu-id="adaf6-223">Execute the target once per batch.</span></span>

> [!NOTE]
> <span data-ttu-id="adaf6-224">**Identidad** es uno de los [valores de metadatos integradas](https://msdn.microsoft.com/library/ms164313.aspx) que se asigna a cada elemento en la creación.</span><span class="sxs-lookup"><span data-stu-id="adaf6-224">**Identity** is one of the [built-in metadata values](https://msdn.microsoft.com/library/ms164313.aspx) that is assigned to every item on creation.</span></span> <span data-ttu-id="adaf6-225">Hace referencia al valor de la **Include** atributo en el **elemento** elemento&#x2014;en otras palabras, la ruta de acceso y el nombre del elemento.</span><span class="sxs-lookup"><span data-stu-id="adaf6-225">It refers to the value of the **Include** attribute in the **Item** element&#x2014;in other words, the path and filename of the item.</span></span>

<span data-ttu-id="adaf6-226">En este caso, dado que nunca debería haber más de un elemento con la misma ruta de acceso y nombre de archivo, básicamente estamos trabajando con tamaños de lote de uno.</span><span class="sxs-lookup"><span data-stu-id="adaf6-226">In this case, because there should never be more than one item with the same path and filename, we're essentially working with batch sizes of one.</span></span> <span data-ttu-id="adaf6-227">El destino se ejecuta una vez para cada paquete de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="adaf6-227">The target is executed once for every database package.</span></span>

<span data-ttu-id="adaf6-228">Puede ver una notación similar en el  **\_Cmd** propiedad, que se basa en un comando VSDBCMD con los modificadores adecuados.</span><span class="sxs-lookup"><span data-stu-id="adaf6-228">You can see a similar notation in the **\_Cmd** property, which builds a VSDBCMD command with the appropriate switches.</span></span>

[!code-xml[Main](understanding-the-build-process/samples/sample11.xml)]

<span data-ttu-id="adaf6-229">En este caso, **%(DbPublishPackages.DatabaseConnectionString)**, **%(DbPublishPackages.TargetDatabase)**, y **%(DbPublishPackages.FullPath)** todas hacen referencia a los valores de metadatos de la **DbPublishPackages** colección de elementos.</span><span class="sxs-lookup"><span data-stu-id="adaf6-229">In this case, **%(DbPublishPackages.DatabaseConnectionString)**, **%(DbPublishPackages.TargetDatabase)**, and **%(DbPublishPackages.FullPath)** all refer to metadata values of the **DbPublishPackages** item collection.</span></span> <span data-ttu-id="adaf6-230">El  **\_Cmd** propiedad la usa el **Exec** tarea, que invoca el comando.</span><span class="sxs-lookup"><span data-stu-id="adaf6-230">The **\_Cmd** property is used by the **Exec** task, which invokes the command.</span></span>

[!code-xml[Main](understanding-the-build-process/samples/sample12.xml)]

<span data-ttu-id="adaf6-231">Como resultado de esta notación, la **Exec** tarea creará lotes basándose en combinaciones únicas de la **DatabaseConnectionString**, **TargetDatabase**y **FullPath** valores de metadatos y la tarea se ejecutarán una vez para cada lote.</span><span class="sxs-lookup"><span data-stu-id="adaf6-231">As a result of this notation, the **Exec** task will create batches based on unique combinations of the **DatabaseConnectionString**, **TargetDatabase**, and **FullPath** metadata values, and the task will execute once for each batch.</span></span> <span data-ttu-id="adaf6-232">Este es un ejemplo de *tarea de procesamiento por lotes*.</span><span class="sxs-lookup"><span data-stu-id="adaf6-232">This is an example of *task batching*.</span></span> <span data-ttu-id="adaf6-233">Sin embargo, dado que el nivel de destino de procesamiento por lotes, nuestra colección de elementos en lotes de elemento único, ya ha dividido el **Exec** tarea ejecutará solo una vez para cada iteración del destino.</span><span class="sxs-lookup"><span data-stu-id="adaf6-233">However, because the target-level batching has already divided our item collection into single-item batches, the **Exec** task will run once and only once for each iteration of the target.</span></span> <span data-ttu-id="adaf6-234">En otras palabras, esta tarea invoca la utilidad VSDBCMD una vez para cada paquete de la base de datos en la solución.</span><span class="sxs-lookup"><span data-stu-id="adaf6-234">In other words, this task invokes the VSDBCMD utility once for each database package in the solution.</span></span>

> [!NOTE]
> <span data-ttu-id="adaf6-235">Para obtener más información sobre el procesamiento por lotes de tarea y de destino, vea MSBuild [procesamiento por lotes](https://msdn.microsoft.com/library/ms171473.aspx), [metadatos de elementos en procesamiento por lotes de destino](https://msdn.microsoft.com/library/ms228229.aspx), y [metadatos de elementos en procesamiento por lotes de tarea](https://msdn.microsoft.com/library/ms171474.aspx).</span><span class="sxs-lookup"><span data-stu-id="adaf6-235">For more information on target and task batching, see MSBuild [Batching](https://msdn.microsoft.com/library/ms171473.aspx), [Item Metadata in Target Batching](https://msdn.microsoft.com/library/ms228229.aspx), and [Item Metadata in Task Batching](https://msdn.microsoft.com/library/ms171474.aspx).</span></span>

### <a name="the-publishwebpackages-target"></a><span data-ttu-id="adaf6-236">El destino PublishWebPackages</span><span class="sxs-lookup"><span data-stu-id="adaf6-236">The PublishWebPackages Target</span></span>

<span data-ttu-id="adaf6-237">En este punto, se ha invocado el **BuildProjects** destino, que genera un paquete de implementación web para cada proyecto en la solución de ejemplo.</span><span class="sxs-lookup"><span data-stu-id="adaf6-237">By this point, you've invoked the **BuildProjects** target, which generates a web deployment package for each project in the sample solution.</span></span> <span data-ttu-id="adaf6-238">Que acompaña a cada paquete es un *deploy.cmd* archivo, que contiene los comandos MSDeploy.exe necesarios para implementar el paquete en el entorno de destino, y un *SetParameters.xml* archivo, que especifica el información necesaria del entorno de destino.</span><span class="sxs-lookup"><span data-stu-id="adaf6-238">Accompanying each package is a *deploy.cmd* file, which contains the MSDeploy.exe commands required to deploy the package to the target environment, and a *SetParameters.xml* file, which specifies the necessary details of the target environment.</span></span> <span data-ttu-id="adaf6-239">También se ha invocado el **GatherPackagesForPublishing** destino, que genera una colección de elementos que contiene el *deploy.cmd* archivos que le interesa.</span><span class="sxs-lookup"><span data-stu-id="adaf6-239">You've also invoked the **GatherPackagesForPublishing** target, which generates an item collection containing the *deploy.cmd* files you're interested in.</span></span> <span data-ttu-id="adaf6-240">En esencia, el **PublishWebPackages** destino realiza las siguientes funciones:</span><span class="sxs-lookup"><span data-stu-id="adaf6-240">Essentially, the **PublishWebPackages** target performs these functions:</span></span>

- <span data-ttu-id="adaf6-241">Manipula el *SetParameters.xml* archivo para cada paquete para incluir los detalles correctos para el entorno de destino, utilizando el **XmlPoke** tarea.</span><span class="sxs-lookup"><span data-stu-id="adaf6-241">It manipulates the *SetParameters.xml* file for each package to include the correct details for the target environment, using the **XmlPoke** task.</span></span>
- <span data-ttu-id="adaf6-242">Invoca el *deploy.cmd* archivo para cada paquete, utilizando los modificadores adecuados.</span><span class="sxs-lookup"><span data-stu-id="adaf6-242">It invokes the *deploy.cmd* file for each package, using the appropriate switches.</span></span>

<span data-ttu-id="adaf6-243">Al igual que el **PublishDbPackages** destino, el **PublishWebPackages** destino usa el procesamiento por lotes de destino para asegurarse de que el destino se ejecuta una vez para cada paquete de web.</span><span class="sxs-lookup"><span data-stu-id="adaf6-243">Just like the **PublishDbPackages** target, the **PublishWebPackages** target uses target batching to ensure that the target is executed once for each web package.</span></span>

[!code-xml[Main](understanding-the-build-process/samples/sample13.xml)]

<span data-ttu-id="adaf6-244">En el destino, el **Exec** tarea se usa para ejecutar el *deploy.cmd* archivo para cada paquete de web.</span><span class="sxs-lookup"><span data-stu-id="adaf6-244">Within the target, the **Exec** task is used to run the *deploy.cmd* file for each web package.</span></span>

[!code-xml[Main](understanding-the-build-process/samples/sample14.xml)]

<span data-ttu-id="adaf6-245">Para obtener más información sobre cómo configurar la implementación de paquetes de web, consulte [compilar y empaquetar proyectos de aplicación Web](building-and-packaging-web-application-projects.md).</span><span class="sxs-lookup"><span data-stu-id="adaf6-245">For more information on configuring the deployment of web packages, see [Building and Packaging Web Application Projects](building-and-packaging-web-application-projects.md).</span></span>

## <a name="conclusion"></a><span data-ttu-id="adaf6-246">Conclusión</span><span class="sxs-lookup"><span data-stu-id="adaf6-246">Conclusion</span></span>

<span data-ttu-id="adaf6-247">En este tema se proporciona un tutorial sobre cómo dividir los archivos de proyecto se usan para controlar el proceso de compilación e implementación de principio a fin para la solución de ejemplo de Contact Manager.</span><span class="sxs-lookup"><span data-stu-id="adaf6-247">This topic provided a walkthrough of how split project files are used to control the build and deployment process from start to finish for the Contact Manager sample solution.</span></span> <span data-ttu-id="adaf6-248">Con este enfoque permite ejecutar complejo, las implementaciones de escala empresarial en un paso único y repetible, simplemente mediante la ejecución de un archivo de comandos específicos del entorno.</span><span class="sxs-lookup"><span data-stu-id="adaf6-248">Using this approach lets you run complex, enterprise-scale deployments in a single, repeatable step, simply by running an environment-specific command file.</span></span>

## <a name="further-reading"></a><span data-ttu-id="adaf6-249">Información adicional</span><span class="sxs-lookup"><span data-stu-id="adaf6-249">Further Reading</span></span>

<span data-ttu-id="adaf6-250">Para obtener una introducción más detallada a los archivos de proyecto y el WPP, consulte [dentro de la Microsoft Build Engine: Uso de MSBuild y Team Foundation Build](http://amzn.com/0735645248) por Sayed Ibrahim Hashimi y William Bartholomew, ISBN: 978-0-7356-4524-0.</span><span class="sxs-lookup"><span data-stu-id="adaf6-250">For a more in-depth introduction to project files and the WPP, see [Inside the Microsoft Build Engine: Using MSBuild and Team Foundation Build](http://amzn.com/0735645248) by Sayed Ibrahim Hashimi and William Bartholomew, ISBN: 978-0-7356-4524-0.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="adaf6-251">[Anterior](understanding-the-project-file.md)
> [Siguiente](building-and-packaging-web-application-projects.md)</span><span class="sxs-lookup"><span data-stu-id="adaf6-251">[Previous](understanding-the-project-file.md)
[Next](building-and-packaging-web-application-projects.md)</span></span>
