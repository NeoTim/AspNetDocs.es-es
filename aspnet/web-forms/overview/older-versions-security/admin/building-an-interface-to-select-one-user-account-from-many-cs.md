---
uid: web-forms/overview/older-versions-security/admin/building-an-interface-to-select-one-user-account-from-many-cs
title: Crear una interfaz para seleccionar una cuenta de usuario de muchosC#() | Microsoft Docs
author: rick-anderson
description: En este tutorial, se creará una interfaz de usuario con una cuadrícula paginable y filtrable. En concreto, nuestra interfaz de usuario constará de una serie de LinkButtons para...
ms.author: riande
ms.date: 04/01/2008
ms.assetid: 9e4e687c-b4ec-434f-a4ef-edb0b8f365e4
msc.legacyurl: /web-forms/overview/older-versions-security/admin/building-an-interface-to-select-one-user-account-from-many-cs
msc.type: authoredcontent
ms.openlocfilehash: 8057cfbcd33c74376076363bc27940cebd522c08
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 03/06/2020
ms.locfileid: "78522031"
---
# <a name="building-an-interface-to-select-one-user-account-from-many-c"></a><span data-ttu-id="db9c6-104">Crear una interfaz para seleccionar una cuenta de usuario entre varias cuentas (C#)</span><span class="sxs-lookup"><span data-stu-id="db9c6-104">Building an Interface to Select One User Account from Many (C#)</span></span>

<span data-ttu-id="db9c6-105">por [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="db9c6-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="db9c6-106">[Descargar código](https://download.microsoft.com/download/6/0/e/60e1bd94-e5f9-4d5a-a079-f23c98f4f67d/CS.12.zip) o [Descargar PDF](https://download.microsoft.com/download/6/0/e/60e1bd94-e5f9-4d5a-a079-f23c98f4f67d/aspnet_tutorial12_SelectUser_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="db9c6-106">[Download Code](https://download.microsoft.com/download/6/0/e/60e1bd94-e5f9-4d5a-a079-f23c98f4f67d/CS.12.zip) or [Download PDF](https://download.microsoft.com/download/6/0/e/60e1bd94-e5f9-4d5a-a079-f23c98f4f67d/aspnet_tutorial12_SelectUser_cs.pdf)</span></span>

> <span data-ttu-id="db9c6-107">En este tutorial, se creará una interfaz de usuario con una cuadrícula paginable y filtrable.</span><span class="sxs-lookup"><span data-stu-id="db9c6-107">In this tutorial we will build a user interface with a paged, filterable grid.</span></span> <span data-ttu-id="db9c6-108">En concreto, nuestra interfaz de usuario constará de una serie de LinkButtons para filtrar los resultados en función de la letra inicial del nombre de usuario y un control GridView para mostrar los usuarios coincidentes.</span><span class="sxs-lookup"><span data-stu-id="db9c6-108">In particular, our user interface will consist of a series of LinkButtons for filtering the results based on the starting letter of the username, and a GridView control to show the matching users.</span></span> <span data-ttu-id="db9c6-109">Comenzaremos enumerando todas las cuentas de usuario en un control GridView.</span><span class="sxs-lookup"><span data-stu-id="db9c6-109">We'll start by listing all of the user accounts in a GridView.</span></span> <span data-ttu-id="db9c6-110">Después, en el paso 3, agregaremos el filtro LinkButtons.</span><span class="sxs-lookup"><span data-stu-id="db9c6-110">Then, in Step 3, we will add the filter LinkButtons.</span></span> <span data-ttu-id="db9c6-111">En el paso 4 se examina la paginación de los resultados filtrados.</span><span class="sxs-lookup"><span data-stu-id="db9c6-111">Step 4 looks at paging the filtered results.</span></span> <span data-ttu-id="db9c6-112">La interfaz construida en los pasos 2 a 4 se usará en los tutoriales siguientes para realizar tareas administrativas para una cuenta de usuario determinada.</span><span class="sxs-lookup"><span data-stu-id="db9c6-112">The interface constructed in Steps 2 through 4 will be used in the subsequent tutorials to perform administrative tasks for a particular user account.</span></span>

## <a name="introduction"></a><span data-ttu-id="db9c6-113">Introducción</span><span class="sxs-lookup"><span data-stu-id="db9c6-113">Introduction</span></span>

<span data-ttu-id="db9c6-114">En el <a id="_msoanchor_1"> </a>tutorial [*asignación de roles a usuarios*](../roles/assigning-roles-to-users-cs.md) , hemos creado una interfaz rudimentaria para que un administrador Seleccione un usuario y administre sus roles.</span><span class="sxs-lookup"><span data-stu-id="db9c6-114">In the <a id="_msoanchor_1"></a>[*Assigning Roles to Users*](../roles/assigning-roles-to-users-cs.md) tutorial, we created a rudimentary interface for an administrator to select a user and manage her roles.</span></span> <span data-ttu-id="db9c6-115">En concreto, la interfaz presentó al administrador una lista desplegable de todos los usuarios.</span><span class="sxs-lookup"><span data-stu-id="db9c6-115">Specifically, the interface presented the administrator with a drop-down list of all of the users.</span></span> <span data-ttu-id="db9c6-116">Este tipo de interfaz es adecuado cuando hay una docena de cuentas de usuario, pero no lo es, sino que es difícil para sitios con cientos o miles de cuentas.</span><span class="sxs-lookup"><span data-stu-id="db9c6-116">Such an interface is suitable when there are but a dozen or so user accounts, but is unwieldy for sites with hundreds or thousands of accounts.</span></span> <span data-ttu-id="db9c6-117">Una cuadrícula filtrable y paginable es una interfaz de usuario más adecuada para sitios web con grandes bases de usuarios.</span><span class="sxs-lookup"><span data-stu-id="db9c6-117">A paged, filterable grid is more suitable user interface for websites with large user bases.</span></span>

<span data-ttu-id="db9c6-118">En este tutorial, se creará una interfaz de usuario de este tipo.</span><span class="sxs-lookup"><span data-stu-id="db9c6-118">In this tutorial we will build such a user interface.</span></span> <span data-ttu-id="db9c6-119">En concreto, nuestra interfaz de usuario constará de una serie de LinkButtons para filtrar los resultados en función de la letra inicial del nombre de usuario y un control GridView para mostrar los usuarios coincidentes.</span><span class="sxs-lookup"><span data-stu-id="db9c6-119">In particular, our user interface will consist of a series of LinkButtons for filtering the results based on the starting letter of the username, and a GridView control to show the matching users.</span></span> <span data-ttu-id="db9c6-120">Comenzaremos enumerando todas las cuentas de usuario en un control GridView.</span><span class="sxs-lookup"><span data-stu-id="db9c6-120">We'll start by listing all of the user accounts in a GridView.</span></span> <span data-ttu-id="db9c6-121">Después, en el paso 3, agregaremos el filtro LinkButtons.</span><span class="sxs-lookup"><span data-stu-id="db9c6-121">Then, in Step 3, we will add the filter LinkButtons.</span></span> <span data-ttu-id="db9c6-122">En el paso 4 se examina la paginación de los resultados filtrados.</span><span class="sxs-lookup"><span data-stu-id="db9c6-122">Step 4 looks at paging the filtered results.</span></span> <span data-ttu-id="db9c6-123">La interfaz construida en los pasos 2 a 4 se usará en los tutoriales siguientes para realizar tareas administrativas para una cuenta de usuario determinada.</span><span class="sxs-lookup"><span data-stu-id="db9c6-123">The interface constructed in Steps 2 through 4 will be used in the subsequent tutorials to perform administrative tasks for a particular user account.</span></span>

<span data-ttu-id="db9c6-124">Comencemos.</span><span class="sxs-lookup"><span data-stu-id="db9c6-124">Let's get started!</span></span>

## <a name="step-1-adding-new-aspnet-pages"></a><span data-ttu-id="db9c6-125">Paso 1: agregar nuevas páginas de ASP.NET</span><span class="sxs-lookup"><span data-stu-id="db9c6-125">Step 1: Adding New ASP.NET Pages</span></span>

<span data-ttu-id="db9c6-126">En este tutorial y en los dos siguientes, examinaremos varias funciones y funcionalidades relacionadas con la administración.</span><span class="sxs-lookup"><span data-stu-id="db9c6-126">In this tutorial and the next two we will be examining various administration-related functions and capabilities.</span></span> <span data-ttu-id="db9c6-127">Se necesitará una serie de páginas de ASP.NET para implementar los temas examinados en estos tutoriales.</span><span class="sxs-lookup"><span data-stu-id="db9c6-127">We will need a series of ASP.NET pages to implement the topics examined throughout these tutorials.</span></span> <span data-ttu-id="db9c6-128">Vamos a crear estas páginas y a actualizar el mapa del sitio.</span><span class="sxs-lookup"><span data-stu-id="db9c6-128">Let's create these pages and update the site map.</span></span>

<span data-ttu-id="db9c6-129">Empiece por crear una nueva carpeta en el proyecto denominado `Administration`.</span><span class="sxs-lookup"><span data-stu-id="db9c6-129">Start by creating a new folder in the project named `Administration`.</span></span> <span data-ttu-id="db9c6-130">A continuación, agregue dos nuevas páginas ASP.NET a la carpeta, vinculando cada página con la `Site.master` página maestra.</span><span class="sxs-lookup"><span data-stu-id="db9c6-130">Next, add two new ASP.NET pages to the folder, linking each page with the `Site.master` master page.</span></span> <span data-ttu-id="db9c6-131">Asigne un nombre a las páginas:</span><span class="sxs-lookup"><span data-stu-id="db9c6-131">Name the pages:</span></span>

- `ManageUsers.aspx`
- `UserInformation.aspx`

<span data-ttu-id="db9c6-132">Agregue también dos páginas al directorio raíz del sitio web: `ChangePassword.aspx` y `RecoverPassword.aspx`.</span><span class="sxs-lookup"><span data-stu-id="db9c6-132">Also add two pages to the website's root directory: `ChangePassword.aspx` and `RecoverPassword.aspx`.</span></span>

<span data-ttu-id="db9c6-133">En este punto, estas cuatro páginas deben tener dos controles de contenido, uno para cada una de las ContentPlaceHolders: `MainContent` y `LoginContent`de la página maestra.</span><span class="sxs-lookup"><span data-stu-id="db9c6-133">These four pages should, at this point, have two Content controls, one for each of the master page's ContentPlaceHolders: `MainContent` and `LoginContent`.</span></span>

[!code-aspx[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample1.aspx)]

<span data-ttu-id="db9c6-134">Queremos mostrar el marcado predeterminado de la página maestra para el `LoginContent` ContentPlaceHolder para estas páginas.</span><span class="sxs-lookup"><span data-stu-id="db9c6-134">We want to show the master page's default markup for the `LoginContent` ContentPlaceHolder for these pages.</span></span> <span data-ttu-id="db9c6-135">Por lo tanto, quite el marcado declarativo para el control de contenido `Content2`.</span><span class="sxs-lookup"><span data-stu-id="db9c6-135">Therefore, remove the declarative markup for the `Content2` Content control.</span></span> <span data-ttu-id="db9c6-136">Después de hacerlo, el marcado de las páginas debe contener solo un control de contenido.</span><span class="sxs-lookup"><span data-stu-id="db9c6-136">After doing so, the pages' markup should contain just one Content control.</span></span>

<span data-ttu-id="db9c6-137">Las páginas de ASP.NET de la carpeta `Administration` están destinadas únicamente a los usuarios administrativos.</span><span class="sxs-lookup"><span data-stu-id="db9c6-137">The ASP.NET pages in the `Administration` folder are intended solely for administrative users.</span></span> <span data-ttu-id="db9c6-138">Se ha agregado un rol de administrador al sistema en el <a id="_msoanchor_2"> </a>tutorial [*creación y administración de roles*](../roles/creating-and-managing-roles-cs.md) . restrinja el acceso a estas dos páginas a este rol.</span><span class="sxs-lookup"><span data-stu-id="db9c6-138">We added an Administrators role to the system in the <a id="_msoanchor_2"></a>[*Creating and Managing Roles*](../roles/creating-and-managing-roles-cs.md) tutorial; restrict access to these two pages to this role.</span></span> <span data-ttu-id="db9c6-139">Para ello, agregue un archivo de `Web.config` a la carpeta `Administration` y configure su elemento `<authorization>` para admitir usuarios en el rol administradores y para denegar todos los demás.</span><span class="sxs-lookup"><span data-stu-id="db9c6-139">To accomplish this, add a `Web.config` file to the `Administration` folder and configure its `<authorization>` element to admit users in the Administrators role and to deny all others.</span></span>

[!code-xml[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample2.xml)]

<span data-ttu-id="db9c6-140">En este momento el Explorador de soluciones del proyecto debe ser similar a la captura de pantalla que se muestra en la figura 1.</span><span class="sxs-lookup"><span data-stu-id="db9c6-140">At this point your project's Solution Explorer should look similar to the screen shot shown in Figure 1.</span></span>

<span data-ttu-id="db9c6-141">[![se han agregado al sitio web cuatro nuevas páginas y un archivo Web. config.](building-an-interface-to-select-one-user-account-from-many-cs/_static/image2.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="db9c6-141">[![Four New Pages and a Web.config File Have Been Added to the Website](building-an-interface-to-select-one-user-account-from-many-cs/_static/image2.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image1.png)</span></span>

<span data-ttu-id="db9c6-142">**Figura 1**: se han agregado cuatro nuevas páginas y un archivo de `Web.config` al sitio web ([haga clic para ver la imagen a tamaño completo](building-an-interface-to-select-one-user-account-from-many-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="db9c6-142">**Figure 1**: Four New Pages and a `Web.config` File Have Been Added to the Website  ([Click to view full-size image](building-an-interface-to-select-one-user-account-from-many-cs/_static/image3.png))</span></span>

<span data-ttu-id="db9c6-143">Por último, actualice el mapa del sitio (`Web.sitemap`) para incluir una entrada en la página de `ManageUsers.aspx`.</span><span class="sxs-lookup"><span data-stu-id="db9c6-143">Finally, update the site map (`Web.sitemap`) to include an entry to the `ManageUsers.aspx` page.</span></span> <span data-ttu-id="db9c6-144">Agregue el siguiente código XML después de la `<siteMapNode>` agregamos para los tutoriales de roles.</span><span class="sxs-lookup"><span data-stu-id="db9c6-144">Add the following XML after the `<siteMapNode>` we added for the Roles tutorials.</span></span>

[!code-xml[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample3.xml)]

<span data-ttu-id="db9c6-145">Con el mapa del sitio actualizado, visite el sitio a través de un explorador.</span><span class="sxs-lookup"><span data-stu-id="db9c6-145">With the site map updated, visit the site through a browser.</span></span> <span data-ttu-id="db9c6-146">Como se muestra en la figura 2, la navegación de la izquierda incluye ahora elementos para los tutoriales de administración.</span><span class="sxs-lookup"><span data-stu-id="db9c6-146">As Figure 2 shows, the navigation on the left now includes items for the Administration tutorials.</span></span>

<span data-ttu-id="db9c6-147">[![el mapa del sitio incluye un nodo denominado administración de usuarios](building-an-interface-to-select-one-user-account-from-many-cs/_static/image5.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="db9c6-147">[![The Site Map Includes a Node Titled User Administration](building-an-interface-to-select-one-user-account-from-many-cs/_static/image5.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image4.png)</span></span>

<span data-ttu-id="db9c6-148">**Figura 2**: el mapa del sitio incluye un nodo denominado administración de usuarios ([haga clic para ver la imagen de tamaño completo](building-an-interface-to-select-one-user-account-from-many-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="db9c6-148">**Figure 2**: The Site Map Includes a Node Titled User Administration  ([Click to view full-size image](building-an-interface-to-select-one-user-account-from-many-cs/_static/image6.png))</span></span>

## <a name="step-2-listing-all-user-accounts-in-a-gridview"></a><span data-ttu-id="db9c6-149">Paso 2: Mostrar todas las cuentas de usuario en un control GridView</span><span class="sxs-lookup"><span data-stu-id="db9c6-149">Step 2: Listing All User Accounts in a GridView</span></span>

<span data-ttu-id="db9c6-150">El objetivo final de este tutorial es crear una cuadrícula paginable y filtrable a través de la cual un administrador puede seleccionar una cuenta de usuario para administrarla.</span><span class="sxs-lookup"><span data-stu-id="db9c6-150">Our end goal for this tutorial is to create a paged, filterable grid through which an administrator can select a user account to manage.</span></span> <span data-ttu-id="db9c6-151">Comencemos por una lista de *todos* los usuarios en un control GridView.</span><span class="sxs-lookup"><span data-stu-id="db9c6-151">Let's start by listing *all* users in a GridView.</span></span> <span data-ttu-id="db9c6-152">Una vez completado, se agregarán las interfaces y la funcionalidad de filtrado y paginación.</span><span class="sxs-lookup"><span data-stu-id="db9c6-152">Once this is complete, we will add the filtering and paging interfaces and functionality.</span></span>

<span data-ttu-id="db9c6-153">Abra la página `ManageUsers.aspx` en la carpeta `Administration` y agregue un control GridView, estableciendo su `ID` en `UserAccounts`.</span><span class="sxs-lookup"><span data-stu-id="db9c6-153">Open the `ManageUsers.aspx` page in the `Administration` folder and add a GridView, setting its `ID` to `UserAccounts`.</span></span> <span data-ttu-id="db9c6-154">En un momento, escribiremos código para enlazar el conjunto de cuentas de usuario a GridView mediante el método `GetAllUsers` de la clase `Membership`.</span><span class="sxs-lookup"><span data-stu-id="db9c6-154">In a moment, we will write code to bind the set of user accounts to the GridView using the `Membership` class's `GetAllUsers` method.</span></span> <span data-ttu-id="db9c6-155">Como se explicó en los tutoriales anteriores, el método GetAllUsers devuelve un objeto `MembershipUserCollection`, que es una colección de objetos `MembershipUser`.</span><span class="sxs-lookup"><span data-stu-id="db9c6-155">As discussed in earlier tutorials, the GetAllUsers method returns a `MembershipUserCollection` object, which is a collection of `MembershipUser` objects.</span></span> <span data-ttu-id="db9c6-156">Cada `MembershipUser` de la colección incluye propiedades como `UserName`, `Email`, `IsApproved`, etc.</span><span class="sxs-lookup"><span data-stu-id="db9c6-156">Each `MembershipUser` in the collection includes properties like `UserName`, `Email`, `IsApproved`, and so on.</span></span>

<span data-ttu-id="db9c6-157">Para mostrar la información de la cuenta de usuario deseada en GridView, establezca la propiedad `AutoGenerateColumns` de GridView en false y agregue BoundFields para las propiedades `UserName`, `Email`y `Comment`, y CheckBoxFields para las propiedades `IsApproved`, `IsLockedOut`y `IsOnline`.</span><span class="sxs-lookup"><span data-stu-id="db9c6-157">In order to display the desired user account information in the GridView, set the GridView's `AutoGenerateColumns` property to False and add BoundFields for the `UserName`, `Email`, and `Comment` properties and CheckBoxFields for the `IsApproved`, `IsLockedOut`, and `IsOnline` properties.</span></span> <span data-ttu-id="db9c6-158">Esta configuración se puede aplicar a través del marcado declarativo del control o a través del cuadro de diálogo campos.</span><span class="sxs-lookup"><span data-stu-id="db9c6-158">This configuration can be applied through the control's declarative markup or via the Fields dialog box.</span></span> <span data-ttu-id="db9c6-159">En la ilustración 3 se muestra una captura de pantalla del cuadro de diálogo campos después de que la casilla generar automáticamente campos se haya desactivado y se hayan agregado y configurado BoundFields y CheckBoxFields.</span><span class="sxs-lookup"><span data-stu-id="db9c6-159">Figure 3 shows a screen shot of the Fields dialog box after the Auto-generate fields checkbox has been unchecked and the BoundFields and CheckBoxFields have been added and configured.</span></span>

<span data-ttu-id="db9c6-160">[![agregar tres BoundFields y tres CheckBoxFields a GridView](building-an-interface-to-select-one-user-account-from-many-cs/_static/image8.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="db9c6-160">[![Add Three BoundFields and Three CheckBoxFields to the GridView](building-an-interface-to-select-one-user-account-from-many-cs/_static/image8.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image7.png)</span></span>

<span data-ttu-id="db9c6-161">**Figura 3**: agregar tres BoundFields y tres CheckBoxFields a GridView ([haga clic para ver la imagen de tamaño completo](building-an-interface-to-select-one-user-account-from-many-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="db9c6-161">**Figure 3**: Add Three BoundFields and Three CheckBoxFields to the GridView  ([Click to view full-size image](building-an-interface-to-select-one-user-account-from-many-cs/_static/image9.png))</span></span>

<span data-ttu-id="db9c6-162">Después de configurar GridView, asegúrese de que su marcado declarativo es similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="db9c6-162">After configuring your GridView, ensure that its declarative markup resembles the following:</span></span>

[!code-aspx[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample4.aspx)]

<span data-ttu-id="db9c6-163">A continuación, es necesario escribir código que enlaza las cuentas de usuario a GridView.</span><span class="sxs-lookup"><span data-stu-id="db9c6-163">Next, we need to write code that binds the user accounts to the GridView.</span></span> <span data-ttu-id="db9c6-164">Cree un método denominado `BindUserAccounts` para realizar esta tarea y, a continuación, llámela desde el controlador de eventos `Page_Load` en la primera visita de la página.</span><span class="sxs-lookup"><span data-stu-id="db9c6-164">Create a method named `BindUserAccounts` to perform this task and then call it from the `Page_Load` event handler on the first page visit.</span></span>

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample5.cs)]

<span data-ttu-id="db9c6-165">Dedique un momento a probar la página a través de un explorador.</span><span class="sxs-lookup"><span data-stu-id="db9c6-165">Take a moment to test the page through a browser.</span></span> <span data-ttu-id="db9c6-166">Como se muestra en la figura 4, el `UserAccounts` GridView muestra el nombre de usuario, la dirección de correo electrónico y otra información pertinente de la cuenta para todos los usuarios del sistema.</span><span class="sxs-lookup"><span data-stu-id="db9c6-166">As Figure 4 shows, the `UserAccounts` GridView lists the username, email address, and other pertinent account information for all users in the system.</span></span>

<span data-ttu-id="db9c6-167">[![las cuentas de usuario se muestran en GridView](building-an-interface-to-select-one-user-account-from-many-cs/_static/image11.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="db9c6-167">[![The User Accounts are Listed in the GridView](building-an-interface-to-select-one-user-account-from-many-cs/_static/image11.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image10.png)</span></span>

<span data-ttu-id="db9c6-168">**Figura 4**: las cuentas de usuario se muestran en GridView ([haga clic para ver la imagen a tamaño completo](building-an-interface-to-select-one-user-account-from-many-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="db9c6-168">**Figure 4**: The User Accounts are Listed in the GridView  ([Click to view full-size image](building-an-interface-to-select-one-user-account-from-many-cs/_static/image12.png))</span></span>

## <a name="step-3-filtering-the-results-by-the-first-letter-of-the-username"></a><span data-ttu-id="db9c6-169">Paso 3: filtrar los resultados por la primera letra del nombre de usuario</span><span class="sxs-lookup"><span data-stu-id="db9c6-169">Step 3: Filtering the Results by the First Letter of the Username</span></span>

<span data-ttu-id="db9c6-170">Actualmente, el `UserAccounts` GridView muestra *todas* las cuentas de usuario.</span><span class="sxs-lookup"><span data-stu-id="db9c6-170">Currently the `UserAccounts` GridView shows *all* of the user accounts.</span></span> <span data-ttu-id="db9c6-171">En el caso de los sitios web con cientos o miles de cuentas de usuario, es imperativo que el usuario pueda reducir rápidamente las cuentas mostradas.</span><span class="sxs-lookup"><span data-stu-id="db9c6-171">For websites with hundreds or thousands of user accounts, it is imperative that user be able to quickly pare down the displayed accounts.</span></span> <span data-ttu-id="db9c6-172">Esto puede realizarse agregando filtro LinkButtons a la página.</span><span class="sxs-lookup"><span data-stu-id="db9c6-172">This can be accomplished by adding filtering LinkButtons to the page.</span></span> <span data-ttu-id="db9c6-173">Vamos a agregar 27 LinkButtons a la página: uno titulado todo junto con un LinkButton para cada letra del alfabeto.</span><span class="sxs-lookup"><span data-stu-id="db9c6-173">Let's add 27 LinkButtons to the page: one titled All along with one LinkButton for each letter of the alphabet.</span></span> <span data-ttu-id="db9c6-174">Si un visitante hace clic en el control LinkButton, el control GridView mostrará todos los usuarios.</span><span class="sxs-lookup"><span data-stu-id="db9c6-174">If a visitor clicks the All LinkButton, the GridView will show all of the users.</span></span> <span data-ttu-id="db9c6-175">Si hace clic en una letra determinada, solo se mostrarán los usuarios cuyo nombre de usuario empiece por la letra seleccionada.</span><span class="sxs-lookup"><span data-stu-id="db9c6-175">If they click a particular letter, only those users whose username starts with the selected letter will be displayed.</span></span>

<span data-ttu-id="db9c6-176">La primera tarea es agregar los 27 controles LinkButton.</span><span class="sxs-lookup"><span data-stu-id="db9c6-176">Our first task is to add the 27 LinkButton controls.</span></span> <span data-ttu-id="db9c6-177">Una opción sería crear el 27 LinkButtons mediante declaración, de uno en uno.</span><span class="sxs-lookup"><span data-stu-id="db9c6-177">One option would be to create the 27 LinkButtons declaratively, one at a time.</span></span> <span data-ttu-id="db9c6-178">Un enfoque más flexible es usar un control Repeater con un `ItemTemplate` que representa un control LinkButton y, a continuación, enlaza las opciones de filtrado al repetidor como una matriz `string`.</span><span class="sxs-lookup"><span data-stu-id="db9c6-178">A more flexible approach is to use a Repeater control with an `ItemTemplate` that renders a LinkButton and then binds the filtering options to the Repeater as a `string` array.</span></span>

<span data-ttu-id="db9c6-179">Empiece agregando un control Repeater a la página sobre el `UserAccounts` GridView.</span><span class="sxs-lookup"><span data-stu-id="db9c6-179">Start by adding a Repeater control to the page above the `UserAccounts` GridView.</span></span> <span data-ttu-id="db9c6-180">Establezca la propiedad `ID` del repetidor en `FilteringUI`.</span><span class="sxs-lookup"><span data-stu-id="db9c6-180">Set the Repeater's `ID` property to `FilteringUI`.</span></span> <span data-ttu-id="db9c6-181">Configure las plantillas del repetidor de modo que su `ItemTemplate` represente un objeto LinkButton cuyas propiedades `Text` y `CommandName` estén enlazadas al elemento de la matriz actual.</span><span class="sxs-lookup"><span data-stu-id="db9c6-181">Configure the Repeater's templates so that its `ItemTemplate` renders a LinkButton whose `Text` and `CommandName` properties are bound to the current array element.</span></span> <span data-ttu-id="db9c6-182">Como vimos en el <a id="_msoanchor_3"> </a>tutorial [*asignar roles a usuarios*](../roles/assigning-roles-to-users-cs.md) , esto se puede realizar mediante la sintaxis de enlace de `Container.DataItem`.</span><span class="sxs-lookup"><span data-stu-id="db9c6-182">As we saw in the <a id="_msoanchor_3"></a>[*Assigning Roles to Users*](../roles/assigning-roles-to-users-cs.md) tutorial, this can be accomplished using the `Container.DataItem` databinding syntax.</span></span> <span data-ttu-id="db9c6-183">Use el `SeparatorTemplate` del repetidor para mostrar una línea vertical entre cada vínculo.</span><span class="sxs-lookup"><span data-stu-id="db9c6-183">Use the Repeater's `SeparatorTemplate` to display a vertical line between each link.</span></span>

[!code-aspx[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample6.aspx)]

<span data-ttu-id="db9c6-184">Para rellenar este repetidor con las opciones de filtrado deseadas, cree un método denominado `BindFilteringUI`.</span><span class="sxs-lookup"><span data-stu-id="db9c6-184">To populate this Repeater with the desired filtering options, create a method named `BindFilteringUI`.</span></span> <span data-ttu-id="db9c6-185">Asegúrese de llamar a este método desde el controlador de eventos `Page_Load` en la primera carga de la página.</span><span class="sxs-lookup"><span data-stu-id="db9c6-185">Be sure to call this method from the `Page_Load` event handler on the first page load.</span></span>

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample7.cs)]

<span data-ttu-id="db9c6-186">Este método especifica las opciones de filtrado como elementos en la matriz de `string` `filterOptions`.</span><span class="sxs-lookup"><span data-stu-id="db9c6-186">This method specifies the filtering options as elements in the `string` array `filterOptions`.</span></span> <span data-ttu-id="db9c6-187">Para cada elemento de la matriz, el repetidor representará un LinkButton con sus propiedades `Text` y `CommandName` asignadas al valor del elemento de la matriz.</span><span class="sxs-lookup"><span data-stu-id="db9c6-187">For each element in the array, the Repeater will render a LinkButton with its `Text` and `CommandName` properties assigned to the value of the array element.</span></span>

<span data-ttu-id="db9c6-188">En la figura 5 se muestra la página `ManageUsers.aspx` cuando se ve a través de un explorador.</span><span class="sxs-lookup"><span data-stu-id="db9c6-188">Figure 5 shows the `ManageUsers.aspx` page when viewed through a browser.</span></span>

<span data-ttu-id="db9c6-189">[![de las listas de repetidores 27 filtrado de LinkButtons](building-an-interface-to-select-one-user-account-from-many-cs/_static/image14.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="db9c6-189">[![The Repeater Lists 27 Filtering LinkButtons](building-an-interface-to-select-one-user-account-from-many-cs/_static/image14.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image13.png)</span></span>

<span data-ttu-id="db9c6-190">**Figura 5**: el repetidor enumera 27 Filtering LinkButtons ([haga clic para ver la imagen de tamaño completo](building-an-interface-to-select-one-user-account-from-many-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="db9c6-190">**Figure 5**: The Repeater Lists 27 Filtering LinkButtons  ([Click to view full-size image](building-an-interface-to-select-one-user-account-from-many-cs/_static/image15.png))</span></span>

> [!NOTE]
> <span data-ttu-id="db9c6-191">Los nombres de usuario pueden comenzar con cualquier carácter, incluidos números y signos de puntuación.</span><span class="sxs-lookup"><span data-stu-id="db9c6-191">Usernames may start with any character, including numbers and punctuation.</span></span> <span data-ttu-id="db9c6-192">Para ver estas cuentas, el administrador tendrá que usar la opción todos los LinkButton.</span><span class="sxs-lookup"><span data-stu-id="db9c6-192">In order to view these accounts, the administrator will have to use the All LinkButton option.</span></span> <span data-ttu-id="db9c6-193">Como alternativa, puede Agregar un LinkButton para devolver todas las cuentas de usuario que comienzan con un número.</span><span class="sxs-lookup"><span data-stu-id="db9c6-193">Alternatively, you could add a LinkButton to return all user accounts that start with a number.</span></span> <span data-ttu-id="db9c6-194">Dejo esto como un ejercicio para el lector.</span><span class="sxs-lookup"><span data-stu-id="db9c6-194">I leave this as an exercise for the reader.</span></span>

<span data-ttu-id="db9c6-195">Al hacer clic en cualquiera de los LinkButtons de filtrado, se produce un postback y se genera el evento `ItemCommand` del repetidor, pero no hay ningún cambio en la cuadrícula porque todavía hemos escrito cualquier código para filtrar los resultados.</span><span class="sxs-lookup"><span data-stu-id="db9c6-195">Clicking any of the filtering LinkButtons causes a postback and raises the Repeater's `ItemCommand` event, but there's no change in the grid because we've yet to write any code to filter the results.</span></span> <span data-ttu-id="db9c6-196">La clase `Membership` incluye un [método`FindUsersByName`](https://technet.microsoft.com/library/system.web.security.membership.findusersbyname.aspx) que devuelve las cuentas de usuario cuyo nombre de usuario coincide con un modelo de búsqueda especificado.</span><span class="sxs-lookup"><span data-stu-id="db9c6-196">The `Membership` class includes a [`FindUsersByName` method](https://technet.microsoft.com/library/system.web.security.membership.findusersbyname.aspx) that returns those user accounts whose username matches a specified search pattern.</span></span> <span data-ttu-id="db9c6-197">Podemos utilizar este método para recuperar solo las cuentas de usuario cuyos nombres de usuario empiecen por la letra especificada por el `CommandName` del LinkButton filtrado en el que se hizo clic.</span><span class="sxs-lookup"><span data-stu-id="db9c6-197">We can use this method to retrieve just those user accounts whose usernames start with the letter specified by the `CommandName` of the filtered LinkButton that was clicked.</span></span>

<span data-ttu-id="db9c6-198">Empiece por actualizar la clase de código subyacente de la página de `ManageUser.aspx` para que incluya una propiedad denominada `UsernameToMatch`.</span><span class="sxs-lookup"><span data-stu-id="db9c6-198">Start by updating the `ManageUser.aspx` page's code-behind class so that it includes a property named `UsernameToMatch`.</span></span> <span data-ttu-id="db9c6-199">Esta propiedad conserva la cadena de filtro de nombre de usuario en los postbacks:</span><span class="sxs-lookup"><span data-stu-id="db9c6-199">This property persists the username filter string across postbacks:</span></span>

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample8.cs)]

<span data-ttu-id="db9c6-200">La propiedad `UsernameToMatch` almacena su valor se asigna a la colección `ViewState` mediante el uso de la clave UsernameToMatch.</span><span class="sxs-lookup"><span data-stu-id="db9c6-200">The `UsernameToMatch` property stores its value it is assigned into the `ViewState` collection using the key UsernameToMatch.</span></span> <span data-ttu-id="db9c6-201">Cuando se lee el valor de esta propiedad, comprueba si existe un valor en la colección `ViewState`; de lo contrario, devuelve el valor predeterminado, una cadena vacía.</span><span class="sxs-lookup"><span data-stu-id="db9c6-201">When this property's value is read, it checks to see if a value exists in the `ViewState` collection; if not, it returns the default value, an empty string.</span></span> <span data-ttu-id="db9c6-202">La propiedad `UsernameToMatch` exhibe un patrón común, y, a su vez, conserva un valor en el estado de vista para que los cambios en la propiedad se conserven en los postbacks.</span><span class="sxs-lookup"><span data-stu-id="db9c6-202">The `UsernameToMatch` property exhibits a common pattern, namely persisting a value to view state so that any changes to the property are persisted across postbacks.</span></span> <span data-ttu-id="db9c6-203">Para obtener más información sobre este patrón, lea [Descripción del estado de vista de ASP.net](https://msdn.microsoft.com/library/ms972976.aspx).</span><span class="sxs-lookup"><span data-stu-id="db9c6-203">For more information on this pattern, read [Understanding ASP.NET View State](https://msdn.microsoft.com/library/ms972976.aspx).</span></span>

<span data-ttu-id="db9c6-204">A continuación, actualice el método `BindUserAccounts` de modo que, en lugar de llamar a `Membership.GetAllUsers`, llame a `Membership.FindUsersByName`, pasando el valor de la propiedad `UsernameToMatch` anexada con el carácter comodín de SQL,%.</span><span class="sxs-lookup"><span data-stu-id="db9c6-204">Next, update the `BindUserAccounts` method so that instead of calling `Membership.GetAllUsers`, it calls `Membership.FindUsersByName`, passing in the value of the `UsernameToMatch` property appended with the SQL wildcard character, %.</span></span>

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample9.cs)]

<span data-ttu-id="db9c6-205">Para mostrar solo los usuarios cuyo nombre de usuario empieza por la letra A, establezca la propiedad `UsernameToMatch` en y, a continuación, llame a `BindUserAccounts`.</span><span class="sxs-lookup"><span data-stu-id="db9c6-205">To display just those users whose username starts with the letter A, set the `UsernameToMatch` property to A and then call `BindUserAccounts`.</span></span> <span data-ttu-id="db9c6-206">Esto daría como resultado una llamada a `Membership.FindUsersByName("A%")`, que devolverá todos los usuarios cuyo nombre de usuario comienza con. del mismo modo, para devolver *todos* los usuarios, asigne una cadena vacía a la propiedad `UsernameToMatch` de modo que el método `BindUserAccounts` invoque `Membership.FindUsersByName("%")`, con lo que se devuelven todas las cuentas de usuario.</span><span class="sxs-lookup"><span data-stu-id="db9c6-206">This would result in a call to `Membership.FindUsersByName("A%")`, which will return all users whose username starts with A. Likewise, to return *all* users, assign an empty string to the `UsernameToMatch` property so that the `BindUserAccounts` method will invoke `Membership.FindUsersByName("%")`, thereby returning all user accounts.</span></span>

<span data-ttu-id="db9c6-207">Cree un controlador de eventos para el evento `ItemCommand` del repetidor.</span><span class="sxs-lookup"><span data-stu-id="db9c6-207">Create an event handler for the Repeater's `ItemCommand` event.</span></span> <span data-ttu-id="db9c6-208">Este evento se desencadena cuando se hace clic en uno de los LinkButtons de filtro. se pasa el valor `CommandName` del LinkButton en el que se hace clic a través del objeto `RepeaterCommandEventArgs`.</span><span class="sxs-lookup"><span data-stu-id="db9c6-208">This event is raised whenever one of the filter LinkButtons is clicked; it is passed the clicked LinkButton's `CommandName` value through the `RepeaterCommandEventArgs` object.</span></span> <span data-ttu-id="db9c6-209">Necesitamos asignar el valor adecuado a la propiedad `UsernameToMatch` y, a continuación, llamar al método `BindUserAccounts`.</span><span class="sxs-lookup"><span data-stu-id="db9c6-209">We need to assign the appropriate value to the `UsernameToMatch` property and then call the `BindUserAccounts` method.</span></span> <span data-ttu-id="db9c6-210">Si el `CommandName` es All, asigne una cadena vacía a `UsernameToMatch` para que se muestren todas las cuentas de usuario.</span><span class="sxs-lookup"><span data-stu-id="db9c6-210">If the `CommandName` is All, assign an empty string to `UsernameToMatch` so that all user accounts are displayed.</span></span> <span data-ttu-id="db9c6-211">De lo contrario, asigne el valor `CommandName` a `UsernameToMatch`.</span><span class="sxs-lookup"><span data-stu-id="db9c6-211">Otherwise, assign the `CommandName` value to `UsernameToMatch`.</span></span>

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample10.cs)]

<span data-ttu-id="db9c6-212">Con este código en su lugar, pruebe la funcionalidad de filtrado.</span><span class="sxs-lookup"><span data-stu-id="db9c6-212">With this code in place, test out the filtering functionality.</span></span> <span data-ttu-id="db9c6-213">Cuando se visite la página por primera vez, se mostrarán todas las cuentas de usuario (consulte la figura 5).</span><span class="sxs-lookup"><span data-stu-id="db9c6-213">When the page is first visited, all user accounts are displayed (refer back to Figure 5).</span></span> <span data-ttu-id="db9c6-214">Al hacer clic en un LinkButton, se genera un postback y se filtran los resultados, mostrando solo las cuentas de usuario que comienzan con.</span><span class="sxs-lookup"><span data-stu-id="db9c6-214">Clicking the A LinkButton causes a postback and filters the results, displaying only those user accounts that start with A .</span></span>

<span data-ttu-id="db9c6-215">[![usar el LinkButtons de filtrado para mostrar los usuarios cuyo nombre de usuario comienza por una letra determinada](building-an-interface-to-select-one-user-account-from-many-cs/_static/image17.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="db9c6-215">[![Use the Filtering LinkButtons to Display those Users Whose Username Starts with a Certain Letter](building-an-interface-to-select-one-user-account-from-many-cs/_static/image17.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image16.png)</span></span>

<span data-ttu-id="db9c6-216">**Figura 6**: uso del LinkButtons de filtrado para mostrar los usuarios cuyo nombre de usuario comienza por una letra determinada ([haga clic para ver la imagen a tamaño completo](building-an-interface-to-select-one-user-account-from-many-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="db9c6-216">**Figure 6**: Use the Filtering LinkButtons to Display those Users Whose Username Starts with a Certain Letter  ([Click to view full-size image](building-an-interface-to-select-one-user-account-from-many-cs/_static/image18.png))</span></span>

## <a name="step-4-updating-the-gridview-to-use-paging"></a><span data-ttu-id="db9c6-217">Paso 4: actualizar GridView para usar la paginación</span><span class="sxs-lookup"><span data-stu-id="db9c6-217">Step 4: Updating the GridView to Use Paging</span></span>

<span data-ttu-id="db9c6-218">El control GridView mostrado en las figuras 5 y 6 enumera todos los registros devueltos por el método `FindUsersByName`.</span><span class="sxs-lookup"><span data-stu-id="db9c6-218">The GridView shown in Figures 5 and 6 lists all of the records returned from the `FindUsersByName` method.</span></span> <span data-ttu-id="db9c6-219">Si hay cientos o miles de cuentas de usuario, esto puede provocar una sobrecarga de la información al ver todas las cuentas (como ocurre al hacer clic en todos los LinkButton o al visitar inicialmente la página).</span><span class="sxs-lookup"><span data-stu-id="db9c6-219">If there are hundreds or thousands of user accounts this can lead to information overload when viewing all of the accounts (as is the case when clicking the All LinkButton or when initially visiting the page).</span></span> <span data-ttu-id="db9c6-220">Para ayudar a presentar las cuentas de usuario en fragmentos más fáciles de administrar, vamos a configurar GridView para mostrar 10 cuentas de usuario a la vez.</span><span class="sxs-lookup"><span data-stu-id="db9c6-220">To help present the user accounts in more manageable chunks, let's configure the GridView to display 10 user accounts at a time.</span></span>

<span data-ttu-id="db9c6-221">El control GridView ofrece dos tipos de paginación:</span><span class="sxs-lookup"><span data-stu-id="db9c6-221">The GridView control offers two types of paging:</span></span>

- <span data-ttu-id="db9c6-222">**Paginación predeterminada** : fácil de implementar, pero ineficaz.</span><span class="sxs-lookup"><span data-stu-id="db9c6-222">**Default paging** - easy to implement, but inefficient.</span></span> <span data-ttu-id="db9c6-223">En pocas palabras, con la paginación predeterminada, GridView espera *todos* los registros de su origen de datos.</span><span class="sxs-lookup"><span data-stu-id="db9c6-223">In a nutshell, with default paging the GridView expects *all* of the records from its data source.</span></span> <span data-ttu-id="db9c6-224">A continuación, solo se muestra la página de registros adecuada.</span><span class="sxs-lookup"><span data-stu-id="db9c6-224">It then only displays the appropriate page of records.</span></span>
- <span data-ttu-id="db9c6-225">**Paginación personalizada** : requiere más trabajo para implementar, pero es más eficaz que la paginación predeterminada, ya que con la paginación personalizada el origen de datos solo devuelve el conjunto preciso de registros que se van a mostrar.</span><span class="sxs-lookup"><span data-stu-id="db9c6-225">**Custom paging** - requires more work to implement, but is more efficient than default paging because with custom paging the data source returns only the precise set of records to display.</span></span>

<span data-ttu-id="db9c6-226">La diferencia de rendimiento entre la paginación predeterminada y la paginación personalizada puede ser bastante importante al paginar a través de miles de registros.</span><span class="sxs-lookup"><span data-stu-id="db9c6-226">The performance difference between default and custom paging can be quite substantial when paging through thousands of records.</span></span> <span data-ttu-id="db9c6-227">Dado que estamos creando esta interfaz suponiendo que puede haber cientos o miles de cuentas de usuario, vamos a usar la paginación personalizada.</span><span class="sxs-lookup"><span data-stu-id="db9c6-227">Because we are building this interface assuming that there may be hundreds or thousands of user accounts, let's use custom paging.</span></span>

> [!NOTE]
> <span data-ttu-id="db9c6-228">Para obtener una explicación más detallada sobre las diferencias entre la paginación predeterminada y la paginación personalizada, así como los desafíos que conlleva la implementación de la paginación personalizada, consulte [paginación eficaz a través de grandes cantidades de datos](https://asp.net/learn/data-access/tutorial-25-cs.aspx).</span><span class="sxs-lookup"><span data-stu-id="db9c6-228">For a more thorough discussion on the differences between default and custom paging, as well as the challenges involved in implementing custom paging, refer to [Efficiently Paging Through Large Amounts of Data](https://asp.net/learn/data-access/tutorial-25-cs.aspx).</span></span> <span data-ttu-id="db9c6-229">Para ver algún análisis de la diferencia de rendimiento entre la paginación predeterminada y la paginación personalizada, consulte [paginación personalizada en ASP.net con SQL Server 2005](http://aspnet.4guysfromrolla.com/articles/031506-1.aspx).</span><span class="sxs-lookup"><span data-stu-id="db9c6-229">For some analysis of the performance difference between default and custom paging, see [Custom Paging in ASP.NET with SQL Server 2005](http://aspnet.4guysfromrolla.com/articles/031506-1.aspx).</span></span>

<span data-ttu-id="db9c6-230">Para implementar la paginación personalizada, primero necesitamos algún mecanismo por el que recuperar el subconjunto preciso de los registros que se muestran en GridView.</span><span class="sxs-lookup"><span data-stu-id="db9c6-230">To implement custom paging we first need some mechanism by which to retrieve the precise subset of records being displayed by the GridView.</span></span> <span data-ttu-id="db9c6-231">La buena noticia es que el método `FindUsersByName` de la clase `Membership` tiene una sobrecarga que nos permite especificar el índice de página y el tamaño de página, y solo devuelve las cuentas de usuario que se encuentran dentro de ese intervalo de registros.</span><span class="sxs-lookup"><span data-stu-id="db9c6-231">The good news is that the `Membership` class's `FindUsersByName` method has an overload that allows us to specify the page index and page size, and returns only those user accounts that fall within that range of records.</span></span>

<span data-ttu-id="db9c6-232">En concreto, esta sobrecarga tiene la firma siguiente: [`FindUsersByName(usernameToMatch, pageIndex, pageSize, totalRecords)`](https://msdn.microsoft.com/library/fa5st8b2.aspx).</span><span class="sxs-lookup"><span data-stu-id="db9c6-232">In particular, this overload has the following signature: [`FindUsersByName(usernameToMatch, pageIndex, pageSize, totalRecords)`](https://msdn.microsoft.com/library/fa5st8b2.aspx).</span></span>

<span data-ttu-id="db9c6-233">El parámetro *pageIndex* especifica la página de cuentas de usuario que se va a devolver; *pageSize* indica el número de registros que se van a mostrar por página.</span><span class="sxs-lookup"><span data-stu-id="db9c6-233">The *pageIndex* parameter specifies the page of user accounts to return; *pageSize* indicates how many records to display per page.</span></span> <span data-ttu-id="db9c6-234">El parámetro *totalRecords* es un parámetro `out` que devuelve el número de cuentas de usuario totales en el almacén de usuario.</span><span class="sxs-lookup"><span data-stu-id="db9c6-234">The *totalRecords* parameter is an `out` parameter that returns the number of total user accounts in the user store.</span></span>

> [!NOTE]
> <span data-ttu-id="db9c6-235">Los datos devueltos por `FindUsersByName` se ordenan por nombre de usuario; los criterios de ordenación no se pueden personalizar.</span><span class="sxs-lookup"><span data-stu-id="db9c6-235">The data returned by `FindUsersByName` is sorted by username; the sort criteria cannot be customized.</span></span>

<span data-ttu-id="db9c6-236">GridView puede configurarse para utilizar la paginación personalizada, pero solo cuando se enlaza a un control ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="db9c6-236">The GridView can be configured to utilize custom paging, but only when bound to an ObjectDataSource control.</span></span> <span data-ttu-id="db9c6-237">Para que el control ObjectDataSource implemente la paginación personalizada, requiere dos métodos: uno que se pasa a un índice de fila inicial y el número máximo de registros que se van a mostrar, y devuelve el subconjunto preciso de registros que se encuentran dentro de ese intervalo; y un método que devuelve el número total de registros que se van a paginar.</span><span class="sxs-lookup"><span data-stu-id="db9c6-237">For the ObjectDataSource control to implement custom paging, it requires two methods: one that is passed a start row index and the maximum number of records to display, and returns the precise subset of records that fall within that span; and a method that returns the total number of records being paged through.</span></span> <span data-ttu-id="db9c6-238">La sobrecarga `FindUsersByName` acepta un índice de página y un tamaño de página, y devuelve el número total de registros a través de un parámetro `out`.</span><span class="sxs-lookup"><span data-stu-id="db9c6-238">The `FindUsersByName` overload accepts a page index and page size, and returns the total number of records through an `out` parameter.</span></span> <span data-ttu-id="db9c6-239">Por lo tanto, aquí no coinciden las interfaces.</span><span class="sxs-lookup"><span data-stu-id="db9c6-239">So there is an interface mismatch here.</span></span>

<span data-ttu-id="db9c6-240">Una opción sería crear una clase de proxy que exponga la interfaz que ObjectDataSource espera y, a continuación, llamar internamente al método `FindUsersByName`.</span><span class="sxs-lookup"><span data-stu-id="db9c6-240">One option would be to create a proxy class that exposes the interface the ObjectDataSource expects, and then internally calls the `FindUsersByName` method.</span></span> <span data-ttu-id="db9c6-241">Otra opción, y la que usaremos en este artículo, es crear nuestra propia interfaz de paginación y usarla en lugar de la interfaz de paginación integrada de GridView.</span><span class="sxs-lookup"><span data-stu-id="db9c6-241">Another option - and the one we'll use for this article - is to create our own paging interface and use that instead of the GridView's built-in paging interface.</span></span>

### <a name="creating-a-first-previous-next-last-paging-interface"></a><span data-ttu-id="db9c6-242">Crear una interfaz de paginación primera, anterior, siguiente y última</span><span class="sxs-lookup"><span data-stu-id="db9c6-242">Creating a First, Previous, Next, Last Paging Interface</span></span>

<span data-ttu-id="db9c6-243">Vamos a crear una interfaz de paginación con los primeros, anteriores, siguiente y último LinkButtons.</span><span class="sxs-lookup"><span data-stu-id="db9c6-243">Let's build a paging interface with First, Previous, Next, and Last LinkButtons.</span></span> <span data-ttu-id="db9c6-244">Al hacer clic en el primer LinkButton, se llevará al usuario a la primera página de datos, mientras que el anterior lo devolverá a la página anterior.</span><span class="sxs-lookup"><span data-stu-id="db9c6-244">The First LinkButton, when clicked, will take the user to the first page of data, whereas Previous will return him to the previous page.</span></span> <span data-ttu-id="db9c6-245">Del mismo modo, el siguiente y el último moverán al usuario a la página siguiente y última, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="db9c6-245">Likewise, Next and Last will move the user to the next and last page, respectively.</span></span> <span data-ttu-id="db9c6-246">Agregue los cuatro controles LinkButton debajo del `UserAccounts` GridView.</span><span class="sxs-lookup"><span data-stu-id="db9c6-246">Add the four LinkButton controls beneath the `UserAccounts` GridView.</span></span>

[!code-aspx[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample11.aspx)]

<span data-ttu-id="db9c6-247">A continuación, cree un controlador de eventos para cada uno de los eventos de `Click` de LinkButton.</span><span class="sxs-lookup"><span data-stu-id="db9c6-247">Next, create an event handler for each of the LinkButton's `Click` events.</span></span>

<span data-ttu-id="db9c6-248">En la figura 7 se muestran los cuatro LinkButtons cuando se ven a través de Visual Web Developer Vista de diseño.</span><span class="sxs-lookup"><span data-stu-id="db9c6-248">Figure 7 shows the four LinkButtons when viewed through the Visual Web Developer Design view.</span></span>

<span data-ttu-id="db9c6-249">[![agregar primero, anterior, siguiente y último LinkButtons bajo el control GridView](building-an-interface-to-select-one-user-account-from-many-cs/_static/image20.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="db9c6-249">[![Add First, Previous, Next, and Last LinkButtons Beneath the GridView](building-an-interface-to-select-one-user-account-from-many-cs/_static/image20.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image19.png)</span></span>

<span data-ttu-id="db9c6-250">**Figura 7**: agregar primero, anterior, siguiente y último LinkButtons debajo de GridView ([haga clic para ver la imagen de tamaño completo](building-an-interface-to-select-one-user-account-from-many-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="db9c6-250">**Figure 7**: Add First, Previous, Next, and Last LinkButtons Beneath the GridView  ([Click to view full-size image](building-an-interface-to-select-one-user-account-from-many-cs/_static/image21.png))</span></span>

### <a name="keeping-track-of-the-current-page-index"></a><span data-ttu-id="db9c6-251">Seguimiento del índice de la página actual</span><span class="sxs-lookup"><span data-stu-id="db9c6-251">Keeping Track of the Current Page Index</span></span>

<span data-ttu-id="db9c6-252">Cuando un usuario visita por primera vez la página de `ManageUsers.aspx` o hace clic en uno de los botones de filtrado, queremos mostrar la primera página de datos en el control GridView.</span><span class="sxs-lookup"><span data-stu-id="db9c6-252">When a user first visits the `ManageUsers.aspx` page or clicks one of the filtering buttons, we want to display the first page of data in the GridView.</span></span> <span data-ttu-id="db9c6-253">Sin embargo, cuando el usuario hace clic en uno de los LinkButtons de navegación, es necesario actualizar el índice de la página.</span><span class="sxs-lookup"><span data-stu-id="db9c6-253">When the user clicks one of the navigation LinkButtons, however, we need to update the page index.</span></span> <span data-ttu-id="db9c6-254">Para mantener el índice de la página y el número de registros que se van a mostrar por página, agregue las dos propiedades siguientes a la clase de código subyacente de la página:</span><span class="sxs-lookup"><span data-stu-id="db9c6-254">To maintain the page index and the number of records to display per page, add the following two properties to the page's code-behind class:</span></span>

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample12.cs)]

<span data-ttu-id="db9c6-255">Al igual que la propiedad `UsernameToMatch`, la propiedad `PageIndex` conserva su valor en el estado de vista.</span><span class="sxs-lookup"><span data-stu-id="db9c6-255">Like the `UsernameToMatch` property, the `PageIndex` property persists its value to view state.</span></span> <span data-ttu-id="db9c6-256">La propiedad `PageSize` de solo lectura devuelve un valor codificado de forma rígida, 10.</span><span class="sxs-lookup"><span data-stu-id="db9c6-256">The read-only `PageSize` property returns a hard-coded value, 10.</span></span> <span data-ttu-id="db9c6-257">Deseo invitar al lector interesado a actualizar esta propiedad para que use el mismo patrón que `PageIndex`y, a continuación, aumentar la página de `ManageUsers.aspx` de modo que la persona que visita la página pueda especificar el número de cuentas de usuario que se mostrarán por página.</span><span class="sxs-lookup"><span data-stu-id="db9c6-257">I invite the interested reader to update this property to use the same pattern as `PageIndex`, and then to augment the `ManageUsers.aspx` page such that the person visiting the page can specify how many user accounts to display per page.</span></span>

### <a name="retrieving-just-the-current-pages-records-updating-the-page-index-and-enabling-and-disabling-the-paging-interface-linkbuttons"></a><span data-ttu-id="db9c6-258">Recuperar solo los registros de la página actual, actualizar el índice de la página y habilitar y deshabilitar la interfaz de paginación LinkButtons</span><span class="sxs-lookup"><span data-stu-id="db9c6-258">Retrieving Just the Current Page's Records, Updating the Page Index, and Enabling and Disabling the Paging Interface LinkButtons</span></span>

<span data-ttu-id="db9c6-259">Con la interfaz de paginación en contexto y las propiedades `PageIndex` y `PageSize` agregadas, estamos listos para actualizar el método `BindUserAccounts` de modo que use la sobrecarga `FindUsersByName` adecuada.</span><span class="sxs-lookup"><span data-stu-id="db9c6-259">With the paging interface in place and the `PageIndex` and `PageSize` properties added, we are ready to update the `BindUserAccounts` method so that it uses the appropriate `FindUsersByName` overload.</span></span> <span data-ttu-id="db9c6-260">Además, es necesario que este método habilite o deshabilite la interfaz de paginación en función de la página que se muestre.</span><span class="sxs-lookup"><span data-stu-id="db9c6-260">Additionally, we need to have this method enable or disable the paging interface depending on what page is being displayed.</span></span> <span data-ttu-id="db9c6-261">Al ver la primera página de datos, se deben deshabilitar los vínculos primero y anterior; El siguiente y el último deben deshabilitarse al ver la última página.</span><span class="sxs-lookup"><span data-stu-id="db9c6-261">When viewing the first page of data, the First and Previous links should be disabled; Next and Last should be disabled when viewing the last page.</span></span>

<span data-ttu-id="db9c6-262">Actualice el método `BindUserAccounts` con el código siguiente:</span><span class="sxs-lookup"><span data-stu-id="db9c6-262">Update the `BindUserAccounts` method with the following code:</span></span>

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample13.cs)]

<span data-ttu-id="db9c6-263">Tenga en cuenta que el número total de registros que se van a paginar viene determinado por el último parámetro del método `FindUsersByName`.</span><span class="sxs-lookup"><span data-stu-id="db9c6-263">Note that the total number of records being paged through is determined by the last parameter of the `FindUsersByName` method.</span></span> <span data-ttu-id="db9c6-264">Se trata de un parámetro `out`, por lo que es necesario declarar primero una variable para que contenga este valor (`totalRecords`) y, después, agregarle el prefijo con la palabra clave `out`.</span><span class="sxs-lookup"><span data-stu-id="db9c6-264">This is an `out` parameter, so we need to first declare a variable to hold this value (`totalRecords`) and then prefix it with the `out` keyword.</span></span>

<span data-ttu-id="db9c6-265">Una vez que se devuelve la página especificada de cuentas de usuario, los cuatro LinkButtons se habilitan o deshabilitan, dependiendo de si se está viendo la primera o la última página de datos.</span><span class="sxs-lookup"><span data-stu-id="db9c6-265">After the specified page of user accounts are returned, the four LinkButtons are either enabled or disabled, depending on whether the first or last page of data is being viewed.</span></span>

<span data-ttu-id="db9c6-266">El último paso es escribir el código para los cuatro controladores de eventos de LinkButtons ' `Click`.</span><span class="sxs-lookup"><span data-stu-id="db9c6-266">The last step is to write the code for the four LinkButtons' `Click` event handlers.</span></span> <span data-ttu-id="db9c6-267">Estos controladores de eventos deben actualizar la propiedad `PageIndex` y, a continuación, volver a enlazar los datos a GridView a través de una llamada a `BindUserAccounts`.</span><span class="sxs-lookup"><span data-stu-id="db9c6-267">These event handlers need to update the `PageIndex` property and then rebind the data to the GridView via a call to `BindUserAccounts`.</span></span> <span data-ttu-id="db9c6-268">Los controladores de eventos primero, anterior y siguiente son muy sencillos.</span><span class="sxs-lookup"><span data-stu-id="db9c6-268">The First, Previous, and Next event handlers are very simple.</span></span> <span data-ttu-id="db9c6-269">Sin embargo, el controlador de eventos `Click` para el último LinkButton es un poco más complejo porque es necesario determinar el número de registros que se muestran para determinar el índice de la última página.</span><span class="sxs-lookup"><span data-stu-id="db9c6-269">The `Click` event handler for the Last LinkButton, however, is a bit more complex because we need to determine how many records are being displayed in order to determine the last page index.</span></span>

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample14.cs)]

<span data-ttu-id="db9c6-270">En las figuras 8 y 9 se muestra la interfaz de paginación personalizada en acción.</span><span class="sxs-lookup"><span data-stu-id="db9c6-270">Figures 8 and 9 show the custom paging interface in action.</span></span> <span data-ttu-id="db9c6-271">En la figura 8 se muestra la página `ManageUsers.aspx` al ver la primera página de datos de todas las cuentas de usuario.</span><span class="sxs-lookup"><span data-stu-id="db9c6-271">Figure 8 shows the `ManageUsers.aspx` page when viewing the first page of data for all user accounts.</span></span> <span data-ttu-id="db9c6-272">Tenga en cuenta que solo se muestran 10 de las 13 cuentas.</span><span class="sxs-lookup"><span data-stu-id="db9c6-272">Note that only 10 of the 13 accounts are displayed.</span></span> <span data-ttu-id="db9c6-273">Al hacer clic en el vínculo siguiente o último, se genera un postback, se actualiza el `PageIndex` en 1 y se enlaza la segunda página de las cuentas de usuario a la cuadrícula (vea la ilustración 9).</span><span class="sxs-lookup"><span data-stu-id="db9c6-273">Clicking the Next or Last link causes a postback, updates the `PageIndex` to 1, and binds the second page of user accounts to the grid (see Figure 9).</span></span>

<span data-ttu-id="db9c6-274">[![se muestran las 10 primeras cuentas de usuario](building-an-interface-to-select-one-user-account-from-many-cs/_static/image23.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="db9c6-274">[![The First 10 User Accounts are Displayed](building-an-interface-to-select-one-user-account-from-many-cs/_static/image23.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image22.png)</span></span>

<span data-ttu-id="db9c6-275">**Figura 8**: se muestran las 10 primeras cuentas de usuario ([haga clic para ver la imagen de tamaño completo](building-an-interface-to-select-one-user-account-from-many-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="db9c6-275">**Figure 8**: The First 10 User Accounts are Displayed  ([Click to view full-size image](building-an-interface-to-select-one-user-account-from-many-cs/_static/image24.png))</span></span>

<span data-ttu-id="db9c6-276">[![hacer clic en el vínculo siguiente muestra la segunda página de las cuentas de usuario](building-an-interface-to-select-one-user-account-from-many-cs/_static/image26.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="db9c6-276">[![Clicking the Next Link Displays the Second Page of User Accounts](building-an-interface-to-select-one-user-account-from-many-cs/_static/image26.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image25.png)</span></span>

<span data-ttu-id="db9c6-277">**Figura 9**: hacer clic en el vínculo siguiente muestra la segunda página de cuentas de usuario ([haga clic para ver la imagen de tamaño completo](building-an-interface-to-select-one-user-account-from-many-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="db9c6-277">**Figure 9**: Clicking the Next Link Displays the Second Page of User Accounts  ([Click to view full-size image](building-an-interface-to-select-one-user-account-from-many-cs/_static/image27.png))</span></span>

## <a name="summary"></a><span data-ttu-id="db9c6-278">Resumen</span><span class="sxs-lookup"><span data-stu-id="db9c6-278">Summary</span></span>

<span data-ttu-id="db9c6-279">A menudo, los administradores necesitan seleccionar un usuario de la lista de cuentas.</span><span class="sxs-lookup"><span data-stu-id="db9c6-279">Administrators often need to select a user from the list of accounts.</span></span> <span data-ttu-id="db9c6-280">En los tutoriales anteriores, analizamos el uso de una lista desplegable que se rellenó con los usuarios, pero este enfoque no se escala bien.</span><span class="sxs-lookup"><span data-stu-id="db9c6-280">In previous tutorials we looked at using a drop-down list populated with the users, but this approach does not scale well.</span></span> <span data-ttu-id="db9c6-281">En este tutorial se ha explorado una alternativa mejor: una interfaz filtrable cuyos resultados se muestran en un control GridView paginado.</span><span class="sxs-lookup"><span data-stu-id="db9c6-281">In this tutorial we explored a better alternative: a filterable interface whose results are displayed in a paged GridView.</span></span> <span data-ttu-id="db9c6-282">Con esta interfaz de usuario, los administradores pueden localizar y seleccionar de forma rápida y eficaz una cuenta de usuario entre miles.</span><span class="sxs-lookup"><span data-stu-id="db9c6-282">With this user interface, administrators can quickly and efficiently locate and select one user account among thousands.</span></span>

<span data-ttu-id="db9c6-283">¡ Feliz programación!</span><span class="sxs-lookup"><span data-stu-id="db9c6-283">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="db9c6-284">Información adicional</span><span class="sxs-lookup"><span data-stu-id="db9c6-284">Further Reading</span></span>

<span data-ttu-id="db9c6-285">Para obtener más información sobre los temas descritos en este tutorial, consulte los siguientes recursos:</span><span class="sxs-lookup"><span data-stu-id="db9c6-285">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="db9c6-286">Paginación personalizada en ASP.NET con SQL Server 2005</span><span class="sxs-lookup"><span data-stu-id="db9c6-286">Custom Paging in ASP.NET with SQL Server 2005</span></span>](http://aspnet.4guysfromrolla.com/articles/031506-1.aspx)
- [<span data-ttu-id="db9c6-287">Paginación eficaz a través de grandes cantidades de datos</span><span class="sxs-lookup"><span data-stu-id="db9c6-287">Efficiently Paging Through Large Amounts of Data</span></span>](https://asp.net/learn/data-access/tutorial-25-cs.aspx)
- [<span data-ttu-id="db9c6-288">Implementación de su propia herramienta de administración de sitios web</span><span class="sxs-lookup"><span data-stu-id="db9c6-288">Rolling Your Own Website Administration Tool</span></span>](http://aspnet.4guysfromrolla.com/articles/052307-1.aspx)

### <a name="about-the-author"></a><span data-ttu-id="db9c6-289">Acerca del autor</span><span class="sxs-lookup"><span data-stu-id="db9c6-289">About the Author</span></span>

<span data-ttu-id="db9c6-290">Scott Mitchell, autor de varios libros de ASP/ASP. NET y fundador de 4GuysFromRolla.com, ha estado trabajando con las tecnologías Web de Microsoft desde 1998.</span><span class="sxs-lookup"><span data-stu-id="db9c6-290">Scott Mitchell, author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="db9c6-291">Scott funciona como consultor, profesor y redactor independiente.</span><span class="sxs-lookup"><span data-stu-id="db9c6-291">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="db9c6-292">Su último libro se *[enseña a ASP.NET 2,0 en 24 horas](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)* .</span><span class="sxs-lookup"><span data-stu-id="db9c6-292">His latest book is *[Sams Teach Yourself ASP.NET 2.0 in 24 Hours](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span></span> <span data-ttu-id="db9c6-293">Se puede acceder a Scott en [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) o a través de su blog en [http://ScottOnWriting.NET](http://scottonwriting.net/).</span><span class="sxs-lookup"><span data-stu-id="db9c6-293">Scott can be reached at [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="db9c6-294">Agradecimiento especial a</span><span class="sxs-lookup"><span data-stu-id="db9c6-294">Special Thanks To</span></span>

<span data-ttu-id="db9c6-295">Muchos revisores útiles revisaron esta serie de tutoriales.</span><span class="sxs-lookup"><span data-stu-id="db9c6-295">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="db9c6-296">El revisor del cliente potencial de este tutorial fue Alicja Maziarz.</span><span class="sxs-lookup"><span data-stu-id="db9c6-296">Lead reviewer for this tutorial was Alicja Maziarz.</span></span> <span data-ttu-id="db9c6-297">¿Está interesado en revisar los próximos artículos de MSDN?</span><span class="sxs-lookup"><span data-stu-id="db9c6-297">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="db9c6-298">Si es así, coloque una línea en [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="db9c6-298">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="db9c6-299">Siguiente</span><span class="sxs-lookup"><span data-stu-id="db9c6-299">Next</span></span>](recovering-and-changing-passwords-cs.md)
