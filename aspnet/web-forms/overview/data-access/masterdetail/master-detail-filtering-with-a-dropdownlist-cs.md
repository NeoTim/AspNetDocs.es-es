---
uid: web-forms/overview/data-access/masterdetail/master-detail-filtering-with-a-dropdownlist-cs
title: Filtrado de maestro y detalles con DropDownList (C#) | Microsoft Docs
author: rick-anderson
description: En este tutorial, veremos cómo mostrar los registros maestros en un control DropDownList y los detalles del elemento de lista seleccionado en GridView.
ms.author: riande
ms.date: 03/31/2010
ms.assetid: 53e659cc-eefb-40c1-a1dc-559481c99443
msc.legacyurl: /web-forms/overview/data-access/masterdetail/master-detail-filtering-with-a-dropdownlist-cs
msc.type: authoredcontent
ms.openlocfilehash: 3ec549f9da7a2b3a021e77827f0039e6ae60b5c5
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 03/06/2020
ms.locfileid: "78424573"
---
# <a name="masterdetail-filtering-with-a-dropdownlist-c"></a><span data-ttu-id="bdb49-103">Filtrado de maestro y detalles con DropDownList (C#)</span><span class="sxs-lookup"><span data-stu-id="bdb49-103">Master/Detail Filtering With a DropDownList (C#)</span></span>

<span data-ttu-id="bdb49-104">por [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="bdb49-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="bdb49-105">[Descarga](https://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_7_CS.exe) de la aplicación de ejemplo o [descarga de PDF](master-detail-filtering-with-a-dropdownlist-cs/_static/datatutorial07cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="bdb49-105">[Download Sample App](https://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_7_CS.exe) or [Download PDF](master-detail-filtering-with-a-dropdownlist-cs/_static/datatutorial07cs1.pdf)</span></span>

> <span data-ttu-id="bdb49-106">En este tutorial, veremos cómo mostrar los registros maestros en un control DropDownList y los detalles del elemento de lista seleccionado en GridView.</span><span class="sxs-lookup"><span data-stu-id="bdb49-106">In this tutorial we'll see how to display the master records in a DropDownList control and the details of the selected list item in a GridView.</span></span>

## <a name="introduction"></a><span data-ttu-id="bdb49-107">Introducción</span><span class="sxs-lookup"><span data-stu-id="bdb49-107">Introduction</span></span>

<span data-ttu-id="bdb49-108">Un tipo común de informe es el *Informe principal/detalle*, en el que el informe comienza mostrando algún conjunto de registros "maestros".</span><span class="sxs-lookup"><span data-stu-id="bdb49-108">A common type of report is the *master/detail report*, in which the report begins by showing some set of "master" records.</span></span> <span data-ttu-id="bdb49-109">A continuación, el usuario puede profundizar en uno de los registros maestros y, por lo tanto, ver los "detalles" de ese registro maestro.</span><span class="sxs-lookup"><span data-stu-id="bdb49-109">The user can then drill down into one of the master records, thereby viewing that master record's "details."</span></span> <span data-ttu-id="bdb49-110">Los informes maestros y detallados son una opción ideal para visualizar relaciones uno a varios, como un informe que muestre todas las categorías y, a continuación, permitir que un usuario seleccione una categoría determinada y muestre sus productos asociados.</span><span class="sxs-lookup"><span data-stu-id="bdb49-110">Master/detail reports are an ideal choice for visualizing one-to-many relationships, such as a report showing all of the categories and then allowing a user to select a particular category and display its associated products.</span></span> <span data-ttu-id="bdb49-111">Además, los informes maestros y detallados son útiles para mostrar información detallada de tablas "amplias" (que tienen muchas columnas).</span><span class="sxs-lookup"><span data-stu-id="bdb49-111">Additionally, master/detail reports are useful for displaying detailed information from particularly "wide" tables (ones that have a lot of columns).</span></span> <span data-ttu-id="bdb49-112">Por ejemplo, el nivel "principal" de un informe principal/detalle podría mostrar solo el nombre del producto y el precio unitario de los productos de la base de datos, y explorar en profundidad un producto concreto mostraría los campos de producto adicionales (categoría, proveedor, cantidad por unidad, etc.).</span><span class="sxs-lookup"><span data-stu-id="bdb49-112">For example, the "master" level of a master/detail report might show just the product name and unit price of the products in the database, and drilling down into a particular product would show the additional product fields (category, supplier, quantity per unit, and so on).</span></span>

<span data-ttu-id="bdb49-113">Hay muchas maneras con las que se puede implementar un informe maestro y detalles.</span><span class="sxs-lookup"><span data-stu-id="bdb49-113">There are many ways with which a master/detail report can be implemented.</span></span> <span data-ttu-id="bdb49-114">En este y en los tres tutoriales siguientes veremos una variedad de informes maestros y detallados.</span><span class="sxs-lookup"><span data-stu-id="bdb49-114">Over this and the next three tutorials we'll look at a variety of master/detail reports.</span></span> <span data-ttu-id="bdb49-115">En este tutorial, veremos cómo mostrar los registros maestros en un [control DropDownList](https://msdn.microsoft.com/library/dtx91y0z.aspx) y los detalles del elemento de lista seleccionado en GridView.</span><span class="sxs-lookup"><span data-stu-id="bdb49-115">In this tutorial we'll see how to display the master records in a [DropDownList control](https://msdn.microsoft.com/library/dtx91y0z.aspx) and the details of the selected list item in a GridView.</span></span> <span data-ttu-id="bdb49-116">En concreto, el informe maestro y detalles de este tutorial mostrará la información de la categoría y del producto.</span><span class="sxs-lookup"><span data-stu-id="bdb49-116">In particular, this tutorial's master/detail report will list category and product information.</span></span>

## <a name="step-1-displaying-the-categories-in-a-dropdownlist"></a><span data-ttu-id="bdb49-117">Paso 1: Mostrar las categorías de un DropDownList</span><span class="sxs-lookup"><span data-stu-id="bdb49-117">Step 1: Displaying the Categories in a DropDownList</span></span>

<span data-ttu-id="bdb49-118">En el informe maestro y detalles se enumeran las categorías de un DropDownList, con los productos del elemento de la lista seleccionados más abajo en la página en un control GridView.</span><span class="sxs-lookup"><span data-stu-id="bdb49-118">Our master/detail report will list the categories in a DropDownList, with the selected list item's products displayed further down in the page in a GridView.</span></span> <span data-ttu-id="bdb49-119">La primera tarea, a continuación, es hacer que las categorías se muestren en un DropDownList.</span><span class="sxs-lookup"><span data-stu-id="bdb49-119">The first task ahead of us, then, is to have the categories displayed in a DropDownList.</span></span> <span data-ttu-id="bdb49-120">Abra la página `FilterByDropDownList.aspx` de la carpeta `Filtering`, arrastre un DropDownList desde el cuadro de herramientas hasta el diseñador de la página y establezca su propiedad `ID` en `Categories`.</span><span class="sxs-lookup"><span data-stu-id="bdb49-120">Open the `FilterByDropDownList.aspx` page in the `Filtering` folder, drag on a DropDownList from the Toolbox onto the page's designer, and set its `ID` property to `Categories`.</span></span> <span data-ttu-id="bdb49-121">A continuación, haga clic en el vínculo elegir origen de datos de la etiqueta inteligente de DropDownList.</span><span class="sxs-lookup"><span data-stu-id="bdb49-121">Next, click on the Choose Data Source link from the DropDownList's smart tag.</span></span> <span data-ttu-id="bdb49-122">Se mostrará el Asistente para la configuración de orígenes de datos.</span><span class="sxs-lookup"><span data-stu-id="bdb49-122">This will display the Data Source Configuration wizard.</span></span>

<span data-ttu-id="bdb49-123">[![especificar el origen de datos de DropDownList](master-detail-filtering-with-a-dropdownlist-cs/_static/image2.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="bdb49-123">[![Specify the DropDownList's Data Source](master-detail-filtering-with-a-dropdownlist-cs/_static/image2.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image1.png)</span></span>

<span data-ttu-id="bdb49-124">**Figura 1**: Especifique el origen de datos de DropDownList ([haga clic para ver la imagen de tamaño completo](master-detail-filtering-with-a-dropdownlist-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="bdb49-124">**Figure 1**: Specify the DropDownList's Data Source ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image3.png))</span></span>

<span data-ttu-id="bdb49-125">Elija Agregar un nuevo ObjectDataSource denominado `CategoriesDataSource` que invoque el método `GetCategories()` de la clase `CategoriesBLL`.</span><span class="sxs-lookup"><span data-stu-id="bdb49-125">Choose to add a new ObjectDataSource named `CategoriesDataSource` that invokes the `CategoriesBLL` class's `GetCategories()` method.</span></span>

<span data-ttu-id="bdb49-126">[![agregar un nuevo ObjectDataSource denominado CategoriesDataSource](master-detail-filtering-with-a-dropdownlist-cs/_static/image5.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="bdb49-126">[![Add a New ObjectDataSource Named CategoriesDataSource](master-detail-filtering-with-a-dropdownlist-cs/_static/image5.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image4.png)</span></span>

<span data-ttu-id="bdb49-127">**Figura 2**: Agregue un nuevo ObjectDataSource denominado `CategoriesDataSource` ([haga clic para ver la imagen de tamaño completo](master-detail-filtering-with-a-dropdownlist-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="bdb49-127">**Figure 2**: Add a New ObjectDataSource Named `CategoriesDataSource` ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image6.png))</span></span>

<span data-ttu-id="bdb49-128">[![optar por usar la clase CategoriesBLL](master-detail-filtering-with-a-dropdownlist-cs/_static/image8.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="bdb49-128">[![Choose to Use the CategoriesBLL Class](master-detail-filtering-with-a-dropdownlist-cs/_static/image8.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image7.png)</span></span>

<span data-ttu-id="bdb49-129">**Figura 3**: Elija usar la clase `CategoriesBLL` ([haga clic para ver la imagen de tamaño completo](master-detail-filtering-with-a-dropdownlist-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="bdb49-129">**Figure 3**: Choose to Use the `CategoriesBLL` Class ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image9.png))</span></span>

<span data-ttu-id="bdb49-130">[![configurar ObjectDataSource para usar el método GetCategories ()](master-detail-filtering-with-a-dropdownlist-cs/_static/image11.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="bdb49-130">[![Configure the ObjectDataSource to Use the GetCategories() Method](master-detail-filtering-with-a-dropdownlist-cs/_static/image11.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image10.png)</span></span>

<span data-ttu-id="bdb49-131">**Figura 4**: Configurar ObjectDataSource para usar el método `GetCategories()` ([haga clic para ver la imagen de tamaño completo](master-detail-filtering-with-a-dropdownlist-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="bdb49-131">**Figure 4**: Configure the ObjectDataSource to Use the `GetCategories()` Method ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image12.png))</span></span>

<span data-ttu-id="bdb49-132">Después de configurar el ObjectDataSource, todavía necesitamos especificar qué campo de origen de datos se debe mostrar en DropDownList y cuál debe asociarse como valor para el elemento de lista.</span><span class="sxs-lookup"><span data-stu-id="bdb49-132">After configuring the ObjectDataSource we still need to specify what data source field should be displayed in DropDownList and which one should be associated as the value for the list item.</span></span> <span data-ttu-id="bdb49-133">Tenga el campo `CategoryName` como pantalla y `CategoryID` como el valor de cada elemento de la lista.</span><span class="sxs-lookup"><span data-stu-id="bdb49-133">Have the `CategoryName` field as the display and `CategoryID` as the value for each list item.</span></span>

<span data-ttu-id="bdb49-134">[![que el DropDownList muestre el campo CategoryName y use CategoryID como valor](master-detail-filtering-with-a-dropdownlist-cs/_static/image14.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="bdb49-134">[![Have the DropDownList Display the CategoryName Field and Use CategoryID as the Value](master-detail-filtering-with-a-dropdownlist-cs/_static/image14.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image13.png)</span></span>

<span data-ttu-id="bdb49-135">**Figura 5**: Haga que el DropDownList muestre el campo `CategoryName` y use `CategoryID` como valor ([haga clic para ver la imagen de tamaño completo](master-detail-filtering-with-a-dropdownlist-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="bdb49-135">**Figure 5**: Have the DropDownList Display the `CategoryName` Field and Use `CategoryID` as the Value ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image15.png))</span></span>

<span data-ttu-id="bdb49-136">En este momento, tenemos un control DropDownList que se rellena con los registros de la tabla `Categories` (todo se realiza en unos seis segundos).</span><span class="sxs-lookup"><span data-stu-id="bdb49-136">At this point we have a DropDownList control that's populated with the records from the `Categories` table (all accomplished in about six seconds).</span></span> <span data-ttu-id="bdb49-137">En la ilustración 6 se muestra nuestro progreso hasta ahora cuando se ve a través de un explorador.</span><span class="sxs-lookup"><span data-stu-id="bdb49-137">Figure 6 shows our progress thus far when viewed through a browser.</span></span>

<span data-ttu-id="bdb49-138">[![una lista desplegable muestra las categorías actuales](master-detail-filtering-with-a-dropdownlist-cs/_static/image17.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="bdb49-138">[![A Drop-Down Lists the Current Categories](master-detail-filtering-with-a-dropdownlist-cs/_static/image17.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image16.png)</span></span>

<span data-ttu-id="bdb49-139">**Ilustración 6**: Una lista desplegable muestra las categorías actuales ([haga clic para ver la imagen de tamaño completo](master-detail-filtering-with-a-dropdownlist-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="bdb49-139">**Figure 6**: A Drop-Down Lists the Current Categories ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image18.png))</span></span>

## <a name="step-2-adding-the-products-gridview"></a><span data-ttu-id="bdb49-140">Paso 2: Agregar los productos GridView</span><span class="sxs-lookup"><span data-stu-id="bdb49-140">Step 2: Adding the Products GridView</span></span>

<span data-ttu-id="bdb49-141">El último paso en el informe maestro y detalles es enumerar los productos asociados a la categoría seleccionada.</span><span class="sxs-lookup"><span data-stu-id="bdb49-141">That last step in our master/detail report is to list the products associated with the selected category.</span></span> <span data-ttu-id="bdb49-142">Para ello, agregue un control GridView a la página y cree un nuevo ObjectDataSource denominado `productsDataSource`.</span><span class="sxs-lookup"><span data-stu-id="bdb49-142">To accomplish this, add a GridView to the page and create a new ObjectDataSource named `productsDataSource`.</span></span> <span data-ttu-id="bdb49-143">Haga que el control `productsDataSource` represente sus datos del método `GetProductsByCategoryID(categoryID)` de la clase `ProductsBLL`.</span><span class="sxs-lookup"><span data-stu-id="bdb49-143">Have the `productsDataSource` control cull its data from the `ProductsBLL` class's `GetProductsByCategoryID(categoryID)` method.</span></span>

<span data-ttu-id="bdb49-144">[![seleccionar el método GetProductsByCategoryID (categoryID)](master-detail-filtering-with-a-dropdownlist-cs/_static/image20.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="bdb49-144">[![Select the GetProductsByCategoryID(categoryID) Method](master-detail-filtering-with-a-dropdownlist-cs/_static/image20.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image19.png)</span></span>

<span data-ttu-id="bdb49-145">**Figura 7**: Seleccione el método `GetProductsByCategoryID(categoryID)` ([haga clic para ver la imagen de tamaño completo](master-detail-filtering-with-a-dropdownlist-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="bdb49-145">**Figure 7**: Select the `GetProductsByCategoryID(categoryID)` Method ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image21.png))</span></span>

<span data-ttu-id="bdb49-146">Después de elegir este método, el Asistente para ObjectDataSource nos pide el valor del parámetro *`categoryID`* del método.</span><span class="sxs-lookup"><span data-stu-id="bdb49-146">After choosing this method, the ObjectDataSource wizard prompts us for the value for the method's *`categoryID`* parameter.</span></span> <span data-ttu-id="bdb49-147">Para usar el valor del elemento `categories` DropDownList seleccionado, establezca el origen del parámetro en control y el ControlID en `Categories`.</span><span class="sxs-lookup"><span data-stu-id="bdb49-147">To use the value of the selected `categories` DropDownList item set the Parameter source to Control and the ControlID to `Categories`.</span></span>

<span data-ttu-id="bdb49-148">[![establecer el parámetro categoryID en el valor de las categorías DropDownList](master-detail-filtering-with-a-dropdownlist-cs/_static/image23.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="bdb49-148">[![Set the categoryID Parameter to the Value of the Categories DropDownList](master-detail-filtering-with-a-dropdownlist-cs/_static/image23.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image22.png)</span></span>

<span data-ttu-id="bdb49-149">**Figura 8**: Establezca el parámetro *`categoryID`* en el valor de la `Categories` DropDownList ([haga clic para ver la imagen de tamaño completo](master-detail-filtering-with-a-dropdownlist-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="bdb49-149">**Figure 8**: Set the *`categoryID`* Parameter to the Value of the `Categories` DropDownList ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image24.png))</span></span>

<span data-ttu-id="bdb49-150">Dedique un momento a consultar nuestro progreso en un explorador.</span><span class="sxs-lookup"><span data-stu-id="bdb49-150">Take a moment to check out our progress in a browser.</span></span> <span data-ttu-id="bdb49-151">Al visitar la página por primera vez, se muestran los productos que pertenecen a la categoría seleccionada (bebidas) (como se muestra en la figura 9), pero el cambio de DropDownList no actualiza los datos.</span><span class="sxs-lookup"><span data-stu-id="bdb49-151">When first visiting the page, those products belong to the selected category (Beverages) are displayed (as shown in Figure 9), but changing the DropDownList doesn't update the data.</span></span> <span data-ttu-id="bdb49-152">Esto se debe a que hay que hacer un postback para que GridView se actualice.</span><span class="sxs-lookup"><span data-stu-id="bdb49-152">This is because a postback must occur for the GridView to update.</span></span> <span data-ttu-id="bdb49-153">Para lograr esto, tenemos dos opciones (ninguno de los cuales requiere la escritura de código):</span><span class="sxs-lookup"><span data-stu-id="bdb49-153">To accomplish this we have two options (neither of which requires writing any code):</span></span>

- <span data-ttu-id="bdb49-154">**Establezca la propiedad** [AutoPostBack](https://msdn.microsoft.com/library/system.web.ui.webcontrols.listcontrol.autopostback%28VS.80%29.aspx) **de la categoría de DropDownList en true.**</span><span class="sxs-lookup"><span data-stu-id="bdb49-154">**Set the categories DropDownList's**[AutoPostBack property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.listcontrol.autopostback%28VS.80%29.aspx)**to True.**</span></span> <span data-ttu-id="bdb49-155">(Para ello, active la opción Habilitar AutoPostBack en la etiqueta inteligente de DropDownList). Esto desencadenará un postback cuando el usuario cambie el elemento seleccionado de DropDownList.</span><span class="sxs-lookup"><span data-stu-id="bdb49-155">(You can accomplish this by checking the Enable AutoPostBack option in the DropDownList's smart tag.) This will trigger a postback whenever the DropDownList's selected item is changed by the user.</span></span> <span data-ttu-id="bdb49-156">Por lo tanto, cuando el usuario selecciona una nueva categoría del DropDownList, se producirá un postback y el control GridView se actualizará con los productos de la categoría que se acaba de seleccionar.</span><span class="sxs-lookup"><span data-stu-id="bdb49-156">Therefore, when the user selects a new category from the DropDownList a postback will ensue and the GridView will be updated with the products for the newly selected category.</span></span> <span data-ttu-id="bdb49-157">(Este es el enfoque que he usado en este tutorial).</span><span class="sxs-lookup"><span data-stu-id="bdb49-157">(This is the approach I've used in this tutorial.)</span></span>
- <span data-ttu-id="bdb49-158">**Agregue un control Web Button junto a DropDownList.**</span><span class="sxs-lookup"><span data-stu-id="bdb49-158">**Add a Button Web control next to the DropDownList.**</span></span> <span data-ttu-id="bdb49-159">Establezca su propiedad `Text` en actualizar o algo similar.</span><span class="sxs-lookup"><span data-stu-id="bdb49-159">Set its `Text` property to Refresh or something similar.</span></span> <span data-ttu-id="bdb49-160">Con este enfoque, el usuario deberá seleccionar una nueva categoría y, a continuación, hacer clic en el botón.</span><span class="sxs-lookup"><span data-stu-id="bdb49-160">With this approach, the user will need to select a new category and then click the Button.</span></span> <span data-ttu-id="bdb49-161">Al hacer clic en el botón, se producirá un postback y se actualizará el control GridView para mostrar los productos de la categoría seleccionada.</span><span class="sxs-lookup"><span data-stu-id="bdb49-161">Clicking the Button will cause a postback and update the GridView to list those products of the selected category.</span></span>

<span data-ttu-id="bdb49-162">Las figuras 9 y 10 muestran el informe maestro y detalles en acción.</span><span class="sxs-lookup"><span data-stu-id="bdb49-162">Figures 9 and 10 illustrate the master/detail report in action.</span></span>

<span data-ttu-id="bdb49-163">[![al visitar la página por primera vez, se muestran los productos de bebidas](master-detail-filtering-with-a-dropdownlist-cs/_static/image26.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="bdb49-163">[![When First Visiting the Page, the Beverage Products are Displayed](master-detail-filtering-with-a-dropdownlist-cs/_static/image26.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image25.png)</span></span>

<span data-ttu-id="bdb49-164">**Ilustración 9**: Al visitar la página por primera vez, se muestran los productos de bebidas ([haga clic para ver la imagen de tamaño completo](master-detail-filtering-with-a-dropdownlist-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="bdb49-164">**Figure 9**: When First Visiting the Page, the Beverage Products are Displayed ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image27.png))</span></span>

<span data-ttu-id="bdb49-165">[![seleccionar un nuevo producto (producir) genera automáticamente un postback, actualizando GridView](master-detail-filtering-with-a-dropdownlist-cs/_static/image29.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="bdb49-165">[![Selecting a New Product (Produce) Automatically Causes a PostBack, Updating the GridView](master-detail-filtering-with-a-dropdownlist-cs/_static/image29.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image28.png)</span></span>

<span data-ttu-id="bdb49-166">**Figura 10**: Al seleccionar un nuevo producto (producir) se genera automáticamente un postback, actualizando GridView ([haga clic para ver la imagen de tamaño completo](master-detail-filtering-with-a-dropdownlist-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="bdb49-166">**Figure 10**: Selecting a New Product (Produce) Automatically Causes a PostBack, Updating the GridView ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image30.png))</span></span>

## <a name="adding-a----choose-a-category----list-item"></a><span data-ttu-id="bdb49-167">Adición de un elemento de lista "--Choose a Category--"</span><span class="sxs-lookup"><span data-stu-id="bdb49-167">Adding a "-- Choose a Category --" List Item</span></span>

<span data-ttu-id="bdb49-168">Al visitar por primera vez la página `FilterByDropDownList.aspx`, el primer elemento de la lista (bebidas) de DropDownList de la categoría está seleccionado de forma predeterminada y muestra los productos de bebidas en GridView.</span><span class="sxs-lookup"><span data-stu-id="bdb49-168">When first visiting the `FilterByDropDownList.aspx` page the categories DropDownList's first list item (Beverages) is selected by default, showing the beverage products in the GridView.</span></span> <span data-ttu-id="bdb49-169">En lugar de mostrar los productos de la primera categoría, es posible que quiera tener un elemento DropDownList seleccionado que indique algo parecido a "--Choose a Category--".</span><span class="sxs-lookup"><span data-stu-id="bdb49-169">Rather than showing the first category's products, we may want to instead have a DropDownList item selected that says something like, "-- Choose a Category --".</span></span>

<span data-ttu-id="bdb49-170">Para agregar un nuevo elemento de lista a DropDownList, vaya al ventana Propiedades y haga clic en los puntos suspensivos de la propiedad `Items`.</span><span class="sxs-lookup"><span data-stu-id="bdb49-170">To add a new list item to the DropDownList, go to the Properties window and click on the ellipses in the `Items` property.</span></span> <span data-ttu-id="bdb49-171">Agregue un nuevo elemento de lista con el `Text` "--Choose a Category--" y el `Value` `-1`.</span><span class="sxs-lookup"><span data-stu-id="bdb49-171">Add a new list item with the `Text` "-- Choose a Category --" and the `Value` `-1`.</span></span>

<span data-ttu-id="bdb49-172">[![agregar a: elegir una categoría: elemento de lista](master-detail-filtering-with-a-dropdownlist-cs/_static/image32.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="bdb49-172">[![Add a -- Choose a Category -- List Item](master-detail-filtering-with-a-dropdownlist-cs/_static/image32.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image31.png)</span></span>

<span data-ttu-id="bdb49-173">**Figura 11**: Agregar un: elija una categoría: elemento de lista ([haga clic para ver la imagen de tamaño completo](master-detail-filtering-with-a-dropdownlist-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="bdb49-173">**Figure 11**: Add a -- Choose a Category -- List Item ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image33.png))</span></span>

<span data-ttu-id="bdb49-174">Como alternativa, puede Agregar el elemento de lista agregando el siguiente marcado a DropDownList:</span><span class="sxs-lookup"><span data-stu-id="bdb49-174">Alternatively, you can add the list item by adding the following markup to the DropDownList:</span></span>

[!code-aspx[Main](master-detail-filtering-with-a-dropdownlist-cs/samples/sample1.aspx)]

<span data-ttu-id="bdb49-175">Además, es necesario establecer el `AppendDataBoundItems` del control DropDownList en true porque cuando las categorías están enlazadas a DropDownList desde ObjectDataSource, se sobrescribirán los elementos de la lista agregados manualmente si `AppendDataBoundItems` no es true.</span><span class="sxs-lookup"><span data-stu-id="bdb49-175">Additionally, we need to set the DropDownList control's `AppendDataBoundItems` to True because when the categories are bound to the DropDownList from the ObjectDataSource they'll overwrite any manually-added list items if `AppendDataBoundItems` isn't True.</span></span>

![Establezca la propiedad AppendDataBoundItems en true.](master-detail-filtering-with-a-dropdownlist-cs/_static/image34.png)

<span data-ttu-id="bdb49-177">**Figura 12**: Establezca la propiedad `AppendDataBoundItems` en true.</span><span class="sxs-lookup"><span data-stu-id="bdb49-177">**Figure 12**: Set the `AppendDataBoundItems` Property to True</span></span>

<span data-ttu-id="bdb49-178">Después de estos cambios, al visitar la página por primera vez, se selecciona la opción "--elegir una categoría--" y no se muestra ningún producto.</span><span class="sxs-lookup"><span data-stu-id="bdb49-178">After these changes, when first visiting the page the "-- Choose a Category --" option is selected and no products are displayed.</span></span>

<span data-ttu-id="bdb49-179">[![en la carga de página inicial no se muestran productos](master-detail-filtering-with-a-dropdownlist-cs/_static/image36.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="bdb49-179">[![On the Initial Page Load No Products are Displayed](master-detail-filtering-with-a-dropdownlist-cs/_static/image36.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image35.png)</span></span>

<span data-ttu-id="bdb49-180">**Figura 13**: En la página inicial, no se muestra ningún producto ([haga clic para ver la imagen de tamaño completo](master-detail-filtering-with-a-dropdownlist-cs/_static/image37.png))</span><span class="sxs-lookup"><span data-stu-id="bdb49-180">**Figure 13**: On the Initial Page Load No Products are Displayed ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image37.png))</span></span>

<span data-ttu-id="bdb49-181">Motivo de que no se muestre ningún producto cuando se selecciona el elemento de lista "--elegir una categoría--" es porque su valor es `-1` y no hay ningún producto en la base de datos con un `CategoryID` de `-1`.</span><span class="sxs-lookup"><span data-stu-id="bdb49-181">The reason no products are displayed when because the "-- Choose a Category --" list item is selected is because its value is `-1` and there are no products in the database with a `CategoryID` of `-1`.</span></span> <span data-ttu-id="bdb49-182">Si este es el comportamiento que desea, habrá terminado en este momento.</span><span class="sxs-lookup"><span data-stu-id="bdb49-182">If this is the behavior you want then you're done at this point!</span></span> <span data-ttu-id="bdb49-183">Sin embargo, si desea mostrar *todas* las categorías cuando se selecciona el elemento de lista "--Choose a Category--", vuelva a la clase `ProductsBLL` y personalice el método `GetProductsByCategoryID(categoryID)` para que invoque el método `GetProducts()` si el parámetro pasado *`categoryID`* es menor que cero:</span><span class="sxs-lookup"><span data-stu-id="bdb49-183">If, however, you want to display *all* of the categories when the "-- Choose a Category --" list item is selected, return to the `ProductsBLL` class and customize the `GetProductsByCategoryID(categoryID)` method so that it invokes the `GetProducts()` method if the passed in *`categoryID`* parameter is less than zero:</span></span>

[!code-csharp[Main](master-detail-filtering-with-a-dropdownlist-cs/samples/sample2.cs)]

<span data-ttu-id="bdb49-184">La técnica que se usa aquí es similar al enfoque que usamos para volver a mostrar todos los proveedores en el tutorial de [parámetros declarativos](../basic-reporting/declarative-parameters-cs.md) , aunque en este ejemplo usamos un valor de `-1` para indicar que todos los registros deben recuperarse en contraposición a `null`.</span><span class="sxs-lookup"><span data-stu-id="bdb49-184">The technique used here is similar to the approach we used to display all suppliers back in the [Declarative Parameters](../basic-reporting/declarative-parameters-cs.md) tutorial, although for this example we're using a value of `-1` to indicate that all records should be retrieved as opposed to `null`.</span></span> <span data-ttu-id="bdb49-185">Esto se debe a que el parámetro *`categoryID`* del método `GetProductsByCategoryID(categoryID)` espera como valor entero pasado, mientras que en el tutorial de parámetros declarativos pasamos en un parámetro de entrada de cadena.</span><span class="sxs-lookup"><span data-stu-id="bdb49-185">This is because the *`categoryID`* parameter of the `GetProductsByCategoryID(categoryID)` method expects as integer value passed in, whereas in the Declarative Parameters tutorial we were passing in a string input parameter.</span></span>

<span data-ttu-id="bdb49-186">En la ilustración 14 se muestra una captura de pantalla de `FilterByDropDownList.aspx` cuando está seleccionada la opción "--elegir una categoría--".</span><span class="sxs-lookup"><span data-stu-id="bdb49-186">Figure 14 shows a screen shot of `FilterByDropDownList.aspx` when the "-- Choose a Category --" option is selected.</span></span> <span data-ttu-id="bdb49-187">En este caso, todos los productos se muestran de forma predeterminada y el usuario puede restringir la presentación seleccionando una categoría específica.</span><span class="sxs-lookup"><span data-stu-id="bdb49-187">Here, all of the products are displayed by default, and the user can narrow the display by choosing a specific category.</span></span>

<span data-ttu-id="bdb49-188">[![todos los productos aparecen ahora de forma predeterminada](master-detail-filtering-with-a-dropdownlist-cs/_static/image39.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image38.png)</span><span class="sxs-lookup"><span data-stu-id="bdb49-188">[![All of the Products are Now Listed By Default](master-detail-filtering-with-a-dropdownlist-cs/_static/image39.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image38.png)</span></span>

<span data-ttu-id="bdb49-189">**Figura 14**: Todos los productos aparecen ahora de forma predeterminada ([haga clic para ver la imagen de tamaño completo](master-detail-filtering-with-a-dropdownlist-cs/_static/image40.png))</span><span class="sxs-lookup"><span data-stu-id="bdb49-189">**Figure 14**: All of the Products are Now Listed By Default ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image40.png))</span></span>

## <a name="summary"></a><span data-ttu-id="bdb49-190">Resumen</span><span class="sxs-lookup"><span data-stu-id="bdb49-190">Summary</span></span>

<span data-ttu-id="bdb49-191">Al Mostrar datos relacionados jerárquicamente, a menudo resulta útil presentar los datos mediante los informes maestros y detallados, desde el que el usuario puede empezar a usar los datos de la parte superior de la jerarquía y profundizar en los detalles.</span><span class="sxs-lookup"><span data-stu-id="bdb49-191">When displaying hierarchically-related data, it often helps to present the data using master/detail reports, from which the user can start perusing the data from the top of the hierarchy and drill down into details.</span></span> <span data-ttu-id="bdb49-192">En este tutorial, hemos examinado la creación de un informe de maestro y detalles sencillo que muestra los productos de una categoría seleccionada.</span><span class="sxs-lookup"><span data-stu-id="bdb49-192">In this tutorial we examined building a simple master/detail report showing a selected category's products.</span></span> <span data-ttu-id="bdb49-193">Esto se logra mediante el uso de un DropDownList para la lista de categorías y un control GridView para los productos que pertenecen a la categoría seleccionada.</span><span class="sxs-lookup"><span data-stu-id="bdb49-193">This was accomplished by using a DropDownList for the list of categories and a GridView for the products belonging to the selected category.</span></span>

<span data-ttu-id="bdb49-194">En el [siguiente tutorial](master-detail-filtering-with-two-dropdownlists-cs.md) , vamos a seguir la interfaz de DropDownList un paso más, con dos DropDownLists.</span><span class="sxs-lookup"><span data-stu-id="bdb49-194">In the [next tutorial](master-detail-filtering-with-two-dropdownlists-cs.md) we'll take the DropDownList interface one step further, using two DropDownLists.</span></span>

<span data-ttu-id="bdb49-195">¡ Feliz programación!</span><span class="sxs-lookup"><span data-stu-id="bdb49-195">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="bdb49-196">Acerca del autor</span><span class="sxs-lookup"><span data-stu-id="bdb49-196">About the Author</span></span>

<span data-ttu-id="bdb49-197">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor de siete libros de ASP/ASP. net y fundador de [4GuysFromRolla.com](http://www.4guysfromrolla.com), ha estado trabajando con las tecnologías Web de Microsoft desde 1998.</span><span class="sxs-lookup"><span data-stu-id="bdb49-197">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="bdb49-198">Scott funciona como consultor, profesor y redactor independiente.</span><span class="sxs-lookup"><span data-stu-id="bdb49-198">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="bdb49-199">Su último libro es [*SAM enseñar a usted mismo ASP.NET 2.0 en 24 horas*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="bdb49-199">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="bdb49-200">Puede ponerse en contacto con usted en [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="bdb49-200">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="bdb49-201">o a través de su blog, que encontrará en [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="bdb49-201">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="bdb49-202">Siguiente</span><span class="sxs-lookup"><span data-stu-id="bdb49-202">Next</span></span>](master-detail-filtering-with-two-dropdownlists-cs.md)
