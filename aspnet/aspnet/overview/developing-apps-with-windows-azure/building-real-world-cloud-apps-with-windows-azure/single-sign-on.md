---
uid: aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/single-sign-on
title: Inicio de sesión único (creación de aplicaciones en la nube reales con Azure) | Microsoft Docs
author: MikeWasson
description: La creación de aplicaciones reales en la nube con el libro electrónico de Azure se basa en una presentación desarrollada por Scott Guthrie. Se explican 13 patrones y prácticas que pueden...
ms.author: riande
ms.date: 06/12/2014
ms.assetid: 7d82d5e9-0619-4f22-9e03-32a6d52940a5
msc.legacyurl: /aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/single-sign-on
msc.type: authoredcontent
ms.openlocfilehash: 1ca93cce22487295a24aae95437b3e69dfc5b504
ms.sourcegitcommit: 7709c0a091b8d55b7b33bad8849f7b66b23c3d72
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 02/19/2020
ms.locfileid: "77457146"
---
# <a name="single-sign-on-building-real-world-cloud-apps-with-azure"></a><span data-ttu-id="3a91a-104">Inicio de sesión único (creación de aplicaciones en la nube reales con Azure)</span><span class="sxs-lookup"><span data-stu-id="3a91a-104">Single Sign-On (Building Real-World Cloud Apps with Azure)</span></span>

<span data-ttu-id="3a91a-105">por [Mike Wasson](https://github.com/MikeWasson), [Rick Anderson](https://twitter.com/RickAndMSFT), [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="3a91a-105">by [Mike Wasson](https://github.com/MikeWasson), [Rick Anderson](https://twitter.com/RickAndMSFT), [Tom Dykstra](https://github.com/tdykstra)</span></span>

<span data-ttu-id="3a91a-106">[Descargar el proyecto de corrección de ti](https://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4) o [descargar el libro electrónico](https://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span><span class="sxs-lookup"><span data-stu-id="3a91a-106">[Download Fix It Project](https://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4) or [Download E-book](https://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span></span>

> <span data-ttu-id="3a91a-107">La **creación de aplicaciones reales en la nube con** el libro electrónico de Azure se basa en una presentación desarrollada por Scott Guthrie.</span><span class="sxs-lookup"><span data-stu-id="3a91a-107">The **Building Real World Cloud Apps with Azure** e-book is based on a presentation developed by Scott Guthrie.</span></span> <span data-ttu-id="3a91a-108">Se explican 13 patrones y prácticas que pueden ayudarle a desarrollar correctamente aplicaciones web para la nube.</span><span class="sxs-lookup"><span data-stu-id="3a91a-108">It explains 13 patterns and practices that can help you be successful developing web apps for the cloud.</span></span> <span data-ttu-id="3a91a-109">Para obtener información sobre el libro electrónico, consulte [el primer capítulo](introduction.md).</span><span class="sxs-lookup"><span data-stu-id="3a91a-109">For information about the e-book, see [the first chapter](introduction.md).</span></span>

<span data-ttu-id="3a91a-110">Hay muchos problemas de seguridad que se deben tener en cuenta al desarrollar una aplicación en la nube, pero para esta serie nos centraremos solo en uno: Inicio de sesión único.</span><span class="sxs-lookup"><span data-stu-id="3a91a-110">There are many security issues to think about when you're developing a cloud app, but for this series we'll focus on just one: single sign-on.</span></span> <span data-ttu-id="3a91a-111">Una pregunta que a menudo se pregunta es: "soy principalmente la creación de aplicaciones para los empleados de mi empresa; ¿Cómo puedo hospedar estas aplicaciones en la nube y seguir pudiendo usar el mismo modelo de seguridad que mis empleados saben y usan en el entorno local cuando ejecutan aplicaciones que se hospedan dentro del firewall? "</span><span class="sxs-lookup"><span data-stu-id="3a91a-111">A question people often ask is this: "I'm primarily building apps for the employees of my company; how do I host these apps in the cloud and still enable them to use the same security model that my employees know and use in the on-premises environment when they're running apps that are hosted inside the firewall?"</span></span> <span data-ttu-id="3a91a-112">Una de las formas en que se habilita este escenario se denomina Azure Active Directory (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="3a91a-112">One of the ways we enable this scenario is called Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="3a91a-113">Azure AD le permite hacer que las aplicaciones de línea de negocio (LOB) de la empresa estén disponibles a través de Internet y permite poner estas aplicaciones a disposición de los socios comerciales.</span><span class="sxs-lookup"><span data-stu-id="3a91a-113">Azure AD enables you to make enterprise line-of-business (LOB) apps available over the Internet, and it enables you to make these apps available to business partners as well.</span></span>

## <a name="introduction-to-azure-ad"></a><span data-ttu-id="3a91a-114">Introducción a Azure AD</span><span class="sxs-lookup"><span data-stu-id="3a91a-114">Introduction to Azure AD</span></span>

<span data-ttu-id="3a91a-115">[Azure ad](https://docs.microsoft.com/azure/active-directory/) proporciona [Active Directory](https://msdn.microsoft.com/library/windows/desktop/aa746492.aspx) en la nube.</span><span class="sxs-lookup"><span data-stu-id="3a91a-115">[Azure AD](https://docs.microsoft.com/azure/active-directory/) provides [Active Directory](https://msdn.microsoft.com/library/windows/desktop/aa746492.aspx) in the cloud.</span></span> <span data-ttu-id="3a91a-116">Entre las principales características se incluyen las siguientes:</span><span class="sxs-lookup"><span data-stu-id="3a91a-116">Key features include the following:</span></span>

- <span data-ttu-id="3a91a-117">Se integra con Active Directory local.</span><span class="sxs-lookup"><span data-stu-id="3a91a-117">It integrates with on-premises Active Directory.</span></span>
- <span data-ttu-id="3a91a-118">Habilita el inicio de sesión único con sus aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="3a91a-118">It enables single sign-on with your apps.</span></span>
- <span data-ttu-id="3a91a-119">Admite estándares abiertos como [SAML](http://en.wikipedia.org/wiki/SAML_2.0), [WS-Fed](http://en.wikipedia.org/wiki/WS-Federation)y [OAuth 2,0](http://oauth.net/2/).</span><span class="sxs-lookup"><span data-stu-id="3a91a-119">It supports open standards such as [SAML](http://en.wikipedia.org/wiki/SAML_2.0), [WS-Fed](http://en.wikipedia.org/wiki/WS-Federation), and [OAuth 2.0](http://oauth.net/2/).</span></span>
- <span data-ttu-id="3a91a-120">Es compatible con la [API de REST](https://msdn.microsoft.com/library/hh974476.aspx)de Enterprise Graph.</span><span class="sxs-lookup"><span data-stu-id="3a91a-120">It supports Enterprise [Graph REST API](https://msdn.microsoft.com/library/hh974476.aspx).</span></span>

<span data-ttu-id="3a91a-121">Supongamos que tiene un entorno de Active Directory de Windows Server local que se usa para permitir que los empleados inicien sesión en las aplicaciones de la intranet:</span><span class="sxs-lookup"><span data-stu-id="3a91a-121">Suppose you have an on-premises Windows Server Active Directory environment that you use to enable employees to sign on to Intranet apps:</span></span>

![](single-sign-on/_static/image1.png)

<span data-ttu-id="3a91a-122">Lo que Azure AD le permite hacer es crear un directorio en la nube.</span><span class="sxs-lookup"><span data-stu-id="3a91a-122">What Azure AD enables you to do is create a directory in the cloud.</span></span> <span data-ttu-id="3a91a-123">Es una característica gratuita y fácil de configurar.</span><span class="sxs-lookup"><span data-stu-id="3a91a-123">It's a free feature and easy to set up.</span></span>

<span data-ttu-id="3a91a-124">Puede ser completamente independiente de la Active Directory local; puede colocar a cualquiera que desee en él y autenticarlos en aplicaciones de Internet.</span><span class="sxs-lookup"><span data-stu-id="3a91a-124">It can be entirely independent from your on-premises Active Directory; you can put anyone you want in it and authenticate them in Internet apps.</span></span>

![Microsoft Azure Active Directory](single-sign-on/_static/image2.png)

<span data-ttu-id="3a91a-126">También puede integrarlo con su instancia de AD local.</span><span class="sxs-lookup"><span data-stu-id="3a91a-126">Or you can integrate it with your on-premises AD.</span></span>

![Integración de AD y WAAD](single-sign-on/_static/image3.png)

<span data-ttu-id="3a91a-128">Ahora todos los empleados que pueden autenticarse en el entorno local también pueden autenticarse a través de Internet, sin tener que abrir un firewall o implementar nuevos servidores en el centro de datos.</span><span class="sxs-lookup"><span data-stu-id="3a91a-128">Now all the employees who can authenticate on-premises can also authenticate over the Internet – without you having to open up a firewall or deploy any new servers in your data center.</span></span> <span data-ttu-id="3a91a-129">Puede seguir aprovechando todo el entorno de Active Directory existente que ya conoce y que usa hoy mismo para ofrecer a la capacidad de inicio de sesión único de las aplicaciones internas.</span><span class="sxs-lookup"><span data-stu-id="3a91a-129">You can continue to leverage all the existing Active Directory environment that you know and use today to give your internal apps single-sign on capability.</span></span>

<span data-ttu-id="3a91a-130">Una vez que haya realizado esta conexión entre AD y Azure AD, también puede habilitar las aplicaciones web y los dispositivos móviles para autenticar a sus empleados en la nube, y puede habilitar aplicaciones de terceros, como Office 365, SalesForce.com o Google Apps, para aceptar su credenciales de los empleados.</span><span class="sxs-lookup"><span data-stu-id="3a91a-130">Once you've made this connection between AD and Azure AD, you can also enable your web apps and your mobile devices to authenticate your employees in the cloud, and you can enable third-party apps, such as Office 365, SalesForce.com, or Google apps, to accept your employees' credentials.</span></span> <span data-ttu-id="3a91a-131">Si usa Office 365, ya está configurado con Azure AD porque Office 365 usa Azure AD para la autenticación y la autorización.</span><span class="sxs-lookup"><span data-stu-id="3a91a-131">If you're using Office 365, you're already set up with Azure AD because Office 365 uses Azure AD for authentication and authorization.</span></span>

![aplicaciones de terceros](single-sign-on/_static/image4.png)

<span data-ttu-id="3a91a-133">La belleza de este enfoque es que cada vez que la organización agrega o elimina un usuario, o un usuario cambia una contraseña, usa el mismo proceso que usa hoy en su entorno local.</span><span class="sxs-lookup"><span data-stu-id="3a91a-133">The beauty of this approach is that any time your organization adds or deletes a user, or a user changes a password, you use the same process that you use today in your on-premises environment.</span></span> <span data-ttu-id="3a91a-134">Todos los cambios de AD locales se propagan automáticamente al entorno de nube.</span><span class="sxs-lookup"><span data-stu-id="3a91a-134">All of your on-premises AD changes are automatically propagated to the cloud environment.</span></span>

<span data-ttu-id="3a91a-135">Si su empresa usa o traslada a Office 365, la buena noticia es que tendrá Azure AD configurado automáticamente porque Office 365 usa Azure AD para la autenticación.</span><span class="sxs-lookup"><span data-stu-id="3a91a-135">If your company is using or moving to Office 365, the good news is that you'll have Azure AD set up automatically because Office 365 uses Azure AD for authentication.</span></span> <span data-ttu-id="3a91a-136">Para que pueda usar fácilmente en sus propias aplicaciones la misma autenticación que usa Office 365.</span><span class="sxs-lookup"><span data-stu-id="3a91a-136">So you can easily use in your own apps the same authentication that Office 365 uses.</span></span>

## <a name="set-up-an-azure-ad-tenant"></a><span data-ttu-id="3a91a-137">Configuración de un inquilino de Azure AD</span><span class="sxs-lookup"><span data-stu-id="3a91a-137">Set up an Azure AD tenant</span></span>

<span data-ttu-id="3a91a-138">un directorio de Azure AD se denomina [inquilino](https://technet.microsoft.com/library/jj573650.aspx)de Azure ad y la configuración de un inquilino es bastante fácil.</span><span class="sxs-lookup"><span data-stu-id="3a91a-138">an Azure AD directory is called an Azure AD [tenant](https://technet.microsoft.com/library/jj573650.aspx), and setting up a tenant is pretty easy.</span></span> <span data-ttu-id="3a91a-139">Le mostraremos cómo se lleva a cabo en Azure Portal de administración para ilustrar los conceptos, pero, por supuesto, como las otras funciones del portal, también puede hacerlo mediante un script o una API de administración.</span><span class="sxs-lookup"><span data-stu-id="3a91a-139">We'll show you how it's done in the Azure Management Portal in order to illustrate the concepts, but of course like the other portal functions you can also do it by using a script or management API.</span></span>

<span data-ttu-id="3a91a-140">En el portal de administración, haga clic en la pestaña Active Directory.</span><span class="sxs-lookup"><span data-stu-id="3a91a-140">In the management portal click the Active Directory tab.</span></span>

![WAAD en el portal](single-sign-on/_static/image5.png)

<span data-ttu-id="3a91a-142">Tiene automáticamente un inquilino Azure AD para su cuenta de Azure y puede hacer clic en el botón **Agregar** situado en la parte inferior de la página para crear directorios adicionales.</span><span class="sxs-lookup"><span data-stu-id="3a91a-142">You automatically have one Azure AD tenant for your Azure account, and you can click the **Add** button at the bottom of the page to create additional directories.</span></span> <span data-ttu-id="3a91a-143">Es posible que desee una para un entorno de prueba y otra para producción, por ejemplo.</span><span class="sxs-lookup"><span data-stu-id="3a91a-143">You might want one for a test environment and one for production, for example.</span></span> <span data-ttu-id="3a91a-144">Piense detenidamente en el nombre de un nuevo directorio.</span><span class="sxs-lookup"><span data-stu-id="3a91a-144">Think carefully about what you name a new directory.</span></span> <span data-ttu-id="3a91a-145">Si usa el nombre del directorio y, a continuación, usa de nuevo el nombre de uno de los usuarios, puede resultar confuso.</span><span class="sxs-lookup"><span data-stu-id="3a91a-145">If you use your name for the directory and then you use your name again for one of the users, that can be confusing.</span></span>

![Agregar directorio](single-sign-on/_static/image6.png)

<span data-ttu-id="3a91a-147">El portal es totalmente compatible con la creación, eliminación y administración de usuarios dentro de este entorno.</span><span class="sxs-lookup"><span data-stu-id="3a91a-147">The portal has full support for creating, deleting, and managing users within this environment.</span></span> <span data-ttu-id="3a91a-148">Por ejemplo, para agregar un usuario, vaya a la pestaña **usuarios** y haga clic en el botón **Agregar usuario** .</span><span class="sxs-lookup"><span data-stu-id="3a91a-148">For example, to add a user go to the **Users** tab and click the **Add User** button.</span></span>

![Botón Agregar usuario](single-sign-on/_static/image7.png)

![Cuadro de diálogo Agregar usuario](single-sign-on/_static/image8.png)

<span data-ttu-id="3a91a-151">Puede crear un nuevo usuario que solo exista en este directorio, o puede registrar una cuenta Microsoft como usuario en este directorio, o bien registrarse o un usuario de otro Azure AD directorio como usuario en este directorio.</span><span class="sxs-lookup"><span data-stu-id="3a91a-151">You can create a new user who exists only in this directory, or you can register a Microsoft Account as a user in this directory, or register or a user from another Azure AD directory as a user in this directory.</span></span> <span data-ttu-id="3a91a-152">(En un directorio real, el dominio predeterminado sería ContosoTest.onmicrosoft.com.</span><span class="sxs-lookup"><span data-stu-id="3a91a-152">(In a real directory, the default domain would be ContosoTest.onmicrosoft.com.</span></span> <span data-ttu-id="3a91a-153">También puede usar un dominio de su elección, como contoso.com).</span><span class="sxs-lookup"><span data-stu-id="3a91a-153">You can also use a domain of your own choosing, like contoso.com.)</span></span>

![Tipos de usuario](single-sign-on/_static/image9.png)

![Cuadro de diálogo Agregar usuario](single-sign-on/_static/image10.png)

<span data-ttu-id="3a91a-156">Puede asignar el usuario a un rol.</span><span class="sxs-lookup"><span data-stu-id="3a91a-156">You can assign the user to a role.</span></span>

![Perfil de usuario](single-sign-on/_static/image11.png)

<span data-ttu-id="3a91a-158">Y la cuenta se crea con una contraseña temporal.</span><span class="sxs-lookup"><span data-stu-id="3a91a-158">And the account is created with a temporary password.</span></span>

![Contraseña temporal](single-sign-on/_static/image12.png)

<span data-ttu-id="3a91a-160">Los usuarios que cree de esta manera pueden iniciar sesión inmediatamente en sus aplicaciones web con este directorio en la nube.</span><span class="sxs-lookup"><span data-stu-id="3a91a-160">The users you create this way can immediately log in to your web apps using this cloud directory.</span></span>

<span data-ttu-id="3a91a-161">Sin embargo, lo ideal para el inicio de sesión único empresarial es la pestaña **integración de directorios** :</span><span class="sxs-lookup"><span data-stu-id="3a91a-161">What's great for enterprise single sign-on, though, is the **Directory Integration** tab:</span></span>

![Pestaña integración de directorios](single-sign-on/_static/image13.png)

<span data-ttu-id="3a91a-163">Si habilita la integración de directorios y [descarga una herramienta](https://social.technet.microsoft.com/wiki/contents/articles/19098.howto-install-the-windows-azure-active-directory-sync-tool-now-with-pictures.aspx), puede sincronizar este directorio en la nube con la Active Directory local existente que ya usa dentro de su organización.</span><span class="sxs-lookup"><span data-stu-id="3a91a-163">If you enable directory integration, and [download a tool](https://social.technet.microsoft.com/wiki/contents/articles/19098.howto-install-the-windows-azure-active-directory-sync-tool-now-with-pictures.aspx), you can sync this cloud directory with your existing on-premises Active Directory that you're already using inside your organization.</span></span> <span data-ttu-id="3a91a-164">Todos los usuarios almacenados en el directorio se mostrarán en este directorio en la nube.</span><span class="sxs-lookup"><span data-stu-id="3a91a-164">Then all of the users stored in your directory will show up in this cloud directory.</span></span> <span data-ttu-id="3a91a-165">Las aplicaciones en la nube ahora pueden autenticar a todos los empleados con sus credenciales de Active Directory existentes.</span><span class="sxs-lookup"><span data-stu-id="3a91a-165">Your cloud apps can now authenticate all of your employees using their existing Active Directory credentials.</span></span> <span data-ttu-id="3a91a-166">Y todo esto es gratuito: la herramienta de sincronización y la propia Azure AD.</span><span class="sxs-lookup"><span data-stu-id="3a91a-166">And all this is free – both the sync tool and Azure AD itself.</span></span>

<span data-ttu-id="3a91a-167">La herramienta es un asistente que es fácil de usar, como puede ver en estas capturas de pantalla.</span><span class="sxs-lookup"><span data-stu-id="3a91a-167">The tool is a wizard that is easy to use, as you can see from these screen shots.</span></span> <span data-ttu-id="3a91a-168">Estas no son instrucciones completas, solo un ejemplo en el que se muestra el proceso básico.</span><span class="sxs-lookup"><span data-stu-id="3a91a-168">These are not complete instructions, just an example showing you the basic process.</span></span> <span data-ttu-id="3a91a-169">Para obtener información más detallada sobre cómo hacerlo, consulte los vínculos en la sección de [recursos](#resources) al final del capítulo.</span><span class="sxs-lookup"><span data-stu-id="3a91a-169">For more detailed how-to-do-it information, see the links in the [Resources](#resources) section at the end of the chapter.</span></span>

![Asistente para configuración de la herramienta de sincronización de WAAD](single-sign-on/_static/image14.png)

<span data-ttu-id="3a91a-171">Haga clic en **siguiente**y, a continuación, escriba sus credenciales de Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="3a91a-171">Click **Next**, and then enter your Azure Active Directory credentials.</span></span>

![Asistente para configuración de la herramienta de sincronización de WAAD](single-sign-on/_static/image15.png)

<span data-ttu-id="3a91a-173">Haga clic en **siguiente**y, a continuación, escriba sus credenciales de ad locales.</span><span class="sxs-lookup"><span data-stu-id="3a91a-173">Click **Next**, and then enter your on-premises AD credentials.</span></span>

![Asistente para configuración de la herramienta de sincronización de WAAD](single-sign-on/_static/image16.png)

<span data-ttu-id="3a91a-175">Haga clic en **siguiente**y, a continuación, indique si desea almacenar un hash de las contraseñas de AD en la nube.</span><span class="sxs-lookup"><span data-stu-id="3a91a-175">Click **Next**, and then indicate if you want to store a hash of your AD passwords in the cloud.</span></span>

![Asistente para configuración de la herramienta de sincronización de WAAD](single-sign-on/_static/image17.png)

<span data-ttu-id="3a91a-177">El hash de contraseña que puede almacenar en la nube es un hash unidireccional. las contraseñas reales nunca se almacenan en Azure AD.</span><span class="sxs-lookup"><span data-stu-id="3a91a-177">The password hash that you can store in the cloud is a one-way hash; actual passwords are never stored in Azure AD.</span></span> <span data-ttu-id="3a91a-178">Si decide almacenar los valores hash en la nube, tendrá que usar [servicios de Federación de Active Directory (AD FS)](https://technet.microsoft.com/library/hh831502.aspx) (ADFS).</span><span class="sxs-lookup"><span data-stu-id="3a91a-178">If you decide against storing hashes in the cloud, you'll have to use [Active Directory Federation Services](https://technet.microsoft.com/library/hh831502.aspx) (ADFS).</span></span> <span data-ttu-id="3a91a-179">También hay [otros factores que deben tenerse en cuenta a la hora de elegir si quiere usar ADFS o no](https://technet.microsoft.com/library/jj573653.aspx).</span><span class="sxs-lookup"><span data-stu-id="3a91a-179">There are also [other factors to consider when choosing whether or not to use ADFS](https://technet.microsoft.com/library/jj573653.aspx).</span></span> <span data-ttu-id="3a91a-180">La opción ADFS requiere algunos pasos de configuración adicionales.</span><span class="sxs-lookup"><span data-stu-id="3a91a-180">The ADFS option requires a few additional configuration steps.</span></span>

<span data-ttu-id="3a91a-181">Si decide almacenar los valores hash en la nube, habrá terminado y la herramienta iniciará la sincronización de directorios al hacer clic en **siguiente**.</span><span class="sxs-lookup"><span data-stu-id="3a91a-181">If you choose to store hashes in the cloud, you're done, and the tool starts synchronizing directories when you click **Next**.</span></span>

![Asistente para configuración de la herramienta de sincronización de WAAD](single-sign-on/_static/image18.png)

<span data-ttu-id="3a91a-183">Y en unos minutos habrá terminado.</span><span class="sxs-lookup"><span data-stu-id="3a91a-183">And in a few minutes you're done.</span></span>

![Asistente para configuración de la herramienta de sincronización de WAAD](single-sign-on/_static/image19.png)

<span data-ttu-id="3a91a-185">Solo tiene que ejecutarlo en un controlador de dominio de la organización, en Windows 2003 o posterior.</span><span class="sxs-lookup"><span data-stu-id="3a91a-185">You only have to run this on one domain controller in the organization, on Windows 2003 or higher.</span></span> <span data-ttu-id="3a91a-186">Y no es necesario reiniciar.</span><span class="sxs-lookup"><span data-stu-id="3a91a-186">And no need to reboot.</span></span> <span data-ttu-id="3a91a-187">Cuando haya terminado, todos los usuarios están en la nube y puede realizar el inicio de sesión único desde cualquier aplicación web o móvil, mediante SAML, OAuth o WS-FED.</span><span class="sxs-lookup"><span data-stu-id="3a91a-187">When you're done, all of your users are in the cloud and you can do single sign-on from any web or mobile application, using SAML, OAuth, or WS-Fed.</span></span>

<span data-ttu-id="3a91a-188">A veces le preguntamos cómo es seguro esto: ¿usa Microsoft para sus datos empresariales confidenciales?</span><span class="sxs-lookup"><span data-stu-id="3a91a-188">Sometimes we get asked about how secure this is – does Microsoft use it for their own sensitive business data?</span></span> <span data-ttu-id="3a91a-189">Y la respuesta es sí.</span><span class="sxs-lookup"><span data-stu-id="3a91a-189">And the answer is yes we do.</span></span> <span data-ttu-id="3a91a-190">Por ejemplo, si va al sitio interno de Microsoft SharePoint en [https://microsoft.sharepoint.com/](https://microsoft.sharepoint.com/), se le pedirá que inicie sesión.</span><span class="sxs-lookup"><span data-stu-id="3a91a-190">For example, if you go to the internal Microsoft SharePoint site at [https://microsoft.sharepoint.com/](https://microsoft.sharepoint.com/), you get prompted to log in.</span></span>

![Inicio de sesión en Office 365](single-sign-on/_static/image20.png)

<span data-ttu-id="3a91a-192">Microsoft ha habilitado ADFS, por lo que, cuando escriba un identificador de Microsoft, se le redirigirá a una página de inicio de sesión de ADFS.</span><span class="sxs-lookup"><span data-stu-id="3a91a-192">Microsoft has enabled ADFS, so when you enter a Microsoft ID, you get redirected to an ADFS log-in page.</span></span>

![Inicio de sesión de ADFS](single-sign-on/_static/image21.png)

<span data-ttu-id="3a91a-194">Y, una vez que escriba las credenciales almacenadas en una cuenta de Microsoft AD interna, tendrá acceso a esta aplicación interna.</span><span class="sxs-lookup"><span data-stu-id="3a91a-194">And once you enter credentials stored in an internal Microsoft AD account, you have access to this internal application.</span></span>

![Sitio de MS SharePoint](single-sign-on/_static/image22.png)

<span data-ttu-id="3a91a-196">Estamos usando un servidor de inicio de sesión de AD principalmente porque ya hemos configurado ADFS antes de que Azure AD estuviera disponible, pero el proceso de inicio de sesión pasa a través de un directorio Azure AD en la nube.</span><span class="sxs-lookup"><span data-stu-id="3a91a-196">We're using an AD sign-in server mainly because we already had ADFS set up before Azure AD became available, but the log-in process is going through an Azure AD directory in the cloud.</span></span> <span data-ttu-id="3a91a-197">En la nube se colocan los documentos importantes, el control de código fuente, los archivos de administración de rendimiento, los informes de ventas, etc., y se usa esta misma solución para protegerlos.</span><span class="sxs-lookup"><span data-stu-id="3a91a-197">We put our important documents, source control, performance management files, sales reports, and more, in the cloud and are using this exact same solution to secure them.</span></span>

## <a name="create-an-aspnet-app-that-uses-azure-ad-for-single-sign-on"></a><span data-ttu-id="3a91a-198">Creación de una aplicación de ASP.NET que usa Azure AD para el inicio de sesión único</span><span class="sxs-lookup"><span data-stu-id="3a91a-198">Create an ASP.NET app that uses Azure AD for single sign-on</span></span>

<span data-ttu-id="3a91a-199">Visual Studio hace que sea muy fácil crear una aplicación que use Azure AD para el inicio de sesión único, como puede ver en algunas capturas de pantalla.</span><span class="sxs-lookup"><span data-stu-id="3a91a-199">Visual Studio makes it really easy to create an app that uses Azure AD for single sign-on, as you can see from a few screen shots.</span></span>

<span data-ttu-id="3a91a-200">Al crear una nueva aplicación de ASP.NET, ya sea MVC o Web Forms, el método de autenticación predeterminado es ASP.NET Identity.</span><span class="sxs-lookup"><span data-stu-id="3a91a-200">When you create a new ASP.NET application, either MVC or Web Forms, the default authentication method is ASP.NET Identity.</span></span> <span data-ttu-id="3a91a-201">Para cambiarlo a Azure AD, haga clic en un botón **cambiar autenticación** .</span><span class="sxs-lookup"><span data-stu-id="3a91a-201">To change that to Azure AD, you click a **Change Authentication** button.</span></span>

![Cambiar autenticación](single-sign-on/_static/image23.png)

<span data-ttu-id="3a91a-203">Seleccione cuentas de la organización, escriba el nombre de dominio y, a continuación, seleccione Inicio de sesión único.</span><span class="sxs-lookup"><span data-stu-id="3a91a-203">Select Organizational Accounts, enter your domain name, and then select Single Sign On.</span></span>

![Cuadro de diálogo Configurar autenticación](single-sign-on/_static/image24.png)

<span data-ttu-id="3a91a-205">También puede conceder a la aplicación permiso de lectura o lectura/escritura para los datos de directorio.</span><span class="sxs-lookup"><span data-stu-id="3a91a-205">You can also give the app read or read/write permission for directory data.</span></span> <span data-ttu-id="3a91a-206">Si lo hace, puede usar la API de [REST de Azure Graph](https://msdn.microsoft.com/library/windowsazure/hh974476.aspx) para buscar el número de teléfono de los usuarios, averiguar si están en la oficina, Cuándo se iniciaron por última vez, etc.</span><span class="sxs-lookup"><span data-stu-id="3a91a-206">If you do that, it can use the [Azure Graph REST API](https://msdn.microsoft.com/library/windowsazure/hh974476.aspx) to look up users' phone number, find out if they're in the office, when they last logged on, etc.</span></span>

<span data-ttu-id="3a91a-207">Eso es todo lo que tiene que hacer: Visual Studio solicita las credenciales de un administrador para el inquilino de Azure AD y, a continuación, configura el proyecto y el inquilino de Azure AD para la nueva aplicación.</span><span class="sxs-lookup"><span data-stu-id="3a91a-207">That's all you have to do - Visual Studio asks for the credentials for an administrator for your Azure AD tenant, and then it configures both your project and your Azure AD tenant for the new application.</span></span>

<span data-ttu-id="3a91a-208">Al ejecutar el proyecto, verá una página de inicio de sesión y podrá iniciar sesión con las credenciales de un usuario en el directorio de Azure AD.</span><span class="sxs-lookup"><span data-stu-id="3a91a-208">When you run the project, you'll see a sign-in page, and you can sign in with credentials of a user in your Azure AD directory.</span></span>

![Inicio de sesión de la cuenta de organización](single-sign-on/_static/image25.png)

![Sesión iniciada](single-sign-on/_static/image26.png)

<span data-ttu-id="3a91a-211">Al implementar la aplicación en Azure, lo único que tiene que hacer es activar la casilla **Habilitar autenticación** de la organización y, una vez más, Visual Studio se encarga de toda la configuración.</span><span class="sxs-lookup"><span data-stu-id="3a91a-211">When you deploy the app to Azure, all you have to do is select an **Enable Organizational Authentication** check box, and once again Visual Studio takes care of all the configuration for you.</span></span>

![Publicar sitio web](single-sign-on/_static/image27.png)

<span data-ttu-id="3a91a-213">Estas capturas de pantalla provienen de un tutorial paso a paso completo que muestra cómo compilar una aplicación que usa Azure AD autenticación: [desarrollo de aplicaciones de ASP.net con Azure Active Directory](../../../../identity/overview/getting-started/developing-aspnet-apps-with-windows-azure-active-directory.md).</span><span class="sxs-lookup"><span data-stu-id="3a91a-213">These screen shots come from a complete step-by-step tutorial that shows how to build an app that uses Azure AD authentication: [Developing ASP.NET Apps with Azure Active Directory](../../../../identity/overview/getting-started/developing-aspnet-apps-with-windows-azure-active-directory.md).</span></span>

## <a name="summary"></a><span data-ttu-id="3a91a-214">Resumen</span><span class="sxs-lookup"><span data-stu-id="3a91a-214">Summary</span></span>

<span data-ttu-id="3a91a-215">En este capítulo vio que Azure Active Directory, Visual Studio y ASP.NET, facilitan la configuración del inicio de sesión único en aplicaciones de Internet para los usuarios de su organización.</span><span class="sxs-lookup"><span data-stu-id="3a91a-215">In this chapter you saw that Azure Active Directory, Visual Studio, and ASP.NET, make it easy to set up single sign-on in Internet applications for your organization's users.</span></span> <span data-ttu-id="3a91a-216">Los usuarios pueden iniciar sesión en aplicaciones de Internet con las mismas credenciales que usan para iniciar sesión con Active Directory de la red interna.</span><span class="sxs-lookup"><span data-stu-id="3a91a-216">Your users can sign on in Internet apps using the same credentials they use to sign on using Active Directory in your internal network.</span></span>

<span data-ttu-id="3a91a-217">En el [siguiente capítulo](data-storage-options.md) se examinan las opciones de almacenamiento de datos disponibles para una aplicación en la nube.</span><span class="sxs-lookup"><span data-stu-id="3a91a-217">The [next chapter](data-storage-options.md) looks at the data storage options available for a cloud app.</span></span>

<a id="resources"></a>
## <a name="resources"></a><span data-ttu-id="3a91a-218">Recursos</span><span class="sxs-lookup"><span data-stu-id="3a91a-218">Resources</span></span>

<span data-ttu-id="3a91a-219">Para obtener más información, consulte los siguientes recursos:</span><span class="sxs-lookup"><span data-stu-id="3a91a-219">For more information, see the following resources:</span></span>

- <span data-ttu-id="3a91a-220">[Documentación de Azure Active Directory](https://docs.microsoft.com/azure/active-directory/).</span><span class="sxs-lookup"><span data-stu-id="3a91a-220">[Azure Active Directory Documentation](https://docs.microsoft.com/azure/active-directory/).</span></span> <span data-ttu-id="3a91a-221">Página del portal de Azure AD documentación en el sitio de windowsazure.com.</span><span class="sxs-lookup"><span data-stu-id="3a91a-221">Portal page for Azure AD documentation on the windowsazure.com site.</span></span> <span data-ttu-id="3a91a-222">Para ver tutoriales paso a paso, consulte la sección **desarrollar** .</span><span class="sxs-lookup"><span data-stu-id="3a91a-222">For step by step tutorials, see the **Develop** section.</span></span>
- <span data-ttu-id="3a91a-223">[Azure multi-factor Authentication](https://docs.microsoft.com/azure/multi-factor-authentication/).</span><span class="sxs-lookup"><span data-stu-id="3a91a-223">[Azure Multi-Factor Authentication](https://docs.microsoft.com/azure/multi-factor-authentication/).</span></span> <span data-ttu-id="3a91a-224">Página del portal para obtener documentación sobre la autenticación multifactor en Azure.</span><span class="sxs-lookup"><span data-stu-id="3a91a-224">Portal page for documentation about multi-factor authentication in Azure.</span></span>
- <span data-ttu-id="3a91a-225">[Opciones de autenticación de cuenta de organización](../../../../visual-studio/overview/2013/creating-web-projects-in-visual-studio.md#orgauthoptions).</span><span class="sxs-lookup"><span data-stu-id="3a91a-225">[Organizational account authentication options](../../../../visual-studio/overview/2013/creating-web-projects-in-visual-studio.md#orgauthoptions).</span></span> <span data-ttu-id="3a91a-226">Explicación de las opciones de autenticación de Azure AD en el cuadro de diálogo Visual Studio 2013 New-Project.</span><span class="sxs-lookup"><span data-stu-id="3a91a-226">Explanation of the Azure AD authentication options in the Visual Studio 2013 new-project dialog.</span></span>
- <span data-ttu-id="3a91a-227">[Patrones y prácticas de Microsoft: patrón de identidad federada](https://msdn.microsoft.com/library/dn589790.aspx).</span><span class="sxs-lookup"><span data-stu-id="3a91a-227">[Microsoft Patterns and Practices - Federated Identity Pattern](https://msdn.microsoft.com/library/dn589790.aspx).</span></span>
- <span data-ttu-id="3a91a-228">[Cómo: instalar la herramienta de sincronización de Azure Active Directory](https://social.technet.microsoft.com/wiki/contents/articles/19098.howto-install-the-windows-azure-active-directory-sync-tool-now-with-pictures.aspx).</span><span class="sxs-lookup"><span data-stu-id="3a91a-228">[HowTo: Install the Azure Active Directory Sync Tool](https://social.technet.microsoft.com/wiki/contents/articles/19098.howto-install-the-windows-azure-active-directory-sync-tool-now-with-pictures.aspx).</span></span>
- <span data-ttu-id="3a91a-229">[Mapa de contenido de Servicios de federación de Active Directory (AD FS) 2,0](https://social.technet.microsoft.com/wiki/contents/articles/2735.ad-fs-2-0-content-map.aspx).</span><span class="sxs-lookup"><span data-stu-id="3a91a-229">[Active Directory Federation Services 2.0 Content Map](https://social.technet.microsoft.com/wiki/contents/articles/2735.ad-fs-2-0-content-map.aspx).</span></span> <span data-ttu-id="3a91a-230">Vínculos a documentación sobre ADFS 2,0.</span><span class="sxs-lookup"><span data-stu-id="3a91a-230">Links to documentation about ADFS 2.0.</span></span>
- <span data-ttu-id="3a91a-231">[Autorización basada en roles y basada en ACL en una aplicación de Windows Azure ad](https://code.msdn.microsoft.com/Role-Based-and-ACL-Based-86ad71a1).</span><span class="sxs-lookup"><span data-stu-id="3a91a-231">[Role-Based and ACL-Based Authorization in a Windows Azure AD Application](https://code.msdn.microsoft.com/Role-Based-and-ACL-Based-86ad71a1).</span></span> <span data-ttu-id="3a91a-232">Aplicación de ejemplo.</span><span class="sxs-lookup"><span data-stu-id="3a91a-232">Sample application.</span></span>
- <span data-ttu-id="3a91a-233">[Azure Active Directory Graph API blog](https://blogs.msdn.com/b/aadgraphteam/).</span><span class="sxs-lookup"><span data-stu-id="3a91a-233">[Azure Active Directory Graph API blog](https://blogs.msdn.com/b/aadgraphteam/).</span></span>
- <span data-ttu-id="3a91a-234">[Access Control en BYOD y en la integración de directorios en una infraestructura de identidad híbrida](https://channel9.msdn.com/Events/TechEd/NorthAmerica/2014/PCIT-B213#fbid=).</span><span class="sxs-lookup"><span data-stu-id="3a91a-234">[Access Control in BYOD and Directory Integration in a Hybrid Identity Infrastructure](https://channel9.msdn.com/Events/TechEd/NorthAmerica/2014/PCIT-B213#fbid=).</span></span> <span data-ttu-id="3a91a-235">Vídeo de sesión de Tech Ed 2014 de gayana Bagdasaryan.</span><span class="sxs-lookup"><span data-stu-id="3a91a-235">Tech Ed 2014 session video by Gayana Bagdasaryan.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="3a91a-236">[Anterior](web-development-best-practices.md)
> [Siguiente](data-storage-options.md)</span><span class="sxs-lookup"><span data-stu-id="3a91a-236">[Previous](web-development-best-practices.md)
[Next](data-storage-options.md)</span></span>
