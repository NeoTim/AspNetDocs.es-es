---
uid: web-forms/overview/older-versions-getting-started/deployment-to-a-hosting-provider/deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12
title: 'Implementar una aplicación Web de ASP.NET con SQL Server Compact con Visual Studio o Visual Web Developer: implementar en IIS como entorno de prueba-5 de 12 | Microsoft Docs'
author: tdykstra
description: En esta serie de tutoriales se muestra cómo implementar (publicar) un proyecto de aplicación Web de ASP.NET que incluye una base de datos de SQL Server Compact mediante Visual Stu...
ms.author: riande
ms.date: 11/17/2011
ms.assetid: 493b2a66-816c-485c-8315-952ed1085ccc
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deployment-to-a-hosting-provider/deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12
msc.type: authoredcontent
ms.openlocfilehash: 5d85232ff2cb229d771d517db7173721c9e277bf
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 11/28/2019
ms.locfileid: "74633480"
---
# <a name="deploying-an-aspnet-web-application-with-sql-server-compact-using-visual-studio-or-visual-web-developer-deploying-to-iis-as-a-test-environment---5-of-12"></a><span data-ttu-id="fee18-103">Implementar una aplicación Web de ASP.NET con SQL Server Compact con Visual Studio o Visual Web Developer: implementar en IIS como entorno de prueba (5 de 12)</span><span class="sxs-lookup"><span data-stu-id="fee18-103">Deploying an ASP.NET Web Application with SQL Server Compact using Visual Studio or Visual Web Developer: Deploying to IIS as a Test Environment - 5 of 12</span></span>

<span data-ttu-id="fee18-104">por [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="fee18-104">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

[<span data-ttu-id="fee18-105">Descargar el proyecto de inicio</span><span class="sxs-lookup"><span data-stu-id="fee18-105">Download Starter Project</span></span>](https://code.msdn.microsoft.com/Deploying-an-ASPNET-Web-4e31366b)

> <span data-ttu-id="fee18-106">En esta serie de tutoriales se muestra cómo implementar (publicar) un proyecto de aplicación Web ASP.NET que incluye una base de datos SQL Server Compact mediante Visual Studio 2012 RC o Visual Studio Express 2012 RC para Web.</span><span class="sxs-lookup"><span data-stu-id="fee18-106">This series of tutorials shows you how to deploy (publish) an ASP.NET web application project that includes a SQL Server Compact database by using Visual Studio 2012 RC or Visual Studio Express 2012 RC for Web.</span></span> <span data-ttu-id="fee18-107">También puede usar Visual Studio 2010 si instala la actualización de publicación Web.</span><span class="sxs-lookup"><span data-stu-id="fee18-107">You can also use Visual Studio 2010 if you install the Web Publish Update.</span></span> <span data-ttu-id="fee18-108">Para obtener una introducción a la serie, vea [el primer tutorial de la serie](deployment-to-a-hosting-provider-introduction-1-of-12.md).</span><span class="sxs-lookup"><span data-stu-id="fee18-108">For an introduction to the series, see [the first tutorial in the series](deployment-to-a-hosting-provider-introduction-1-of-12.md).</span></span>
> 
> <span data-ttu-id="fee18-109">Para ver un tutorial que muestra las características de implementación que se introdujeron después de la versión RC de Visual Studio 2012, muestra cómo implementar SQL Server ediciones distintas de SQL Server Compact y muestra cómo realizar la implementación en Azure App Service Web Apps, vea [implementación web de ASP.net con Visual Studio](../../deployment/visual-studio-web-deployment/introduction.md).</span><span class="sxs-lookup"><span data-stu-id="fee18-109">For a tutorial that shows deployment features introduced after the RC release of Visual Studio 2012, shows how to deploy SQL Server editions other than SQL Server Compact, and shows how to deploy to Azure App Service Web Apps, see [ASP.NET Web Deployment using Visual Studio](../../deployment/visual-studio-web-deployment/introduction.md).</span></span>

## <a name="overview"></a><span data-ttu-id="fee18-110">Información general del</span><span class="sxs-lookup"><span data-stu-id="fee18-110">Overview</span></span>

<span data-ttu-id="fee18-111">En este tutorial se muestra cómo implementar una aplicación Web de ASP.NET en IIS en el equipo local.</span><span class="sxs-lookup"><span data-stu-id="fee18-111">This tutorial shows how to deploy an ASP.NET web application to IIS on the local computer.</span></span>

<span data-ttu-id="fee18-112">Al desarrollar una aplicación, normalmente se prueba mediante su ejecución en Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="fee18-112">When you develop an application, you generally test by running it in Visual Studio.</span></span> <span data-ttu-id="fee18-113">De forma predeterminada, esto significa que está usando el Servidor de desarrollo de Visual Studio (también conocido como Cassini).</span><span class="sxs-lookup"><span data-stu-id="fee18-113">By default, this means you're using the Visual Studio Development Server (also known as Cassini).</span></span> <span data-ttu-id="fee18-114">El Servidor de desarrollo de Visual Studio facilita la prueba durante el desarrollo en Visual Studio, pero no funciona exactamente igual que IIS.</span><span class="sxs-lookup"><span data-stu-id="fee18-114">The Visual Studio Development Server makes it easy to test during development in Visual Studio, but it doesn't work exactly like IIS.</span></span> <span data-ttu-id="fee18-115">Como resultado, es posible que una aplicación se ejecute correctamente al probarla en Visual Studio, pero que se produzca un error cuando se implemente en IIS en un entorno de hospedaje.</span><span class="sxs-lookup"><span data-stu-id="fee18-115">As a result, it's possible that an application will run correctly when you test it in Visual Studio, but fail when it's deployed to IIS in a hosting environment.</span></span>

<span data-ttu-id="fee18-116">Puede probar la aplicación más confiablemente de estas maneras:</span><span class="sxs-lookup"><span data-stu-id="fee18-116">You can test your application more reliably in these ways:</span></span>

1. <span data-ttu-id="fee18-117">Use IIS Express o IIS completo en lugar del Servidor de desarrollo de Visual Studio al probar en Visual Studio durante el desarrollo.</span><span class="sxs-lookup"><span data-stu-id="fee18-117">Use IIS Express or full IIS instead of the Visual Studio Development Server when you test in Visual Studio during development.</span></span> <span data-ttu-id="fee18-118">Por lo general, este método emula de manera más precisa cómo se ejecutará el sitio en IIS.</span><span class="sxs-lookup"><span data-stu-id="fee18-118">This method generally emulates more accurately how your site will run under IIS.</span></span> <span data-ttu-id="fee18-119">Sin embargo, este método no prueba el proceso de implementación ni valida que el resultado del proceso de implementación se ejecute correctamente.</span><span class="sxs-lookup"><span data-stu-id="fee18-119">However, this method does not test your deployment process or validate that the result of the deployment process will run correctly.</span></span>
2. <span data-ttu-id="fee18-120">Implemente la aplicación en IIS en el equipo de desarrollo mediante el mismo proceso que usará más adelante para implementarla en el entorno de producción.</span><span class="sxs-lookup"><span data-stu-id="fee18-120">Deploy the application to IIS on your development computer by using the same process that you'll use later to deploy it to your production environment.</span></span> <span data-ttu-id="fee18-121">Este método valida el proceso de implementación, además de validar que la aplicación se ejecutará correctamente en IIS.</span><span class="sxs-lookup"><span data-stu-id="fee18-121">This method validates your deployment process in addition to validating that your application will run correctly under IIS.</span></span>
3. <span data-ttu-id="fee18-122">Implemente la aplicación en un entorno de prueba lo más cercano posible a su entorno de producción.</span><span class="sxs-lookup"><span data-stu-id="fee18-122">Deploy the application to a test environment that is as close as possible to your production environment.</span></span> <span data-ttu-id="fee18-123">Puesto que el entorno de producción para estos tutoriales es un proveedor de hospedaje de terceros, el entorno de prueba ideal sería una segunda cuenta con el proveedor de hospedaje.</span><span class="sxs-lookup"><span data-stu-id="fee18-123">Since the production environment for these tutorials is a third-party hosting provider, the ideal test environment would be a second account with the hosting provider.</span></span> <span data-ttu-id="fee18-124">Usaría esta segunda cuenta solo para realizar pruebas, pero se configuraría de la misma manera que la cuenta de producción.</span><span class="sxs-lookup"><span data-stu-id="fee18-124">You would use this second account only for testing, but it would be set up the same way as the production account.</span></span>

<span data-ttu-id="fee18-125">En este tutorial se muestran los pasos para la opción 2.</span><span class="sxs-lookup"><span data-stu-id="fee18-125">This tutorial shows the steps for option 2.</span></span> <span data-ttu-id="fee18-126">Al final del tutorial [implementación en el entorno de producción](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12.md) , se proporciona orientación para la opción 3 y, al final de este tutorial, hay vínculos a recursos para la opción 1.</span><span class="sxs-lookup"><span data-stu-id="fee18-126">Guidance for option 3 is provided at the end of the [Deploying to the Production Environment](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12.md) tutorial, and at the end of this tutorial there are links to resources for option 1.</span></span>

<span data-ttu-id="fee18-127">Aviso: Si recibe un mensaje de error o algo no funciona a medida que avanza en el tutorial, asegúrese de consultar la [Página de solución de problemas](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12.md).</span><span class="sxs-lookup"><span data-stu-id="fee18-127">Reminder: If you get an error message or something doesn't work as you go through the tutorial, be sure to check the [troubleshooting page](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12.md).</span></span>

## <a name="configuring-the-application-to-run-in-medium-trust"></a><span data-ttu-id="fee18-128">Configuración de la aplicación para que se ejecute en un nivel de confianza medio</span><span class="sxs-lookup"><span data-stu-id="fee18-128">Configuring the Application to Run in Medium Trust</span></span>

<span data-ttu-id="fee18-129">Antes de instalar IIS e implementarlo en él, cambiará la configuración del archivo Web. config para que el sitio se ejecute más como lo hará en un entorno de hospedaje compartido típico.</span><span class="sxs-lookup"><span data-stu-id="fee18-129">Before installing IIS and deploying to it, you'll change a Web.config file setting in order to make the site run more like it will in a typical shared hosting environment.</span></span>

<span data-ttu-id="fee18-130">Los proveedores de hospedaje normalmente ejecutan el sitio web con *confianza media*, lo que significa que hay algunas cosas que no se permiten.</span><span class="sxs-lookup"><span data-stu-id="fee18-130">Hosting providers typically run your web site in *medium trust*, which means there are some things it is not allowed to do.</span></span> <span data-ttu-id="fee18-131">Por ejemplo, el código de aplicación no puede tener acceso al registro de Windows y no puede leer ni escribir archivos que estén fuera de la jerarquía de carpetas de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="fee18-131">For example, application code can't access the Windows registry and can't read or write files that are outside of your application's folder hierarchy.</span></span> <span data-ttu-id="fee18-132">De forma predeterminada, la aplicación se ejecuta en un *nivel de confianza alto* en el equipo local, lo que significa que es posible que la aplicación pueda hacer cosas en las que se produciría un error cuando se implemente en producción.</span><span class="sxs-lookup"><span data-stu-id="fee18-132">By default your application runs in *high trust* on your local computer, which means that the application might be able to do things that would fail when you deploy it to production.</span></span> <span data-ttu-id="fee18-133">Por lo tanto, para que el entorno de prueba refleje de forma más precisa el entorno de producción, configurará la aplicación para que se ejecute en un nivel de confianza medio.</span><span class="sxs-lookup"><span data-stu-id="fee18-133">Therefore, to make the test environment more accurately reflect the production environment, you'll configure the application to run in medium trust.</span></span>

<span data-ttu-id="fee18-134">En el archivo Web. config de la aplicación, agregue un elemento **Trust** en el elemento **System. Web** , tal como se muestra en este ejemplo.</span><span class="sxs-lookup"><span data-stu-id="fee18-134">In the application Web.config file, add a **trust** element in the **system.web** element, as shown in this example.</span></span>

[!code-xml[Main](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/samples/sample1.xml?highlight=4)]

<span data-ttu-id="fee18-135">La aplicación se ejecutará ahora en el nivel de confianza medio en IIS, incluso en el equipo local.</span><span class="sxs-lookup"><span data-stu-id="fee18-135">The application will now run in medium trust in IIS even on your local computer.</span></span> <span data-ttu-id="fee18-136">Esta configuración permite detectar lo antes posible cualquier intento por parte del código de la aplicación para hacer algo que produciría un error en la producción.</span><span class="sxs-lookup"><span data-stu-id="fee18-136">This setting enables you to catch as early as possible any attempts by application code to do something that would fail in production.</span></span>

> [!NOTE]
> <span data-ttu-id="fee18-137">Si usa Migraciones de Entity Framework Code First, asegúrese de que tiene instalada la versión 5,0 o posterior.</span><span class="sxs-lookup"><span data-stu-id="fee18-137">If you are using Entity Framework Code First Migrations, make sure that you have version 5.0 or later installed.</span></span> <span data-ttu-id="fee18-138">En Entity Framework versión 4,3, las migraciones requieren plena confianza para poder actualizar el esquema de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="fee18-138">In Entity Framework version 4.3, Migrations requires full trust in order to update the database schema.</span></span>

## <a name="installing-iis-and-web-deploy"></a><span data-ttu-id="fee18-139">Instalar IIS y Web Deploy</span><span class="sxs-lookup"><span data-stu-id="fee18-139">Installing IIS and Web Deploy</span></span>

<span data-ttu-id="fee18-140">Para implementar en IIS en el equipo de desarrollo, debe tener instalado IIS y Web Deploy.</span><span class="sxs-lookup"><span data-stu-id="fee18-140">To deploy to IIS on your development computer, you must have IIS and Web Deploy installed.</span></span> <span data-ttu-id="fee18-141">No se incluyen en la configuración predeterminada de Windows 7.</span><span class="sxs-lookup"><span data-stu-id="fee18-141">These are not included in the default Windows 7 configuration.</span></span> <span data-ttu-id="fee18-142">Si ya ha instalado IIS y Web Deploy, vaya a la sección siguiente.</span><span class="sxs-lookup"><span data-stu-id="fee18-142">If you have already installed both IIS and Web Deploy, skip to the next section.</span></span>

<span data-ttu-id="fee18-143">Usar el [instalador de plataforma web](https://www.microsoft.com/web/downloads/platform.aspx) es la manera preferida de instalar iis y Web deploy, porque el instalador de plataforma web instala una configuración recomendada para IIS e instala automáticamente los requisitos previos para iis y Web deploy, si es necesario.</span><span class="sxs-lookup"><span data-stu-id="fee18-143">Using the [Web Platform Installer](https://www.microsoft.com/web/downloads/platform.aspx) is the preferred way to install IIS and Web Deploy, because the Web Platform Installer installs a recommended configuration for IIS and it automatically installs the prerequisites for IIS and Web Deploy if necessary.</span></span>

<span data-ttu-id="fee18-144">Para ejecutar el instalador de plataforma web para instalar IIS y Web Deploy, use el siguiente vínculo.</span><span class="sxs-lookup"><span data-stu-id="fee18-144">To run Web Platform Installer to install IIS and Web Deploy, use the following link.</span></span> <span data-ttu-id="fee18-145">Si ya tiene instalado IIS, Web Deploy o cualquiera de los componentes necesarios, el instalador de plataforma web instala solo lo que falta.</span><span class="sxs-lookup"><span data-stu-id="fee18-145">If you already have installed IIS, Web Deploy or any of their required components, the Web Platform Installer installs only what is missing.</span></span>

- [<span data-ttu-id="fee18-146">Instalar IIS y Web Deploy mediante WebPI</span><span class="sxs-lookup"><span data-stu-id="fee18-146">Install IIS and Web Deploy using WebPI</span></span>](https://www.microsoft.com/web/gallery/install.aspx?appsxml=&amp;appid=IIS7;ASPNET;NETFramework4;WDeploy)

## <a name="setting-the-default-application-pool-to-net-4"></a><span data-ttu-id="fee18-147">Establecer el grupo de aplicaciones predeterminado en .NET 4</span><span class="sxs-lookup"><span data-stu-id="fee18-147">Setting the Default Application Pool to .NET 4</span></span>

<span data-ttu-id="fee18-148">Después de instalar IIS, ejecute el **Administrador de IIS** para asegurarse de que la .NET Framework versión 4 está asignada al grupo de aplicaciones predeterminado.</span><span class="sxs-lookup"><span data-stu-id="fee18-148">After installing IIS, run **IIS Manager** to make sure that the .NET Framework version 4 is assigned to the default application pool.</span></span>

<span data-ttu-id="fee18-149">En el menú **Inicio** de Windows, seleccione **Ejecutar**, escriba "inetmgr" y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="fee18-149">From the Windows **Start** menu, select **Run**, enter "inetmgr", and then click **OK**.</span></span> <span data-ttu-id="fee18-150">(Si el comando **Ejecutar** no está en el menú **Inicio** , puede presionar la tecla Windows y R para abrirlo.</span><span class="sxs-lookup"><span data-stu-id="fee18-150">(If the **Run** command is not in your **Start** menu, you can press the Windows Key and R to open it.</span></span> <span data-ttu-id="fee18-151">O haga clic con el botón secundario en la barra de tareas, haga clic en **propiedades**, seleccione la pestaña **menú Inicio** , haga clic en **personalizar**y seleccione **Ejecutar comando**.</span><span class="sxs-lookup"><span data-stu-id="fee18-151">Or right-click the taskbar, click **Properties**, select the **Start Menu** tab, click **Customize**, and select **Run command**.)</span></span>

<span data-ttu-id="fee18-152">En el panel **conexiones** , expanda el nodo de servidor y seleccione **grupos de aplicaciones**.</span><span class="sxs-lookup"><span data-stu-id="fee18-152">In the **Connections** pane, expand the server node and select **Application Pools**.</span></span> <span data-ttu-id="fee18-153">En el panel **grupos de aplicaciones** , si **DefaultAppPool** se asigna a la versión 4 de .NET Framework, como en la siguiente ilustración, vaya a la sección siguiente.</span><span class="sxs-lookup"><span data-stu-id="fee18-153">In the **Application Pools** pane, if **DefaultAppPool** is assigned to the .NET framework version 4 as in the following illustration, skip to the next section.</span></span>

<span data-ttu-id="fee18-154">[![Inetmgr_showing_4.0_app_pools](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image2.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="fee18-154">[![Inetmgr_showing_4.0_app_pools](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image2.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image1.png)</span></span>

<span data-ttu-id="fee18-155">Si solo ve dos grupos de aplicaciones y ambos están establecidos en el .NET Framework 2,0, tendrá que instalar ASP.NET 4 en IIS:</span><span class="sxs-lookup"><span data-stu-id="fee18-155">If you see only two application pools and both of them are set to the .NET Framework 2.0, you have to install ASP.NET 4 in IIS:</span></span>

- <span data-ttu-id="fee18-156">Abra una ventana del símbolo del sistema; para ello, haga clic con el botón secundario en **símbolo del sistema** en el menú **Inicio** de Windows y seleccione **Ejecutar como administrador**.</span><span class="sxs-lookup"><span data-stu-id="fee18-156">Open a command prompt window by right-clicking **Command Prompt** in the Windows **Start** menu and selecting **Run as Administrator**.</span></span> <span data-ttu-id="fee18-157">A continuación, ejecute [aspnet\_regiis. exe](https://msdn.microsoft.com/library/k6h9cz8h.aspx) para instalar ASP.net 4 en IIS, con los siguientes comandos.</span><span class="sxs-lookup"><span data-stu-id="fee18-157">Then run [aspnet\_regiis.exe](https://msdn.microsoft.com/library/k6h9cz8h.aspx) to install ASP.NET 4 in IIS, using the following commands.</span></span> <span data-ttu-id="fee18-158">(En los sistemas de 64 bits, reemplace "Framework" por "Framework64").</span><span class="sxs-lookup"><span data-stu-id="fee18-158">(In 64-bit systems, replace "Framework" with "Framework64".)</span></span>

    [!code-console[Main](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/samples/sample2.cmd)]

    <span data-ttu-id="fee18-159">[![aspnet_regiis_installing_ASP. NET_4](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image4.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="fee18-159">[![aspnet_regiis_installing_ASP.NET_4](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image4.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image3.png)</span></span>

    <span data-ttu-id="fee18-160">Este comando crea nuevos grupos de aplicaciones para el .NET Framework 4, pero el grupo de aplicaciones predeterminado se establecerá en 2,0.</span><span class="sxs-lookup"><span data-stu-id="fee18-160">This command creates new application pools for the .NET Framework 4, but the default application pool will still be set to 2.0.</span></span> <span data-ttu-id="fee18-161">Va a implementar una aplicación que tiene como destino .NET 4 para ese grupo de aplicaciones, por lo que tiene que cambiar el grupo de aplicaciones a .NET 4.</span><span class="sxs-lookup"><span data-stu-id="fee18-161">You'll be deploying an application that targets .NET 4 to that application pool, so you have to change the application pool to .NET 4.</span></span>

<span data-ttu-id="fee18-162">Si ha cerrado el **Administrador de IIS**, ejecútelo de nuevo, expanda el nodo del servidor y haga clic en grupos de **aplicaciones** para volver a mostrar el panel grupos de **aplicaciones** .</span><span class="sxs-lookup"><span data-stu-id="fee18-162">If you closed **IIS Manager**, run it again, expand the server node, and click **Application Pools** to display the **Application Pools** pane again.</span></span>

<span data-ttu-id="fee18-163">En el panel **grupos de aplicaciones** , haga clic en **DefaultAppPool**y, a continuación, en el panel **acciones** , haga clic en **configuración básica**.</span><span class="sxs-lookup"><span data-stu-id="fee18-163">In the **Application Pools** pane, click **DefaultAppPool**, and then in the **Actions** pane click **Basic Settings**.</span></span>

<span data-ttu-id="fee18-164">[![Inetmgr_selecting_Basic_Settings_for_app_pool](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image6.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="fee18-164">[![Inetmgr_selecting_Basic_Settings_for_app_pool](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image6.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image5.png)</span></span>

<span data-ttu-id="fee18-165">En el cuadro de diálogo **modificar grupo de aplicaciones** , cambie **.NET Framework versión** a **.NET Framework v 4.0.30319** y haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="fee18-165">In the **Edit Application Pool** dialog box, change **.NET Framework version** to **.NET Framework v4.0.30319** and click **OK**.</span></span>

<span data-ttu-id="fee18-166">[![Selecting_. NET_4_for_DefaultAppPool](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image8.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="fee18-166">[![Selecting_.NET_4_for_DefaultAppPool](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image8.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image7.png)</span></span>

<span data-ttu-id="fee18-167">Ahora está listo para publicar en IIS.</span><span class="sxs-lookup"><span data-stu-id="fee18-167">You are now ready to publish to IIS.</span></span>

## <a name="publishing-to-iis"></a><span data-ttu-id="fee18-168">Publicar en IIS</span><span class="sxs-lookup"><span data-stu-id="fee18-168">Publishing to IIS</span></span>

<span data-ttu-id="fee18-169">Hay varias maneras de implementar con Visual Studio 2010 y Web Deploy:</span><span class="sxs-lookup"><span data-stu-id="fee18-169">There are several ways you can deploy using Visual Studio 2010 and Web Deploy:</span></span>

- <span data-ttu-id="fee18-170">Usar publicación con un solo clic de Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="fee18-170">Use Visual Studio one-click publish.</span></span>
- <span data-ttu-id="fee18-171">Cree un *paquete de implementación* e instálelo mediante la interfaz de usuario del administrador de IIS.</span><span class="sxs-lookup"><span data-stu-id="fee18-171">Create a *deployment package* and install it using the IIS Manager UI.</span></span> <span data-ttu-id="fee18-172">El paquete de implementación consta de un archivo *. zip* que contiene todos los archivos y metadatos necesarios para instalar un sitio en IIS.</span><span class="sxs-lookup"><span data-stu-id="fee18-172">The deployment package consists of a *.zip* file that contains all the files and metadata needed to install a site in IIS.</span></span>
- <span data-ttu-id="fee18-173">Cree un paquete de implementación e instálelo mediante la línea de comandos.</span><span class="sxs-lookup"><span data-stu-id="fee18-173">Create a deployment package and install it using the command line.</span></span>

<span data-ttu-id="fee18-174">El proceso que realizó en los tutoriales anteriores para configurar Visual Studio para automatizar las tareas de implementación se aplica a todos estos tres métodos.</span><span class="sxs-lookup"><span data-stu-id="fee18-174">The process you went through in the previous tutorials to set up Visual Studio to automate deployment tasks applies to all of these three methods.</span></span> <span data-ttu-id="fee18-175">En estos tutoriales, usará el primero de estos métodos.</span><span class="sxs-lookup"><span data-stu-id="fee18-175">In these tutorials you'll use the first of these methods.</span></span> <span data-ttu-id="fee18-176">Para obtener información sobre el uso de paquetes de implementación, vea [mapa de contenido de implementación de ASP.net](https://msdn.microsoft.com/library/bb386521.aspx).</span><span class="sxs-lookup"><span data-stu-id="fee18-176">For information about using deployment packages, see [ASP.NET Deployment Content Map](https://msdn.microsoft.com/library/bb386521.aspx).</span></span>

<span data-ttu-id="fee18-177">Antes de publicar, asegúrese de que está ejecutando Visual Studio en modo de administrador.</span><span class="sxs-lookup"><span data-stu-id="fee18-177">Before publishing, make sure that you are running Visual Studio in administrator mode.</span></span> <span data-ttu-id="fee18-178">(En el menú **Inicio** de Windows 7, haga clic con el botón derecho en el icono de la versión de Visual Studio que está usando y seleccione **Ejecutar como administrador**). El modo de administrador es necesario para la publicación únicamente cuando se publica en IIS en el equipo local.</span><span class="sxs-lookup"><span data-stu-id="fee18-178">(In the Windows 7 **Start** menu, right-click the icon for the version of Visual Studio you're using and select **Run as Administrator**.) Administrator mode is required for publishing only when you are publishing to IIS on the local computer.</span></span>

<span data-ttu-id="fee18-179">En **Explorador de soluciones**, haga clic con el botón derecho en el proyecto ContosoUniversity (no en el proyecto CONTOSOUNIVERSITY. Dal) y seleccione **publicar**.</span><span class="sxs-lookup"><span data-stu-id="fee18-179">In **Solution Explorer**, right-click the ContosoUniversity project (not the ContosoUniversity.DAL project) and select **Publish**.</span></span>

<span data-ttu-id="fee18-180">Aparece el Asistente para **publicación web** .</span><span class="sxs-lookup"><span data-stu-id="fee18-180">The **Publish Web** wizard appears.</span></span>

![Publish_Web_wizard_Profile_tab](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image9.png)

<span data-ttu-id="fee18-182">En la lista desplegable, seleccione **&lt;nuevo...&gt;** .</span><span class="sxs-lookup"><span data-stu-id="fee18-182">In the drop-down list, select **&lt;New...&gt;**.</span></span>

<span data-ttu-id="fee18-183">En el cuadro de diálogo **nuevo perfil** , escriba "prueba" y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="fee18-183">In the **New Profile** dialog box, enter "Test", and then click **OK**.</span></span>

![Cuadro de diálogo Nuevo perfil](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image10.png)

<span data-ttu-id="fee18-185">Este nombre es el mismo que el nodo intermedio del archivo de transformación Web. test. config que creó anteriormente.</span><span class="sxs-lookup"><span data-stu-id="fee18-185">This name is the same as the middle node of the Web.Test.config transform file that you created earlier.</span></span> <span data-ttu-id="fee18-186">Esta correspondencia es lo que hace que se apliquen las transformaciones Web. test. config al publicar con este perfil.</span><span class="sxs-lookup"><span data-stu-id="fee18-186">This correspondence is what causes the Web.Test.config transformations to be applied when you publish by using this profile.</span></span>

<span data-ttu-id="fee18-187">El asistente avanza automáticamente a la pestaña **conexión** .</span><span class="sxs-lookup"><span data-stu-id="fee18-187">The wizard automatically advances to the **Connection** tab.</span></span>

<span data-ttu-id="fee18-188">En el cuadro **dirección URL del servicio** , escriba *localhost*.</span><span class="sxs-lookup"><span data-stu-id="fee18-188">In the **Service URL** box, enter *localhost*.</span></span>

<span data-ttu-id="fee18-189">En el cuadro **sitio o aplicación** , escriba *sitio web predeterminado/ContosoUniversity*.</span><span class="sxs-lookup"><span data-stu-id="fee18-189">In the **Site/application** box, enter *Default Web Site/ContosoUniversity*.</span></span>

<span data-ttu-id="fee18-190">En el cuadro **dirección URL de destino** , escriba `http://localhost/ContosoUniversity`.</span><span class="sxs-lookup"><span data-stu-id="fee18-190">In the **Destination URL** box, enter `http://localhost/ContosoUniversity`.</span></span>

<span data-ttu-id="fee18-191">La configuración de la **dirección URL de destino** no es obligatoria.</span><span class="sxs-lookup"><span data-stu-id="fee18-191">The **Destination URL** setting isn't required.</span></span> <span data-ttu-id="fee18-192">Cuando Visual Studio finaliza la implementación de la aplicación, abre automáticamente el explorador predeterminado en esta dirección URL.</span><span class="sxs-lookup"><span data-stu-id="fee18-192">When Visual Studio finishes deploying the application, it automatically opens your default browser to this URL.</span></span> <span data-ttu-id="fee18-193">Si no desea que el explorador se abra automáticamente después de la implementación, deje este cuadro en blanco.</span><span class="sxs-lookup"><span data-stu-id="fee18-193">If you don't want the browser to open automatically after deployment, leave this box blank.</span></span>

![Publish_Web_wizard_Connection_tab_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image11.png)

<span data-ttu-id="fee18-195">Haga clic en **validar conexión** para comprobar que la configuración es correcta y puede conectarse a IIS en el equipo local.</span><span class="sxs-lookup"><span data-stu-id="fee18-195">Click **Validate Connection** to verify that the settings are correct and you can connect to IIS on the local computer.</span></span>

<span data-ttu-id="fee18-196">Una marca de verificación verde comprueba que la conexión se ha realizado correctamente.</span><span class="sxs-lookup"><span data-stu-id="fee18-196">A green check mark verifies that the connection is successful.</span></span>

![Publish_Web_wizard_Connection_tab_validated](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image12.png)

<span data-ttu-id="fee18-198">Haga clic en **siguiente** para avanzar a la pestaña **configuración** .</span><span class="sxs-lookup"><span data-stu-id="fee18-198">Click **Next** to advance to the **Settings** tab.</span></span>

<span data-ttu-id="fee18-199">El cuadro desplegable **configuración** especifica la configuración de compilación que se va a implementar.</span><span class="sxs-lookup"><span data-stu-id="fee18-199">The **Configuration** drop-down box specifies the build configuration to deploy.</span></span> <span data-ttu-id="fee18-200">El valor predeterminado es release, que es lo que desea.</span><span class="sxs-lookup"><span data-stu-id="fee18-200">The default value is Release, which is what you want.</span></span>

<span data-ttu-id="fee18-201">Deje desactivada la casilla **quitar archivos adicionales en el destino** .</span><span class="sxs-lookup"><span data-stu-id="fee18-201">Leave the **Remove additional files at destination** check box cleared.</span></span> <span data-ttu-id="fee18-202">Dado que se trata de la primera implementación, todavía no habrá ningún archivo en la carpeta de destino.</span><span class="sxs-lookup"><span data-stu-id="fee18-202">Since this is your first deployment, there won't be any files in the destination folder yet.</span></span>

<span data-ttu-id="fee18-203">En la sección **bases de datos** , escriba el siguiente valor en el cuadro cadena de conexión de **SchoolContext**:</span><span class="sxs-lookup"><span data-stu-id="fee18-203">In the **Databases** section, enter the following value in the connection string box for **SchoolContext**:</span></span>

[!code-console[Main](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/samples/sample3.cmd)]

<span data-ttu-id="fee18-204">El proceso de implementación colocará esta cadena de conexión en el archivo Web. config implementado porque está seleccionada **la opción usar esta cadena de conexión en tiempo de ejecución** .</span><span class="sxs-lookup"><span data-stu-id="fee18-204">The deployment process will put this connection string in the deployed Web.config file because **Use this connection string at runtime** is selected.</span></span>

<span data-ttu-id="fee18-205">También en **SchoolContext**, seleccione **aplicar migraciones de Code First**.</span><span class="sxs-lookup"><span data-stu-id="fee18-205">Also under **SchoolContext**, select **Apply Code First Migrations**.</span></span> <span data-ttu-id="fee18-206">Esta opción hace que el proceso de implementación configure el archivo Web. config implementado para especificar el inicializador de `MigrateDatabaseToLatestVersion`.</span><span class="sxs-lookup"><span data-stu-id="fee18-206">This option causes the deployment process to configure the deployed Web.config file to specify the `MigrateDatabaseToLatestVersion` initializer.</span></span> <span data-ttu-id="fee18-207">Este inicializador actualiza automáticamente la base de datos a la versión más reciente cuando la aplicación obtiene acceso a la base de datos por primera vez después de la implementación.</span><span class="sxs-lookup"><span data-stu-id="fee18-207">This initializer automatically updates the database to the latest version when the application accesses the database for the first time after deployment.</span></span>

<span data-ttu-id="fee18-208">En el cuadro cadena de conexión de **DefaultConnection**, escriba el siguiente valor:</span><span class="sxs-lookup"><span data-stu-id="fee18-208">In the connection string box for **DefaultConnection**, enter the following value:</span></span>

[!code-console[Main](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/samples/sample4.cmd)]

<span data-ttu-id="fee18-209">Deje la **base de datos de actualización** desactivada.</span><span class="sxs-lookup"><span data-stu-id="fee18-209">Leave **Update database** cleared.</span></span> <span data-ttu-id="fee18-210">La base de datos de pertenencia se implementará copiando el archivo. sdf en los datos de la\_de la aplicación y no quiere que el proceso de implementación haga nada más con esta base de datos.</span><span class="sxs-lookup"><span data-stu-id="fee18-210">The membership database will be deployed by copying the .sdf file in App\_Data, and you don't want the deployment process to do anything else with this database.</span></span>

![Publish_Web_wizard_Settings_tab_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image13.png)

<span data-ttu-id="fee18-212">Haga clic en **siguiente** para avanzar a la pestaña **vista previa** .</span><span class="sxs-lookup"><span data-stu-id="fee18-212">Click **Next** to advance to the **Preview** tab.</span></span>

<span data-ttu-id="fee18-213">En la pestaña **vista previa** , haga clic en **iniciar vista previa** para ver una lista de los archivos que se copiarán.</span><span class="sxs-lookup"><span data-stu-id="fee18-213">In the **Preview** tab, click **Start Preview** to see a list of the files that will be copied.</span></span>

![Publish_Web_wizard_Preview_tab_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image14.png)

![Publish_Web_wizard_Preview_tab_Test_with_file_list](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image15.png)

<span data-ttu-id="fee18-216">Haga clic en **Publicar**.</span><span class="sxs-lookup"><span data-stu-id="fee18-216">Click **Publish**.</span></span>

<span data-ttu-id="fee18-217">Si Visual Studio no está en modo de administrador, es posible que reciba un mensaje de error que indica un error de permisos.</span><span class="sxs-lookup"><span data-stu-id="fee18-217">If Visual Studio is not in administrator mode, you might get an error message that indicates a permissions error.</span></span> <span data-ttu-id="fee18-218">En ese caso, cierre Visual Studio, ábralo en modo de administrador e intente publicar de nuevo.</span><span class="sxs-lookup"><span data-stu-id="fee18-218">In that case, close Visual Studio, open it in administrator mode, and try to publish again.</span></span>

<span data-ttu-id="fee18-219">Si Visual Studio está en modo de administrador, la ventana de **salida** informa de que la compilación se ha realizado correctamente y se ha publicado.</span><span class="sxs-lookup"><span data-stu-id="fee18-219">If Visual Studio is in administrator mode, the **Output** window reports successful build and publish.</span></span>

![Output_window_publish_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image16.png)

<span data-ttu-id="fee18-221">El explorador se abre automáticamente en la Página principal de Contoso University que se ejecuta en IIS en el equipo local.</span><span class="sxs-lookup"><span data-stu-id="fee18-221">The browser automatically opens to the Contoso University Home page running in IIS on the local computer.</span></span>

<span data-ttu-id="fee18-222">[![Home_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image18.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="fee18-222">[![Home_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image18.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image17.png)</span></span>

## <a name="testing-in-the-test-environment"></a><span data-ttu-id="fee18-223">Pruebas en el entorno de prueba</span><span class="sxs-lookup"><span data-stu-id="fee18-223">Testing in the Test Environment</span></span>

<span data-ttu-id="fee18-224">Observe que el indicador de entorno muestra "(test)" en lugar de "(dev)", que muestra que la transformación de *Web. config* para el indicador de entorno se realizó correctamente.</span><span class="sxs-lookup"><span data-stu-id="fee18-224">Notice that the environment indicator shows "(Test)" instead of "(Dev)", which shows that the *Web.config* transformation for the environment indicator was successful.</span></span>

<span data-ttu-id="fee18-225">[![Home_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image20.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="fee18-225">[![Home_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image20.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image19.png)</span></span>

<span data-ttu-id="fee18-226">Ejecute la página **Students** para comprobar que la base de datos implementada no tiene estudiantes.</span><span class="sxs-lookup"><span data-stu-id="fee18-226">Run the **Students** page to verify that the deployed database has no students.</span></span> <span data-ttu-id="fee18-227">Al seleccionar esta página, la carga puede tardar unos minutos, ya que Code First crea la base de datos y, a continuación, ejecuta el método `Seed`.</span><span class="sxs-lookup"><span data-stu-id="fee18-227">When you select this page it may take a few minutes to load because Code First creates the database and then runs the `Seed` method.</span></span> <span data-ttu-id="fee18-228">(No lo hacía cuando estaba en la Página principal porque la aplicación no ha intentado tener acceso a la base de datos todavía).</span><span class="sxs-lookup"><span data-stu-id="fee18-228">(It didn't do that when you were on the home page because the application didn't try to access the database yet.)</span></span>

<span data-ttu-id="fee18-229">[![Students_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image22.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="fee18-229">[![Students_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image22.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image21.png)</span></span>

<span data-ttu-id="fee18-230">Ejecute la página **instructores** para comprobar que Code First ha inicializado la base de datos con datos del instructor:</span><span class="sxs-lookup"><span data-stu-id="fee18-230">Run the **Instructors** page to verify that Code First seeded the database with instructor data:</span></span>

<span data-ttu-id="fee18-231">[![Instructors_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image24.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="fee18-231">[![Instructors_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image24.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image23.png)</span></span>

<span data-ttu-id="fee18-232">Seleccione **Agregar estudiantes** en el menú **estudiantes** , agregue un estudiante y, a continuación, vea el nuevo estudiante en **la página** Students para comprobar que puede escribir correctamente en la base de datos:</span><span class="sxs-lookup"><span data-stu-id="fee18-232">Select **Add Students** from the **Students** menu, add a student, and then view the new student in the **Students** page to verify that you can successfully write to the database:</span></span>

<span data-ttu-id="fee18-233">[![Add_Students_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image26.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="fee18-233">[![Add_Students_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image26.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image25.png)</span></span>

<span data-ttu-id="fee18-234">[![Students_page_with_new_student_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image28.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="fee18-234">[![Students_page_with_new_student_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image28.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image27.png)</span></span>

<span data-ttu-id="fee18-235">En el menú de **cursos** , seleccione **Actualizar créditos**.</span><span class="sxs-lookup"><span data-stu-id="fee18-235">From the **Courses** menu, select **Update Credits**.</span></span> <span data-ttu-id="fee18-236">La página **Actualizar créditos** requiere permisos de administrador, por lo que se muestra la página **de inicio de sesión** .</span><span class="sxs-lookup"><span data-stu-id="fee18-236">The **Update Credits** page requires administrator permissions, so the **Log In** page is displayed.</span></span> <span data-ttu-id="fee18-237">Escriba las credenciales de la cuenta de administrador que creó anteriormente ("admin" y "Pas $ w0rd").</span><span class="sxs-lookup"><span data-stu-id="fee18-237">Enter the administrator account credentials that you created earlier ("admin" and "Pas$w0rd").</span></span> <span data-ttu-id="fee18-238">Se muestra la página **Actualizar créditos** , que comprueba que la cuenta de administrador que creó en el tutorial anterior se ha implementado correctamente en el entorno de prueba.</span><span class="sxs-lookup"><span data-stu-id="fee18-238">The **Update Credits** page is displayed, which verifies that the administrator account that you created in the previous tutorial was correctly deployed to the test environment.</span></span>

<span data-ttu-id="fee18-239">[![Log_In_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image30.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="fee18-239">[![Log_In_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image30.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image29.png)</span></span>

<span data-ttu-id="fee18-240">[![Update_Credits_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image32.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="fee18-240">[![Update_Credits_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image32.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image31.png)</span></span>

<span data-ttu-id="fee18-241">Compruebe que existe una carpeta *Elmah* con solo el archivo de marcador de posición.</span><span class="sxs-lookup"><span data-stu-id="fee18-241">Verify that an *Elmah* folder exists with only the placeholder file in it.</span></span>

<span data-ttu-id="fee18-242">[![Elmah_folder_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image34.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="fee18-242">[![Elmah_folder_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image34.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image33.png)</span></span>

<a id="efcfmigrations"></a>

## <a name="reviewing-the-automatic-webconfig-changes-for-code-first-migrations"></a><span data-ttu-id="fee18-243">Revisar los cambios automáticos de Web. config para Migraciones de Code First</span><span class="sxs-lookup"><span data-stu-id="fee18-243">Reviewing the Automatic Web.config Changes for Code First Migrations</span></span>

<span data-ttu-id="fee18-244">Abra el archivo *Web. config* en la aplicación implementada en *C:\inetpub\wwwroot\ContosoUniversity* y puede ver dónde se configuró el proceso de implementación migraciones de Code First para actualizar automáticamente la base de datos a la versión más reciente.</span><span class="sxs-lookup"><span data-stu-id="fee18-244">Open the *Web.config* file in the deployed application at *C:\inetpub\wwwroot\ContosoUniversity* and you can see where the deployment process configured Code First Migrations to automatically update the database to the latest version.</span></span>

![](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image35.png)

<span data-ttu-id="fee18-245">El proceso de implementación también ha creado una nueva cadena de conexión para que Migraciones de Code First usar exclusivamente para actualizar el esquema de la base de datos:</span><span class="sxs-lookup"><span data-stu-id="fee18-245">The deployment process also created a new connection string for Code First Migrations to use exclusively for updating the database schema:</span></span>

![DatabasePublish_connection_string](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image36.png)

<span data-ttu-id="fee18-247">Esta cadena de conexión adicional le permite especificar una cuenta de usuario para las actualizaciones del esquema de la base de datos y una cuenta de usuario diferente para el acceso a los datos de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="fee18-247">This additional connection string enables you to specify one user account for database schema updates, and a different user account for application data access.</span></span> <span data-ttu-id="fee18-248">Por ejemplo, puede asignar el rol de propietario de la base de\_a Migraciones de Code First, y las funciones dB\_DataReader y DB\_DataReader a la aplicación.</span><span class="sxs-lookup"><span data-stu-id="fee18-248">For example, you could assign the db\_owner role to Code First Migrations, and db\_datareader and db\_datawriter roles to the application.</span></span> <span data-ttu-id="fee18-249">Se trata de un patrón común de defensa en profundidad que evita que un código potencialmente malintencionado en la aplicación cambie el esquema de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="fee18-249">This is a common defense-in-depth pattern that prevents potentially malicious code in the application from changing the database schema.</span></span> <span data-ttu-id="fee18-250">(Por ejemplo, esto puede ocurrir en un ataque de inyección de SQL correcto). Este patrón no se usa en estos tutoriales.</span><span class="sxs-lookup"><span data-stu-id="fee18-250">(For example, this might happen in a successful SQL injection attack.) This pattern is not used by these tutorials.</span></span> <span data-ttu-id="fee18-251">No se aplica a SQL Server Compact y no se aplica al migrar a SQL Server en un tutorial posterior de esta serie.</span><span class="sxs-lookup"><span data-stu-id="fee18-251">It does not apply to SQL Server Compact, and it does not apply when you migrate to SQL Server in a later tutorial in this series.</span></span> <span data-ttu-id="fee18-252">El sitio de Cytanium ofrece una sola cuenta de usuario para tener acceso a la base de datos de SQL Server que se crea en Cytanium.</span><span class="sxs-lookup"><span data-stu-id="fee18-252">The Cytanium site offers just one user account for accessing the SQL Server database that you create at Cytanium.</span></span> <span data-ttu-id="fee18-253">Si es capaz de implementar este patrón en su escenario, puede realizar los pasos siguientes para hacerlo:</span><span class="sxs-lookup"><span data-stu-id="fee18-253">If you are able to implement this pattern in your scenario, you can do it by performing the following steps:</span></span>

1. <span data-ttu-id="fee18-254">En la pestaña **configuración** del Asistente para **publicación web** , escriba la cadena de conexión que especifica un usuario con permisos de actualización de esquemas de base de datos completa y desactive la casilla **usar esta cadena de conexión en tiempo de ejecución** .</span><span class="sxs-lookup"><span data-stu-id="fee18-254">In the **Settings** tab of the **Publish Web** wizard, enter the connection string that specifies a user with full database schema update permissions, and clear the **Use this connection string at runtime** check box.</span></span> <span data-ttu-id="fee18-255">En el archivo Web. config implementado, se convierte en el `DatabasePublish` cadena de conexión.</span><span class="sxs-lookup"><span data-stu-id="fee18-255">In the deployed Web.config file, this becomes the `DatabasePublish` connection string.</span></span>
2. <span data-ttu-id="fee18-256">Cree una transformación de archivo Web. config para la cadena de conexión que desea que la aplicación use en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="fee18-256">Create a Web.config file transformation for the connection string that you want the application to use at run time.</span></span>

<span data-ttu-id="fee18-257">Ahora ha implementado la aplicación en IIS en el equipo de desarrollo y la ha probado allí.</span><span class="sxs-lookup"><span data-stu-id="fee18-257">You have now deployed your application to IIS on your development computer and tested it there.</span></span> <span data-ttu-id="fee18-258">Esto comprueba que el proceso de implementación haya copiado el contenido de la aplicación en la ubicación correcta (excluyendo los archivos que no desea implementar) y que Web Deploy configurar IIS correctamente durante la implementación.</span><span class="sxs-lookup"><span data-stu-id="fee18-258">This verifies that the deployment process copied the application's content to the right location (excluding the files that you did not want to deploy), and also that Web Deploy configured IIS correctly during deployment.</span></span> <span data-ttu-id="fee18-259">En el siguiente tutorial, ejecutará una prueba más que encuentre una tarea de implementación que todavía no se ha realizado: establecimiento de permisos de carpeta en la carpeta *Elmah* .</span><span class="sxs-lookup"><span data-stu-id="fee18-259">In the next tutorial, you'll run one more test that finds a deployment task that has not yet been done: setting folder permissions on the *Elmah* folder.</span></span>

## <a name="more-information"></a><span data-ttu-id="fee18-260">Más información</span><span class="sxs-lookup"><span data-stu-id="fee18-260">More Information</span></span>

<span data-ttu-id="fee18-261">Para obtener información sobre cómo ejecutar IIS o IIS Express en Visual Studio, vea los siguientes recursos:</span><span class="sxs-lookup"><span data-stu-id="fee18-261">For information about running IIS or IIS Express in Visual Studio, see the following resources:</span></span>

- <span data-ttu-id="fee18-262">[IIS Express información general](https://www.iis.net/learn/extensions/introduction-to-iis-express/iis-express-overview) sobre el sitio de IIS.net.</span><span class="sxs-lookup"><span data-stu-id="fee18-262">[IIS Express Overview](https://www.iis.net/learn/extensions/introduction-to-iis-express/iis-express-overview) on the IIS.net site.</span></span>
- <span data-ttu-id="fee18-263">[Presentación de IIS Express](https://weblogs.asp.net/scottgu/archive/2010/06/28/introducing-iis-express.aspx) en el blog de Scott Guthrie.</span><span class="sxs-lookup"><span data-stu-id="fee18-263">[Introducing IIS Express](https://weblogs.asp.net/scottgu/archive/2010/06/28/introducing-iis-express.aspx) on Scott Guthrie's blog.</span></span>
- <span data-ttu-id="fee18-264">[Cómo: especificar el servidor web para proyectos web en Visual Studio](https://msdn.microsoft.com/library/ms178108.aspx).</span><span class="sxs-lookup"><span data-stu-id="fee18-264">[How to: Specify the Web Server for Web Projects in Visual Studio](https://msdn.microsoft.com/library/ms178108.aspx).</span></span>
- <span data-ttu-id="fee18-265">[Diferencias principales entre IIS y el servidor de desarrollo de ASP.net](../deploying-web-site-projects/core-differences-between-iis-and-the-asp-net-development-server-cs.md) en el sitio de ASP.net.</span><span class="sxs-lookup"><span data-stu-id="fee18-265">[Core Differences Between IIS and the ASP.NET Development Server](../deploying-web-site-projects/core-differences-between-iis-and-the-asp-net-development-server-cs.md) on the ASP.NET site.</span></span>
- <span data-ttu-id="fee18-266">[Pruebe su aplicación ASP.NET MVC o Web Forms en IIS 7 en 30 segundos en el](https://blogs.msdn.com/b/rickandy/archive/2011/04/22/test-you-asp-net-mvc-or-webforms-application-on-iis-7-in-30-seconds.aspx) blog de Rick Anderson.</span><span class="sxs-lookup"><span data-stu-id="fee18-266">[Test your ASP.NET MVC or Web Forms Application on IIS 7 in 30 seconds](https://blogs.msdn.com/b/rickandy/archive/2011/04/22/test-you-asp-net-mvc-or-webforms-application-on-iis-7-in-30-seconds.aspx) on Rick Anderson's blog.</span></span> <span data-ttu-id="fee18-267">Esta entrada proporciona ejemplos de por qué las pruebas con el Servidor de desarrollo de Visual Studio (Cassini) no son tan confiables como las pruebas en IIS Express y por qué las pruebas en IIS Express no son tan confiables como las pruebas en IIS.</span><span class="sxs-lookup"><span data-stu-id="fee18-267">This entry provides examples of why testing with the Visual Studio Development Server (Cassini) is not as reliable as testing in IIS Express, and why testing in IIS Express is not as reliable as testing in IIS.</span></span>

<span data-ttu-id="fee18-268">Para obtener información sobre los problemas que pueden surgir cuando la aplicación se ejecuta en un nivel de confianza medio, consulte [hospedaje de aplicaciones de ASP.net en confianza media](http://www.4guysfromrolla.com/articles/100307-1.aspx) en los 4 chicos del sitio de Rolla.</span><span class="sxs-lookup"><span data-stu-id="fee18-268">For information about what issues might arise when your application runs in medium trust, see [Hosting ASP.NET Applications in Medium Trust](http://www.4guysfromrolla.com/articles/100307-1.aspx) on the 4 Guys from Rolla site.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="fee18-269">[Anterior](deployment-to-a-hosting-provider-configuring-project-properties-4-of-12.md)
> [Siguiente](deployment-to-a-hosting-provider-setting-folder-permissions-6-of-12.md)</span><span class="sxs-lookup"><span data-stu-id="fee18-269">[Previous](deployment-to-a-hosting-provider-configuring-project-properties-4-of-12.md)
[Next](deployment-to-a-hosting-provider-setting-folder-permissions-6-of-12.md)</span></span>
