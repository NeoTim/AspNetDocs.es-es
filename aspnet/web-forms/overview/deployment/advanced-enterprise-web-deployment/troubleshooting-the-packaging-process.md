---
uid: web-forms/overview/deployment/advanced-enterprise-web-deployment/troubleshooting-the-packaging-process
title: Solucionar problemas del proceso de empaquetado | Microsoft Docs
author: jrjlee
description: Este tema describe cómo puede recopilar información detallada sobre el proceso de empaquetado mediante la propiedad EnablePackageProcessLoggingAndAssert en la letra M...
ms.author: riande
ms.date: 05/04/2012
ms.assetid: 794bd819-00fc-47e2-876d-fc5d15e0de1c
msc.legacyurl: /web-forms/overview/deployment/advanced-enterprise-web-deployment/troubleshooting-the-packaging-process
msc.type: authoredcontent
ms.openlocfilehash: 79774c6a1a1d05d5a7bcd82a5d7aa888933cf089
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 04/17/2019
ms.locfileid: "59420112"
---
# <a name="troubleshooting-the-packaging-process"></a><span data-ttu-id="db167-103">Solucionar problemas del proceso de empaquetado</span><span class="sxs-lookup"><span data-stu-id="db167-103">Troubleshooting the Packaging Process</span></span>

<span data-ttu-id="db167-104">por [Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="db167-104">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="db167-105">Descargar PDF</span><span class="sxs-lookup"><span data-stu-id="db167-105">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="db167-106">Este tema describe cómo puede recopilar información detallada sobre el proceso de empaquetado mediante el **EnablePackageProcessLoggingAndAssert** propiedad en Microsoft Build Engine (MSBuild).</span><span class="sxs-lookup"><span data-stu-id="db167-106">This topic describes how you can collect detailed information about the packaging process by using the **EnablePackageProcessLoggingAndAssert** property in the Microsoft Build Engine (MSBuild).</span></span>
> 
> <span data-ttu-id="db167-107">Al establecer el **EnablePackageProcessLoggingAndAssert** propiedad **true**, le MSBuild:</span><span class="sxs-lookup"><span data-stu-id="db167-107">When you set the **EnablePackageProcessLoggingAndAssert** property to **true**, MSBuild will:</span></span>
> 
> - <span data-ttu-id="db167-108">Agregar información adicional sobre el proceso de empaquetado para los registros de compilación.</span><span class="sxs-lookup"><span data-stu-id="db167-108">Add additional information about the packaging process to the build logs.</span></span>
> - <span data-ttu-id="db167-109">Registrar errores en determinadas condiciones, por ejemplo, si se encuentran los archivos duplicados en la lista de empaquetado.</span><span class="sxs-lookup"><span data-stu-id="db167-109">Log errors under certain conditions, for example, if duplicate files are found in the packaging list.</span></span>
> - <span data-ttu-id="db167-110">Cree un directorio de registro en el *ProjectName*\_carpeta de paquetes y usarlo para registrar información sobre los archivos que se va a empaquetar.</span><span class="sxs-lookup"><span data-stu-id="db167-110">Create a Log directory in the *ProjectName*\_Package folder and use it to record information about the files you're packaging.</span></span>
> 
> <span data-ttu-id="db167-111">Si se producen errores en el proceso de empaquetado, o los paquetes de implementación web no contienen los archivos que necesita, puede usar esta información para solucionar problemas de los procesos y el punto de anclaje dónde las cosas van malos.</span><span class="sxs-lookup"><span data-stu-id="db167-111">If the packaging process is failing, or your web deployment packages don't contain the files that you expect, you can use this information to troubleshoot the process and pinpoint where things are going wrong.</span></span>
> 
> > [!NOTE]
> > <span data-ttu-id="db167-112">El **EnablePackageProcessLoggingAndAssert** propiedad solo funciona si compila el proyecto con el **depurar** configuración.</span><span class="sxs-lookup"><span data-stu-id="db167-112">The **EnablePackageProcessLoggingAndAssert** property only works if you build your project using the **Debug** configuration.</span></span> <span data-ttu-id="db167-113">La propiedad se omite en otras configuraciones.</span><span class="sxs-lookup"><span data-stu-id="db167-113">The property is ignored in other configurations.</span></span>


<span data-ttu-id="db167-114">En este tema forma parte de una serie de tutoriales que se basa en los requisitos de implementación empresarial de una compañía ficticia denominada Fabrikam, Inc. Esta serie de tutoriales usa una solución de ejemplo&#x2014;el [solución Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;para representar una aplicación web con un nivel realista de complejidad, incluida una aplicación ASP.NET MVC 3, una comunicación de Windows Servicio Foundation (WCF) y un proyecto de base de datos.</span><span class="sxs-lookup"><span data-stu-id="db167-114">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager solution](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="db167-115">El método de implementación en el corazón de estos tutoriales se basa en el enfoque de archivo de proyecto de división descrito en [descripción del archivo de proyecto](../web-deployment-in-the-enterprise/understanding-the-project-file.md), en que el proceso de compilación se controla mediante dos archivos de proyecto&#x2014;uno que contenga instrucciones que se aplican a todos los entornos de destino y que contiene la configuración de compilación e implementación específica del entorno de compilación.</span><span class="sxs-lookup"><span data-stu-id="db167-115">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), in which the build process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="db167-116">En tiempo de compilación, se combina el archivo de proyecto específicos del entorno en el archivo de proyecto independiente del entorno para formar un conjunto completo de las instrucciones de compilación.</span><span class="sxs-lookup"><span data-stu-id="db167-116">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="understanding-the-enablepackageprocessloggingandassert-property"></a><span data-ttu-id="db167-117">Descripción de la propiedad EnablePackageProcessLoggingAndAssert</span><span class="sxs-lookup"><span data-stu-id="db167-117">Understanding the EnablePackageProcessLoggingAndAssert Property</span></span>

<span data-ttu-id="db167-118">[Creación y empaquetado Web Application Projects](../web-deployment-in-the-enterprise/building-and-packaging-web-application-projects.md) se describe cómo la canalización de publicación de Web (WPP) proporciona un conjunto de destinos de MSBuild que amplían la funcionalidad de MSBuild y habilitarlo para integrarse con la Web de Internet Information Services (IIS) Herramienta de implementación (Web Deploy).</span><span class="sxs-lookup"><span data-stu-id="db167-118">[Building and Packaging Web Application Projects](../web-deployment-in-the-enterprise/building-and-packaging-web-application-projects.md) described how the Web Publishing Pipeline (WPP) provides a set of MSBuild targets that extend the functionality of MSBuild and enable it to integrate with the Internet Information Services (IIS) Web Deployment Tool (Web Deploy).</span></span> <span data-ttu-id="db167-119">Al empaquetar un proyecto de aplicación web, que se están invocando destinos WPP.</span><span class="sxs-lookup"><span data-stu-id="db167-119">When you package a web application project, you're invoking WPP targets.</span></span>

<span data-ttu-id="db167-120">Muchos de estos destinos WPP incluyen lógica condicional que registra información adicional cuando la **EnablePackageProcessLoggingAndAssert** propiedad está establecida en **true**.</span><span class="sxs-lookup"><span data-stu-id="db167-120">Lots of these WPP targets include conditional logic that logs additional information when the **EnablePackageProcessLoggingAndAssert** property is set to **true**.</span></span> <span data-ttu-id="db167-121">Por ejemplo, si revisa el **paquete** destino, puede ver que crea un directorio de registro adicionales y se escribe una lista de archivos en un archivo de texto si **EnablePackageProcessLoggingAndAssert** es igual a **true**.</span><span class="sxs-lookup"><span data-stu-id="db167-121">For example, if you review the **Package** target, you can see that it creates an additional log directory and writes a list of files to a text file if **EnablePackageProcessLoggingAndAssert** is equal to **true**.</span></span>


[!code-xml[Main](troubleshooting-the-packaging-process/samples/sample1.xml)]


> [!NOTE]
> <span data-ttu-id="db167-122">Los destinos WPP se definen en el *Microsoft.Web.Publishing.targets* archivo en la carpeta de %\MSBuild\Microsoft\VisualStudio\v10.0\Web % PROGRAMFILES (x 86).</span><span class="sxs-lookup"><span data-stu-id="db167-122">The WPP targets are defined in the *Microsoft.Web.Publishing.targets* file in the %PROGRAMFILES(x86)%\MSBuild\Microsoft\VisualStudio\v10.0\Web folder.</span></span> <span data-ttu-id="db167-123">Puede abrir este archivo y revise los destinos en Visual Studio 2010 o en cualquier editor XML.</span><span class="sxs-lookup"><span data-stu-id="db167-123">You can open this file and review the targets in Visual Studio 2010 or any XML editor.</span></span> <span data-ttu-id="db167-124">Tenga cuidado de no para modificar el contenido del archivo.</span><span class="sxs-lookup"><span data-stu-id="db167-124">Take care not to modify the contents of the file.</span></span>


## <a name="enabling-the-additional-logging"></a><span data-ttu-id="db167-125">Habilitar el registro adicional</span><span class="sxs-lookup"><span data-stu-id="db167-125">Enabling the Additional Logging</span></span>

<span data-ttu-id="db167-126">Puede proporcionar un valor para el **EnablePackageProcessLoggingAndAssert** propiedad de varias maneras, dependiendo de cómo se compila el proyecto.</span><span class="sxs-lookup"><span data-stu-id="db167-126">You can supply a value for the **EnablePackageProcessLoggingAndAssert** property in various ways, depending on how you build your project.</span></span>

<span data-ttu-id="db167-127">Si compila el proyecto desde la línea de comandos, puede proporcionar un valor para el **EnablePackageProcessLoggingAndAssert** propiedad como un argumento de línea de comandos:</span><span class="sxs-lookup"><span data-stu-id="db167-127">If you build your project from the command line, you can supply a value for the **EnablePackageProcessLoggingAndAssert** property as a command-line argument:</span></span>


[!code-console[Main](troubleshooting-the-packaging-process/samples/sample2.cmd)]


<span data-ttu-id="db167-128">Si usa un archivo de proyecto personalizadas para compilar sus proyectos, puede incluir el **EnablePackageProcessLoggingAndAssert** valor en el **propiedades** atributo de la **MSBuild**tarea:</span><span class="sxs-lookup"><span data-stu-id="db167-128">If you're using a custom project file to build your projects, you can include the **EnablePackageProcessLoggingAndAssert** value in the **Properties** attribute of the **MSBuild** task:</span></span>


[!code-xml[Main](troubleshooting-the-packaging-process/samples/sample3.xml)]


<span data-ttu-id="db167-129">Si usa una definición de compilación de Team Foundation Server (TFS) para compilar sus proyectos, puede proporcionar un valor para el **EnablePackageProcessLoggingAndAssert** propiedad en el **argumentos de MSBuild** fila:![](troubleshooting-the-packaging-process/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="db167-129">If you're using a Team Foundation Server (TFS) build definition to build your projects, you can supply a value for the **EnablePackageProcessLoggingAndAssert** property in the **MSBuild Arguments** row:![](troubleshooting-the-packaging-process/_static/image1.png)</span></span>

> [!NOTE]
> <span data-ttu-id="db167-130">Para obtener más información sobre cómo crear y configurar las definiciones de compilación, véase [crear una compilación que admite la implementación de la definición](../configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="db167-130">For more information on creating and configuring build definitions, see [Creating a Build Definition That Supports Deployment](../configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment.md).</span></span>


<span data-ttu-id="db167-131">Como alternativa, si desea incluir el paquete en cada compilación, puede modificar el archivo de proyecto para el proyecto de aplicación web establecer el **EnablePackageProcessLoggingAndAssert** propiedad **true**.</span><span class="sxs-lookup"><span data-stu-id="db167-131">Alternatively, if you want to include the package in every build, you can modify the project file for your web application project to set the **EnablePackageProcessLoggingAndAssert** property to **true**.</span></span> <span data-ttu-id="db167-132">Debe agregar la propiedad a la primera **PropertyGroup** elemento dentro del archivo .csproj o .vbproj.</span><span class="sxs-lookup"><span data-stu-id="db167-132">You should add the property to the first **PropertyGroup** element within your .csproj or .vbproj file.</span></span>


[!code-xml[Main](troubleshooting-the-packaging-process/samples/sample4.xml)]


## <a name="reviewing-the-log-files"></a><span data-ttu-id="db167-133">Revisar los archivos de registro</span><span class="sxs-lookup"><span data-stu-id="db167-133">Reviewing the Log Files</span></span>

<span data-ttu-id="db167-134">Cuando se compila y empaqueta un proyecto de aplicación web con **EnablePackageProcessLoggingAndAssert** establecido en **true**, MSBuild crea una carpeta adicional denominada registro en el *ProjectName* \_Carpeta del paquete.</span><span class="sxs-lookup"><span data-stu-id="db167-134">When you build and package a web application project with **EnablePackageProcessLoggingAndAssert** set to **true**, MSBuild creates an additional folder named Log in the *ProjectName*\_Package folder.</span></span> <span data-ttu-id="db167-135">La carpeta de registro contiene varios archivos:</span><span class="sxs-lookup"><span data-stu-id="db167-135">The Log folder contains various files:</span></span>

![](troubleshooting-the-packaging-process/_static/image2.png)

<span data-ttu-id="db167-136">La lista de archivos que se ven variará según las cosas en el proyecto y el proceso de compilación.</span><span class="sxs-lookup"><span data-stu-id="db167-136">The list of files that you see will vary according to the things in your project and your build process.</span></span> <span data-ttu-id="db167-137">Sin embargo, estos archivos normalmente se usan para registrar la lista de archivos que está recopilando el WPP empaquetado en distintas fases del proceso:</span><span class="sxs-lookup"><span data-stu-id="db167-137">However, these files are typically used to record the list of files that the WPP is collecting for packaging, at various stages of the process:</span></span>

- <span data-ttu-id="db167-138">El *PreExcludePipelineCollectFilesPhaseFileList.txt* archivo muestra los archivos que se recopila de MSBuild para empaquetar antes de quitan los archivos que se especifican para la exclusión.</span><span class="sxs-lookup"><span data-stu-id="db167-138">The *PreExcludePipelineCollectFilesPhaseFileList.txt* file lists the files that MSBuild collects for packaging before any files that are specified for exclusion are removed.</span></span>
- <span data-ttu-id="db167-139">El *AfterExcludeFilesFilesList.txt* archivo contiene la lista de archivos modificados después de quitan los archivos que se especifican para la exclusión.</span><span class="sxs-lookup"><span data-stu-id="db167-139">The *AfterExcludeFilesFilesList.txt* file contains the modified file list after any files that are specified for exclusion are removed.</span></span>

    > [!NOTE]
    > <span data-ttu-id="db167-140">Para obtener más información acerca de cómo excluir archivos y carpetas desde el proceso de empaquetado, consulte [excluir archivos y carpetas de implementación](excluding-files-and-folders-from-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="db167-140">For more information on excluding files and folders from the packaging process, see [Excluding Files and Folders from Deployment](excluding-files-and-folders-from-deployment.md).</span></span>
- <span data-ttu-id="db167-141">El *AfterTransformWebConfig.txt* archivo enumera los archivos recopilados para empaquetado después de cualquier *Web.config* transformaciones que se hayan realizado.</span><span class="sxs-lookup"><span data-stu-id="db167-141">The *AfterTransformWebConfig.txt* file lists the files collected for packaging after any *Web.config* transforms have been performed.</span></span> <span data-ttu-id="db167-142">En esta lista, cualquier configuración específica *Web.config* transformar archivos, como *Web.Debug.config* y *Web.Release.config*, se excluyen de la lista de archivos para empaquetado.</span><span class="sxs-lookup"><span data-stu-id="db167-142">In this list, any configuration-specific *Web.config* transform files, like *Web.Debug.config* and *Web.Release.config*, are excluded from the list of files for packaging.</span></span> <span data-ttu-id="db167-143">Una sola transforman *Web.config* se incluye en su lugar.</span><span class="sxs-lookup"><span data-stu-id="db167-143">A single transformed *Web.config* is included in their place.</span></span>
- <span data-ttu-id="db167-144">El *PostAutoParameterizationWebConfigConnectionStrings.txt* archivo contiene la lista de archivos después de las cadenas de conexión en el *Web.config* con archivo de parámetros.</span><span class="sxs-lookup"><span data-stu-id="db167-144">The *PostAutoParameterizationWebConfigConnectionStrings.txt* file contains the list of files after the connection strings in the *Web.config* file have been parameterized.</span></span> <span data-ttu-id="db167-145">Este es el proceso que le permite reemplazar las cadenas de conexión con la configuración adecuada para su entorno de destino al implementar el paquete.</span><span class="sxs-lookup"><span data-stu-id="db167-145">This is the process that lets you replace your connection strings with the right settings for your target environment when you deploy the package.</span></span>
- <span data-ttu-id="db167-146">El *Prepackage.txt* archivo contiene la lista anterior a la compilación finalizada de archivos que se incluirán en el paquete.</span><span class="sxs-lookup"><span data-stu-id="db167-146">The *Prepackage.txt* file contains the finalized pre-build list of files to be included in the package.</span></span>

> [!NOTE]
> <span data-ttu-id="db167-147">Normalmente, los nombres de los archivos de registro adicionales corresponden a destinos WPP.</span><span class="sxs-lookup"><span data-stu-id="db167-147">The names of the additional log files typically correspond to WPP targets.</span></span> <span data-ttu-id="db167-148">Puede revisar estos destinos examinando el *Microsoft.Web.Publishing.targets* archivo en la carpeta de %\MSBuild\Microsoft\VisualStudio\v10.0\Web % PROGRAMFILES (x 86).</span><span class="sxs-lookup"><span data-stu-id="db167-148">You can review these targets by examining the *Microsoft.Web.Publishing.targets* file in the %PROGRAMFILES(x86)%\MSBuild\Microsoft\VisualStudio\v10.0\Web folder.</span></span>


<span data-ttu-id="db167-149">Si el contenido del paquete de web no es lo que esperaba, revise estos archivos puede ser una manera útil para identificar en qué punto en los aspectos del proceso ha ido mal.</span><span class="sxs-lookup"><span data-stu-id="db167-149">If the contents of your web package aren't what you expected, reviewing these files can be a useful way to identify at what point in the process things went wrong.</span></span>

## <a name="conclusion"></a><span data-ttu-id="db167-150">Conclusión</span><span class="sxs-lookup"><span data-stu-id="db167-150">Conclusion</span></span>

<span data-ttu-id="db167-151">En este tema se describe cómo puede usar el **EnablePackageProcessLoggingAndAssert** propiedad de MSBuild para solucionar problemas del proceso de empaquetado.</span><span class="sxs-lookup"><span data-stu-id="db167-151">This topic described how you can use the **EnablePackageProcessLoggingAndAssert** property in MSBuild to troubleshoot the packaging process.</span></span> <span data-ttu-id="db167-152">Explican las distintas formas en que puede proporcionar el valor de propiedad para el proceso de compilación y se describe la información adicional que se registra cuando se establece la propiedad en **true**.</span><span class="sxs-lookup"><span data-stu-id="db167-152">It explained the different ways in which you can supply the property value to the build process, and it described the additional information that is recorded when you set the property to **true**.</span></span>

## <a name="further-reading"></a><span data-ttu-id="db167-153">Información adicional</span><span class="sxs-lookup"><span data-stu-id="db167-153">Further Reading</span></span>

<span data-ttu-id="db167-154">Para obtener más información sobre el uso de archivos de proyecto de MSBuild personalizados para controlar el proceso de implementación, consulte [descripción del archivo de proyecto](../web-deployment-in-the-enterprise/understanding-the-project-file.md) y [descripción del proceso de compilación](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span><span class="sxs-lookup"><span data-stu-id="db167-154">For more information on using custom MSBuild project files to control the deployment process, see [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md) and [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span></span> <span data-ttu-id="db167-155">Para obtener más información sobre el WPP y cómo administra el proceso de empaquetado, consulte [compilar y empaquetar proyectos de aplicación Web](../web-deployment-in-the-enterprise/building-and-packaging-web-application-projects.md).</span><span class="sxs-lookup"><span data-stu-id="db167-155">For more information on the WPP and how it manages the packaging process, see [Building and Packaging Web Application Projects](../web-deployment-in-the-enterprise/building-and-packaging-web-application-projects.md).</span></span> <span data-ttu-id="db167-156">Para obtener instrucciones sobre cómo excluir determinados archivos y carpetas de paquetes de implementación web, consulte [excluir archivos y carpetas de implementación](excluding-files-and-folders-from-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="db167-156">For guidance on how to exclude specific files and folders from web deployment packages, see [Excluding Files and Folders from Deployment](excluding-files-and-folders-from-deployment.md).</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="db167-157">Anterior</span><span class="sxs-lookup"><span data-stu-id="db167-157">Previous</span></span>](running-windows-powershell-scripts-from-msbuild-project-files.md)
