---
uid: mvc/overview/older-versions-1/contact-manager/iteration-3-add-form-validation-cs
title: '#3 de iteración: agregar validaciónC#de formulario () | Microsoft Docs'
author: microsoft
description: En la tercera iteración, agregamos la validación de formulario básica. Impedimos que los usuarios envíen un formulario sin completar los campos de formulario necesarios. También validamos emai...
ms.author: riande
ms.date: 02/20/2009
ms.assetid: 51a0d175-913b-43d8-95e3-840fb96ad1a9
msc.legacyurl: /mvc/overview/older-versions-1/contact-manager/iteration-3-add-form-validation-cs
msc.type: authoredcontent
ms.openlocfilehash: af2e86e820f60f0a3d8e3db8f78eba67ef63579a
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 03/06/2020
ms.locfileid: "78437989"
---
# <a name="iteration-3--add-form-validation-c"></a><span data-ttu-id="ed9e3-105">#3 de iteración: agregar validaciónC#de formulario ()</span><span class="sxs-lookup"><span data-stu-id="ed9e3-105">Iteration #3 – Add form validation (C#)</span></span>

<span data-ttu-id="ed9e3-106">por [Microsoft](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="ed9e3-106">by [Microsoft](https://github.com/microsoft)</span></span>

[<span data-ttu-id="ed9e3-107">Descargar código</span><span class="sxs-lookup"><span data-stu-id="ed9e3-107">Download Code</span></span>](iteration-3-add-form-validation-cs/_static/contactmanager_3_cs1.zip)

> <span data-ttu-id="ed9e3-108">En la tercera iteración, agregamos la validación de formulario básica.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-108">In the third iteration, we add basic form validation.</span></span> <span data-ttu-id="ed9e3-109">Impedimos que los usuarios envíen un formulario sin completar los campos de formulario necesarios.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-109">We prevent people from submitting a form without completing required form fields.</span></span> <span data-ttu-id="ed9e3-110">También validamos las direcciones de correo electrónico y los números de teléfono.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-110">We also validate email addresses and phone numbers.</span></span>

## <a name="building-a-contact-management-aspnet-mvc-application-c"></a><span data-ttu-id="ed9e3-111">Creación de una aplicación ASP.NET MVC de administraciónC#de contactos ()</span><span class="sxs-lookup"><span data-stu-id="ed9e3-111">Building a Contact Management ASP.NET MVC Application (C#)</span></span>

<span data-ttu-id="ed9e3-112">En esta serie de tutoriales, creamos una aplicación de administración de contactos completa de principio a fin.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-112">In this series of tutorials, we build an entire Contact Management application from start to finish.</span></span> <span data-ttu-id="ed9e3-113">La aplicación Contact Manager le permite almacenar información de contacto: nombres, números de teléfono y direcciones de correo electrónico, para obtener una lista de personas.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-113">The Contact Manager application enables you to store contact information - names, phone numbers and email addresses - for a list of people.</span></span>

<span data-ttu-id="ed9e3-114">Compilamos la aplicación en varias iteraciones.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-114">We build the application over multiple iterations.</span></span> <span data-ttu-id="ed9e3-115">Con cada iteración, mejoramos gradualmente la aplicación.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-115">With each iteration, we gradually improve the application.</span></span> <span data-ttu-id="ed9e3-116">El objetivo de este enfoque de varias iteraciones es permitirle comprender la razón de cada cambio.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-116">The goal of this multiple iteration approach is to enable you to understand the reason for each change.</span></span>

- <span data-ttu-id="ed9e3-117">#1 de iteración: cree la aplicación.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-117">Iteration #1 - Create the application.</span></span> <span data-ttu-id="ed9e3-118">En la primera iteración, se crea el administrador de contactos de la manera más sencilla posible.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-118">In the first iteration, we create the Contact Manager in the simplest way possible.</span></span> <span data-ttu-id="ed9e3-119">Agregamos compatibilidad con las operaciones básicas de base de datos: crear, leer, actualizar y eliminar (CRUD).</span><span class="sxs-lookup"><span data-stu-id="ed9e3-119">We add support for basic database operations: Create, Read, Update, and Delete (CRUD).</span></span>

- <span data-ttu-id="ed9e3-120">#2 de iteración: haga que la aplicación tenga un buen aspecto.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-120">Iteration #2 - Make the application look nice.</span></span> <span data-ttu-id="ed9e3-121">En esta iteración, mejoramos la apariencia de la aplicación modificando la página maestra de vista de MVC predeterminada de ASP.NET y la hoja de estilos en cascada.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-121">In this iteration, we improve the appearance of the application by modifying the default ASP.NET MVC view master page and cascading style sheet.</span></span>

- <span data-ttu-id="ed9e3-122">#3 de iteración: agregar validación de formulario.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-122">Iteration #3 - Add form validation.</span></span> <span data-ttu-id="ed9e3-123">En la tercera iteración, agregamos la validación de formulario básica.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-123">In the third iteration, we add basic form validation.</span></span> <span data-ttu-id="ed9e3-124">Impedimos que los usuarios envíen un formulario sin completar los campos de formulario necesarios.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-124">We prevent people from submitting a form without completing required form fields.</span></span> <span data-ttu-id="ed9e3-125">También validamos las direcciones de correo electrónico y los números de teléfono.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-125">We also validate email addresses and phone numbers.</span></span>

- <span data-ttu-id="ed9e3-126">#4 de iteración: hacer que la aplicación esté acoplada de forma flexible.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-126">Iteration #4 - Make the application loosely coupled.</span></span> <span data-ttu-id="ed9e3-127">En esta cuarta iteración, se aprovechan varios patrones de diseño de software para facilitar el mantenimiento y la modificación de la aplicación Contact Manager.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-127">In this fourth iteration, we take advantage of several software design patterns to make it easier to maintain and modify the Contact Manager application.</span></span> <span data-ttu-id="ed9e3-128">Por ejemplo, se refactoriza nuestra aplicación para usar el patrón de repositorio y el patrón de inserción de dependencias.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-128">For example, we refactor our application to use the Repository pattern and the Dependency Injection pattern.</span></span>

- <span data-ttu-id="ed9e3-129">#5 de iteración: crear pruebas unitarias.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-129">Iteration #5 - Create unit tests.</span></span> <span data-ttu-id="ed9e3-130">En la quinta iteración, se facilita el mantenimiento y la modificación de la aplicación mediante la adición de pruebas unitarias.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-130">In the fifth iteration, we make our application easier to maintain and modify by adding unit tests.</span></span> <span data-ttu-id="ed9e3-131">Hemos simulado nuestras clases de modelo de datos y compilamos pruebas unitarias para nuestros controladores y la lógica de validación.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-131">We mock our data model classes and build unit tests for our controllers and validation logic.</span></span>

- <span data-ttu-id="ed9e3-132">#6 de iteración: Use el desarrollo controlado por pruebas.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-132">Iteration #6 - Use test-driven development.</span></span> <span data-ttu-id="ed9e3-133">En esta sexta iteración, agregamos una nueva funcionalidad a nuestra aplicación escribiendo primero las pruebas unitarias y escribiendo código en las pruebas unitarias.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-133">In this sixth iteration, we add new functionality to our application by writing unit tests first and writing code against the unit tests.</span></span> <span data-ttu-id="ed9e3-134">En esta iteración, se agregan grupos de contactos.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-134">In this iteration, we add contact groups.</span></span>

- <span data-ttu-id="ed9e3-135">#7 de iteración: agregar funcionalidad de Ajax.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-135">Iteration #7 - Add Ajax functionality.</span></span> <span data-ttu-id="ed9e3-136">En la séptima iteración, se mejora la capacidad de respuesta y el rendimiento de la aplicación mediante la adición de compatibilidad con Ajax.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-136">In the seventh iteration, we improve the responsiveness and performance of our application by adding support for Ajax.</span></span>

## <a name="this-iteration"></a><span data-ttu-id="ed9e3-137">Esta iteración</span><span class="sxs-lookup"><span data-stu-id="ed9e3-137">This Iteration</span></span>

<span data-ttu-id="ed9e3-138">En esta segunda iteración de la aplicación Contact Manager, agregamos la validación de formularios básicos.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-138">In this second iteration of the Contact Manager application, we add basic form validation.</span></span> <span data-ttu-id="ed9e3-139">Impedimos que los usuarios envíen un contacto sin escribir valores para los campos de formulario obligatorios.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-139">We prevent people from submitting a contact without entering values for required form fields.</span></span> <span data-ttu-id="ed9e3-140">También Validamos los números de teléfono y las direcciones de correo electrónico (consulte la figura 1).</span><span class="sxs-lookup"><span data-stu-id="ed9e3-140">We also validate phone numbers and email addresses (see Figure 1).</span></span>

<span data-ttu-id="ed9e3-141">[![el cuadro de diálogo nuevo proyecto](iteration-3-add-form-validation-cs/_static/image1.jpg)](iteration-3-add-form-validation-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="ed9e3-141">[![The New Project dialog box](iteration-3-add-form-validation-cs/_static/image1.jpg)](iteration-3-add-form-validation-cs/_static/image1.png)</span></span>

<span data-ttu-id="ed9e3-142">**Figura 01**: un formulario con validación ([haga clic para ver la imagen de tamaño completo](iteration-3-add-form-validation-cs/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="ed9e3-142">**Figure 01**: A form with validation ([Click to view full-size image](iteration-3-add-form-validation-cs/_static/image2.png))</span></span>

<span data-ttu-id="ed9e3-143">En esta iteración, agregamos la lógica de validación directamente a las acciones del controlador.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-143">In this iteration, we add the validation logic directly to the controller actions.</span></span> <span data-ttu-id="ed9e3-144">En general, esta no es la manera recomendada de agregar validación a una aplicación de ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-144">In general, this is not the recommended way to add validation to an ASP.NET MVC application.</span></span> <span data-ttu-id="ed9e3-145">Un mejor enfoque consiste en colocar una lógica de validación de la aplicación en un [nivel de servicio](http://martinfowler.com/eaaCatalog/serviceLayer.html)independiente.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-145">A better approach is to place an application s validation logic in a separate [service layer](http://martinfowler.com/eaaCatalog/serviceLayer.html).</span></span> <span data-ttu-id="ed9e3-146">En la iteración siguiente, se refactoriza la aplicación Contact Manager para que la aplicación sea más fácil de mantener.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-146">In the next iteration, we refactor the Contact Manager application to make the application more maintainable.</span></span>

<span data-ttu-id="ed9e3-147">En esta iteración, para simplificar las cosas, escribimos todo el código de validación a mano.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-147">In this iteration, to keep things simple, we write all of the validation code by hand.</span></span> <span data-ttu-id="ed9e3-148">En lugar de escribir el código de validación, podríamos aprovechar el marco de validación.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-148">Instead of writing the validation code ourselves, we could take advantage of a validation framework.</span></span> <span data-ttu-id="ed9e3-149">Por ejemplo, puede usar el bloque de aplicaciones de validación de Microsoft Enterprise Library (VAB) para implementar la lógica de validación de la aplicación ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-149">For example, you can use the Microsoft Enterprise Library Validation Application Block (VAB) to implement the validation logic for your ASP.NET MVC application.</span></span> <span data-ttu-id="ed9e3-150">Para obtener más información sobre el bloque de aplicación de validación, consulte:</span><span class="sxs-lookup"><span data-stu-id="ed9e3-150">To learn more about the Validation Application Block, see:</span></span>

[*http://msdn.microsoft.com/library/dd203099.aspx*](https://msdn.microsoft.com/library/dd203099.aspx)

## <a name="adding-validation-to-the-create-view"></a><span data-ttu-id="ed9e3-151">Agregar validación a la vista de creación</span><span class="sxs-lookup"><span data-stu-id="ed9e3-151">Adding Validation to the Create View</span></span>

<span data-ttu-id="ed9e3-152">Permita que s Comience agregando la lógica de validación a la vista de creación.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-152">Let s start by adding validation logic to the Create view.</span></span> <span data-ttu-id="ed9e3-153">Afortunadamente, dado que generamos la vista de creación con Visual Studio, la vista de creación ya contiene toda la lógica de la interfaz de usuario necesaria para mostrar los mensajes de validación.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-153">Fortunately, because we generated the Create view with Visual Studio, the Create view already contains all of the necessary user interface logic to display validation messages.</span></span> <span data-ttu-id="ed9e3-154">La vista crear se incluye en la lista 1.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-154">The Create view is contained in Listing 1.</span></span>

<span data-ttu-id="ed9e3-155">**Lista 1-\Views\Contact\Create.aspx**</span><span class="sxs-lookup"><span data-stu-id="ed9e3-155">**Listing 1 - \Views\Contact\Create.aspx**</span></span>

[!code-aspx[Main](iteration-3-add-form-validation-cs/samples/sample1.aspx)]

<span data-ttu-id="ed9e3-156">Observe la llamada al método auxiliar HTML. ValidationSummary () que aparece justo encima del formulario HTML.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-156">Notice the call to the Html.ValidationSummary() helper method that appears immediately above the HTML form.</span></span> <span data-ttu-id="ed9e3-157">Si hay mensajes de error de validación, este método muestra los mensajes de validación en una lista con viñetas.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-157">If there are validation error messages, then this method displays validation messages in a bulleted list.</span></span>

<span data-ttu-id="ed9e3-158">Tenga en cuenta, además, las llamadas a HTML. ValidationMessage () que aparecen junto a cada campo de formulario.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-158">Notice, furthermore, the calls to Html.ValidationMessage() that appear next to each form field.</span></span> <span data-ttu-id="ed9e3-159">La aplicación auxiliar ValidationMessage () muestra un mensaje de error de validación individual.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-159">The ValidationMessage() helper displays an individual validation error message.</span></span> <span data-ttu-id="ed9e3-160">En el caso de la lista 1, se muestra un asterisco cuando se produce un error de validación.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-160">In the case of Listing 1, an asterisk is displayed when there is a validation error.</span></span>

<span data-ttu-id="ed9e3-161">Por último, la aplicación auxiliar HTML. TextBox () representa automáticamente una clase de hoja de estilos en cascada cuando hay un error de validación asociado a la propiedad que muestra la aplicación auxiliar.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-161">Finally, the Html.TextBox() helper automatically renders a Cascading Style Sheet class when there is a validation error associated with the property displayed by the helper.</span></span> <span data-ttu-id="ed9e3-162">La aplicación auxiliar HTML. TextBox () representa una clase denominada **Input-Validation-error**.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-162">The Html.TextBox() helper renders a class named **input-validation-error**.</span></span>

<span data-ttu-id="ed9e3-163">Al crear una nueva aplicación ASP.NET MVC, se crea automáticamente una hoja de estilos denominada site. CSS en la carpeta de contenido.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-163">When you create a new ASP.NET MVC application, a style sheet named Site.css is created in the Content folder automatically.</span></span> <span data-ttu-id="ed9e3-164">Esta hoja de estilos contiene las siguientes definiciones de clases CSS relacionadas con la apariencia de los mensajes de error de validación:</span><span class="sxs-lookup"><span data-stu-id="ed9e3-164">This style sheet contains the following definitions for CSS classes related to the appearance of validation error messages:</span></span>

[!code-css[Main](iteration-3-add-form-validation-cs/samples/sample2.css)]

<span data-ttu-id="ed9e3-165">La clase Field-Validation-error se usa para aplicar estilo a la salida representada por la aplicación auxiliar HTML. ValidationMessage ().</span><span class="sxs-lookup"><span data-stu-id="ed9e3-165">The field-validation-error class is used to style the output rendered by the Html.ValidationMessage() helper.</span></span> <span data-ttu-id="ed9e3-166">La clase de error de validación de entrada se usa para aplicar estilo al cuadro de texto (entrada) representado por la aplicación auxiliar HTML. TextBox ().</span><span class="sxs-lookup"><span data-stu-id="ed9e3-166">The input-validation-error class is used to style the textbox (input) rendered by the Html.TextBox() helper.</span></span> <span data-ttu-id="ed9e3-167">La clase Validation-Summary-Errors se usa para aplicar estilo a la lista sin ordenar que representa la aplicación auxiliar HTML. ValidationSummary ().</span><span class="sxs-lookup"><span data-stu-id="ed9e3-167">The validation-summary-errors class is used to style the unordered list rendered by the Html.ValidationSummary() helper.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="ed9e3-168">Puede modificar las clases de hoja de estilos descritas en esta sección para personalizar la apariencia de los mensajes de error de validación.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-168">You can modify the style sheet classes described in this section to customize the appearance of validation error messages.</span></span>

## <a name="adding-validation-logic-to-the-create-action"></a><span data-ttu-id="ed9e3-169">Agregar lógica de validación a la acción Create</span><span class="sxs-lookup"><span data-stu-id="ed9e3-169">Adding Validation Logic to the Create Action</span></span>

<span data-ttu-id="ed9e3-170">En este momento, la creación de vista nunca muestra mensajes de error de validación porque no hemos escrito la lógica para generar ningún mensaje.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-170">Right now, the Create view never displays validation error messages because we have not written the logic to generate any messages.</span></span> <span data-ttu-id="ed9e3-171">Para mostrar los mensajes de error de validación, debe agregar los mensajes de error a ModelState.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-171">In order to display validation error messages, you need to add the error messages to ModelState.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="ed9e3-172">El método UpdateModel () agrega mensajes de error a ModelState automáticamente cuando se produce un error al asignar el valor de un campo de formulario a una propiedad.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-172">The UpdateModel() method adds error messages to ModelState automatically when there is an error assigning the value of a form field to a property.</span></span> <span data-ttu-id="ed9e3-173">Por ejemplo, si intenta asignar la cadena "Apple" a una propiedad BirthDate que acepta valores DateTime, el método UpdateModel () agrega un error a ModelState.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-173">For example, if you attempt to assign the string "apple" to a BirthDate property that accepts DateTime values, then the UpdateModel() method adds an error to ModelState.</span></span>

<span data-ttu-id="ed9e3-174">El método Create () modificado de la lista 2 contiene una nueva sección que valida las propiedades de la clase Contact antes de que se inserte el nuevo contacto en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-174">The modified Create() method in Listing 2 contains a new section that validates the properties of the Contact class before the new contact is inserted into the database.</span></span>

<span data-ttu-id="ed9e3-175">**Lista 2-Controllers\ContactController.cs (crear con validación)**</span><span class="sxs-lookup"><span data-stu-id="ed9e3-175">**Listing 2 - Controllers\ContactController.cs (Create with validation)**</span></span>

[!code-csharp[Main](iteration-3-add-form-validation-cs/samples/sample3.cs)]

<span data-ttu-id="ed9e3-176">La sección Validate exige cuatro reglas de validación distintas:</span><span class="sxs-lookup"><span data-stu-id="ed9e3-176">The validate section enforces four distinct validation rules:</span></span>

- <span data-ttu-id="ed9e3-177">La propiedad FirstName debe tener una longitud mayor que cero (y no puede constar solo de espacios)</span><span class="sxs-lookup"><span data-stu-id="ed9e3-177">The FirstName property must have a length greater than zero (and it cannot consist solely of spaces)</span></span>
- <span data-ttu-id="ed9e3-178">La propiedad LastName debe tener una longitud mayor que cero (y no puede constar solo de espacios)</span><span class="sxs-lookup"><span data-stu-id="ed9e3-178">The LastName property must have a length greater than zero (and it cannot consist solely of spaces)</span></span>
- <span data-ttu-id="ed9e3-179">Si la propiedad Phone tiene un valor (tiene una longitud mayor que 0), la propiedad Phone debe coincidir con una expresión regular.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-179">If the Phone property has a value (has a length greater than 0) then the Phone property must match a regular expression.</span></span>
- <span data-ttu-id="ed9e3-180">Si la propiedad email tiene un valor (tiene una longitud mayor que 0), la propiedad email debe coincidir con una expresión regular.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-180">If the Email property has a value (has a length greater than 0) then the Email property must match a regular expression.</span></span>

<span data-ttu-id="ed9e3-181">Cuando hay una infracción de la regla de validación, se agrega un mensaje de error a ModelState con la ayuda del método AddModelError ().</span><span class="sxs-lookup"><span data-stu-id="ed9e3-181">When there is a validation rule violation, an error message is added to ModelState with the help of the AddModelError() method.</span></span> <span data-ttu-id="ed9e3-182">Cuando se agrega un mensaje a ModelState, se proporciona el nombre de una propiedad y el texto de un mensaje de error de validación.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-182">When you add a message to ModelState, you provide the name of a property and the text of a validation error message.</span></span> <span data-ttu-id="ed9e3-183">Este mensaje de error se muestra en la vista mediante los métodos auxiliares HTML. ValidationSummary () y HTML. ValidationMessage ().</span><span class="sxs-lookup"><span data-stu-id="ed9e3-183">This error message is displayed in the view by the Html.ValidationSummary() and Html.ValidationMessage() helper methods.</span></span>

<span data-ttu-id="ed9e3-184">Una vez ejecutadas las reglas de validación, se comprueba la propiedad IsValid de ModelState.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-184">After the validation rules are executed, the IsValid property of ModelState is checked.</span></span> <span data-ttu-id="ed9e3-185">La propiedad IsValid devuelve false cuando se han agregado mensajes de error de validación a ModelState.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-185">The IsValid property returns false when any validation error messages have been added to ModelState.</span></span> <span data-ttu-id="ed9e3-186">Si se produce un error en la validación, se vuelve a mostrar el formulario de creación con los mensajes de error.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-186">If validation fails, the Create form is redisplayed with the error messages.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="ed9e3-187">Obtuve las expresiones regulares para validar el número de teléfono y la dirección de correo electrónico del repositorio de expresiones regulares en [ *http://regexlib.com* ](http://regexlib.com)</span><span class="sxs-lookup"><span data-stu-id="ed9e3-187">I got the regular expressions for validating the phone number and email address from the regular expression repository at [*http://regexlib.com*](http://regexlib.com)</span></span>

## <a name="adding-validation-logic-to-the-edit-action"></a><span data-ttu-id="ed9e3-188">Agregar lógica de validación a la acción de edición</span><span class="sxs-lookup"><span data-stu-id="ed9e3-188">Adding Validation Logic to the Edit Action</span></span>

<span data-ttu-id="ed9e3-189">La acción Editar () actualiza un contacto.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-189">The Edit() action updates a Contact.</span></span> <span data-ttu-id="ed9e3-190">La acción Edit () debe realizar exactamente la misma validación que la acción Create ().</span><span class="sxs-lookup"><span data-stu-id="ed9e3-190">The Edit() action needs to perform exactly the same validation as the Create() action.</span></span> <span data-ttu-id="ed9e3-191">En lugar de duplicar el mismo código de validación, debemos refactorizar el controlador de contactos para que las acciones Create () y Edit () llamen al mismo método de validación.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-191">Instead of duplicating the same validation code, we should refactor the Contact controller so that both the Create() and Edit() actions call the same validation method.</span></span>

<span data-ttu-id="ed9e3-192">La clase de controlador de contacto modificada se incluye en la lista 3.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-192">The modified Contact controller class is contained in Listing 3.</span></span> <span data-ttu-id="ed9e3-193">Esta clase tiene un nuevo método ValidateContact () al que se llama en las acciones Create () y Edit ().</span><span class="sxs-lookup"><span data-stu-id="ed9e3-193">This class has a new ValidateContact() method that is called within both the Create() and Edit() actions.</span></span>

<span data-ttu-id="ed9e3-194">**Lista 3: Controllers\ContactController.cs**</span><span class="sxs-lookup"><span data-stu-id="ed9e3-194">**Listing 3 - Controllers\ContactController.cs**</span></span>

[!code-csharp[Main](iteration-3-add-form-validation-cs/samples/sample4.cs)]

## <a name="summary"></a><span data-ttu-id="ed9e3-195">Resumen</span><span class="sxs-lookup"><span data-stu-id="ed9e3-195">Summary</span></span>

<span data-ttu-id="ed9e3-196">En esta iteración, hemos agregado la validación de formularios básicos a nuestra aplicación de Contact Manager.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-196">In this iteration, we added basic form validation to our Contact Manager application.</span></span> <span data-ttu-id="ed9e3-197">Nuestra lógica de validación impide que los usuarios envíen un nuevo contacto o editen un contacto existente sin proporcionar valores para las propiedades FirstName y LastName.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-197">Our validation logic prevents users from submitting a new contact or editing an existing contact without supplying values for the FirstName and LastName properties.</span></span> <span data-ttu-id="ed9e3-198">Además, los usuarios deben proporcionar números de teléfono y direcciones de correo electrónico válidos.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-198">Furthermore, users must supply valid phone numbers and email addresses.</span></span>

<span data-ttu-id="ed9e3-199">En esta iteración, se ha agregado la lógica de validación a nuestra aplicación de Contact Manager de la manera más sencilla posible.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-199">In this iteration, we added the validation logic to our Contact Manager application in the easiest way possible.</span></span> <span data-ttu-id="ed9e3-200">Sin embargo, la combinación de la lógica de validación en nuestra lógica del controlador creará problemas a largo plazo.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-200">However, mixing our validation logic into our controller logic will create problems for us in the long term.</span></span> <span data-ttu-id="ed9e3-201">Nuestra aplicación será más difícil de mantener y modificar con el tiempo.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-201">Our application will be more difficult to maintain and modify over time.</span></span>

<span data-ttu-id="ed9e3-202">En la siguiente iteración, refactorizaremos la lógica de validación y la lógica de acceso a la base de datos fuera de nuestros controladores.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-202">In the next iteration, we will refactor our validation logic and database access logic out of our controllers.</span></span> <span data-ttu-id="ed9e3-203">Nos beneficiaremos de varios principios de diseño de software que nos permitan crear una aplicación más acoplada y más flexible.</span><span class="sxs-lookup"><span data-stu-id="ed9e3-203">We'll take advantage of several software design principles to enable us to create a more loosely coupled, and more maintainable, application.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="ed9e3-204">[Anterior](iteration-2-make-the-application-look-nice-cs.md)
> [Siguiente](iteration-4-make-the-application-loosely-coupled-cs.md)</span><span class="sxs-lookup"><span data-stu-id="ed9e3-204">[Previous](iteration-2-make-the-application-look-nice-cs.md)
[Next](iteration-4-make-the-application-loosely-coupled-cs.md)</span></span>
