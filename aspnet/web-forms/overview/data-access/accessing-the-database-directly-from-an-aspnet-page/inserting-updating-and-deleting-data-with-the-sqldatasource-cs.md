---
uid: web-forms/overview/data-access/accessing-the-database-directly-from-an-aspnet-page/inserting-updating-and-deleting-data-with-the-sqldatasource-cs
title: Insertar, actualizar y eliminar datos con SqlDataSource (C#) | Microsoft Docs
author: rick-anderson
description: En los tutoriales anteriores se ha aprendido cómo se permitía el control ObjectDataSource para insertar, actualizar y eliminar datos. El control SqlDataSource admite t...
ms.author: riande
ms.date: 02/20/2007
ms.assetid: a526f0ec-779e-4a2b-a476-6604090d25ce
msc.legacyurl: /web-forms/overview/data-access/accessing-the-database-directly-from-an-aspnet-page/inserting-updating-and-deleting-data-with-the-sqldatasource-cs
msc.type: authoredcontent
ms.openlocfilehash: 495e0e81a67e6926e1c4fa92e29ebbda747cd418
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 03/06/2020
ms.locfileid: "78445021"
---
# <a name="inserting-updating-and-deleting-data-with-the-sqldatasource-c"></a><span data-ttu-id="598b9-104">Insertar, actualizar y eliminar datos con SqlDataSource (C#)</span><span class="sxs-lookup"><span data-stu-id="598b9-104">Inserting, Updating, and Deleting Data with the SqlDataSource (C#)</span></span>

<span data-ttu-id="598b9-105">por [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="598b9-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="598b9-106">[Descarga](https://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_49_CS.exe) de la aplicación de ejemplo o [descarga de PDF](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/datatutorial49cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="598b9-106">[Download Sample App](https://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_49_CS.exe) or [Download PDF](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/datatutorial49cs1.pdf)</span></span>

> <span data-ttu-id="598b9-107">En los tutoriales anteriores se ha aprendido cómo se permitía el control ObjectDataSource para insertar, actualizar y eliminar datos.</span><span class="sxs-lookup"><span data-stu-id="598b9-107">In previous tutorials we learned how the ObjectDataSource control allowed for inserting, updating, and deleting of data.</span></span> <span data-ttu-id="598b9-108">El control SqlDataSource admite las mismas operaciones, pero el enfoque es diferente, y en este tutorial se muestra cómo configurar SqlDataSource para insertar, actualizar y eliminar datos.</span><span class="sxs-lookup"><span data-stu-id="598b9-108">The SqlDataSource control supports the same operations, but the approach is different, and this tutorial shows how to configure the SqlDataSource to insert, update, and delete data.</span></span>

## <a name="introduction"></a><span data-ttu-id="598b9-109">Introducción</span><span class="sxs-lookup"><span data-stu-id="598b9-109">Introduction</span></span>

<span data-ttu-id="598b9-110">Como se describe en [información general sobre la inserción, actualización y eliminación](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md), el control GridView proporciona funciones integradas de actualización y eliminación, mientras que los controles DetailsView y FormView incluyen compatibilidad de inserción junto con la funcionalidad de edición y eliminación.</span><span class="sxs-lookup"><span data-stu-id="598b9-110">As discussed in [An Overview of Inserting, Updating, and Deleting](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md), the GridView control provides built-in updating and deleting capabilities, while the DetailsView and FormView controls include inserting support along with editing and deleting functionality.</span></span> <span data-ttu-id="598b9-111">Estas funciones de modificación de datos se pueden conectar directamente a un control de origen de datos sin necesidad de escribir una línea de código.</span><span class="sxs-lookup"><span data-stu-id="598b9-111">These data modification capabilities can be plugged directly into a data source control without a line of code needing to be written.</span></span> <span data-ttu-id="598b9-112">[Información general sobre la inserción, actualización y eliminación](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md) examinada mediante el origen de los mismos para facilitar la inserción, actualización y eliminación con los controles GridView, DetailsView y FormView.</span><span class="sxs-lookup"><span data-stu-id="598b9-112">[An Overview of Inserting, Updating, and Deleting](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md) examined using the ObjectDataSource to facilitate inserting, updating, and deleting with the GridView, DetailsView, and FormView controls.</span></span> <span data-ttu-id="598b9-113">Como alternativa, se puede usar SqlDataSource en lugar de ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="598b9-113">Alternatively, the SqlDataSource can be used in place of the ObjectDataSource.</span></span>

<span data-ttu-id="598b9-114">Recuerde que para admitir las operaciones de inserción, actualización y eliminación, con el ObjectDataSource que necesitábamos especificar los métodos de nivel de objeto que se van a invocar para realizar la acción de inserción, actualización o eliminación.</span><span class="sxs-lookup"><span data-stu-id="598b9-114">Recall that to support inserting, updating, and deleting, with the ObjectDataSource we needed to specify the object layer methods to invoke to perform the insert, update, or delete action.</span></span> <span data-ttu-id="598b9-115">Con SqlDataSource, es necesario proporcionar `INSERT`, `UPDATE`y `DELETE` instrucciones SQL (o procedimientos almacenados) que se van a ejecutar.</span><span class="sxs-lookup"><span data-stu-id="598b9-115">With the SqlDataSource, we need to provide `INSERT`, `UPDATE`, and `DELETE` SQL statements (or stored procedures) to execute.</span></span> <span data-ttu-id="598b9-116">Como veremos en este tutorial, estas instrucciones se pueden crear manualmente o se pueden generar automáticamente mediante el Asistente para configurar el origen de datos de SqlDataSource.</span><span class="sxs-lookup"><span data-stu-id="598b9-116">As we'll see in this tutorial, these statements can be created manually or can be automatically generated by the SqlDataSource s Configure Data Source wizard.</span></span>

> [!NOTE]
> <span data-ttu-id="598b9-117">Como ya hemos analizado las funcionalidades de inserción, edición y eliminación de los controles GridView, DetailsView y FormView, este tutorial se centrará en la configuración del control SqlDataSource para admitir estas operaciones.</span><span class="sxs-lookup"><span data-stu-id="598b9-117">Since we ve already discussed the inserting, editing, and deleting capabilities of the GridView, DetailsView, and FormView controls, this tutorial will focus on configuring the SqlDataSource control to support these operations.</span></span> <span data-ttu-id="598b9-118">Si necesita un pincel para implementar estas características en GridView, DetailsView y FormView, vuelva a los tutoriales de edición, inserción y eliminación de datos, empezando por [una introducción a la inserción, actualización y eliminación](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md).</span><span class="sxs-lookup"><span data-stu-id="598b9-118">If you need to brush up on implementing these features within the GridView, DetailsView, and FormView, return to the Editing, Inserting, and Deleting Data tutorials, starting with [An Overview of Inserting, Updating, and Deleting](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md).</span></span>

## <a name="step-1-specifyinginsertupdate-anddeletestatements"></a><span data-ttu-id="598b9-119">Paso 1: especificar instrucciones`INSERT`,`UPDATE`y`DELETE`</span><span class="sxs-lookup"><span data-stu-id="598b9-119">Step 1: Specifying`INSERT`,`UPDATE`, and`DELETE`Statements</span></span>

<span data-ttu-id="598b9-120">Como hemos aprendido en los dos últimos tutoriales, para recuperar datos de un control SqlDataSource es necesario establecer dos propiedades:</span><span class="sxs-lookup"><span data-stu-id="598b9-120">As we ve seen in the past two tutorials, to retrieve data from a SqlDataSource control we need to set two properties:</span></span>

1. <span data-ttu-id="598b9-121">`ConnectionString`, que especifica a qué base de datos se va a enviar la consulta, y</span><span class="sxs-lookup"><span data-stu-id="598b9-121">`ConnectionString`, which specifies what database to send the query to, and</span></span>
2. <span data-ttu-id="598b9-122">`SelectCommand`, que especifica la instrucción SQL ad hoc o el nombre del procedimiento almacenado que se va a ejecutar para devolver los resultados.</span><span class="sxs-lookup"><span data-stu-id="598b9-122">`SelectCommand`, which specifies the ad-hoc SQL statement or stored procedure name to execute to return the results.</span></span>

<span data-ttu-id="598b9-123">Para `SelectCommand` valores con parámetros, los valores de los parámetros se especifican a través de la colección SqlDataSource s `SelectParameters` y pueden incluir valores codificados de forma rígida, valores de origen de parámetros comunes (campos QueryString, variables de sesión, valores de control Web, etc.) o se pueden asignar mediante programación.</span><span class="sxs-lookup"><span data-stu-id="598b9-123">For `SelectCommand` values with parameters, the parameter values are specified via the SqlDataSource s `SelectParameters` collection and can include hard-coded values, common parameter source values (querystring fields, session variables, Web control values, and so on), or can be programmatically assigned.</span></span> <span data-ttu-id="598b9-124">Cuando el método SqlDataSource control s `Select()` se invoca mediante programación o automáticamente desde un control Web de datos se establece una conexión con la base de datos, los valores de los parámetros se asignan a la consulta y el comando se desplaza a la base de datos.</span><span class="sxs-lookup"><span data-stu-id="598b9-124">When the SqlDataSource control s `Select()` method is invoked either programmatically or automatically from a data Web control a connection to the database is established, the parameter values are assigned to the query, and the command is shuttled off to the database.</span></span> <span data-ttu-id="598b9-125">Los resultados se devuelven como un conjunto de elementos o un objeto DataReader, dependiendo del valor de la propiedad control s `DataSourceMode`.</span><span class="sxs-lookup"><span data-stu-id="598b9-125">The results are then returned as either a DataSet or DataReader, depending on the value of the control s `DataSourceMode` property.</span></span>

<span data-ttu-id="598b9-126">Junto con la selección de datos, el control SqlDataSource se puede usar para insertar, actualizar y eliminar datos proporcionando `INSERT`, `UPDATE`y `DELETE` instrucciones SQL de forma muy parecida.</span><span class="sxs-lookup"><span data-stu-id="598b9-126">Along with selecting data, the SqlDataSource control can be used to insert, update, and delete data by supplying `INSERT`, `UPDATE`, and `DELETE` SQL statements in much the same way.</span></span> <span data-ttu-id="598b9-127">Simplemente asigne las propiedades `InsertCommand`, `UpdateCommand`y `DeleteCommand` las instrucciones SQL `INSERT`, `UPDATE`y `DELETE` que se van a ejecutar.</span><span class="sxs-lookup"><span data-stu-id="598b9-127">Simply assign the `InsertCommand`, `UpdateCommand`, and `DeleteCommand` properties the `INSERT`, `UPDATE`, and `DELETE` SQL statements to execute.</span></span> <span data-ttu-id="598b9-128">Si las instrucciones tienen parámetros (como lo hacen siempre), se incluyen en las colecciones `InsertParameters`, `UpdateParameters`y `DeleteParameters`.</span><span class="sxs-lookup"><span data-stu-id="598b9-128">If the statements have parameters (as they most always will), include them in the `InsertParameters`, `UpdateParameters`, and `DeleteParameters` collections.</span></span>

<span data-ttu-id="598b9-129">Una vez que se ha especificado un valor de `InsertCommand`, `UpdateCommand`o `DeleteCommand`, la opción Habilitar inserción, habilitar edición o habilitar eliminación en la etiqueta inteligente correspondiente del control Web de datos estará disponible.</span><span class="sxs-lookup"><span data-stu-id="598b9-129">Once an `InsertCommand`, `UpdateCommand`, or `DeleteCommand` value has been specified, the Enable Inserting, Enable Editing, or Enable Deleting option in the corresponding data Web control s smart tag will become available.</span></span> <span data-ttu-id="598b9-130">Para ilustrar esto, echemos un ejemplo de la página `Querying.aspx` que creamos en el tutorial de [consulta de datos con el control SqlDataSource](querying-data-with-the-sqldatasource-control-cs.md) y lo aumentamos para incluir capacidades de eliminación.</span><span class="sxs-lookup"><span data-stu-id="598b9-130">To illustrate this, let s take an example from the `Querying.aspx` page we created in the [Querying Data with the SqlDataSource Control](querying-data-with-the-sqldatasource-control-cs.md) tutorial and augment it to include delete capabilities.</span></span>

<span data-ttu-id="598b9-131">Para empezar, abra las páginas `InsertUpdateDelete.aspx` y `Querying.aspx` de la carpeta `SqlDataSource`.</span><span class="sxs-lookup"><span data-stu-id="598b9-131">Start by opening the `InsertUpdateDelete.aspx` and `Querying.aspx` pages from the `SqlDataSource` folder.</span></span> <span data-ttu-id="598b9-132">En el diseñador de la página `Querying.aspx`, seleccione SqlDataSource y GridView en el primer ejemplo (los controles `ProductsDataSource` y `GridView1`).</span><span class="sxs-lookup"><span data-stu-id="598b9-132">From the Designer on the `Querying.aspx` page, select the SqlDataSource and GridView from the first example (the `ProductsDataSource` and `GridView1` controls).</span></span> <span data-ttu-id="598b9-133">Después de seleccionar los dos controles, vaya al menú edición y elija Copiar (o simplemente presione Ctrl + C).</span><span class="sxs-lookup"><span data-stu-id="598b9-133">After selecting the two controls, go to the Edit menu and choose Copy (or just hit Ctrl+C).</span></span> <span data-ttu-id="598b9-134">A continuación, vaya al diseñador de `InsertUpdateDelete.aspx` y péguelo en los controles.</span><span class="sxs-lookup"><span data-stu-id="598b9-134">Next, go to the Designer of `InsertUpdateDelete.aspx` and paste in the controls.</span></span> <span data-ttu-id="598b9-135">Una vez que haya colocado los dos controles sobre `InsertUpdateDelete.aspx`, pruebe la página en un explorador.</span><span class="sxs-lookup"><span data-stu-id="598b9-135">After you have moved the two controls over to `InsertUpdateDelete.aspx`, test out the page in a browser.</span></span> <span data-ttu-id="598b9-136">Debería ver los valores de las columnas `ProductID`, `ProductName`y `UnitPrice` de todos los registros de la tabla de base de datos `Products`.</span><span class="sxs-lookup"><span data-stu-id="598b9-136">You should see the values of the `ProductID`, `ProductName`, and `UnitPrice` columns for all of the records in the `Products` database table.</span></span>

<span data-ttu-id="598b9-137">[![todos los productos se muestran, ordenados por ProductID](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image1.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="598b9-137">[![All of the Products are Listed, Ordered by ProductID](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image1.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image1.png)</span></span>

<span data-ttu-id="598b9-138">**Figura 1**: todos los productos se enumeran, ordenados por `ProductID` ([haga clic para ver la imagen de tamaño completo](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="598b9-138">**Figure 1**: All of the Products are Listed, Ordered by `ProductID` ([Click to view full-size image](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image2.png))</span></span>

## <a name="adding-the-sqldatasource-sdeletecommandanddeleteparametersproperties"></a><span data-ttu-id="598b9-139">Agregar las propiedades de`DeleteCommand`y`DeleteParameters`de SqlDataSource</span><span class="sxs-lookup"><span data-stu-id="598b9-139">Adding the SqlDataSource s`DeleteCommand`and`DeleteParameters`Properties</span></span>

<span data-ttu-id="598b9-140">En este momento, tenemos un SqlDataSource que simplemente devuelve todos los registros de la tabla `Products` y un control GridView que representa estos datos.</span><span class="sxs-lookup"><span data-stu-id="598b9-140">At this point we have a SqlDataSource that simply returns all of the records from the `Products` table and a GridView that renders this data.</span></span> <span data-ttu-id="598b9-141">Nuestro objetivo es ampliar este ejemplo para permitir que el usuario elimine productos a través de GridView.</span><span class="sxs-lookup"><span data-stu-id="598b9-141">Our goal is to extend this example to allow for the user to delete products via the GridView.</span></span> <span data-ttu-id="598b9-142">Para ello, es necesario especificar los valores de las propiedades de control SqlDataSource `DeleteCommand` y `DeleteParameters` y, a continuación, configurar GridView para admitir la eliminación.</span><span class="sxs-lookup"><span data-stu-id="598b9-142">To accomplish this we need to specify values for the SqlDataSource control s `DeleteCommand` and `DeleteParameters` properties and then configure the GridView to support deleting.</span></span>

<span data-ttu-id="598b9-143">Las propiedades `DeleteCommand` y `DeleteParameters` se pueden especificar de varias maneras:</span><span class="sxs-lookup"><span data-stu-id="598b9-143">The `DeleteCommand` and `DeleteParameters` properties can be specified in a number of ways:</span></span>

- <span data-ttu-id="598b9-144">Mediante la sintaxis declarativa</span><span class="sxs-lookup"><span data-stu-id="598b9-144">Through the declarative syntax</span></span>
- <span data-ttu-id="598b9-145">Del ventana Propiedades en el diseñador</span><span class="sxs-lookup"><span data-stu-id="598b9-145">From the Properties window in the Designer</span></span>
- <span data-ttu-id="598b9-146">En la pantalla especificar una instrucción SQL personalizada o un procedimiento almacenado en el Asistente para configurar orígenes de datos</span><span class="sxs-lookup"><span data-stu-id="598b9-146">From the Specify a custom SQL statement or stored procedure screen in the Configure Data Source wizard</span></span>
- <span data-ttu-id="598b9-147">Mediante el botón Opciones avanzadas de la pantalla especificar columnas de una tabla de vista del Asistente para configurar orígenes de datos, que generará automáticamente la `DELETE` instrucción SQL y la colección de parámetros que se usan en las propiedades `DeleteCommand` y `DeleteParameters`</span><span class="sxs-lookup"><span data-stu-id="598b9-147">Via the Advanced button in the Specify columns from a table of view screen in the Configure Data Source wizard, which will actually automatically generate the `DELETE` SQL statement and parameter collection used in the `DeleteCommand` and `DeleteParameters` properties</span></span>

<span data-ttu-id="598b9-148">Examinaremos cómo se crea automáticamente la instrucción `DELETE` creada en el paso 2.</span><span class="sxs-lookup"><span data-stu-id="598b9-148">We'll examine how to automatically have the `DELETE` statement created in Step 2.</span></span> <span data-ttu-id="598b9-149">Por ahora, vamos a usar el ventana Propiedades en el diseñador, aunque la opción del Asistente para configurar orígenes de datos o la sintaxis declarativa también funcionaría.</span><span class="sxs-lookup"><span data-stu-id="598b9-149">For now, let s use the Properties window in the Designer, although the Configure Data Source wizard or declarative syntax option would work just as well.</span></span>

<span data-ttu-id="598b9-150">En el diseñador de `InsertUpdateDelete.aspx`, haga clic en el `ProductsDataSource` SqlDataSource y, a continuación, abra el ventana Propiedades (en el menú Ver, elija ventana Propiedades o simplemente presione F4).</span><span class="sxs-lookup"><span data-stu-id="598b9-150">From the Designer in `InsertUpdateDelete.aspx`, click on the `ProductsDataSource` SqlDataSource and then bring up the Properties window (from the View menu, choose Properties window, or simply hit F4).</span></span> <span data-ttu-id="598b9-151">Seleccione la propiedad DeleteQuery, que mostrará un conjunto de puntos suspensivos.</span><span class="sxs-lookup"><span data-stu-id="598b9-151">Select the DeleteQuery property, which will bring up a set of ellipses.</span></span>

![Seleccione la propiedad DeleteQuery en la ventana Propiedades.](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image2.gif)

<span data-ttu-id="598b9-153">**Figura 2**: seleccione la propiedad DeleteQuery en la ventana Propiedades.</span><span class="sxs-lookup"><span data-stu-id="598b9-153">**Figure 2**: Select the DeleteQuery Property from the Properties Window</span></span>

> [!NOTE]
> <span data-ttu-id="598b9-154">SqlDataSource no tiene una propiedad DeleteQuery.</span><span class="sxs-lookup"><span data-stu-id="598b9-154">The SqlDataSource doesn t have a DeleteQuery property.</span></span> <span data-ttu-id="598b9-155">En su lugar, DeleteQuery es una combinación de las propiedades `DeleteCommand` y `DeleteParameters` y solo se muestra en el ventana Propiedades al ver la ventana a través del diseñador.</span><span class="sxs-lookup"><span data-stu-id="598b9-155">Rather, DeleteQuery is a combination of the `DeleteCommand` and `DeleteParameters` properties and is only listed in the Properties window when viewing the window through the Designer.</span></span> <span data-ttu-id="598b9-156">Si está viendo el ventana Propiedades en la vista de código fuente, encontrará la propiedad `DeleteCommand` en su lugar.</span><span class="sxs-lookup"><span data-stu-id="598b9-156">If you are looking at the Properties window in the Source view, you'll find the `DeleteCommand` property instead.</span></span>

<span data-ttu-id="598b9-157">Haga clic en los puntos suspensivos de la propiedad DeleteQuery para abrir el cuadro de diálogo Editor de parámetros y comandos (vea la figura 3).</span><span class="sxs-lookup"><span data-stu-id="598b9-157">Click the ellipses in the DeleteQuery property to bring up the Command and Parameter Editor dialog box (see Figure 3).</span></span> <span data-ttu-id="598b9-158">En este cuadro de diálogo puede especificar el `DELETE` instrucción SQL y especificar los parámetros.</span><span class="sxs-lookup"><span data-stu-id="598b9-158">From this dialog box you can specify the `DELETE` SQL statement and specify the parameters.</span></span> <span data-ttu-id="598b9-159">Escriba la siguiente consulta en el cuadro de texto `DELETE` comando (manualmente o mediante el Generador de consultas, si lo prefiere):</span><span class="sxs-lookup"><span data-stu-id="598b9-159">Enter the following query into the `DELETE` command textbox (either manually or using the Query Builder, if you prefer):</span></span>

[!code-sql[Main](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/samples/sample1.sql)]

<span data-ttu-id="598b9-160">A continuación, haga clic en el botón actualizar parámetros para agregar el parámetro `@ProductID` a la lista de parámetros que aparece a continuación.</span><span class="sxs-lookup"><span data-stu-id="598b9-160">Next, click the Refresh Parameters button to add the `@ProductID` parameter to the list of parameters below.</span></span>

<span data-ttu-id="598b9-161">[![seleccione la propiedad DeleteQuery en la ventana Propiedades.](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image3.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="598b9-161">[![Select the DeleteQuery Property from the Properties Window](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image3.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image3.png)</span></span>

<span data-ttu-id="598b9-162">**Figura 3**: seleccione la propiedad DeleteQuery en la ventana Propiedades ([haga clic para ver la imagen a tamaño completo](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="598b9-162">**Figure 3**: Select the DeleteQuery Property from the Properties Window ([Click to view full-size image](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image4.png))</span></span>

<span data-ttu-id="598b9-163">*No* proporcione un valor para este parámetro (deje el origen del parámetro en ninguno).</span><span class="sxs-lookup"><span data-stu-id="598b9-163">Do *not* provide a value for this parameter (leave its Parameter source at None ).</span></span> <span data-ttu-id="598b9-164">Una vez que se agrega compatibilidad con la eliminación a GridView, el control GridView proporcionará automáticamente este valor de parámetro usando el valor de su colección `DataKeys` para la fila en la que se hizo clic en el botón Eliminar.</span><span class="sxs-lookup"><span data-stu-id="598b9-164">Once we add deleting support to the GridView, the GridView will automatically supply this parameter value, using the value of its `DataKeys` collection for the row whose Delete button was clicked.</span></span>

> [!NOTE]
> <span data-ttu-id="598b9-165">El nombre del parámetro que se usa en la consulta `DELETE` *debe* ser el mismo que el nombre del valor `DataKeyNames` de GridView, DetailsView o FormView.</span><span class="sxs-lookup"><span data-stu-id="598b9-165">The parameter name used in the `DELETE` query *must* be the same as the name of the `DataKeyNames` value in the GridView, DetailsView, or FormView.</span></span> <span data-ttu-id="598b9-166">Es decir, el parámetro de la instrucción `DELETE` se denomina de forma intencionada `@ProductID` (en lugar de, por ejemplo, `@ID`), porque el nombre de la columna de clave principal de la tabla Products (y, por tanto, el valor de DataKeyNames en GridView) es `ProductID`.</span><span class="sxs-lookup"><span data-stu-id="598b9-166">That is, the parameter in the `DELETE` statement is purposefully named `@ProductID` (instead of, say, `@ID`), because the primary key column name in the Products table (and therefore the DataKeyNames value in the GridView) is `ProductID`.</span></span>

<span data-ttu-id="598b9-167">Si el nombre del parámetro y el valor de `DataKeyNames` no coinciden, el control GridView no puede asignar automáticamente el parámetro al valor de la colección `DataKeys`.</span><span class="sxs-lookup"><span data-stu-id="598b9-167">If the parameter name and `DataKeyNames` value doesn t match, the GridView cannot automatically assign the parameter the value from the `DataKeys` collection.</span></span>

<span data-ttu-id="598b9-168">Después de escribir la información relacionada con la eliminación en el cuadro de diálogo Editor de parámetros y comandos, haga clic en aceptar y vaya a la vista Código fuente para examinar el marcado declarativo resultante:</span><span class="sxs-lookup"><span data-stu-id="598b9-168">After entering the delete-related information into the Command and Parameter Editor dialog box click OK and go to the Source view to examine the resulting declarative markup:</span></span>

[!code-aspx[Main](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/samples/sample2.aspx)]

<span data-ttu-id="598b9-169">Observe la adición de la propiedad `DeleteCommand`, así como la sección `<DeleteParameters>` y el objeto Parameter denominado `productID`.</span><span class="sxs-lookup"><span data-stu-id="598b9-169">Note the addition of the `DeleteCommand` property as well as the `<DeleteParameters>` section and the Parameter object named `productID`.</span></span>

## <a name="configuring-the-gridview-for-deleting"></a><span data-ttu-id="598b9-170">Configurar GridView para eliminar</span><span class="sxs-lookup"><span data-stu-id="598b9-170">Configuring the GridView for Deleting</span></span>

<span data-ttu-id="598b9-171">Con la propiedad `DeleteCommand` agregada, la etiqueta inteligente GridView s ahora contiene la opción Habilitar eliminación.</span><span class="sxs-lookup"><span data-stu-id="598b9-171">With the `DeleteCommand` property added, the GridView s smart tag now contains the Enable Deleting option.</span></span> <span data-ttu-id="598b9-172">Continúe y Active esta casilla.</span><span class="sxs-lookup"><span data-stu-id="598b9-172">Go ahead and check this checkbox.</span></span> <span data-ttu-id="598b9-173">Como se describe en [información general sobre la inserción, actualización y eliminación](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md), esto hace que GridView agregue un CommandField con su `ShowDeleteButton` propiedad establecida en `true`.</span><span class="sxs-lookup"><span data-stu-id="598b9-173">As discussed in [An Overview of Inserting, Updating, and Deleting](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md), this causes the GridView to add a CommandField with its `ShowDeleteButton` property set to `true`.</span></span> <span data-ttu-id="598b9-174">Como se muestra en la figura 4, cuando se visita la página a través de un explorador, se incluye un botón Eliminar.</span><span class="sxs-lookup"><span data-stu-id="598b9-174">As Figure 4 shows, when the page is visited through a browser a Delete button is included.</span></span> <span data-ttu-id="598b9-175">Para probar esta página, elimine algunos productos.</span><span class="sxs-lookup"><span data-stu-id="598b9-175">Test this page out by deleting some products.</span></span>

<span data-ttu-id="598b9-176">[![cada fila de GridView incluye ahora un botón eliminar](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image4.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="598b9-176">[![Each GridView Row Now Includes a Delete Button](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image4.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image5.png)</span></span>

<span data-ttu-id="598b9-177">**Figura 4**: cada fila de GridView incluye ahora un botón Eliminar ([haga clic para ver la imagen de tamaño completo](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="598b9-177">**Figure 4**: Each GridView Row Now Includes a Delete Button ([Click to view full-size image](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image6.png))</span></span>

<span data-ttu-id="598b9-178">Al hacer clic en el botón eliminar, se produce un postback, el control GridView asigna al parámetro `ProductID` el valor del valor de la colección `DataKeys` para la fila en la que se hizo clic en el botón Eliminar e invoca el método SqlDataSource s `Delete()`.</span><span class="sxs-lookup"><span data-stu-id="598b9-178">Upon clicking a Delete button, a postback occurs, the GridView assigns the `ProductID` parameter the value of the `DataKeys` collection value for the row whose Delete button was clicked, and invokes the SqlDataSource s `Delete()` method.</span></span> <span data-ttu-id="598b9-179">A continuación, el control SqlDataSource se conecta a la base de datos y ejecuta la instrucción `DELETE`.</span><span class="sxs-lookup"><span data-stu-id="598b9-179">The SqlDataSource control then connects to the database and executes the `DELETE` statement.</span></span> <span data-ttu-id="598b9-180">A continuación, GridView se vuelve a enlazar a SqlDataSource, devolviendo y mostrando el conjunto actual de productos (que ya no incluye el registro recién eliminado).</span><span class="sxs-lookup"><span data-stu-id="598b9-180">The GridView then rebinds to the SqlDataSource, getting back and displaying the current set of products (which no longer includes the just-deleted record).</span></span>

> [!NOTE]
> <span data-ttu-id="598b9-181">Dado que GridView usa su colección de `DataKeys` para rellenar los parámetros de SqlDataSource, es fundamental que la propiedad `DataKeyNames` de GridView se establezca en las columnas que constituyen la clave principal y que el `SelectCommand` SqlDataSource s devuelva estas columnas.</span><span class="sxs-lookup"><span data-stu-id="598b9-181">Since the GridView uses its `DataKeys` collection to populate the SqlDataSource parameters, it s vital that the GridView s `DataKeyNames` property be set to the column(s) that constitute the primary key and that the SqlDataSource s `SelectCommand` returns these columns.</span></span> <span data-ttu-id="598b9-182">Además, es importante que el nombre del parámetro en el `DeleteCommand` SqlDataSource s se establezca en `@ProductID`.</span><span class="sxs-lookup"><span data-stu-id="598b9-182">Moreover, it s important that the parameter name in the SqlDataSource s `DeleteCommand` is set to `@ProductID`.</span></span> <span data-ttu-id="598b9-183">Si no se establece la propiedad `DataKeyNames` o si el parámetro no se denomina `@ProductsID`, al hacer clic en el botón eliminar se producirá un postback, pero realmente no se eliminará ningún registro.</span><span class="sxs-lookup"><span data-stu-id="598b9-183">If the `DataKeyNames` property is not set or the parameter is not named `@ProductsID`, clicking the Delete button will cause a postback, but won't actually delete any record.</span></span>

<span data-ttu-id="598b9-184">La figura 5 muestra esta interacción de forma gráfica.</span><span class="sxs-lookup"><span data-stu-id="598b9-184">Figure 5 depicts this interaction graphically.</span></span> <span data-ttu-id="598b9-185">Consulte el tutorial [examinar los eventos asociados con la inserción, actualización y eliminación](../editing-inserting-and-deleting-data/examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) para obtener una explicación más detallada sobre la cadena de eventos asociada a la inserción, actualización y eliminación de un control Web de datos.</span><span class="sxs-lookup"><span data-stu-id="598b9-185">Refer back to the [Examining the Events Associated with Inserting, Updating, and Deleting](../editing-inserting-and-deleting-data/examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) tutorial for a more detailed discussion on the chain of events associated with inserting, updating, and deleting from a data Web control.</span></span>

![Al hacer clic en el botón eliminar de GridView, se invoca el método SqlDataSource s Delete ()](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image5.gif)

<span data-ttu-id="598b9-187">**Figura 5**: hacer clic en el botón eliminar de GridView invoca el método SqlDataSource s `Delete()`</span><span class="sxs-lookup"><span data-stu-id="598b9-187">**Figure 5**: Clicking the Delete Button in the GridView Invokes the SqlDataSource s `Delete()` Method</span></span>

## <a name="step-2-automatically-generating-theinsertupdate-anddeletestatements"></a><span data-ttu-id="598b9-188">Paso 2: generar automáticamente las instrucciones`INSERT`,`UPDATE`y`DELETE`</span><span class="sxs-lookup"><span data-stu-id="598b9-188">Step 2: Automatically Generating the`INSERT`,`UPDATE`, and`DELETE`Statements</span></span>

<span data-ttu-id="598b9-189">En el paso 1 examinado, se pueden especificar `INSERT`, `UPDATE`y `DELETE` instrucciones SQL a través de la sintaxis declarativa de control s o ventana Propiedades.</span><span class="sxs-lookup"><span data-stu-id="598b9-189">As Step 1 examined, `INSERT`, `UPDATE`, and `DELETE` SQL statements can be specified through the Properties window or the control s declarative syntax.</span></span> <span data-ttu-id="598b9-190">Sin embargo, este enfoque requiere que se escriban manualmente las instrucciones SQL a mano, lo que puede ser más monótono y propenso a errores.</span><span class="sxs-lookup"><span data-stu-id="598b9-190">However, this approach requires that we manually write out the SQL statements by hand, which can be monotonous and error-prone.</span></span> <span data-ttu-id="598b9-191">Afortunadamente, el Asistente para configurar orígenes de datos proporciona una opción para que las instrucciones `INSERT`, `UPDATE`y `DELETE` se generen automáticamente al usar la pantalla especificar columnas de una tabla de vista.</span><span class="sxs-lookup"><span data-stu-id="598b9-191">Fortunately, the Configure Data Source wizard provides an option to have the `INSERT`, `UPDATE`, and `DELETE` statements automatically generated when using the Specify columns from a table of view screen.</span></span>

<span data-ttu-id="598b9-192">Permita explorar esta opción de generación automática.</span><span class="sxs-lookup"><span data-stu-id="598b9-192">Let s explore this automatic generation option.</span></span> <span data-ttu-id="598b9-193">Agregue DetailsView al diseñador en `InsertUpdateDelete.aspx` y establezca su propiedad `ID` en `ManageProducts`.</span><span class="sxs-lookup"><span data-stu-id="598b9-193">Add a DetailsView to the Designer in `InsertUpdateDelete.aspx` and set its `ID` property to `ManageProducts`.</span></span> <span data-ttu-id="598b9-194">A continuación, desde la etiqueta inteligente de DetailsView s, elija crear un nuevo origen de datos y crear un SqlDataSource denominado `ManageProductsDataSource`.</span><span class="sxs-lookup"><span data-stu-id="598b9-194">Next, from the DetailsView s smart tag, choose to create a new data source and create a SqlDataSource named `ManageProductsDataSource`.</span></span>

<span data-ttu-id="598b9-195">[![crear un nuevo SqlDataSource denominado ManageProductsDataSource](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image6.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="598b9-195">[![Create a New SqlDataSource Named ManageProductsDataSource](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image6.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image7.png)</span></span>

<span data-ttu-id="598b9-196">**Figura 6**: cree un nuevo SqlDataSource denominado `ManageProductsDataSource` ([haga clic para ver la imagen de tamaño completo](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="598b9-196">**Figure 6**: Create a New SqlDataSource Named `ManageProductsDataSource` ([Click to view full-size image](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image8.png))</span></span>

<span data-ttu-id="598b9-197">En el Asistente para configurar orígenes de datos, elija usar la cadena de conexión `NORTHWINDConnectionString` y haga clic en siguiente.</span><span class="sxs-lookup"><span data-stu-id="598b9-197">From the Configure Data Source wizard, opt to use the `NORTHWINDConnectionString` connection string and click Next.</span></span> <span data-ttu-id="598b9-198">En la pantalla configurar la instrucción SELECT, deje seleccionado el botón de radio especificar columnas de una tabla o vista y elija la tabla `Products` de la lista desplegable.</span><span class="sxs-lookup"><span data-stu-id="598b9-198">From the Configure the Select Statement screen, leave the Specify columns from a table or view radio button selected and pick the `Products` table from the drop-down list.</span></span> <span data-ttu-id="598b9-199">Seleccione las columnas `ProductID`, `ProductName`, `UnitPrice`y `Discontinued` de la lista de casillas.</span><span class="sxs-lookup"><span data-stu-id="598b9-199">Select the `ProductID`, `ProductName`, `UnitPrice`, and `Discontinued` columns from the checkbox list.</span></span>

<span data-ttu-id="598b9-200">[![mediante la tabla Products, devolver las columnas ProductID, ProductName, UnitPrice y Discontinued](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image7.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="598b9-200">[![Using the Products Table, Return the ProductID, ProductName, UnitPrice, and Discontinued Columns](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image7.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image9.png)</span></span>

<span data-ttu-id="598b9-201">**Figura 7**: uso de la tabla `Products`, devolver las columnas `ProductID`, `ProductName`, `UnitPrice`y `Discontinued` ([haga clic para ver la imagen de tamaño completo](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="598b9-201">**Figure 7**: Using the `Products` Table, Return the `ProductID`, `ProductName`, `UnitPrice`, and `Discontinued` Columns ([Click to view full-size image](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image10.png))</span></span>

<span data-ttu-id="598b9-202">Para generar automáticamente `INSERT`, `UPDATE`y `DELETE` instrucciones basadas en la tabla y las columnas seleccionadas, haga clic en el botón avanzadas y active la casilla generar las instrucciones de `INSERT`, `UPDATE`y `DELETE`.</span><span class="sxs-lookup"><span data-stu-id="598b9-202">To automatically generate `INSERT`, `UPDATE`, and `DELETE` statements based on the selected table and columns, click the Advanced button and check the Generate `INSERT`, `UPDATE`, and `DELETE` statements checkbox.</span></span>

![Active la casilla generar instrucciones INSERT, UPDATE y DELETE](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image8.gif)

<span data-ttu-id="598b9-204">**Figura 8**: Active las casillas generar `INSERT`, `UPDATE`y `DELETE`</span><span class="sxs-lookup"><span data-stu-id="598b9-204">**Figure 8**: Check the Generate `INSERT`, `UPDATE`, and `DELETE` statements Checkbox</span></span>

<span data-ttu-id="598b9-205">La casilla generar `INSERT`, `UPDATE`y `DELETE` solo se puede comprobar si la tabla seleccionada tiene una clave principal y la columna (o columnas) de clave principal se incluye en la lista de columnas devueltas.</span><span class="sxs-lookup"><span data-stu-id="598b9-205">The Generate `INSERT`, `UPDATE`, and `DELETE` statements checkbox will only be checkable if the table selected has a primary key and the primary key column (or columns) are included in the list of returned columns.</span></span> <span data-ttu-id="598b9-206">La casilla usar simultaneidad optimista, que se convierte en seleccionable una vez que se ha comprobado la casilla generar `INSERT`, `UPDATE`y instrucciones `DELETE`, aumentará las cláusulas `WHERE` en las instrucciones `UPDATE` y `DELETE` resultantes para proporcionar un control de simultaneidad optimista.</span><span class="sxs-lookup"><span data-stu-id="598b9-206">The Use optimistic concurrency checkbox, which becomes selectable once the Generate `INSERT`, `UPDATE`, and `DELETE` statements checkbox has been checked, will augment the `WHERE` clauses in the resulting `UPDATE` and `DELETE` statements to provide optimistic concurrency control.</span></span> <span data-ttu-id="598b9-207">Por ahora, deje la casilla desactivada. examinaremos la simultaneidad optimista con el control SqlDataSource en el siguiente tutorial.</span><span class="sxs-lookup"><span data-stu-id="598b9-207">For now, leave this checkbox unchecked; we'll examine optimistic concurrency with the SqlDataSource control in the next tutorial.</span></span>

<span data-ttu-id="598b9-208">Después de activar la casilla generar `INSERT`, `UPDATE`y `DELETE`, haga clic en Aceptar para volver a la pantalla configurar instrucción SELECT y, a continuación, haga clic en siguiente y en finalizar para completar el Asistente para configurar orígenes de datos.</span><span class="sxs-lookup"><span data-stu-id="598b9-208">After checking the Generate `INSERT`, `UPDATE`, and `DELETE` statements checkbox, click OK to return to the Configure Select Statement screen, then click Next, and then Finish, to complete the Configure Data Source wizard.</span></span> <span data-ttu-id="598b9-209">Al finalizar el asistente, Visual Studio agregará BoundFields a DetailsView para las columnas `ProductID`, `ProductName`y `UnitPrice` y CheckBoxField para la columna `Discontinued`.</span><span class="sxs-lookup"><span data-stu-id="598b9-209">Upon completing the wizard, Visual Studio will add BoundFields to the DetailsView for the `ProductID`, `ProductName`, and `UnitPrice` columns and a CheckBoxField for the `Discontinued` column.</span></span> <span data-ttu-id="598b9-210">En la etiqueta inteligente de DetailsView s, active la opción Habilitar paginación para que el usuario que visita esta página pueda recorrer los productos.</span><span class="sxs-lookup"><span data-stu-id="598b9-210">From the DetailsView s smart tag, check the Enable Paging option so that the user visiting this page can step through the products.</span></span> <span data-ttu-id="598b9-211">También puede desactivar las propiedades `Width` y `Height` de DetailsView.</span><span class="sxs-lookup"><span data-stu-id="598b9-211">Also clear out the DetailsView s `Width` and `Height` properties.</span></span>

<span data-ttu-id="598b9-212">Tenga en cuenta que la etiqueta inteligente tiene disponibles las opciones habilitar inserción, habilitar edición y habilitar eliminación.</span><span class="sxs-lookup"><span data-stu-id="598b9-212">Notice that the smart tag has the Enable Inserting, Enable Editing, and Enable Deleting options available.</span></span> <span data-ttu-id="598b9-213">Esto se debe a que SqlDataSource contiene valores para su `InsertCommand`, `UpdateCommand`y `DeleteCommand`, como se muestra en la sintaxis declarativa siguiente:</span><span class="sxs-lookup"><span data-stu-id="598b9-213">This is because the SqlDataSource contains values for its `InsertCommand`, `UpdateCommand`, and `DeleteCommand`, as the following declarative syntax shows:</span></span>

[!code-aspx[Main](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/samples/sample3.aspx)]

<span data-ttu-id="598b9-214">Observe cómo el control SqlDataSource ha tenido valores establecidos automáticamente para sus propiedades `InsertCommand`, `UpdateCommand`y `DeleteCommand`.</span><span class="sxs-lookup"><span data-stu-id="598b9-214">Note how the SqlDataSource control has had values automatically set for its `InsertCommand`, `UpdateCommand`, and `DeleteCommand` properties.</span></span> <span data-ttu-id="598b9-215">El conjunto de columnas al que se hace referencia en las propiedades `InsertCommand` y `UpdateCommand` se basa en los de la instrucción `SELECT`.</span><span class="sxs-lookup"><span data-stu-id="598b9-215">The set of columns referenced in the `InsertCommand` and `UpdateCommand` properties are based on those in the `SELECT` statement.</span></span> <span data-ttu-id="598b9-216">Es decir, en lugar de tener *cada* columna Products en el `InsertCommand` y `UpdateCommand`, solo hay las columnas especificadas en el `SelectCommand` (menos `ProductID`, lo que se omite porque es una [columna`IDENTITY`](http://www.sqlteam.com/item.asp?ItemID=102), cuyo valor no se puede cambiar cuando se edita y que se asigna automáticamente al insertar).</span><span class="sxs-lookup"><span data-stu-id="598b9-216">That is, rather than having *every* Products column in the `InsertCommand` and `UpdateCommand`, there are only those columns specified in the `SelectCommand` (less `ProductID`, which is omitted because it s an [`IDENTITY` column](http://www.sqlteam.com/item.asp?ItemID=102), whose value cannot be changed when edited and which is automatically assigned when inserting).</span></span> <span data-ttu-id="598b9-217">Además, para cada parámetro de las propiedades `InsertCommand`, `UpdateCommand`y `DeleteCommand` hay parámetros correspondientes en las colecciones `InsertParameters`, `UpdateParameters`y `DeleteParameters`.</span><span class="sxs-lookup"><span data-stu-id="598b9-217">Moreover, for each parameter in the `InsertCommand`, `UpdateCommand`, and `DeleteCommand` properties there are corresponding parameters in the `InsertParameters`, `UpdateParameters`, and `DeleteParameters` collections.</span></span>

<span data-ttu-id="598b9-218">Para activar las características de modificación de datos de DetailsView s, active las opciones habilitar inserción, habilitar edición y habilitar eliminación en su etiqueta inteligente.</span><span class="sxs-lookup"><span data-stu-id="598b9-218">To turn on the DetailsView s data modification features, check the Enable Inserting, Enable Editing, and Enable Deleting options in its smart tag.</span></span> <span data-ttu-id="598b9-219">Esto agrega un CommandField con sus propiedades `ShowInsertButton`, `ShowEditButton`y `ShowDeleteButton` establecidas en `true`.</span><span class="sxs-lookup"><span data-stu-id="598b9-219">This adds a CommandField with its `ShowInsertButton`, `ShowEditButton`, and `ShowDeleteButton` properties set to `true`.</span></span>

<span data-ttu-id="598b9-220">Visite la página en un explorador y anote los botones de edición, eliminación y nuevo incluidos en DetailsView.</span><span class="sxs-lookup"><span data-stu-id="598b9-220">Visit the page in a browser and note the Edit, Delete, and New buttons included in the DetailsView.</span></span> <span data-ttu-id="598b9-221">Al hacer clic en el botón Editar, DetailsView se convierte en el modo de edición, que muestra cada BoundField cuya propiedad `ReadOnly` está establecida en `false` (valor predeterminado) como un cuadro de texto y CheckBoxField como casilla.</span><span class="sxs-lookup"><span data-stu-id="598b9-221">Clicking the Edit button turns the DetailsView into edit mode, which displays each BoundField whose `ReadOnly` property is set to `false` (the default) as a TextBox, and the CheckBoxField as a checkbox.</span></span>

<span data-ttu-id="598b9-222">[![la interfaz de edición predeterminada de DetailsView s](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image9.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="598b9-222">[![The DetailsView s Default Editing Interface](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image9.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image11.png)</span></span>

<span data-ttu-id="598b9-223">**Figura 9**: interfaz de edición predeterminada de DetailsView s ([haga clic para ver la imagen de tamaño completo](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="598b9-223">**Figure 9**: The DetailsView s Default Editing Interface ([Click to view full-size image](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image12.png))</span></span>

<span data-ttu-id="598b9-224">Del mismo modo, puede eliminar el producto seleccionado actualmente o agregar un nuevo producto al sistema.</span><span class="sxs-lookup"><span data-stu-id="598b9-224">Similarly, you can delete the currently selected product or add a new product to the system.</span></span> <span data-ttu-id="598b9-225">Dado que la instrucción `InsertCommand` solo funciona con las columnas `ProductName`, `UnitPrice`y `Discontinued`, las demás columnas tienen `NULL` o su valor predeterminado asignado por la base de datos al insertar.</span><span class="sxs-lookup"><span data-stu-id="598b9-225">Since the `InsertCommand` statement only works with the `ProductName`, `UnitPrice`, and `Discontinued` columns, the other columns have either `NULL` or their default value assigned by the database upon insert.</span></span> <span data-ttu-id="598b9-226">Al igual que con ObjectDataSource, si en la `InsertCommand` falta alguna columna de tabla de base de datos que no permita `NULL` s y Don t tenga un valor predeterminado, se producirá un error de SQL al intentar ejecutar la instrucción `INSERT`.</span><span class="sxs-lookup"><span data-stu-id="598b9-226">Just like with the ObjectDataSource, if the `InsertCommand` is missing any database table columns that don t allow `NULL` s and don t have a default value, a SQL error will occur when attempting to execute the `INSERT` statement.</span></span>

> [!NOTE]
> <span data-ttu-id="598b9-227">Las interfaces de inserción y edición de DetailsView no tienen ningún tipo de personalización o validación.</span><span class="sxs-lookup"><span data-stu-id="598b9-227">The DetailsView s inserting and editing interfaces lack any sort of customization or validation.</span></span> <span data-ttu-id="598b9-228">Para agregar controles de validación o personalizar las interfaces, debe convertir BoundFields en TemplateFields.</span><span class="sxs-lookup"><span data-stu-id="598b9-228">To add validation controls or to customize the interfaces, you need to convert the BoundFields to TemplateFields.</span></span> <span data-ttu-id="598b9-229">Consulte [Agregar controles de validación a las interfaces de edición e inserción](../editing-inserting-and-deleting-data/adding-validation-controls-to-the-editing-and-inserting-interfaces-cs.md) y personalizar los tutoriales de [la interfaz de modificación de datos](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) para obtener más información.</span><span class="sxs-lookup"><span data-stu-id="598b9-229">Refer to the [Adding Validation Controls to the Editing and Inserting Interfaces](../editing-inserting-and-deleting-data/adding-validation-controls-to-the-editing-and-inserting-interfaces-cs.md) and [Customizing the Data Modification Interface](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) tutorials for more information.</span></span>

<span data-ttu-id="598b9-230">Además, tenga en cuenta que para actualizar y eliminar, DetailsView usa el valor actual de `DataKey` del producto, que solo está presente si se ha configurado la propiedad `DataKeyNames`.</span><span class="sxs-lookup"><span data-stu-id="598b9-230">Also, keep in mind that for updating and deleting, the DetailsView uses the current product s `DataKey` value, which is only present if the `DataKeyNames` property is configured.</span></span> <span data-ttu-id="598b9-231">Si la edición o eliminación parece no tener ningún efecto, asegúrese de que la propiedad `DataKeyNames` esté establecida.</span><span class="sxs-lookup"><span data-stu-id="598b9-231">If editing or deleting appears to have no effect, ensure that the `DataKeyNames` property is set.</span></span>

## <a name="limitations-of-automatically-generating-sql-statements"></a><span data-ttu-id="598b9-232">Limitaciones de la generación automática de instrucciones SQL</span><span class="sxs-lookup"><span data-stu-id="598b9-232">Limitations of Automatically Generating SQL Statements</span></span>

<span data-ttu-id="598b9-233">Dado que la opción generar `INSERT`, `UPDATE`y `DELETE` solo está disponible cuando se seleccionan columnas de una tabla, para consultas más complejas tendrá que escribir sus propias instrucciones `INSERT`, `UPDATE`y `DELETE` como hicimos en el paso 1.</span><span class="sxs-lookup"><span data-stu-id="598b9-233">Since the Generate `INSERT`, `UPDATE`, and `DELETE` statements option is only available when picking columns from a table, for more complex queries you will have to write your own `INSERT`, `UPDATE`, and `DELETE` statements like we did in Step 1.</span></span> <span data-ttu-id="598b9-234">Normalmente, las instrucciones de SQL `SELECT` usan `JOIN` s para devolver datos de una o varias tablas de búsqueda con fines de visualización (como devolver el campo `Categories` tabla s `CategoryName` al mostrar la información del producto).</span><span class="sxs-lookup"><span data-stu-id="598b9-234">Commonly, SQL `SELECT` statements use `JOIN` s to bring back data from one or more lookup tables for display purposes (such as bringing back the `Categories` table s `CategoryName` field when displaying product information).</span></span> <span data-ttu-id="598b9-235">Al mismo tiempo, es posible que desee permitir que el usuario edite, actualice o inserte datos en la tabla principal (`Products`, en este caso).</span><span class="sxs-lookup"><span data-stu-id="598b9-235">At the same time, we might want to allow the user to edit, update, or insert data into the core table (`Products`, in this case).</span></span>

<span data-ttu-id="598b9-236">Mientras que las instrucciones `INSERT`, `UPDATE`y `DELETE` se pueden escribir manualmente, tenga en cuenta la siguiente sugerencia de ahorro de tiempo.</span><span class="sxs-lookup"><span data-stu-id="598b9-236">While the `INSERT`, `UPDATE`, and `DELETE` statements can be entered manually, consider the following time-saving tip.</span></span> <span data-ttu-id="598b9-237">Configure inicialmente SqlDataSource para que extraiga los datos solo de la tabla `Products`.</span><span class="sxs-lookup"><span data-stu-id="598b9-237">Initially setup the SqlDataSource so that it pulls back data just from the `Products` table.</span></span> <span data-ttu-id="598b9-238">Use el Asistente para configurar orígenes de datos para especificar las columnas de una pantalla de tabla o vista, de modo que pueda generar automáticamente las instrucciones `INSERT`, `UPDATE`y `DELETE`.</span><span class="sxs-lookup"><span data-stu-id="598b9-238">Use the Configure Data Source wizard s Specify columns from a table or view screen so that you can automatically generate the `INSERT`, `UPDATE`, and `DELETE` statements.</span></span> <span data-ttu-id="598b9-239">Después, después de completar el asistente, elija configurar el SelectQuery desde el ventana Propiedades (o bien, vuelva al Asistente para configurar el origen de datos, pero use la opción especificar una instrucción SQL personalizada o un procedimiento almacenado).</span><span class="sxs-lookup"><span data-stu-id="598b9-239">Then, after completing the wizard, choose to configure the SelectQuery from the Properties window (or, alternatively, go back to the Configure Data Source wizard, but use the Specify a custom SQL statement or stored procedure option).</span></span> <span data-ttu-id="598b9-240">A continuación, actualice la instrucción `SELECT` para incluir la sintaxis de `JOIN`.</span><span class="sxs-lookup"><span data-stu-id="598b9-240">Then update the `SELECT` statement to include the `JOIN` syntax.</span></span> <span data-ttu-id="598b9-241">Esta técnica ofrece las ventajas de ahorro de tiempo de las instrucciones SQL generadas automáticamente y permite una instrucción `SELECT` más personalizada.</span><span class="sxs-lookup"><span data-stu-id="598b9-241">This technique offers the time-saving benefits of the automatically generated SQL statements and allows for a more customized `SELECT` statement.</span></span>

<span data-ttu-id="598b9-242">Otra limitación de la generación automática de las instrucciones `INSERT`, `UPDATE`y `DELETE` es que las columnas de las instrucciones `INSERT` y `UPDATE` se basan en las columnas devueltas por la instrucción `SELECT`.</span><span class="sxs-lookup"><span data-stu-id="598b9-242">Another limitation of automatically generating the `INSERT`, `UPDATE`, and `DELETE` statements is that the columns in the `INSERT` and `UPDATE` statements are based on the columns returned by the `SELECT` statement.</span></span> <span data-ttu-id="598b9-243">Sin embargo, es posible que tenga que actualizar o insertar más o menos campos.</span><span class="sxs-lookup"><span data-stu-id="598b9-243">We may need to update or insert more or fewer fields, however.</span></span> <span data-ttu-id="598b9-244">Por ejemplo, en el ejemplo del paso 2, es posible que deseemos que el `UnitPrice` BoundField sea de solo lectura.</span><span class="sxs-lookup"><span data-stu-id="598b9-244">For example, in the example from Step 2, maybe we want to have the `UnitPrice` BoundField be read-only.</span></span> <span data-ttu-id="598b9-245">En ese caso, no debe aparecer en el `UpdateCommand`.</span><span class="sxs-lookup"><span data-stu-id="598b9-245">In that case, it shouldn't appear in the `UpdateCommand`.</span></span> <span data-ttu-id="598b9-246">O bien, es posible que desee establecer el valor de un campo de tabla que no aparezca en GridView.</span><span class="sxs-lookup"><span data-stu-id="598b9-246">Or we may want to set the value of a table field that does not appear in the GridView.</span></span> <span data-ttu-id="598b9-247">Por ejemplo, al agregar un nuevo registro, es posible que le interese el valor de `QuantityPerUnit` establecido en TODO.</span><span class="sxs-lookup"><span data-stu-id="598b9-247">For example, when adding a new record we may want the `QuantityPerUnit` value set to TODO .</span></span>

<span data-ttu-id="598b9-248">Si se requieren estas personalizaciones, deberá realizarlas manualmente, bien mediante el ventana Propiedades, la opción especificar una instrucción SQL personalizada o un procedimiento almacenado en el asistente o a través de la sintaxis declarativa.</span><span class="sxs-lookup"><span data-stu-id="598b9-248">If such customizations are required, you need to make them manually, either through the Properties window, the Specify a custom SQL statement or stored procedure option in the wizard, or via the declarative syntax.</span></span>

> [!NOTE]
> <span data-ttu-id="598b9-249">Al agregar parámetros que no tienen campos correspondientes en el control Web de datos, tenga en cuenta que es necesario asignar valores a estos parámetros de alguna manera.</span><span class="sxs-lookup"><span data-stu-id="598b9-249">When adding parameters that do not have corresponding fields in the data Web control, keep in mind that these parameters values will need to be assigned values in some manner.</span></span> <span data-ttu-id="598b9-250">Estos valores pueden ser: codificado de forma rígida directamente en el `InsertCommand` o `UpdateCommand`; puede proviene de algún origen predefinido (la cadena QueryString, el estado de la sesión, los controles Web de la página, etc.); o se puede asignar mediante programación, como vimos en el tutorial anterior.</span><span class="sxs-lookup"><span data-stu-id="598b9-250">These values can be: hard-coded directly in the `InsertCommand` or `UpdateCommand`; can come from some pre-defined source (the querystring, session state, Web controls on the page, and so on); or can be assigned programmatically, as we saw in the preceding tutorial.</span></span>

## <a name="summary"></a><span data-ttu-id="598b9-251">Resumen</span><span class="sxs-lookup"><span data-stu-id="598b9-251">Summary</span></span>

<span data-ttu-id="598b9-252">Para que los controles Web de datos utilicen sus capacidades integradas de inserción, edición y eliminación, el control de origen de datos con el que están enlazados debe ofrecer dicha funcionalidad.</span><span class="sxs-lookup"><span data-stu-id="598b9-252">In order for the data Web controls to utilize their built-in inserting, editing, and deleting capabilities, the data source control they are bound to must offer such functionality.</span></span> <span data-ttu-id="598b9-253">En el caso de SqlDataSource, esto significa que `INSERT`, `UPDATE`y `DELETE` instrucciones SQL deben asignarse a las propiedades `InsertCommand`, `UpdateCommand`y `DeleteCommand`.</span><span class="sxs-lookup"><span data-stu-id="598b9-253">For the SqlDataSource, this means that `INSERT`, `UPDATE`, and `DELETE` SQL statements must be assigned to the `InsertCommand`, `UpdateCommand`, and `DeleteCommand` properties.</span></span> <span data-ttu-id="598b9-254">Estas propiedades y las colecciones de parámetros correspondientes se pueden agregar manualmente o generar automáticamente a través del Asistente para configurar orígenes de datos.</span><span class="sxs-lookup"><span data-stu-id="598b9-254">These properties, and the corresponding parameters collections, can be added manually or generated automatically through the Configure Data Source wizard.</span></span> <span data-ttu-id="598b9-255">En este tutorial, hemos examinado ambas técnicas.</span><span class="sxs-lookup"><span data-stu-id="598b9-255">In this tutorial we examined both techniques.</span></span>

<span data-ttu-id="598b9-256">Hemos examinado el uso de la simultaneidad optimista con ObjectDataSource en el tutorial de [implementación de simultaneidad optimista](../editing-inserting-and-deleting-data/implementing-optimistic-concurrency-cs.md) .</span><span class="sxs-lookup"><span data-stu-id="598b9-256">We examined using optimistic concurrency with the ObjectDataSource in the [Implementing Optimistic Concurrency](../editing-inserting-and-deleting-data/implementing-optimistic-concurrency-cs.md) tutorial.</span></span> <span data-ttu-id="598b9-257">El control SqlDataSource también proporciona compatibilidad con simultaneidad optimista.</span><span class="sxs-lookup"><span data-stu-id="598b9-257">The SqlDataSource control also provides optimistic concurrency support.</span></span> <span data-ttu-id="598b9-258">Como se indicó en el paso 2, al generar automáticamente las instrucciones `INSERT`, `UPDATE`y `DELETE`, el asistente ofrece una opción usar simultaneidad optimista.</span><span class="sxs-lookup"><span data-stu-id="598b9-258">As noted in Step 2, when automatically generating the `INSERT`, `UPDATE`, and `DELETE` statements, the wizard offers a Use optimistic concurrency option.</span></span> <span data-ttu-id="598b9-259">Como veremos en el siguiente tutorial, el uso de la simultaneidad optimista con SqlDataSource modifica las cláusulas `WHERE` en las instrucciones `UPDATE` y `DELETE` para asegurarse de que los valores de las demás columnas no hayan cambiado desde la última vez que se mostraban los datos en la página.</span><span class="sxs-lookup"><span data-stu-id="598b9-259">As we'll see in the next tutorial, using optimistic concurrency with the SqlDataSource modifies the `WHERE` clauses in the `UPDATE` and `DELETE` statements to ensure that the values for the other columns haven't changed since the data was last displayed on the page.</span></span>

<span data-ttu-id="598b9-260">¡ Feliz programación!</span><span class="sxs-lookup"><span data-stu-id="598b9-260">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="598b9-261">Acerca del autor</span><span class="sxs-lookup"><span data-stu-id="598b9-261">About the Author</span></span>

<span data-ttu-id="598b9-262">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor de siete libros de ASP/ASP. net y fundador de [4GuysFromRolla.com](http://www.4guysfromrolla.com), ha estado trabajando con las tecnologías Web de Microsoft desde 1998.</span><span class="sxs-lookup"><span data-stu-id="598b9-262">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="598b9-263">Scott funciona como consultor, profesor y redactor independiente.</span><span class="sxs-lookup"><span data-stu-id="598b9-263">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="598b9-264">Su último libro se [*enseña a ASP.NET 2,0 en 24 horas*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="598b9-264">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="598b9-265">Puede ponerse en contacto con usted en [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="598b9-265">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="598b9-266">o a través de su blog, que encontrará en [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="598b9-266">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="598b9-267">[Anterior](using-parameterized-queries-with-the-sqldatasource-cs.md)
> [Siguiente](implementing-optimistic-concurrency-with-the-sqldatasource-cs.md)</span><span class="sxs-lookup"><span data-stu-id="598b9-267">[Previous](using-parameterized-queries-with-the-sqldatasource-cs.md)
[Next](implementing-optimistic-concurrency-with-the-sqldatasource-cs.md)</span></span>
