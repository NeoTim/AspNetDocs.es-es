---
uid: web-forms/overview/data-access/displaying-data-with-the-datalist-and-repeater/formatting-the-datalist-and-repeater-based-upon-data-vb
title: Aplicar formato a DataList y Repeater en función de los datos (VB) | Microsoft Docs
author: rick-anderson
description: En este tutorial se explican los ejemplos de cómo se da formato a la apariencia de los controles DataList y Repeater, ya sea mediante el uso de funciones de formato con...
ms.author: riande
ms.date: 09/13/2006
ms.assetid: e2f401ae-37bb-4b19-aa97-d6b385d40f88
msc.legacyurl: /web-forms/overview/data-access/displaying-data-with-the-datalist-and-repeater/formatting-the-datalist-and-repeater-based-upon-data-vb
msc.type: authoredcontent
ms.openlocfilehash: c9b60e4dacd992962942034e84c01cb82e039c81
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 11/28/2019
ms.locfileid: "74636696"
---
# <a name="formatting-the-datalist-and-repeater-based-upon-data-vb"></a><span data-ttu-id="b424d-103">Dar formato a los controles DataList y Repeater en función de los datos (VB)</span><span class="sxs-lookup"><span data-stu-id="b424d-103">Formatting the DataList and Repeater Based Upon Data (VB)</span></span>

<span data-ttu-id="b424d-104">por [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="b424d-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="b424d-105">[Descarga](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_30_VB.exe) de la aplicación de ejemplo o [descarga de PDF](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/datatutorial30vb1.pdf)</span><span class="sxs-lookup"><span data-stu-id="b424d-105">[Download Sample App](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_30_VB.exe) or [Download PDF](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/datatutorial30vb1.pdf)</span></span>

> <span data-ttu-id="b424d-106">En este tutorial, veremos ejemplos de cómo se da formato a la apariencia de los controles DataList y Repeater, ya sea mediante las funciones de formato dentro de las plantillas o controlando el evento DataBound.</span><span class="sxs-lookup"><span data-stu-id="b424d-106">In this tutorial we'll step through examples of how we format the appearance of the DataList and Repeater controls, either by using formatting functions within templates or by handling the DataBound event.</span></span>

## <a name="introduction"></a><span data-ttu-id="b424d-107">Introducción</span><span class="sxs-lookup"><span data-stu-id="b424d-107">Introduction</span></span>

<span data-ttu-id="b424d-108">Como vimos en el tutorial anterior, DataList ofrece una serie de propiedades relacionadas con el estilo que afectan a su apariencia.</span><span class="sxs-lookup"><span data-stu-id="b424d-108">As we saw in the preceding tutorial, the DataList offers a number of style-related properties that affect its appearance.</span></span> <span data-ttu-id="b424d-109">En concreto, vimos cómo asignar clases CSS predeterminadas a las propiedades `HeaderStyle`, `ItemStyle`, `AlternatingItemStyle`y `SelectedItemStyle` de DataList.</span><span class="sxs-lookup"><span data-stu-id="b424d-109">In particular, we saw how to assign default CSS classes to the DataList s `HeaderStyle`, `ItemStyle`, `AlternatingItemStyle`, and `SelectedItemStyle` properties.</span></span> <span data-ttu-id="b424d-110">Además de estas cuatro propiedades, la lista de elementos incluye varias propiedades relacionadas con el estilo, como `Font`, `ForeColor`, `BackColor`y `BorderWidth`, por nombrar algunas.</span><span class="sxs-lookup"><span data-stu-id="b424d-110">In addition to these four properties, the DataList includes a number of other style-related properties, such as `Font`, `ForeColor`, `BackColor`, and `BorderWidth`, to name a few.</span></span> <span data-ttu-id="b424d-111">El control Repeater no contiene ninguna propiedad relacionada con el estilo.</span><span class="sxs-lookup"><span data-stu-id="b424d-111">The Repeater control does not contain any style-related properties.</span></span> <span data-ttu-id="b424d-112">Cualquier configuración de estilo de este tipo debe realizarse directamente en el marcado de las plantillas del repetidor.</span><span class="sxs-lookup"><span data-stu-id="b424d-112">Any such style settings must be made directly within the markup in the Repeater s templates.</span></span>

<span data-ttu-id="b424d-113">Sin embargo, a menudo, el formato de los datos depende de los propios datos.</span><span class="sxs-lookup"><span data-stu-id="b424d-113">Often, though, how data should be formatted depends on the data itself.</span></span> <span data-ttu-id="b424d-114">Por ejemplo, al enumerar los productos, es posible que desee mostrar la información del producto en un color de fuente gris claro si se ha dejado de usar, o bien, es posible que desee resaltar el valor `UnitsInStock` si es cero.</span><span class="sxs-lookup"><span data-stu-id="b424d-114">For example, when listing products we might want to display the product information in a light gray font color if it is discontinued, or we may want to highlight the `UnitsInStock` value if it is zero.</span></span> <span data-ttu-id="b424d-115">Como vimos en los tutoriales anteriores, GridView, DetailsView y FormView ofrecen dos maneras distintas de dar formato a su apariencia en función de sus datos:</span><span class="sxs-lookup"><span data-stu-id="b424d-115">As we saw in previous tutorials, the GridView, DetailsView, and FormView offer two distinct ways to format their appearance based on their data:</span></span>

- <span data-ttu-id="b424d-116">**El evento `DataBound`** crea un controlador de eventos para el evento de `DataBound` adecuado, que se activa después de que los datos se hayan enlazado a cada elemento (para el GridView que era el evento `RowDataBound`; para los controles DataList y Repeater, es el evento `ItemDataBound`).</span><span class="sxs-lookup"><span data-stu-id="b424d-116">**The `DataBound` event** create an event handler for the appropriate `DataBound` event, which fires after the data has been bound to each item (for the GridView it was the `RowDataBound` event; for the DataList and Repeater it is the `ItemDataBound` event).</span></span> <span data-ttu-id="b424d-117">En ese controlador de eventos, se pueden examinar los datos que se acaban de enlazar y tomar las decisiones de formato tomadas.</span><span class="sxs-lookup"><span data-stu-id="b424d-117">In that event handler, the data just bound can be examined and formatting decisions made.</span></span> <span data-ttu-id="b424d-118">Hemos examinado esta técnica en el tutorial de [formato personalizado basado en datos](../custom-formatting/custom-formatting-based-upon-data-vb.md) .</span><span class="sxs-lookup"><span data-stu-id="b424d-118">We examined this technique in the [Custom Formatting Based Upon Data](../custom-formatting/custom-formatting-based-upon-data-vb.md) tutorial.</span></span>
- <span data-ttu-id="b424d-119">**Aplicar formato a funciones en plantillas** cuando se usa TemplateFields en los controles DetailsView o GridView, o una plantilla en el control FormView, se puede Agregar una función de formato a la clase de código subyacente de la página ASP.net, la capa de lógica de negocios o cualquier otra biblioteca de clases que sea accesible desde la aplicación Web.</span><span class="sxs-lookup"><span data-stu-id="b424d-119">**Formatting Functions in Templates** when using TemplateFields in the DetailsView or GridView controls, or a template in the FormView control, we can add a formatting function to the ASP.NET page s code-behind class, the Business Logic Layer, or any other class library that is accessible from the web application.</span></span> <span data-ttu-id="b424d-120">Esta función de formato puede aceptar un número arbitrario de parámetros de entrada, pero debe devolver el código HTML que se va a representar en la plantilla.</span><span class="sxs-lookup"><span data-stu-id="b424d-120">This formatting function can accept an arbitrary number of input parameters, but must return the HTML to render in the template.</span></span> <span data-ttu-id="b424d-121">Las funciones de formato se examinaron primero en el tutorial [uso de TemplateFields en el control GridView](../custom-formatting/using-templatefields-in-the-gridview-control-vb.md) .</span><span class="sxs-lookup"><span data-stu-id="b424d-121">Formatting functions were first examined in the [Using TemplateFields in the GridView Control](../custom-formatting/using-templatefields-in-the-gridview-control-vb.md) tutorial.</span></span>

<span data-ttu-id="b424d-122">Ambas técnicas de formato están disponibles con los controles DataList y Repeater.</span><span class="sxs-lookup"><span data-stu-id="b424d-122">Both of these formatting techniques are available with the DataList and Repeater controls.</span></span> <span data-ttu-id="b424d-123">En este tutorial se recorren los ejemplos de uso de ambas técnicas para ambos controles.</span><span class="sxs-lookup"><span data-stu-id="b424d-123">In this tutorial we'll step through examples using both techniques for both controls.</span></span>

## <a name="using-theitemdataboundevent-handler"></a><span data-ttu-id="b424d-124">Usar el controlador de eventos`ItemDataBound`</span><span class="sxs-lookup"><span data-stu-id="b424d-124">Using the`ItemDataBound`Event Handler</span></span>

<span data-ttu-id="b424d-125">Cuando los datos se enlazan a una lista de datos, ya sea desde un control de origen de datos o mediante programación asignando datos a la propiedad control s `DataSource` y llamando a su método de `DataBind()`, se desencadena el evento DataList s `DataBinding`, se enumera el origen de datos y cada registro de datos se enlaza a DataList.</span><span class="sxs-lookup"><span data-stu-id="b424d-125">When data is bound to a DataList, either from a data source control or through programmatically assigning data to the control s `DataSource` property and calling its `DataBind()` method, the DataList s `DataBinding` event fires, the data source enumerated, and each data record is bound to the DataList.</span></span> <span data-ttu-id="b424d-126">Para cada registro del origen de datos, la lista de datos crea un objeto [`DataListItem`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalistitem.aspx) que después se enlaza al registro actual.</span><span class="sxs-lookup"><span data-stu-id="b424d-126">For each record in the data source, the DataList creates a [`DataListItem`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalistitem.aspx) object that is then bound to the current record.</span></span> <span data-ttu-id="b424d-127">Durante este proceso, el DataList genera dos eventos:</span><span class="sxs-lookup"><span data-stu-id="b424d-127">During this process, the DataList raises two events:</span></span>

- <span data-ttu-id="b424d-128">**`ItemCreated`** se activa después de que se haya creado el `DataListItem`</span><span class="sxs-lookup"><span data-stu-id="b424d-128">**`ItemCreated`** fires after the `DataListItem` has been created</span></span>
- <span data-ttu-id="b424d-129">**`ItemDataBound`** se activa después de que el registro actual se ha enlazado al `DataListItem`</span><span class="sxs-lookup"><span data-stu-id="b424d-129">**`ItemDataBound`** fires after the current record has been bound to the `DataListItem`</span></span>

<span data-ttu-id="b424d-130">En los pasos siguientes se describe el proceso de enlace de datos para el control DataList.</span><span class="sxs-lookup"><span data-stu-id="b424d-130">The following steps outline the data binding process for the DataList control.</span></span>

1. <span data-ttu-id="b424d-131">El evento DataList s [`DataBinding`](https://msdn.microsoft.com/library/system.web.ui.control.databinding.aspx) se activa</span><span class="sxs-lookup"><span data-stu-id="b424d-131">The DataList s [`DataBinding` event](https://msdn.microsoft.com/library/system.web.ui.control.databinding.aspx) fires</span></span>
2. <span data-ttu-id="b424d-132">Los datos están enlazados a DataList</span><span class="sxs-lookup"><span data-stu-id="b424d-132">The data is bound to the DataList</span></span>  
  
   <span data-ttu-id="b424d-133">Para cada registro del origen de datos</span><span class="sxs-lookup"><span data-stu-id="b424d-133">For each record in the data source</span></span> 

    1. <span data-ttu-id="b424d-134">Crear un objeto `DataListItem`</span><span class="sxs-lookup"><span data-stu-id="b424d-134">Create a `DataListItem` object</span></span>
    2. <span data-ttu-id="b424d-135">Desencadenar el [evento`ItemCreated`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.itemcreated.aspx)</span><span class="sxs-lookup"><span data-stu-id="b424d-135">Fire the [`ItemCreated` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.itemcreated.aspx)</span></span>
    3. <span data-ttu-id="b424d-136">Enlazar el registro al `DataListItem`</span><span class="sxs-lookup"><span data-stu-id="b424d-136">Bind the record to the `DataListItem`</span></span>
    4. <span data-ttu-id="b424d-137">Desencadenar el [evento`ItemDataBound`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.itemdatabound.aspx)</span><span class="sxs-lookup"><span data-stu-id="b424d-137">Fire the [`ItemDataBound` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.itemdatabound.aspx)</span></span>
    5. <span data-ttu-id="b424d-138">Agregar el `DataListItem` a la colección de `Items`</span><span class="sxs-lookup"><span data-stu-id="b424d-138">Add the `DataListItem` to the `Items` collection</span></span>

<span data-ttu-id="b424d-139">Al enlazar datos al control Repeater, progresa a través de la misma secuencia de pasos.</span><span class="sxs-lookup"><span data-stu-id="b424d-139">When binding data to the Repeater control, it progresses through the exact same sequence of steps.</span></span> <span data-ttu-id="b424d-140">La única diferencia es que, en lugar de `DataListItem` las instancias que se crean, el repetidor utiliza [`RepeaterItem`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeateritem(VS.80).aspx)s.</span><span class="sxs-lookup"><span data-stu-id="b424d-140">The only difference is that instead of `DataListItem` instances being created, the Repeater uses [`RepeaterItem`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeateritem(VS.80).aspx)s.</span></span>

> [!NOTE]
> <span data-ttu-id="b424d-141">Es posible que el lector astutos haya observado una ligera anomalía entre la secuencia de pasos que transcurrió cuando los controles DataList y Repeater se enlazan a datos en comparación con el control GridView enlazado a datos.</span><span class="sxs-lookup"><span data-stu-id="b424d-141">The astute reader may have noticed a slight anomaly between the sequence of steps that transpire when the DataList and Repeater are bound to data versus when the GridView is bound to data.</span></span> <span data-ttu-id="b424d-142">Al final del proceso de enlace de datos, GridView genera el evento `DataBound`; sin embargo, ni los controles DataList ni Repeater tienen este tipo de evento.</span><span class="sxs-lookup"><span data-stu-id="b424d-142">At the tail end of the data binding process, the GridView raises the `DataBound` event; however, neither the DataList nor Repeater control have such an event.</span></span> <span data-ttu-id="b424d-143">Esto se debe a que los controles DataList y Repeater se crearon en el período de tiempo ASP.NET 1. x, antes de que el patrón de controlador de eventos anterior y posterior se hubiera convertido en común.</span><span class="sxs-lookup"><span data-stu-id="b424d-143">This is because the DataList and Repeater controls were created back in the ASP.NET 1.x timeframe, before the pre- and post-level event handler pattern had become common.</span></span>

<span data-ttu-id="b424d-144">Al igual que con GridView, una opción para dar formato en función de los datos consiste en crear un controlador de eventos para el evento `ItemDataBound`.</span><span class="sxs-lookup"><span data-stu-id="b424d-144">Like with the GridView, one option for formatting based on the data is to create an event handler for the `ItemDataBound` event.</span></span> <span data-ttu-id="b424d-145">Este controlador de eventos Inspeccione los datos que se acaban de enlazar al `DataListItem` o `RepeaterItem` y que afectan al formato del control según sea necesario.</span><span class="sxs-lookup"><span data-stu-id="b424d-145">This event handler would inspect the data that had just been bound to the `DataListItem` or `RepeaterItem` and affect the formatting of the control as needed.</span></span>

<span data-ttu-id="b424d-146">En el caso del control DataList, el formato de los cambios de todo el elemento se puede implementar mediante las propiedades relacionadas con el estilo `DataListItem` s, entre las que se incluyen las `Font`estándar, `ForeColor`, `BackColor`, `CssClass`, etc.</span><span class="sxs-lookup"><span data-stu-id="b424d-146">For the DataList control, formatting changes for the entire item can be implemented using the `DataListItem` s style-related properties, which include the standard `Font`, `ForeColor`, `BackColor`, `CssClass`, and so on.</span></span> <span data-ttu-id="b424d-147">Para influir en el formato de controles Web concretos dentro de la plantilla DataList s, es necesario tener acceso y modificar el estilo de esos controles Web mediante programación.</span><span class="sxs-lookup"><span data-stu-id="b424d-147">To affect the formatting of particular Web controls within the DataList s template, we need to programmatically access and modify the style of those Web controls.</span></span> <span data-ttu-id="b424d-148">Vimos cómo hacerlo de nuevo en el *formato personalizado basado* en el tutorial de datos.</span><span class="sxs-lookup"><span data-stu-id="b424d-148">We saw how to accomplish this back in the *Custom Formatting Based Upon Data* tutorial.</span></span> <span data-ttu-id="b424d-149">Al igual que el control Repeater, la clase `RepeaterItem` no tiene propiedades relacionadas con el estilo; por lo tanto, todos los cambios relacionados con el estilo realizados en un `RepeaterItem` en el controlador de eventos `ItemDataBound` deben realizarse mediante programación con el acceso y la actualización de los controles web dentro de la plantilla.</span><span class="sxs-lookup"><span data-stu-id="b424d-149">Like the Repeater control, the `RepeaterItem` class has no style-related properties; therefore, all style-related changes made to a `RepeaterItem` in the `ItemDataBound` event handler must be done by programmatically accessing and updating Web controls within the template.</span></span>

<span data-ttu-id="b424d-150">Dado que la técnica de formato de `ItemDataBound` para los controles DataList y Repeater son prácticamente idénticas, nuestro ejemplo se centrará en el uso de DataList.</span><span class="sxs-lookup"><span data-stu-id="b424d-150">Since the `ItemDataBound` formatting technique for the DataList and Repeater are virtually identical, our example will focus on using the DataList.</span></span>

## <a name="step-1-displaying-product-information-in-the-datalist"></a><span data-ttu-id="b424d-151">Paso 1: Mostrar información del producto en la lista de datos</span><span class="sxs-lookup"><span data-stu-id="b424d-151">Step 1: Displaying Product Information in the DataList</span></span>

<span data-ttu-id="b424d-152">Antes de preocuparse por el formato, cree primero una página que use una lista de datos para mostrar la información del producto.</span><span class="sxs-lookup"><span data-stu-id="b424d-152">Before we worry about the formatting, let s first create a page that uses a DataList to display product information.</span></span> <span data-ttu-id="b424d-153">En el [tutorial anterior](displaying-data-with-the-datalist-and-repeater-controls-vb.md) , creamos un datalist cuya `ItemTemplate` muestra cada nombre de producto, categoría, proveedor, cantidad por unidad y precio.</span><span class="sxs-lookup"><span data-stu-id="b424d-153">In the [previous tutorial](displaying-data-with-the-datalist-and-repeater-controls-vb.md) we created a DataList whose `ItemTemplate` displayed each product s name, category, supplier, quantity per unit, and price.</span></span> <span data-ttu-id="b424d-154">Vamos a repetir esta funcionalidad aquí en este tutorial.</span><span class="sxs-lookup"><span data-stu-id="b424d-154">Let s repeat this functionality here in this tutorial.</span></span> <span data-ttu-id="b424d-155">Para ello, puede volver a crear la lista de DataList y su ObjectDataSource desde cero, o bien puede copiar los controles de la página creada en el tutorial anterior (`Basics.aspx`) y pegarlos en la página para este tutorial (`Formatting.aspx`).</span><span class="sxs-lookup"><span data-stu-id="b424d-155">To accomplish this, you can either recreate the DataList and its ObjectDataSource from scratch, or you can copy over those controls from the page created in the previous tutorial (`Basics.aspx`) and paste them into the page for this tutorial (`Formatting.aspx`).</span></span>

<span data-ttu-id="b424d-156">Una vez que haya replicado la funcionalidad DataList y ObjectDataSource de `Basics.aspx` en `Formatting.aspx`, dedique un momento a cambiar la propiedad DataList s `ID` de `DataList1` a un `ItemDataBoundFormattingExample`más descriptivo.</span><span class="sxs-lookup"><span data-stu-id="b424d-156">Once you have replicated the DataList and ObjectDataSource functionality from `Basics.aspx` into `Formatting.aspx`, take a moment to change the DataList s `ID` property from `DataList1` to a more descriptive `ItemDataBoundFormattingExample`.</span></span> <span data-ttu-id="b424d-157">A continuación, vea la lista de DataList en un explorador.</span><span class="sxs-lookup"><span data-stu-id="b424d-157">Next, view the DataList in a browser.</span></span> <span data-ttu-id="b424d-158">Como se muestra en la figura 1, la única diferencia de formato entre cada producto es que el color de fondo alterna.</span><span class="sxs-lookup"><span data-stu-id="b424d-158">As Figure 1 shows, the only formatting difference between each product is that the background color alternates.</span></span>

<span data-ttu-id="b424d-159">[![los productos se muestran en el control DataList](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image2.png)](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="b424d-159">[![The Products are Listed in the DataList Control](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image2.png)](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image1.png)</span></span>

<span data-ttu-id="b424d-160">**Figura 1**: los productos se muestran en el control DataList ([haga clic para ver la imagen de tamaño completo](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="b424d-160">**Figure 1**: The Products are Listed in the DataList Control ([Click to view full-size image](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image3.png))</span></span>

<span data-ttu-id="b424d-161">En este tutorial, vamos a dar formato a la lista de elementos de forma que todos los productos con un precio inferior a $20,00 tendrán su nombre y precio unitario resaltados en amarillo.</span><span class="sxs-lookup"><span data-stu-id="b424d-161">For this tutorial, let s format the DataList such that any products with a price less than $20.00 will have both its name and unit price highlighted yellow.</span></span>

## <a name="step-2-programmatically-determining-the-value-of-the-data-in-the-itemdatabound-event-handler"></a><span data-ttu-id="b424d-162">Paso 2: determinar mediante programación el valor de los datos en el controlador de eventos de ItemDataBound</span><span class="sxs-lookup"><span data-stu-id="b424d-162">Step 2: Programmatically Determining the Value of the Data in the ItemDataBound Event Handler</span></span>

<span data-ttu-id="b424d-163">Puesto que solo se aplicará el formato personalizado a los productos con un precio inferior a $20,00, se debe poder determinar cada precio del producto.</span><span class="sxs-lookup"><span data-stu-id="b424d-163">Since only those products with a price under $20.00 will have the custom formatting applied, we must be able to determine each product s price.</span></span> <span data-ttu-id="b424d-164">Al enlazar datos a una lista de datos, la lista de datos enumera los registros de su origen de datos y, para cada registro, crea una instancia de `DataListItem`, enlazando el registro del origen de datos al `DataListItem`.</span><span class="sxs-lookup"><span data-stu-id="b424d-164">When binding data to a DataList, the DataList enumerates the records in its data source and, for each record, creates a `DataListItem` instance, binding the data source record to the `DataListItem`.</span></span> <span data-ttu-id="b424d-165">Una vez que los datos de registro se han enlazado al objeto de `DataListItem` actual, se desencadena el evento DataList s `ItemDataBound`.</span><span class="sxs-lookup"><span data-stu-id="b424d-165">After the particular record s data has been bound to the current `DataListItem` object, the DataList s `ItemDataBound` event is fired.</span></span> <span data-ttu-id="b424d-166">Podemos crear un controlador de eventos para este evento con el fin de inspeccionar los valores de datos del `DataListItem` actual y, según esos valores, realizar los cambios de formato necesarios.</span><span class="sxs-lookup"><span data-stu-id="b424d-166">We can create an event handler for this event to inspect the data values for the current `DataListItem` and, based upon those values, make any formatting changes necessary.</span></span>

<span data-ttu-id="b424d-167">Cree un evento `ItemDataBound` para la lista de elementos y agregue el código siguiente:</span><span class="sxs-lookup"><span data-stu-id="b424d-167">Create an `ItemDataBound` event for the DataList and add the following code:</span></span>

[!code-vb[Main](formatting-the-datalist-and-repeater-based-upon-data-vb/samples/sample1.vb)]

<span data-ttu-id="b424d-168">Aunque el concepto y la semántica que hay detrás del controlador de eventos de `ItemDataBound` de datos son los mismos que los usados por el controlador de eventos de `RowDataBound` de GridView en el tutorial de *formato personalizado basado en datos* , la sintaxis difiere ligeramente.</span><span class="sxs-lookup"><span data-stu-id="b424d-168">While the concept and semantics behind the DataList s `ItemDataBound` event handler are the same as those used by the GridView s `RowDataBound` event handler in the *Custom Formatting Based Upon Data* tutorial, the syntax differs slightly.</span></span> <span data-ttu-id="b424d-169">Cuando se activa el evento de `ItemDataBound`, el `DataListItem` simplemente enlazado a los datos se pasa al controlador de eventos correspondiente a través de `e.Item` (en lugar de `e.Row`, como con el controlador de eventos de `RowDataBound` de GridView).</span><span class="sxs-lookup"><span data-stu-id="b424d-169">When the `ItemDataBound` event fires, the `DataListItem` just bound to data is passed into corresponding event handler via `e.Item` (instead of `e.Row`, as with the GridView s `RowDataBound` event handler).</span></span> <span data-ttu-id="b424d-170">El controlador de eventos DataList s `ItemDataBound` se activa para *cada* fila agregada a DataList, incluidas las filas de encabezado, las filas de pie de página y las filas de separadores.</span><span class="sxs-lookup"><span data-stu-id="b424d-170">The DataList s `ItemDataBound` event handler fires for *each* row added to the DataList, including header rows, footer rows, and separator rows.</span></span> <span data-ttu-id="b424d-171">Sin embargo, la información del producto solo está enlazada a las filas de datos.</span><span class="sxs-lookup"><span data-stu-id="b424d-171">However, the product information is only bound to the data rows.</span></span> <span data-ttu-id="b424d-172">Por lo tanto, al usar el evento `ItemDataBound` para inspeccionar los datos enlazados a la lista de datos, es necesario asegurarse primero de que se ha vuelto a trabajar con un elemento de datos.</span><span class="sxs-lookup"><span data-stu-id="b424d-172">Therefore, when using the `ItemDataBound` event to inspect the data bound to the DataList, we need to first ensure that we re working with a data item.</span></span> <span data-ttu-id="b424d-173">Esto puede realizarse mediante la comprobación de la [propiedad](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalistitem.itemtype.aspx)`DataListItem` s`ItemType`, que puede tener uno de [los ocho valores siguientes](https://msdn.microsoft.com/library/system.web.ui.webcontrols.listitemtype.aspx):</span><span class="sxs-lookup"><span data-stu-id="b424d-173">This can be accomplished by checking the `DataListItem` s [`ItemType` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalistitem.itemtype.aspx), which can have one of [the following eight values](https://msdn.microsoft.com/library/system.web.ui.webcontrols.listitemtype.aspx):</span></span>

- `AlternatingItem`
- `EditItem`
- `Footer`
- `Header`
- `Item`
- `Pager`
- `SelectedItem`
- `Separator`

<span data-ttu-id="b424d-174">Tanto `Item` como `AlternatingItem``DataListItem` comparan los elementos de datos de DataList.</span><span class="sxs-lookup"><span data-stu-id="b424d-174">Both `Item` and `AlternatingItem``DataListItem` s makeup the DataList s data items.</span></span> <span data-ttu-id="b424d-175">Suponiendo que se ha vuelto a trabajar con una `Item` o `AlternatingItem`, se tiene acceso a la instancia real de `ProductsRow` enlazada a la `DataListItem`actual.</span><span class="sxs-lookup"><span data-stu-id="b424d-175">Assuming we re working with an `Item` or `AlternatingItem`, we access the actual `ProductsRow` instance that was bound to the current `DataListItem`.</span></span> <span data-ttu-id="b424d-176">La propiedad `DataListItem` s [`DataItem`](https://msdn.microsoft.com/system.web.ui.webcontrols.datalistitem.dataitem.aspx) contiene una referencia al objeto `DataRowView`, cuya propiedad `Row` proporciona una referencia al objeto `ProductsRow` real.</span><span class="sxs-lookup"><span data-stu-id="b424d-176">The `DataListItem` s [`DataItem` property](https://msdn.microsoft.com/system.web.ui.webcontrols.datalistitem.dataitem.aspx) contains a reference to the `DataRowView` object, whose `Row` property provides a reference to the actual `ProductsRow` object.</span></span>

<span data-ttu-id="b424d-177">A continuación, comprobamos la propiedad `ProductsRow` instancia s `UnitPrice`.</span><span class="sxs-lookup"><span data-stu-id="b424d-177">Next, we check the `ProductsRow` instance s `UnitPrice` property.</span></span> <span data-ttu-id="b424d-178">Dado que el campo Products Table s `UnitPrice` permite valores de `NULL`, antes de intentar tener acceso a la propiedad `UnitPrice`, debemos comprobar primero si tiene un valor de `NULL` mediante el método `IsUnitPriceNull()`.</span><span class="sxs-lookup"><span data-stu-id="b424d-178">Since the Products table s `UnitPrice` field allows `NULL` values, before attempting to access the `UnitPrice` property we should first check to see if it has a `NULL` value using the `IsUnitPriceNull()` method.</span></span> <span data-ttu-id="b424d-179">Si el valor `UnitPrice` no es `NULL`, se comprueba si es inferior a $20,00.</span><span class="sxs-lookup"><span data-stu-id="b424d-179">If the `UnitPrice` value is not `NULL`, we then check to see if it s less than $20.00.</span></span> <span data-ttu-id="b424d-180">Si es realmente inferior a $20,00, necesitamos aplicar el formato personalizado.</span><span class="sxs-lookup"><span data-stu-id="b424d-180">If it is indeed under $20.00, we then need to apply the custom formatting.</span></span>

## <a name="step-3-highlighting-the-product-s-name-and-price"></a><span data-ttu-id="b424d-181">Paso 3: resaltado del nombre y el precio del producto</span><span class="sxs-lookup"><span data-stu-id="b424d-181">Step 3: Highlighting the Product s Name and Price</span></span>

<span data-ttu-id="b424d-182">Una vez que sabemos que el precio de un producto es inferior a $20,00, todo lo que queda es resaltar su nombre y precio.</span><span class="sxs-lookup"><span data-stu-id="b424d-182">Once we know that a product s price is less than $20.00, all that remains is to highlight its name and price.</span></span> <span data-ttu-id="b424d-183">Para ello, primero debemos hacer referencia mediante programación a los controles Label en el `ItemTemplate` que muestran el nombre y el precio del producto.</span><span class="sxs-lookup"><span data-stu-id="b424d-183">To accomplish this, we must first programmatically reference the Label controls in the `ItemTemplate` that display the product s name and price.</span></span> <span data-ttu-id="b424d-184">A continuación, es necesario que muestren un fondo amarillo.</span><span class="sxs-lookup"><span data-stu-id="b424d-184">Next, we need to have them display a yellow background.</span></span> <span data-ttu-id="b424d-185">Esta información de formato se puede aplicar modificando directamente las etiquetas `BackColor` propiedades (`LabelID.BackColor = Color.Yellow`). Idealmente, sin embargo, todos los aspectos relacionados con la presentación deben expresarse mediante hojas de estilo en cascada.</span><span class="sxs-lookup"><span data-stu-id="b424d-185">This formatting information can be applied by directly modifying the Labels `BackColor` properties (`LabelID.BackColor = Color.Yellow`); ideally, though, all display-related matters should be expressed through cascading stylesheets.</span></span> <span data-ttu-id="b424d-186">De hecho, ya tenemos una hoja de estilos que proporciona el formato deseado definido en `Styles.css` - `AffordablePriceEmphasis`, que se creó y describe en el tutorial de *formato personalizado basado en datos* .</span><span class="sxs-lookup"><span data-stu-id="b424d-186">In fact, we already have a stylesheet that provides the desired formatting defined in `Styles.css` - `AffordablePriceEmphasis`, which was created and discussed in the *Custom Formatting Based Upon Data* tutorial.</span></span>

<span data-ttu-id="b424d-187">Para aplicar el formato, basta con establecer los dos controles Web de etiqueta `CssClass` propiedades en `AffordablePriceEmphasis`, tal y como se muestra en el código siguiente:</span><span class="sxs-lookup"><span data-stu-id="b424d-187">To apply the formatting, simply set the two Label Web controls `CssClass` properties to `AffordablePriceEmphasis`, as shown in the following code:</span></span>

[!code-vb[Main](formatting-the-datalist-and-repeater-based-upon-data-vb/samples/sample2.vb)]

<span data-ttu-id="b424d-188">Con el controlador de eventos `ItemDataBound` completado, vuelva a visitar la página `Formatting.aspx` en un explorador.</span><span class="sxs-lookup"><span data-stu-id="b424d-188">With the `ItemDataBound` event handler completed, revisit the `Formatting.aspx` page in a browser.</span></span> <span data-ttu-id="b424d-189">Como se muestra en la figura 2, los productos con un precio inferior a $20,00 tienen el nombre y el precio resaltados.</span><span class="sxs-lookup"><span data-stu-id="b424d-189">As Figure 2 illustrates, those products with a price under $20.00 have both their name and price highlighted.</span></span>

<span data-ttu-id="b424d-190">[![se resaltan los productos inferiores a $20,00](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image5.png)](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="b424d-190">[![Those Products Less than $20.00 are Highlighted](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image5.png)](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image4.png)</span></span>

<span data-ttu-id="b424d-191">**Figura 2**: los productos inferiores a $20,00 se resaltan ([haga clic para ver la imagen de tamaño completo](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="b424d-191">**Figure 2**: Those Products Less than $20.00 are Highlighted ([Click to view full-size image](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image6.png))</span></span>

> [!NOTE]
> <span data-ttu-id="b424d-192">Puesto que DataList se representa como una `<table>`HTML, sus instancias de `DataListItem` tienen propiedades relacionadas con el estilo que se pueden establecer para aplicar un estilo específico a todo el elemento.</span><span class="sxs-lookup"><span data-stu-id="b424d-192">Since the DataList is rendered as an HTML `<table>`, its `DataListItem` instances have style-related properties that can be set to apply a specific style to the entire item.</span></span> <span data-ttu-id="b424d-193">Por ejemplo, si quisiéramos resaltar *todo* el elemento amarillo cuando su precio fuera inferior a $20,00, podríamos haber reemplazado el código que hacía referencia a las etiquetas y establecer sus propiedades `CssClass` con la siguiente línea de código: `e.Item.CssClass = "AffordablePriceEmphasis"` (consulte la figura 3).</span><span class="sxs-lookup"><span data-stu-id="b424d-193">For example, if we wanted to highlight the *entire* item yellow when its price was less than $20.00, we could have replaced the code that referenced the Labels and set their `CssClass` properties with the following line of code: `e.Item.CssClass = "AffordablePriceEmphasis"` (see Figure 3).</span></span>

<span data-ttu-id="b424d-194">Sin embargo, los `RepeaterItem` que componen el control Repeater no ofrecen propiedades de nivel de estilo.</span><span class="sxs-lookup"><span data-stu-id="b424d-194">The `RepeaterItem` s that make up the Repeater control, however, don t offer such style-level properties.</span></span> <span data-ttu-id="b424d-195">Por lo tanto, aplicar el formato personalizado al repetidor requiere la aplicación de propiedades de estilo a los controles web dentro de las plantillas de Repeater, tal como hicimos en la figura 2.</span><span class="sxs-lookup"><span data-stu-id="b424d-195">Therefore, applying custom formatting to the Repeater requires the application of style properties to the Web controls within the Repeater s templates, just like we did in Figure 2.</span></span>

<span data-ttu-id="b424d-196">[![se resalta todo el elemento del producto para los productos en $20,00](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image8.png)](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="b424d-196">[![The Entire Product Item is Highlighted for Products Under $20.00](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image8.png)](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image7.png)</span></span>

<span data-ttu-id="b424d-197">**Figura 3**: el elemento de producto completo se resalta para los productos en $20,00 ([haga clic para ver la imagen de tamaño completo](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="b424d-197">**Figure 3**: The Entire Product Item is Highlighted for Products Under $20.00 ([Click to view full-size image](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image9.png))</span></span>

## <a name="using-formatting-functions-from-within-the-template"></a><span data-ttu-id="b424d-198">Usar funciones de formato desde dentro de la plantilla</span><span class="sxs-lookup"><span data-stu-id="b424d-198">Using Formatting Functions from Within the Template</span></span>

<span data-ttu-id="b424d-199">En el tutorial *uso de TemplateFields en el control GridView* , vimos cómo usar una función de formato en una TemplateField de GridView para aplicar formato personalizado basado en los datos enlazados a las filas de GridView.</span><span class="sxs-lookup"><span data-stu-id="b424d-199">In the *Using TemplateFields in the GridView Control* tutorial we saw how to use a formatting function within a GridView TemplateField to apply custom formatting based upon the data bound to the GridView s rows.</span></span> <span data-ttu-id="b424d-200">Una función de formato es un método que se puede invocar desde una plantilla y devuelve el código HTML que se va a emitir en su lugar.</span><span class="sxs-lookup"><span data-stu-id="b424d-200">A formatting function is a method that can be invoked from a template and returns the HTML to be emitted in its place.</span></span> <span data-ttu-id="b424d-201">Las funciones de formato pueden residir en la clase de código subyacente de la página ASP.NET o se pueden centralizar en archivos de clase en la carpeta `App_Code` o en un proyecto de biblioteca de clases independiente.</span><span class="sxs-lookup"><span data-stu-id="b424d-201">Formatting functions can reside in the ASP.NET page s code-behind class or can be centralized into class files in the `App_Code` folder or in a separate Class Library project.</span></span> <span data-ttu-id="b424d-202">Mover la función de formato fuera de la clase de código subyacente de la página ASP.NET es ideal si tiene previsto usar la misma función de formato en varias páginas ASP.NET o en otras aplicaciones Web ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="b424d-202">Moving the formatting function out of the ASP.NET page s code-behind class is ideal if you plan on using the same formatting function in multiple ASP.NET pages or in other ASP.NET web applications.</span></span>

<span data-ttu-id="b424d-203">Para demostrar las funciones de formato, permita que la información del producto incluya el texto [Discontinued] junto al nombre del producto si ya no se incluye.</span><span class="sxs-lookup"><span data-stu-id="b424d-203">To demonstrate formatting functions, let s have the product information include the text [DISCONTINUED] next to the product s name if it s discontinued.</span></span> <span data-ttu-id="b424d-204">Además, deje que el precio esté resaltado en amarillo si es menor que $20,00 (como hicimos en el ejemplo del controlador de eventos `ItemDataBound`); Si el precio es $20,00 o superior, deje que se muestre el precio real, pero en su lugar el texto, llame a para obtener una cotización de precios.</span><span class="sxs-lookup"><span data-stu-id="b424d-204">Also, let s have the price highlighted yellow if it s less than $20.00 (as we did in the `ItemDataBound` event handler example); if the price is $20.00 or higher, let s not display the actual price, but instead the text, Please call for a price quote.</span></span> <span data-ttu-id="b424d-205">En la figura 4 se muestra una captura de pantalla de la lista de productos con estas reglas de formato aplicadas.</span><span class="sxs-lookup"><span data-stu-id="b424d-205">Figure 4 shows a screen shot of the products listing with these formatting rules applied.</span></span>

<span data-ttu-id="b424d-206">[![para productos caros, el precio se sustituye por el texto, por favor, llame a para obtener una cotización de precios.](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image11.png)](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="b424d-206">[![For Expensive Products, the Price is Replaced with the Text, Please call for a price quote](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image11.png)](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image10.png)</span></span>

<span data-ttu-id="b424d-207">**Figura 4**: en el caso de los productos costosos, el precio se sustituye por el texto. llame a para obtener una comilla de precios ([haga clic para ver la imagen a tamaño completo](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="b424d-207">**Figure 4**: For Expensive Products, the Price is Replaced with the Text, Please call for a price quote ([Click to view full-size image](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image12.png))</span></span>

## <a name="step-1-create-the-formatting-functions"></a><span data-ttu-id="b424d-208">Paso 1: crear las funciones de formato</span><span class="sxs-lookup"><span data-stu-id="b424d-208">Step 1: Create the Formatting Functions</span></span>

<span data-ttu-id="b424d-209">En este ejemplo, necesitamos dos funciones de formato, una que muestra el nombre del producto junto con el texto [Discontinued], si es necesario, y otro que muestra un precio resaltado si es inferior a $20,00, o el texto, por lo que debe llamar a para obtener una comilla de precios.</span><span class="sxs-lookup"><span data-stu-id="b424d-209">For this example we need two formatting functions, one that displays the product name along with the text [DISCONTINUED], if needed, and another that displays either a highlighted price if it s less than $20.00, or the text, Please call for a price quote otherwise.</span></span> <span data-ttu-id="b424d-210">Vamos a crear estas funciones en la clase de código subyacente de la página ASP.NET y denominarlas `DisplayProductNameAndDiscontinuedStatus` y `DisplayPrice`.</span><span class="sxs-lookup"><span data-stu-id="b424d-210">Let s create these functions in the ASP.NET page s code-behind class and name them `DisplayProductNameAndDiscontinuedStatus` and `DisplayPrice`.</span></span> <span data-ttu-id="b424d-211">Ambos métodos deben devolver el código HTML que se va a representar como una cadena y ambos deben marcarse como `Protected` (o `Public`) para que se pueda invocar desde la parte de la sintaxis declarativa de la página ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="b424d-211">Both methods need to return the HTML to render as a string and both need to be marked `Protected` (or `Public`) in order to be invoked from the ASP.NET page s declarative syntax portion.</span></span> <span data-ttu-id="b424d-212">A continuación se muestra el código de estos dos métodos:</span><span class="sxs-lookup"><span data-stu-id="b424d-212">The code for these two methods follows:</span></span>

[!code-vb[Main](formatting-the-datalist-and-repeater-based-upon-data-vb/samples/sample3.vb)]

<span data-ttu-id="b424d-213">Tenga en cuenta que el método `DisplayProductNameAndDiscontinuedStatus` acepta los valores de los campos de datos `productName` y `discontinued` como valores escalares, mientras que el método `DisplayPrice` acepta una instancia de `ProductsRow` (en lugar de un valor escalar `unitPrice`).</span><span class="sxs-lookup"><span data-stu-id="b424d-213">Note that the `DisplayProductNameAndDiscontinuedStatus` method accepts the values of the `productName` and `discontinued` data fields as scalar values, whereas the `DisplayPrice` method accepts a `ProductsRow` instance (rather than a `unitPrice` scalar value).</span></span> <span data-ttu-id="b424d-214">Cualquier enfoque funcionará; sin embargo, si la función de formato está trabajando con valores escalares que pueden contener valores de `NULL` de la base de datos (como `UnitPrice`; ni `ProductName` ni `Discontinued` permitir valores `NULL`), se debe prestar especial atención a la administración de estas entradas escalares.</span><span class="sxs-lookup"><span data-stu-id="b424d-214">Either approach will work; however, if the formatting function is working with scalar values that can contain database `NULL` values (such as `UnitPrice`; neither `ProductName` nor `Discontinued` allow `NULL` values), special care must be taken in handling these scalar inputs.</span></span>

<span data-ttu-id="b424d-215">En concreto, el parámetro de entrada debe ser de tipo `Object` ya que el valor de entrada puede ser una instancia de `DBNull` en lugar del tipo de datos esperado.</span><span class="sxs-lookup"><span data-stu-id="b424d-215">In particular, the input parameter must be of type `Object` since the incoming value might be a `DBNull` instance instead of the expected data type.</span></span> <span data-ttu-id="b424d-216">Además, se debe realizar una comprobación para determinar si el valor entrante es una base de datos `NULL` valor.</span><span class="sxs-lookup"><span data-stu-id="b424d-216">Additionally, a check must be made to determine whether or not the incoming value is a database `NULL` value.</span></span> <span data-ttu-id="b424d-217">Es decir, si queremos que el método `DisplayPrice` acepte el precio como un valor escalar, es necesario usar el código siguiente:</span><span class="sxs-lookup"><span data-stu-id="b424d-217">That is, if we wanted the `DisplayPrice` method to accept the price as a scalar value, we d have to use the following code:</span></span>

[!code-vb[Main](formatting-the-datalist-and-repeater-based-upon-data-vb/samples/sample4.vb)]

<span data-ttu-id="b424d-218">Tenga en cuenta que la `unitPrice` parámetro de entrada es de tipo `Object` y que se ha modificado la instrucción condicional para determinar si `unitPrice` está `DBNull` o no.</span><span class="sxs-lookup"><span data-stu-id="b424d-218">Note that the `unitPrice` input parameter is of type `Object` and that the conditional statement has been modified to ascertain if `unitPrice` is `DBNull` or not.</span></span> <span data-ttu-id="b424d-219">Además, puesto que el `unitPrice` parámetro de entrada se pasa como `Object`, se debe convertir en un valor decimal.</span><span class="sxs-lookup"><span data-stu-id="b424d-219">Furthermore, since the `unitPrice` input parameter is passed in as an `Object`, it must be cast to a decimal value.</span></span>

## <a name="step-2-calling-the-formatting-function-from-the-datalist-s-itemtemplate"></a><span data-ttu-id="b424d-220">Paso 2: llamar a la función de formato desde el ItemTemplate de DataList</span><span class="sxs-lookup"><span data-stu-id="b424d-220">Step 2: Calling the Formatting Function from the DataList s ItemTemplate</span></span>

<span data-ttu-id="b424d-221">Una vez que se han agregado las funciones de formato a nuestra clase de código subyacente de la página ASP.NET, todo lo que queda es invocar estas funciones de formato desde el `ItemTemplate`DataList.</span><span class="sxs-lookup"><span data-stu-id="b424d-221">With the formatting functions added to our ASP.NET page s code-behind class, all that remains is to invoke these formatting functions from the DataList s `ItemTemplate`.</span></span> <span data-ttu-id="b424d-222">Para llamar a una función de formato desde una plantilla, coloque la llamada de función dentro de la sintaxis de DataBinding:</span><span class="sxs-lookup"><span data-stu-id="b424d-222">To call a formatting function from a template, place the function call within the databinding syntax:</span></span>

[!code-aspx[Main](formatting-the-datalist-and-repeater-based-upon-data-vb/samples/sample5.aspx)]

<span data-ttu-id="b424d-223">En DataList s `ItemTemplate` el control Web etiqueta de `ProductNameLabel` actualmente muestra el nombre del producto asignando su propiedad `Text` al resultado de `<%# Eval("ProductName") %>`.</span><span class="sxs-lookup"><span data-stu-id="b424d-223">In the DataList s `ItemTemplate` the `ProductNameLabel` Label Web control currently displays the product s name by assigning its `Text` property the result of `<%# Eval("ProductName") %>`.</span></span> <span data-ttu-id="b424d-224">Para que se muestre el nombre y el texto [Discontinued], si es necesario, actualice la sintaxis declarativa para que, en su lugar, asigne a la propiedad `Text` el valor del método `DisplayProductNameAndDiscontinuedStatus`.</span><span class="sxs-lookup"><span data-stu-id="b424d-224">In order to have it display the name plus the text [DISCONTINUED], if needed, update the declarative syntax so that it instead assigns the `Text` property the value of the `DisplayProductNameAndDiscontinuedStatus` method.</span></span> <span data-ttu-id="b424d-225">Al hacerlo, debemos pasar el nombre del producto y los valores descontinuos con la sintaxis de `Eval("columnName")`.</span><span class="sxs-lookup"><span data-stu-id="b424d-225">When doing so, we must pass in the product s name and discontinued values using the `Eval("columnName")` syntax.</span></span> <span data-ttu-id="b424d-226">`Eval` devuelve un valor de tipo `Object`, pero el método `DisplayProductNameAndDiscontinuedStatus` espera parámetros de entrada de tipo `String` y `Boolean`; por lo tanto, se deben convertir los valores devueltos por el método `Eval` en los tipos de parámetro de entrada esperados, por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="b424d-226">`Eval` returns a value of type `Object`, but the `DisplayProductNameAndDiscontinuedStatus` method expects input parameters of type `String` and `Boolean`; therefore, we must cast the values returned by the `Eval` method to the expected input parameter types, like so:</span></span>

[!code-aspx[Main](formatting-the-datalist-and-repeater-based-upon-data-vb/samples/sample6.aspx)]

<span data-ttu-id="b424d-227">Para mostrar el precio, podemos simplemente establecer la propiedad `UnitPriceLabel` etiqueta s `Text` en el valor devuelto por el método `DisplayPrice`, al igual que hicimos para mostrar el texto nombre del producto y [descontinuado].</span><span class="sxs-lookup"><span data-stu-id="b424d-227">To display the price, we can simply set the `UnitPriceLabel` Label s `Text` property to the value returned by the `DisplayPrice` method, just like we did for displaying the product s name and [DISCONTINUED] text.</span></span> <span data-ttu-id="b424d-228">Sin embargo, en lugar de pasar el `UnitPrice` como parámetro de entrada escalar, en su lugar pasamos toda la instancia de `ProductsRow`:</span><span class="sxs-lookup"><span data-stu-id="b424d-228">However, instead of passing in the `UnitPrice` as a scalar input parameter, we instead pass in the entire `ProductsRow` instance:</span></span>

[!code-aspx[Main](formatting-the-datalist-and-repeater-based-upon-data-vb/samples/sample7.aspx)]

<span data-ttu-id="b424d-229">Con las llamadas a las funciones de formato en su lugar, tómese un momento para ver el progreso en un explorador.</span><span class="sxs-lookup"><span data-stu-id="b424d-229">With the calls to the formatting functions in place, take a moment to view our progress in a browser.</span></span> <span data-ttu-id="b424d-230">La pantalla debe tener un aspecto similar al de la figura 5, con los productos descontinuos, incluido el texto [Discontinued] y que los productos cuesten más de $20,00 con el precio que se ha sustituido por el texto, llame a para obtener una cotización de precios.</span><span class="sxs-lookup"><span data-stu-id="b424d-230">Your screen should look similar to Figure 5, with the discontinued products including the text [DISCONTINUED] and those products costing more than $20.00 having their price replaced with the text Please call for a price quote .</span></span>

<span data-ttu-id="b424d-231">[![para productos caros, el precio se sustituye por el texto, por favor, llame a para obtener una cotización de precios.](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image14.png)](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="b424d-231">[![For Expensive Products, the Price is Replaced with the Text, Please call for a price quote](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image14.png)](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image13.png)</span></span>

<span data-ttu-id="b424d-232">**Figura 5**: para los productos costosos, el precio se sustituye por el texto, llame a para obtener una comilla de precios ([haga clic para ver la imagen de tamaño completo](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image15.png)).</span><span class="sxs-lookup"><span data-stu-id="b424d-232">**Figure 5**: For Expensive Products, the Price is Replaced with the Text, Please call for a price quote ([Click to view full-size image](formatting-the-datalist-and-repeater-based-upon-data-vb/_static/image15.png))</span></span>

## <a name="summary"></a><span data-ttu-id="b424d-233">Resumen</span><span class="sxs-lookup"><span data-stu-id="b424d-233">Summary</span></span>

<span data-ttu-id="b424d-234">El formato del contenido de un control DataList o Repeater en función de los datos se puede realizar con dos técnicas.</span><span class="sxs-lookup"><span data-stu-id="b424d-234">Formatting the contents of a DataList or Repeater control based upon the data can be accomplished using two techniques.</span></span> <span data-ttu-id="b424d-235">La primera técnica consiste en crear un controlador de eventos para el evento `ItemDataBound`, que se activa como cada registro del origen de datos se enlaza a una nueva `DataListItem` o `RepeaterItem`.</span><span class="sxs-lookup"><span data-stu-id="b424d-235">The first technique is to create an event handler for the `ItemDataBound` event, which fires as each record in the data source is bound to a new `DataListItem` or `RepeaterItem`.</span></span> <span data-ttu-id="b424d-236">En el controlador de eventos `ItemDataBound`, se pueden examinar los datos del elemento actual y, a continuación, se puede aplicar formato al contenido de la plantilla o, para `DataListItem` s, a todo el elemento.</span><span class="sxs-lookup"><span data-stu-id="b424d-236">In the `ItemDataBound` event handler, the current item s data can be examined and then formatting can be applied to the contents of the template or, for `DataListItem` s, to the entire item itself.</span></span>

<span data-ttu-id="b424d-237">Como alternativa, se puede realizar un formato personalizado a través de las funciones de formato.</span><span class="sxs-lookup"><span data-stu-id="b424d-237">Alternatively, custom formatting can be realized through formatting functions.</span></span> <span data-ttu-id="b424d-238">Una función de formato es un método que se puede invocar desde las plantillas DataList o Repeater s que devuelve el código HTML que se va a emitir en su lugar.</span><span class="sxs-lookup"><span data-stu-id="b424d-238">A formatting function is a method that can be invoked from the DataList or Repeater s templates that returns the HTML to emit in its place.</span></span> <span data-ttu-id="b424d-239">A menudo, el código HTML devuelto por una función de formato viene determinado por los valores que se enlazan al elemento actual.</span><span class="sxs-lookup"><span data-stu-id="b424d-239">Often, the HTML returned by a formatting function is determined by the values being bound to the current item.</span></span> <span data-ttu-id="b424d-240">Estos valores se pueden pasar a la función de formato, ya sea como valores escalares o pasando todo el objeto que se está enlazando al elemento (por ejemplo, la instancia de `ProductsRow`).</span><span class="sxs-lookup"><span data-stu-id="b424d-240">These values can be passed into the formatting function, either as scalar values or by passing in the entire object being bound to the item (such as the `ProductsRow` instance).</span></span>

<span data-ttu-id="b424d-241">¡ Feliz programación!</span><span class="sxs-lookup"><span data-stu-id="b424d-241">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="b424d-242">Acerca del autor</span><span class="sxs-lookup"><span data-stu-id="b424d-242">About the Author</span></span>

<span data-ttu-id="b424d-243">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor de siete libros de ASP/ASP. net y fundador de [4GuysFromRolla.com](http://www.4guysfromrolla.com), ha estado trabajando con las tecnologías Web de Microsoft desde 1998.</span><span class="sxs-lookup"><span data-stu-id="b424d-243">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="b424d-244">Scott funciona como consultor, profesor y redactor independiente.</span><span class="sxs-lookup"><span data-stu-id="b424d-244">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="b424d-245">Su último libro se [*enseña a ASP.NET 2,0 en 24 horas*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="b424d-245">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="b424d-246">Puede ponerse en contacto con usted en [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="b424d-246">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="b424d-247">o a través de su blog, que encontrará en [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="b424d-247">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="b424d-248">Agradecimiento especial a</span><span class="sxs-lookup"><span data-stu-id="b424d-248">Special Thanks To</span></span>

<span data-ttu-id="b424d-249">Muchos revisores útiles revisaron esta serie de tutoriales.</span><span class="sxs-lookup"><span data-stu-id="b424d-249">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="b424d-250">Los revisores responsables de este tutorial eran Yaakov Ellis, Randy Schmidt y Liz Shulok.</span><span class="sxs-lookup"><span data-stu-id="b424d-250">Lead reviewers for this tutorial were Yaakov Ellis, Randy Schmidt, and Liz Shulok.</span></span> <span data-ttu-id="b424d-251">¿Está interesado en revisar los próximos artículos de MSDN?</span><span class="sxs-lookup"><span data-stu-id="b424d-251">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="b424d-252">En caso afirmativo, suéltelo en [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="b424d-252">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="b424d-253">[Anterior](displaying-data-with-the-datalist-and-repeater-controls-vb.md)
> [Siguiente](showing-multiple-records-per-row-with-the-datalist-control-vb.md)</span><span class="sxs-lookup"><span data-stu-id="b424d-253">[Previous](displaying-data-with-the-datalist-and-repeater-controls-vb.md)
[Next](showing-multiple-records-per-row-with-the-datalist-control-vb.md)</span></span>
