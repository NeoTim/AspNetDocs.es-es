---
uid: web-forms/overview/data-access/editing-and-deleting-data-through-the-datalist/adding-validation-controls-to-the-datalist-s-editing-interface-cs
title: Agregar controles de validación a la interfaz de edición de DataListC#() | Microsoft Docs
author: rick-anderson
description: En este tutorial veremos lo fácil que es agregar controles de validación a la EditItemTemplate de DataList para proporcionar un usuario de edición más infalible...
ms.author: riande
ms.date: 10/30/2006
ms.assetid: 3ecc21c5-da0e-40ab-abb4-fac1e47398ad
msc.legacyurl: /web-forms/overview/data-access/editing-and-deleting-data-through-the-datalist/adding-validation-controls-to-the-datalist-s-editing-interface-cs
msc.type: authoredcontent
ms.openlocfilehash: e3c14b7098da832bd28f57026e81dcb7f7ba7130
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 03/06/2020
ms.locfileid: "78480859"
---
# <a name="adding-validation-controls-to-the-datalists-editing-interface-c"></a><span data-ttu-id="9dc6c-103">Agregar controles de validación a la interfaz de edición de DataList (C#)</span><span class="sxs-lookup"><span data-stu-id="9dc6c-103">Adding Validation Controls to the DataList's Editing Interface (C#)</span></span>

<span data-ttu-id="9dc6c-104">por [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="9dc6c-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="9dc6c-105">[Descarga](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_39_CS.exe) de la aplicación de ejemplo o [descarga de PDF](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/datatutorial39cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="9dc6c-105">[Download Sample App](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_39_CS.exe) or [Download PDF](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/datatutorial39cs1.pdf)</span></span>

> <span data-ttu-id="9dc6c-106">En este tutorial veremos lo fácil que es agregar controles de validación a la EditItemTemplate de DataList para proporcionar una interfaz de usuario de edición más infalible.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-106">In this tutorial we'll see how easy it is to add validation controls to the DataList's EditItemTemplate in order to provide a more foolproof editing user interface.</span></span>

## <a name="introduction"></a><span data-ttu-id="9dc6c-107">Introducción</span><span class="sxs-lookup"><span data-stu-id="9dc6c-107">Introduction</span></span>

<span data-ttu-id="9dc6c-108">Hasta ahora en los tutoriales de edición de DataList, las interfaces de edición de los datos de edición no han incluido ninguna validación de entradas de usuario proactiva, aunque la entrada de usuario no válida, como un nombre de producto o un precio negativo, produce una excepción.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-108">In the DataList editing tutorials thus far, the DataLists editing interfaces have not included any proactive user input validation even though invalid user input such as a missing product name or negative price results in an exception.</span></span> <span data-ttu-id="9dc6c-109">En el [tutorial anterior](handling-bll-and-dal-level-exceptions-cs.md) , hemos examinado cómo agregar código de control de excepciones al controlador de eventos `UpdateCommand` de DataList para detectar y mostrar correctamente la información sobre las excepciones que se generaron.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-109">In the [preceding tutorial](handling-bll-and-dal-level-exceptions-cs.md) we examined how to add exception handling code to the DataList s `UpdateCommand` event handler in order to catch and gracefully display information about any exceptions that were raised.</span></span> <span data-ttu-id="9dc6c-110">Sin embargo, lo ideal es que la interfaz de edición incluya controles de validación para evitar que un usuario escriba tales datos no válidos en primer lugar.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-110">Ideally, however, the editing interface would include validation controls to prevent a user from entering such invalid data in the first place.</span></span>

<span data-ttu-id="9dc6c-111">En este tutorial veremos lo fácil que es agregar controles de validación a la `EditItemTemplate` DataList s para proporcionar una interfaz de usuario de edición más infalible.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-111">In this tutorial we'll see how easy it is to add validation controls to the DataList s `EditItemTemplate` in order to provide a more foolproof editing user interface.</span></span> <span data-ttu-id="9dc6c-112">En concreto, este tutorial toma el ejemplo creado en el tutorial anterior y aumenta la interfaz de edición para incluir la validación adecuada.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-112">Specifically, this tutorial takes the example created in the preceding tutorial and augments the editing interface to include appropriate validation.</span></span>

## <a name="step-1-replicating-the-example-fromhandling-bll--and-dal-level-exceptions"></a><span data-ttu-id="9dc6c-113">Paso 1: replicar el ejemplo desde el control de las[excepciones de nivel BLL y Dal](handling-bll-and-dal-level-exceptions-cs.md)</span><span class="sxs-lookup"><span data-stu-id="9dc6c-113">Step 1: Replicating the Example from[Handling BLL- and DAL-Level Exceptions](handling-bll-and-dal-level-exceptions-cs.md)</span></span>

<span data-ttu-id="9dc6c-114">En el tutorial [control de excepciones de nivel BLL y Dal](handling-bll-and-dal-level-exceptions-cs.md) , hemos creado una página que enumera los nombres y los precios de los productos de una lista de controles de dos columnas y editables.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-114">In the [Handling BLL- and DAL-Level Exceptions](handling-bll-and-dal-level-exceptions-cs.md) tutorial we created a page that listed the names and prices of the products in a two-column, editable DataList.</span></span> <span data-ttu-id="9dc6c-115">Nuestro objetivo de este tutorial es aumentar la interfaz de edición de DataList para incluir controles de validación.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-115">Our goal for this tutorial is to augment the DataList s editing interface to include validation controls.</span></span> <span data-ttu-id="9dc6c-116">En concreto, nuestra lógica de validación hará lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="9dc6c-116">In particular, our validation logic will:</span></span>

- <span data-ttu-id="9dc6c-117">Requerir que se proporcione el nombre del producto</span><span class="sxs-lookup"><span data-stu-id="9dc6c-117">Require that the product s name be provided</span></span>
- <span data-ttu-id="9dc6c-118">Asegúrese de que el valor especificado para el precio sea un formato de moneda válido</span><span class="sxs-lookup"><span data-stu-id="9dc6c-118">Ensure that the value entered for the price is a valid currency format</span></span>
- <span data-ttu-id="9dc6c-119">Asegúrese de que el valor especificado para el precio sea mayor o igual que cero, ya que un valor de `UnitPrice` negativo no es válido.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-119">Ensure that the value entered for the price is greater than or equal to zero, since a negative `UnitPrice` value is illegal</span></span>

<span data-ttu-id="9dc6c-120">Antes de que podamos ver el aumento del ejemplo anterior para incluir la validación, primero es necesario replicar el ejemplo de la página `ErrorHandling.aspx` de la carpeta `EditDeleteDataList` en la página de este tutorial, `UIValidation.aspx`.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-120">Before we can look at augmenting the previous example to include validation, we first need to replicate the example from the `ErrorHandling.aspx` page in the `EditDeleteDataList` folder to the page for this tutorial, `UIValidation.aspx`.</span></span> <span data-ttu-id="9dc6c-121">Para lograr esto, es necesario copiar tanto el marcado declarativo de la página `ErrorHandling.aspx` como su código fuente.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-121">To achieve this we need to copy over both the `ErrorHandling.aspx` page s declarative markup and its source code.</span></span> <span data-ttu-id="9dc6c-122">En primer lugar, copie el marcado declarativo realizando los pasos siguientes:</span><span class="sxs-lookup"><span data-stu-id="9dc6c-122">First copy over the declarative markup by performing the following steps:</span></span>

1. <span data-ttu-id="9dc6c-123">Abrir la página de `ErrorHandling.aspx` en Visual Studio</span><span class="sxs-lookup"><span data-stu-id="9dc6c-123">Open the `ErrorHandling.aspx` page in Visual Studio</span></span>
2. <span data-ttu-id="9dc6c-124">Vaya al marcado declarativo de la página s (haga clic en el botón origen en la parte inferior de la página).</span><span class="sxs-lookup"><span data-stu-id="9dc6c-124">Go to the page s declarative markup (click on the Source button at the bottom of the page)</span></span>
3. <span data-ttu-id="9dc6c-125">Copie el texto dentro de las etiquetas `<asp:Content>` y `</asp:Content>` (líneas 3 a 32), como se muestra en la figura 1.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-125">Copy the text within the `<asp:Content>` and `</asp:Content>` tags (lines 3 through 32), as shown in Figure 1.</span></span>

<span data-ttu-id="9dc6c-126">[![copiar el texto del control &lt;ASP: Content&gt;](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image2.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="9dc6c-126">[![Copy the Text Within the &lt;asp:Content&gt; Control](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image2.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image1.png)</span></span>

<span data-ttu-id="9dc6c-127">**Figura 1**: copiar el texto del control `<asp:Content>` ([haga clic para ver la imagen de tamaño completo](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="9dc6c-127">**Figure 1**: Copy the Text Within the `<asp:Content>` Control ([Click to view full-size image](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image3.png))</span></span>

1. <span data-ttu-id="9dc6c-128">Abrir la página `UIValidation.aspx`</span><span class="sxs-lookup"><span data-stu-id="9dc6c-128">Open the `UIValidation.aspx` page</span></span>
2. <span data-ttu-id="9dc6c-129">Ir al marcado declarativo de la página</span><span class="sxs-lookup"><span data-stu-id="9dc6c-129">Go to the page s declarative markup</span></span>
3. <span data-ttu-id="9dc6c-130">Pegue el texto dentro del control `<asp:Content>`.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-130">Paste the text within the `<asp:Content>` control.</span></span>

<span data-ttu-id="9dc6c-131">Para copiar sobre el código fuente, abra la página `ErrorHandling.aspx.vb` y copie solo el texto *dentro* de la clase `EditDeleteDataList_ErrorHandling`.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-131">To copy over the source code, open the `ErrorHandling.aspx.vb` page and copy just the text *within* the `EditDeleteDataList_ErrorHandling` class.</span></span> <span data-ttu-id="9dc6c-132">Copie los tres controladores de eventos (`Products_EditCommand`, `Products_CancelCommand`y `Products_UpdateCommand`) junto con el método de `DisplayExceptionDetails`, pero **no** Copie las instrucciones de declaración de clase o `using`.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-132">Copy the three event handlers (`Products_EditCommand`, `Products_CancelCommand`, and `Products_UpdateCommand`) along with the `DisplayExceptionDetails` method, but do **not** copy the class declaration or `using` statements.</span></span> <span data-ttu-id="9dc6c-133">Pegue el texto copiado *dentro* de la clase `EditDeleteDataList_UIValidation` en `UIValidation.aspx.vb`.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-133">Paste the copied text *within* the `EditDeleteDataList_UIValidation` class in `UIValidation.aspx.vb`.</span></span>

<span data-ttu-id="9dc6c-134">Después de desplazarse por el contenido y el código de `ErrorHandling.aspx` a `UIValidation.aspx`, dedique un momento a probar las páginas en un explorador.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-134">After moving over the content and code from `ErrorHandling.aspx` to `UIValidation.aspx`, take a moment to test out the pages in a browser.</span></span> <span data-ttu-id="9dc6c-135">Debería ver la misma salida y experimentar la misma funcionalidad en cada una de estas dos páginas (consulte la figura 2).</span><span class="sxs-lookup"><span data-stu-id="9dc6c-135">You should see the same output and experience the same functionality in each of these two pages (see Figure 2).</span></span>

<span data-ttu-id="9dc6c-136">[![la página UIValidation. aspx imita la funcionalidad de ErrorHandling. aspx](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image5.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="9dc6c-136">[![The UIValidation.aspx Page Mimics the Functionality in ErrorHandling.aspx](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image5.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image4.png)</span></span>

<span data-ttu-id="9dc6c-137">**Figura 2**: la página `UIValidation.aspx` imita la funcionalidad de `ErrorHandling.aspx` ([haga clic para ver la imagen de tamaño completo](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="9dc6c-137">**Figure 2**: The `UIValidation.aspx` Page Mimics the Functionality in `ErrorHandling.aspx` ([Click to view full-size image](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image6.png))</span></span>

## <a name="step-2-adding-the-validation-controls-to-the-datalist-s-edititemtemplate"></a><span data-ttu-id="9dc6c-138">Paso 2: agregar los controles de validación a la EditItemTemplate de DataList s</span><span class="sxs-lookup"><span data-stu-id="9dc6c-138">Step 2: Adding the Validation Controls to the DataList s EditItemTemplate</span></span>

<span data-ttu-id="9dc6c-139">Al construir formularios de entrada de datos, es importante que los usuarios escriban los campos obligatorios y que todas las entradas proporcionadas tengan valores con el formato correcto.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-139">When constructing data entry forms, it is important that users enter any required fields and that all their provided inputs are legal, properly-formatted values.</span></span> <span data-ttu-id="9dc6c-140">Para ayudar a garantizar que las entradas de un usuario son válidas, ASP.NET proporciona cinco controles de validación integrados que están diseñados para validar el valor de un solo control Web de entrada:</span><span class="sxs-lookup"><span data-stu-id="9dc6c-140">To help ensure that a user s inputs are valid, ASP.NET provides five built-in validation controls that are designed to validate the value of a single input Web control:</span></span>

- <span data-ttu-id="9dc6c-141">[RequiredFieldValidator](https://msdn.microsoft.com/library/5hbw267h(VS.80).aspx) garantiza que se ha proporcionado un valor</span><span class="sxs-lookup"><span data-stu-id="9dc6c-141">[RequiredFieldValidator](https://msdn.microsoft.com/library/5hbw267h(VS.80).aspx) ensures that a value has been provided</span></span>
- <span data-ttu-id="9dc6c-142">[CompareValidator](https://msdn.microsoft.com/library/db330ayw(VS.80).aspx) valida un valor con respecto a otro valor de control Web o un valor constante, o garantiza que el formato del valor s es válido para un tipo de datos especificado.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-142">[CompareValidator](https://msdn.microsoft.com/library/db330ayw(VS.80).aspx) validates a value against another Web control value or a constant value, or ensures that the value s format is legal for a specified data type</span></span>
- <span data-ttu-id="9dc6c-143">[RangeValidator](https://msdn.microsoft.com/library/f70d09xt.aspx) garantiza que un valor está dentro de un intervalo de valores</span><span class="sxs-lookup"><span data-stu-id="9dc6c-143">[RangeValidator](https://msdn.microsoft.com/library/f70d09xt.aspx) ensures that a value is within a range of values</span></span>
- <span data-ttu-id="9dc6c-144">[RegularExpressionValidator](https://msdn.microsoft.com/library/eahwtc9e.aspx) valida un valor con respecto a una [expresión regular](http://en.wikipedia.org/wiki/Regular_expression)</span><span class="sxs-lookup"><span data-stu-id="9dc6c-144">[RegularExpressionValidator](https://msdn.microsoft.com/library/eahwtc9e.aspx) validates a value against a [regular expression](http://en.wikipedia.org/wiki/Regular_expression)</span></span>
- <span data-ttu-id="9dc6c-145">[CustomValidator](https://msdn.microsoft.com/library/9eee01cx(VS.80).aspx) valida un valor con un método personalizado definido por el usuario</span><span class="sxs-lookup"><span data-stu-id="9dc6c-145">[CustomValidator](https://msdn.microsoft.com/library/9eee01cx(VS.80).aspx) validates a value against a custom, user-defined method</span></span>

<span data-ttu-id="9dc6c-146">Para obtener más información sobre estos cinco controles, vuelva a consultar el tutorial [adición de controles de validación a la edición e inserción de interfaces](../editing-inserting-and-deleting-data/adding-validation-controls-to-the-editing-and-inserting-interfaces-cs.md) o consulte la [sección controles de validación](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/ctrlref/validation/default.aspx) de los [tutoriales de inicio rápido de ASP.net](https://quickstarts.asp.net).</span><span class="sxs-lookup"><span data-stu-id="9dc6c-146">For more information on these five controls refer back to the [Adding Validation Controls to the Editing and Inserting Interfaces](../editing-inserting-and-deleting-data/adding-validation-controls-to-the-editing-and-inserting-interfaces-cs.md) tutorial or check out the [Validation Controls section](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/ctrlref/validation/default.aspx) of the [ASP.NET Quickstart Tutorials](https://quickstarts.asp.net).</span></span>

<span data-ttu-id="9dc6c-147">En nuestro tutorial, tendremos que usar un RequiredFieldValidator para asegurarse de que se ha proporcionado un valor para el nombre del producto y un CompareValidator para asegurarse de que el precio especificado tiene un valor mayor o igual que 0 y se presenta en un formato de moneda válido.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-147">For our tutorial we'll need to use a RequiredFieldValidator to ensure that a value for the product name has been supplied and a CompareValidator to ensure that the entered price has a value greater than or equal to 0 and is presented in a valid currency format.</span></span>

> [!NOTE]
> <span data-ttu-id="9dc6c-148">Mientras que ASP.NET 1. x tenía estos cinco mismos controles de validación, ASP.NET 2,0 ha agregado varias mejoras, las dos principales compatibilidades con scripts de cliente para exploradores, además de Internet Explorer y la capacidad de crear particiones de controles de validación en una página en grupos de validación.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-148">While ASP.NET 1.x had these same five validation controls, ASP.NET 2.0 has added a number of improvements, the main two being client-side script support for browsers in addition to Internet Explorer and the ability to partition validation controls on a page into validation groups.</span></span> <span data-ttu-id="9dc6c-149">Para obtener más información sobre las nuevas características de control de validación en 2,0, consulte [dessección de los controles de validación en ASP.NET 2,0](http://aspnet.4guysfromrolla.com/articles/112305-1.aspx).</span><span class="sxs-lookup"><span data-stu-id="9dc6c-149">For more information on the new validation control features in 2.0, refer to [Dissecting the Validation Controls in ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/112305-1.aspx).</span></span>

<span data-ttu-id="9dc6c-150">Permita que s Comience agregando los controles de validación necesarios al `EditItemTemplate`de DataList.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-150">Let s start by adding the necessary validation controls to the DataList s `EditItemTemplate`.</span></span> <span data-ttu-id="9dc6c-151">Esta tarea se puede realizar a través del diseñador haciendo clic en el vínculo editar plantillas de la etiqueta inteligente de DataList s o a través de la sintaxis declarativa.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-151">This task can be performed through the Designer by clicking on the Edit Templates link from the DataList s smart tag, or through the declarative syntax.</span></span> <span data-ttu-id="9dc6c-152">Deje pasar por el proceso mediante la opción editar plantillas del Vista de diseño.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-152">Let s step through the process using the Edit Templates option from the Design view.</span></span> <span data-ttu-id="9dc6c-153">Después de elegir editar el `EditItemTemplate`de DataList, agregue un RequiredFieldValidator arrastrándolo desde el cuadro de herramientas a la interfaz de edición de plantillas, colocándolo después del cuadro de texto `ProductName`.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-153">After choosing to edit the DataList s `EditItemTemplate`, add a RequiredFieldValidator by dragging it from the Toolbox into the template editing interface, placing it after the `ProductName` TextBox.</span></span>

<span data-ttu-id="9dc6c-154">[![agregar un RequiredFieldValidator a EditItemTemplate después del cuadro de texto ProductName](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image8.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="9dc6c-154">[![Add a RequiredFieldValidator to the EditItemTemplate After the ProductName TextBox](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image8.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image7.png)</span></span>

<span data-ttu-id="9dc6c-155">**Figura 3**: agregar un RequiredFieldValidator al `EditItemTemplate After` el cuadro de texto `ProductName` ([haga clic para ver la imagen de tamaño completo](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="9dc6c-155">**Figure 3**: Add a RequiredFieldValidator to the `EditItemTemplate After` the `ProductName` TextBox ([Click to view full-size image](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image9.png))</span></span>

<span data-ttu-id="9dc6c-156">Todos los controles de validación funcionan validando la entrada de un único control Web ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-156">All validation controls work by validating the input of a single ASP.NET Web control.</span></span> <span data-ttu-id="9dc6c-157">Por lo tanto, es necesario indicar que el RequiredFieldValidator que se acaba de agregar debe validarse en el cuadro de texto `ProductName`; Esto se hace estableciendo la propiedad control de validación s [`ControlToValidate`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.controltovalidate(VS.80).aspx) en el `ID` del control Web adecuado (`ProductName`, en esta instancia).</span><span class="sxs-lookup"><span data-stu-id="9dc6c-157">Therefore, we need to indicate that the RequiredFieldValidator we just added should validate against the `ProductName` TextBox; this is done by setting the validation control s [`ControlToValidate` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.controltovalidate(VS.80).aspx) to the `ID` of the appropriate Web control (`ProductName`, in this instance).</span></span> <span data-ttu-id="9dc6c-158">A continuación, establezca la [propiedad`ErrorMessage`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.errormessage(VS.80).aspx) en debe proporcionar el nombre del producto y la [propiedad`Text`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.text(VS.80).aspx) a \*.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-158">Next, set the [`ErrorMessage` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.errormessage(VS.80).aspx) to You must provide the product s name and the [`Text` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.text(VS.80).aspx) to \*.</span></span> <span data-ttu-id="9dc6c-159">El valor de la propiedad `Text`, si se proporciona, es el texto que muestra el control de validación si se produce un error en la validación.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-159">The `Text` property value, if provided, is the text that is displayed by the validation control if the validation fails.</span></span> <span data-ttu-id="9dc6c-160">El control ValidationSummary usa el valor de la propiedad `ErrorMessage`, que es necesario. Si se omite el valor de la propiedad `Text`, el control de validación muestra el valor de la propiedad `ErrorMessage` en una entrada no válida.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-160">The `ErrorMessage` property value, which is required, is used by the ValidationSummary control; if the `Text` property value is omitted, the `ErrorMessage` property value is displayed by the validation control on invalid input.</span></span>

<span data-ttu-id="9dc6c-161">Después de establecer estas tres propiedades del RequiredFieldValidator, la pantalla debe tener un aspecto similar al de la figura 4.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-161">After setting these three properties of the RequiredFieldValidator, your screen should look similar to Figure 4.</span></span>

<span data-ttu-id="9dc6c-162">[![establecer las propiedades ControlToValidate, ErrorMessage y Text de RequiredFieldValidator s](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image11.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="9dc6c-162">[![Set the RequiredFieldValidator s ControlToValidate, ErrorMessage, and Text Properties](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image11.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image10.png)</span></span>

<span data-ttu-id="9dc6c-163">**Figura 4**: establecimiento de las propiedades RequiredFieldValidator s `ControlToValidate`, `ErrorMessage`y `Text` ([haga clic para ver la imagen a tamaño completo](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="9dc6c-163">**Figure 4**: Set the RequiredFieldValidator s `ControlToValidate`, `ErrorMessage`, and `Text` Properties ([Click to view full-size image](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image12.png))</span></span>

<span data-ttu-id="9dc6c-164">Con el RequiredFieldValidator agregado al `EditItemTemplate`, todo lo que queda es agregar la validación necesaria para el cuadro de texto Product s Price.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-164">With the RequiredFieldValidator added to the `EditItemTemplate`, all that remains is to add the necessary validation for the product s price TextBox.</span></span> <span data-ttu-id="9dc6c-165">Como el `UnitPrice` es opcional al editar un registro, no es necesario agregar un RequiredFieldValidator.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-165">Since the `UnitPrice` is optional when editing a record, we don t need to add a RequiredFieldValidator.</span></span> <span data-ttu-id="9dc6c-166">Sin embargo, es necesario agregar un CompareValidator para asegurarse de que el `UnitPrice`, si se proporciona, tiene el formato correcto como moneda y es mayor o igual que 0.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-166">We do, however, need to add a CompareValidator to ensure that the `UnitPrice`, if supplied, is properly formatted as a currency and is greater than or equal to 0.</span></span>

<span data-ttu-id="9dc6c-167">Agregue el método CompareValidator en el `EditItemTemplate` y establezca su propiedad `ControlToValidate` en `UnitPrice`, su propiedad `ErrorMessage` al precio debe ser mayor o igual que cero y no puede incluir el símbolo de divisa y su propiedad `Text` en \*.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-167">Add the CompareValidator into the `EditItemTemplate` and set its `ControlToValidate` property to `UnitPrice`, its `ErrorMessage` property to The price must be greater than or equal to zero and cannot include the currency symbol, and its `Text` property to \*.</span></span> <span data-ttu-id="9dc6c-168">Para indicar que el valor de `UnitPrice` debe ser mayor o igual que 0, establezca la propiedad CompareValidator s [`Operator`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.operator(VS.80).aspx) en `GreaterThanEqual`, su [propiedad`ValueToCompare`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.valuetocompare(VS.80).aspx) en 0 y su [propiedad`Type`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basecomparevalidator.type.aspx) en `Currency`.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-168">To indicate that the `UnitPrice` value must be greater than or equal to 0, set the CompareValidator s [`Operator` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.operator(VS.80).aspx) to `GreaterThanEqual`, its [`ValueToCompare` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.valuetocompare(VS.80).aspx) to 0, and its [`Type` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basecomparevalidator.type.aspx) to `Currency`.</span></span>

<span data-ttu-id="9dc6c-169">Después de agregar estos dos controles de validación, la sintaxis declarativa de DataList s `EditItemTemplate` s debe ser similar a la siguiente:</span><span class="sxs-lookup"><span data-stu-id="9dc6c-169">After adding these two validation controls, the DataList s `EditItemTemplate` s declarative syntax should look similar to the following:</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-datalist-s-editing-interface-cs/samples/sample1.aspx)]

<span data-ttu-id="9dc6c-170">Después de realizar estos cambios, abra la página en un explorador.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-170">After making these changes, open the page in a browser.</span></span> <span data-ttu-id="9dc6c-171">Si intenta omitir el nombre o escribir un valor de precio no válido al editar un producto, aparecerá un asterisco junto al cuadro de texto.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-171">If you attempt to omit the name or enter an invalid price value when editing a product, an asterisk appears next to the textbox.</span></span> <span data-ttu-id="9dc6c-172">Como se muestra en la figura 5, un valor de precio que incluye el símbolo de moneda como $19,95 se considera no válido.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-172">As Figure 5 shows, a price value that includes the currency symbol such as $19.95 is considered invalid.</span></span> <span data-ttu-id="9dc6c-173">El `Type` CompareValidator s `Currency` permite separadores de dígitos (como comas o puntos, según la configuración de la referencia cultural) y un signo más o menos inicial, pero *no* permite un símbolo de moneda.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-173">The CompareValidator s `Currency` `Type` allows for digit separators (such as commas or periods, depending on the culture settings) and a leading plus or minus sign, but does *not* permit a currency symbol.</span></span> <span data-ttu-id="9dc6c-174">Este comportamiento puede perplex a los usuarios, ya que la interfaz de edición representa actualmente el `UnitPrice` con el formato de moneda.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-174">This behavior may perplex users as the editing interface currently renders the `UnitPrice` using the currency format.</span></span>

<span data-ttu-id="9dc6c-175">[![aparece un asterisco junto a los cuadros de texto con una entrada no válida](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image14.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="9dc6c-175">[![An Asterisk Appears Next to the Textboxes with Invalid Input](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image14.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image13.png)</span></span>

<span data-ttu-id="9dc6c-176">**Figura 5**: aparece un asterisco junto a los cuadros de texto con una entrada no válida ([haga clic para ver la imagen de tamaño completo](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="9dc6c-176">**Figure 5**: An Asterisk Appears Next to the Textboxes with Invalid Input ([Click to view full-size image](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image15.png))</span></span>

<span data-ttu-id="9dc6c-177">Aunque la validación funciona tal cual, el usuario tiene que quitar manualmente el símbolo de moneda al editar un registro, lo que no es aceptable.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-177">While the validation works as-is, the user has to manually remove the currency symbol when editing a record, which is not acceptable.</span></span> <span data-ttu-id="9dc6c-178">Además, si hay entradas no válidas en la interfaz de edición ni los botones actualizar ni cancelar, cuando se hace clic, invocarán un postback.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-178">Moreover, if there are invalid inputs in the editing interface neither the Update nor Cancel buttons, when clicked, will invoke a postback.</span></span> <span data-ttu-id="9dc6c-179">Lo ideal es que el botón Cancelar devuelva la lista de objetos a su estado de edición previa, independientemente de la validez de las entradas del usuario.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-179">Ideally, the Cancel button would return the DataList to its pre-editing state regardless of the validity of the user s inputs.</span></span> <span data-ttu-id="9dc6c-180">Además, es necesario asegurarse de que los datos de la página son válidos antes de actualizar la información del producto en el controlador de eventos de DataList s `UpdateCommand`, ya que los usuarios cuyos exploradores no admiten JavaScript o deshabilitan su compatibilidad pueden omitir la lógica del lado cliente.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-180">Also, we need to ensure that the page s data is valid before updating the product information in the DataList s `UpdateCommand` event handler, as the validation controls client-side logic can be bypassed by users whose browsers either don t support JavaScript or have its support disabled.</span></span>

## <a name="removing-the-currency-symbol-from-the-edititemtemplate-s-unitprice-textbox"></a><span data-ttu-id="9dc6c-181">Quitar el símbolo de divisa del cuadro de texto EditItemTemplate s UnitPrice</span><span class="sxs-lookup"><span data-stu-id="9dc6c-181">Removing the Currency Symbol from the EditItemTemplate s UnitPrice TextBox</span></span>

<span data-ttu-id="9dc6c-182">Cuando se usa el `Currency``Type`CompareValidator s, la entrada que se está validando no debe incluir ningún símbolo de moneda.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-182">When using the CompareValidator s `Currency``Type`, the input being validated must not include any currency symbols.</span></span> <span data-ttu-id="9dc6c-183">La presencia de estos símbolos hace que CompareValidator Marque la entrada como no válida.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-183">The presence of such symbols causes the CompareValidator to mark the input as invalid.</span></span> <span data-ttu-id="9dc6c-184">Sin embargo, nuestra interfaz de edición incluye actualmente un símbolo de moneda en el cuadro de texto `UnitPrice`, lo que significa que el usuario debe quitar explícitamente el símbolo de moneda antes de guardar los cambios.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-184">However, our editing interface currently includes a currency symbol in the `UnitPrice` TextBox, meaning the user must explicitly remove the currency symbol before saving their changes.</span></span> <span data-ttu-id="9dc6c-185">Para solucionar este comportamiento tenemos tres opciones:</span><span class="sxs-lookup"><span data-stu-id="9dc6c-185">To remedy this we have three options:</span></span>

1. <span data-ttu-id="9dc6c-186">Configure el `EditItemTemplate` para que el valor del cuadro de texto `UnitPrice` no tenga el formato de moneda.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-186">Configure the `EditItemTemplate` so that the `UnitPrice` TextBox value is not formatted as a currency.</span></span>
2. <span data-ttu-id="9dc6c-187">Permita que el usuario escriba un símbolo de divisa quitando el control CompareValidator y reemplazándolo por un RegularExpressionValidator que compruebe si hay un valor de moneda con el formato correcto.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-187">Allow the user to enter a currency symbol by removing the CompareValidator and replacing it with a RegularExpressionValidator that checks for a properly formatted currency value.</span></span> <span data-ttu-id="9dc6c-188">El desafío aquí es que la expresión regular para validar un valor de moneda no es tan sencilla como el CompareValidator y requeriría escribir código si deseáramos incorporar la configuración de referencia cultural.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-188">The challenge here is that the regular expression to validate a currency value is not as straightforward as the CompareValidator and would require writing code if we wanted to incorporate culture settings.</span></span>
3. <span data-ttu-id="9dc6c-189">Quite completamente el control de validación y confíe en la lógica de validación del lado servidor personalizada en el controlador de eventos `RowUpdating` de GridView.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-189">Remove the validation control altogether and rely on custom server-side validation logic in the GridView s `RowUpdating` event handler.</span></span>

<span data-ttu-id="9dc6c-190">Vamos a usar la opción 1 para este tutorial.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-190">Let s go with option 1 for this tutorial.</span></span> <span data-ttu-id="9dc6c-191">Actualmente, el `UnitPrice` tiene el formato de valor de moneda debido a la expresión de enlace de enlaces para el cuadro de texto en el `EditItemTemplate`: `<%# Eval("UnitPrice", "{0:c}") %>`.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-191">Currently the `UnitPrice` is formatted as a currency value due to the databinding expression for the TextBox in the `EditItemTemplate`: `<%# Eval("UnitPrice", "{0:c}") %>`.</span></span> <span data-ttu-id="9dc6c-192">Cambie la instrucción `Eval` a `Eval("UnitPrice", "{0:n2}")`, que da formato al resultado como un número con dos dígitos de precisión.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-192">Change the `Eval` statement to `Eval("UnitPrice", "{0:n2}")`, which formats the result as a number with two digits of precision.</span></span> <span data-ttu-id="9dc6c-193">Esto se puede hacer directamente a través de la sintaxis declarativa o haciendo clic en el vínculo editar DataBindings del cuadro de texto `UnitPrice` del `EditItemTemplate`DataList s.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-193">This can be done directly through the declarative syntax or by clicking on the Edit DataBindings link from the `UnitPrice` TextBox in the DataList s `EditItemTemplate`.</span></span>

<span data-ttu-id="9dc6c-194">Con este cambio, el precio con formato en la interfaz de edición incluye comas como separador de grupos y un punto como separador decimal, pero sale del símbolo de moneda.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-194">With this change, the formatted price in the editing interface includes commas as the group separator and a period as the decimal separator, but leaves off the currency symbol.</span></span>

> [!NOTE]
> <span data-ttu-id="9dc6c-195">Al quitar el formato de moneda de la interfaz editable, me resulta útil colocar el símbolo de divisa como texto fuera del cuadro de texto.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-195">When removing the currency format from the editable interface, I find it helpful to put the currency symbol as text outside the TextBox.</span></span> <span data-ttu-id="9dc6c-196">Esto sirve como sugerencia al usuario de que no es necesario proporcionar el símbolo de moneda.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-196">This serves as a hint to the user that they do not need to provide the currency symbol.</span></span>

## <a name="fixing-the-cancel-button"></a><span data-ttu-id="9dc6c-197">Corregir el botón Cancelar</span><span class="sxs-lookup"><span data-stu-id="9dc6c-197">Fixing the Cancel Button</span></span>

<span data-ttu-id="9dc6c-198">De forma predeterminada, los controles Web de validación emiten JavaScript para realizar la validación en el lado cliente.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-198">By default, the validation Web controls emit JavaScript to perform validation on the client-side.</span></span> <span data-ttu-id="9dc6c-199">Cuando se hace clic en un botón, LinkButton o ImageButton, los controles de validación de la página se comprueban en el lado cliente antes de que se produzca el PostBack.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-199">When a Button, LinkButton, or ImageButton is clicked, the validation controls on the page are checked on the client-side before the postback occurs.</span></span> <span data-ttu-id="9dc6c-200">Si hay datos no válidos, se cancela el PostBack.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-200">If there is any invalid data, the postback is cancelled.</span></span> <span data-ttu-id="9dc6c-201">Sin embargo, para determinados botones, la validez de los datos puede ser inmaterial; en tal caso, el hecho de que se cancele el PostBack debido a datos no válidos es una molestia.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-201">For certain Buttons, though, the validity of the data might be immaterial; in such a case, having the postback cancelled due to invalid data is a nuisance.</span></span>

<span data-ttu-id="9dc6c-202">El botón Cancelar es un ejemplo de este tipo.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-202">The Cancel button is such an example.</span></span> <span data-ttu-id="9dc6c-203">Imagine que un usuario escribe datos no válidos, como por ejemplo, si se omite el nombre del producto y, a continuación, decide que no quiere guardar el producto después de todos y llega al botón Cancelar.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-203">Imagine that a user enters invalid data, such as omitting the product s name, and then decides she doesn t want to save the product after all and hits the Cancel button.</span></span> <span data-ttu-id="9dc6c-204">Actualmente, el botón Cancelar desencadena los controles de validación en la página, lo que informa de que falta el nombre del producto y evita el PostBack.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-204">Currently, the Cancel button triggers the validation controls on the page, which report that the product name is missing and prevent the postback.</span></span> <span data-ttu-id="9dc6c-205">El usuario tiene que escribir texto en el cuadro de texto `ProductName` solo para cancelar el proceso de edición.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-205">Our user has to type some text into the `ProductName` TextBox just to cancel out of the editing process.</span></span>

<span data-ttu-id="9dc6c-206">Afortunadamente, el botón, el LinkButton y el ImageButton tienen una [propiedad`CausesValidation`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.button.causesvalidation.aspx) que puede indicar si al hacer clic en el botón debe iniciarse la lógica de validación (el valor predeterminado es `True`).</span><span class="sxs-lookup"><span data-stu-id="9dc6c-206">Fortunately, the Button, LinkButton, and ImageButton have a [`CausesValidation` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.button.causesvalidation.aspx) that can indicate whether or not clicking the Button should initiate the validation logic (defaults to `True`).</span></span> <span data-ttu-id="9dc6c-207">Establezca la propiedad botón Cancelar `CausesValidation` en `False`.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-207">Set the Cancel Button s `CausesValidation` property to `False`.</span></span>

## <a name="ensuring-the-inputs-are-valid-in-the-updatecommand-event-handler"></a><span data-ttu-id="9dc6c-208">Asegurarse de que las entradas son válidas en el controlador de eventos UpdateCommand</span><span class="sxs-lookup"><span data-stu-id="9dc6c-208">Ensuring the Inputs are Valid in the UpdateCommand Event Handler</span></span>

<span data-ttu-id="9dc6c-209">Debido al script del lado cliente que emiten los controles de validación, si un usuario escribe una entrada no válida, los controles de validación cancelan los postbacks iniciados por los controles Button, LinkButton o ImageButton cuyas propiedades `CausesValidation` son `True` (valor predeterminado).</span><span class="sxs-lookup"><span data-stu-id="9dc6c-209">Due to the client-side script emitted by the validation controls, if a user enters invalid input the validation controls cancel any postbacks initiated by Button, LinkButton, or ImageButton controls whose `CausesValidation` properties are `True` (the default).</span></span> <span data-ttu-id="9dc6c-210">Sin embargo, si un usuario visita con un explorador de antiquated o uno cuya compatibilidad con JavaScript se ha deshabilitado, las comprobaciones de validación del lado cliente no se ejecutarán.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-210">However, if a user is visiting with an antiquated browser or one whose JavaScript support has been disabled, the client-side validation checks will not execute.</span></span>

<span data-ttu-id="9dc6c-211">Todos los controles de validación ASP.NET repiten la lógica de validación inmediatamente tras el PostBack y notifican la validez general de las entradas de la página a través de la [propiedad`Page.IsValid`](https://msdn.microsoft.com/library/system.web.ui.page.isvalid.aspx).</span><span class="sxs-lookup"><span data-stu-id="9dc6c-211">All of the ASP.NET validation controls repeat their validation logic immediately upon postback and report the overall validity of the page s inputs via the [`Page.IsValid` property](https://msdn.microsoft.com/library/system.web.ui.page.isvalid.aspx).</span></span> <span data-ttu-id="9dc6c-212">Sin embargo, el flujo de página no se interrumpe ni se detiene de ningún modo según el valor de `Page.IsValid`.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-212">However, the page flow is not interrupted or stopped in any way based on the value of `Page.IsValid`.</span></span> <span data-ttu-id="9dc6c-213">Como desarrolladores, es nuestra responsabilidad asegurarse de que la propiedad `Page.IsValid` tiene un valor de `True` antes de continuar con el código que supone que los datos de entrada son válidos.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-213">As developers, it is our responsibility to ensure that the `Page.IsValid` property has a value of `True` before proceeding with code that assumes valid input data.</span></span>

<span data-ttu-id="9dc6c-214">Si un usuario tiene JavaScript deshabilitado, visita nuestra página, edita un producto, introduce un valor de precio de demasiado caro y hace clic en el botón actualizar, se omitirá la validación del lado cliente y se producirá un postback.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-214">If a user has JavaScript disabled, visits our page, edits a product, enters a price value of Too expensive, and clicks the Update button, the client-side validation will be bypassed and a postback will ensue.</span></span> <span data-ttu-id="9dc6c-215">En el postback, la página ASP.NET s `UpdateCommand` controlador de eventos se ejecuta y se produce una excepción al intentar analizar un `Decimal`demasiado caro.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-215">On postback, the ASP.NET page s `UpdateCommand` event handler executes and an exception is raised when attempting to parse Too expensive to a `Decimal`.</span></span> <span data-ttu-id="9dc6c-216">Dado que tenemos el control de excepciones, este tipo de excepción se controlará correctamente, pero podríamos evitar que los datos no válidos se retrasen en primer lugar con el `UpdateCommand` controlador de eventos si `Page.IsValid` tiene un valor de `True`.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-216">Since we have exception handling, such an exception will be handled gracefully, but we could prevent the invalid data from slipping through in the first place by only proceeding with the `UpdateCommand` event handler if `Page.IsValid` has a value of `True`.</span></span>

<span data-ttu-id="9dc6c-217">Agregue el código siguiente al inicio del controlador de eventos `UpdateCommand`, inmediatamente antes del bloque de `Try`:</span><span class="sxs-lookup"><span data-stu-id="9dc6c-217">Add the following code to the start of the `UpdateCommand` event handler, immediately before the `Try` block:</span></span>

[!code-csharp[Main](adding-validation-controls-to-the-datalist-s-editing-interface-cs/samples/sample2.cs)]

<span data-ttu-id="9dc6c-218">Con esta adición, el producto solo intentará actualizarse si los datos enviados son válidos.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-218">With this addition, the product will attempt to be updated only if the submitted data is valid.</span></span> <span data-ttu-id="9dc6c-219">La mayoría de los usuarios no podrán devolver datos no válidos debido a los scripts del lado cliente de los controles de validación, pero los usuarios cuyos exploradores no admitan JavaScript o que tengan la compatibilidad con JavaScript deshabilitada, pueden omitir las comprobaciones del lado cliente y enviar datos no válidos.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-219">Most users won't be able to postback invalid data due to the validation controls client-side scripts, but users whose browsers don t support JavaScript or that have JavaScript support disabled, can bypass the client-side checks and submit invalid data.</span></span>

> [!NOTE]
> <span data-ttu-id="9dc6c-220">El lector astutos recordará que al actualizar los datos con GridView, no es necesario comprobar explícitamente la propiedad `Page.IsValid` en la clase de código subyacente de la página.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-220">The astute reader will recall that when updating data with the GridView, we didn't need to explicitly check the `Page.IsValid` property in our page s code-behind class.</span></span> <span data-ttu-id="9dc6c-221">Esto se debe a que GridView consulta la propiedad `Page.IsValid` para nosotros y solo continúa con la actualización si devuelve un valor de `True`.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-221">This is because the GridView consults the `Page.IsValid` property for us and only proceeds with the update only if it returns a value of `True`.</span></span>

## <a name="step-3-summarizing-data-entry-problems"></a><span data-ttu-id="9dc6c-222">Paso 3: resumir problemas de entrada de datos</span><span class="sxs-lookup"><span data-stu-id="9dc6c-222">Step 3: Summarizing Data Entry Problems</span></span>

<span data-ttu-id="9dc6c-223">Además de los cinco controles de validación, ASP.NET incluye el [control ValidationSummary](https://msdn.microsoft.com/library/f9h59855(VS.80).aspx), que muestra los `ErrorMessage` s de los controles de validación que detectaron datos no válidos.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-223">In addition to the five validation controls, ASP.NET includes the [ValidationSummary control](https://msdn.microsoft.com/library/f9h59855(VS.80).aspx), which displays the `ErrorMessage` s of those validation controls that detected invalid data.</span></span> <span data-ttu-id="9dc6c-224">Estos datos de resumen se pueden mostrar como texto en la página web o a través de un cuadro de mensajes modal del lado cliente.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-224">This summary data can be displayed as text on the web page or through a modal, client-side messagebox.</span></span> <span data-ttu-id="9dc6c-225">Vamos a mejorar este tutorial para incluir un cuadro de mensajes del lado cliente que resuma los problemas de validación.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-225">Let s enhance this tutorial to include a client-side messagebox summarizing any validation problems.</span></span>

<span data-ttu-id="9dc6c-226">Para ello, arrastre un control ValidationSummary desde el cuadro de herramientas hasta el diseñador.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-226">To accomplish this, drag a ValidationSummary control from the Toolbox onto the Designer.</span></span> <span data-ttu-id="9dc6c-227">En realidad, la ubicación del control ValidationSummary no importa, ya que se va a configurar para que solo se muestre el resumen como un cuadro de mensajes.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-227">The location of the ValidationSummary control doesn t really matter, since we re going to configure it to only display the summary as a messagebox.</span></span> <span data-ttu-id="9dc6c-228">Después de agregar el control, establezca su [propiedad`ShowSummary`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showsummary(VS.80).aspx) en `False` y su [propiedad`ShowMessageBox`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showmessagebox(VS.80).aspx) en `True`.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-228">After adding the control, set its [`ShowSummary` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showsummary(VS.80).aspx) to `False` and its [`ShowMessageBox` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showmessagebox(VS.80).aspx) to `True`.</span></span> <span data-ttu-id="9dc6c-229">Con esta adición, los errores de validación se resumen en un cuadro de mensajes del lado cliente (consulte la figura 6).</span><span class="sxs-lookup"><span data-stu-id="9dc6c-229">With this addition, any validation errors are summarized in a client-side messagebox (see Figure 6).</span></span>

<span data-ttu-id="9dc6c-230">[![los errores de validación se resumen en un cuadro de mensajes del lado cliente](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image17.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="9dc6c-230">[![The Validation Errors are Summarized in a Client-Side Messagebox](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image17.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image16.png)</span></span>

<span data-ttu-id="9dc6c-231">**Figura 6**: los errores de validación se resumen en un cuadro de mensajes del lado cliente ([haga clic para ver la imagen de tamaño completo](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="9dc6c-231">**Figure 6**: The Validation Errors are Summarized in a Client-Side Messagebox ([Click to view full-size image](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image18.png))</span></span>

## <a name="summary"></a><span data-ttu-id="9dc6c-232">Resumen</span><span class="sxs-lookup"><span data-stu-id="9dc6c-232">Summary</span></span>

<span data-ttu-id="9dc6c-233">En este tutorial, vimos cómo reducir la probabilidad de que se produzcan excepciones mediante el uso de controles de validación para garantizar proactivamente que las entradas de los usuarios son válidas antes de intentar usarlas en el flujo de trabajo de actualización.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-233">In this tutorial we saw how to reduce the likelihood of exceptions by using validation controls to proactively ensure that our users inputs are valid before attempting to use them in the updating workflow.</span></span> <span data-ttu-id="9dc6c-234">ASP.NET proporciona cinco controles Web de validación que están diseñados para inspeccionar una entrada de control Web determinada e informar sobre la validez de la entrada.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-234">ASP.NET provides five validation Web controls that are designed to inspect a particular Web control s input and report back on the input s validity.</span></span> <span data-ttu-id="9dc6c-235">En este tutorial, usamos dos de esos cinco controles: RequiredFieldValidator y CompareValidator para asegurarse de que se proporcionó el nombre del producto y que el precio tenía un formato de moneda con un valor mayor o igual que cero.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-235">In this tutorial we used two of those five controls the RequiredFieldValidator and the CompareValidator to ensure that the product s name was supplied and that the price had a currency format with a value greater than or equal to zero.</span></span>

<span data-ttu-id="9dc6c-236">Agregar controles de validación a la interfaz de edición de DataList es tan sencillo como arrastrarlos al `EditItemTemplate` desde el cuadro de herramientas y establecer unas cuantas propiedades.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-236">Adding validation controls to the DataList s editing interface is as simple as dragging them onto the `EditItemTemplate` from the Toolbox and setting a handful of properties.</span></span> <span data-ttu-id="9dc6c-237">De forma predeterminada, los controles de validación emiten automáticamente el script de validación del lado cliente. también proporcionan la validación del lado servidor en el postback, almacenando el resultado acumulado en la propiedad `Page.IsValid`.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-237">By default, the validation controls automatically emit client-side validation script; they also provide server-side validation on postback, storing the cumulative result in the `Page.IsValid` property.</span></span> <span data-ttu-id="9dc6c-238">Para omitir la validación del lado cliente cuando se hace clic en un botón, LinkButton o ImageButton, establezca la propiedad Button s `CausesValidation` en `False`.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-238">To bypass the client-side validation when a Button, LinkButton, or ImageButton is clicked, set the button s `CausesValidation` property to `False`.</span></span> <span data-ttu-id="9dc6c-239">Además, antes de realizar cualquier tarea con los datos enviados en el postback, asegúrese de que la propiedad `Page.IsValid` devuelve `True`.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-239">Also, before performing any tasks with the data submitted on postback, ensure that the `Page.IsValid` property returns `True`.</span></span>

<span data-ttu-id="9dc6c-240">Todos los tutoriales de edición de DataList que hemos examinado hasta ahora han tenido interfaces de edición muy simples, un cuadro de texto para el nombre del producto y otro para el precio.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-240">All of the DataList editing tutorials we ve examined so far have had very simple editing interfaces a TextBox for the product s name and another for the price.</span></span> <span data-ttu-id="9dc6c-241">La interfaz de edición, sin embargo, puede contener una combinación de controles Web diferentes, como DropDownLists, calendarios, botones de radiomedida, casillas, etc.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-241">The editing interface, however, can contain a mix of different Web controls, such as DropDownLists, Calendars, RadioButtons, CheckBoxes, and so on.</span></span> <span data-ttu-id="9dc6c-242">En el siguiente tutorial, veremos cómo crear una interfaz que use diversos controles Web.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-242">In our next tutorial we'll look at building an interface that uses a variety of Web controls.</span></span>

<span data-ttu-id="9dc6c-243">¡ Feliz programación!</span><span class="sxs-lookup"><span data-stu-id="9dc6c-243">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="9dc6c-244">Acerca del autor</span><span class="sxs-lookup"><span data-stu-id="9dc6c-244">About the Author</span></span>

<span data-ttu-id="9dc6c-245">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor de siete libros de ASP/ASP. net y fundador de [4GuysFromRolla.com](http://www.4guysfromrolla.com), ha estado trabajando con las tecnologías Web de Microsoft desde 1998.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-245">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="9dc6c-246">Scott funciona como consultor, profesor y redactor independiente.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-246">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="9dc6c-247">Su último libro se [*enseña a ASP.NET 2,0 en 24 horas*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="9dc6c-247">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="9dc6c-248">Puede ponerse en contacto con usted en [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="9dc6c-248">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="9dc6c-249">o a través de su blog, que encontrará en [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="9dc6c-249">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="9dc6c-250">Agradecimiento especial a</span><span class="sxs-lookup"><span data-stu-id="9dc6c-250">Special Thanks To</span></span>

<span data-ttu-id="9dc6c-251">Muchos revisores útiles revisaron esta serie de tutoriales.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-251">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="9dc6c-252">Los revisores responsables de este tutorial eran Dennis Patterson, Ken Pespisa y Liz Shulok.</span><span class="sxs-lookup"><span data-stu-id="9dc6c-252">Lead reviewers for this tutorial were Dennis Patterson, Ken Pespisa, and Liz Shulok.</span></span> <span data-ttu-id="9dc6c-253">¿Está interesado en revisar los próximos artículos de MSDN?</span><span class="sxs-lookup"><span data-stu-id="9dc6c-253">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="9dc6c-254">En caso afirmativo, suéltelo en [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="9dc6c-254">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="9dc6c-255">[Anterior](handling-bll-and-dal-level-exceptions-cs.md)
> [Siguiente](customizing-the-datalist-s-editing-interface-cs.md)</span><span class="sxs-lookup"><span data-stu-id="9dc6c-255">[Previous](handling-bll-and-dal-level-exceptions-cs.md)
[Next](customizing-the-datalist-s-editing-interface-cs.md)</span></span>
