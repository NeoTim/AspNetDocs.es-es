---
uid: web-forms/overview/deployment/advanced-enterprise-web-deployment/troubleshooting-the-packaging-process
title: Solucionar problemas del proceso de empaquetado | Microsoft Docs
author: jrjlee
description: En este tema se describe cómo puede recopilar información detallada sobre el proceso de empaquetado mediante la propiedad EnablePackageProcessLoggingAndAssert en la sección M...
ms.author: riande
ms.date: 05/04/2012
ms.assetid: 794bd819-00fc-47e2-876d-fc5d15e0de1c
msc.legacyurl: /web-forms/overview/deployment/advanced-enterprise-web-deployment/troubleshooting-the-packaging-process
msc.type: authoredcontent
ms.openlocfilehash: 8ad649dfff085a8774cc13c11d8a3e3d48277d66
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 03/06/2020
ms.locfileid: "78509755"
---
# <a name="troubleshooting-the-packaging-process"></a><span data-ttu-id="0100a-103">Solucionar problemas del proceso de empaquetado</span><span class="sxs-lookup"><span data-stu-id="0100a-103">Troubleshooting the Packaging Process</span></span>

<span data-ttu-id="0100a-104">por [Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="0100a-104">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="0100a-105">Descargar PDF</span><span class="sxs-lookup"><span data-stu-id="0100a-105">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="0100a-106">En este tema se describe cómo se puede recopilar información detallada sobre el proceso de empaquetado mediante la propiedad **EnablePackageProcessLoggingAndAssert** en el Microsoft Build Engine (MSBuild).</span><span class="sxs-lookup"><span data-stu-id="0100a-106">This topic describes how you can collect detailed information about the packaging process by using the **EnablePackageProcessLoggingAndAssert** property in the Microsoft Build Engine (MSBuild).</span></span>
> 
> <span data-ttu-id="0100a-107">Cuando establezca la propiedad **EnablePackageProcessLoggingAndAssert** en **true**, MSBuild hará lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="0100a-107">When you set the **EnablePackageProcessLoggingAndAssert** property to **true**, MSBuild will:</span></span>
> 
> - <span data-ttu-id="0100a-108">Agregue información adicional sobre el proceso de empaquetado a los registros de compilación.</span><span class="sxs-lookup"><span data-stu-id="0100a-108">Add additional information about the packaging process to the build logs.</span></span>
> - <span data-ttu-id="0100a-109">Registre los errores en determinadas condiciones, por ejemplo, si se encuentran archivos duplicados en la lista de empaquetado.</span><span class="sxs-lookup"><span data-stu-id="0100a-109">Log errors under certain conditions, for example, if duplicate files are found in the packaging list.</span></span>
> - <span data-ttu-id="0100a-110">Cree un directorio de registro en la carpeta *ProjectName*\_Package y úselo para registrar información acerca de los archivos que está empaquetando.</span><span class="sxs-lookup"><span data-stu-id="0100a-110">Create a Log directory in the *ProjectName*\_Package folder and use it to record information about the files you're packaging.</span></span>
> 
> <span data-ttu-id="0100a-111">Si se produce un error en el proceso de empaquetado o los paquetes de implementación web no contienen los archivos esperados, puede utilizar esta información para solucionar los problemas del proceso e indicar dónde se está produciendo un error.</span><span class="sxs-lookup"><span data-stu-id="0100a-111">If the packaging process is failing, or your web deployment packages don't contain the files that you expect, you can use this information to troubleshoot the process and pinpoint where things are going wrong.</span></span>
> 
> > [!NOTE]
> > <span data-ttu-id="0100a-112">La propiedad **EnablePackageProcessLoggingAndAssert** solo funciona Si compila el proyecto con la configuración de **depuración** .</span><span class="sxs-lookup"><span data-stu-id="0100a-112">The **EnablePackageProcessLoggingAndAssert** property only works if you build your project using the **Debug** configuration.</span></span> <span data-ttu-id="0100a-113">La propiedad se omite en otras configuraciones.</span><span class="sxs-lookup"><span data-stu-id="0100a-113">The property is ignored in other configurations.</span></span>

<span data-ttu-id="0100a-114">Este tema forma parte de una serie de tutoriales basados en los requisitos de implementación empresarial de una empresa ficticia denominada Fabrikam, Inc. En esta serie de tutoriales se&#x2014;usa una solución de ejemplo de la&#x2014; [solución Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)para representar una aplicación web con un nivel de complejidad realista, como una aplicación ASP.NET MVC 3, un servicio Windows Communication Foundation (WCF) y un proyecto de base de datos.</span><span class="sxs-lookup"><span data-stu-id="0100a-114">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager solution](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="0100a-115">El método de implementación que se encuentra en el corazón de estos tutoriales se basa en el enfoque de archivo de proyecto dividido que se describe en [Descripción del archivo de proyecto](../web-deployment-in-the-enterprise/understanding-the-project-file.md), en el&#x2014;que el proceso de compilación se controla mediante dos archivos de proyecto que contiene instrucciones de compilación que se aplican a cada entorno de destino y uno que contiene la configuración de compilación e implementación específica del entorno.</span><span class="sxs-lookup"><span data-stu-id="0100a-115">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), in which the build process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="0100a-116">En tiempo de compilación, el archivo de proyecto específico del entorno se combina en el archivo de proyecto independiente del entorno para formar un conjunto completo de instrucciones de compilación.</span><span class="sxs-lookup"><span data-stu-id="0100a-116">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="understanding-the-enablepackageprocessloggingandassert-property"></a><span data-ttu-id="0100a-117">Descripción de la propiedad EnablePackageProcessLoggingAndAssert</span><span class="sxs-lookup"><span data-stu-id="0100a-117">Understanding the EnablePackageProcessLoggingAndAssert Property</span></span>

<span data-ttu-id="0100a-118">[Compilar y empaquetar proyectos de aplicación web](../web-deployment-in-the-enterprise/building-and-packaging-web-application-projects.md) describe cómo la canalización de publicación web (WPP) proporciona un conjunto de destinos de MSBuild que amplían la funcionalidad de MSBuild y permiten que se integren con la herramienta de implementación Web de Internet Information Services (IIS) (Web deploy).</span><span class="sxs-lookup"><span data-stu-id="0100a-118">[Building and Packaging Web Application Projects](../web-deployment-in-the-enterprise/building-and-packaging-web-application-projects.md) described how the Web Publishing Pipeline (WPP) provides a set of MSBuild targets that extend the functionality of MSBuild and enable it to integrate with the Internet Information Services (IIS) Web Deployment Tool (Web Deploy).</span></span> <span data-ttu-id="0100a-119">Al empaquetar un proyecto de aplicación Web, está invocando destinos WPP.</span><span class="sxs-lookup"><span data-stu-id="0100a-119">When you package a web application project, you're invoking WPP targets.</span></span>

<span data-ttu-id="0100a-120">Muchos de estos destinos WPP incluyen lógica condicional que registra información adicional cuando la propiedad **EnablePackageProcessLoggingAndAssert** se establece en **true**.</span><span class="sxs-lookup"><span data-stu-id="0100a-120">Lots of these WPP targets include conditional logic that logs additional information when the **EnablePackageProcessLoggingAndAssert** property is set to **true**.</span></span> <span data-ttu-id="0100a-121">Por ejemplo, si revisa el destino del **paquete** , puede ver que crea un directorio de registro adicional y escribe una lista de archivos en un archivo de texto si **EnablePackageProcessLoggingAndAssert** es igual a **true**.</span><span class="sxs-lookup"><span data-stu-id="0100a-121">For example, if you review the **Package** target, you can see that it creates an additional log directory and writes a list of files to a text file if **EnablePackageProcessLoggingAndAssert** is equal to **true**.</span></span>

[!code-xml[Main](troubleshooting-the-packaging-process/samples/sample1.xml)]

> [!NOTE]
> <span data-ttu-id="0100a-122">Los destinos WPP se definen en el archivo *Microsoft. Web. Publishing. targets* en la carpeta% ProgramFiles (x86)% \ MSBuild\Microsoft\VisualStudio\v10.0\Web</span><span class="sxs-lookup"><span data-stu-id="0100a-122">The WPP targets are defined in the *Microsoft.Web.Publishing.targets* file in the %PROGRAMFILES(x86)%\MSBuild\Microsoft\VisualStudio\v10.0\Web folder.</span></span> <span data-ttu-id="0100a-123">Puede abrir este archivo y revisar los destinos en Visual Studio 2010 o cualquier editor XML.</span><span class="sxs-lookup"><span data-stu-id="0100a-123">You can open this file and review the targets in Visual Studio 2010 or any XML editor.</span></span> <span data-ttu-id="0100a-124">Tenga cuidado de no modificar el contenido del archivo.</span><span class="sxs-lookup"><span data-stu-id="0100a-124">Take care not to modify the contents of the file.</span></span>

## <a name="enabling-the-additional-logging"></a><span data-ttu-id="0100a-125">Habilitación del registro adicional</span><span class="sxs-lookup"><span data-stu-id="0100a-125">Enabling the Additional Logging</span></span>

<span data-ttu-id="0100a-126">Puede proporcionar un valor para la propiedad **EnablePackageProcessLoggingAndAssert** de varias maneras, en función de cómo compile el proyecto.</span><span class="sxs-lookup"><span data-stu-id="0100a-126">You can supply a value for the **EnablePackageProcessLoggingAndAssert** property in various ways, depending on how you build your project.</span></span>

<span data-ttu-id="0100a-127">Si compila el proyecto desde la línea de comandos, puede proporcionar un valor para la propiedad **EnablePackageProcessLoggingAndAssert** como argumento de la línea de comandos:</span><span class="sxs-lookup"><span data-stu-id="0100a-127">If you build your project from the command line, you can supply a value for the **EnablePackageProcessLoggingAndAssert** property as a command-line argument:</span></span>

[!code-console[Main](troubleshooting-the-packaging-process/samples/sample2.cmd)]

<span data-ttu-id="0100a-128">Si utiliza un archivo de proyecto personalizado para compilar los proyectos, puede incluir el valor **EnablePackageProcessLoggingAndAssert** en el atributo **Properties** de la tarea **msbuild** :</span><span class="sxs-lookup"><span data-stu-id="0100a-128">If you're using a custom project file to build your projects, you can include the **EnablePackageProcessLoggingAndAssert** value in the **Properties** attribute of the **MSBuild** task:</span></span>

[!code-xml[Main](troubleshooting-the-packaging-process/samples/sample3.xml)]

<span data-ttu-id="0100a-129">Si utiliza una definición de compilación de Team Foundation Server (TFS) para compilar los proyectos, puede proporcionar un valor para la propiedad **EnablePackageProcessLoggingAndAssert** en la fila de **argumentos de MSBuild** :![](troubleshooting-the-packaging-process/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="0100a-129">If you're using a Team Foundation Server (TFS) build definition to build your projects, you can supply a value for the **EnablePackageProcessLoggingAndAssert** property in the **MSBuild Arguments** row:![](troubleshooting-the-packaging-process/_static/image1.png)</span></span>

> [!NOTE]
> <span data-ttu-id="0100a-130">Para obtener más información sobre cómo crear y configurar definiciones de compilación, vea [crear una definición de compilación que admita la implementación](../configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="0100a-130">For more information on creating and configuring build definitions, see [Creating a Build Definition That Supports Deployment](../configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment.md).</span></span>

<span data-ttu-id="0100a-131">Como alternativa, si desea incluir el paquete en cada compilación, puede modificar el archivo de proyecto del proyecto de aplicación web para establecer la propiedad **EnablePackageProcessLoggingAndAssert** en **true**.</span><span class="sxs-lookup"><span data-stu-id="0100a-131">Alternatively, if you want to include the package in every build, you can modify the project file for your web application project to set the **EnablePackageProcessLoggingAndAssert** property to **true**.</span></span> <span data-ttu-id="0100a-132">Debe agregar la propiedad al primer elemento **PropertyGroup** del archivo. csproj o. vbproj.</span><span class="sxs-lookup"><span data-stu-id="0100a-132">You should add the property to the first **PropertyGroup** element within your .csproj or .vbproj file.</span></span>

[!code-xml[Main](troubleshooting-the-packaging-process/samples/sample4.xml)]

## <a name="reviewing-the-log-files"></a><span data-ttu-id="0100a-133">Revisar los archivos de registro</span><span class="sxs-lookup"><span data-stu-id="0100a-133">Reviewing the Log Files</span></span>

<span data-ttu-id="0100a-134">Al compilar y empaquetar un proyecto de aplicación web con **EnablePackageProcessLoggingAndAssert** establecido en **true**, MSBuild crea una carpeta adicional denominada log en la carpeta *projectname*\_package.</span><span class="sxs-lookup"><span data-stu-id="0100a-134">When you build and package a web application project with **EnablePackageProcessLoggingAndAssert** set to **true**, MSBuild creates an additional folder named Log in the *ProjectName*\_Package folder.</span></span> <span data-ttu-id="0100a-135">La carpeta de registro contiene varios archivos:</span><span class="sxs-lookup"><span data-stu-id="0100a-135">The Log folder contains various files:</span></span>

![](troubleshooting-the-packaging-process/_static/image2.png)

<span data-ttu-id="0100a-136">La lista de archivos que se ven variará en función de las cosas del proyecto y del proceso de compilación.</span><span class="sxs-lookup"><span data-stu-id="0100a-136">The list of files that you see will vary according to the things in your project and your build process.</span></span> <span data-ttu-id="0100a-137">Sin embargo, estos archivos se utilizan normalmente para registrar la lista de archivos que el WPP está recopilando para el empaquetado, en varias fases del proceso:</span><span class="sxs-lookup"><span data-stu-id="0100a-137">However, these files are typically used to record the list of files that the WPP is collecting for packaging, at various stages of the process:</span></span>

- <span data-ttu-id="0100a-138">En el archivo *PreExcludePipelineCollectFilesPhaseFileList. txt* se muestran los archivos que MSBuild recopila para empaquetar antes de que se quiten los archivos que se especifican para la exclusión.</span><span class="sxs-lookup"><span data-stu-id="0100a-138">The *PreExcludePipelineCollectFilesPhaseFileList.txt* file lists the files that MSBuild collects for packaging before any files that are specified for exclusion are removed.</span></span>
- <span data-ttu-id="0100a-139">El archivo *AfterExcludeFilesFilesList. txt* contiene la lista de archivos modificados después de quitar los archivos especificados para la exclusión.</span><span class="sxs-lookup"><span data-stu-id="0100a-139">The *AfterExcludeFilesFilesList.txt* file contains the modified file list after any files that are specified for exclusion are removed.</span></span>

    > [!NOTE]
    > <span data-ttu-id="0100a-140">Para obtener más información sobre cómo excluir archivos y carpetas del proceso de empaquetado, vea [excluir archivos y carpetas de la implementación](excluding-files-and-folders-from-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="0100a-140">For more information on excluding files and folders from the packaging process, see [Excluding Files and Folders from Deployment](excluding-files-and-folders-from-deployment.md).</span></span>
- <span data-ttu-id="0100a-141">El archivo *AfterTransformWebConfig. txt* enumera los archivos recopilados para empaquetar después de que se hayan realizado las transformaciones *Web. config* .</span><span class="sxs-lookup"><span data-stu-id="0100a-141">The *AfterTransformWebConfig.txt* file lists the files collected for packaging after any *Web.config* transforms have been performed.</span></span> <span data-ttu-id="0100a-142">En esta lista, los archivos de transformación *Web. config* específicos de la configuración, como *Web. Debug. config* y *Web. Release. config*, se excluyen de la lista de archivos para el empaquetado.</span><span class="sxs-lookup"><span data-stu-id="0100a-142">In this list, any configuration-specific *Web.config* transform files, like *Web.Debug.config* and *Web.Release.config*, are excluded from the list of files for packaging.</span></span> <span data-ttu-id="0100a-143">Un único *Web. config* transformado se incluye en su lugar.</span><span class="sxs-lookup"><span data-stu-id="0100a-143">A single transformed *Web.config* is included in their place.</span></span>
- <span data-ttu-id="0100a-144">El archivo *PostAutoParameterizationWebConfigConnectionStrings. txt* contiene la lista de archivos después de que se hayan parametrizado las cadenas de conexión en el archivo *Web. config* .</span><span class="sxs-lookup"><span data-stu-id="0100a-144">The *PostAutoParameterizationWebConfigConnectionStrings.txt* file contains the list of files after the connection strings in the *Web.config* file have been parameterized.</span></span> <span data-ttu-id="0100a-145">Este es el proceso que permite reemplazar las cadenas de conexión con la configuración correcta para el entorno de destino al implementar el paquete.</span><span class="sxs-lookup"><span data-stu-id="0100a-145">This is the process that lets you replace your connection strings with the right settings for your target environment when you deploy the package.</span></span>
- <span data-ttu-id="0100a-146">El archivo *prepackage. txt* contiene la lista de archivos de precompilación finalizada que se incluirá en el paquete.</span><span class="sxs-lookup"><span data-stu-id="0100a-146">The *Prepackage.txt* file contains the finalized pre-build list of files to be included in the package.</span></span>

> [!NOTE]
> <span data-ttu-id="0100a-147">Los nombres de los archivos de registro adicionales se corresponden normalmente con destinos WPP.</span><span class="sxs-lookup"><span data-stu-id="0100a-147">The names of the additional log files typically correspond to WPP targets.</span></span> <span data-ttu-id="0100a-148">Puede revisar estos destinos examinando el archivo *Microsoft. Web. Publishing. targets* en la carpeta% ProgramFiles (x86)% \ MSBuild\Microsoft\VisualStudio\v10.0\Web</span><span class="sxs-lookup"><span data-stu-id="0100a-148">You can review these targets by examining the *Microsoft.Web.Publishing.targets* file in the %PROGRAMFILES(x86)%\MSBuild\Microsoft\VisualStudio\v10.0\Web folder.</span></span>

<span data-ttu-id="0100a-149">Si el contenido del paquete web no es el esperado, la revisión de estos archivos puede ser una forma útil de identificar en qué momento del proceso se produjo un error.</span><span class="sxs-lookup"><span data-stu-id="0100a-149">If the contents of your web package aren't what you expected, reviewing these files can be a useful way to identify at what point in the process things went wrong.</span></span>

## <a name="conclusion"></a><span data-ttu-id="0100a-150">Conclusión</span><span class="sxs-lookup"><span data-stu-id="0100a-150">Conclusion</span></span>

<span data-ttu-id="0100a-151">En este tema se describe cómo puede usar la propiedad **EnablePackageProcessLoggingAndAssert** en MSBuild para solucionar problemas del proceso de empaquetado.</span><span class="sxs-lookup"><span data-stu-id="0100a-151">This topic described how you can use the **EnablePackageProcessLoggingAndAssert** property in MSBuild to troubleshoot the packaging process.</span></span> <span data-ttu-id="0100a-152">Se han explicado las distintas formas en que se puede proporcionar el valor de propiedad al proceso de compilación y se describe la información adicional que se registra cuando se establece la propiedad en **true**.</span><span class="sxs-lookup"><span data-stu-id="0100a-152">It explained the different ways in which you can supply the property value to the build process, and it described the additional information that is recorded when you set the property to **true**.</span></span>

## <a name="further-reading"></a><span data-ttu-id="0100a-153">Información adicional</span><span class="sxs-lookup"><span data-stu-id="0100a-153">Further Reading</span></span>

<span data-ttu-id="0100a-154">Para obtener más información sobre el uso de archivos de proyecto de MSBuild personalizados para controlar el proceso de implementación, vea [Descripción del archivo de proyecto](../web-deployment-in-the-enterprise/understanding-the-project-file.md) y [Descripción del proceso de compilación](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span><span class="sxs-lookup"><span data-stu-id="0100a-154">For more information on using custom MSBuild project files to control the deployment process, see [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md) and [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span></span> <span data-ttu-id="0100a-155">Para obtener más información sobre WPP y cómo administra el proceso de empaquetado, vea [compilar y empaquetar proyectos de aplicación web](../web-deployment-in-the-enterprise/building-and-packaging-web-application-projects.md).</span><span class="sxs-lookup"><span data-stu-id="0100a-155">For more information on the WPP and how it manages the packaging process, see [Building and Packaging Web Application Projects](../web-deployment-in-the-enterprise/building-and-packaging-web-application-projects.md).</span></span> <span data-ttu-id="0100a-156">Para obtener instrucciones sobre cómo excluir archivos y carpetas específicos de los paquetes de implementación web, vea [excluir archivos y carpetas de la implementación](excluding-files-and-folders-from-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="0100a-156">For guidance on how to exclude specific files and folders from web deployment packages, see [Excluding Files and Folders from Deployment](excluding-files-and-folders-from-deployment.md).</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="0100a-157">Anterior</span><span class="sxs-lookup"><span data-stu-id="0100a-157">Previous</span></span>](running-windows-powershell-scripts-from-msbuild-project-files.md)
