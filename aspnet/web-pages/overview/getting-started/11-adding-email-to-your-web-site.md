---
uid: web-pages/overview/getting-started/11-adding-email-to-your-web-site
title: Enviar correo electrónico desde un sitio de ASP.NET Web Pages (Razor) | Microsoft Docs
author: Rick-Anderson
description: En este capítulo se explica cómo enviar un mensaje de correo electrónico automatizado desde un sitio Web.
ms.author: riande
ms.date: 02/20/2014
ms.assetid: fc49bcb9-f1a9-4048-8c3f-b60951853200
msc.legacyurl: /web-pages/overview/getting-started/11-adding-email-to-your-web-site
msc.type: authoredcontent
ms.openlocfilehash: 23e9717329525fb5a0ed505c9dc94505d4f9dbbe
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 03/06/2020
ms.locfileid: "78515329"
---
# <a name="sending-email-from-an-aspnet-web-pages-razor-site"></a><span data-ttu-id="7f1c7-103">Enviar correo electrónico desde un sitio de ASP.NET Web Pages (Razor)</span><span class="sxs-lookup"><span data-stu-id="7f1c7-103">Sending Email from an ASP.NET Web Pages (Razor) Site</span></span>

<span data-ttu-id="7f1c7-104">por [Tom FitzMacken](https://github.com/tfitzmac)</span><span class="sxs-lookup"><span data-stu-id="7f1c7-104">by [Tom FitzMacken](https://github.com/tfitzmac)</span></span>

> <span data-ttu-id="7f1c7-105">En este artículo se explica cómo enviar un mensaje de correo electrónico desde un sitio web cuando se usa ASP.NET Web Pages (Razor).</span><span class="sxs-lookup"><span data-stu-id="7f1c7-105">This article explains how to send an email message from a website when you use ASP.NET Web Pages (Razor).</span></span>
> 
> <span data-ttu-id="7f1c7-106">Temas que se abordarán:</span><span class="sxs-lookup"><span data-stu-id="7f1c7-106">What you'll learn:</span></span>
> 
> - <span data-ttu-id="7f1c7-107">Cómo enviar un mensaje de correo electrónico desde su sitio Web.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-107">How to send an email message from your website.</span></span>
> - <span data-ttu-id="7f1c7-108">Cómo adjuntar un archivo a un mensaje de correo electrónico.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-108">How to attach a file to an email message.</span></span>
> 
> <span data-ttu-id="7f1c7-109">Esta es la característica ASP.NET presentada en el artículo:</span><span class="sxs-lookup"><span data-stu-id="7f1c7-109">This is the ASP.NET feature introduced in the article:</span></span>
> 
> - <span data-ttu-id="7f1c7-110">Aplicación auxiliar de `WebMail`.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-110">The `WebMail` helper.</span></span>
>   
> 
> ## <a name="software-versions-used-in-the-tutorial"></a><span data-ttu-id="7f1c7-111">Versiones de software usadas en el tutorial</span><span class="sxs-lookup"><span data-stu-id="7f1c7-111">Software versions used in the tutorial</span></span>
> 
> 
> - <span data-ttu-id="7f1c7-112">ASP.NET Web Pages (Razor) 3</span><span class="sxs-lookup"><span data-stu-id="7f1c7-112">ASP.NET Web Pages (Razor) 3</span></span>
>   
> 
> <span data-ttu-id="7f1c7-113">Este tutorial también funciona con ASP.NET Web Pages 2.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-113">This tutorial also works with ASP.NET Web Pages 2.</span></span>

<a id="Sending_Email_Messages"></a>
## <a name="sending-email-messages-from-your-website"></a><span data-ttu-id="7f1c7-114">Enviar mensajes de correo electrónico desde su sitio web</span><span class="sxs-lookup"><span data-stu-id="7f1c7-114">Sending Email Messages from Your Website</span></span>

<span data-ttu-id="7f1c7-115">Hay todo tipo de razones por las que es posible que necesite enviar correo electrónico desde su sitio Web.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-115">There are all sorts of reasons why you might need to send email from your website.</span></span> <span data-ttu-id="7f1c7-116">Es posible que se envíen mensajes de confirmación a los usuarios o que se envíen notificaciones a sí mismo (por ejemplo, que se haya registrado un usuario nuevo). La aplicación auxiliar de `WebMail` facilita el envío de correo electrónico.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-116">You might send confirmation messages to users, or you might send notifications to yourself (for example, that a new user has registered.) The `WebMail` helper makes it easy for you to send email.</span></span>

<span data-ttu-id="7f1c7-117">Para usar la aplicación auxiliar de `WebMail`, debe tener acceso a un servidor SMTP.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-117">To use the `WebMail` helper, you have to have access to an SMTP server.</span></span> <span data-ttu-id="7f1c7-118">(SMTP significa *Protocolo simple de transferencia de correo*). Un servidor SMTP es un servidor de correo electrónico que solo reenvía mensajes al servidor &#8212; del destinatario es el lado saliente del correo electrónico.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-118">(SMTP stands for *Simple Mail Transfer Protocol*.) An SMTP server is an email server that only forwards messages to the recipient's server &#8212; it's the outbound side of email.</span></span> <span data-ttu-id="7f1c7-119">Si usa un proveedor de hospedaje para su sitio web, es probable que lo configure con correo electrónico y que le indique cuál es el nombre del servidor SMTP.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-119">If you use a hosting provider for your website, they probably set you up with email and they can tell you what your SMTP server name is.</span></span> <span data-ttu-id="7f1c7-120">Si está trabajando dentro de una red corporativa, un administrador o el Departamento de TI normalmente puede proporcionarle la información sobre un servidor SMTP que puede usar.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-120">If you're working inside a corporate network, an administrator or your IT department can usually give you the information about an SMTP server that you can use.</span></span> <span data-ttu-id="7f1c7-121">Si está trabajando en casa, es posible que incluso pueda realizar pruebas con su proveedor de correo electrónico ordinario, que puede indicarle el nombre de su servidor SMTP.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-121">If you're working at home, you might even be able to test using your ordinary email provider, who can tell you the name of their SMTP server.</span></span> <span data-ttu-id="7f1c7-122">Normalmente, necesita:</span><span class="sxs-lookup"><span data-stu-id="7f1c7-122">You typically need:</span></span>

- <span data-ttu-id="7f1c7-123">Nombre del servidor SMTP.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-123">The name of the SMTP server.</span></span>
- <span data-ttu-id="7f1c7-124">Número del puerto.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-124">The port number.</span></span> <span data-ttu-id="7f1c7-125">Casi siempre es 25.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-125">This is almost always 25.</span></span> <span data-ttu-id="7f1c7-126">Sin embargo, es posible que el ISP le solicite que use el puerto 587.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-126">However, your ISP may require you to use port 587.</span></span> <span data-ttu-id="7f1c7-127">Si utiliza capa de sockets seguros (SSL) para el correo electrónico, es posible que necesite un puerto diferente.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-127">If you are using secure sockets layer (SSL) for email, you might need a different port.</span></span> <span data-ttu-id="7f1c7-128">Consulte con su proveedor de correo electrónico.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-128">Check with your email provider.</span></span>
- <span data-ttu-id="7f1c7-129">Credenciales (nombre de usuario, contraseña).</span><span class="sxs-lookup"><span data-stu-id="7f1c7-129">Credentials (user name, password).</span></span>

<span data-ttu-id="7f1c7-130">En este procedimiento, creará dos páginas.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-130">In this procedure, you create two pages.</span></span> <span data-ttu-id="7f1c7-131">La primera página tiene un formulario que permite a los usuarios escribir una descripción, como si estuvieran rellenando un formulario de soporte técnico.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-131">The first page has a form that lets users enter a description, as if they were filling in a technical-support form.</span></span> <span data-ttu-id="7f1c7-132">La primera página envía su información a una segunda página.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-132">The first page submits its information to a second page.</span></span> <span data-ttu-id="7f1c7-133">En la segunda página, el código extrae la información del usuario y envía un mensaje de correo electrónico.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-133">In the second page, code extracts the user's information and sends an email message.</span></span> <span data-ttu-id="7f1c7-134">También muestra un mensaje que confirma que se ha recibido el informe de problemas.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-134">It also displays a message confirming that the problem report has been received.</span></span>

![[imagen]](11-adding-email-to-your-web-site/_static/image1.jpg)

> [!NOTE]
> <span data-ttu-id="7f1c7-136">Para simplificar este ejemplo, el código inicializa el `WebMail` auxiliar adecuado en la página donde se usa.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-136">To keep this example simple, the code initializes the `WebMail` helper right in the page where you use it.</span></span> <span data-ttu-id="7f1c7-137">Sin embargo, en el caso de los sitios Web reales, es una idea mejor colocar el código de inicialización como este en un archivo global, de modo que inicialice la aplicación auxiliar de `WebMail` para todos los archivos del sitio Web.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-137">However, for real websites, it's a better idea to put initialization code like this in a global file, so that you initialize the `WebMail` helper for all files in your website.</span></span> <span data-ttu-id="7f1c7-138">Para obtener más información, vea [personalizar el comportamiento de todo el sitio para ASP.NET Web pages](https://go.microsoft.com/fwlink/?LinkId=202906#Setting_Values_For_Helpers).</span><span class="sxs-lookup"><span data-stu-id="7f1c7-138">For more information, see [Customizing Site-Wide Behavior for ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=202906#Setting_Values_For_Helpers).</span></span>

1. <span data-ttu-id="7f1c7-139">Cree un nuevo sitio Web.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-139">Create a new website.</span></span>
2. <span data-ttu-id="7f1c7-140">Agregue una nueva página denominada *EmailRequest. cshtml* y agregue el marcado siguiente:</span><span class="sxs-lookup"><span data-stu-id="7f1c7-140">Add a new page named *EmailRequest.cshtml* and add the following markup:</span></span> 

    [!code-html[Main](11-adding-email-to-your-web-site/samples/sample1.html)]

    <span data-ttu-id="7f1c7-141">Observe que el atributo `action` del elemento Form se ha establecido en *ProcessRequest. cshtml*.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-141">Notice that the `action` attribute of the form element has been set to *ProcessRequest.cshtml*.</span></span> <span data-ttu-id="7f1c7-142">Esto significa que el formulario se enviará a la página en lugar de volver a la página actual.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-142">This means that the form will be submitted to that page instead of back to the current page.</span></span>
3. <span data-ttu-id="7f1c7-143">Agregue una nueva página denominada *ProcessRequest. cshtml* al sitio web y agregue el siguiente código y marcado:</span><span class="sxs-lookup"><span data-stu-id="7f1c7-143">Add a new page named *ProcessRequest.cshtml* to the website and add the following code and markup:</span></span>   

    [!code-cshtml[Main](11-adding-email-to-your-web-site/samples/sample2.cshtml)]

    <span data-ttu-id="7f1c7-144">En el código, obtiene los valores de los campos de formulario que se enviaron a la página.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-144">In the code, you get the values of the form fields that were submitted to the page.</span></span> <span data-ttu-id="7f1c7-145">A continuación, llame al método `Send` del ayudante `WebMail` para crear y enviar el mensaje de correo electrónico.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-145">You then call the `WebMail` helper's `Send` method to create and send the email message.</span></span> <span data-ttu-id="7f1c7-146">En este caso, los valores que se van a usar se componen del texto que se concatena con los valores que se enviaron desde el formulario.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-146">In this case, the values to use are made up of text that you concatenate with the values that were submitted from the form.</span></span>

    <span data-ttu-id="7f1c7-147">El código de esta página se encuentra dentro de un bloque `try/catch`.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-147">The code for this page is inside a `try/catch` block.</span></span> <span data-ttu-id="7f1c7-148">Si por alguna razón el intento de enviar un correo electrónico no funciona (por ejemplo, la configuración no es la adecuada), se ejecuta el código del bloque `catch` y se establece la variable `errorMessage` en el error que se ha producido.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-148">If for any reason the attempt to send an email doesn't work (for example, the settings aren't right), the code in the `catch` block runs and sets the `errorMessage` variable to the error that has occurred.</span></span> <span data-ttu-id="7f1c7-149">(Para obtener más información sobre los bloques de `try/catch` o la etiqueta de `<text>`, consulte [Introduction to ASP.NET Web pages Programming Using the Razor Syntax](https://go.microsoft.com/fwlink/?LinkID=251587#ID_HandlingErrors)).</span><span class="sxs-lookup"><span data-stu-id="7f1c7-149">(For more information about `try/catch` blocks or the `<text>` tag, see [Introduction to ASP.NET Web Pages Programming Using the Razor Syntax](https://go.microsoft.com/fwlink/?LinkID=251587#ID_HandlingErrors).)</span></span>

    <span data-ttu-id="7f1c7-150">En el cuerpo de la página, si la variable `errorMessage` está vacía (el valor predeterminado), el usuario verá un mensaje que indica que se ha enviado el mensaje de correo electrónico.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-150">In the body of the page, if the `errorMessage` variable is empty (the default), the user sees a message that the email message has been sent.</span></span> <span data-ttu-id="7f1c7-151">Si la variable `errorMessage` está establecida en true, el usuario verá un mensaje que indica que se ha producido un problema al enviar el mensaje.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-151">If the `errorMessage` variable is set to true, the user sees a message that there's been a problem sending the message.</span></span>

    <span data-ttu-id="7f1c7-152">Tenga en cuenta que en la parte de la página que muestra un mensaje de error, hay una prueba adicional: `if(debuggingFlag)`.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-152">Notice that in the portion of the page that displays an error message, there's an additional test: `if(debuggingFlag)`.</span></span> <span data-ttu-id="7f1c7-153">Se trata de una variable que puede establecer en true si tiene problemas para enviar correo electrónico.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-153">This is a variable that you can set to true if you're having trouble sending email.</span></span> <span data-ttu-id="7f1c7-154">Cuando `debuggingFlag` es true, y si hay un problema de envío de correo electrónico, se muestra un mensaje de error adicional que muestra cualquier ASP.NET que haya presentado al intentar enviar el mensaje de correo electrónico.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-154">When `debuggingFlag` is true, and if there's a problem sending email, an additional error message is displayed that shows whatever ASP.NET has reported when it tried to send the email message.</span></span> <span data-ttu-id="7f1c7-155">Sin embargo, ADVERTENCIA: los mensajes de error que ASP.NET notifica cuando no puede enviar un mensaje de correo electrónico pueden ser genéricos.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-155">Fair warning, though: the error messages that ASP.NET reports when it can't send an email message can be generic.</span></span> <span data-ttu-id="7f1c7-156">Por ejemplo, si ASP.NET no puede ponerse en contacto con el servidor SMTP (por ejemplo, porque se ha producido un error en el nombre del servidor), el error se `Failure sending mail`.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-156">For example, if ASP.NET can't contact the SMTP server (for example, because you made an error in the server name), the error is `Failure sending mail`.</span></span>

    > [!NOTE] 
    > 
    > <span data-ttu-id="7f1c7-157">**Importante** Cuando reciba un mensaje de error de un objeto de excepción (`ex` en el código), *no* pase habitualmente ese mensaje a los usuarios.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-157">**Important** When you get an error message from an exception object (`ex` in the code), do *not* routinely pass that message through to users.</span></span> <span data-ttu-id="7f1c7-158">Los objetos de excepción suelen incluir información que los usuarios no deberían ver y que incluso pueden ser una vulnerabilidad de seguridad.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-158">Exception objects often include information that users should not see and that can even be a security vulnerability.</span></span> <span data-ttu-id="7f1c7-159">Esta es la razón por la que este código incluye la variable `debuggingFlag` que se utiliza como modificador para mostrar el mensaje de error y por qué la variable está establecida de forma predeterminada en false.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-159">That's why this code includes the variable `debuggingFlag` that's used as a switch to display the error message, and why the variable by default is set to false.</span></span> <span data-ttu-id="7f1c7-160">Debe establecer esa variable en true (y, por tanto, mostrar el mensaje de error) *solo* si tiene problemas para enviar correo electrónico y necesita depurar.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-160">You should set that variable to true (and therefore display the error message) *only* if you're having a problem with sending email and you need to debug.</span></span> <span data-ttu-id="7f1c7-161">Una vez corregidos los problemas, vuelva a establecer `debuggingFlag` en false.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-161">Once you have fixed any problems, set `debuggingFlag` back to false.</span></span>

    <span data-ttu-id="7f1c7-162">Modifique la siguiente configuración relacionada con el correo electrónico en el código:</span><span class="sxs-lookup"><span data-stu-id="7f1c7-162">Modify the following email related settings in the code:</span></span>

   - <span data-ttu-id="7f1c7-163">Establezca `your-SMTP-host` en el nombre del servidor SMTP al que tenga acceso.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-163">Set `your-SMTP-host` to the name of the SMTP server that you have access to.</span></span>
   - <span data-ttu-id="7f1c7-164">Establezca `your-user-name-here` en el nombre de usuario de la cuenta del servidor SMTP.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-164">Set `your-user-name-here` to the user name for your SMTP server account.</span></span>
   - <span data-ttu-id="7f1c7-165">Establezca `your-account-password` en la contraseña de la cuenta del servidor SMTP.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-165">Set `your-account-password` to the password for your SMTP server account.</span></span>
   - <span data-ttu-id="7f1c7-166">Establezca `your-email-address-here` en su propia dirección de correo electrónico.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-166">Set `your-email-address-here` to your own email address.</span></span> <span data-ttu-id="7f1c7-167">Esta es la dirección de correo electrónico desde la que se envía el mensaje.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-167">This is the email address that the message is sent from.</span></span> <span data-ttu-id="7f1c7-168">(Algunos proveedores de correo electrónico no permiten especificar una dirección de `From` diferente y usarán su nombre de usuario como dirección `From`).</span><span class="sxs-lookup"><span data-stu-id="7f1c7-168">(Some email providers don't let you specify a different `From` address and will use your user name as the `From` address.)</span></span>

     > [!TIP] 
     > 
     > <a id="configuring_email_settings"></a>
     > ### <a name="configuring-email-settings"></a><span data-ttu-id="7f1c7-169">Configuración del correo electrónico</span><span class="sxs-lookup"><span data-stu-id="7f1c7-169">Configuring Email Settings</span></span>
     > 
     > <span data-ttu-id="7f1c7-170">A veces, puede ser un reto asegurarse de que tiene la configuración correcta para el servidor SMTP, el número de puerto, etc.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-170">It can be a challenge sometimes to make sure you have the right settings for the SMTP server, port number, and so on.</span></span> <span data-ttu-id="7f1c7-171">A continuación se muestran algunas sugerencias:</span><span class="sxs-lookup"><span data-stu-id="7f1c7-171">Here are a few tips:</span></span>
     > 
     > - <span data-ttu-id="7f1c7-172">El nombre del servidor SMTP suele ser similar `smtp.provider.com` o `smtp.provider.net`.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-172">The SMTP server name is often something like `smtp.provider.com` or `smtp.provider.net`.</span></span> <span data-ttu-id="7f1c7-173">Sin embargo, si publica el sitio en un proveedor de hospedaje, es posible que el nombre del servidor SMTP en ese momento sea `localhost`.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-173">However, if you publish your site to a hosting provider, the SMTP server name at that point might be `localhost`.</span></span> <span data-ttu-id="7f1c7-174">Esto se debe a que, una vez que haya publicado y que el sitio se esté ejecutando en el servidor del proveedor, el servidor de correo electrónico podría ser local desde la perspectiva de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-174">This is because after you've published and your site is running on the provider's server, the email server might be local from the perspective of your application.</span></span> <span data-ttu-id="7f1c7-175">Este cambio en los nombres de servidor puede significar que debe cambiar el nombre del servidor SMTP como parte del proceso de publicación.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-175">This change in server names might mean you have to change the SMTP server name as part of your publishing process.</span></span>
     > - <span data-ttu-id="7f1c7-176">Normalmente, el número de puerto es 25.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-176">The port number is usually 25.</span></span> <span data-ttu-id="7f1c7-177">Sin embargo, algunos proveedores requieren que use el puerto 587 o algún otro puerto.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-177">However, some providers require you to use port 587 or some other port.</span></span>
     > - <span data-ttu-id="7f1c7-178">Asegúrese de usar las credenciales adecuadas.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-178">Make sure that you use the right credentials.</span></span> <span data-ttu-id="7f1c7-179">Si ha publicado el sitio en un proveedor de hospedaje, use las credenciales que el proveedor ha indicado específicamente como correo electrónico.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-179">If you've published your site to a hosting provider, use the credentials that the provider has specifically indicated are for email.</span></span> <span data-ttu-id="7f1c7-180">Pueden ser diferentes de las credenciales que se usan para publicar.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-180">These might be different from the credentials you use to publish.</span></span>
     > - <span data-ttu-id="7f1c7-181">En ocasiones, no se necesitan credenciales.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-181">Sometimes you don't need credentials at all.</span></span> <span data-ttu-id="7f1c7-182">Si va a enviar correo electrónico mediante su ISP personal, es posible que el proveedor de correo electrónico ya conozca sus credenciales.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-182">If you're sending email using your personal ISP, your email provider might already know your credentials.</span></span> <span data-ttu-id="7f1c7-183">Después de publicar, es posible que deba usar credenciales diferentes a las que se deben probar en el equipo local.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-183">After you publish, you might need to use different credentials than when you test on your local computer.</span></span>
     > - <span data-ttu-id="7f1c7-184">Si el proveedor de correo electrónico usa el cifrado, debe establecer `WebMail.EnableSsl` en `true`.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-184">If your email provider uses encryption, you have to set `WebMail.EnableSsl` to `true`.</span></span>
4. <span data-ttu-id="7f1c7-185">Ejecute la página *EmailRequest. cshtml* en un explorador.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-185">Run the *EmailRequest.cshtml* page in a browser.</span></span> <span data-ttu-id="7f1c7-186">(Asegúrese de que la página esté seleccionada en el área de trabajo **archivos** antes de ejecutarla).</span><span class="sxs-lookup"><span data-stu-id="7f1c7-186">(Make sure the page is selected in the **Files** workspace before you run it.)</span></span>
5. <span data-ttu-id="7f1c7-187">Escriba su nombre y una descripción del problema y, a continuación, haga clic en el botón **Enviar** .</span><span class="sxs-lookup"><span data-stu-id="7f1c7-187">Enter your name and a problem description, and then click the **Submit** button.</span></span> <span data-ttu-id="7f1c7-188">Se le redirigirá a la página *ProcessRequest. cshtml* , que confirma su mensaje y le envía un mensaje de correo electrónico.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-188">You're redirected to the *ProcessRequest.cshtml* page, which confirms your message and which sends you an email message.</span></span> 

    ![[imagen]](11-adding-email-to-your-web-site/_static/image2.jpg)

<a id="Sending_a_File"></a>
## <a name="sending-a-file-using-email"></a><span data-ttu-id="7f1c7-190">Envío de un archivo mediante correo electrónico</span><span class="sxs-lookup"><span data-stu-id="7f1c7-190">Sending a File Using Email</span></span>

<span data-ttu-id="7f1c7-191">También puede enviar archivos adjuntos a mensajes de correo electrónico.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-191">You can also send files that are attached to email messages.</span></span> <span data-ttu-id="7f1c7-192">En este procedimiento, creará un archivo de texto y dos páginas HTML.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-192">In this procedure, you create a text file and two HTML pages.</span></span> <span data-ttu-id="7f1c7-193">Usará el archivo de texto como datos adjuntos de correo electrónico.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-193">You'll use the text file as an email attachment.</span></span>

1. <span data-ttu-id="7f1c7-194">En el sitio web, agregue un nuevo archivo de texto y asígnele el nombre de *archivo. txt*.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-194">In the website, add a new text file and name it *MyFile.txt*.</span></span>
2. <span data-ttu-id="7f1c7-195">Copie el texto siguiente y péguelo en el archivo:</span><span class="sxs-lookup"><span data-stu-id="7f1c7-195">Copy the following text and paste it in the file:</span></span> 

    `Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.`
3. <span data-ttu-id="7f1c7-196">Cree una página denominada *sendfile. cshtml* y agregue el marcado siguiente:</span><span class="sxs-lookup"><span data-stu-id="7f1c7-196">Create a page named *SendFile.cshtml* and add the following markup:</span></span> 

    [!code-html[Main](11-adding-email-to-your-web-site/samples/sample3.html)]
4. <span data-ttu-id="7f1c7-197">Cree una página denominada *ProcessFile. cshtml* y agregue el marcado siguiente:</span><span class="sxs-lookup"><span data-stu-id="7f1c7-197">Create a page named *ProcessFile.cshtml* and add the following markup:</span></span> 

    [!code-cshtml[Main](11-adding-email-to-your-web-site/samples/sample4.cshtml)]
5. <span data-ttu-id="7f1c7-198">Modifique la siguiente configuración relacionada con el correo electrónico en el código del ejemplo:</span><span class="sxs-lookup"><span data-stu-id="7f1c7-198">Modify the following email related settings in the code from the example:</span></span>

    - <span data-ttu-id="7f1c7-199">Establezca `your-SMTP-host` en el nombre de un servidor SMTP al que tenga acceso.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-199">Set `your-SMTP-host` to the name of an SMTP server that you have access to.</span></span>
    - <span data-ttu-id="7f1c7-200">Establezca `your-user-name-here` en el nombre de usuario de la cuenta del servidor SMTP.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-200">Set `your-user-name-here` to the user name for your SMTP server account.</span></span>
    - <span data-ttu-id="7f1c7-201">Establezca `your-email-address-here` en su propia dirección de correo electrónico.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-201">Set `your-email-address-here` to your own email address.</span></span> <span data-ttu-id="7f1c7-202">Esta es la dirección de correo electrónico desde la que se envía el mensaje.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-202">This is the email address that the message is sent from.</span></span>
    - <span data-ttu-id="7f1c7-203">Establezca `your-account-password` en la contraseña de la cuenta del servidor SMTP.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-203">Set `your-account-password` to the password for your SMTP server account.</span></span>
    - <span data-ttu-id="7f1c7-204">Establezca `target-email-address-here` en su propia dirección de correo electrónico.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-204">Set `target-email-address-here` to your own email address.</span></span> <span data-ttu-id="7f1c7-205">(Como antes, normalmente enviaría un correo electrónico a otra persona, pero para realizar pruebas, puede enviarlo a sí mismo).</span><span class="sxs-lookup"><span data-stu-id="7f1c7-205">(As before, you'd normally send an email to someone else, but for testing, you can send it to yourself.)</span></span>
6. <span data-ttu-id="7f1c7-206">Ejecute la página *sendfile. cshtml* en un explorador.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-206">Run the *SendFile.cshtml* page in a browser.</span></span>
7. <span data-ttu-id="7f1c7-207">Escriba su nombre, una línea de asunto y el nombre del archivo de texto que se va a adjuntar (*archivo. txt*).</span><span class="sxs-lookup"><span data-stu-id="7f1c7-207">Enter your name, a subject line, and the name of the text file to attach (*MyFile.txt*).</span></span>
8. <span data-ttu-id="7f1c7-208">Haga clic en el botón `Submit`.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-208">Click the `Submit` button.</span></span> <span data-ttu-id="7f1c7-209">Como antes, se le redirigirá a la página *ProcessFile. cshtml* , que confirma su mensaje y le envía un mensaje de correo electrónico con el archivo adjunto.</span><span class="sxs-lookup"><span data-stu-id="7f1c7-209">As before, you're redirected to the *ProcessFile.cshtml* page, which confirms your message and which sends you an email message with the attached file.</span></span>

<a id="Additional_Resources"></a>
## <a name="additional-resources"></a><span data-ttu-id="7f1c7-210">Recursos adicionales</span><span class="sxs-lookup"><span data-stu-id="7f1c7-210">Additional Resources</span></span>

- [<span data-ttu-id="7f1c7-211">Guía de solución de problemas de ASP.NET Web Pages (Razor)</span><span class="sxs-lookup"><span data-stu-id="7f1c7-211">ASP.NET Web Pages (Razor) Troubleshooting Guide</span></span>](https://go.microsoft.com/fwlink/?LinkId=253001)
- [<span data-ttu-id="7f1c7-212">Protocolo simple de transferencia de correo</span><span class="sxs-lookup"><span data-stu-id="7f1c7-212">Simple Mail Transfer Protocol</span></span>](https://msdn.microsoft.com/library/aa480435.aspx)
- [<span data-ttu-id="7f1c7-213">Personalizar el comportamiento de todo el sitio para ASP.NET Web Pages</span><span class="sxs-lookup"><span data-stu-id="7f1c7-213">Customizing Site-Wide Behavior for ASP.NET Web Pages</span></span>](https://go.microsoft.com/fwlink/?LinkId=202906)
