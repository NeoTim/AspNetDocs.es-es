---
uid: web-forms/overview/deployment/web-deployment-in-the-enterprise/deploying-database-projects
title: Implementar proyectos de base de datos | Microsoft Docs
author: jrjlee
description: 'Nota: en muchos escenarios de implementación empresarial, necesita la capacidad de publicar actualizaciones incrementales en una base de datos implementada. La alternativa consiste en volver a crear...'
ms.author: riande
ms.date: 05/04/2012
ms.assetid: 832f226a-1aa3-4093-8c29-ce4196793259
msc.legacyurl: /web-forms/overview/deployment/web-deployment-in-the-enterprise/deploying-database-projects
msc.type: authoredcontent
ms.openlocfilehash: 221808758492aedb8e8329364e511df28fd11105
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 03/06/2020
ms.locfileid: "78514945"
---
# <a name="deploying-database-projects"></a><span data-ttu-id="9662f-104">Implementar proyectos de base de datos</span><span class="sxs-lookup"><span data-stu-id="9662f-104">Deploying Database Projects</span></span>

<span data-ttu-id="9662f-105">por [Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="9662f-105">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="9662f-106">Descargar PDF</span><span class="sxs-lookup"><span data-stu-id="9662f-106">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> [!NOTE]
> <span data-ttu-id="9662f-107">En muchos escenarios de implementación empresarial, se necesita la capacidad de publicar actualizaciones incrementales en una base de datos implementada.</span><span class="sxs-lookup"><span data-stu-id="9662f-107">In lots of enterprise deployment scenarios, you need the ability to publish incremental updates to a deployed database.</span></span> <span data-ttu-id="9662f-108">La alternativa consiste en volver a crear la base de datos en cada implementación, lo que significa que se pierden todos los datos de la base de datos existente.</span><span class="sxs-lookup"><span data-stu-id="9662f-108">The alternative is to recreate the database on every deployment, which means you lose any data in the existing database.</span></span> <span data-ttu-id="9662f-109">Cuando se trabaja con Visual Studio 2010, el uso de VSDBCMD es el enfoque recomendado para la publicación incremental de bases de datos.</span><span class="sxs-lookup"><span data-stu-id="9662f-109">When you work with Visual Studio 2010, using VSDBCMD is the recommended approach to incremental database publishing.</span></span> <span data-ttu-id="9662f-110">Sin embargo, la siguiente versión de Visual Studio y la canalización de publicación web (WPP) incluirán herramientas que admiten la publicación incremental directamente.</span><span class="sxs-lookup"><span data-stu-id="9662f-110">However, the next version of Visual Studio and the Web Publishing Pipeline (WPP) will include tooling that supports incremental publishing directly.</span></span>

<span data-ttu-id="9662f-111">Si abre la solución de ejemplo Contact Manager en Visual Studio 2010, verá que el proyecto de base de datos incluye una carpeta propiedades que contiene cuatro archivos.</span><span class="sxs-lookup"><span data-stu-id="9662f-111">If you open the Contact Manager sample solution in Visual Studio 2010, you'll see that the database project includes a Properties folder that contains four files.</span></span>

![](deploying-database-projects/_static/image1.png)

<span data-ttu-id="9662f-112">Junto con el archivo de proyecto (*ContactManager. Database. dbproj* en este caso), estos archivos controlan distintos aspectos del proceso de compilación e implementación:</span><span class="sxs-lookup"><span data-stu-id="9662f-112">Together with the project file (*ContactManager.Database.dbproj* in this case), these files control various aspects of the build and deployment process:</span></span>

- <span data-ttu-id="9662f-113">El archivo *Database. sqlcmdvars* proporciona valores para las variables SQLCMD que se usan al implementar el proyecto.</span><span class="sxs-lookup"><span data-stu-id="9662f-113">The *Database.sqlcmdvars* file provides values for any SQLCMD variables you use when you deploy the project.</span></span> <span data-ttu-id="9662f-114">Cada configuración de soluciones (por ejemplo, depuración y lanzamiento) puede especificar un archivo. sqlcmdvars diferente.</span><span class="sxs-lookup"><span data-stu-id="9662f-114">Each solution configuration (for example, debug and release) can specify a different .sqlcmdvars file.</span></span>
- <span data-ttu-id="9662f-115">El archivo *Database. sqldeployment* proporciona la configuración específica de la implementación, como si se va a usar la intercalación definida en el proyecto o la intercalación del servidor de destino, si se debe volver a crear la base de datos de destino cada vez o simplemente se debe modificar la base de datos existente para actualizarla y así sucesivamente.</span><span class="sxs-lookup"><span data-stu-id="9662f-115">The *Database.sqldeployment* file provides deployment-specific settings, like whether to use the collation defined in your project or the collation of the destination server, whether to recreate the destination database every time or simply amend the existing database to bring it up to date, and so on.</span></span> <span data-ttu-id="9662f-116">Cada configuración de soluciones puede especificar un archivo. sqldeployment diferente.</span><span class="sxs-lookup"><span data-stu-id="9662f-116">Each solution configuration can specify a different .sqldeployment file.</span></span>
- <span data-ttu-id="9662f-117">El archivo *Database. sqlpermissions* es un documento XML que puede utilizar para definir los permisos que desee agregar a la base de datos de destino.</span><span class="sxs-lookup"><span data-stu-id="9662f-117">The *Database.sqlpermissions* file is an XML document that you can use to define any permissions you want to add to the target database.</span></span> <span data-ttu-id="9662f-118">Todas las configuraciones de soluciones comparten el mismo archivo. sqlpermissions.</span><span class="sxs-lookup"><span data-stu-id="9662f-118">All solution configurations share the same .sqlpermissions file.</span></span>
- <span data-ttu-id="9662f-119">El archivo *Database. sqlsettings* especifica las propiedades de nivel de base de datos que se van a utilizar al crear la base de datos, como la intercalación que se va a usar, el comportamiento de los operadores de comparación, etc.</span><span class="sxs-lookup"><span data-stu-id="9662f-119">The *Database.sqlsettings* file specifies the database-level properties to use when creating the database, like the collation to use, the behavior of comparison operators, and so on.</span></span> <span data-ttu-id="9662f-120">Todas las configuraciones de soluciones comparten el mismo archivo. sqlsettings.</span><span class="sxs-lookup"><span data-stu-id="9662f-120">All solution configurations share the same .sqlsettings file.</span></span>

<span data-ttu-id="9662f-121">Merece la pena dedicar un momento a abrir estos archivos en Visual Studio y familiarizarse con el contenido.</span><span class="sxs-lookup"><span data-stu-id="9662f-121">It's worth taking a moment to open these files in Visual Studio and familiarize yourself with the contents.</span></span>

<span data-ttu-id="9662f-122">Al compilar un proyecto de base de datos, el proceso de compilación crea dos archivos:</span><span class="sxs-lookup"><span data-stu-id="9662f-122">When you build a database project, the build process creates two files:</span></span>

- <span data-ttu-id="9662f-123">Un *esquema* de la base de datos (archivo. dbschema).</span><span class="sxs-lookup"><span data-stu-id="9662f-123">A *database schema* (.dbschema file).</span></span> <span data-ttu-id="9662f-124">Esto describe el esquema de la base de datos que desea crear en formato XML.</span><span class="sxs-lookup"><span data-stu-id="9662f-124">This describes the schema of the database you want to create in XML format.</span></span>
- <span data-ttu-id="9662f-125">Un *manifiesto de implementación* (archivo. DeployManifest).</span><span class="sxs-lookup"><span data-stu-id="9662f-125">A *deployment manifest* (.deploymanifest file).</span></span> <span data-ttu-id="9662f-126">Contiene toda la información necesaria para crear e implementar la base de datos.</span><span class="sxs-lookup"><span data-stu-id="9662f-126">This contains all the information required to create and deploy your database.</span></span> <span data-ttu-id="9662f-127">Hace referencia al archivo. dbschema junto con otros recursos, como las instrucciones de implementación (el archivo. sqldeployment) y cualquier script SQL anterior a la implementación o posterior a la implementación.</span><span class="sxs-lookup"><span data-stu-id="9662f-127">It references the .dbschema file along with other resources, like the deployment instructions (the .sqldeployment file) and any pre-deployment or post-deployment SQL scripts.</span></span>

<span data-ttu-id="9662f-128">Esto muestra la relación entre estos recursos:</span><span class="sxs-lookup"><span data-stu-id="9662f-128">This shows the relationship between these resources:</span></span>

![](deploying-database-projects/_static/image2.png)

<span data-ttu-id="9662f-129">Como puede ver, el archivo. sqlsettings y el archivo. sqlpermissions son entradas para el proceso de compilación.</span><span class="sxs-lookup"><span data-stu-id="9662f-129">As you can see, the .sqlsettings file and the .sqlpermissions file are inputs to the build process.</span></span> <span data-ttu-id="9662f-130">Junto con el archivo de proyecto de base de datos, estos archivos se usan para crear el archivo de esquema de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="9662f-130">Along with the database project file, these files are used to create the database schema file.</span></span> <span data-ttu-id="9662f-131">El archivo. sqldeployment y el archivo. sqlcmdvars pasan por el proceso de compilación sin cambios.</span><span class="sxs-lookup"><span data-stu-id="9662f-131">The .sqldeployment file and the .sqlcmdvars file pass through the build process unchanged.</span></span> <span data-ttu-id="9662f-132">El manifiesto de implementación indica la ubicación del esquema de la base de datos, el archivo. sqldeployment, el archivo. sqlcmdvars y cualquier script SQL anterior a la implementación o posterior a la implementación.</span><span class="sxs-lookup"><span data-stu-id="9662f-132">The deployment manifest indicates the location of the database schema, the .sqldeployment file, the .sqlcmdvars file, and any pre-deployment or post-deployment SQL scripts.</span></span>

## <a name="why-use-vsdbcmd-to-deploy-a-database-project"></a><span data-ttu-id="9662f-133">¿Por qué usar VSDBCMD para implementar un proyecto de base de datos?</span><span class="sxs-lookup"><span data-stu-id="9662f-133">Why Use VSDBCMD to Deploy a Database Project?</span></span>

<span data-ttu-id="9662f-134">Hay varios enfoques diferentes para implementar proyectos de base de datos.</span><span class="sxs-lookup"><span data-stu-id="9662f-134">There are various different approaches to deploying database projects.</span></span> <span data-ttu-id="9662f-135">Sin embargo, no todas ellas son adecuadas para implementar un proyecto de base de datos en servidores remotos en un entorno empresarial.</span><span class="sxs-lookup"><span data-stu-id="9662f-135">However, not all of them are suitable for deploying a database project to remote servers in an enterprise environment.</span></span> <span data-ttu-id="9662f-136">Considere lo que desea en la implementación de un proyecto de base de datos.</span><span class="sxs-lookup"><span data-stu-id="9662f-136">Consider what you want from a database project deployment.</span></span> <span data-ttu-id="9662f-137">En escenarios de implementación empresarial, es probable que desee:</span><span class="sxs-lookup"><span data-stu-id="9662f-137">In enterprise deployment scenarios, you're likely to want:</span></span>

- <span data-ttu-id="9662f-138">La capacidad de implementar el proyecto de base de datos desde una ubicación remota.</span><span class="sxs-lookup"><span data-stu-id="9662f-138">The ability to deploy the database project from a remote location.</span></span>
- <span data-ttu-id="9662f-139">La capacidad de hacer actualizaciones incrementales en una base de datos existente.</span><span class="sxs-lookup"><span data-stu-id="9662f-139">The ability to make incremental updates to an existing database.</span></span>
- <span data-ttu-id="9662f-140">La capacidad de incluir scripts anteriores o posteriores a la implementación.</span><span class="sxs-lookup"><span data-stu-id="9662f-140">The ability to include pre-deployment scripts or post-deployment scripts.</span></span>
- <span data-ttu-id="9662f-141">La capacidad de personalizar la implementación en varios entornos de destino.</span><span class="sxs-lookup"><span data-stu-id="9662f-141">The ability to tailor the deployment to multiple destination environments.</span></span>
- <span data-ttu-id="9662f-142">La capacidad de implementar el proyecto de base de datos como parte de una implementación de soluciones de un solo paso más grande, con scripts.</span><span class="sxs-lookup"><span data-stu-id="9662f-142">The ability to deploy the database project as part of a larger, typically scripted, single-step solution deployment.</span></span>

<span data-ttu-id="9662f-143">Existen tres enfoques principales que puede usar para implementar un proyecto de base de datos:</span><span class="sxs-lookup"><span data-stu-id="9662f-143">There are three main approaches you can use to deploy a database project:</span></span>

- <span data-ttu-id="9662f-144">Puede usar la funcionalidad de implementación con el tipo de proyecto de base de datos en Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="9662f-144">You can use the deployment functionality with the database project type in Visual Studio 2010.</span></span> <span data-ttu-id="9662f-145">Al compilar e implementar un proyecto de base de datos en Visual Studio 2010, el proceso de implementación utiliza el manifiesto de implementación para generar un archivo de implementación basado en SQL específico para la configuración de compilación.</span><span class="sxs-lookup"><span data-stu-id="9662f-145">When you build and deploy a database project in Visual Studio 2010, the deployment process uses the deployment manifest to generate a SQL-based deployment file specific to the build configuration.</span></span> <span data-ttu-id="9662f-146">Esto creará la base de datos si aún no existe o realizará los cambios necesarios en la base de datos si ya existe.</span><span class="sxs-lookup"><span data-stu-id="9662f-146">This will create the database if it doesn't already exist or make any necessary changes to the database if it does already exist.</span></span> <span data-ttu-id="9662f-147">Puede usar SQLCMD. exe para ejecutar este archivo en el servidor de destino o puede establecer Visual Studio para crear y ejecutar el archivo.</span><span class="sxs-lookup"><span data-stu-id="9662f-147">You can use SQLCMD.exe to run this file on your destination server, or you can set Visual Studio to create and run the file.</span></span> <span data-ttu-id="9662f-148">El inconveniente de este enfoque es que solo tiene un control limitado sobre la configuración de implementación.</span><span class="sxs-lookup"><span data-stu-id="9662f-148">The disadvantage of this approach is that you have only limited control over the deployment settings.</span></span> <span data-ttu-id="9662f-149">A menudo, es posible que también necesite modificar el archivo de implementación de SQL para proporcionar valores de variable específicos del entorno.</span><span class="sxs-lookup"><span data-stu-id="9662f-149">You may often also need to modify the SQL deployment file to provide environment-specific variable values.</span></span> <span data-ttu-id="9662f-150">Este enfoque solo se puede usar desde un equipo que tenga instalado Visual Studio 2010 y el desarrollador deberá conocer y proporcionar las cadenas de conexión y las credenciales para todos los entornos de destino.</span><span class="sxs-lookup"><span data-stu-id="9662f-150">You can only use this approach from a computer with Visual Studio 2010 installed, and the developer would need to know and provide connection strings and credentials for all destination environments.</span></span>
- <span data-ttu-id="9662f-151">Puede usar la herramienta de implementación web (Web Deploy) de Internet Information Services (IIS) para [implementar una base de datos como parte de un proyecto de aplicación web](https://msdn.microsoft.com/library/dd465343.aspx).</span><span class="sxs-lookup"><span data-stu-id="9662f-151">You can use the Internet Information Services (IIS) Web Deployment Tool (Web Deploy) to [deploy a database as part of a web application project](https://msdn.microsoft.com/library/dd465343.aspx).</span></span> <span data-ttu-id="9662f-152">Sin embargo, este enfoque es mucho más complejo si desea implementar un proyecto de base de datos en lugar de replicar simplemente una base de datos local existente en un servidor de destino.</span><span class="sxs-lookup"><span data-stu-id="9662f-152">However, this approach is a lot more complex if you want to deploy a database project rather than simply replicate an existing local database on a destination server.</span></span> <span data-ttu-id="9662f-153">Puede configurar Web Deploy para ejecutar el script de implementación de SQL que genera el proyecto de base de datos, pero para ello debe crear un archivo de destinos WPP personalizado para el proyecto de aplicación Web.</span><span class="sxs-lookup"><span data-stu-id="9662f-153">You can configure Web Deploy to run the SQL deployment script that the database project generates, but in order to do this, you need to create a custom WPP targets file for your web application project.</span></span> <span data-ttu-id="9662f-154">Esto agrega una cantidad considerable de complejidad al proceso de implementación.</span><span class="sxs-lookup"><span data-stu-id="9662f-154">This adds a substantial amount of complexity to the deployment process.</span></span> <span data-ttu-id="9662f-155">Además, Web Deploy no admite directamente las actualizaciones incrementales de las bases de datos existentes.</span><span class="sxs-lookup"><span data-stu-id="9662f-155">In addition, Web Deploy does not directly support incremental updates to existing databases.</span></span> <span data-ttu-id="9662f-156">Para obtener más información sobre este enfoque, vea [extender la canalización de publicación web al proyecto de base de datos de paquete implementado de SQL](https://go.microsoft.com/?linkid=9805121).</span><span class="sxs-lookup"><span data-stu-id="9662f-156">For more information on this approach, see [Extending the Web Publishing Pipeline to package database project deployed SQL file](https://go.microsoft.com/?linkid=9805121).</span></span>
- <span data-ttu-id="9662f-157">Puede usar la utilidad VSDBCMD para implementar la base de datos, mediante el esquema de la base de datos o el manifiesto de implementación.</span><span class="sxs-lookup"><span data-stu-id="9662f-157">You can use the VSDBCMD utility to deploy the database, using either the database schema or the deployment manifest.</span></span> <span data-ttu-id="9662f-158">Puede llamar a VSDBCMD. exe desde un destino de MSBuild, que le permite publicar bases de datos como parte de un proceso de implementación de script mayor.</span><span class="sxs-lookup"><span data-stu-id="9662f-158">You can call VSDBCMD.exe from an MSBuild target, which lets you publish databases as part of a larger, scripted deployment process.</span></span> <span data-ttu-id="9662f-159">Puede invalidar las variables en el archivo. sqlcmdvars y muchas otras propiedades de la base de datos desde un comando de VSDBCMD, que le permite personalizar la implementación para diferentes entornos sin crear varias configuraciones de compilación.</span><span class="sxs-lookup"><span data-stu-id="9662f-159">You can override the variables in your .sqlcmdvars file and lots of other database properties from a VSDBCMD command, which allows you to customize your deployment for different environments without creating multiple build configurations.</span></span> <span data-ttu-id="9662f-160">VSDBCMD proporciona funcionalidad de diferenciación, lo que significa que solo realizará los cambios necesarios para alinear una base de datos de destino con el esquema de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="9662f-160">VSDBCMD provides differentiation functionality, which means it will make only the necessary changes to align a destination database with your database schema.</span></span> <span data-ttu-id="9662f-161">VSDBCMD también ofrece una amplia gama de opciones de línea de comandos, que proporcionan un control exhaustivo sobre el proceso de implementación.</span><span class="sxs-lookup"><span data-stu-id="9662f-161">VSDBCMD also offers a wide range of command-line options, which give you fine-grained control over the deployment process.</span></span>

<span data-ttu-id="9662f-162">En esta información general, puede ver que el uso de VSDBCMD con MSBuild es el método más adecuado para un escenario de implementación empresarial típico:</span><span class="sxs-lookup"><span data-stu-id="9662f-162">From this overview, you can see that using VSDBCMD with MSBuild is the approach best suited to a typical enterprise deployment scenario:</span></span>

|  | <span data-ttu-id="9662f-163">Visual Studio 2010</span><span class="sxs-lookup"><span data-stu-id="9662f-163">Visual Studio 2010</span></span> | <span data-ttu-id="9662f-164">Web Deploy 2.0</span><span class="sxs-lookup"><span data-stu-id="9662f-164">Web Deploy 2.0</span></span> | <span data-ttu-id="9662f-165">VSDBCMD.exe</span><span class="sxs-lookup"><span data-stu-id="9662f-165">VSDBCMD.exe</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="9662f-166">¿Admite la implementación remota?</span><span class="sxs-lookup"><span data-stu-id="9662f-166">Supports remote deployment?</span></span> | <span data-ttu-id="9662f-167">Sí</span><span class="sxs-lookup"><span data-stu-id="9662f-167">Yes</span></span> | <span data-ttu-id="9662f-168">Sí</span><span class="sxs-lookup"><span data-stu-id="9662f-168">Yes</span></span> | <span data-ttu-id="9662f-169">Sí</span><span class="sxs-lookup"><span data-stu-id="9662f-169">Yes</span></span> |
| <span data-ttu-id="9662f-170">¿Admite actualizaciones incrementales?</span><span class="sxs-lookup"><span data-stu-id="9662f-170">Supports incremental updates?</span></span> | <span data-ttu-id="9662f-171">Sí</span><span class="sxs-lookup"><span data-stu-id="9662f-171">Yes</span></span> | <span data-ttu-id="9662f-172">No</span><span class="sxs-lookup"><span data-stu-id="9662f-172">No</span></span> | <span data-ttu-id="9662f-173">Sí</span><span class="sxs-lookup"><span data-stu-id="9662f-173">Yes</span></span> |
| <span data-ttu-id="9662f-174">¿Admite scripts anteriores o posteriores a la implementación?</span><span class="sxs-lookup"><span data-stu-id="9662f-174">Supports pre/post-deployment scripts?</span></span> | <span data-ttu-id="9662f-175">Sí</span><span class="sxs-lookup"><span data-stu-id="9662f-175">Yes</span></span> | <span data-ttu-id="9662f-176">Sí</span><span class="sxs-lookup"><span data-stu-id="9662f-176">Yes</span></span> | <span data-ttu-id="9662f-177">Sí</span><span class="sxs-lookup"><span data-stu-id="9662f-177">Yes</span></span> |
| <span data-ttu-id="9662f-178">¿Admite la implementación en varios entornos?</span><span class="sxs-lookup"><span data-stu-id="9662f-178">Supports multi-environment deployment?</span></span> | <span data-ttu-id="9662f-179">Limitado</span><span class="sxs-lookup"><span data-stu-id="9662f-179">Limited</span></span> | <span data-ttu-id="9662f-180">Limitado</span><span class="sxs-lookup"><span data-stu-id="9662f-180">Limited</span></span> | <span data-ttu-id="9662f-181">Sí</span><span class="sxs-lookup"><span data-stu-id="9662f-181">Yes</span></span> |
| <span data-ttu-id="9662f-182">¿Admite la implementación con scripts?</span><span class="sxs-lookup"><span data-stu-id="9662f-182">Supports scripted deployment?</span></span> | <span data-ttu-id="9662f-183">Limitado</span><span class="sxs-lookup"><span data-stu-id="9662f-183">Limited</span></span> | <span data-ttu-id="9662f-184">Sí</span><span class="sxs-lookup"><span data-stu-id="9662f-184">Yes</span></span> | <span data-ttu-id="9662f-185">Sí</span><span class="sxs-lookup"><span data-stu-id="9662f-185">Yes</span></span> |

<span data-ttu-id="9662f-186">En el resto de este tema se describe el uso de VSDBCMD con MSBuild para implementar proyectos de base de datos.</span><span class="sxs-lookup"><span data-stu-id="9662f-186">The remainder of this topic describes the use of VSDBCMD with MSBuild to deploy database projects.</span></span>

## <a name="understanding-the-deployment-process"></a><span data-ttu-id="9662f-187">Descripción del proceso de implementación</span><span class="sxs-lookup"><span data-stu-id="9662f-187">Understanding the Deployment Process</span></span>

<span data-ttu-id="9662f-188">La utilidad VSDBCMD permite implementar una base de datos mediante el esquema de la base de datos (el archivo. dbschema) o el manifiesto de implementación (el archivo. DeployManifest).</span><span class="sxs-lookup"><span data-stu-id="9662f-188">The VSDBCMD utility lets you deploy a database using either the database schema (the .dbschema file) or the deployment manifest (the .deploymanifest file).</span></span> <span data-ttu-id="9662f-189">En la práctica, casi siempre usará el manifiesto de implementación, ya que el manifiesto de implementación le permite proporcionar valores predeterminados para varias propiedades de implementación e identificar cualquier script SQL anterior o posterior a la implementación que desee ejecutar.</span><span class="sxs-lookup"><span data-stu-id="9662f-189">In practice, you'll almost always use the deployment manifest, as the deployment manifest lets you provide default values for various deployment properties and identify any pre-deployment or post-deployment SQL scripts you want to run.</span></span> <span data-ttu-id="9662f-190">Por ejemplo, este comando de VSDBCMD se usa para implementar la base de datos **ContactManager** en un servidor de base de datos en un entorno de prueba:</span><span class="sxs-lookup"><span data-stu-id="9662f-190">For example, this VSDBCMD command is used to deploy the **ContactManager** database to a database server in a test environment:</span></span>

[!code-console[Main](deploying-database-projects/samples/sample1.cmd)]

<span data-ttu-id="9662f-191">En este caso:</span><span class="sxs-lookup"><span data-stu-id="9662f-191">In this case:</span></span>

- <span data-ttu-id="9662f-192">El modificador **/a** (o **/Action**) especifica lo que desea que realice VSDBCMD.</span><span class="sxs-lookup"><span data-stu-id="9662f-192">The **/a** (or **/Action**) switch specifies what you want VSDBCMD to do.</span></span> <span data-ttu-id="9662f-193">Puede establecer esta configuración en **importar** o **implementar**.</span><span class="sxs-lookup"><span data-stu-id="9662f-193">You can set this to **Import** or **Deploy**.</span></span> <span data-ttu-id="9662f-194">La opción de **importación** se usa para generar un archivo. dbschema a partir de una base de datos existente y la opción **implementar** se usa para implementar un archivo. dbschema en una base de datos de destino.</span><span class="sxs-lookup"><span data-stu-id="9662f-194">The **Import** option is used to generate a .dbschema file from an existing database, and the **Deploy** option is used to deploy a .dbschema file to a target database.</span></span>
- <span data-ttu-id="9662f-195">El modificador **/manifest** (o **/ManifestFile**) identifica el archivo. DeployManifest que desea implementar.</span><span class="sxs-lookup"><span data-stu-id="9662f-195">The **/manifest** (or **/ManifestFile**) switch identifies the .deploymanifest file you want to deploy.</span></span> <span data-ttu-id="9662f-196">Si desea utilizar el archivo. dbschema en su lugar, debe usar el modificador **/Model** (o **/ModelFile**).</span><span class="sxs-lookup"><span data-stu-id="9662f-196">If you wanted to use the .dbschema file instead, you'd use the **/model** (or **/ModelFile**) switch.</span></span>
- <span data-ttu-id="9662f-197">El modificador **/CS** (o **/ConnectionString**) proporciona la cadena de conexión para el servidor de base de datos de destino.</span><span class="sxs-lookup"><span data-stu-id="9662f-197">The **/cs** (or **/ConnectionString**) switch provides the connection string for the target database server.</span></span> <span data-ttu-id="9662f-198">Tenga en cuenta que esto no incluye el nombre de&#x2014;la base de datos que VSDBCMD debe conectarse al servidor para crear la base de datos. no es necesario conectarse a una base de datos individual.</span><span class="sxs-lookup"><span data-stu-id="9662f-198">Note that this doesn't include the name of the database&#x2014;VSDBCMD needs to connect to the server to create the database; it doesn't need to connect to an individual database.</span></span> <span data-ttu-id="9662f-199">Si el archivo. DeployManifest incluye una cadena de conexión, puede omitir este modificador.</span><span class="sxs-lookup"><span data-stu-id="9662f-199">If your .deploymanifest file includes a connection string, you can omit this switch.</span></span> <span data-ttu-id="9662f-200">Si usa el modificador de todos modos, el valor del modificador invalidará el valor de. DeployManifest.</span><span class="sxs-lookup"><span data-stu-id="9662f-200">If you use the switch anyway, the switch value will override the .deploymanifest value.</span></span>
- <span data-ttu-id="9662f-201">La propiedad <strong>/p: TargetDatabase</strong> proporciona el nombre que desea asignar a la base de datos de destino durante la creación.</span><span class="sxs-lookup"><span data-stu-id="9662f-201">The <strong>/p:TargetDatabase</strong> property provides the name you want to assign to the target database on creation.</span></span> <span data-ttu-id="9662f-202">Esto invalida el valor de la propiedad <strong>TargetDatabase</strong> en el archivo. DeployManifest.</span><span class="sxs-lookup"><span data-stu-id="9662f-202">This overrides the value of the <strong>TargetDatabase</strong> property in the .deploymanifest file.</span></span> <span data-ttu-id="9662f-203">Puede usar la sintaxis <strong>/p:</strong> <em>[nombre de propiedad]</em>para establecer una gran variedad de propiedades de implementación e INvalidar las variables SQLCMD declaradas en el archivo. sqlcmdvars.</span><span class="sxs-lookup"><span data-stu-id="9662f-203">You can use the <strong>/p:</strong> <em>[property name]</em>syntax to set a wide variety of deployment properties and to override any SQLCMD variables declared in your .sqlcmdvars file.</span></span>
- <span data-ttu-id="9662f-204">El modificador de **/DD +** (o **/DeployToDatabase +** ) indica que desea crear una implementación e implementarla en el entorno de destino.</span><span class="sxs-lookup"><span data-stu-id="9662f-204">The **/dd+** (or **/DeployToDatabase+**) switch indicates that you want to create a deployment and deploy it to the target environment.</span></span> <span data-ttu-id="9662f-205">Si especifica **/DD-** u omitir el modificador, VSDBCMD generará un script de implementación, pero no lo implementará en el entorno de destino.</span><span class="sxs-lookup"><span data-stu-id="9662f-205">If you specify **/dd-**, or omit the switch, VSDBCMD will generate a deployment script but will not deploy it to the target environment.</span></span> <span data-ttu-id="9662f-206">Este modificador suele ser el origen de confusión y se explica con más detalle en la sección siguiente.</span><span class="sxs-lookup"><span data-stu-id="9662f-206">This switch is often the source of confusion and is explained in more detail in the next section.</span></span>
- <span data-ttu-id="9662f-207">El modificador **/script** (o **/DeploymentScriptFile**) especifica dónde desea generar el script de implementación.</span><span class="sxs-lookup"><span data-stu-id="9662f-207">The **/script** (or **/DeploymentScriptFile**) switch specifies where you want to generate the deployment script.</span></span> <span data-ttu-id="9662f-208">Este valor no afecta al proceso de implementación.</span><span class="sxs-lookup"><span data-stu-id="9662f-208">This value does not affect the deployment process.</span></span>

<span data-ttu-id="9662f-209">Para obtener más información sobre VSDBCMD, vea [referencia de la línea de comandos para VSDBCMD. EXE (implementación y importación de esquema)](https://msdn.microsoft.com/library/dd193283.aspx) y [Cómo: preparar una base de datos para la implementación desde un símbolo del sistema mediante VSDBCMD. EXE](https://msdn.microsoft.com/library/dd193258.aspx).</span><span class="sxs-lookup"><span data-stu-id="9662f-209">For more information on VSDBCMD, see [Command-Line Reference for VSDBCMD.EXE (Deployment and Schema Import)](https://msdn.microsoft.com/library/dd193283.aspx) and [How to: Prepare a Database for Deployment From a Command Prompt by Using VSDBCMD.EXE](https://msdn.microsoft.com/library/dd193258.aspx).</span></span>

<span data-ttu-id="9662f-210">Para obtener un ejemplo de cómo se puede usar VSDBCMD desde un archivo de proyecto de MSBuild, vea [Descripción del proceso de compilación](understanding-the-build-process.md).</span><span class="sxs-lookup"><span data-stu-id="9662f-210">For an example of how you can use VSDBCMD from an MSBuild project file, see [Understanding the Build Process](understanding-the-build-process.md).</span></span> <span data-ttu-id="9662f-211">Para ver ejemplos de cómo configurar las opciones de implementación de bases de datos para varios entornos, consulte [Personalización de implementaciones de bases de datos para varios entornos](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span><span class="sxs-lookup"><span data-stu-id="9662f-211">For examples of how to configure database deployment settings for multiple environments, see [Customizing Database Deployments for Multiple Environments](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span></span>

## <a name="understanding-the-deploytodatabase-switch"></a><span data-ttu-id="9662f-212">Descripción del modificador DeployToDatabase</span><span class="sxs-lookup"><span data-stu-id="9662f-212">Understanding the DeployToDatabase Switch</span></span>

<span data-ttu-id="9662f-213">El comportamiento del modificador **/DD** o **/DeployToDatabase** depende de si está usando VSDBCMD con un archivo. dbschema o un archivo. DeployManifest.</span><span class="sxs-lookup"><span data-stu-id="9662f-213">The behavior of the **/dd** or **/DeployToDatabase** switch depends on whether you're using VSDBCMD with a .dbschema file or a .deploymanifest file.</span></span> <span data-ttu-id="9662f-214">Si utiliza un archivo. dbschema, el comportamiento es bastante sencillo:</span><span class="sxs-lookup"><span data-stu-id="9662f-214">If you're using a .dbschema file, the behavior is fairly straightforward:</span></span>

- <span data-ttu-id="9662f-215">Si especifica **/DD +** o **/DD**, VSDBCMD generará un script de implementación e implementará la base de datos.</span><span class="sxs-lookup"><span data-stu-id="9662f-215">If you specify **/dd+** or **/dd**, VSDBCMD will generate a deployment script and deploy the database.</span></span>
- <span data-ttu-id="9662f-216">Si especifica **/DD-** u omite el modificador, VSDBCMD solo generará un script de implementación.</span><span class="sxs-lookup"><span data-stu-id="9662f-216">If you specify **/dd-** or omit the switch, VSDBCMD will generate a deployment script only.</span></span>

<span data-ttu-id="9662f-217">Si utiliza un archivo. DeployManifest, el comportamiento es mucho más complicado.</span><span class="sxs-lookup"><span data-stu-id="9662f-217">If you're using a .deploymanifest file, the behavior is a lot more complicated.</span></span> <span data-ttu-id="9662f-218">Esto se debe a que el archivo. DeployManifest contiene un nombre de propiedad **DeployToDatabase** que también determina si la base de datos está implementada.</span><span class="sxs-lookup"><span data-stu-id="9662f-218">This is because the .deploymanifest file contains a property name **DeployToDatabase** that also determines whether the database is deployed.</span></span>

[!code-xml[Main](deploying-database-projects/samples/sample2.xml)]

<span data-ttu-id="9662f-219">El valor de esta propiedad se establece de acuerdo con las propiedades del proyecto de base de datos.</span><span class="sxs-lookup"><span data-stu-id="9662f-219">The value of this property is set according to the properties of the database project.</span></span> <span data-ttu-id="9662f-220">Si establece la **acción** de implementación para **crear un script de implementación (. SQL)** , el valor será **false**.</span><span class="sxs-lookup"><span data-stu-id="9662f-220">If you set the **Deploy action** to **Create a deployment script (.sql)**, the value will be **False**.</span></span> <span data-ttu-id="9662f-221">Si establece la **acción implementar** para **crear un script de implementación (. SQL) e implementarlo en la base de datos**, el valor será **true**.</span><span class="sxs-lookup"><span data-stu-id="9662f-221">If you set the **Deploy action** to **Create a deployment script (.sql) and deploy to the database**, the value will be **True**.</span></span>

> [!NOTE]
> <span data-ttu-id="9662f-222">Estos valores están asociados a una configuración y plataforma de compilación específica.</span><span class="sxs-lookup"><span data-stu-id="9662f-222">These settings are associated with a specific build configuration and platform.</span></span> <span data-ttu-id="9662f-223">Por ejemplo, si configura los valores para la configuración de **depuración** y después publica con la configuración de **lanzamiento** , la configuración no se usará.</span><span class="sxs-lookup"><span data-stu-id="9662f-223">For example, if you configure settings for the **Debug** configuration and then publish using the **Release** configuration, your settings will not be used.</span></span>

![](deploying-database-projects/_static/image3.png)

> [!NOTE]
> <span data-ttu-id="9662f-224">En este escenario, la **acción de implementación** siempre debe establecerse para **crear un script de implementación (. SQL)** , ya que no desea que Visual Studio 2010 implemente la base de datos.</span><span class="sxs-lookup"><span data-stu-id="9662f-224">In this scenario, the **Deploy action** should always be set to **Create a deployment script (.sql)**, because you don't want Visual Studio 2010 to deploy your database.</span></span> <span data-ttu-id="9662f-225">En otras palabras, la propiedad **DeployToDatabase** siempre debe ser **false**.</span><span class="sxs-lookup"><span data-stu-id="9662f-225">In other words, the **DeployToDatabase** property should always be **False**.</span></span>

<span data-ttu-id="9662f-226">Cuando se especifica una propiedad **DeployToDatabase** , el modificador **/DD** solo invalidará la propiedad si el valor de la propiedad es **false**:</span><span class="sxs-lookup"><span data-stu-id="9662f-226">When a **DeployToDatabase** property is specified, the **/dd** switch will only override the property if the property value is **false**:</span></span>

- <span data-ttu-id="9662f-227">Si la propiedad **DeployToDatabase** es **false**y especifica **/DD +** o **/DD**, VSDBCMD invalidará la propiedad **DeployToDatabase** e implementará la base de datos.</span><span class="sxs-lookup"><span data-stu-id="9662f-227">If the **DeployToDatabase** property is **False**, and you specify **/dd+** or **/dd**, VSDBCMD will override the **DeployToDatabase** property and deploy the database.</span></span>
- <span data-ttu-id="9662f-228">Si la propiedad **DeployToDatabase** es **false**y especifica **/DD-** u omitir el modificador, VSDBCMD no implementará la base de datos.</span><span class="sxs-lookup"><span data-stu-id="9662f-228">If the **DeployToDatabase** property is **False**, and you specify **/dd-** or omit the switch, VSDBCMD will not deploy the database.</span></span>
- <span data-ttu-id="9662f-229">Si la propiedad **DeployToDatabase** es **true**, VSDBCMD omitirá el modificador e implementará la base de datos.</span><span class="sxs-lookup"><span data-stu-id="9662f-229">If the **DeployToDatabase** property is **True**, VSDBCMD will ignore the switch and deploy the database.</span></span>
- <span data-ttu-id="9662f-230">En cada caso, se genera un script de implementación, independientemente de si está implementando la base de datos también.</span><span class="sxs-lookup"><span data-stu-id="9662f-230">A deployment script is generated in each case, regardless of whether you're deploying the database as well.</span></span>

## <a name="conclusion"></a><span data-ttu-id="9662f-231">Conclusión</span><span class="sxs-lookup"><span data-stu-id="9662f-231">Conclusion</span></span>

<span data-ttu-id="9662f-232">En este tema se proporciona información general sobre el proceso de compilación e implementación de proyectos de base de datos en Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="9662f-232">This topic provided an overview of the build and deployment process for database projects in Visual Studio 2010.</span></span> <span data-ttu-id="9662f-233">También se describe cómo puede usar VSDBCMD. exe con MSBuild para admitir la implementación de bases de datos a escala empresarial.</span><span class="sxs-lookup"><span data-stu-id="9662f-233">It also described how you can use VSDBCMD.exe with MSBuild to support enterprise-scale database deployment.</span></span>

<span data-ttu-id="9662f-234">Para obtener más información sobre cómo funciona esto en la práctica, vea [personalizar implementaciones de base de datos para varios entornos](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span><span class="sxs-lookup"><span data-stu-id="9662f-234">For more information on how this works in practice, see [Customizing Database Deployments for Multiple Environments](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span></span>

## <a name="further-reading"></a><span data-ttu-id="9662f-235">Información adicional</span><span class="sxs-lookup"><span data-stu-id="9662f-235">Further Reading</span></span>

<span data-ttu-id="9662f-236">Para obtener información sobre cómo personalizar las implementaciones de bases de datos mediante la creación de un archivo de configuración de implementación independiente para cada entorno, consulte [Personalización de implementaciones de base de datos para varios entornos](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span><span class="sxs-lookup"><span data-stu-id="9662f-236">For information on how to customize database deployments by creating a separate deployment configuration file for each environment, see [Customizing Database Deployments for Multiple Environments](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span></span> <span data-ttu-id="9662f-237">Para obtener instrucciones sobre cómo configurar la pertenencia a roles de base de datos mediante la ejecución de un script posterior a la implementación, vea [implementar pertenencias a roles de base de datos en entornos de prueba](../advanced-enterprise-web-deployment/deploying-database-role-memberships-to-test-environments.md).</span><span class="sxs-lookup"><span data-stu-id="9662f-237">For guidance on how to configure database role memberships by running a post-deployment script, see [Deploying Database Role Memberships to Test Environments](../advanced-enterprise-web-deployment/deploying-database-role-memberships-to-test-environments.md).</span></span> <span data-ttu-id="9662f-238">Para obtener instrucciones sobre la administración de algunos de los desafíos únicos que imponen las bases de datos de pertenencia, consulte [implementación de bases de datos de pertenencia en entornos empresariales](../advanced-enterprise-web-deployment/deploying-membership-databases-to-enterprise-environments.md).</span><span class="sxs-lookup"><span data-stu-id="9662f-238">For guidance on managing some of the unique challenges that membership databases impose, see [Deploying Membership Databases to Enterprise Environments](../advanced-enterprise-web-deployment/deploying-membership-databases-to-enterprise-environments.md).</span></span>

<span data-ttu-id="9662f-239">En estos temas de MSDN se proporcionan más instrucciones e información general sobre los proyectos de base de datos de Visual Studio y el proceso de implementación de bases de datos:</span><span class="sxs-lookup"><span data-stu-id="9662f-239">These topics on MSDN provide broader guidance and background information on Visual Studio database projects and the database deployment process:</span></span>

- [<span data-ttu-id="9662f-240">Proyectos de base de datos de SQL Server de Visual Studio 2010</span><span class="sxs-lookup"><span data-stu-id="9662f-240">Visual Studio 2010 SQL Server Database Projects</span></span>](https://msdn.microsoft.com/library/ff678491.aspx)
- [<span data-ttu-id="9662f-241">Administrar cambios de base de datos</span><span class="sxs-lookup"><span data-stu-id="9662f-241">Managing Database Change</span></span>](https://msdn.microsoft.com/library/aa833404.aspx)
- [<span data-ttu-id="9662f-242">Cómo: preparar una base de datos para la implementación desde un símbolo del sistema mediante VSDBCMD. EJECUTABLE</span><span class="sxs-lookup"><span data-stu-id="9662f-242">How to: Prepare a Database for Deployment From a Command Prompt by Using VSDBCMD.EXE</span></span>](https://msdn.microsoft.com/library/dd193258.aspx)
- [<span data-ttu-id="9662f-243">Información general sobre el Compilación e implementación de base de datos</span><span class="sxs-lookup"><span data-stu-id="9662f-243">An Overview of Database Build and Deployment</span></span>](https://msdn.microsoft.com/library/aa833165.aspx)

> [!div class="step-by-step"]
> <span data-ttu-id="9662f-244">[Anterior](deploying-web-packages.md)
> [Siguiente](creating-and-running-a-deployment-command-file.md)</span><span class="sxs-lookup"><span data-stu-id="9662f-244">[Previous](deploying-web-packages.md)
[Next](creating-and-running-a-deployment-command-file.md)</span></span>
