---
uid: mvc/overview/older-versions-1/contact-manager/iteration-3-add-form-validation-cs
title: 'Iteración #3: agregar una validación de formulario (C#) | Microsoft Docs'
author: microsoft
description: En la tercera iteración, se agrega una validación de formulario básico. Evitamos personas desde el envío de un formulario sin completar los campos obligatorios. También hemos validar emai...
ms.author: riande
ms.date: 02/20/2009
ms.assetid: 51a0d175-913b-43d8-95e3-840fb96ad1a9
msc.legacyurl: /mvc/overview/older-versions-1/contact-manager/iteration-3-add-form-validation-cs
msc.type: authoredcontent
ms.openlocfilehash: 973878ef0afd62035b3fc840371e6c6223c8951c
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 04/09/2019
ms.locfileid: "59413794"
---
# <a name="iteration-3--add-form-validation-c"></a><span data-ttu-id="ef725-105">Iteración #3: agregar una validación de formulario (C#)</span><span class="sxs-lookup"><span data-stu-id="ef725-105">Iteration #3 – Add form validation (C#)</span></span>

<span data-ttu-id="ef725-106">por [Microsoft](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="ef725-106">by [Microsoft](https://github.com/microsoft)</span></span>

[<span data-ttu-id="ef725-107">Descargue el código</span><span class="sxs-lookup"><span data-stu-id="ef725-107">Download Code</span></span>](iteration-3-add-form-validation-cs/_static/contactmanager_3_cs1.zip)

> <span data-ttu-id="ef725-108">En la tercera iteración, se agrega una validación de formulario básico.</span><span class="sxs-lookup"><span data-stu-id="ef725-108">In the third iteration, we add basic form validation.</span></span> <span data-ttu-id="ef725-109">Evitamos personas desde el envío de un formulario sin completar los campos obligatorios.</span><span class="sxs-lookup"><span data-stu-id="ef725-109">We prevent people from submitting a form without completing required form fields.</span></span> <span data-ttu-id="ef725-110">También hemos validar direcciones de correo electrónico y números de teléfono.</span><span class="sxs-lookup"><span data-stu-id="ef725-110">We also validate email addresses and phone numbers.</span></span>


## <a name="building-a-contact-management-aspnet-mvc-application-c"></a><span data-ttu-id="ef725-111">Creación de una aplicación de MVC de ASP.NET de la administración de contactos (C#)</span><span class="sxs-lookup"><span data-stu-id="ef725-111">Building a Contact Management ASP.NET MVC Application (C#)</span></span>
  

<span data-ttu-id="ef725-112">En esta serie de tutoriales, creamos una aplicación de administración de contactos completa desde el principio para finalizar.</span><span class="sxs-lookup"><span data-stu-id="ef725-112">In this series of tutorials, we build an entire Contact Management application from start to finish.</span></span> <span data-ttu-id="ef725-113">La aplicación de Contact Manager permite almacenar información de contacto - nombres, números de teléfono y direcciones de correo electrónico: para obtener una lista de personas.</span><span class="sxs-lookup"><span data-stu-id="ef725-113">The Contact Manager application enables you to store contact information - names, phone numbers and email addresses - for a list of people.</span></span>

<span data-ttu-id="ef725-114">Creamos la aplicación a través de varias iteraciones.</span><span class="sxs-lookup"><span data-stu-id="ef725-114">We build the application over multiple iterations.</span></span> <span data-ttu-id="ef725-115">Con cada iteración, mejorar gradualmente la aplicación.</span><span class="sxs-lookup"><span data-stu-id="ef725-115">With each iteration, we gradually improve the application.</span></span> <span data-ttu-id="ef725-116">Es el objetivo de este enfoque de varias iteraciones para que pueda entender el motivo de cada cambio.</span><span class="sxs-lookup"><span data-stu-id="ef725-116">The goal of this multiple iteration approach is to enable you to understand the reason for each change.</span></span>

- <span data-ttu-id="ef725-117">Iteración #1: crear la aplicación.</span><span class="sxs-lookup"><span data-stu-id="ef725-117">Iteration #1 - Create the application.</span></span> <span data-ttu-id="ef725-118">En la primera iteración, se creará el Administrador de contactos de la manera más sencilla posible.</span><span class="sxs-lookup"><span data-stu-id="ef725-118">In the first iteration, we create the Contact Manager in the simplest way possible.</span></span> <span data-ttu-id="ef725-119">Se agrega compatibilidad para las operaciones de base de datos básica: Crear, leer, actualizar y eliminar (CRUD).</span><span class="sxs-lookup"><span data-stu-id="ef725-119">We add support for basic database operations: Create, Read, Update, and Delete (CRUD).</span></span>

- <span data-ttu-id="ef725-120">Iteración #2: hacer que la aplicación parezca interesante.</span><span class="sxs-lookup"><span data-stu-id="ef725-120">Iteration #2 - Make the application look nice.</span></span> <span data-ttu-id="ef725-121">En esta iteración, mejorar la apariencia de la aplicación mediante la modificación de la página principal de la vista de MVC de ASP.NET predeterminada y en cascada de hoja de estilos.</span><span class="sxs-lookup"><span data-stu-id="ef725-121">In this iteration, we improve the appearance of the application by modifying the default ASP.NET MVC view master page and cascading style sheet.</span></span>

- <span data-ttu-id="ef725-122">Iteración #3: agregar validación de formulario.</span><span class="sxs-lookup"><span data-stu-id="ef725-122">Iteration #3 - Add form validation.</span></span> <span data-ttu-id="ef725-123">En la tercera iteración, se agrega una validación de formulario básico.</span><span class="sxs-lookup"><span data-stu-id="ef725-123">In the third iteration, we add basic form validation.</span></span> <span data-ttu-id="ef725-124">Evitamos personas desde el envío de un formulario sin completar los campos obligatorios.</span><span class="sxs-lookup"><span data-stu-id="ef725-124">We prevent people from submitting a form without completing required form fields.</span></span> <span data-ttu-id="ef725-125">También hemos validar direcciones de correo electrónico y números de teléfono.</span><span class="sxs-lookup"><span data-stu-id="ef725-125">We also validate email addresses and phone numbers.</span></span>

- <span data-ttu-id="ef725-126">Iteración #4: hacer que la aplicación tenga un acoplamiento.</span><span class="sxs-lookup"><span data-stu-id="ef725-126">Iteration #4 - Make the application loosely coupled.</span></span> <span data-ttu-id="ef725-127">En este cuarta iteración, aprovechamos de varios patrones de diseño de software para que sea más fácil de mantener y modificar la aplicación de Contact Manager.</span><span class="sxs-lookup"><span data-stu-id="ef725-127">In this fourth iteration, we take advantage of several software design patterns to make it easier to maintain and modify the Contact Manager application.</span></span> <span data-ttu-id="ef725-128">Por ejemplo, se refactoriza nuestra aplicación para usar el patrón de repositorio y la inserción de dependencias.</span><span class="sxs-lookup"><span data-stu-id="ef725-128">For example, we refactor our application to use the Repository pattern and the Dependency Injection pattern.</span></span>

- <span data-ttu-id="ef725-129">Iteración #5: crear pruebas unitarias.</span><span class="sxs-lookup"><span data-stu-id="ef725-129">Iteration #5 - Create unit tests.</span></span> <span data-ttu-id="ef725-130">En la iteración quinta, realizamos nuestra aplicación más fácil de mantener y modificar mediante la adición de las pruebas unitarias.</span><span class="sxs-lookup"><span data-stu-id="ef725-130">In the fifth iteration, we make our application easier to maintain and modify by adding unit tests.</span></span> <span data-ttu-id="ef725-131">Hemos simular nuestras clases de modelo de datos y generar pruebas unitarias para nuestros controladores y la lógica de validación.</span><span class="sxs-lookup"><span data-stu-id="ef725-131">We mock our data model classes and build unit tests for our controllers and validation logic.</span></span>

- <span data-ttu-id="ef725-132">Iteración #6: usar el desarrollo controlado por pruebas.</span><span class="sxs-lookup"><span data-stu-id="ef725-132">Iteration #6 - Use test-driven development.</span></span> <span data-ttu-id="ef725-133">En esta iteración sexta, se agregan nuevas funciones a nuestra aplicación escribir pruebas unitarias en primer lugar y escribir código en las pruebas unitarias.</span><span class="sxs-lookup"><span data-stu-id="ef725-133">In this sixth iteration, we add new functionality to our application by writing unit tests first and writing code against the unit tests.</span></span> <span data-ttu-id="ef725-134">En esta iteración, se agrega grupos de contactos.</span><span class="sxs-lookup"><span data-stu-id="ef725-134">In this iteration, we add contact groups.</span></span>

- <span data-ttu-id="ef725-135">Iteración #7: agregar funcionalidad Ajax.</span><span class="sxs-lookup"><span data-stu-id="ef725-135">Iteration #7 - Add Ajax functionality.</span></span> <span data-ttu-id="ef725-136">En la iteración séptima, mejorar la capacidad de respuesta y el rendimiento de nuestra aplicación agregando compatibilidad con Ajax.</span><span class="sxs-lookup"><span data-stu-id="ef725-136">In the seventh iteration, we improve the responsiveness and performance of our application by adding support for Ajax.</span></span>


## <a name="this-iteration"></a><span data-ttu-id="ef725-137">Esta iteración</span><span class="sxs-lookup"><span data-stu-id="ef725-137">This Iteration</span></span>

<span data-ttu-id="ef725-138">En esta segunda iteración de la aplicación de Contact Manager, se agrega una validación de formulario básico.</span><span class="sxs-lookup"><span data-stu-id="ef725-138">In this second iteration of the Contact Manager application, we add basic form validation.</span></span> <span data-ttu-id="ef725-139">Evitamos personas desde el envío de un contacto sin escribir valores para los campos obligatorios.</span><span class="sxs-lookup"><span data-stu-id="ef725-139">We prevent people from submitting a contact without entering values for required form fields.</span></span> <span data-ttu-id="ef725-140">También hemos validar números de teléfono y direcciones de correo electrónico (consulte la figura 1).</span><span class="sxs-lookup"><span data-stu-id="ef725-140">We also validate phone numbers and email addresses (see Figure 1).</span></span>


[![T<span data-ttu-id="ef725-141">el cuadro de diálogo nuevo proyecto]</span><span class="sxs-lookup"><span data-stu-id="ef725-141">he New Project dialog box]</span></span>(iteration-3-add-form-validation-cs/_static/image1.jpg)](iteration-3-add-form-validation-cs/_static/image1.png)

<span data-ttu-id="ef725-142">**Figura 01**: Un formulario con la validación ([haga clic aquí para ver imagen en tamaño completo](iteration-3-add-form-validation-cs/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="ef725-142">**Figure 01**: A form with validation ([Click to view full-size image](iteration-3-add-form-validation-cs/_static/image2.png))</span></span>


<span data-ttu-id="ef725-143">En esta iteración, agregamos la lógica de validación directamente a las acciones del controlador.</span><span class="sxs-lookup"><span data-stu-id="ef725-143">In this iteration, we add the validation logic directly to the controller actions.</span></span> <span data-ttu-id="ef725-144">En general, esto no es la manera recomendada de agregar validación a una aplicación ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="ef725-144">In general, this is not the recommended way to add validation to an ASP.NET MVC application.</span></span> <span data-ttu-id="ef725-145">Un mejor enfoque consiste en colocar una lógica de validación s la aplicación en otro [capa de servicio](http://martinfowler.com/eaaCatalog/serviceLayer.html).</span><span class="sxs-lookup"><span data-stu-id="ef725-145">A better approach is to place an application s validation logic in a separate [service layer](http://martinfowler.com/eaaCatalog/serviceLayer.html).</span></span> <span data-ttu-id="ef725-146">En la siguiente iteración, se refactoriza la aplicación de Contact Manager para hacer más fácil de mantener la aplicación.</span><span class="sxs-lookup"><span data-stu-id="ef725-146">In the next iteration, we refactor the Contact Manager application to make the application more maintainable.</span></span>

<span data-ttu-id="ef725-147">En esta iteración, para simplificar las cosas, se escribe todo el código de validación a mano.</span><span class="sxs-lookup"><span data-stu-id="ef725-147">In this iteration, to keep things simple, we write all of the validation code by hand.</span></span> <span data-ttu-id="ef725-148">En lugar de escribir el código de validación nosotros mismos nos podríamos aprovechar un marco de validación.</span><span class="sxs-lookup"><span data-stu-id="ef725-148">Instead of writing the validation code ourselves, we could take advantage of a validation framework.</span></span> <span data-ttu-id="ef725-149">Por ejemplo, puede usar Microsoft Enterprise Library validación Application Block (VAB) para implementar la lógica de validación de la aplicación de ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="ef725-149">For example, you can use the Microsoft Enterprise Library Validation Application Block (VAB) to implement the validation logic for your ASP.NET MVC application.</span></span> <span data-ttu-id="ef725-150">Para obtener más información sobre el bloque de aplicaciones de la validación, consulte:</span><span class="sxs-lookup"><span data-stu-id="ef725-150">To learn more about the Validation Application Block, see:</span></span>

[*http://msdn.microsoft.com/library/dd203099.aspx*](https://msdn.microsoft.com/library/dd203099.aspx)

## <a name="adding-validation-to-the-create-view"></a><span data-ttu-id="ef725-151">Agregar validación a la vista de creación</span><span class="sxs-lookup"><span data-stu-id="ef725-151">Adding Validation to the Create View</span></span>

<span data-ttu-id="ef725-152">Permiten s empiece por agregar lógica de validación a la vista de creación.</span><span class="sxs-lookup"><span data-stu-id="ef725-152">Let s start by adding validation logic to the Create view.</span></span> <span data-ttu-id="ef725-153">Afortunadamente, dado que se genera la vista de creación con Visual Studio, la vista de creación ya contiene toda la lógica de interfaz de usuario necesarios para mostrar mensajes de validación.</span><span class="sxs-lookup"><span data-stu-id="ef725-153">Fortunately, because we generated the Create view with Visual Studio, the Create view already contains all of the necessary user interface logic to display validation messages.</span></span> <span data-ttu-id="ef725-154">La vista de creación se encuentra en el listado 1.</span><span class="sxs-lookup"><span data-stu-id="ef725-154">The Create view is contained in Listing 1.</span></span>

**<span data-ttu-id="ef725-155">Listado 1 - \Views\Contact\Create.aspx</span><span class="sxs-lookup"><span data-stu-id="ef725-155">Listing 1 - \Views\Contact\Create.aspx</span></span>**

[!code-aspx[Main](iteration-3-add-form-validation-cs/samples/sample1.aspx)]

<span data-ttu-id="ef725-156">Observe la llamada al método auxiliar Html.ValidationSummary() que aparece justo encima del formulario HTML.</span><span class="sxs-lookup"><span data-stu-id="ef725-156">Notice the call to the Html.ValidationSummary() helper method that appears immediately above the HTML form.</span></span> <span data-ttu-id="ef725-157">Si hay mensajes de error de validación, este método muestra los mensajes de validación en una lista con viñetas.</span><span class="sxs-lookup"><span data-stu-id="ef725-157">If there are validation error messages, then this method displays validation messages in a bulleted list.</span></span>

<span data-ttu-id="ef725-158">Observe, además, las llamadas a Html.ValidationMessage() que aparecen junto a cada campo de formulario.</span><span class="sxs-lookup"><span data-stu-id="ef725-158">Notice, furthermore, the calls to Html.ValidationMessage() that appear next to each form field.</span></span> <span data-ttu-id="ef725-159">La aplicación auxiliar de ValidationMessage() muestra un mensaje de error de validación individuales.</span><span class="sxs-lookup"><span data-stu-id="ef725-159">The ValidationMessage() helper displays an individual validation error message.</span></span> <span data-ttu-id="ef725-160">En el caso de la lista 1, se muestra un asterisco cuando hay un error de validación.</span><span class="sxs-lookup"><span data-stu-id="ef725-160">In the case of Listing 1, an asterisk is displayed when there is a validation error.</span></span>

<span data-ttu-id="ef725-161">Por último, la aplicación auxiliar Html.TextBox() automáticamente representa una clase de hoja de estilos en cascada cuando hay un error de validación asociado con la propiedad mostrada por la aplicación auxiliar.</span><span class="sxs-lookup"><span data-stu-id="ef725-161">Finally, the Html.TextBox() helper automatically renders a Cascading Style Sheet class when there is a validation error associated with the property displayed by the helper.</span></span> <span data-ttu-id="ef725-162">La aplicación auxiliar Html.TextBox() representa una clase denominada **error de validación de entrada**.</span><span class="sxs-lookup"><span data-stu-id="ef725-162">The Html.TextBox() helper renders a class named **input-validation-error**.</span></span>

<span data-ttu-id="ef725-163">Cuando se crea una nueva aplicación MVC de ASP.NET, una hoja de estilos denominada Site.css se crea automáticamente en la carpeta de contenido.</span><span class="sxs-lookup"><span data-stu-id="ef725-163">When you create a new ASP.NET MVC application, a style sheet named Site.css is created in the Content folder automatically.</span></span> <span data-ttu-id="ef725-164">Esta hoja de estilos contiene las siguientes definiciones de clases CSS relacionadas con la apariencia de los mensajes de error de validación:</span><span class="sxs-lookup"><span data-stu-id="ef725-164">This style sheet contains the following definitions for CSS classes related to the appearance of validation error messages:</span></span>

[!code-css[Main](iteration-3-add-form-validation-cs/samples/sample2.css)]

<span data-ttu-id="ef725-165">La clase de error de validación de campo se utiliza para definir el estilo de la salida representada por la aplicación auxiliar de Html.ValidationMessage().</span><span class="sxs-lookup"><span data-stu-id="ef725-165">The field-validation-error class is used to style the output rendered by the Html.ValidationMessage() helper.</span></span> <span data-ttu-id="ef725-166">La clase de error de validación de entrada se utiliza para definir el estilo del cuadro de texto (entrada) representada por la aplicación auxiliar de Html.TextBox().</span><span class="sxs-lookup"><span data-stu-id="ef725-166">The input-validation-error class is used to style the textbox (input) rendered by the Html.TextBox() helper.</span></span> <span data-ttu-id="ef725-167">La clase de errores de resumen de validación se utiliza para definir el estilo de la lista sin ordenar representada por la aplicación auxiliar de Html.ValidationSummary().</span><span class="sxs-lookup"><span data-stu-id="ef725-167">The validation-summary-errors class is used to style the unordered list rendered by the Html.ValidationSummary() helper.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="ef725-168">Puede modificar las clases de hoja de estilo que se describe en esta sección para personalizar la apariencia de los mensajes de error de validación.</span><span class="sxs-lookup"><span data-stu-id="ef725-168">You can modify the style sheet classes described in this section to customize the appearance of validation error messages.</span></span>


## <a name="adding-validation-logic-to-the-create-action"></a><span data-ttu-id="ef725-169">Agregar lógica de validación para la creación de acción</span><span class="sxs-lookup"><span data-stu-id="ef725-169">Adding Validation Logic to the Create Action</span></span>

<span data-ttu-id="ef725-170">En este momento, la vista de creación nunca muestra mensajes de error de validación porque no nos hemos escrito la lógica para generar los mensajes.</span><span class="sxs-lookup"><span data-stu-id="ef725-170">Right now, the Create view never displays validation error messages because we have not written the logic to generate any messages.</span></span> <span data-ttu-id="ef725-171">Con el fin de mostrar mensajes de error de validación, deberá agregar los mensajes de error para ModelState.</span><span class="sxs-lookup"><span data-stu-id="ef725-171">In order to display validation error messages, you need to add the error messages to ModelState.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="ef725-172">El método UpdateModel() agrega mensajes de error para ModelState automáticamente cuando hay un error al asignar el valor de un campo de formulario a una propiedad.</span><span class="sxs-lookup"><span data-stu-id="ef725-172">The UpdateModel() method adds error messages to ModelState automatically when there is an error assigning the value of a form field to a property.</span></span> <span data-ttu-id="ef725-173">Por ejemplo, si se intenta asignar la cadena "apple" a una propiedad de fecha de nacimiento que acepta valores de fecha y hora, el método UpdateModel() agrega un error para ModelState.</span><span class="sxs-lookup"><span data-stu-id="ef725-173">For example, if you attempt to assign the string "apple" to a BirthDate property that accepts DateTime values, then the UpdateModel() method adds an error to ModelState.</span></span>


<span data-ttu-id="ef725-174">El método Create() modificado en el listado 2 contiene una sección nueva que valida las propiedades de la clase Contact antes de que se inserta el nuevo contacto en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="ef725-174">The modified Create() method in Listing 2 contains a new section that validates the properties of the Contact class before the new contact is inserted into the database.</span></span>

**<span data-ttu-id="ef725-175">Listado 2 - Controllers\ContactController.cs (crear con la validación)</span><span class="sxs-lookup"><span data-stu-id="ef725-175">Listing 2 - Controllers\ContactController.cs (Create with validation)</span></span>**

[!code-csharp[Main](iteration-3-add-form-validation-cs/samples/sample3.cs)]

<span data-ttu-id="ef725-176">La sección de validación aplica cuatro reglas de validación distintos:</span><span class="sxs-lookup"><span data-stu-id="ef725-176">The validate section enforces four distinct validation rules:</span></span>

- <span data-ttu-id="ef725-177">La propiedad FirstName debe tener una longitud mayor que cero (y no puede contener solamente espacios)</span><span class="sxs-lookup"><span data-stu-id="ef725-177">The FirstName property must have a length greater than zero (and it cannot consist solely of spaces)</span></span>
- <span data-ttu-id="ef725-178">La propiedad LastName debe tener una longitud mayor que cero (y no puede contener solamente espacios)</span><span class="sxs-lookup"><span data-stu-id="ef725-178">The LastName property must have a length greater than zero (and it cannot consist solely of spaces)</span></span>
- <span data-ttu-id="ef725-179">Si la propiedad de teléfono tiene un valor (tiene una longitud mayor que 0), a continuación, la propiedad de teléfono debe coincidir con una expresión regular.</span><span class="sxs-lookup"><span data-stu-id="ef725-179">If the Phone property has a value (has a length greater than 0) then the Phone property must match a regular expression.</span></span>
- <span data-ttu-id="ef725-180">Si la propiedad de correo electrónico tiene un valor (tiene una longitud mayor que 0), a continuación, la propiedad de correo electrónico debe coincidir con una expresión regular.</span><span class="sxs-lookup"><span data-stu-id="ef725-180">If the Email property has a value (has a length greater than 0) then the Email property must match a regular expression.</span></span>

<span data-ttu-id="ef725-181">Cuando se produce una infracción de regla de validación, se agrega un mensaje de error para ModelState con la Ayuda del método AddModelError().</span><span class="sxs-lookup"><span data-stu-id="ef725-181">When there is a validation rule violation, an error message is added to ModelState with the help of the AddModelError() method.</span></span> <span data-ttu-id="ef725-182">Cuando se agrega un mensaje a ModelState, proporcione el nombre de una propiedad y el texto de un mensaje de error de validación.</span><span class="sxs-lookup"><span data-stu-id="ef725-182">When you add a message to ModelState, you provide the name of a property and the text of a validation error message.</span></span> <span data-ttu-id="ef725-183">Este mensaje de error se muestra en la vista mediante los métodos auxiliares Html.ValidationSummary() y Html.ValidationMessage().</span><span class="sxs-lookup"><span data-stu-id="ef725-183">This error message is displayed in the view by the Html.ValidationSummary() and Html.ValidationMessage() helper methods.</span></span>

<span data-ttu-id="ef725-184">Después de que se ejecutan las reglas de validación, se comprueba la propiedad IsValid de ModelState.</span><span class="sxs-lookup"><span data-stu-id="ef725-184">After the validation rules are executed, the IsValid property of ModelState is checked.</span></span> <span data-ttu-id="ef725-185">La propiedad IsValid devuelve false cuando se han agregado los mensajes de error de validación para ModelState.</span><span class="sxs-lookup"><span data-stu-id="ef725-185">The IsValid property returns false when any validation error messages have been added to ModelState.</span></span> <span data-ttu-id="ef725-186">Si se produce un error de validación, se vuelve a mostrar el formulario de creación con los mensajes de error.</span><span class="sxs-lookup"><span data-stu-id="ef725-186">If validation fails, the Create form is redisplayed with the error messages.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="ef725-187">He recibido las expresiones regulares para validar la dirección de correo electrónico y número de teléfono desde el repositorio de expresión regular en [*http://regexlib.com*](http://regexlib.com)</span><span class="sxs-lookup"><span data-stu-id="ef725-187">I got the regular expressions for validating the phone number and email address from the regular expression repository at [*http://regexlib.com*](http://regexlib.com)</span></span>


## <a name="adding-validation-logic-to-the-edit-action"></a><span data-ttu-id="ef725-188">Agregar lógica de validación a la acción de edición</span><span class="sxs-lookup"><span data-stu-id="ef725-188">Adding Validation Logic to the Edit Action</span></span>

<span data-ttu-id="ef725-189">La acción Edit() actualiza un contacto.</span><span class="sxs-lookup"><span data-stu-id="ef725-189">The Edit() action updates a Contact.</span></span> <span data-ttu-id="ef725-190">La acción Edit() necesita realizar exactamente la misma validación que la acción Create().</span><span class="sxs-lookup"><span data-stu-id="ef725-190">The Edit() action needs to perform exactly the same validation as the Create() action.</span></span> <span data-ttu-id="ef725-191">En lugar de duplicar el mismo código de validación, debemos refactorizamos el controlador de contacto para que tanto la acción Create() como Edit() llama al mismo método de validación.</span><span class="sxs-lookup"><span data-stu-id="ef725-191">Instead of duplicating the same validation code, we should refactor the Contact controller so that both the Create() and Edit() actions call the same validation method.</span></span>

<span data-ttu-id="ef725-192">La clase de controlador de contacto modificada está contenida en el listado 3.</span><span class="sxs-lookup"><span data-stu-id="ef725-192">The modified Contact controller class is contained in Listing 3.</span></span> <span data-ttu-id="ef725-193">Esta clase tiene un nuevo método ValidateContact() que se llama en el Create() y Edit() las acciones.</span><span class="sxs-lookup"><span data-stu-id="ef725-193">This class has a new ValidateContact() method that is called within both the Create() and Edit() actions.</span></span>

**<span data-ttu-id="ef725-194">Listing 3 - Controllers\ContactController.cs</span><span class="sxs-lookup"><span data-stu-id="ef725-194">Listing 3 - Controllers\ContactController.cs</span></span>**

[!code-csharp[Main](iteration-3-add-form-validation-cs/samples/sample4.cs)]

## <a name="summary"></a><span data-ttu-id="ef725-195">Resumen</span><span class="sxs-lookup"><span data-stu-id="ef725-195">Summary</span></span>

<span data-ttu-id="ef725-196">En esta iteración, agregamos la validación de la forma más básica a nuestra aplicación de Contact Manager.</span><span class="sxs-lookup"><span data-stu-id="ef725-196">In this iteration, we added basic form validation to our Contact Manager application.</span></span> <span data-ttu-id="ef725-197">Nuestra lógica de validación impide que los usuarios enviar un contacto nuevo o editar un contacto existente sin proporcionar valores para las propiedades FirstName y LastName.</span><span class="sxs-lookup"><span data-stu-id="ef725-197">Our validation logic prevents users from submitting a new contact or editing an existing contact without supplying values for the FirstName and LastName properties.</span></span> <span data-ttu-id="ef725-198">Además, los usuarios deben proporcionar las direcciones de correo electrónico y números de teléfono válido.</span><span class="sxs-lookup"><span data-stu-id="ef725-198">Furthermore, users must supply valid phone numbers and email addresses.</span></span>

<span data-ttu-id="ef725-199">En esta iteración, agregamos la lógica de validación a nuestra aplicación póngase en contacto con el Administrador de la manera más sencilla posible.</span><span class="sxs-lookup"><span data-stu-id="ef725-199">In this iteration, we added the validation logic to our Contact Manager application in the easiest way possible.</span></span> <span data-ttu-id="ef725-200">Sin embargo, mezclar la lógica de validación en nuestra lógica de controlador creará problemas por nosotros a largo plazo.</span><span class="sxs-lookup"><span data-stu-id="ef725-200">However, mixing our validation logic into our controller logic will create problems for us in the long term.</span></span> <span data-ttu-id="ef725-201">Nuestra aplicación será más difícil de mantener y modificar con el tiempo.</span><span class="sxs-lookup"><span data-stu-id="ef725-201">Our application will be more difficult to maintain and modify over time.</span></span>

<span data-ttu-id="ef725-202">En la siguiente iteración, se va a refactorizar nuestra lógica de validación y lógica de acceso de la base de datos fuera de nuestro controladores.</span><span class="sxs-lookup"><span data-stu-id="ef725-202">In the next iteration, we will refactor our validation logic and database access logic out of our controllers.</span></span> <span data-ttu-id="ef725-203">Se podrá aprovechar varios principios de diseño de software para poder crear una aplicación de acoplamiento más flexible y más fácil de mantener.</span><span class="sxs-lookup"><span data-stu-id="ef725-203">We'll take advantage of several software design principles to enable us to create a more loosely coupled, and more maintainable, application.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="ef725-204">[Anterior](iteration-2-make-the-application-look-nice-cs.md)
> [Siguiente](iteration-4-make-the-application-loosely-coupled-cs.md)</span><span class="sxs-lookup"><span data-stu-id="ef725-204">[Previous](iteration-2-make-the-application-look-nice-cs.md)
[Next](iteration-4-make-the-application-loosely-coupled-cs.md)</span></span>
