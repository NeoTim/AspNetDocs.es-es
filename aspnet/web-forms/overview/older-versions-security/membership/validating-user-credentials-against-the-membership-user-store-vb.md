---
uid: web-forms/overview/older-versions-security/membership/validating-user-credentials-against-the-membership-user-store-vb
title: Validar las credenciales de usuario en el Store del usuario de pertenencia (VB) | Microsoft Docs
author: rick-anderson
description: En este tutorial, examinaremos cómo validar las credenciales del usuario en el almacén de usuario de pertenencia mediante medios de programación y el control de inicio de sesión...
ms.author: riande
ms.date: 01/18/2008
ms.assetid: 17772912-b47b-4557-9ce9-80f22df642f7
msc.legacyurl: /web-forms/overview/older-versions-security/membership/validating-user-credentials-against-the-membership-user-store-vb
msc.type: authoredcontent
ms.openlocfilehash: 98869574adb8ac85a2b6dad8db2a583e013150fe
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 04/17/2019
ms.locfileid: "59393182"
---
# <a name="validating-user-credentials-against-the-membership-user-store-vb"></a><span data-ttu-id="14589-103">Validar las credenciales de usuario en el almacén de usuarios de pertenencia (VB)</span><span class="sxs-lookup"><span data-stu-id="14589-103">Validating User Credentials Against the Membership User Store (VB)</span></span>

<span data-ttu-id="14589-104">por [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="14589-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="14589-105">[Descargar código](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_06_VB.zip) o [descargar PDF](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial06_LoggingIn_vb.pdf)</span><span class="sxs-lookup"><span data-stu-id="14589-105">[Download Code](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_06_VB.zip) or [Download PDF](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial06_LoggingIn_vb.pdf)</span></span>

> <span data-ttu-id="14589-106">En este tutorial, examinaremos cómo validar las credenciales del usuario en el almacén de usuario de pertenencia mediante medios de programación y el control de inicio de sesión.</span><span class="sxs-lookup"><span data-stu-id="14589-106">In this tutorial we will examine how to validate a user's credentials against the Membership user store using both programmatic means and the Login control.</span></span> <span data-ttu-id="14589-107">También veremos cómo personalizar la apariencia y el comportamiento del control de inicio de sesión.</span><span class="sxs-lookup"><span data-stu-id="14589-107">We will also look at how to customize the login control's appearance and behavior.</span></span>


## <a name="introduction"></a><span data-ttu-id="14589-108">Introducción</span><span class="sxs-lookup"><span data-stu-id="14589-108">Introduction</span></span>

<span data-ttu-id="14589-109">En el <a id="Tutorial05"> </a> [tutorial anterior](creating-user-accounts-vb.md) analizamos cómo crear una nueva cuenta de usuario en el marco de pertenencia.</span><span class="sxs-lookup"><span data-stu-id="14589-109">In the <a id="Tutorial05"></a>[preceding tutorial](creating-user-accounts-vb.md) we looked at how to create a new user account in the Membership framework.</span></span> <span data-ttu-id="14589-110">Primero analizamos crear mediante programación cuentas de usuario mediante el `Membership` la clase `CreateUser` método y, a continuación, examinar utilizando el control CreateUserWizard Web.</span><span class="sxs-lookup"><span data-stu-id="14589-110">We first looked at programmatically creating user accounts via the `Membership` class's `CreateUser` method, and then examined using the CreateUserWizard Web control.</span></span> <span data-ttu-id="14589-111">Sin embargo, la página de inicio de sesión actualmente valida las credenciales proporcionadas con una lista codificada de pares de nombre de usuario y contraseña.</span><span class="sxs-lookup"><span data-stu-id="14589-111">However, the login page currently validates the supplied credentials against a hard-coded list of username and password pairs.</span></span> <span data-ttu-id="14589-112">Es necesario actualizar la lógica de la página de inicio de sesión para que lo valida las credenciales en el almacén de usuario del marco de pertenencia.</span><span class="sxs-lookup"><span data-stu-id="14589-112">We need to update the login page's logic so that it validates credentials against the Membership framework's user store.</span></span>

<span data-ttu-id="14589-113">Mucho al igual que con la creación de cuentas de usuario, las credenciales se pueden validar mediante programación o declaración.</span><span class="sxs-lookup"><span data-stu-id="14589-113">Much like with creating user accounts, credentials can be validated programmatically or declaratively.</span></span> <span data-ttu-id="14589-114">La API de pertenencia incluye un método para validar mediante programación las credenciales del usuario en el almacén de usuarios.</span><span class="sxs-lookup"><span data-stu-id="14589-114">The Membership API includes a method for programmatically validating a user's credentials against the user store.</span></span> <span data-ttu-id="14589-115">Y ASP.NET se suministra con el control Web de inicio de sesión, que representa una interfaz de usuario con los cuadros de texto para el nombre de usuario y contraseña y un botón para iniciar sesión.</span><span class="sxs-lookup"><span data-stu-id="14589-115">And ASP.NET ships with the Login Web control, which renders a user interface with textboxes for the username and password and a button to log in.</span></span>

<span data-ttu-id="14589-116">En este tutorial, examinaremos cómo validar las credenciales del usuario en el almacén de usuario de pertenencia mediante medios de programación y el control de inicio de sesión.</span><span class="sxs-lookup"><span data-stu-id="14589-116">In this tutorial we will examine how to validate a user's credentials against the Membership user store using both programmatic means and the Login control.</span></span> <span data-ttu-id="14589-117">También veremos cómo personalizar la apariencia y el comportamiento del control de inicio de sesión.</span><span class="sxs-lookup"><span data-stu-id="14589-117">We will also look at how to customize the login control's appearance and behavior.</span></span> <span data-ttu-id="14589-118">Comencemos.</span><span class="sxs-lookup"><span data-stu-id="14589-118">Let's get started!</span></span>

## <a name="step-1-validating-credentials-against-the-membership-user-store"></a><span data-ttu-id="14589-119">Paso 1: Validar las credenciales en el Store del usuario de pertenencia</span><span class="sxs-lookup"><span data-stu-id="14589-119">Step 1: Validating Credentials Against the Membership User Store</span></span>

<span data-ttu-id="14589-120">Para los sitios web que usan la autenticación de formularios, un usuario inicia sesión en el sitio Web al visitar una página de inicio de sesión y especificar sus credenciales.</span><span class="sxs-lookup"><span data-stu-id="14589-120">For web sites that use forms authentication, a user logs on to the website by visiting a login page and entering their credentials.</span></span> <span data-ttu-id="14589-121">Estas credenciales, a continuación, se comparan con el almacén del usuario.</span><span class="sxs-lookup"><span data-stu-id="14589-121">These credentials are then compared against the user store.</span></span> <span data-ttu-id="14589-122">Si son válidos, se concede al usuario un vale de autenticación de formularios, que es un token de seguridad que indica la identidad y la autenticidad del visitante.</span><span class="sxs-lookup"><span data-stu-id="14589-122">If they are valid, then the user is granted a forms authentication ticket, which is a security token that indicates the identity and authenticity of the visitor.</span></span>

<span data-ttu-id="14589-123">Para validar a los usuarios con el marco de pertenencia, utilice el `Membership` la clase [ `ValidateUser` método](https://msdn.microsoft.com/library/system.web.security.membership.validateuser.aspx).</span><span class="sxs-lookup"><span data-stu-id="14589-123">To validate a user against the Membership framework, use the `Membership` class's [`ValidateUser` method](https://msdn.microsoft.com/library/system.web.security.membership.validateuser.aspx).</span></span> <span data-ttu-id="14589-124">El `ValidateUser` método toma dos parámetros de entrada - `username` y `password` - y devuelve un valor booleano que indica si las credenciales son válidas.</span><span class="sxs-lookup"><span data-stu-id="14589-124">The `ValidateUser` method takes in two input parameters - `username` and `password` - and returns a Boolean value indicating whether the credentials were valid.</span></span> <span data-ttu-id="14589-125">Al igual que con el `CreateUser` método hemos visto en el tutorial anterior, el `ValidateUser` método delega la validación real para el proveedor de pertenencia configurado.</span><span class="sxs-lookup"><span data-stu-id="14589-125">Like with the `CreateUser` method we examined in the previous tutorial, the `ValidateUser` method delegates the actual validation to the configured Membership provider.</span></span>

<span data-ttu-id="14589-126">El `SqlMembershipProvider` valida las credenciales proporcionadas mediante la obtención de la contraseña del usuario especificado a través de la `aspnet_Membership_GetPasswordWithFormat` procedimiento almacenado.</span><span class="sxs-lookup"><span data-stu-id="14589-126">The `SqlMembershipProvider` validates the supplied credentials by obtaining the specified user's password via the `aspnet_Membership_GetPasswordWithFormat` stored procedure.</span></span> <span data-ttu-id="14589-127">Recuerde que el `SqlMembershipProvider` almacena las contraseñas de usuario mediante uno de los tres formatos: borrar, cifrados o aplicar un algoritmo hash.</span><span class="sxs-lookup"><span data-stu-id="14589-127">Recall that the `SqlMembershipProvider` stores users' passwords using one of three formats: clear, encrypted, or hashed.</span></span> <span data-ttu-id="14589-128">El `aspnet_Membership_GetPasswordWithFormat` procedimiento almacenado devuelve la contraseña en su formato sin procesar.</span><span class="sxs-lookup"><span data-stu-id="14589-128">The `aspnet_Membership_GetPasswordWithFormat` stored procedure returns the password in its raw format.</span></span> <span data-ttu-id="14589-129">Para las contraseñas cifradas o algoritmo hash, el `SqlMembershipProvider` transforma el `password` valor se pasa a la `ValidateUser` método en su equivalente cifrados o aplicar un algoritmo hash de estado y, a continuación, se compara con lo que se devolvió desde la base de datos.</span><span class="sxs-lookup"><span data-stu-id="14589-129">For encrypted or hashed passwords, the `SqlMembershipProvider` transforms the `password` value passed into the `ValidateUser` method into its equivalent encrypted or hashed state and then compares it with what was returned from the database.</span></span> <span data-ttu-id="14589-130">Si la contraseña almacenada en la base de datos coincide con la contraseña con formato especificada por el usuario, las credenciales son válidas.</span><span class="sxs-lookup"><span data-stu-id="14589-130">If the password stored in the database matches the formatted password entered by the user, the credentials are valid.</span></span>

<span data-ttu-id="14589-131">Vamos a actualizar nuestra página de inicio de sesión (~ /`Login.aspx`) para que lo valida las credenciales proporcionadas en el almacén de usuario del marco de pertenencia.</span><span class="sxs-lookup"><span data-stu-id="14589-131">Let's update our login page (~/`Login.aspx`) so that it validates the supplied credentials against the Membership framework user store.</span></span> <span data-ttu-id="14589-132">Hemos creado esta página de inicio de sesión en el <a id="Tutorial02"> </a> [ *una visión general de autenticación mediante formularios* ](../introduction/an-overview-of-forms-authentication-vb.md) tutorial, crear una interfaz con dos cuadros de texto para el nombre de usuario y la contraseña, un Recordarme checkbox y un botón de inicio de sesión (consulte la figura 1).</span><span class="sxs-lookup"><span data-stu-id="14589-132">We created this login page back in the <a id="Tutorial02"></a>[*An Overview of Forms Authentication*](../introduction/an-overview-of-forms-authentication-vb.md) tutorial, creating an interface with two TextBoxes for the username and password, a Remember Me checkbox, and a Login button (see Figure 1).</span></span> <span data-ttu-id="14589-133">El código valida las credenciales introducidas con una lista codificada de pares de nombre de usuario y contraseña (Scott/contraseña, Jisun y la contraseña y Sam y contraseña).</span><span class="sxs-lookup"><span data-stu-id="14589-133">The code validates the entered credentials against a hard-coded list of username and password pairs (Scott/password, Jisun/password, and Sam/password).</span></span> <span data-ttu-id="14589-134">En el <a id="Tutorial03"> </a> [ *configuración de autenticación de formularios y temas avanzados* ](../introduction/forms-authentication-configuration-and-advanced-topics-vb.md) tutorial hemos actualizado el código de la página de inicio de sesión para almacenar información adicional en los formularios vale de autenticación `UserData` propiedad.</span><span class="sxs-lookup"><span data-stu-id="14589-134">In the <a id="Tutorial03"></a>[*Forms Authentication Configuration and Advanced Topics*](../introduction/forms-authentication-configuration-and-advanced-topics-vb.md) tutorial we updated the login page's code to store additional information in the forms authentication ticket's `UserData` property.</span></span>


<span data-ttu-id="14589-135">[![Interfaz de la página de inicio de sesión incluye dos cuadros de texto, un control CheckBoxList y un botón](validating-user-credentials-against-the-membership-user-store-vb/_static/image2.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="14589-135">[![The Login Page's Interface Includes Two TextBoxes, a CheckBoxList, and a Button](validating-user-credentials-against-the-membership-user-store-vb/_static/image2.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image1.png)</span></span>

<span data-ttu-id="14589-136">**Figura 1**: Interfaz incluye dos cuadros de texto la página de inicio de sesión, un control CheckBoxList y un botón ([haga clic aquí para ver imagen en tamaño completo](validating-user-credentials-against-the-membership-user-store-vb/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="14589-136">**Figure 1**: The Login Page's Interface Includes Two TextBoxes, a CheckBoxList, and a Button  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-vb/_static/image3.png))</span></span>


<span data-ttu-id="14589-137">Interfaz de usuario de la página de inicio de sesión puede permanecer sin cambios, pero tenemos que reemplazar el botón de inicio de sesión `Click` controlador de eventos con código que valida el usuario en el almacén de usuario del marco de pertenencia.</span><span class="sxs-lookup"><span data-stu-id="14589-137">The login page's user interface can remain unchanged, but we need to replace the Login button's `Click` event handler with code that validates the user against the Membership framework user store.</span></span> <span data-ttu-id="14589-138">Actualice el controlador de eventos para que su código aparece como sigue:</span><span class="sxs-lookup"><span data-stu-id="14589-138">Update the event handler so that its code appears as follows:</span></span>

[!code-vb[Main](validating-user-credentials-against-the-membership-user-store-vb/samples/sample1.vb)]

<span data-ttu-id="14589-139">Este código es sorprendentemente sencillo.</span><span class="sxs-lookup"><span data-stu-id="14589-139">This code is remarkably simple.</span></span> <span data-ttu-id="14589-140">Comenzamos llamando el `Membership.ValidateUser` método, pasando el nombre de usuario proporcionado y la contraseña.</span><span class="sxs-lookup"><span data-stu-id="14589-140">We start by calling the `Membership.ValidateUser` method, passing in the supplied username and password.</span></span> <span data-ttu-id="14589-141">Si ese método devuelve True, el usuario ha iniciado sesión en el sitio a través de la `FormsAuthentication` método RedirectFromLoginPage de la clase.</span><span class="sxs-lookup"><span data-stu-id="14589-141">If that method returns True, then the user is signed into the site via the `FormsAuthentication` class's RedirectFromLoginPage method.</span></span> <span data-ttu-id="14589-142">(Como se explicó en la <a id="Tutorial02"> </a> [ *una visión general de autenticación mediante formularios* ](../introduction/an-overview-of-forms-authentication-vb.md) tutorial, el `FormsAuthentication.RedirectFromLoginPage` crea los formularios de vale de autenticación y, a continuación, redirige al usuario a la página adecuada.) Si las credenciales no son válidas, sin embargo, la `InvalidCredentialsMessage` etiqueta se muestra para informar al usuario que su nombre de usuario o contraseña era incorrecta.</span><span class="sxs-lookup"><span data-stu-id="14589-142">(As we discussed in the <a id="Tutorial02"></a>[*An Overview of Forms Authentication*](../introduction/an-overview-of-forms-authentication-vb.md) tutorial, the `FormsAuthentication.RedirectFromLoginPage` creates the forms authentication ticket and then redirects the user to the appropriate page.) If the credentials are invalid, however, the `InvalidCredentialsMessage` Label is displayed, informing the user that their username or password was incorrect.</span></span>

<span data-ttu-id="14589-143">Así de simple.</span><span class="sxs-lookup"><span data-stu-id="14589-143">That's all there is to it!</span></span>

<span data-ttu-id="14589-144">Para comprobar que la página de inicio de sesión funciona según lo esperado, intente iniciar sesión con una de las cuentas de usuario que creó en el tutorial anterior.</span><span class="sxs-lookup"><span data-stu-id="14589-144">To test that the login page works as expected, attempt to login with one of the user accounts you created in the preceding tutorial.</span></span> <span data-ttu-id="14589-145">O bien, si aún no ha creado una cuenta, siga adelante y crear uno desde el `~/Membership/CreatingUserAccounts.aspx` página.</span><span class="sxs-lookup"><span data-stu-id="14589-145">Or, if you have not yet created an account, go ahead and create one from the `~/Membership/CreatingUserAccounts.aspx` page.</span></span>

> [!NOTE]
> <span data-ttu-id="14589-146">Cuando el usuario escribe sus credenciales y envía el formulario de la página de inicio de sesión, las credenciales, incluida su contraseña, se transmiten a través de Internet al servidor web en *texto sin formato*.</span><span class="sxs-lookup"><span data-stu-id="14589-146">When the user enters her credentials and submits the login page form, the credentials, including her password, are transmitted over the Internet to the web server in *plain text*.</span></span> <span data-ttu-id="14589-147">Esto significa que los hackers examen el tráfico de red pueden ver el nombre de usuario y la contraseña.</span><span class="sxs-lookup"><span data-stu-id="14589-147">That means any hacker sniffing the network traffic can see the username and password.</span></span> <span data-ttu-id="14589-148">Para evitar esto, es esencial para cifrar el tráfico de red mediante [capas de sockets seguros (SSL)](http://en.wikipedia.org/wiki/Secure_Sockets_Layer).</span><span class="sxs-lookup"><span data-stu-id="14589-148">To prevent this, it is essential to encrypt the network traffic by using [Secure Socket Layers (SSL)](http://en.wikipedia.org/wiki/Secure_Sockets_Layer).</span></span> <span data-ttu-id="14589-149">Esto garantizará que se cifra las credenciales (así como marcado HTML de la página completa) desde el momento en que dejan el explorador hasta que se reciben por el servidor web.</span><span class="sxs-lookup"><span data-stu-id="14589-149">This will ensure that the credentials (as well as the entire page's HTML markup) are encrypted from the moment they leave the browser until they are received by the web server.</span></span>


### <a name="how-the-membership-framework-handles-invalid-login-attempts"></a><span data-ttu-id="14589-150">Cómo el marco de pertenencia controla los intentos de inicio de sesión no válido</span><span class="sxs-lookup"><span data-stu-id="14589-150">How the Membership Framework Handles Invalid Login Attempts</span></span>

<span data-ttu-id="14589-151">Cuando un visitante llega a la página de inicio de sesión y envía sus credenciales, el explorador realiza una solicitud HTTP a la página de inicio de sesión.</span><span class="sxs-lookup"><span data-stu-id="14589-151">When a visitor reaches the login page and submits their credentials, their browser makes an HTTP request to the login page.</span></span> <span data-ttu-id="14589-152">Si las credenciales son válidas, la respuesta HTTP incluye el vale de autenticación en una cookie.</span><span class="sxs-lookup"><span data-stu-id="14589-152">If the credentials are valid, the HTTP response includes the authentication ticket in a cookie.</span></span> <span data-ttu-id="14589-153">Por lo tanto, un hacker que intente irrumpir en el sitio podría crear un programa que exhaustivamente envía solicitudes HTTP a la página de inicio de sesión con un nombre de usuario válido y una estimación de la contraseña.</span><span class="sxs-lookup"><span data-stu-id="14589-153">Therefore, a hacker attempting to break into your site could create a program that exhaustively sends HTTP requests to the login page with a valid username and a guess at the password.</span></span> <span data-ttu-id="14589-154">Si el intento de contraseña es correcto, la página de inicio de sesión devolverá la cookie de vale de autenticación, momento en que el programa sabe que ha tropezado un par de nombre de usuario y contraseña válidos.</span><span class="sxs-lookup"><span data-stu-id="14589-154">If the password guess is correct, the login page will return the authentication ticket cookie, at which point the program knows it has stumbled upon a valid username/password pair.</span></span> <span data-ttu-id="14589-155">A través de fuerza bruta, este tipo de programa puede ser capaz de tropieza con una contraseña de usuario, especialmente si la contraseña es débil.</span><span class="sxs-lookup"><span data-stu-id="14589-155">Through brute force, such a program might be able to stumble upon a user's password, especially if the password is weak.</span></span>

<span data-ttu-id="14589-156">Para evitar estos ataques de fuerza bruta, el marco de pertenencia se bloquea un usuario si hay un cierto número de intentos de inicio de sesión incorrecto en un determinado periodo de tiempo.</span><span class="sxs-lookup"><span data-stu-id="14589-156">To prevent such brute force attacks, the Membership framework locks out a user if there are a certain number of unsuccessful login attempts within a certain period of time.</span></span> <span data-ttu-id="14589-157">Los parámetros exactos son configurables a través de los dos valores de configuración de proveedor de pertenencia:</span><span class="sxs-lookup"><span data-stu-id="14589-157">The exact parameters are configurable through the following two Membership provider configuration settings:</span></span>

- <span data-ttu-id="14589-158">`maxInvalidPasswordAttempts` -Especifica cuántas contraseñas no válidas se permiten los intentos del usuario dentro del período de tiempo antes de que la cuenta está bloqueada. El valor predeterminado es 5.</span><span class="sxs-lookup"><span data-stu-id="14589-158">`maxInvalidPasswordAttempts` - specifies how many invalid password attempts are allowed for the user within the time period before the account is locked out. The default value is 5.</span></span>
- <span data-ttu-id="14589-159">`passwordAttemptWindow` -indica el período de tiempo en minutos durante el cual el número especificado de intentos de inicio de sesión no válido hará que la cuenta que se bloquee. El valor predeterminado es 10.</span><span class="sxs-lookup"><span data-stu-id="14589-159">`passwordAttemptWindow` - indicates the time period in minutes during which the specified number of invalid login attempts will cause the account to be locked out. The default value is 10.</span></span>

<span data-ttu-id="14589-160">Si un usuario se ha bloqueado, no puede iniciar sesión hasta que un administrador la desbloquee su cuenta de usuario.</span><span class="sxs-lookup"><span data-stu-id="14589-160">If a user has been locked out, she cannot login until an administrator unlocks her account.</span></span> <span data-ttu-id="14589-161">Cuando un usuario está bloqueado, el `ValidateUser` método *siempre* devolver `False`, incluso si se han proporcionado credenciales válidas.</span><span class="sxs-lookup"><span data-stu-id="14589-161">When a user is locked out, the `ValidateUser` method will *always* return `False`, even if valid credentials are supplied.</span></span> <span data-ttu-id="14589-162">Aunque este comportamiento reduce la probabilidad de que un hacker se interrumpirá en el sitio a través de métodos de fuerza bruta, puede terminar el bloqueo de un usuario válido que simplemente ha olvidado su contraseña o accidentalmente el BLOQ o es tener un mal día de escritura.</span><span class="sxs-lookup"><span data-stu-id="14589-162">While this behavior lessens the likelihood that a hacker will break into your site through brute force methods, it can end up locking out a valid user who has simply forgotten her password or accidentally has the Caps Lock on or is having a bad typing day.</span></span>

<span data-ttu-id="14589-163">Lamentablemente, no hay ninguna herramienta integrada para desbloquear una cuenta de usuario.</span><span class="sxs-lookup"><span data-stu-id="14589-163">Unfortunately, there is no built-in tool for unlocking a user account.</span></span> <span data-ttu-id="14589-164">Para desbloquear una cuenta, puede modificar la base de datos directamente - cambiar el `IsLockedOut` campo el `aspnet_Membership` de tabla para la cuenta de usuario correspondiente, o crear una basada en web interfaz que se enumera bloqueada cuentas con las opciones para desbloquearlos.</span><span class="sxs-lookup"><span data-stu-id="14589-164">In order to unlock an account, you can modify the database directly - change the `IsLockedOut` field in the `aspnet_Membership` table for the appropriate user account - or create a web-based interface that lists locked out accounts with options to unlock them.</span></span> <span data-ttu-id="14589-165">Examinaremos crear interfaces administrativas para llevar a cabo tareas relacionadas con el rol y la cuenta de usuario comunes en un futuro tutorial.</span><span class="sxs-lookup"><span data-stu-id="14589-165">We will examine creating administrative interfaces for accomplishing common user account- and role-related tasks in a future tutorial.</span></span>

> [!NOTE]
> <span data-ttu-id="14589-166">Una desventaja de la `ValidateUser` método es que cuando las credenciales proporcionadas no son válidas, no proporciona ninguna explicación sobre el motivo por.</span><span class="sxs-lookup"><span data-stu-id="14589-166">One downside of the `ValidateUser` method is that when the supplied credentials are invalid, it does not provide any explanation as to why.</span></span> <span data-ttu-id="14589-167">Las credenciales pueden ser no válidas porque no hay ningún par de nombre de usuario y contraseña correspondiente en el almacén de usuario, o porque el usuario no han sido aprobado o porque se ha bloqueado el usuario. En el paso 4, veremos cómo mostrar un mensaje más detallado al usuario cuando se produce un error en su intento de inicio de sesión.</span><span class="sxs-lookup"><span data-stu-id="14589-167">The credentials may be invalid because there is no matching username/password pair in the user store, or because the user has not yet been approved, or because the user has been locked out. In Step 4 we will see how to show a more detailed message to the user when their login attempt fails.</span></span>


## <a name="step-2-collecting-credentials-through-the-login-web-control"></a><span data-ttu-id="14589-168">Paso 2: Recopilar las credenciales a través del Control de inicio de sesión Web</span><span class="sxs-lookup"><span data-stu-id="14589-168">Step 2: Collecting Credentials through the Login Web Control</span></span>

<span data-ttu-id="14589-169">El [control de inicio de sesión Web](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.aspx) representa una interfaz de usuario predeterminada muy similar al que se creó en el <a id="Tutorial02"> </a> [ *una visión general de autenticación mediante formularios* ](../introduction/an-overview-of-forms-authentication-vb.md) tutorial.</span><span class="sxs-lookup"><span data-stu-id="14589-169">The [Login Web control](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.aspx) renders a default user interface very similar to the one we created back in the <a id="Tutorial02"></a>[*An Overview of Forms Authentication*](../introduction/an-overview-of-forms-authentication-vb.md) tutorial.</span></span> <span data-ttu-id="14589-170">Uso del control de inicio de sesión, nos ahorra el trabajo de tener que crear la interfaz para recopilar las credenciales del visitante.</span><span class="sxs-lookup"><span data-stu-id="14589-170">Using the Login control saves us the work of having to create the interface to collect the visitor's credentials.</span></span> <span data-ttu-id="14589-171">Además, el control de inicio de sesión inicia automáticamente la sesión del usuario (suponiendo que las credenciales enviadas son válidas), con lo que guardar nos de tener que escribir ningún código.</span><span class="sxs-lookup"><span data-stu-id="14589-171">Moreover, the Login control automatically signs in the user (assuming the submitted credentials are valid), thereby saving us from having to write any code.</span></span>

<span data-ttu-id="14589-172">Vamos a actualizar `Login.aspx`, reemplazando la interfaz creada manualmente y de código con un control de inicio de sesión.</span><span class="sxs-lookup"><span data-stu-id="14589-172">Let's update `Login.aspx`, replacing the manually created interface and code with a Login control.</span></span> <span data-ttu-id="14589-173">Empiece quitando el marcado existente y código en `Login.aspx`.</span><span class="sxs-lookup"><span data-stu-id="14589-173">Start by removing the existing markup and code in `Login.aspx`.</span></span> <span data-ttu-id="14589-174">Puede eliminar directamente, o simplemente coméntelo. Para comentar el marcado declarativo, inclúyalo con la `<%--` y `--%>` delimitadores.</span><span class="sxs-lookup"><span data-stu-id="14589-174">You may delete it outright, or simply comment it out. To comment out declarative markup, surround it with the `<%--` and `--%>` delimiters.</span></span> <span data-ttu-id="14589-175">Puede escribir estos delimitadores manualmente, o bien, como se muestra en la figura 2, puede seleccionar el texto que se marque como comentario y, a continuación, haga clic en el comentario en el icono de las líneas seleccionadas en la barra de herramientas.</span><span class="sxs-lookup"><span data-stu-id="14589-175">You can enter these delimiters manually, or, as Figure 2 shows, you may select the text to comment out and then click the Comment out the selected lines icon in the Toolbar.</span></span> <span data-ttu-id="14589-176">De forma similar, puede usar el comentario en el icono de las líneas seleccionadas para marcar como comentario el código seleccionado en la clase de código subyacente.</span><span class="sxs-lookup"><span data-stu-id="14589-176">Similarly, you can use the Comment out the selected lines icon to comment out the selected code in the code-behind class.</span></span>


<span data-ttu-id="14589-177">[![Comente el marcado declarativo existente y código fuente en Login.aspx](validating-user-credentials-against-the-membership-user-store-vb/_static/image5.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="14589-177">[![Comment Out the Existing Declarative Markup and Source Code in Login.aspx](validating-user-credentials-against-the-membership-user-store-vb/_static/image5.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image4.png)</span></span>

<span data-ttu-id="14589-178">**Figura 2**: Comentario Out the existente marcado declarativo y código fuente en Login.aspx ([haga clic aquí para ver imagen en tamaño completo](validating-user-credentials-against-the-membership-user-store-vb/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="14589-178">**Figure 2**: Comment Out the Existing Declarative Markup and Source Code in Login.aspx  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-vb/_static/image6.png))</span></span>


> [!NOTE]
> <span data-ttu-id="14589-179">El comentario en el icono de líneas seleccionado no está disponible al ver el marcado declarativo en Visual Studio 2005.</span><span class="sxs-lookup"><span data-stu-id="14589-179">The Comment out the selected lines icon is not available when viewing the declarative markup in Visual Studio 2005.</span></span> <span data-ttu-id="14589-180">Si usa Visual Studio 2008 no necesita agregar manualmente el `<%--` y `--%>` delimitadores.</span><span class="sxs-lookup"><span data-stu-id="14589-180">If you are not using Visual Studio 2008 you will need to manually add the `<%--` and `--%>` delimiters.</span></span>


<span data-ttu-id="14589-181">A continuación, arrastre un control de inicio de sesión desde el cuadro de herramientas en la página y establezca su `ID` propiedad `myLogin`.</span><span class="sxs-lookup"><span data-stu-id="14589-181">Next, drag a Login control from the Toolbox on to the page and set its `ID` property to `myLogin`.</span></span> <span data-ttu-id="14589-182">En este momento, la pantalla debe ser similar a la figura 3.</span><span class="sxs-lookup"><span data-stu-id="14589-182">At this point your screen should look similar to Figure 3.</span></span> <span data-ttu-id="14589-183">Tenga en cuenta que la interfaz predeterminada del control de inicio de sesión incluye controles de cuadro de texto para el nombre de usuario y contraseña, un Recordármelo la próxima vez casilla de verificación y un botón de registro.</span><span class="sxs-lookup"><span data-stu-id="14589-183">Note that the Login control's default interface includes TextBox controls for the username and password, a Remember me next time CheckBox, and a Log In Button.</span></span> <span data-ttu-id="14589-184">También hay `RequiredFieldValidator` controles para los dos cuadros de texto.</span><span class="sxs-lookup"><span data-stu-id="14589-184">There are also `RequiredFieldValidator` controls for the two TextBoxes.</span></span>


<span data-ttu-id="14589-185">[![Agregar un Control de inicio de sesión a la página](validating-user-credentials-against-the-membership-user-store-vb/_static/image8.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="14589-185">[![Add a Login Control to the Page](validating-user-credentials-against-the-membership-user-store-vb/_static/image8.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image7.png)</span></span>

<span data-ttu-id="14589-186">**Figura 3**: Agregar un Control de inicio de sesión a la página ([haga clic aquí para ver imagen en tamaño completo](validating-user-credentials-against-the-membership-user-store-vb/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="14589-186">**Figure 3**: Add a Login Control to the Page  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-vb/_static/image9.png))</span></span>


<span data-ttu-id="14589-187">Y listo!</span><span class="sxs-lookup"><span data-stu-id="14589-187">And we're done!</span></span> <span data-ttu-id="14589-188">Cuando se hace clic en el botón Iniciar sesión del control de inicio de sesión, se producirá una devolución de datos y el control de inicio de sesión llamará el `Membership.ValidateUser` método, pasando el nombre de usuario especificado y la contraseña.</span><span class="sxs-lookup"><span data-stu-id="14589-188">When the Login control's Log In button is clicked, a postback will occur and the Login control will call the `Membership.ValidateUser` method, passing in the entered username and password.</span></span> <span data-ttu-id="14589-189">Si las credenciales son válidas, el control de inicio de sesión muestra un mensaje con esta.</span><span class="sxs-lookup"><span data-stu-id="14589-189">If the credentials are invalid, the Login control displays a message stating such.</span></span> <span data-ttu-id="14589-190">Si, sin embargo, las credenciales son válidas, el control de inicio de sesión crea los formularios de vale de autenticación y redirige al usuario a la página adecuada.</span><span class="sxs-lookup"><span data-stu-id="14589-190">If, however, the credentials are valid, then the Login control creates the forms authentication ticket and redirects the user to the appropriate page.</span></span>

<span data-ttu-id="14589-191">El control de inicio de sesión usa cuatro factores para determinar la página apropiada para redirigir al usuario cuando inician una sesión correctamente:</span><span class="sxs-lookup"><span data-stu-id="14589-191">The Login control uses four factors to determine the appropriate page to redirect the user to upon a successful login:</span></span>

- <span data-ttu-id="14589-192">Si el control de inicio de sesión está en la página de inicio de sesión tal como se define por `loginUrl` en la configuración de autenticación de formularios; este valor de configuración predeterminado es `Login.aspx`</span><span class="sxs-lookup"><span data-stu-id="14589-192">Whether the Login control is on the login page as defined by `loginUrl` setting in the forms authentication configuration; this setting's default value is `Login.aspx`</span></span>
- <span data-ttu-id="14589-193">La presencia de un `ReturnUrl` parámetro querystring</span><span class="sxs-lookup"><span data-stu-id="14589-193">The presence of a `ReturnUrl` querystring parameter</span></span>
- <span data-ttu-id="14589-194">El valor del control de inicio de sesión [ `DestinationUrl` propiedad](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.destinationpageurl.aspx)</span><span class="sxs-lookup"><span data-stu-id="14589-194">The value of the Login control's [`DestinationUrl` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.destinationpageurl.aspx)</span></span>
- <span data-ttu-id="14589-195">El `defaultUrl` valor especificado en los formularios de opciones de configuración de autenticación; este valor de configuración predeterminado es Default.aspx</span><span class="sxs-lookup"><span data-stu-id="14589-195">The `defaultUrl` value specified in the forms authentication configuration settings; this setting's default value is Default.aspx</span></span>

<span data-ttu-id="14589-196">Figura 4 se muestra cómo el control de inicio de sesión utiliza estos cuatro parámetros para llegar a su decisión de página correspondiente.</span><span class="sxs-lookup"><span data-stu-id="14589-196">Figure 4 depicts the how the Login control uses these four parameters to arrive at its appropriate page decision.</span></span>


<span data-ttu-id="14589-197">[![Agregar un Control de inicio de sesión a la página](validating-user-credentials-against-the-membership-user-store-vb/_static/image11.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="14589-197">[![Add a Login Control to the Page](validating-user-credentials-against-the-membership-user-store-vb/_static/image11.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image10.png)</span></span>

<span data-ttu-id="14589-198">**Figura 4**: Agregar un Control de inicio de sesión a la página ([haga clic aquí para ver imagen en tamaño completo](validating-user-credentials-against-the-membership-user-store-vb/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="14589-198">**Figure 4**: Add a Login Control to the Page  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-vb/_static/image12.png))</span></span>


<span data-ttu-id="14589-199">Dedique un momento para probar el control de inicio de sesión por visitar el sitio a través de un explorador e iniciando sesión como un usuario existente en el marco de pertenencia.</span><span class="sxs-lookup"><span data-stu-id="14589-199">Take a moment to test out the Login control by visiting the site through a browser and logging in as an existing user in the Membership framework.</span></span>

<span data-ttu-id="14589-200">Interfaz representado del control de inicio de sesión es altamente configurable.</span><span class="sxs-lookup"><span data-stu-id="14589-200">The Login control's rendered interface is highly configurable.</span></span> <span data-ttu-id="14589-201">Hay una serie de propiedades que afectan a su apariencia; Además, el control de inicio de sesión se puede convertir en una plantilla para un control preciso sobre el diseño de los elementos de interfaz de usuario.</span><span class="sxs-lookup"><span data-stu-id="14589-201">There are a number of properties that influence its appearance; what's more, the Login control can be converted into a template for precise control over the layout the user interface elements.</span></span> <span data-ttu-id="14589-202">El resto de este paso examina cómo personalizar la apariencia y el diseño.</span><span class="sxs-lookup"><span data-stu-id="14589-202">The remainder of this step examines how to customize the appearance and layout.</span></span>

### <a name="customizing-the-login-controls-appearance"></a><span data-ttu-id="14589-203">Personalizar la apariencia del Control de inicio de sesión</span><span class="sxs-lookup"><span data-stu-id="14589-203">Customizing the Login Control's Appearance</span></span>

<span data-ttu-id="14589-204">Configuración de propiedades del control de inicio de sesión predeterminada presentar una interfaz de usuario con un título (iniciar sesión), controles TextBox y etiqueta para las entradas de nombre de usuario y contraseña, un Recordarme la próxima vez CheckBox y un botón Iniciar sesión.</span><span class="sxs-lookup"><span data-stu-id="14589-204">The Login control's default property settings render a user interface with a title ( Log In ), TextBox and Label controls for the username and password inputs, a Remember me next time CheckBox, and a Log In button.</span></span> <span data-ttu-id="14589-205">La apariencia de estos elementos es todas configurable a través de numerosas propiedades del control de inicio de sesión.</span><span class="sxs-lookup"><span data-stu-id="14589-205">The appearances of these elements are all configurable through the Login control's numerous properties.</span></span> <span data-ttu-id="14589-206">Además, se pueden agregar elementos de interfaz de usuario adicionales: por ejemplo, un vínculo a una página para crear una nueva cuenta de usuario - estableciendo una propiedad o dos.</span><span class="sxs-lookup"><span data-stu-id="14589-206">Furthermore, additional user interface elements - such as a link to a page to create a new user account - can be added by setting a property or two.</span></span>

<span data-ttu-id="14589-207">Vamos a dedicar unos minutos en gussy el aspecto de nuestro control de inicio de sesión.</span><span class="sxs-lookup"><span data-stu-id="14589-207">Let's spend a few moments to gussy up the appearance of our Login control.</span></span> <span data-ttu-id="14589-208">Puesto que la `Login.aspx` página ya tiene el texto en la parte superior de la página que indica el inicio de sesión, el título del control de inicio de sesión es superflua.</span><span class="sxs-lookup"><span data-stu-id="14589-208">Since the `Login.aspx` page already has text at the top of the page that says Login, the Login control's title is superfluous.</span></span> <span data-ttu-id="14589-209">Por lo tanto, borre el [ `TitleText` propiedad](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.titletext.aspx) valor con el fin de quitar el título del control de inicio de sesión.</span><span class="sxs-lookup"><span data-stu-id="14589-209">Therefore, clear out the [`TitleText` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.titletext.aspx) value in order to remove the Login control's title.</span></span>

<span data-ttu-id="14589-210">El nombre de usuario: y la contraseña: Las etiquetas a la izquierda de los dos controles TextBox se pueden personalizar mediante la [ `UserNameLabelText` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.usernamelabeltext.aspx) y [ `PasswordLabelText` propiedades](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordlabeltext.aspx), respectivamente.</span><span class="sxs-lookup"><span data-stu-id="14589-210">The User Name: and Password: Labels to the left of the two TextBox controls can be customized through the [`UserNameLabelText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.usernamelabeltext.aspx) and [`PasswordLabelText` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordlabeltext.aspx), respectively.</span></span> <span data-ttu-id="14589-211">Vamos a cambiar el nombre de usuario: Etiqueta para leer el nombre de usuario:.</span><span class="sxs-lookup"><span data-stu-id="14589-211">Let's change the User Name: Label to read Username:.</span></span> <span data-ttu-id="14589-212">Los estilos de etiqueta y el cuadro de texto son configurables a través de la [ `LabelStyle` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.labelstyle.aspx) y [ `TextBoxStyle` propiedades](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.textboxstyle.aspx), respectivamente.</span><span class="sxs-lookup"><span data-stu-id="14589-212">The Label and TextBox styles are configurable through the [`LabelStyle`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.labelstyle.aspx) and [`TextBoxStyle` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.textboxstyle.aspx), respectively.</span></span>

<span data-ttu-id="14589-213">Recordar mi cuenta se puede establecer la propiedad de texto de la casilla de tiempo siguiente a través del control de inicio de sesión [ `RememberMeText` propiedad](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.remembermetext.aspx), y su valor predeterminado comprueba el estado es configurable a través de la [ `RememberMeSet` propiedad](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.remembermeset.aspx)(el valor predeterminado es False).</span><span class="sxs-lookup"><span data-stu-id="14589-213">The Remember me next time CheckBox's Text property can be set through the Login control's [`RememberMeText` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.remembermetext.aspx), and its default checked state is configurable through the [`RememberMeSet` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.remembermeset.aspx) (which defaults to False).</span></span> <span data-ttu-id="14589-214">Avanzar y configurar el `RememberMeSet` se comprobará la propiedad en True para que el Recordarme la próxima vez casilla de verificación de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="14589-214">Go ahead and set the `RememberMeSet` property to True so that the Remember me next time CheckBox will be checked by default.</span></span>

<span data-ttu-id="14589-215">El control de inicio de sesión ofrece dos propiedades para ajustar el diseño de sus controles de interfaz de usuario.</span><span class="sxs-lookup"><span data-stu-id="14589-215">The Login control offers two properties for adjusting the layout of its user interface controls.</span></span> <span data-ttu-id="14589-216">El [ `TextLayout` propiedad](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.textlayout.aspx) indica si el nombre de usuario: y la contraseña: Las etiquetas aparecen a la izquierda de los cuadros de texto correspondiente (el valor predeterminado) o por encima de ellos.</span><span class="sxs-lookup"><span data-stu-id="14589-216">The [`TextLayout` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.textlayout.aspx) indicates whether the Username: and Password: Labels appear to the left of their corresponding TextBoxes (the default), or above them.</span></span> <span data-ttu-id="14589-217">El [ `Orientation` propiedad](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.orientation.aspx) indica si las entradas de nombre de usuario y contraseña estén situadas verticalmente (uno encima del otro) o en horizontal.</span><span class="sxs-lookup"><span data-stu-id="14589-217">The [`Orientation` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.orientation.aspx) indicates whether the username and password inputs are situated vertically (one above the other) or horizontally.</span></span> <span data-ttu-id="14589-218">Voy a dejar estas dos propiedades con sus valores predeterminados, pero le animo a probar la configuración de estas dos propiedades a sus valores no predeterminados para ver el efecto resultante.</span><span class="sxs-lookup"><span data-stu-id="14589-218">I am going to leave these two properties set to their defaults, but I encourage you to try setting these two properties to their non-default values to see the resulting effect.</span></span>

> [!NOTE]
> <span data-ttu-id="14589-219">En la sección siguiente, la configuración de diseño del Control de inicio de sesión, veremos con plantillas para definir el diseño concreto de elementos de interfaz de usuario del control de diseño.</span><span class="sxs-lookup"><span data-stu-id="14589-219">In the next section, Configuring the Login Control's Layout, we will look at using templates to define the precise layout of the Layout control's user interface elements.</span></span>


<span data-ttu-id="14589-220">¿Ajustar los valores de propiedad del control de inicio de sesión estableciendo la [ `CreateUserText` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.createusertext.aspx) y [ `CreateUserUrl` propiedades](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.createuserurl.aspx) a no registrado aún?</span><span class="sxs-lookup"><span data-stu-id="14589-220">Wrap up the Login control's property settings by setting the [`CreateUserText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.createusertext.aspx) and [`CreateUserUrl` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.createuserurl.aspx) to Not registered yet?</span></span> <span data-ttu-id="14589-221">Cree una cuenta.</span><span class="sxs-lookup"><span data-stu-id="14589-221">Create an account!</span></span> <span data-ttu-id="14589-222">y `~/Membership/CreatingUserAccounts.aspx`, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="14589-222">and `~/Membership/CreatingUserAccounts.aspx`, respectively.</span></span> <span data-ttu-id="14589-223">Esto agrega un hipervínculo a la interfaz del control de inicio de sesión que apunta a la página se creó en el <a id="Tutorial05"> </a> [tutorial anterior](creating-user-accounts-vb.md).</span><span class="sxs-lookup"><span data-stu-id="14589-223">This adds a hyperlink to the Login control's interface pointing to the page we created in the <a id="Tutorial05"></a>[preceding tutorial](creating-user-accounts-vb.md).</span></span> <span data-ttu-id="14589-224">El control de inicio de sesión [ `HelpPageText` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.helppagetext.aspx) y [ `HelpPageUrl` propiedades](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.helppageurl.aspx) y [ `PasswordRecoveryText` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordrecoverytext.aspx) y [ `PasswordRecoveryUrl` propiedades](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordrecoveryurl.aspx) profesional de la misma manera, los vínculos a una página de ayuda y una página de recuperación de contraseña.</span><span class="sxs-lookup"><span data-stu-id="14589-224">The Login control's [`HelpPageText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.helppagetext.aspx) and [`HelpPageUrl` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.helppageurl.aspx) and [`PasswordRecoveryText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordrecoverytext.aspx) and [`PasswordRecoveryUrl` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordrecoveryurl.aspx) work in the same manner, rendering links to a help page and a password recovery page.</span></span>

<span data-ttu-id="14589-225">Después de realizar estos cambios de propiedad, deben ser similares al que se muestra en la figura 5 marcado declarativo y la apariencia del control de inicio de sesión.</span><span class="sxs-lookup"><span data-stu-id="14589-225">After making these property changes, your Login control's declarative markup and appearance should look similar to that shown in Figure 5.</span></span>


<span data-ttu-id="14589-226">[![Valores de las propiedades del Control de inicio de sesión determinan su apariencia](validating-user-credentials-against-the-membership-user-store-vb/_static/image14.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="14589-226">[![The Login Control's Properties' Values Dictate Its Appearance](validating-user-credentials-against-the-membership-user-store-vb/_static/image14.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image13.png)</span></span>

<span data-ttu-id="14589-227">**Figura 5**: Valores determinan su apariencia las propiedades del Control de inicio de sesión ([haga clic aquí para ver imagen en tamaño completo](validating-user-credentials-against-the-membership-user-store-vb/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="14589-227">**Figure 5**: The Login Control's Properties' Values Dictate Its Appearance  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-vb/_static/image15.png))</span></span>


### <a name="configuring-the-login-controls-layout"></a><span data-ttu-id="14589-228">Configuración de diseño del Control de inicio de sesión</span><span class="sxs-lookup"><span data-stu-id="14589-228">Configuring the Login Control's Layout</span></span>

<span data-ttu-id="14589-229">Interfaz de usuario predeterminada del control de inicio de sesión Web presenta la interfaz en un elemento HTML `<table>`.</span><span class="sxs-lookup"><span data-stu-id="14589-229">The Login Web control's default user interface lays out the interface in an HTML `<table>`.</span></span> <span data-ttu-id="14589-230">Pero, ¿qué ocurre si se necesita un mayor control sobre la salida representada?</span><span class="sxs-lookup"><span data-stu-id="14589-230">But what if we need finer control over the rendered output?</span></span> <span data-ttu-id="14589-231">Puede que queramos reemplazar el `<table>` con una serie de `<div>` etiquetas.</span><span class="sxs-lookup"><span data-stu-id="14589-231">Maybe we want to replace the `<table>` with a series of `<div>` tags.</span></span> <span data-ttu-id="14589-232">O bien, ¿qué sucede si nuestra aplicación requiere credenciales adicionales para la autenticación?</span><span class="sxs-lookup"><span data-stu-id="14589-232">Or what if our application requires additional credentials for authentication?</span></span> <span data-ttu-id="14589-233">Muchos sitios Web financieros, por ejemplo, exigen que los usuarios proporcionar no solo un nombre de usuario y contraseña, pero también un número de identificación Personal (PIN) u otra información de identificación.</span><span class="sxs-lookup"><span data-stu-id="14589-233">Many financial websites, for instance, require users to supply not only a username and password, but also a Personal Identification Number (PIN), or other identifying information.</span></span> <span data-ttu-id="14589-234">Todo lo que pueden ser los motivos, es posible convertir el control de inicio de sesión en una plantilla, desde el que podemos definir explícitamente marcado declarativo de la interfaz.</span><span class="sxs-lookup"><span data-stu-id="14589-234">Whatever the reasons may be, it is possible to convert the Login control into a template, from which we can explicitly define the interface's declarative markup.</span></span>

<span data-ttu-id="14589-235">Es necesario hacer dos cosas con el fin de actualizar el control de inicio de sesión para recopilar credenciales adicionales:</span><span class="sxs-lookup"><span data-stu-id="14589-235">We need to do two things in order to update the Login control to collect additional credentials:</span></span>

1. <span data-ttu-id="14589-236">Actualizar la interfaz del control de inicio de sesión para incluir controles Web para recopilar las credenciales adicionales.</span><span class="sxs-lookup"><span data-stu-id="14589-236">Update the Login control's interface to include Web control(s) to collect the additional credentials.</span></span>
2. <span data-ttu-id="14589-237">Invalidar la lógica de autenticación interno del control de inicio de sesión para que un usuario se autentica solo si su nombre de usuario y la contraseña es válida y sus credenciales adicionales son válidos, demasiado.</span><span class="sxs-lookup"><span data-stu-id="14589-237">Override the Login control's internal authentication logic so that a user is only authenticated if their username and password is valid and their additional credentials are valid, too.</span></span>

<span data-ttu-id="14589-238">Para lograr la primera tarea, se debe convertir el control de inicio de sesión en una plantilla y agregue los controles Web necesarios.</span><span class="sxs-lookup"><span data-stu-id="14589-238">To accomplish the first task, we need to convert the Login control into a template and add the necessary Web controls.</span></span> <span data-ttu-id="14589-239">En cuanto a la segunda tarea, se puede sustituir la lógica de autenticación del control de inicio de sesión mediante la creación de un controlador de eventos para el control [ `Authenticate` eventos](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.authenticate.aspx).</span><span class="sxs-lookup"><span data-stu-id="14589-239">As for the second task, the Login control's authentication logic can be superseded by creating an event handler for the control's [`Authenticate` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.authenticate.aspx).</span></span>

<span data-ttu-id="14589-240">Vamos a actualizar el control de inicio de sesión para que se solicita a los usuarios su nombre de usuario, contraseña y dirección de correo electrónico y sólo autentica al usuario si la dirección de correo electrónico proporcionada coincide con su dirección de correo electrónico en el archivo.</span><span class="sxs-lookup"><span data-stu-id="14589-240">Let's update the Login control so that it prompts users for their username, password, and email address and only authenticates the user if the email address supplied matches their email address on file.</span></span> <span data-ttu-id="14589-241">En primer lugar, necesitamos convertir la interfaz del control de inicio de sesión en una plantilla.</span><span class="sxs-lookup"><span data-stu-id="14589-241">We first need to convert the Login control's interface to a template.</span></span> <span data-ttu-id="14589-242">Desde la etiqueta inteligente del control de inicio de sesión, elija a la opción convertir en plantilla.</span><span class="sxs-lookup"><span data-stu-id="14589-242">From the Login control's Smart Tag, choose the Convert to template option.</span></span>


<span data-ttu-id="14589-243">[![Convertir el Control de inicio de sesión en una plantilla](validating-user-credentials-against-the-membership-user-store-vb/_static/image17.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="14589-243">[![Convert the Login Control to a Template](validating-user-credentials-against-the-membership-user-store-vb/_static/image17.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image16.png)</span></span>

<span data-ttu-id="14589-244">**Figura 6**: Convertir el Control de inicio de sesión en una plantilla ([haga clic aquí para ver imagen en tamaño completo](validating-user-credentials-against-the-membership-user-store-vb/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="14589-244">**Figure 6**: Convert the Login Control to a Template  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-vb/_static/image18.png))</span></span>


> [!NOTE]
> <span data-ttu-id="14589-245">Para revertir el control de inicio de sesión a su versión template previamente, haga clic en el vínculo de restablecimiento de la etiqueta inteligente del control.</span><span class="sxs-lookup"><span data-stu-id="14589-245">To revert the Login control to its pre-template version, click the Reset link from the control's Smart Tag.</span></span>


<span data-ttu-id="14589-246">Convertir el control de inicio de sesión a una plantilla agrega un `LayoutTemplate` al código de marcado declarativo con elementos HTML y controles Web define la interfaz de usuario del control.</span><span class="sxs-lookup"><span data-stu-id="14589-246">Converting the Login control to a template adds a `LayoutTemplate` to the control's declarative markup with HTML elements and Web controls defining the user interface.</span></span> <span data-ttu-id="14589-247">Como se muestra en la figura 7, convertir el control a una plantilla quita un número de propiedades de la ventana Propiedades, como `TitleText`, `CreateUserUrl`, y así sucesivamente, ya que estos valores de propiedad se omiten cuando se usa una plantilla.</span><span class="sxs-lookup"><span data-stu-id="14589-247">As Figure 7 shows, converting the control to a template removes a number of properties from the Properties window, such as `TitleText`, `CreateUserUrl`, and so forth, since these property values are ignored when using a template.</span></span>


<span data-ttu-id="14589-248">[![Menos propiedades están que disponibles cuando el Control Login se convierte en una plantilla](validating-user-credentials-against-the-membership-user-store-vb/_static/image20.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="14589-248">[![Fewer Properties are Available When the Login Control is Converted to a Template](validating-user-credentials-against-the-membership-user-store-vb/_static/image20.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image19.png)</span></span>

<span data-ttu-id="14589-249">**Figura 7**: Menos propiedades están disponibles cuando el Control Login se convierte en una plantilla ([haga clic aquí para ver imagen en tamaño completo](validating-user-credentials-against-the-membership-user-store-vb/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="14589-249">**Figure 7**: Fewer Properties are Available When the Login Control is Converted to a Template  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-vb/_static/image21.png))</span></span>


<span data-ttu-id="14589-250">El marcado HTML en el `LayoutTemplate` se puede modificar según sea necesario.</span><span class="sxs-lookup"><span data-stu-id="14589-250">The HTML markup in the `LayoutTemplate` may be modified as needed.</span></span> <span data-ttu-id="14589-251">Del mismo modo, no dude en agregar los nuevos controles Web a la plantilla.</span><span class="sxs-lookup"><span data-stu-id="14589-251">Likewise, feel free to add any new Web controls to the template.</span></span> <span data-ttu-id="14589-252">Sin embargo, es importante los controles Web de núcleo de ese control de inicio de sesión permanecen en la plantilla y mantener sus asignado `ID` valores.</span><span class="sxs-lookup"><span data-stu-id="14589-252">However, it is important that Login control's core Web controls remain in the template and keep their assigned `ID` values.</span></span> <span data-ttu-id="14589-253">En concreto, no quite ni cambie el nombre de la `UserName` o `Password` cuadros de texto, el `RememberMe` casilla, la `LoginButton` botón, el `FailureText` etiqueta, o el `RequiredFieldValidator` controles.</span><span class="sxs-lookup"><span data-stu-id="14589-253">In particular, do not remove or rename the `UserName` or `Password` TextBoxes, the `RememberMe` CheckBox, the `LoginButton` Button, the `FailureText` Label, or the `RequiredFieldValidator` controls.</span></span>

<span data-ttu-id="14589-254">Para recopilar la dirección de correo electrónico del visitante, necesitamos agregar un cuadro de texto a la plantilla.</span><span class="sxs-lookup"><span data-stu-id="14589-254">To collect the visitor's email address, we need to add a TextBox to the template.</span></span> <span data-ttu-id="14589-255">Agregue el siguiente marcado declarativo entre la fila de tabla (`<tr>`) que contiene el `Password` casilla de verificación de tiempo de cuadro de texto y la fila de tabla que contiene el recordar mi cuenta a continuación:</span><span class="sxs-lookup"><span data-stu-id="14589-255">Add the following declarative markup between the table row (`<tr>`) that contains the `Password` TextBox and the table row that holds the Remember me next time CheckBox:</span></span>

[!code-aspx[Main](validating-user-credentials-against-the-membership-user-store-vb/samples/sample2.aspx)]

<span data-ttu-id="14589-256">Después de agregar el `Email` cuadro de texto, visite la página a través de un explorador.</span><span class="sxs-lookup"><span data-stu-id="14589-256">After adding the `Email` TextBox, visit the page through a browser.</span></span> <span data-ttu-id="14589-257">Como se muestra en la figura 8, interfaz de usuario del control de inicio de sesión incluye ahora un tercer cuadro de texto.</span><span class="sxs-lookup"><span data-stu-id="14589-257">As Figure 8 shows, the Login control's user interface now includes a third textbox.</span></span>


<span data-ttu-id="14589-258">[![El Control de inicio de sesión ahora incluye un cuadro de texto dirección de correo electrónico del usuario](validating-user-credentials-against-the-membership-user-store-vb/_static/image23.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="14589-258">[![The Login Control Now Includes a Textbox for the User's Email Address](validating-user-credentials-against-the-membership-user-store-vb/_static/image23.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image22.png)</span></span>

<span data-ttu-id="14589-259">**Figura 8**: El Control de inicio de sesión ahora incluye un cuadro de texto dirección de correo electrónico del usuario ([haga clic aquí para ver imagen en tamaño completo](validating-user-credentials-against-the-membership-user-store-vb/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="14589-259">**Figure 8**: The Login Control Now Includes a Textbox for the User's Email Address  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-vb/_static/image24.png))</span></span>


<span data-ttu-id="14589-260">En este momento, el control de inicio de sesión todavía está usando el `Membership.ValidateUser` método para validar las credenciales proporcionadas.</span><span class="sxs-lookup"><span data-stu-id="14589-260">At this point, the Login control is still using the `Membership.ValidateUser` method to validate the supplied credentials.</span></span> <span data-ttu-id="14589-261">En consecuencia, el valor introducido en el `Email` cuadro de texto no influye en si el usuario puede iniciar sesión.</span><span class="sxs-lookup"><span data-stu-id="14589-261">Correspondingly, the value entered into the `Email` TextBox has no bearing on whether the user can log in.</span></span> <span data-ttu-id="14589-262">En el paso 3 veremos cómo invalidar la lógica de autenticación del control de inicio de sesión para que las credenciales solo se consideran válidas si el nombre de usuario y la contraseña son válidos y la dirección de correo electrónico especificada coincide con la dirección de correo electrónico en el archivo.</span><span class="sxs-lookup"><span data-stu-id="14589-262">In Step 3 we will look at how to override the Login control's authentication logic so that the credentials are only considered valid if the username and password are valid and the supplied email address matches up with the email address on file.</span></span>

## <a name="step-3-modifying-the-login-controls-authentication-logic"></a><span data-ttu-id="14589-263">Paso 3: Modificar la lógica de autenticación de inicio de sesión del Control</span><span class="sxs-lookup"><span data-stu-id="14589-263">Step 3: Modifying the Login Control's Authentication Logic</span></span>

<span data-ttu-id="14589-264">Cuando un visitante le proporciona las credenciales y hace clic en el botón Iniciar sesión, una devolución de datos que habrá trastornos y el inicio de sesión controlan progresa a través de su flujo de trabajo de autenticación.</span><span class="sxs-lookup"><span data-stu-id="14589-264">When a visitor supplies her credentials and clicks the Log In button, a postback ensues and the Login control progresses through its authentication workflow.</span></span> <span data-ttu-id="14589-265">El flujo de trabajo se inicia al elevar la [ `LoggingIn` eventos](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loggingin.aspx).</span><span class="sxs-lookup"><span data-stu-id="14589-265">The workflow starts by raising the [`LoggingIn` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loggingin.aspx).</span></span> <span data-ttu-id="14589-266">Los controladores de eventos asociados a este evento pueden cancelar el registro de la operación estableciendo el `e.Cancel` propiedad `True`.</span><span class="sxs-lookup"><span data-stu-id="14589-266">Any event handlers associated with this event may cancel the log in operation by setting the `e.Cancel` property to `True`.</span></span>

<span data-ttu-id="14589-267">Si no se cancela el registro de la operación, el flujo de trabajo progresa generando la [ `Authenticate` eventos](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.authenticate.aspx).</span><span class="sxs-lookup"><span data-stu-id="14589-267">If the log in operation is not cancelled, the workflow progresses by raising the [`Authenticate` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.authenticate.aspx).</span></span> <span data-ttu-id="14589-268">Si hay un controlador de eventos para el `Authenticate` eventos, es responsable de determinar si las credenciales proporcionadas son válidas o no.</span><span class="sxs-lookup"><span data-stu-id="14589-268">If there is an event handler for the `Authenticate` event, then it is responsible for determining whether the supplied credentials are valid or not.</span></span> <span data-ttu-id="14589-269">Si no se especifica ningún controlador de eventos, el control de inicio de sesión utiliza el `Membership.ValidateUser` método para determinar la validez de las credenciales.</span><span class="sxs-lookup"><span data-stu-id="14589-269">If no event handler is specified, the Login control uses the `Membership.ValidateUser` method to determine the validity of the credentials.</span></span>

<span data-ttu-id="14589-270">Si las credenciales proporcionadas son válidas, a continuación, se crea el vale de autenticación de formularios, el [ `LoggedIn` evento](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loggedin.aspx) se genera, y se redirige al usuario a la página adecuada.</span><span class="sxs-lookup"><span data-stu-id="14589-270">If the supplied credentials are valid, then the forms authentication ticket is created, the [`LoggedIn` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loggedin.aspx) is raised, and the user is redirected to the appropriate page.</span></span> <span data-ttu-id="14589-271">Si, sin embargo, las credenciales se consideran no válidas, la [ `LoginError` evento](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loginerror.aspx) se genera y se muestra un mensaje que informa al usuario sus credenciales no eran válidas.</span><span class="sxs-lookup"><span data-stu-id="14589-271">If, however, the credentials are deemed invalid, then the [`LoginError` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loginerror.aspx) is raised and a message is displayed informing the user that their credentials were invalid.</span></span> <span data-ttu-id="14589-272">De forma predeterminada, un error en el inicio de sesión de control simplemente establece su `FailureText` etiqueta de propiedad de texto del control a un mensaje de error (el intento de inicio de sesión no era correcta.</span><span class="sxs-lookup"><span data-stu-id="14589-272">By default, on failure the Login control simply sets its `FailureText` Label control's Text property to a failure message ( Your login attempt was not successful.</span></span> <span data-ttu-id="14589-273">Vuelva a intentarlo).</span><span class="sxs-lookup"><span data-stu-id="14589-273">Please try again ).</span></span> <span data-ttu-id="14589-274">Sin embargo, si el control de inicio de sesión [ `FailureAction` propiedad](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.failureaction.aspx) está establecido en `RedirectToLoginPage`, a continuación, los problemas de control de inicio de sesión una `Response.Redirect` a la página de inicio de sesión que anexar el parámetro querystring `loginfailure=1` (lo que hace que el inicio de sesión control para mostrar el mensaje de error).</span><span class="sxs-lookup"><span data-stu-id="14589-274">However, if the Login control's [`FailureAction` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.failureaction.aspx) is set to `RedirectToLoginPage`, then the Login control issues a `Response.Redirect` to the login page appending the querystring parameter `loginfailure=1` (which causes the Login control to display the failure message).</span></span>

<span data-ttu-id="14589-275">Figura 9 ofrece un diagrama de flujo del flujo de trabajo de autenticación.</span><span class="sxs-lookup"><span data-stu-id="14589-275">Figure 9 offers a flow chart of the authentication workflow.</span></span>


<span data-ttu-id="14589-276">[![Flujo de trabajo de autenticación de inicio de sesión del Control](validating-user-credentials-against-the-membership-user-store-vb/_static/image26.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="14589-276">[![The Login Control's Authentication Workflow](validating-user-credentials-against-the-membership-user-store-vb/_static/image26.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image25.png)</span></span>

<span data-ttu-id="14589-277">**Figura 9**: Flujo de trabajo de autenticación de inicio de sesión del Control ([haga clic aquí para ver imagen en tamaño completo](validating-user-credentials-against-the-membership-user-store-vb/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="14589-277">**Figure 9**: The Login Control's Authentication Workflow  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-vb/_static/image27.png))</span></span>


> [!NOTE]
> <span data-ttu-id="14589-278">Si sabe cuándo utilizaría la `FailureAction`del `RedirectToLogin` opción de la página, considere el siguiente escenario.</span><span class="sxs-lookup"><span data-stu-id="14589-278">If you are wondering when you would use the `FailureAction`'s `RedirectToLogin` page option, consider the following scenario.</span></span> <span data-ttu-id="14589-279">Ahora nuestra `Site.master` página maestra tiene actualmente el texto Hola stranger se muestran en la columna izquierda cuando visita un usuario anónimo, pero imaginemos que deseamos reemplazar el texto con un control de inicio de sesión.</span><span class="sxs-lookup"><span data-stu-id="14589-279">Right now our `Site.master` master page currently has the text, Hello, stranger displayed in the left column when visited by an anonymous user, but imagine that we wanted to replace that text with a Login control.</span></span> <span data-ttu-id="14589-280">Esto permitiría que un usuario anónimo iniciar sesión desde cualquier página en el sitio, en lugar de requerir que visite directamente la página de inicio de sesión.</span><span class="sxs-lookup"><span data-stu-id="14589-280">This would allow an anonymous user to log in from any page on the site, instead of requiring them to visit the login page directly.</span></span> <span data-ttu-id="14589-281">Sin embargo, si un usuario no pudo iniciar sesión a través del control de inicio de sesión representado por la página maestra, tendría sentido redirigirlas a la página de inicio de sesión (`Login.aspx`) porque esa página probable incluye instrucciones adicionales, vínculos y otro ayuda - como vínculos para crear un nueva cuenta o recuperar una contraseña perdida - que no se han agregado a la página maestra.</span><span class="sxs-lookup"><span data-stu-id="14589-281">However, if a user was unable to log in via the Login control rendered by the master page, it might make sense to redirect them to the login page (`Login.aspx`) because that page likely includes additional instructions, links, and other help - such as links to create a new account or retrieve a lost password - that were not added to the master page.</span></span>


### <a name="creating-theauthenticateevent-handler"></a><span data-ttu-id="14589-282">Crear el`Authenticate`controlador de eventos</span><span class="sxs-lookup"><span data-stu-id="14589-282">Creating the`Authenticate`Event Handler</span></span>

<span data-ttu-id="14589-283">Para conectar nuestra lógica de autenticación personalizada, es necesario crear un controlador de eventos para el control de inicio de sesión `Authenticate` eventos.</span><span class="sxs-lookup"><span data-stu-id="14589-283">In order to plug in our custom authentication logic, we need to create an event handler for the Login control's `Authenticate` event.</span></span> <span data-ttu-id="14589-284">Creación de un controlador de eventos para el `Authenticate` eventos generará la siguiente definición de controlador de eventos:</span><span class="sxs-lookup"><span data-stu-id="14589-284">Creating an event handler for the `Authenticate` event will generate the following event handler definition:</span></span>

[!code-vb[Main](validating-user-credentials-against-the-membership-user-store-vb/samples/sample3.vb)]

<span data-ttu-id="14589-285">Como puede ver, el `Authenticate` controlador de eventos se pasa un objeto de tipo [ `AuthenticateEventArgs` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.authenticateeventargs.aspx) como su segundo parámetro de entrada.</span><span class="sxs-lookup"><span data-stu-id="14589-285">As you can see, the `Authenticate` event handler is passed an object of type [`AuthenticateEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.authenticateeventargs.aspx) as its second input parameter.</span></span> <span data-ttu-id="14589-286">El `AuthenticateEventArgs` clase contiene una propiedad booleana denominada `Authenticated` que se utiliza para especificar si las credenciales proporcionadas son válidas.</span><span class="sxs-lookup"><span data-stu-id="14589-286">The `AuthenticateEventArgs` class contains a Boolean property named `Authenticated` that is used to specify whether the supplied credentials are valid.</span></span> <span data-ttu-id="14589-287">Nuestra tarea, a continuación, es escribir código aquí que determina si las credenciales proporcionadas son válidas o no y para establecer el `e.Authenticate` propiedad según corresponda.</span><span class="sxs-lookup"><span data-stu-id="14589-287">Our task, then, is to write code here that determines whether the supplied credentials are valid or not, and to set the `e.Authenticate` property accordingly.</span></span>

### <a name="determining-and-validating-the-supplied-credentials"></a><span data-ttu-id="14589-288">Determinar y validar las credenciales proporcionadas</span><span class="sxs-lookup"><span data-stu-id="14589-288">Determining and Validating the Supplied Credentials</span></span>

<span data-ttu-id="14589-289">Use el control de inicio de sesión [ `UserName` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.username.aspx) y [ `Password` propiedades](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.password.aspx) para determinar las credenciales de usuario y la contraseña escritas por el usuario.</span><span class="sxs-lookup"><span data-stu-id="14589-289">Use the Login control's [`UserName`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.username.aspx) and [`Password` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.password.aspx) to determine the username and password credentials entered by the user.</span></span> <span data-ttu-id="14589-290">Con el fin de determinar los valores especificados en los controles Web adicionales (como el `Email` cuadro de texto se agregó en el paso anterior), utilice `LoginControlID.FindControl`("*`controlID`*") para obtener una referencia a la Web mediante programación control de la plantilla cuya `ID` es igual a la propiedad *`controlID`*.</span><span class="sxs-lookup"><span data-stu-id="14589-290">In order to determine the values entered into any additional Web controls (such as the `Email` TextBox we added in the previous step), use `LoginControlID.FindControl`("*`controlID`*") to obtain a programmatic reference to the Web control in the template whose `ID` property is equal to *`controlID`*.</span></span> <span data-ttu-id="14589-291">Por ejemplo, para obtener una referencia a la `Email` cuadro de texto, use el código siguiente:</span><span class="sxs-lookup"><span data-stu-id="14589-291">For example, to get a reference to the `Email` TextBox, use the following code:</span></span>

`Dim EmailTextBox As TextBox = CType(myLogin.FindControl("Email"), TextBox)`

<span data-ttu-id="14589-292">Para validar las credenciales del usuario, es necesario hacer dos cosas:</span><span class="sxs-lookup"><span data-stu-id="14589-292">In order to validate the user's credentials we need to do two things:</span></span>

1. <span data-ttu-id="14589-293">Asegúrese de que el nombre de usuario y la contraseña son válidos</span><span class="sxs-lookup"><span data-stu-id="14589-293">Ensure that the provided username and password are valid</span></span>
2. <span data-ttu-id="14589-294">Asegúrese de que dirección de correo electrónico que escribió coincide con la dirección de correo electrónico registrada para el usuario intenta iniciar sesión</span><span class="sxs-lookup"><span data-stu-id="14589-294">Ensure that email address entered matches the email address on file for the user attempting to log in</span></span>

<span data-ttu-id="14589-295">Para realizar la primera comprobación que podemos usar simplemente el `Membership.ValidateUser` método como observamos en el paso 1.</span><span class="sxs-lookup"><span data-stu-id="14589-295">To accomplish the first check we can simply use the `Membership.ValidateUser` method like we saw in Step 1.</span></span> <span data-ttu-id="14589-296">Para la comprobación de segundo, debemos determinar la dirección de correo electrónico del usuario para que nos podemos comparar a la dirección de correo electrónico que escriben en el control de cuadro de texto.</span><span class="sxs-lookup"><span data-stu-id="14589-296">For the second check, we need to determine the user's email address so that we can compare it to the email address they entered into the TextBox control.</span></span> <span data-ttu-id="14589-297">Para obtener información acerca de un usuario determinado, use el `Membership` la clase [ `GetUser` método](https://msdn.microsoft.com/library/system.web.security.membership.getuser.aspx).</span><span class="sxs-lookup"><span data-stu-id="14589-297">To get information about a particular user, use the `Membership` class's [`GetUser` method](https://msdn.microsoft.com/library/system.web.security.membership.getuser.aspx).</span></span>

<span data-ttu-id="14589-298">El `GetUser` método tiene un número de sobrecargas.</span><span class="sxs-lookup"><span data-stu-id="14589-298">The `GetUser` method has a number of overloads.</span></span> <span data-ttu-id="14589-299">Si se usa sin pasar ningún parámetro, devuelve información sobre el usuario con sesión iniciada actualmente.</span><span class="sxs-lookup"><span data-stu-id="14589-299">If used without passing in any parameters, it returns information about the currently logged in user.</span></span> <span data-ttu-id="14589-300">Para obtener información acerca de un usuario determinado, llame a `GetUser` pasando su nombre de usuario.</span><span class="sxs-lookup"><span data-stu-id="14589-300">To get information about a particular user, call `GetUser` passing in their username.</span></span> <span data-ttu-id="14589-301">En cualquier caso, `GetUser` devuelve un [ `MembershipUser` objeto](https://msdn.microsoft.com/library/system.web.security.membershipuser.aspx), que tiene propiedades como `UserName`, `Email`, `IsApproved`, `IsOnline`, y así sucesivamente.</span><span class="sxs-lookup"><span data-stu-id="14589-301">Either way, `GetUser` returns a [`MembershipUser` object](https://msdn.microsoft.com/library/system.web.security.membershipuser.aspx), which has properties like `UserName`, `Email`, `IsApproved`, `IsOnline`, and so on.</span></span>

<span data-ttu-id="14589-302">El código siguiente implementa estas comprobaciones de dos.</span><span class="sxs-lookup"><span data-stu-id="14589-302">The following code implements these two checks.</span></span> <span data-ttu-id="14589-303">Si, a continuación, ambos pasan `e.Authenticate` está establecido en `True`, en caso contrario, se le asigna `False`.</span><span class="sxs-lookup"><span data-stu-id="14589-303">If both pass, then `e.Authenticate` is set to `True`, otherwise it is assigned `False`.</span></span>

[!code-vb[Main](validating-user-credentials-against-the-membership-user-store-vb/samples/sample4.vb)]

<span data-ttu-id="14589-304">Con este código en su lugar, intente iniciar la sesión como usuario válido, especifique el nombre de usuario correcto, la contraseña y dirección de correo electrónico.</span><span class="sxs-lookup"><span data-stu-id="14589-304">With this code in place, attempt to log in as a valid user, entering the correct username, password, and email address.</span></span> <span data-ttu-id="14589-305">Inténtelo de nuevo, pero esta vez utilice intencionadamente una dirección de correo electrónico incorrecta (consulte la figura 10).</span><span class="sxs-lookup"><span data-stu-id="14589-305">Try it again, but this time purposefully use an incorrect email address (see Figure 10).</span></span> <span data-ttu-id="14589-306">Por último, pruebe una tercera vez con un nombre de usuario inexistente.</span><span class="sxs-lookup"><span data-stu-id="14589-306">Finally, try it a third time using a non-existent username.</span></span> <span data-ttu-id="14589-307">En el primer caso debe ser iniciado sesión correctamente en el sitio, pero en los dos últimos casos debería ver el mensaje de credenciales no válidas del control de inicio de sesión.</span><span class="sxs-lookup"><span data-stu-id="14589-307">In the first case you should be successfully logged on to the site, but in the last two cases you should see the Login control's invalid credentials message.</span></span>


<span data-ttu-id="14589-308">[![Tito no puede iniciar sesión cuando se suministra una dirección de correo electrónico incorrecta](validating-user-credentials-against-the-membership-user-store-vb/_static/image29.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="14589-308">[![Tito Cannot Log In When Supplying an Incorrect Email Address](validating-user-credentials-against-the-membership-user-store-vb/_static/image29.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image28.png)</span></span>

<span data-ttu-id="14589-309">**Figura 10**: Tito no registro en al proporcionar una dirección de correo electrónico incorrecta ([haga clic aquí para ver imagen en tamaño completo](validating-user-credentials-against-the-membership-user-store-vb/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="14589-309">**Figure 10**: Tito Cannot Log In When Supplying an Incorrect Email Address  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-vb/_static/image30.png))</span></span>


> [!NOTE]
> <span data-ttu-id="14589-310">Como se describe en la sección cómo la pertenencia Framework controla intentos no válidos inicio de sesión en el paso 1, cuando el `Membership.ValidateUser` método se llama y se pasan credenciales no válidas, realiza un seguimiento del intento de inicio de sesión no válido y el usuario se bloqueará si superan un determinado umbral de intentos no válidos dentro de un período de tiempo especificado.</span><span class="sxs-lookup"><span data-stu-id="14589-310">As discussed in the How the Membership Framework Handles Invalid Login Attempts section in Step 1, when the `Membership.ValidateUser` method is called and passed invalid credentials, it keeps track of the invalid login attempt and locks out the user if they exceed a certain threshold of invalid attempts within a specified time window.</span></span> <span data-ttu-id="14589-311">Desde las llamadas de lógica de autenticación personalizada el `ValidateUser` método, una contraseña incorrecta para un nombre de usuario válido incrementará el contador de intentos de inicio de sesión no válido, pero no, este contador se incrementa en el caso donde el nombre de usuario y la contraseña son válidos, pero el dirección de correo electrónico no es correcta.</span><span class="sxs-lookup"><span data-stu-id="14589-311">Since our custom authentication logic calls the `ValidateUser` method, an incorrect password for a valid username will increment the invalid login attempt counter, but this counter is not incremented in the case where the username and password are valid, but the email address is incorrect.</span></span> <span data-ttu-id="14589-312">Lo más probable es que este comportamiento es adecuado, ya que es probable que un hacker se conoce el nombre de usuario y la contraseña, pero tiene que usar técnicas de fuerza bruta para determinar la dirección de correo electrónico del usuario.</span><span class="sxs-lookup"><span data-stu-id="14589-312">Chances are, this behavior is suitable, since it's unlikely that a hacker will know the username and password, but have to use brute force techniques to determine the user's email address.</span></span>


## <a name="step-4-improving-the-login-controls-invalid-credentials-message"></a><span data-ttu-id="14589-313">Paso 4: Mejorar el mensaje de credenciales no válidas del Control de inicio de sesión</span><span class="sxs-lookup"><span data-stu-id="14589-313">Step 4: Improving the Login Control's Invalid Credentials Message</span></span>

<span data-ttu-id="14589-314">Cuando un usuario intenta iniciar sesión con credenciales no válidas, el control de inicio de sesión muestra un mensaje que explica que el intento de inicio de sesión no tuvo éxito.</span><span class="sxs-lookup"><span data-stu-id="14589-314">When a user attempts to log on with invalid credentials, the Login control displays a message explaining that the login attempt was unsuccessful.</span></span> <span data-ttu-id="14589-315">En concreto, el control muestra el mensaje especificado por su [ `FailureText` propiedad](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.failuretext.aspx), que tiene un valor predeterminado de su intento de inicio de sesión no fue correcta.</span><span class="sxs-lookup"><span data-stu-id="14589-315">In particular, the control displays the message specified by its [`FailureText` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.failuretext.aspx), which has a default value of Your login attempt was not successful.</span></span> <span data-ttu-id="14589-316">Vuelva a intentarlo.</span><span class="sxs-lookup"><span data-stu-id="14589-316">Please try again.</span></span>

<span data-ttu-id="14589-317">Recuerde que hay muchas razones por las credenciales de un usuario pueden no ser válidas:</span><span class="sxs-lookup"><span data-stu-id="14589-317">Recall that there are many reasons why a user's credentials may be invalid:</span></span>

- <span data-ttu-id="14589-318">El nombre de usuario no exista.</span><span class="sxs-lookup"><span data-stu-id="14589-318">The username may not exist</span></span>
- <span data-ttu-id="14589-319">El nombre de usuario existe, pero la contraseña no es válida</span><span class="sxs-lookup"><span data-stu-id="14589-319">The username exists, but the password is invalid</span></span>
- <span data-ttu-id="14589-320">El nombre de usuario y la contraseña son válidos, pero el usuario aún no está aprobado</span><span class="sxs-lookup"><span data-stu-id="14589-320">The username and password are valid, but the user is not yet approved</span></span>
- <span data-ttu-id="14589-321">El nombre de usuario y la contraseña son válidos, pero el usuario queda bloqueado fuera (probablemente porque superó el número de intentos de inicio de sesión no válido en el período de tiempo especificado)</span><span class="sxs-lookup"><span data-stu-id="14589-321">The username and password are valid, but the user is locked out (most likely because they exceeded the number of invalid login attempts within the specified time frame)</span></span>

<span data-ttu-id="14589-322">Y puede haber otros motivos cuando se usa la lógica de autenticación personalizada.</span><span class="sxs-lookup"><span data-stu-id="14589-322">And there may be other reasons when using custom authentication logic.</span></span> <span data-ttu-id="14589-323">Por ejemplo, con el código se escribió en el paso 3, el nombre de usuario y contraseña sea válida, pero la dirección de correo electrónico sea correcta.</span><span class="sxs-lookup"><span data-stu-id="14589-323">For example, with the code we wrote in Step 3, the username and password may be valid, but the email address may be incorrect.</span></span>

<span data-ttu-id="14589-324">Independientemente de por qué las credenciales son válidas, el control de inicio de sesión muestra el mismo mensaje de error.</span><span class="sxs-lookup"><span data-stu-id="14589-324">Regardless of why the credentials are invalid, the Login control displays the same error message.</span></span> <span data-ttu-id="14589-325">Esta falta de comentarios puede resultar confusa para un usuario cuya cuenta aún no se ha aprobado o que se ha bloqueado. Con un poco de trabajo, sin embargo, podemos tenemos el control de inicio de sesión mostrará un mensaje más apropiado.</span><span class="sxs-lookup"><span data-stu-id="14589-325">This lack of feedback can be confusing for a user whose account has not yet been approved or who has been locked out. With a little bit of work, though, we can have the Login control display a more appropriate message.</span></span>

<span data-ttu-id="14589-326">Cada vez que un usuario intenta iniciar sesión con credenciales no válidas, el control de inicio de sesión provoca su `LoginError` eventos.</span><span class="sxs-lookup"><span data-stu-id="14589-326">Whenever a user attempts to login with invalid credentials the Login control raises its `LoginError` event.</span></span> <span data-ttu-id="14589-327">Siga adelante y crear un controlador de eventos para este evento y agregue el código siguiente:</span><span class="sxs-lookup"><span data-stu-id="14589-327">Go ahead and create an event handler for this event, and add the following code:</span></span>

[!code-vb[Main](validating-user-credentials-against-the-membership-user-store-vb/samples/sample5.vb)]

<span data-ttu-id="14589-328">El código anterior se inicia mediante el establecimiento del control de inicio de sesión `FailureText` propiedad en el valor predeterminado (el intento de inicio de sesión no era correcta.</span><span class="sxs-lookup"><span data-stu-id="14589-328">The above code starts by setting the Login control's `FailureText` property to the default value ( Your login attempt was not successful.</span></span> <span data-ttu-id="14589-329">Vuelva a intentarlo).</span><span class="sxs-lookup"><span data-stu-id="14589-329">Please try again ).</span></span> <span data-ttu-id="14589-330">A continuación, comprueba si el nombre de usuario proporcionado se asigna a una cuenta de usuario existente.</span><span class="sxs-lookup"><span data-stu-id="14589-330">It then checks to see if the username supplied maps to an existing user account.</span></span> <span data-ttu-id="14589-331">Si es así, consulta resultante `MembershipUser` del objeto `IsLockedOut` y `IsApproved` propiedades para determinar si la cuenta se ha bloqueado o que no han sido aprobada.</span><span class="sxs-lookup"><span data-stu-id="14589-331">If so, it consults the resulting `MembershipUser` object's `IsLockedOut` and `IsApproved` properties to determine if the account has been locked out or has not yet been approved.</span></span> <span data-ttu-id="14589-332">En cualquier caso, el `FailureText` se actualiza la propiedad a un valor correspondiente.</span><span class="sxs-lookup"><span data-stu-id="14589-332">In either case, the `FailureText` property is updated to a corresponding value.</span></span>

<span data-ttu-id="14589-333">Para probar este código, intencionadamente intenta iniciar sesión como un usuario existente, pero utiliza una contraseña incorrecta.</span><span class="sxs-lookup"><span data-stu-id="14589-333">To test this code, purposefully attempt to log in as an existing user, but use an incorrect password.</span></span> <span data-ttu-id="14589-334">Hacer esto cinco veces en una fila dentro de un período de tiempo de 10 minutos y se bloqueará la cuenta. Como se muestra en la figura 11, inicio de sesión subsiguiente intentos siempre se producirá un error (incluso con la contraseña correcta), pero tendrán ahora más descriptivo para mostrar su cuenta se bloqueó debido a demasiados intentos de inicio de sesión no válido.</span><span class="sxs-lookup"><span data-stu-id="14589-334">Do this five times in a row within a 10 minute time frame and the account will be locked out. As Figure 11 shows, subsequent login attempts will always fail (even with the correct password), but will now display the more descriptive Your account has been locked out because of too many invalid login attempts.</span></span> <span data-ttu-id="14589-335">Póngase en contacto con el administrador para que el mensaje de cuenta desbloqueada.</span><span class="sxs-lookup"><span data-stu-id="14589-335">Please contact the administrator to have your account unlocked message.</span></span>


<span data-ttu-id="14589-336">[![Tito realiza demasiados intentos de inicio de sesión no válido y se ha bloqueado](validating-user-credentials-against-the-membership-user-store-vb/_static/image32.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="14589-336">[![Tito Performed Too Many Invalid Login Attempts and Has Been Locked Out](validating-user-credentials-against-the-membership-user-store-vb/_static/image32.png)](validating-user-credentials-against-the-membership-user-store-vb/_static/image31.png)</span></span>

<span data-ttu-id="14589-337">**Figura 11**: Tito realiza demasiado muchos intentos no válidos de inicio de sesión y ha sido bloqueada ([haga clic aquí para ver imagen en tamaño completo](validating-user-credentials-against-the-membership-user-store-vb/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="14589-337">**Figure 11**: Tito Performed Too Many Invalid Login Attempts and Has Been Locked Out  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-vb/_static/image33.png))</span></span>


## <a name="summary"></a><span data-ttu-id="14589-338">Resumen</span><span class="sxs-lookup"><span data-stu-id="14589-338">Summary</span></span>

<span data-ttu-id="14589-339">Anterior en este tutorial, nuestra página de inicio de sesión valida las credenciales proporcionadas con una lista codificada de pares de nombre de usuario y contraseña.</span><span class="sxs-lookup"><span data-stu-id="14589-339">Prior this tutorial, our login page validated the supplied credentials against a hard-coded list of username/password pairs.</span></span> <span data-ttu-id="14589-340">En este tutorial, se actualiza la página para validar las credenciales con el marco de pertenencia.</span><span class="sxs-lookup"><span data-stu-id="14589-340">In this tutorial, we updated the page to validate credentials against the Membership framework.</span></span> <span data-ttu-id="14589-341">En el paso 1 contemplamos utilizando el `Membership.ValidateUser` método mediante programación.</span><span class="sxs-lookup"><span data-stu-id="14589-341">In Step 1 we looked at using the `Membership.ValidateUser` method programmatically.</span></span> <span data-ttu-id="14589-342">En el paso 2 reemplazamos nuestra interfaz de usuario creada manualmente y el código con el control de inicio de sesión.</span><span class="sxs-lookup"><span data-stu-id="14589-342">In Step 2 we replaced our manually created user interface and code with the Login control.</span></span>

<span data-ttu-id="14589-343">El control de inicio de sesión representa una interfaz de usuario de inicio de sesión estándar y valida automáticamente las credenciales del usuario en el marco de pertenencia.</span><span class="sxs-lookup"><span data-stu-id="14589-343">The Login control renders a standard login user interface and automatically validates the user's credentials against the Membership framework.</span></span> <span data-ttu-id="14589-344">Además, en el caso de credenciales válidas, el control de inicio de sesión inicia sesión el usuario en mediante la autenticación de formularios.</span><span class="sxs-lookup"><span data-stu-id="14589-344">Moreover, in the event of valid credentials, the Login control signs the user in via forms authentication.</span></span> <span data-ttu-id="14589-345">En resumen, una experiencia de usuario de inicio de sesión completamente funcional está disponible, simplemente arrastre el control de inicio de sesión a una página, ningún marcado declarativo adicional o el código necesario.</span><span class="sxs-lookup"><span data-stu-id="14589-345">In short, a fully functional login user experience is available by simply dragging the Login control onto a page, no extra declarative markup or code necessary.</span></span> <span data-ttu-id="14589-346">¿Qué es más, el control de inicio de sesión es muy personalizable, lo que permite un elevado grado de control sobre ambos la lógica de autenticación y la interfaz de usuario representado.</span><span class="sxs-lookup"><span data-stu-id="14589-346">What's more, the Login control is highly customizable, allowing for a fine degree of control over both the rendered user interface and authentication logic.</span></span>

<span data-ttu-id="14589-347">En este momento pueden crear una nueva cuenta de usuario y el registro de visitantes de nuestro sitio Web en el sitio, pero aún tenemos que mirar restringir el acceso a las páginas según el usuario autenticado.</span><span class="sxs-lookup"><span data-stu-id="14589-347">At this point visitors to our website can create a new user account and log into the site, but we have yet to look at restricting access to pages based on the authenticated user.</span></span> <span data-ttu-id="14589-348">Actualmente, cualquier usuario autenticado o anónimo, puede ver cualquier página en nuestro sitio.</span><span class="sxs-lookup"><span data-stu-id="14589-348">Currently, any user, authenticated or anonymous, can view any page on our site.</span></span> <span data-ttu-id="14589-349">Además de controlar el acceso a las páginas de nuestro sitio según un usuario por usuario, tendremos que ciertas páginas cuya funcionalidad depende del usuario.</span><span class="sxs-lookup"><span data-stu-id="14589-349">Along with controlling access to our site's pages on a user-by-user basis, we might have certain pages whose functionality depends on the user.</span></span> <span data-ttu-id="14589-350">El siguiente tutorial examina cómo limitar el acceso y la funcionalidad en la página según el usuario ha iniciado sesión.</span><span class="sxs-lookup"><span data-stu-id="14589-350">The next tutorial looks at how to limit access and in-page functionality based on the logged in user.</span></span>

<span data-ttu-id="14589-351">Feliz programación.</span><span class="sxs-lookup"><span data-stu-id="14589-351">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="14589-352">Información adicional</span><span class="sxs-lookup"><span data-stu-id="14589-352">Further Reading</span></span>

<span data-ttu-id="14589-353">Para obtener más información sobre los temas tratados en este tutorial, consulte los siguientes recursos:</span><span class="sxs-lookup"><span data-stu-id="14589-353">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="14589-354">Mostrar mensajes personalizados a bloqueada y que los usuarios no aprobado</span><span class="sxs-lookup"><span data-stu-id="14589-354">Displaying Custom Messages to Locked Out and Non-Approved Users</span></span>](http://aspnet.4guysfromrolla.com/articles/050306-1.aspx)
- [<span data-ttu-id="14589-355">Examen de ASP.NET del 2.0 perfil, Roles y pertenencia</span><span class="sxs-lookup"><span data-stu-id="14589-355">Examining ASP.NET 2.0's Membership, Roles, and Profile</span></span>](http://aspnet.4guysfromrolla.com/articles/120705-1.aspx)
- [<span data-ttu-id="14589-356">Cómo: Crear una página de inicio de sesión ASP.NET</span><span class="sxs-lookup"><span data-stu-id="14589-356">How To: Create an ASP.NET Login Page</span></span>](https://msdn.microsoft.com/library/ms178331.aspx)
- [<span data-ttu-id="14589-357">Documentación técnica de Control de inicio de sesión</span><span class="sxs-lookup"><span data-stu-id="14589-357">Login Control Technical Documentation</span></span>](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.aspx)
- [<span data-ttu-id="14589-358">Uso de los controles de inicio de sesión</span><span class="sxs-lookup"><span data-stu-id="14589-358">Using the Login Controls</span></span>](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/security/login.aspx)

### <a name="about-the-author"></a><span data-ttu-id="14589-359">Acerca del autor</span><span class="sxs-lookup"><span data-stu-id="14589-359">About the Author</span></span>

<span data-ttu-id="14589-360">Scott Mitchell, autor de varios libros sobre ASP/ASP.NET y fundador de 4GuysFromRolla.com, ha estado trabajando con tecnologías Web de Microsoft desde 1998.</span><span class="sxs-lookup"><span data-stu-id="14589-360">Scott Mitchell, author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="14589-361">Scott trabaja como consultor independiente, instructor y escritor.</span><span class="sxs-lookup"><span data-stu-id="14589-361">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="14589-362">Su último libro es *[SAM enseñar a usted mismo ASP.NET 2.0 en 24 horas](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span><span class="sxs-lookup"><span data-stu-id="14589-362">His latest book is *[Sams Teach Yourself ASP.NET 2.0 in 24 Hours](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span></span> <span data-ttu-id="14589-363">Puede ponerse en contacto Scott [ mitchell@4guysfromrolla.com ](mailto:mitchell@4guysfromrolla.com) o a través de su blog en [ http://ScottOnWriting.NET ](http://scottonwriting.net/).</span><span class="sxs-lookup"><span data-stu-id="14589-363">Scott can be reached at [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="14589-364">Agradecimientos especiales a</span><span class="sxs-lookup"><span data-stu-id="14589-364">Special Thanks To</span></span>

<span data-ttu-id="14589-365">Esta serie de tutoriales ha sido revisada por muchos revisores útiles.</span><span class="sxs-lookup"><span data-stu-id="14589-365">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="14589-366">Los revisores para este tutorial fueron Teresa Murphy y Michael Olivero.</span><span class="sxs-lookup"><span data-stu-id="14589-366">Lead reviewers for this tutorial were Teresa Murphy and Michael Olivero.</span></span> <span data-ttu-id="14589-367">¿Está interesado en leer mi próximos artículos de MSDN?</span><span class="sxs-lookup"><span data-stu-id="14589-367">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="14589-368">Si es así, envíeme una línea en [ mitchell@4GuysFromRolla.com ](mailto:mitchell@4GuysFromRolla.com).</span><span class="sxs-lookup"><span data-stu-id="14589-368">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="14589-369">[Anterior](creating-user-accounts-vb.md)
> [Siguiente](user-based-authorization-vb.md)</span><span class="sxs-lookup"><span data-stu-id="14589-369">[Previous](creating-user-accounts-vb.md)
[Next](user-based-authorization-vb.md)</span></span>
