---
uid: web-forms/overview/older-versions-getting-started/master-pages/interacting-with-the-content-page-from-the-master-page-cs
title: Interactuar con la página de contenido desde la página maestra (C#) | Microsoft Docs
author: rick-anderson
description: Examina cómo llamar a métodos, establecer propiedades, etc. de la página de contenido desde el código de la página maestra.
ms.author: riande
ms.date: 07/11/2008
ms.assetid: 3282df5e-516c-4972-8666-313828b90fb5
msc.legacyurl: /web-forms/overview/older-versions-getting-started/master-pages/interacting-with-the-content-page-from-the-master-page-cs
msc.type: authoredcontent
ms.openlocfilehash: 2cf57665aa584285351d874267949d61db69c7fc
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 11/28/2019
ms.locfileid: "74635478"
---
# <a name="interacting-with-the-content-page-from-the-master-page-c"></a><span data-ttu-id="c4abf-103">Interactuar con la página de contenido desde la página maestra (C#)</span><span class="sxs-lookup"><span data-stu-id="c4abf-103">Interacting with the Content Page from the Master Page (C#)</span></span>

<span data-ttu-id="c4abf-104">por [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="c4abf-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="c4abf-105">[Descargar código](https://download.microsoft.com/download/1/8/4/184e24fa-fcc8-47fa-ac99-4b6a52d41e97/ASPNET_MasterPages_Tutorial_07_CS.zip) o [Descargar PDF](https://download.microsoft.com/download/e/b/4/eb4abb10-c416-4ba4-9899-32577715b1bd/ASPNET_MasterPages_Tutorial_07_CS.pdf)</span><span class="sxs-lookup"><span data-stu-id="c4abf-105">[Download Code](https://download.microsoft.com/download/1/8/4/184e24fa-fcc8-47fa-ac99-4b6a52d41e97/ASPNET_MasterPages_Tutorial_07_CS.zip) or [Download PDF](https://download.microsoft.com/download/e/b/4/eb4abb10-c416-4ba4-9899-32577715b1bd/ASPNET_MasterPages_Tutorial_07_CS.pdf)</span></span>

> <span data-ttu-id="c4abf-106">Examina cómo llamar a métodos, establecer propiedades, etc. de la página de contenido desde el código de la página maestra.</span><span class="sxs-lookup"><span data-stu-id="c4abf-106">Examines how to call methods, set properties, etc. of the Content Page from code in the Master Page.</span></span>

## <a name="introduction"></a><span data-ttu-id="c4abf-107">Introducción</span><span class="sxs-lookup"><span data-stu-id="c4abf-107">Introduction</span></span>

<span data-ttu-id="c4abf-108">En el tutorial anterior se examinó cómo interactuar con la página de contenido mediante programación con su página maestra.</span><span class="sxs-lookup"><span data-stu-id="c4abf-108">The preceding tutorial examined how to have the content page programmatically interact with its master page.</span></span> <span data-ttu-id="c4abf-109">Recuerde que hemos actualizado la página maestra para incluir un control GridView que enumera los cinco productos agregados más recientemente.</span><span class="sxs-lookup"><span data-stu-id="c4abf-109">Recall that we updated the master page to include a GridView control that listed the five most recently added products.</span></span> <span data-ttu-id="c4abf-110">A continuación, creamos una página de contenido desde la que el usuario podría agregar un nuevo producto.</span><span class="sxs-lookup"><span data-stu-id="c4abf-110">We then created a content page from which the user could add a new product.</span></span> <span data-ttu-id="c4abf-111">Al agregar un nuevo producto, la página de contenido necesitaba indicar a la página maestra que actualice su GridView para incluir el producto recién agregado.</span><span class="sxs-lookup"><span data-stu-id="c4abf-111">Upon adding a new product, the content page needed to instruct the master page to refresh its GridView so that it would include the just-added product.</span></span> <span data-ttu-id="c4abf-112">Esta funcionalidad se logra mediante la adición de un método público a la página maestra que actualizó los datos enlazados a GridView y, a continuación, la invocación de ese método desde la página de contenido.</span><span class="sxs-lookup"><span data-stu-id="c4abf-112">This functionality was accomplished by adding a public method to the master page that refreshed the data bound to the GridView, and then invoking that method from the content page.</span></span>

<span data-ttu-id="c4abf-113">La forma más común de la interacción de contenido y página maestra se origina en la página de contenido.</span><span class="sxs-lookup"><span data-stu-id="c4abf-113">The most common form of content and master page interaction originates from the content page.</span></span> <span data-ttu-id="c4abf-114">Sin embargo, es posible que la página maestra Rouse la página de contenido actual en acción, por lo que es posible que se necesite esta funcionalidad si la página maestra contiene elementos de interfaz de usuario que permiten a los usuarios modificar datos que también se muestran en la página de contenido.</span><span class="sxs-lookup"><span data-stu-id="c4abf-114">However, it is possible for the master page to rouse the current content page into action, and such functionality may be needed if the master page contains user interface elements that enable users to modify data that is also displayed on the content page.</span></span> <span data-ttu-id="c4abf-115">Considere una página de contenido que muestra la información de los productos en un control GridView y una página maestra que incluye un control de botón que, cuando se hace clic en él, duplica los precios de todos los productos.</span><span class="sxs-lookup"><span data-stu-id="c4abf-115">Consider a content page that displays the products information in a GridView control and a master page that includes a Button control that, when clicked, doubles the prices of all products.</span></span> <span data-ttu-id="c4abf-116">Al igual que en el ejemplo del tutorial anterior, el control GridView debe actualizarse después de hacer clic en el botón de doble precio para que muestre los nuevos precios, pero en este escenario se trata de la página maestra que necesita Rouse la página de contenido en acción.</span><span class="sxs-lookup"><span data-stu-id="c4abf-116">Much like the example in the preceding tutorial, the GridView needs to be refreshed after the double price Button is clicked so that it displays the new prices, but in this scenario it's the master page that needs to rouse the content page into action.</span></span>

<span data-ttu-id="c4abf-117">En este tutorial se explica cómo se define la funcionalidad de invocación de la página maestra en la página contenido.</span><span class="sxs-lookup"><span data-stu-id="c4abf-117">This tutorial explores how to have the master page invoke functionality defined in the content page.</span></span>

### <a name="instigating-programmatic-interaction-via-an-event-and-event-handlers"></a><span data-ttu-id="c4abf-118">Instigación de interacción mediante programación a través de un evento y controladores de eventos</span><span class="sxs-lookup"><span data-stu-id="c4abf-118">Instigating Programmatic Interaction via an Event and Event Handlers</span></span>

<span data-ttu-id="c4abf-119">La invocación de la funcionalidad de la página de contenido desde una página maestra es más desafiante que la otra.</span><span class="sxs-lookup"><span data-stu-id="c4abf-119">Invoking content page functionality from a master page is more challenging than the other way around.</span></span> <span data-ttu-id="c4abf-120">Dado que una página de contenido tiene una sola página maestra, al crear la interacción mediante programación desde la página de contenido sabemos qué métodos públicos y propiedades se encuentran en nuestra cancelación.</span><span class="sxs-lookup"><span data-stu-id="c4abf-120">Because a content page has a single master page, when instigating the programmatic interaction from the content page we know what public methods and properties are at our disposal.</span></span> <span data-ttu-id="c4abf-121">Sin embargo, una página maestra puede tener muchas páginas de contenido diferentes, cada una con su propio conjunto de propiedades y métodos.</span><span class="sxs-lookup"><span data-stu-id="c4abf-121">A master page, however, can have many different content pages, each with its own set of properties and methods.</span></span> <span data-ttu-id="c4abf-122">¿Cómo se puede escribir código en la página maestra para realizar alguna acción en su página de contenido cuando no se sabe qué página de contenido se invocará hasta el tiempo de ejecución?</span><span class="sxs-lookup"><span data-stu-id="c4abf-122">How, then, can we write code in the master page to perform some action in its content page when we don't know what content page will be invoked until runtime?</span></span>

<span data-ttu-id="c4abf-123">Considere la posibilidad de usar un control Web ASP.NET, como el control de botón.</span><span class="sxs-lookup"><span data-stu-id="c4abf-123">Consider an ASP.NET Web control, such as the Button control.</span></span> <span data-ttu-id="c4abf-124">Un control de botón puede aparecer en cualquier número de páginas de ASP.NET y necesita un mecanismo por el que puede alertar a la página en la que se hizo clic.</span><span class="sxs-lookup"><span data-stu-id="c4abf-124">A Button control can appear on any number of ASP.NET pages and needs a mechanism by which it can alert the page that it has been clicked.</span></span> <span data-ttu-id="c4abf-125">Esto se logra mediante *eventos*.</span><span class="sxs-lookup"><span data-stu-id="c4abf-125">This is accomplished using *events*.</span></span> <span data-ttu-id="c4abf-126">En concreto, el control de botón genera su evento `Click` cuando se hace clic en él. la página ASP.NET que contiene el botón puede responder opcionalmente a esa notificación a través de un *controlador de eventos*.</span><span class="sxs-lookup"><span data-stu-id="c4abf-126">In particular, the Button control raises its `Click` event when it is clicked; the ASP.NET page that contains the Button can optionally respond to that notification via an *event handler*.</span></span>

<span data-ttu-id="c4abf-127">Este mismo patrón se puede usar para tener una funcionalidad de desencadenador de página maestra en sus páginas de contenido:</span><span class="sxs-lookup"><span data-stu-id="c4abf-127">This same pattern can be used to have a master page trigger functionality in its content pages:</span></span>

1. <span data-ttu-id="c4abf-128">Agregue un evento a la página maestra.</span><span class="sxs-lookup"><span data-stu-id="c4abf-128">Add an event to the master page.</span></span>
2. <span data-ttu-id="c4abf-129">Genere el evento cada vez que la página maestra necesite comunicarse con su página de contenido.</span><span class="sxs-lookup"><span data-stu-id="c4abf-129">Raise the event whenever the master page needs to communicate with its content page.</span></span> <span data-ttu-id="c4abf-130">Por ejemplo, si la página maestra necesita enviar una alerta a su página de contenido que el usuario ha duplicado los precios, su evento se generará inmediatamente después de que se dupliquen los precios.</span><span class="sxs-lookup"><span data-stu-id="c4abf-130">For example, if the master page needs to alert its content page that the user has doubled the prices, its event would be raised immediately after the prices have been doubled.</span></span>
3. <span data-ttu-id="c4abf-131">Cree un controlador de eventos en las páginas de contenido que necesiten realizar alguna acción.</span><span class="sxs-lookup"><span data-stu-id="c4abf-131">Create an event handler in those content pages that need to take some action.</span></span>

<span data-ttu-id="c4abf-132">En el resto de este tutorial se implementa el ejemplo que se describe en la introducción; es decir, una página de contenido en la que se enumeran los productos de la base de datos y una página maestra que incluye un control de botón para duplicar los precios.</span><span class="sxs-lookup"><span data-stu-id="c4abf-132">This remainder of this tutorial implements the example outlined in the Introduction; namely, a content page that lists the products in the database and a master page that includes a Button control to double the prices.</span></span>

## <a name="step-1-displaying-products-in-a-content-page"></a><span data-ttu-id="c4abf-133">Paso 1: visualización de productos en una página de contenido</span><span class="sxs-lookup"><span data-stu-id="c4abf-133">Step 1: Displaying Products in a Content Page</span></span>

<span data-ttu-id="c4abf-134">Nuestro primer orden de negocio es crear una página de contenido que muestre los productos de la base de datos Northwind.</span><span class="sxs-lookup"><span data-stu-id="c4abf-134">Our first order of business is to create a content page that lists the products from the Northwind database.</span></span> <span data-ttu-id="c4abf-135">(Hemos agregado la base de datos Northwind al proyecto en el tutorial anterior, [*interactuando con la página maestra desde la página de contenido*](interacting-with-the-master-page-from-the-content-page-cs.md)). Comience agregando una nueva página ASP.NET a la carpeta `~/Admin` denominada `Products.aspx`, asegurándose de enlazarla a la página maestra `Site.master`.</span><span class="sxs-lookup"><span data-stu-id="c4abf-135">(We added the Northwind database to the project in the preceding tutorial, [*Interacting with the Master Page from the Content Page*](interacting-with-the-master-page-from-the-content-page-cs.md).) Start by adding a new ASP.NET page to the `~/Admin` folder named `Products.aspx`, making sure to bind it to the `Site.master` master page.</span></span> <span data-ttu-id="c4abf-136">La figura 1 muestra el Explorador de soluciones después de que esta página se haya agregado al sitio Web.</span><span class="sxs-lookup"><span data-stu-id="c4abf-136">Figure 1 shows the Solution Explorer after this page has been added to the website.</span></span>

<span data-ttu-id="c4abf-137">[![agregar una nueva página ASP.NET a la carpeta admin](interacting-with-the-content-page-from-the-master-page-cs/_static/image2.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="c4abf-137">[![Add a New ASP.NET Page to the Admin Folder](interacting-with-the-content-page-from-the-master-page-cs/_static/image2.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image1.png)</span></span>

<span data-ttu-id="c4abf-138">**Figura 01**: agregar una nueva página ASP.net a la carpeta `Admin` ([haga clic para ver la imagen de tamaño completo](interacting-with-the-content-page-from-the-master-page-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="c4abf-138">**Figure 01**: Add a New ASP.NET Page to the `Admin` Folder ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image3.png))</span></span>

<span data-ttu-id="c4abf-139">Recuerde que en el tutorial para [*especificar el título, las etiquetas meta y otros encabezados HTML en la página maestra*](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs.md) se ha creado una clase de página base personalizada denominada `BasePage` que genera el título de la página si no se ha establecido explícitamente.</span><span class="sxs-lookup"><span data-stu-id="c4abf-139">Recall that in the [*Specifying the Title, Meta Tags, and Other HTML Headers in the Master Page*](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs.md) tutorial we created a custom base page class named `BasePage` that generates the page's title if it is not explicitly set.</span></span> <span data-ttu-id="c4abf-140">Vaya a la clase de código subyacente de la página de `Products.aspx` y haga que se derive de `BasePage` (en lugar de `System.Web.UI.Page`).</span><span class="sxs-lookup"><span data-stu-id="c4abf-140">Go to the `Products.aspx` page's code-behind class and have it derive from `BasePage` (instead of from `System.Web.UI.Page`).</span></span>

<span data-ttu-id="c4abf-141">Por último, actualice el archivo de `Web.sitemap` para incluir una entrada para esta lección.</span><span class="sxs-lookup"><span data-stu-id="c4abf-141">Finally, update the `Web.sitemap` file to include an entry for this lesson.</span></span> <span data-ttu-id="c4abf-142">Agregue el siguiente marcado debajo del `<siteMapNode>` para la lección de interacción de contenido a página maestra:</span><span class="sxs-lookup"><span data-stu-id="c4abf-142">Add the following markup beneath the `<siteMapNode>` for the Content to Master Page Interaction lesson:</span></span>

[!code-xml[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample1.xml)]

<span data-ttu-id="c4abf-143">La adición de este elemento `<siteMapNode>` se refleja en la lista de lecciones (vea la figura 5).</span><span class="sxs-lookup"><span data-stu-id="c4abf-143">The addition of this `<siteMapNode>` element is reflected in the Lessons list (see Figure 5).</span></span>

<span data-ttu-id="c4abf-144">Vuelva a `Products.aspx`.</span><span class="sxs-lookup"><span data-stu-id="c4abf-144">Return to `Products.aspx`.</span></span> <span data-ttu-id="c4abf-145">En el control de contenido de `MainContent`, agregue un control GridView y asígnele el nombre `ProductsGrid`.</span><span class="sxs-lookup"><span data-stu-id="c4abf-145">In the Content control for `MainContent`, add a GridView control and name it `ProductsGrid`.</span></span> <span data-ttu-id="c4abf-146">Enlace GridView a un nuevo control SqlDataSource denominado `ProductsDataSource`.</span><span class="sxs-lookup"><span data-stu-id="c4abf-146">Bind the GridView to a new SqlDataSource control named `ProductsDataSource`.</span></span>

<span data-ttu-id="c4abf-147">[![enlazar GridView a un nuevo control SqlDataSource](interacting-with-the-content-page-from-the-master-page-cs/_static/image5.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="c4abf-147">[![Bind the GridView to a New SqlDataSource Control](interacting-with-the-content-page-from-the-master-page-cs/_static/image5.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image4.png)</span></span>

<span data-ttu-id="c4abf-148">**Figura 02**: enlace de GridView a un nuevo control SqlDataSource ([haga clic para ver la imagen de tamaño completo](interacting-with-the-content-page-from-the-master-page-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="c4abf-148">**Figure 02**: Bind the GridView to a New SqlDataSource Control  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image6.png))</span></span>

<span data-ttu-id="c4abf-149">Configure el Asistente para que use la base de datos Northwind.</span><span class="sxs-lookup"><span data-stu-id="c4abf-149">Configure the wizard so that it uses the Northwind database.</span></span> <span data-ttu-id="c4abf-150">Si ha trabajado en el tutorial anterior, debe tener ya una cadena de conexión denominada `NorthwindConnectionString` en `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="c4abf-150">If you worked through the previous tutorial then you should already have a connection string named `NorthwindConnectionString` in `Web.config`.</span></span> <span data-ttu-id="c4abf-151">Elija esta cadena de conexión en la lista desplegable, como se muestra en la figura 3.</span><span class="sxs-lookup"><span data-stu-id="c4abf-151">Choose this connection string from the drop-down list, as shown in Figure 3.</span></span>

<span data-ttu-id="c4abf-152">[![configurar SqlDataSource para usar la base de datos Northwind](interacting-with-the-content-page-from-the-master-page-cs/_static/image8.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="c4abf-152">[![Configure the SqlDataSource to Use the Northwind Database](interacting-with-the-content-page-from-the-master-page-cs/_static/image8.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image7.png)</span></span>

<span data-ttu-id="c4abf-153">**Figura 03**: configuración de SqlDataSource para usar la base de datos Northwind ([haga clic para ver la imagen de tamaño completo](interacting-with-the-content-page-from-the-master-page-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="c4abf-153">**Figure 03**: Configure the SqlDataSource to Use the Northwind Database  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image9.png))</span></span>

<span data-ttu-id="c4abf-154">A continuación, especifique la instrucción `SELECT` del control de origen de datos; para ello, elija la tabla Products en la lista desplegable y devuelva las columnas `ProductName` y `UnitPrice` (consulte la figura 4).</span><span class="sxs-lookup"><span data-stu-id="c4abf-154">Next, specify the data source control's `SELECT` statement by choosing the Products table from the drop-down list and returning the `ProductName` and `UnitPrice` columns (see Figure 4).</span></span> <span data-ttu-id="c4abf-155">Haga clic en siguiente y en finalizar para completar el Asistente para configurar orígenes de datos.</span><span class="sxs-lookup"><span data-stu-id="c4abf-155">Click Next and then Finish to complete the Configure Data Source wizard.</span></span>

<span data-ttu-id="c4abf-156">[![devolver los campos ProductName y UnitPrice de la tabla Products](interacting-with-the-content-page-from-the-master-page-cs/_static/image11.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="c4abf-156">[![Return the ProductName and UnitPrice Fields from the Products Table](interacting-with-the-content-page-from-the-master-page-cs/_static/image11.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image10.png)</span></span>

<span data-ttu-id="c4abf-157">**Figura 04**: devuelva los campos `ProductName` y `UnitPrice` de la tabla `Products` ([haga clic para ver la imagen de tamaño completo](interacting-with-the-content-page-from-the-master-page-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="c4abf-157">**Figure 04**: Return the `ProductName` and `UnitPrice` Fields from the `Products` Table  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image12.png))</span></span>

<span data-ttu-id="c4abf-158">Así de simple.</span><span class="sxs-lookup"><span data-stu-id="c4abf-158">That's all there is to it!</span></span> <span data-ttu-id="c4abf-159">Después de completar el asistente, Visual Studio agrega dos BoundFields a GridView para reflejar los dos campos devueltos por el control SqlDataSource.</span><span class="sxs-lookup"><span data-stu-id="c4abf-159">After completing the wizard Visual Studio adds two BoundFields to the GridView to mirror the two fields returned by the SqlDataSource control.</span></span> <span data-ttu-id="c4abf-160">A continuación se muestra el marcado de los controles GridView y SqlDataSource.</span><span class="sxs-lookup"><span data-stu-id="c4abf-160">The GridView and SqlDataSource controls' markup follows.</span></span> <span data-ttu-id="c4abf-161">En la ilustración 5 se muestran los resultados cuando se ven a través de un explorador.</span><span class="sxs-lookup"><span data-stu-id="c4abf-161">Figure 5 shows the results when viewed through a browser.</span></span>

[!code-aspx[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample2.aspx)]

<span data-ttu-id="c4abf-162">[![cada producto y su precio aparecen en la lista de GridView](interacting-with-the-content-page-from-the-master-page-cs/_static/image14.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="c4abf-162">[![Each Product and its Price is Listed in the GridView](interacting-with-the-content-page-from-the-master-page-cs/_static/image14.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image13.png)</span></span>

<span data-ttu-id="c4abf-163">**Figura 05**: cada producto y su precio se muestran en GridView ([haga clic para ver la imagen de tamaño completo](interacting-with-the-content-page-from-the-master-page-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="c4abf-163">**Figure 05**: Each Product and its Price is Listed in the GridView  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image15.png))</span></span>

> [!NOTE]
> <span data-ttu-id="c4abf-164">No dude en limpiar la apariencia de GridView.</span><span class="sxs-lookup"><span data-stu-id="c4abf-164">Feel free to clean up the appearance of the GridView.</span></span> <span data-ttu-id="c4abf-165">Algunas sugerencias incluyen dar formato al valor UnitPrice mostrado como moneda y usar colores de fondo y fuentes para mejorar la apariencia de la cuadrícula.</span><span class="sxs-lookup"><span data-stu-id="c4abf-165">Some suggestions include formatting the displayed UnitPrice value as a currency and using background colors and fonts to improve the grid's appearance.</span></span> <span data-ttu-id="c4abf-166">Para obtener más información sobre cómo mostrar y dar formato a los datos en ASP.NET, consulte la [serie de tutoriales sobre cómo trabajar con datos](../../data-access/index.md).</span><span class="sxs-lookup"><span data-stu-id="c4abf-166">For more information on displaying and formatting data in ASP.NET, refer to my [Working with Data tutorial series](../../data-access/index.md).</span></span>

## <a name="step-2-adding-a-double-prices-button-to-the-master-page"></a><span data-ttu-id="c4abf-167">Paso 2: agregar un botón de precios dobles a la página maestra</span><span class="sxs-lookup"><span data-stu-id="c4abf-167">Step 2: Adding a Double Prices Button to the Master Page</span></span>

<span data-ttu-id="c4abf-168">La siguiente tarea consiste en agregar un control Web de botón a la página maestra en el que, al hacer clic en él, se duplicará el precio de todos los productos de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="c4abf-168">Our next task is to add a Button Web control to the master page that, when clicked, will double the price of all products in the database.</span></span> <span data-ttu-id="c4abf-169">Abra la página maestra de `Site.master` y arrastre un botón desde el cuadro de herramientas hasta el diseñador, colocándolo debajo del control SqlDataSource `RecentProductsDataSource` que hemos agregado en el tutorial anterior.</span><span class="sxs-lookup"><span data-stu-id="c4abf-169">Open the `Site.master` master page and drag a Button from the Toolbox onto the Designer, placing it beneath the `RecentProductsDataSource` SqlDataSource control we added in the previous tutorial.</span></span> <span data-ttu-id="c4abf-170">Establezca la propiedad `ID` del botón en `DoublePrice` y su propiedad `Text` en "Double Product prices".</span><span class="sxs-lookup"><span data-stu-id="c4abf-170">Set the Button's `ID` property to `DoublePrice` and its `Text` property to "Double Product Prices".</span></span>

<span data-ttu-id="c4abf-171">Después, agregue un control SqlDataSource a la página maestra, asignándole un nombre `DoublePricesDataSource`.</span><span class="sxs-lookup"><span data-stu-id="c4abf-171">Next, add a SqlDataSource control to the master page, naming it `DoublePricesDataSource`.</span></span> <span data-ttu-id="c4abf-172">Este SqlDataSource se usará para ejecutar la instrucción `UPDATE` para duplicar todos los precios.</span><span class="sxs-lookup"><span data-stu-id="c4abf-172">This SqlDataSource will be used to execute the `UPDATE` statement to double all prices.</span></span> <span data-ttu-id="c4abf-173">En concreto, es necesario establecer sus propiedades `ConnectionString` y `UpdateCommand` en la cadena de conexión adecuada y `UPDATE` instrucción.</span><span class="sxs-lookup"><span data-stu-id="c4abf-173">Specifically, we need to set its `ConnectionString` and `UpdateCommand` properties to the appropriate connection string and `UPDATE` statement.</span></span> <span data-ttu-id="c4abf-174">A continuación, es necesario llamar al método `Update` del control SqlDataSource al hacer clic en el botón `DoublePrice`.</span><span class="sxs-lookup"><span data-stu-id="c4abf-174">Then we need to call this SqlDataSource control's `Update` method when the `DoublePrice` Button is clicked.</span></span> <span data-ttu-id="c4abf-175">Para establecer las propiedades `ConnectionString` y `UpdateCommand`, seleccione el control SqlDataSource y, a continuación, vaya a la ventana Propiedades.</span><span class="sxs-lookup"><span data-stu-id="c4abf-175">To set the `ConnectionString` and `UpdateCommand` properties, select the SqlDataSource control and then go to the Properties window.</span></span> <span data-ttu-id="c4abf-176">La propiedad `ConnectionString` muestra las cadenas de conexión que ya están almacenadas en `Web.config` en una lista desplegable. Elija la opción `NorthwindConnectionString` como se muestra en la figura 6.</span><span class="sxs-lookup"><span data-stu-id="c4abf-176">The `ConnectionString` property lists those connection strings already stored in `Web.config` in a drop-down list; choose the `NorthwindConnectionString` option as shown in Figure 6.</span></span>

<span data-ttu-id="c4abf-177">[![configurar SqlDataSource para usar NorthwindConnectionString](interacting-with-the-content-page-from-the-master-page-cs/_static/image17.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="c4abf-177">[![Configure the SqlDataSource to Use the NorthwindConnectionString](interacting-with-the-content-page-from-the-master-page-cs/_static/image17.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image16.png)</span></span>

<span data-ttu-id="c4abf-178">**Figura 06**: configuración de SqlDataSource para usar el `NorthwindConnectionString` ([haga clic para ver la imagen de tamaño completo](interacting-with-the-content-page-from-the-master-page-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="c4abf-178">**Figure 06**: Configure the SqlDataSource to Use the `NorthwindConnectionString` ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image18.png))</span></span>

<span data-ttu-id="c4abf-179">Para establecer la propiedad `UpdateCommand`, busque la opción UpdateQuery en el ventana Propiedades.</span><span class="sxs-lookup"><span data-stu-id="c4abf-179">To set the `UpdateCommand` property, locate the UpdateQuery option in the Properties window.</span></span> <span data-ttu-id="c4abf-180">Esta propiedad, cuando se selecciona, muestra un botón con puntos suspensivos; Haga clic en este botón para mostrar el cuadro de diálogo Editor de parámetros y comandos que se muestra en la figura 7.</span><span class="sxs-lookup"><span data-stu-id="c4abf-180">This property, when selected, displays a button with ellipses; click this button to display the Command and Parameter Editor dialog box shown in Figure 7.</span></span> <span data-ttu-id="c4abf-181">Escriba la siguiente instrucción `UPDATE` en el cuadro de texto del cuadro de diálogo:</span><span class="sxs-lookup"><span data-stu-id="c4abf-181">Type the following `UPDATE` statement into the dialog box's textbox:</span></span>

[!code-sql[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample3.sql)]

<span data-ttu-id="c4abf-182">Cuando se ejecuta esta instrucción, duplicará el valor `UnitPrice` de cada registro de la tabla `Products`.</span><span class="sxs-lookup"><span data-stu-id="c4abf-182">This statement, when executed, will double the `UnitPrice` value for each record in the `Products` table.</span></span>

<span data-ttu-id="c4abf-183">[![establecer la propiedad UpdateCommand de SqlDataSource](interacting-with-the-content-page-from-the-master-page-cs/_static/image20.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="c4abf-183">[![Set SqlDataSource's UpdateCommand Property](interacting-with-the-content-page-from-the-master-page-cs/_static/image20.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image19.png)</span></span>

<span data-ttu-id="c4abf-184">**Figura 07**: establecer la propiedad `UpdateCommand` de SqlDataSource ([haga clic para ver la imagen de tamaño completo](interacting-with-the-content-page-from-the-master-page-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="c4abf-184">**Figure 07**: Set SqlDataSource's `UpdateCommand` Property  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image21.png))</span></span>

<span data-ttu-id="c4abf-185">Después de establecer estas propiedades, el marcado declarativo de los controles Button y SqlDataSource debe ser similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="c4abf-185">After setting these properties, your Button and SqlDataSource controls' declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample4.aspx)]

<span data-ttu-id="c4abf-186">Todo lo que queda es llamar a su método `Update` cuando se hace clic en el botón `DoublePrice`.</span><span class="sxs-lookup"><span data-stu-id="c4abf-186">All that remains is to call its `Update` method when the `DoublePrice` Button is clicked.</span></span> <span data-ttu-id="c4abf-187">Cree un controlador de eventos `Click` para el botón `DoublePrice` y agregue el código siguiente:</span><span class="sxs-lookup"><span data-stu-id="c4abf-187">Create a `Click` event handler for the `DoublePrice` Button and add the following code:</span></span>

[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample5.cs)]

<span data-ttu-id="c4abf-188">Para probar esta funcionalidad, visite la página `~/Admin/Products.aspx` que creamos en el paso 1 y haga clic en el botón "dos precios de productos".</span><span class="sxs-lookup"><span data-stu-id="c4abf-188">To test this functionality, visit the `~/Admin/Products.aspx` page we created in Step 1 and click the "Double Product Prices" button.</span></span> <span data-ttu-id="c4abf-189">Al hacer clic en el botón, se produce un postback y se ejecuta el controlador de eventos `Click` del botón `DoublePrice`, doblando los precios de todos los productos.</span><span class="sxs-lookup"><span data-stu-id="c4abf-189">Clicking the button causes a postback and executes the `DoublePrice` Button's `Click` event handler, doubling the prices of all products.</span></span> <span data-ttu-id="c4abf-190">La página se vuelve a representar y se devuelve el marcado y se vuelve a mostrar en el explorador.</span><span class="sxs-lookup"><span data-stu-id="c4abf-190">The page is then re-rendered and the markup is returned and re-displayed in the browser.</span></span> <span data-ttu-id="c4abf-191">El control GridView en la página de contenido, sin embargo, muestra los mismos precios que antes de que se haga clic en el botón "Double Product prices".</span><span class="sxs-lookup"><span data-stu-id="c4abf-191">The GridView in the content page, however, lists the same prices as before the "Double Product Prices" button was clicked.</span></span> <span data-ttu-id="c4abf-192">Esto se debe a que los datos cargados inicialmente en GridView tenían su estado almacenado en el estado de vista, por lo que no se vuelven a cargar en los postbacks a menos que se indique lo contrario.</span><span class="sxs-lookup"><span data-stu-id="c4abf-192">This is because the data initially loaded in the GridView had its state stored in view state, so it's not reloaded on postbacks unless instructed otherwise.</span></span> <span data-ttu-id="c4abf-193">Si visita una página diferente y, a continuación, vuelve a la página `~/Admin/Products.aspx` verá los precios actualizados.</span><span class="sxs-lookup"><span data-stu-id="c4abf-193">If you visit a different page and then return to the `~/Admin/Products.aspx` page you'll see the updated prices.</span></span>

## <a name="step-3-raising-an-event-when-the-prices-are-doubled"></a><span data-ttu-id="c4abf-194">Paso 3: generar un evento cuando se duplican los precios</span><span class="sxs-lookup"><span data-stu-id="c4abf-194">Step 3: Raising an Event When the Prices are Doubled</span></span>

<span data-ttu-id="c4abf-195">Dado que GridView en la página de `~/Admin/Products.aspx` no refleja inmediatamente el duplicado de precio, es posible que un usuario piense que no hizo clic en el botón "precios de productos dobles" o que no funcionaba.</span><span class="sxs-lookup"><span data-stu-id="c4abf-195">Because the GridView in the `~/Admin/Products.aspx` page does not immediately reflect the price doubling, a user may understandably think that they did not click the "Double Product Prices" button, or that it didn't work.</span></span> <span data-ttu-id="c4abf-196">Pueden intentar hacer clic en el botón varias veces más, doblando los precios de nuevo y de nuevo.</span><span class="sxs-lookup"><span data-stu-id="c4abf-196">They may try clicking the button a few more times, doubling the prices again and again.</span></span> <span data-ttu-id="c4abf-197">Para solucionar este comportamiento, es necesario que la cuadrícula de la página de contenido muestre los nuevos precios inmediatamente después de que se dupliquen.</span><span class="sxs-lookup"><span data-stu-id="c4abf-197">To fix this we need to have the grid in the content page display the new prices immediately after they are doubled.</span></span>

<span data-ttu-id="c4abf-198">Como se explicó anteriormente en este tutorial, es necesario generar un evento en la página maestra siempre que el usuario haga clic en el botón `DoublePrice`.</span><span class="sxs-lookup"><span data-stu-id="c4abf-198">As discussed earlier in this tutorial, we need to raise an event in the master page whenever the user clicks the `DoublePrice` Button.</span></span> <span data-ttu-id="c4abf-199">Un evento es una forma de que una clase (un publicador de eventos) notifique a otro un conjunto de otras clases (los suscriptores de eventos) que se ha producido algo interesante.</span><span class="sxs-lookup"><span data-stu-id="c4abf-199">An event is a way for one class (an event publisher) to notify another a set of other classes (the event subscribers) that something interesting has occurred.</span></span> <span data-ttu-id="c4abf-200">En este ejemplo, la página maestra es el publicador de eventos; las páginas de contenido que le interesan al hacer clic en el botón `DoublePrice` son los suscriptores.</span><span class="sxs-lookup"><span data-stu-id="c4abf-200">In this example, the master page is the event publisher; those content pages that care about when the `DoublePrice` Button is clicked are the subscribers.</span></span>

<span data-ttu-id="c4abf-201">Una clase se suscribe a un evento mediante la creación de un *controlador de eventos*, que es un método que se ejecuta en respuesta al evento que se está generando.</span><span class="sxs-lookup"><span data-stu-id="c4abf-201">A class subscribes to an event by creating an *event handler*, which is a method that is executed in response to the event being raised.</span></span> <span data-ttu-id="c4abf-202">El publicador define los eventos que genera definiendo un *delegado de eventos*.</span><span class="sxs-lookup"><span data-stu-id="c4abf-202">The publisher defines the events he raises by defining an *event delegate*.</span></span> <span data-ttu-id="c4abf-203">El delegado de eventos especifica qué parámetros de entrada debe aceptar el controlador de eventos.</span><span class="sxs-lookup"><span data-stu-id="c4abf-203">The event delegate specifies what input parameters the event handler must accept.</span></span> <span data-ttu-id="c4abf-204">En el .NET Framework, los delegados de eventos no devuelven ningún valor y aceptan dos parámetros de entrada:</span><span class="sxs-lookup"><span data-stu-id="c4abf-204">In the .NET Framework, event delegates do not return any value and accept two input parameters:</span></span>

- <span data-ttu-id="c4abf-205">`Object`, que identifica el origen del evento y</span><span class="sxs-lookup"><span data-stu-id="c4abf-205">An `Object`, which identifies the event source, and</span></span>
- <span data-ttu-id="c4abf-206">Una clase derivada de `System.EventArgs`</span><span class="sxs-lookup"><span data-stu-id="c4abf-206">A class derived from `System.EventArgs`</span></span>

<span data-ttu-id="c4abf-207">El segundo parámetro pasado a un controlador de eventos puede incluir información adicional sobre el evento.</span><span class="sxs-lookup"><span data-stu-id="c4abf-207">The second parameter passed to an event handler can include additional information about the event.</span></span> <span data-ttu-id="c4abf-208">Aunque la clase base `EventArgs` no pasa a lo largo de la información, el .NET Framework incluye una serie de clases que extienden `EventArgs` y abarcan propiedades adicionales.</span><span class="sxs-lookup"><span data-stu-id="c4abf-208">While the base `EventArgs` class does not pass along any information, the .NET Framework includes a number of classes that extend `EventArgs` and encompass additional properties.</span></span> <span data-ttu-id="c4abf-209">Por ejemplo, se pasa una instancia de `CommandEventArgs` a los controladores de eventos que responden al evento de `Command` e incluye dos propiedades informativas: `CommandArgument` y `CommandName`.</span><span class="sxs-lookup"><span data-stu-id="c4abf-209">For example, a `CommandEventArgs` instance is passed to event handlers that respond to the `Command` event, and includes two informational properties: `CommandArgument` and `CommandName`.</span></span>

> [!NOTE]
> <span data-ttu-id="c4abf-210">Para obtener más información sobre la creación, la generación y el control de eventos, vea [eventos y delegados](https://msdn.microsoft.com/library/17sde2xt.aspx) y [delegados de eventos en inglés simple](http://www.codeproject.com/KB/cs/eventdelegates.aspx).</span><span class="sxs-lookup"><span data-stu-id="c4abf-210">For more information on creating, raising, and handling events, see [Events and Delegates](https://msdn.microsoft.com/library/17sde2xt.aspx) and [Event Delegates in Simple English](http://www.codeproject.com/KB/cs/eventdelegates.aspx).</span></span>

<span data-ttu-id="c4abf-211">Para definir un evento, use la sintaxis siguiente:</span><span class="sxs-lookup"><span data-stu-id="c4abf-211">To define an event use the following syntax:</span></span>

[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample6.cs)]

<span data-ttu-id="c4abf-212">Dado que solo necesitamos enviar una alerta a la página de contenido cuando el usuario hace clic en el botón `DoublePrice` y no es necesario pasar más información adicional, podemos usar el delegado de eventos `EventHandler`, que define un controlador de eventos que acepta como el segundo parámetro un objeto de tipo `System.EventArgs`.</span><span class="sxs-lookup"><span data-stu-id="c4abf-212">Because we only need to alert the content page when the user has clicked the `DoublePrice` Button and do not need to pass along any other additional information, we can use the event delegate `EventHandler`, which defines an event handler that accepts as its second parameter an object of type `System.EventArgs`.</span></span> <span data-ttu-id="c4abf-213">Para crear el evento en la página maestra, agregue la siguiente línea de código a la clase de código subyacente de la página maestra:</span><span class="sxs-lookup"><span data-stu-id="c4abf-213">To create the event in the master page, add the following line of code to the master page's code-behind class:</span></span>

[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample7.cs)]

<span data-ttu-id="c4abf-214">El código anterior agrega un evento público a la página maestra denominada `PricesDoubled`.</span><span class="sxs-lookup"><span data-stu-id="c4abf-214">The above code adds a public event to the master page named `PricesDoubled`.</span></span> <span data-ttu-id="c4abf-215">Ahora necesitamos generar este evento una vez que se han duplicado los precios.</span><span class="sxs-lookup"><span data-stu-id="c4abf-215">We now need to raise this event after the prices have been doubled.</span></span> <span data-ttu-id="c4abf-216">Para generar un evento, use la sintaxis siguiente:</span><span class="sxs-lookup"><span data-stu-id="c4abf-216">To raise an event use the following syntax:</span></span>

[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample8.cs)]

<span data-ttu-id="c4abf-217">Donde *Sender* y *EventArgs* son los valores que desea pasar al controlador de eventos del suscriptor.</span><span class="sxs-lookup"><span data-stu-id="c4abf-217">Where *sender* and *eventArgs* are the values you want to pass to the subscriber's event handler.</span></span>

<span data-ttu-id="c4abf-218">Actualice el controlador de eventos `DoublePrice` `Click` con el código siguiente:</span><span class="sxs-lookup"><span data-stu-id="c4abf-218">Update the `DoublePrice` `Click` event handler with the following code:</span></span>

[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample9.cs)]

<span data-ttu-id="c4abf-219">Como antes, el controlador de eventos `Click` se inicia llamando al método `Update` del control `DoublePricesDataSource` SqlDataSource para duplicar los precios de todos los productos.</span><span class="sxs-lookup"><span data-stu-id="c4abf-219">As before, the `Click` event handler starts by calling the `DoublePricesDataSource` SqlDataSource control's `Update` method to double the prices of all products.</span></span> <span data-ttu-id="c4abf-220">A continuación se indican dos adiciones al controlador de eventos.</span><span class="sxs-lookup"><span data-stu-id="c4abf-220">Following that there are two additions to the event handler.</span></span> <span data-ttu-id="c4abf-221">En primer lugar, se actualizan los datos del `RecentProducts` GridView.</span><span class="sxs-lookup"><span data-stu-id="c4abf-221">First, the `RecentProducts` GridView's data is refreshed.</span></span> <span data-ttu-id="c4abf-222">Este GridView se agregó a la página maestra en el tutorial anterior y muestra los cinco productos agregados más recientemente.</span><span class="sxs-lookup"><span data-stu-id="c4abf-222">This GridView was added to the master page in the preceding tutorial and displays the five most recently-added products.</span></span> <span data-ttu-id="c4abf-223">Es necesario actualizar esta cuadrícula para que muestre los precios Just-by dobles de estos cinco productos.</span><span class="sxs-lookup"><span data-stu-id="c4abf-223">We need to refresh this grid so that it shows the just-doubled prices for these five products.</span></span> <span data-ttu-id="c4abf-224">A continuación, se genera el evento `PricesDoubled`.</span><span class="sxs-lookup"><span data-stu-id="c4abf-224">Following that, the `PricesDoubled` event is raised.</span></span> <span data-ttu-id="c4abf-225">Una referencia a la propia página maestra (`this`) se envía al controlador de eventos como el origen del evento y se envía un objeto `EventArgs` vacío como argumentos del evento.</span><span class="sxs-lookup"><span data-stu-id="c4abf-225">A reference to the master page itself (`this`) is sent to the event handler as the event source and an empty `EventArgs` object is sent as the event arguments.</span></span>

## <a name="step-4-handling-the-event-in-the-content-page"></a><span data-ttu-id="c4abf-226">Paso 4: control del evento en la página de contenido</span><span class="sxs-lookup"><span data-stu-id="c4abf-226">Step 4: Handling the Event in the Content Page</span></span>

<span data-ttu-id="c4abf-227">En este momento, la página maestra genera su evento `PricesDoubled` cada vez que se hace clic en el control de botón `DoublePrice`.</span><span class="sxs-lookup"><span data-stu-id="c4abf-227">At this point the master page raises its `PricesDoubled` event whenever the `DoublePrice` Button control is clicked.</span></span> <span data-ttu-id="c4abf-228">Sin embargo, esta es solo la mitad de la batalla: todavía necesitamos controlar el evento en el suscriptor.</span><span class="sxs-lookup"><span data-stu-id="c4abf-228">However, this is only half the battle - we still need to handle the event in the subscriber.</span></span> <span data-ttu-id="c4abf-229">Esto implica dos pasos: crear el controlador de eventos y agregar código de conexión de eventos para que cuando se produzca el evento, se ejecute el controlador de eventos.</span><span class="sxs-lookup"><span data-stu-id="c4abf-229">This involves two steps: creating the event handler and adding event wiring code so that when the event is raised the event handler is executed.</span></span>

<span data-ttu-id="c4abf-230">Empiece por crear un controlador de eventos denominado `Master_PricesDoubled`.</span><span class="sxs-lookup"><span data-stu-id="c4abf-230">Start by creating an event handler named `Master_PricesDoubled`.</span></span> <span data-ttu-id="c4abf-231">Debido a cómo definimos el evento `PricesDoubled` en la página maestra, los dos parámetros de entrada del controlador de eventos deben ser de tipos `Object` y `EventArgs`, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="c4abf-231">Because of how we defined the `PricesDoubled` event in the master page the event handler's two input parameters must be of types `Object` and `EventArgs`, respectively.</span></span> <span data-ttu-id="c4abf-232">En el controlador de eventos, llame al método `DataBind` de `ProductsGrid` GridView para volver a enlazar los datos a la cuadrícula.</span><span class="sxs-lookup"><span data-stu-id="c4abf-232">In the event handler call the `ProductsGrid` GridView's `DataBind` method to rebind the data to the grid.</span></span>

[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample10.cs)]

<span data-ttu-id="c4abf-233">El código del controlador de eventos está completo, pero aún no se ha conectado el evento de `PricesDoubled` de la página maestra a este controlador de eventos.</span><span class="sxs-lookup"><span data-stu-id="c4abf-233">The code for the event handler is complete but we've yet to wire the master page's `PricesDoubled` event to this event handler.</span></span> <span data-ttu-id="c4abf-234">El suscriptor conecta un evento a un controlador de eventos a través de la sintaxis siguiente:</span><span class="sxs-lookup"><span data-stu-id="c4abf-234">The subscriber wires an event to an event handler via the following syntax:</span></span>

[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample11.cs)]

<span data-ttu-id="c4abf-235">*Publisher* es una referencia al objeto que ofrece el *eventName*de evento y *MethodName* es el nombre del controlador de eventos definido en el suscriptor que tiene una firma que corresponde a *eventDelegate*.</span><span class="sxs-lookup"><span data-stu-id="c4abf-235">*publisher* is a reference to the object that offers the event *eventName*, and *methodName* is the name of the event handler defined in the subscriber that has a signature corresponding to the *eventDelegate*.</span></span> <span data-ttu-id="c4abf-236">En otras palabras, si el delegado de eventos es `EventHandler`, *MethodName* debe ser el nombre de un método en el suscriptor que no devuelve un valor y acepta dos parámetros de entrada de tipos `Object` y `EventArgs`, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="c4abf-236">In other words, if the event delegate is `EventHandler`, then *methodName* must be the name of a method in the subscriber that does not return a value and accepts two input parameters of types `Object` and `EventArgs`, respectively.</span></span>

<span data-ttu-id="c4abf-237">Este código de conexión de eventos debe ejecutarse en la primera visita de la página y los postbacks subsiguientes, y se debe producir en un punto del ciclo de vida de la página que precede al momento en que se puede generar el evento.</span><span class="sxs-lookup"><span data-stu-id="c4abf-237">This event wiring code must be executed on the first page visit and subsequent postbacks and should occur at a point in the page lifecycle that precedes when the event may be raised.</span></span> <span data-ttu-id="c4abf-238">Un buen momento para agregar el código de conexión de eventos se encuentra en la fase de PreInit, que se produce al principio del ciclo de vida de la página.</span><span class="sxs-lookup"><span data-stu-id="c4abf-238">A good time to add event wiring code is in the PreInit stage, which occurs very early in the page lifecycle.</span></span>

<span data-ttu-id="c4abf-239">Abra `~/Admin/Products.aspx` y cree un controlador de eventos de `Page_PreInit`:</span><span class="sxs-lookup"><span data-stu-id="c4abf-239">Open `~/Admin/Products.aspx` and create a `Page_PreInit` event handler:</span></span>

[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample12.cs)]

<span data-ttu-id="c4abf-240">Para completar este código de cableado, necesitamos una referencia mediante programación a la página maestra desde la página de contenido.</span><span class="sxs-lookup"><span data-stu-id="c4abf-240">In order to complete this wiring code we need a programmatic reference to the master page from the content page.</span></span> <span data-ttu-id="c4abf-241">Como se indicó en el tutorial anterior, hay dos maneras de hacerlo:</span><span class="sxs-lookup"><span data-stu-id="c4abf-241">As noted in the previous tutorial, there are two ways to do this:</span></span>

- <span data-ttu-id="c4abf-242">Convirtiendo la propiedad de `Page.Master` con tipo flexible en el tipo de página maestra adecuado, o bien</span><span class="sxs-lookup"><span data-stu-id="c4abf-242">By casting the loosely-typed `Page.Master` property to the appropriate master page type, or</span></span>
- <span data-ttu-id="c4abf-243">Agregando una directiva de `@MasterType` en la página `.aspx` y usando después la propiedad fuertemente tipada `Master`.</span><span class="sxs-lookup"><span data-stu-id="c4abf-243">By adding a `@MasterType` directive in the `.aspx` page and then using the strongly-typed `Master` property.</span></span>

<span data-ttu-id="c4abf-244">Vamos a usar el último enfoque.</span><span class="sxs-lookup"><span data-stu-id="c4abf-244">Let's use the latter approach.</span></span> <span data-ttu-id="c4abf-245">Agregue la siguiente directiva de `@MasterType` a la parte superior del marcado declarativo de la página:</span><span class="sxs-lookup"><span data-stu-id="c4abf-245">Add the following `@MasterType` directive to the top of the page's declarative markup:</span></span>

[!code-aspx[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample13.aspx)]

<span data-ttu-id="c4abf-246">Después, agregue el siguiente código de conexión de eventos en el controlador de eventos `Page_PreInit`:</span><span class="sxs-lookup"><span data-stu-id="c4abf-246">Then add the following event wiring code in the `Page_PreInit` event handler:</span></span>

[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample14.cs)]

<span data-ttu-id="c4abf-247">Con este código en su lugar, el control GridView en la página de contenido se actualiza cada vez que se hace clic en el botón `DoublePrice`.</span><span class="sxs-lookup"><span data-stu-id="c4abf-247">With this code in place, the GridView in the content page is refreshed whenever the `DoublePrice` Button is clicked.</span></span>

<span data-ttu-id="c4abf-248">En las figuras 8 y 9 se muestra este comportamiento.</span><span class="sxs-lookup"><span data-stu-id="c4abf-248">Figures 8 and 9 illustrate this behavior.</span></span> <span data-ttu-id="c4abf-249">En la ilustración 8 se muestra la página cuando se visita por primera vez.</span><span class="sxs-lookup"><span data-stu-id="c4abf-249">Figure 8 shows the page when first visited.</span></span> <span data-ttu-id="c4abf-250">Tenga en cuenta que los valores de precio en el `RecentProducts` GridView (en la columna izquierda de la página maestra) y el `ProductsGrid` GridView (en la página de contenido).</span><span class="sxs-lookup"><span data-stu-id="c4abf-250">Note that price values in both the `RecentProducts` GridView (in the left column of the master page) and the `ProductsGrid` GridView (in the content page).</span></span> <span data-ttu-id="c4abf-251">En la ilustración 9 se muestra la misma pantalla inmediatamente después de hacer clic en el botón `DoublePrice`.</span><span class="sxs-lookup"><span data-stu-id="c4abf-251">Figure 9 shows the same screen immediately after the `DoublePrice` Button has been clicked.</span></span> <span data-ttu-id="c4abf-252">Como puede ver, los nuevos precios se reflejan de forma instantánea en ambos GridView.</span><span class="sxs-lookup"><span data-stu-id="c4abf-252">As you can see, the new prices are instantaneously reflected in both GridViews.</span></span>

<span data-ttu-id="c4abf-253">[![los valores de precio iniciales](interacting-with-the-content-page-from-the-master-page-cs/_static/image23.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="c4abf-253">[![The Initial Price Values](interacting-with-the-content-page-from-the-master-page-cs/_static/image23.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image22.png)</span></span>

<span data-ttu-id="c4abf-254">**Figura 08**: valores de precio iniciales ([haga clic para ver la imagen de tamaño completo](interacting-with-the-content-page-from-the-master-page-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="c4abf-254">**Figure 08**: The Initial Price Values  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image24.png))</span></span>

<span data-ttu-id="c4abf-255">[![los precios Just-by dobles se muestran en el GridView](interacting-with-the-content-page-from-the-master-page-cs/_static/image26.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="c4abf-255">[![The Just-Doubled Prices are Displayed in the GridViews](interacting-with-the-content-page-from-the-master-page-cs/_static/image26.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image25.png)</span></span>

<span data-ttu-id="c4abf-256">**Figura 09**: los precios Just-by dobles se muestran en GridView ([haga clic para ver la imagen a tamaño completo](interacting-with-the-content-page-from-the-master-page-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="c4abf-256">**Figure 09**: The Just-Doubled Prices are Displayed in the GridViews  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image27.png))</span></span>

## <a name="summary"></a><span data-ttu-id="c4abf-257">Resumen</span><span class="sxs-lookup"><span data-stu-id="c4abf-257">Summary</span></span>

<span data-ttu-id="c4abf-258">Idealmente, una página maestra y sus páginas de contenido son completamente independientes entre sí y no requieren ningún nivel de interacción.</span><span class="sxs-lookup"><span data-stu-id="c4abf-258">Ideally, a master page and its content pages are completely separate from one another and require no level of interaction.</span></span> <span data-ttu-id="c4abf-259">Sin embargo, si tiene una página maestra o una página de contenido que muestra datos que se pueden modificar desde la página maestra o la página de contenido, es posible que deba hacer que la página maestra avise a la página de contenido (o viceversa) cuando se modifiquen los datos para que se pueda actualizar la pantalla.</span><span class="sxs-lookup"><span data-stu-id="c4abf-259">However, if you have a master page or content page that displays data that can be modified from the master page or content page, then you may need to have the master page alert the content page (or vice-a-versa) when data is modified so that the display can be updated.</span></span> <span data-ttu-id="c4abf-260">En el tutorial anterior, vimos cómo hacer que una página de contenido interactúe mediante programación con su página maestra; en este tutorial, hemos visto cómo hacer que una página maestra iniciara la interacción.</span><span class="sxs-lookup"><span data-stu-id="c4abf-260">In the preceding tutorial we saw how to have a content page programmatically interact with its master page; in this tutorial we looked at how to have a master page initiate the interaction.</span></span>

<span data-ttu-id="c4abf-261">Aunque la interacción mediante programación entre un contenido y una página maestra puede originarse en el contenido o en la página maestra, el patrón de interacción utilizado depende del origen.</span><span class="sxs-lookup"><span data-stu-id="c4abf-261">While programmatic interaction between a content and master page can originate from either the content or master page, the interaction pattern used depends on the origination.</span></span> <span data-ttu-id="c4abf-262">Las diferencias se deben al hecho de que una página de contenido tiene una sola página maestra, pero una página maestra puede tener muchas páginas de contenido diferentes.</span><span class="sxs-lookup"><span data-stu-id="c4abf-262">The differences are due to the fact that a content page has a single master page, but a master page can have many different content pages.</span></span> <span data-ttu-id="c4abf-263">En lugar de hacer que una página maestra interactúe directamente con una página de contenido, un mejor enfoque es hacer que la página maestra provoque un evento para indicar que se ha producido alguna acción.</span><span class="sxs-lookup"><span data-stu-id="c4abf-263">Rather than having a master page directly interact with a content page, a better approach is to have the master page raise an event to signal that some action has taken place.</span></span> <span data-ttu-id="c4abf-264">Las páginas de contenido que le interesan a la acción pueden crear controladores de eventos.</span><span class="sxs-lookup"><span data-stu-id="c4abf-264">Those content pages that care about the action can create event handlers.</span></span>

<span data-ttu-id="c4abf-265">¡ Feliz programación!</span><span class="sxs-lookup"><span data-stu-id="c4abf-265">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="c4abf-266">Información adicional</span><span class="sxs-lookup"><span data-stu-id="c4abf-266">Further Reading</span></span>

<span data-ttu-id="c4abf-267">Para obtener más información sobre los temas descritos en este tutorial, consulte los siguientes recursos:</span><span class="sxs-lookup"><span data-stu-id="c4abf-267">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="c4abf-268">Obtener acceso a los datos y actualizarlos en ASP.NET</span><span class="sxs-lookup"><span data-stu-id="c4abf-268">Accessing and Updating Data in ASP.NET</span></span>](http://aspnet.4guysfromrolla.com/articles/011106-1.aspx)
- [<span data-ttu-id="c4abf-269">Eventos y delegados</span><span class="sxs-lookup"><span data-stu-id="c4abf-269">Events and Delegates</span></span>](https://msdn.microsoft.com/library/17sde2xt.aspx)
- [<span data-ttu-id="c4abf-270">Pasar información entre el contenido y las páginas maestras</span><span class="sxs-lookup"><span data-stu-id="c4abf-270">Passing Information Between Content and Master Pages</span></span>](http://aspnet.4guysfromrolla.com/articles/013107-1.aspx)
- [<span data-ttu-id="c4abf-271">Trabajar con datos en tutoriales de ASP.NET</span><span class="sxs-lookup"><span data-stu-id="c4abf-271">Working with Data in ASP.NET Tutorials</span></span>](../../data-access/index.md)

### <a name="about-the-author"></a><span data-ttu-id="c4abf-272">Acerca del autor</span><span class="sxs-lookup"><span data-stu-id="c4abf-272">About the Author</span></span>

<span data-ttu-id="c4abf-273">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor de varios libros de ASP/ASP. net y fundador de 4GuysFromRolla.com, ha estado trabajando con las tecnologías Web de Microsoft desde 1998.</span><span class="sxs-lookup"><span data-stu-id="c4abf-273">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="c4abf-274">Scott funciona como consultor, profesor y redactor independiente.</span><span class="sxs-lookup"><span data-stu-id="c4abf-274">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="c4abf-275">Su último libro se [*enseña a ASP.NET 3,5 en 24 horas*](https://www.amazon.com/exec/obidos/ASIN/0672329972/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="c4abf-275">His latest book is [*Sams Teach Yourself ASP.NET 3.5 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672329972/4guysfromrollaco).</span></span> <span data-ttu-id="c4abf-276">Se puede acceder a Scott en [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com) o a través de su blog en [http://ScottOnWriting.NET](http://scottonwriting.net/).</span><span class="sxs-lookup"><span data-stu-id="c4abf-276">Scott can be reached at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="c4abf-277">Agradecimiento especial a</span><span class="sxs-lookup"><span data-stu-id="c4abf-277">Special Thanks To</span></span>

<span data-ttu-id="c4abf-278">Muchos revisores útiles revisaron esta serie de tutoriales.</span><span class="sxs-lookup"><span data-stu-id="c4abf-278">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="c4abf-279">El revisor responsable de este tutorial fue Banerjee.</span><span class="sxs-lookup"><span data-stu-id="c4abf-279">Lead reviewer for this tutorial was Suchi Banerjee.</span></span> <span data-ttu-id="c4abf-280">¿Está interesado en revisar los próximos artículos de MSDN?</span><span class="sxs-lookup"><span data-stu-id="c4abf-280">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="c4abf-281">Si es así, coloque una línea en [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="c4abf-281">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="c4abf-282">[Anterior](interacting-with-the-master-page-from-the-content-page-cs.md)
> [Siguiente](master-pages-and-asp-net-ajax-cs.md)</span><span class="sxs-lookup"><span data-stu-id="c4abf-282">[Previous](interacting-with-the-master-page-from-the-content-page-cs.md)
[Next](master-pages-and-asp-net-ajax-cs.md)</span></span>
