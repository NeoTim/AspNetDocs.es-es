---
uid: mvc/overview/older-versions-1/contact-manager/iteration-6-use-test-driven-development-cs
title: '#6 de iteración: Use el desarrollo controladoC#por pruebas () | Microsoft Docs'
author: microsoft
description: En esta sexta iteración, agregamos una nueva funcionalidad a nuestra aplicación escribiendo primero las pruebas unitarias y escribiendo código en las pruebas unitarias. En esta iteración,...
ms.author: riande
ms.date: 02/20/2009
ms.assetid: 013c3c26-7dc3-41d1-8064-f233c86008b5
msc.legacyurl: /mvc/overview/older-versions-1/contact-manager/iteration-6-use-test-driven-development-cs
msc.type: authoredcontent
ms.openlocfilehash: aee0ff9d8d7f17e8a00dab12467bd3a3457fbe18
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 03/06/2020
ms.locfileid: "78487129"
---
# <a name="iteration-6--use-test-driven-development-c"></a><span data-ttu-id="42e8a-104">#6 de iteración: usar el desarrollo controladoC#por pruebas ()</span><span class="sxs-lookup"><span data-stu-id="42e8a-104">Iteration #6 – Use test-driven development (C#)</span></span>

<span data-ttu-id="42e8a-105">por [Microsoft](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="42e8a-105">by [Microsoft](https://github.com/microsoft)</span></span>

[<span data-ttu-id="42e8a-106">Descargar código</span><span class="sxs-lookup"><span data-stu-id="42e8a-106">Download Code</span></span>](iteration-6-use-test-driven-development-cs/_static/contactmanager_6_cs1.zip)

> <span data-ttu-id="42e8a-107">En esta sexta iteración, agregamos una nueva funcionalidad a nuestra aplicación escribiendo primero las pruebas unitarias y escribiendo código en las pruebas unitarias.</span><span class="sxs-lookup"><span data-stu-id="42e8a-107">In this sixth iteration, we add new functionality to our application by writing unit tests first and writing code against the unit tests.</span></span> <span data-ttu-id="42e8a-108">En esta iteración, se agregan grupos de contactos.</span><span class="sxs-lookup"><span data-stu-id="42e8a-108">In this iteration, we add contact groups.</span></span>

## <a name="building-a-contact-management-aspnet-mvc-application-c"></a><span data-ttu-id="42e8a-109">Creación de una aplicación ASP.NET MVC de administraciónC#de contactos ()</span><span class="sxs-lookup"><span data-stu-id="42e8a-109">Building a Contact Management ASP.NET MVC Application (C#)</span></span>

<span data-ttu-id="42e8a-110">En esta serie de tutoriales, creamos una aplicación de administración de contactos completa de principio a fin.</span><span class="sxs-lookup"><span data-stu-id="42e8a-110">In this series of tutorials, we build an entire Contact Management application from start to finish.</span></span> <span data-ttu-id="42e8a-111">La aplicación Contact Manager le permite almacenar información de contacto: nombres, números de teléfono y direcciones de correo electrónico, para obtener una lista de personas.</span><span class="sxs-lookup"><span data-stu-id="42e8a-111">The Contact Manager application enables you to store contact information - names, phone numbers and email addresses - for a list of people.</span></span>

<span data-ttu-id="42e8a-112">Compilamos la aplicación en varias iteraciones.</span><span class="sxs-lookup"><span data-stu-id="42e8a-112">We build the application over multiple iterations.</span></span> <span data-ttu-id="42e8a-113">Con cada iteración, mejoramos gradualmente la aplicación.</span><span class="sxs-lookup"><span data-stu-id="42e8a-113">With each iteration, we gradually improve the application.</span></span> <span data-ttu-id="42e8a-114">El objetivo de este enfoque de varias iteraciones es permitirle comprender la razón de cada cambio.</span><span class="sxs-lookup"><span data-stu-id="42e8a-114">The goal of this multiple iteration approach is to enable you to understand the reason for each change.</span></span>

- <span data-ttu-id="42e8a-115">#1 de iteración: cree la aplicación.</span><span class="sxs-lookup"><span data-stu-id="42e8a-115">Iteration #1 - Create the application.</span></span> <span data-ttu-id="42e8a-116">En la primera iteración, se crea el administrador de contactos de la manera más sencilla posible.</span><span class="sxs-lookup"><span data-stu-id="42e8a-116">In the first iteration, we create the Contact Manager in the simplest way possible.</span></span> <span data-ttu-id="42e8a-117">Agregamos compatibilidad con las operaciones básicas de base de datos: crear, leer, actualizar y eliminar (CRUD).</span><span class="sxs-lookup"><span data-stu-id="42e8a-117">We add support for basic database operations: Create, Read, Update, and Delete (CRUD).</span></span>

- <span data-ttu-id="42e8a-118">#2 de iteración: haga que la aplicación tenga un buen aspecto.</span><span class="sxs-lookup"><span data-stu-id="42e8a-118">Iteration #2 - Make the application look nice.</span></span> <span data-ttu-id="42e8a-119">En esta iteración, mejoramos la apariencia de la aplicación modificando la página maestra de vista de MVC predeterminada de ASP.NET y la hoja de estilos en cascada.</span><span class="sxs-lookup"><span data-stu-id="42e8a-119">In this iteration, we improve the appearance of the application by modifying the default ASP.NET MVC view master page and cascading style sheet.</span></span>

- <span data-ttu-id="42e8a-120">#3 de iteración: agregar validación de formulario.</span><span class="sxs-lookup"><span data-stu-id="42e8a-120">Iteration #3 - Add form validation.</span></span> <span data-ttu-id="42e8a-121">En la tercera iteración, agregamos la validación de formulario básica.</span><span class="sxs-lookup"><span data-stu-id="42e8a-121">In the third iteration, we add basic form validation.</span></span> <span data-ttu-id="42e8a-122">Impedimos que los usuarios envíen un formulario sin completar los campos de formulario necesarios.</span><span class="sxs-lookup"><span data-stu-id="42e8a-122">We prevent people from submitting a form without completing required form fields.</span></span> <span data-ttu-id="42e8a-123">También validamos las direcciones de correo electrónico y los números de teléfono.</span><span class="sxs-lookup"><span data-stu-id="42e8a-123">We also validate email addresses and phone numbers.</span></span>

- <span data-ttu-id="42e8a-124">#4 de iteración: hacer que la aplicación esté acoplada de forma flexible.</span><span class="sxs-lookup"><span data-stu-id="42e8a-124">Iteration #4 - Make the application loosely coupled.</span></span> <span data-ttu-id="42e8a-125">En esta cuarta iteración, se aprovechan varios patrones de diseño de software para facilitar el mantenimiento y la modificación de la aplicación Contact Manager.</span><span class="sxs-lookup"><span data-stu-id="42e8a-125">In this fourth iteration, we take advantage of several software design patterns to make it easier to maintain and modify the Contact Manager application.</span></span> <span data-ttu-id="42e8a-126">Por ejemplo, se refactoriza nuestra aplicación para usar el patrón de repositorio y el patrón de inserción de dependencias.</span><span class="sxs-lookup"><span data-stu-id="42e8a-126">For example, we refactor our application to use the Repository pattern and the Dependency Injection pattern.</span></span>

- <span data-ttu-id="42e8a-127">#5 de iteración: crear pruebas unitarias.</span><span class="sxs-lookup"><span data-stu-id="42e8a-127">Iteration #5 - Create unit tests.</span></span> <span data-ttu-id="42e8a-128">En la quinta iteración, se facilita el mantenimiento y la modificación de la aplicación mediante la adición de pruebas unitarias.</span><span class="sxs-lookup"><span data-stu-id="42e8a-128">In the fifth iteration, we make our application easier to maintain and modify by adding unit tests.</span></span> <span data-ttu-id="42e8a-129">Hemos simulado nuestras clases de modelo de datos y compilamos pruebas unitarias para nuestros controladores y la lógica de validación.</span><span class="sxs-lookup"><span data-stu-id="42e8a-129">We mock our data model classes and build unit tests for our controllers and validation logic.</span></span>

- <span data-ttu-id="42e8a-130">#6 de iteración: Use el desarrollo controlado por pruebas.</span><span class="sxs-lookup"><span data-stu-id="42e8a-130">Iteration #6 - Use test-driven development.</span></span> <span data-ttu-id="42e8a-131">En esta sexta iteración, agregamos una nueva funcionalidad a nuestra aplicación escribiendo primero las pruebas unitarias y escribiendo código en las pruebas unitarias.</span><span class="sxs-lookup"><span data-stu-id="42e8a-131">In this sixth iteration, we add new functionality to our application by writing unit tests first and writing code against the unit tests.</span></span> <span data-ttu-id="42e8a-132">En esta iteración, se agregan grupos de contactos.</span><span class="sxs-lookup"><span data-stu-id="42e8a-132">In this iteration, we add contact groups.</span></span>

- <span data-ttu-id="42e8a-133">#7 de iteración: agregar funcionalidad de Ajax.</span><span class="sxs-lookup"><span data-stu-id="42e8a-133">Iteration #7 - Add Ajax functionality.</span></span> <span data-ttu-id="42e8a-134">En la séptima iteración, se mejora la capacidad de respuesta y el rendimiento de la aplicación mediante la adición de compatibilidad con Ajax.</span><span class="sxs-lookup"><span data-stu-id="42e8a-134">In the seventh iteration, we improve the responsiveness and performance of our application by adding support for Ajax.</span></span>

## <a name="this-iteration"></a><span data-ttu-id="42e8a-135">Esta iteración</span><span class="sxs-lookup"><span data-stu-id="42e8a-135">This Iteration</span></span>

<span data-ttu-id="42e8a-136">En la iteración anterior de la aplicación Contact Manager, creamos pruebas unitarias para proporcionar una red de seguridad para el código.</span><span class="sxs-lookup"><span data-stu-id="42e8a-136">In the previous iteration of the Contact Manager application, we created unit tests to provide a safety net for our code.</span></span> <span data-ttu-id="42e8a-137">El motivo por el que se crean las pruebas unitarias era hacer que el código fuera más resistente a los cambios.</span><span class="sxs-lookup"><span data-stu-id="42e8a-137">The motivation for creating the unit tests was to make our code more resilient to change.</span></span> <span data-ttu-id="42e8a-138">Una vez realizadas las pruebas unitarias, podemos realizar cualquier cambio en nuestro código e saber inmediatamente si hemos interrumpido la funcionalidad existente.</span><span class="sxs-lookup"><span data-stu-id="42e8a-138">With unit tests in place, we can happily make any change to our code and immediately know whether we have broken existing functionality.</span></span>

<span data-ttu-id="42e8a-139">En esta iteración, usamos pruebas unitarias para un propósito totalmente diferente.</span><span class="sxs-lookup"><span data-stu-id="42e8a-139">In this iteration, we use unit tests for an entirely different purpose.</span></span> <span data-ttu-id="42e8a-140">En esta iteración, usamos pruebas unitarias como parte de una filosofía del diseño de aplicaciones denominada *desarrollo controlado por pruebas*.</span><span class="sxs-lookup"><span data-stu-id="42e8a-140">In this iteration, we use unit tests as part of an application design philosophy called *test-driven development*.</span></span> <span data-ttu-id="42e8a-141">Cuando se practica el desarrollo controlado por pruebas, se escriben primero las pruebas y, a continuación, se escribe código en las pruebas.</span><span class="sxs-lookup"><span data-stu-id="42e8a-141">When you practice test-driven development, you write tests first and then write code against the tests.</span></span>

<span data-ttu-id="42e8a-142">Más concretamente, cuando se practica el desarrollo controlado por pruebas, hay tres pasos que se completan al crear el código (rojo, verde o refactorizar):</span><span class="sxs-lookup"><span data-stu-id="42e8a-142">More precisely, when practicing test-driven development, there are three steps that you complete when creating code (Red/ Green/Refactor):</span></span>

1. <span data-ttu-id="42e8a-143">Escribir una prueba unitaria que produzca un error (rojo)</span><span class="sxs-lookup"><span data-stu-id="42e8a-143">Write a unit test that fails (Red)</span></span>
2. <span data-ttu-id="42e8a-144">Escribir código que pase la prueba unitaria (verde)</span><span class="sxs-lookup"><span data-stu-id="42e8a-144">Write code that passes the unit test (Green)</span></span>
3. <span data-ttu-id="42e8a-145">Refactorizar el código (refactorizar)</span><span class="sxs-lookup"><span data-stu-id="42e8a-145">Refactor your code (Refactor)</span></span>

<span data-ttu-id="42e8a-146">En primer lugar, escriba la prueba unitaria.</span><span class="sxs-lookup"><span data-stu-id="42e8a-146">First, you write the unit test.</span></span> <span data-ttu-id="42e8a-147">La prueba unitaria debe expresar su intención de cómo espera que se comporte el código.</span><span class="sxs-lookup"><span data-stu-id="42e8a-147">The unit test should express your intention for how you expect your code to behave.</span></span> <span data-ttu-id="42e8a-148">La primera vez que se crea la prueba unitaria, se debe producir un error en la prueba unitaria.</span><span class="sxs-lookup"><span data-stu-id="42e8a-148">When you first create the unit test, the unit test should fail.</span></span> <span data-ttu-id="42e8a-149">La prueba debe producir un error porque aún no ha escrito ningún código de aplicación que cumpla la prueba.</span><span class="sxs-lookup"><span data-stu-id="42e8a-149">The test should fail because you have not yet written any application code that satisfies the test.</span></span>

<span data-ttu-id="42e8a-150">A continuación, escriba un solo código suficiente para que la prueba unitaria se pase.</span><span class="sxs-lookup"><span data-stu-id="42e8a-150">Next, you write just enough code in order for the unit test to pass.</span></span> <span data-ttu-id="42e8a-151">El objetivo es escribir el código en Laziest, sloppiest y la manera más rápida posible.</span><span class="sxs-lookup"><span data-stu-id="42e8a-151">The goal is to write the code in the laziest, sloppiest and fastest possible way.</span></span> <span data-ttu-id="42e8a-152">No debe desperdiciar tiempo pensando en la arquitectura de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="42e8a-152">You should not waste time thinking about the architecture of your application.</span></span> <span data-ttu-id="42e8a-153">En su lugar, debe centrarse en escribir la cantidad mínima de código necesaria para satisfacer la intención expresada por la prueba unitaria.</span><span class="sxs-lookup"><span data-stu-id="42e8a-153">Instead, you should focus on writing the minimal amount of code necessary to satisfy the intention expressed by the unit test.</span></span>

<span data-ttu-id="42e8a-154">Por último, después de haber escrito suficiente código, puede depurar y tener en cuenta la arquitectura global de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="42e8a-154">Finally, after you have written enough code, you can step back and consider the overall architecture of your application.</span></span> <span data-ttu-id="42e8a-155">En este paso, se vuelve a escribir (refactorizar) el código mediante el uso de los patrones de diseño de software, como el patrón de repositorio, para que el código sea más fácil de mantener.</span><span class="sxs-lookup"><span data-stu-id="42e8a-155">In this step, you rewrite (refactor) your code by taking advantage of software design patterns -- such as the repository pattern -- so that your code is more maintainable.</span></span> <span data-ttu-id="42e8a-156">Puede sin miedo reescribir el código en este paso porque el código está incluido en las pruebas unitarias.</span><span class="sxs-lookup"><span data-stu-id="42e8a-156">You can fearlessly rewrite your code in this step because your code is covered by unit tests.</span></span>

<span data-ttu-id="42e8a-157">Hay muchas ventajas derivadas de la práctica del desarrollo controlado por pruebas.</span><span class="sxs-lookup"><span data-stu-id="42e8a-157">There are many benefits that result from practicing test-driven development.</span></span> <span data-ttu-id="42e8a-158">En primer lugar, el desarrollo controlado por pruebas obliga a centrarse en el código que realmente se necesita escribir.</span><span class="sxs-lookup"><span data-stu-id="42e8a-158">First, test-driven development forces you to focus on code that actually needs to be written.</span></span> <span data-ttu-id="42e8a-159">Dado que se centra constantemente en escribir suficiente código para pasar una prueba determinada, no se le impide atravesar las malas y escribir grandes cantidades de código que nunca usará.</span><span class="sxs-lookup"><span data-stu-id="42e8a-159">Because you are constantly focused on just writing enough code to pass a particular test, you are prevented from wandering into the weeds and writing massive amounts of code that you will never use.</span></span>

<span data-ttu-id="42e8a-160">En segundo lugar, una metodología de diseño "probar primero" obliga a escribir código desde la perspectiva de cómo se utilizará el código.</span><span class="sxs-lookup"><span data-stu-id="42e8a-160">Second, a "test first" design methodology forces you to write code from the perspective of how your code will be used.</span></span> <span data-ttu-id="42e8a-161">En otras palabras, al practicar el desarrollo controlado por pruebas, está escribiendo constantemente las pruebas desde la perspectiva del usuario.</span><span class="sxs-lookup"><span data-stu-id="42e8a-161">In other words, when practicing test-driven development, you are constantly writing your tests from a user perspective.</span></span> <span data-ttu-id="42e8a-162">Por lo tanto, el desarrollo controlado por pruebas puede dar lugar a API más claras y comprensibles.</span><span class="sxs-lookup"><span data-stu-id="42e8a-162">Therefore, test-driven development can result in cleaner and more understandable APIs.</span></span>

<span data-ttu-id="42e8a-163">Por último, el desarrollo controlado por pruebas obliga a escribir pruebas unitarias como parte del proceso normal de escritura de una aplicación.</span><span class="sxs-lookup"><span data-stu-id="42e8a-163">Finally, test-driven development forces you to write unit tests as part of the normal process of writing an application.</span></span> <span data-ttu-id="42e8a-164">A medida que los enfoques de fecha límite del proyecto, la prueba es normalmente lo primero que sale de la ventana.</span><span class="sxs-lookup"><span data-stu-id="42e8a-164">As a project deadline approaches, testing is typically the first thing that goes out the window.</span></span> <span data-ttu-id="42e8a-165">Por otro lado, al practicar el desarrollo controlado por pruebas, es más probable que se uso realmente virtuoso sobre la escritura de pruebas unitarias, ya que el desarrollo controlado por pruebas hace que las pruebas unitarias sean esenciales para el proceso de creación de una aplicación.</span><span class="sxs-lookup"><span data-stu-id="42e8a-165">When practicing test-driven development, on the other hand, you are more likely to be virtuous about writing unit tests because test-driven development makes unit tests central to the process of building an application.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="42e8a-166">Para obtener más información sobre el desarrollo controlado por pruebas, recomiendo que lea el libro de Michael plumas que **funciona de forma eficaz con el código heredado**.</span><span class="sxs-lookup"><span data-stu-id="42e8a-166">To learn more about test-driven development, I recommend that you read Michael Feathers book **Working Effectively with Legacy Code**.</span></span>

<span data-ttu-id="42e8a-167">En esta iteración, se agrega una nueva característica a nuestra aplicación Contact Manager.</span><span class="sxs-lookup"><span data-stu-id="42e8a-167">In this iteration, we add a new feature to our Contact Manager application.</span></span> <span data-ttu-id="42e8a-168">Agregamos compatibilidad con grupos de contactos.</span><span class="sxs-lookup"><span data-stu-id="42e8a-168">We add support for Contact Groups.</span></span> <span data-ttu-id="42e8a-169">Puede usar grupos de contactos para organizar los contactos en categorías como empresa y grupos de confianza.</span><span class="sxs-lookup"><span data-stu-id="42e8a-169">You can use Contact Groups to organize your contacts into categories such as Business and Friend groups.</span></span>

<span data-ttu-id="42e8a-170">Agregaremos esta nueva funcionalidad a nuestra aplicación siguiendo un proceso de desarrollo controlado por pruebas.</span><span class="sxs-lookup"><span data-stu-id="42e8a-170">We'll add this new functionality to our application by following a process of test-driven development.</span></span> <span data-ttu-id="42e8a-171">Escribiremos primero nuestras pruebas unitarias y escribiremos todo el código en estas pruebas.</span><span class="sxs-lookup"><span data-stu-id="42e8a-171">We'll write our unit tests first and we'll write all of our code against these tests.</span></span>

## <a name="what-gets-tested"></a><span data-ttu-id="42e8a-172">Qué se prueba</span><span class="sxs-lookup"><span data-stu-id="42e8a-172">What Gets Tested</span></span>

<span data-ttu-id="42e8a-173">Como se explicó en la iteración anterior, normalmente no se escriben pruebas unitarias para lógica de acceso a datos o lógica de vista.</span><span class="sxs-lookup"><span data-stu-id="42e8a-173">As we discussed in the previous iteration, you typically do not write unit tests for data access logic or view logic.</span></span> <span data-ttu-id="42e8a-174">No se escriben pruebas unitarias para la lógica de acceso a datos porque el acceso a una base de datos es una operación relativamente lenta.</span><span class="sxs-lookup"><span data-stu-id="42e8a-174">You don t write unit tests for data access logic because accessing a database is a relatively slow operation.</span></span> <span data-ttu-id="42e8a-175">No se escriben pruebas unitarias para la lógica de vista porque el acceso a una vista requiere la rotación de un servidor Web que es una operación relativamente lenta.</span><span class="sxs-lookup"><span data-stu-id="42e8a-175">You don t write unit tests for view logic because accessing a view requires spinning up a web server which is a relatively slow operation.</span></span> <span data-ttu-id="42e8a-176">No debe escribir una prueba unitaria a menos que la prueba se pueda ejecutar una y otra vez muy rápido.</span><span class="sxs-lookup"><span data-stu-id="42e8a-176">You shouldn't write a unit test unless the test can be executed over and over again very fast</span></span>

<span data-ttu-id="42e8a-177">Dado que el desarrollo controlado por pruebas está controlado por pruebas unitarias, nos centramos inicialmente en el controlador y la lógica de negocios.</span><span class="sxs-lookup"><span data-stu-id="42e8a-177">Because test-driven development is driven by unit tests, we focus initially on writing controller and business logic.</span></span> <span data-ttu-id="42e8a-178">Evitamos tocar la base de datos o las vistas.</span><span class="sxs-lookup"><span data-stu-id="42e8a-178">We avoid touching the database or views.</span></span> <span data-ttu-id="42e8a-179">No se modificará la base de datos ni se crearán las vistas hasta el final de este tutorial.</span><span class="sxs-lookup"><span data-stu-id="42e8a-179">We won't modify the database or create our views until the very end of this tutorial.</span></span> <span data-ttu-id="42e8a-180">Comenzamos con lo que se puede probar.</span><span class="sxs-lookup"><span data-stu-id="42e8a-180">We start with what can be tested.</span></span>

## <a name="creating-user-stories"></a><span data-ttu-id="42e8a-181">Creación de casos de usuario</span><span class="sxs-lookup"><span data-stu-id="42e8a-181">Creating User Stories</span></span>

<span data-ttu-id="42e8a-182">Al practicar el desarrollo controlado por pruebas, siempre se empieza por escribir una prueba.</span><span class="sxs-lookup"><span data-stu-id="42e8a-182">When practicing test-driven development, you always start by writing a test.</span></span> <span data-ttu-id="42e8a-183">Esto genera inmediatamente la pregunta: ¿cómo decide qué prueba escribir primero?</span><span class="sxs-lookup"><span data-stu-id="42e8a-183">This immediately raises the question: How do you decide what test to write first?</span></span> <span data-ttu-id="42e8a-184">Para responder a esta pregunta, debe escribir un conjunto de [**casos de usuario**](http://en.wikipedia.org/wiki/User_stories).</span><span class="sxs-lookup"><span data-stu-id="42e8a-184">To answer this question, you should write a set of [**user stories**](http://en.wikipedia.org/wiki/User_stories).</span></span>

<span data-ttu-id="42e8a-185">Un caso de usuario es una descripción breve (normalmente una oración) de un requisito de software.</span><span class="sxs-lookup"><span data-stu-id="42e8a-185">A user story is a very brief (usually one sentence) description of a software requirement.</span></span> <span data-ttu-id="42e8a-186">Debe ser una descripción no técnica de un requisito escrito desde la perspectiva del usuario.</span><span class="sxs-lookup"><span data-stu-id="42e8a-186">It should be a non-technical description of a requirement written from a user perspective.</span></span>

<span data-ttu-id="42e8a-187">Este es el conjunto de casos de usuario que describen las características requeridas por la nueva funcionalidad de grupo de contactos:</span><span class="sxs-lookup"><span data-stu-id="42e8a-187">Here s the set of user stories that describe the features required by the new Contact Group functionality:</span></span>

1. <span data-ttu-id="42e8a-188">El usuario puede ver una lista de grupos de contactos.</span><span class="sxs-lookup"><span data-stu-id="42e8a-188">User can view a list of contact groups.</span></span>
2. <span data-ttu-id="42e8a-189">El usuario puede crear un nuevo grupo de contactos.</span><span class="sxs-lookup"><span data-stu-id="42e8a-189">User can create a new contact group.</span></span>
3. <span data-ttu-id="42e8a-190">El usuario puede eliminar un grupo de contactos existente.</span><span class="sxs-lookup"><span data-stu-id="42e8a-190">User can delete an existing contact group.</span></span>
4. <span data-ttu-id="42e8a-191">El usuario puede seleccionar un grupo de contactos al crear un nuevo contacto.</span><span class="sxs-lookup"><span data-stu-id="42e8a-191">User can select a contact group when creating a new contact.</span></span>
5. <span data-ttu-id="42e8a-192">El usuario puede seleccionar un grupo de contactos al editar un contacto existente.</span><span class="sxs-lookup"><span data-stu-id="42e8a-192">User can select a contact group when editing an existing contact.</span></span>
6. <span data-ttu-id="42e8a-193">En la vista de índice se muestra una lista de grupos de contactos.</span><span class="sxs-lookup"><span data-stu-id="42e8a-193">A list of contact groups is displayed in the Index view.</span></span>
7. <span data-ttu-id="42e8a-194">Cuando un usuario hace clic en un grupo de contactos, se muestra una lista de contactos coincidentes.</span><span class="sxs-lookup"><span data-stu-id="42e8a-194">When a user clicks a contact group, a list of matching contacts is displayed.</span></span>

<span data-ttu-id="42e8a-195">Tenga en cuenta que la lista de casos de usuario es totalmente comprensible para un cliente.</span><span class="sxs-lookup"><span data-stu-id="42e8a-195">Notice that this list of user stories is completely understandable by a customer.</span></span> <span data-ttu-id="42e8a-196">No hay ninguna mención de los detalles de la implementación técnica.</span><span class="sxs-lookup"><span data-stu-id="42e8a-196">There is no mention of technical implementation details.</span></span>

<span data-ttu-id="42e8a-197">Aunque en el proceso de compilación de la aplicación, el conjunto de casos de usuario puede volverse más refinado.</span><span class="sxs-lookup"><span data-stu-id="42e8a-197">While in the process of building your application, the set of user stories can become more refined.</span></span> <span data-ttu-id="42e8a-198">Podría dividir un caso de usuario en varios casos (requisitos).</span><span class="sxs-lookup"><span data-stu-id="42e8a-198">You might break a user story into multiple stories (requirements).</span></span> <span data-ttu-id="42e8a-199">Por ejemplo, podría decidir que la creación de un nuevo grupo de contactos debe implicar la validación.</span><span class="sxs-lookup"><span data-stu-id="42e8a-199">For example, you might decide that creating a new contact group should involve validation.</span></span> <span data-ttu-id="42e8a-200">El envío de un grupo de contactos sin nombre debe devolver un error de validación.</span><span class="sxs-lookup"><span data-stu-id="42e8a-200">Submitting a contact group without a name should return a validation error.</span></span>

<span data-ttu-id="42e8a-201">Después de crear una lista de casos de usuario, está listo para escribir su primera prueba unitaria.</span><span class="sxs-lookup"><span data-stu-id="42e8a-201">After you create a list of user stories, you are ready to write your first unit test.</span></span> <span data-ttu-id="42e8a-202">Comenzaremos por crear una prueba unitaria para ver la lista de grupos de contactos.</span><span class="sxs-lookup"><span data-stu-id="42e8a-202">We'll start by creating a unit test for viewing the list of contact groups.</span></span>

## <a name="listing-contact-groups"></a><span data-ttu-id="42e8a-203">Enumerar grupos de contactos</span><span class="sxs-lookup"><span data-stu-id="42e8a-203">Listing Contact Groups</span></span>

<span data-ttu-id="42e8a-204">Nuestro primer caso de usuario es que un usuario debe ser capaz de ver una lista de grupos de contactos.</span><span class="sxs-lookup"><span data-stu-id="42e8a-204">Our first user story is that a user should be able to view a list of contact groups.</span></span> <span data-ttu-id="42e8a-205">Necesitamos expresar este caso con una prueba.</span><span class="sxs-lookup"><span data-stu-id="42e8a-205">We need to express this story with a test.</span></span>

<span data-ttu-id="42e8a-206">Cree una nueva prueba unitaria haciendo clic con el botón derecho en la carpeta Controllers del proyecto ContactManager. tests, seleccionando **Agregar, nueva prueba**y seleccionando la plantilla de **prueba unitaria** (consulte la figura 1).</span><span class="sxs-lookup"><span data-stu-id="42e8a-206">Create a new unit test by right-clicking the Controllers folder in the ContactManager.Tests project, selecting **Add, New Test**, and selecting the **Unit Test** template (see Figure 1).</span></span> <span data-ttu-id="42e8a-207">Asigne a la nueva prueba unitaria el nombre GroupControllerTest.cs y haga clic en el botón **Aceptar** .</span><span class="sxs-lookup"><span data-stu-id="42e8a-207">Name the new unit test GroupControllerTest.cs and click the **OK** button.</span></span>

<span data-ttu-id="42e8a-208">[![agregar la prueba unitaria GroupControllerTest](iteration-6-use-test-driven-development-cs/_static/image1.jpg)](iteration-6-use-test-driven-development-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="42e8a-208">[![Adding the GroupControllerTest unit test](iteration-6-use-test-driven-development-cs/_static/image1.jpg)](iteration-6-use-test-driven-development-cs/_static/image1.png)</span></span>

<span data-ttu-id="42e8a-209">**Figura 01**: adición de la prueba unitaria GroupControllerTest ([haga clic para ver la imagen de tamaño completo](iteration-6-use-test-driven-development-cs/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="42e8a-209">**Figure 01**: Adding the GroupControllerTest unit test([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image2.png))</span></span>

<span data-ttu-id="42e8a-210">La primera prueba unitaria está incluida en la lista 1.</span><span class="sxs-lookup"><span data-stu-id="42e8a-210">Our first unit test is contained in Listing 1.</span></span> <span data-ttu-id="42e8a-211">Esta prueba comprueba que el método index () del controlador de grupo devuelve un conjunto de grupos.</span><span class="sxs-lookup"><span data-stu-id="42e8a-211">This test verifies that the Index() method of the Group controller returns a set of Groups.</span></span> <span data-ttu-id="42e8a-212">La prueba comprueba que se devuelve una colección de grupos en los datos de la vista.</span><span class="sxs-lookup"><span data-stu-id="42e8a-212">The test verifies that a collection of Groups is returned in view data.</span></span>

<span data-ttu-id="42e8a-213">**Lista 1-Controllers\GroupControllerTest.cs**</span><span class="sxs-lookup"><span data-stu-id="42e8a-213">**Listing 1 - Controllers\GroupControllerTest.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample1.cs)]

<span data-ttu-id="42e8a-214">La primera vez que escriba el código en la lista 1 de Visual Studio, obtendrá una gran cantidad de líneas onduladas rojas.</span><span class="sxs-lookup"><span data-stu-id="42e8a-214">When you first type the code in Listing 1 in Visual Studio, you'll get a lot of red squiggly lines.</span></span> <span data-ttu-id="42e8a-215">No hemos creado las clases GroupController o Group.</span><span class="sxs-lookup"><span data-stu-id="42e8a-215">We have not created the GroupController or Group classes.</span></span>

<span data-ttu-id="42e8a-216">En este momento, podemos compilar la aplicación para que se pueda ejecutar la primera prueba unitaria.</span><span class="sxs-lookup"><span data-stu-id="42e8a-216">At this point, we can t even build our application so we can t execute our first unit test.</span></span> <span data-ttu-id="42e8a-217">Eso es bueno.</span><span class="sxs-lookup"><span data-stu-id="42e8a-217">That s good.</span></span> <span data-ttu-id="42e8a-218">Esto cuenta como una prueba con errores.</span><span class="sxs-lookup"><span data-stu-id="42e8a-218">That counts as a failing test.</span></span> <span data-ttu-id="42e8a-219">Por lo tanto, ahora tenemos permiso para empezar a escribir el código de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="42e8a-219">Therefore, we now have permission to start writing application code.</span></span> <span data-ttu-id="42e8a-220">Necesitamos escribir código suficiente para ejecutar la prueba.</span><span class="sxs-lookup"><span data-stu-id="42e8a-220">We need to write enough code to execute our test.</span></span>

<span data-ttu-id="42e8a-221">La clase de controlador de grupo de la lista 2 contiene el mínimo de código necesario para pasar la prueba unitaria.</span><span class="sxs-lookup"><span data-stu-id="42e8a-221">The Group controller class in Listing 2 contains the bare minimum of code required to pass the unit test.</span></span> <span data-ttu-id="42e8a-222">La acción index () devuelve una lista de grupos codificada estáticamente (la clase Group se define en la lista 3).</span><span class="sxs-lookup"><span data-stu-id="42e8a-222">The Index() action returns a statically coded list of Groups (the Group class is defined in Listing 3).</span></span>

<span data-ttu-id="42e8a-223">**Lista 2-Controllers\GroupController.cs**</span><span class="sxs-lookup"><span data-stu-id="42e8a-223">**Listing 2 - Controllers\GroupController.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample2.cs)]

<span data-ttu-id="42e8a-224">**Lista 3: Models\Group.cs**</span><span class="sxs-lookup"><span data-stu-id="42e8a-224">**Listing 3 - Models\Group.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample3.cs)]

<span data-ttu-id="42e8a-225">Después de agregar las clases GroupController y Group a nuestro proyecto, nuestra primera prueba unitaria se completa correctamente (consulte la figura 2).</span><span class="sxs-lookup"><span data-stu-id="42e8a-225">After we add the GroupController and Group classes to our project, our first unit test completes successfully (see Figure 2).</span></span> <span data-ttu-id="42e8a-226">Hemos realizado el mínimo trabajo necesario para pasar la prueba.</span><span class="sxs-lookup"><span data-stu-id="42e8a-226">We have done the minimum work required to pass the test.</span></span> <span data-ttu-id="42e8a-227">Es el momento de celebrarlo.</span><span class="sxs-lookup"><span data-stu-id="42e8a-227">It is time to celebrate.</span></span>

<span data-ttu-id="42e8a-228">[![correcto.](iteration-6-use-test-driven-development-cs/_static/image2.jpg)](iteration-6-use-test-driven-development-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="42e8a-228">[![Success!](iteration-6-use-test-driven-development-cs/_static/image2.jpg)](iteration-6-use-test-driven-development-cs/_static/image3.png)</span></span>

<span data-ttu-id="42e8a-229">**Figura 02**: correcto. ([Haga clic para ver la imagen de tamaño completo](iteration-6-use-test-driven-development-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="42e8a-229">**Figure 02**: Success!([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image4.png))</span></span>

## <a name="creating-contact-groups"></a><span data-ttu-id="42e8a-230">Crear grupos de contactos</span><span class="sxs-lookup"><span data-stu-id="42e8a-230">Creating Contact Groups</span></span>

<span data-ttu-id="42e8a-231">Ahora podemos pasar al segundo caso de usuario.</span><span class="sxs-lookup"><span data-stu-id="42e8a-231">Now we can move on to the second user story.</span></span> <span data-ttu-id="42e8a-232">Es necesario poder crear nuevos grupos de contactos.</span><span class="sxs-lookup"><span data-stu-id="42e8a-232">We need to be able to create new contact groups.</span></span> <span data-ttu-id="42e8a-233">Necesitamos expresar esta intención con una prueba.</span><span class="sxs-lookup"><span data-stu-id="42e8a-233">We need to express this intention with a test.</span></span>

<span data-ttu-id="42e8a-234">La prueba de la lista 4 comprueba que la llamada al método Create () con un nuevo grupo agrega el grupo a la lista de grupos devueltos por el método index ().</span><span class="sxs-lookup"><span data-stu-id="42e8a-234">The test in Listing 4 verifies that calling the Create() method with a new Group adds the Group to the list of Groups returned by the Index() method.</span></span> <span data-ttu-id="42e8a-235">En otras palabras, si creo un nuevo grupo, debería poder volver a obtener el nuevo grupo desde la lista de grupos devueltos por el método index ().</span><span class="sxs-lookup"><span data-stu-id="42e8a-235">In other words, if I create a new group then I should be able to get the new Group back from the list of Groups returned by the Index() method.</span></span>

<span data-ttu-id="42e8a-236">**Lista 4: Controllers\GroupControllerTest.cs**</span><span class="sxs-lookup"><span data-stu-id="42e8a-236">**Listing 4 - Controllers\GroupControllerTest.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample4.cs)]

<span data-ttu-id="42e8a-237">La prueba de la lista 4 llama al método Create () del controlador de grupo con un nuevo grupo de contactos.</span><span class="sxs-lookup"><span data-stu-id="42e8a-237">The test in Listing 4 calls the Group controller Create() method with a new contact Group.</span></span> <span data-ttu-id="42e8a-238">A continuación, la prueba comprueba que la llamada al método Group Controller index () devuelve el nuevo grupo en los datos de la vista.</span><span class="sxs-lookup"><span data-stu-id="42e8a-238">Next, the test verifies that calling the Group controller Index() method returns the new Group in view data.</span></span>

<span data-ttu-id="42e8a-239">El controlador de grupo modificado de la lista 5 contiene el mínimo de cambios necesarios para pasar la nueva prueba.</span><span class="sxs-lookup"><span data-stu-id="42e8a-239">The modified Group controller in Listing 5 contains the bare minimum of changes required to pass the new test.</span></span>

<span data-ttu-id="42e8a-240">**Lista 5-Controllers\GroupController.cs**</span><span class="sxs-lookup"><span data-stu-id="42e8a-240">**Listing 5 - Controllers\GroupController.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample5.cs)]

## <a name="the-group-controller-in-listing-5-has-a-new-create-action-this-action-adds-a-group-to-a-collection-of-groups-notice-that-the-index-action-has-been-modified-to-return-the-contents-of-the-collection-of-groups"></a><span data-ttu-id="42e8a-241">El controlador de grupo de la lista 5 tiene una nueva acción Create ().</span><span class="sxs-lookup"><span data-stu-id="42e8a-241">The Group controller in Listing 5 has a new Create() action.</span></span> <span data-ttu-id="42e8a-242">Esta acción agrega un grupo a una colección de grupos.</span><span class="sxs-lookup"><span data-stu-id="42e8a-242">This action adds a Group to a collection of Groups.</span></span> <span data-ttu-id="42e8a-243">Observe que la acción index () se ha modificado para devolver el contenido de la colección de grupos.</span><span class="sxs-lookup"><span data-stu-id="42e8a-243">Notice that the Index() action has been modified to return the contents of the collection of Groups.</span></span>

<span data-ttu-id="42e8a-244">Una vez más, hemos realizado la cantidad mínima de trabajo necesaria para pasar la prueba unitaria.</span><span class="sxs-lookup"><span data-stu-id="42e8a-244">Once again, we have performed the bare minimum amount of work required to pass the unit test.</span></span> <span data-ttu-id="42e8a-245">Después de realizar estos cambios en el controlador de grupo, todas nuestras pruebas unitarias pasan.</span><span class="sxs-lookup"><span data-stu-id="42e8a-245">After we make these changes to the Group controller, all of our unit tests pass.</span></span>

## <a name="adding-validation"></a><span data-ttu-id="42e8a-246">Adición de validación</span><span class="sxs-lookup"><span data-stu-id="42e8a-246">Adding Validation</span></span>

<span data-ttu-id="42e8a-247">Este requisito no se indicó explícitamente en el caso de usuario.</span><span class="sxs-lookup"><span data-stu-id="42e8a-247">This requirement was not stated explicitly in the user story.</span></span> <span data-ttu-id="42e8a-248">Sin embargo, es razonable requerir que un grupo tenga un nombre.</span><span class="sxs-lookup"><span data-stu-id="42e8a-248">However, it is reasonable to require that a Group have a name.</span></span> <span data-ttu-id="42e8a-249">De lo contrario, la organización de contactos en grupos no sería muy útil.</span><span class="sxs-lookup"><span data-stu-id="42e8a-249">Otherwise, organizing contacts into Groups would not be very useful.</span></span>

<span data-ttu-id="42e8a-250">La lista 6 contiene una nueva prueba que expresa esta intención.</span><span class="sxs-lookup"><span data-stu-id="42e8a-250">Listing 6 contains a new test that expresses this intention.</span></span> <span data-ttu-id="42e8a-251">Esta prueba comprueba que al intentar crear un grupo sin proporcionar un nombre se genera un mensaje de error de validación en el estado del modelo.</span><span class="sxs-lookup"><span data-stu-id="42e8a-251">This test verifies that attempting to create a Group without supplying a name results in a validation error message in model state.</span></span>

<span data-ttu-id="42e8a-252">**Listado 6-Controllers\GroupControllerTest.cs**</span><span class="sxs-lookup"><span data-stu-id="42e8a-252">**Listing 6 - Controllers\GroupControllerTest.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample6.cs)]

<span data-ttu-id="42e8a-253">Para satisfacer esta prueba, es necesario agregar una propiedad Name a nuestra clase Group (consulte la lista 7).</span><span class="sxs-lookup"><span data-stu-id="42e8a-253">In order to satisfy this test, we need to add a Name property to our Group class (see Listing 7).</span></span> <span data-ttu-id="42e8a-254">Además, es necesario agregar una pequeña parte de la lógica de validación a nuestra acción de creación () del controlador de grupo (consulte la lista 8).</span><span class="sxs-lookup"><span data-stu-id="42e8a-254">Furthermore, we need to add a tiny bit of validation logic to our Group controller s Create() action (see Listing 8).</span></span>

<span data-ttu-id="42e8a-255">**Listado 7-Models\Group.cs**</span><span class="sxs-lookup"><span data-stu-id="42e8a-255">**Listing 7 - Models\Group.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample7.cs)]

<span data-ttu-id="42e8a-256">**Lista 8-Controllers\GroupController.cs**</span><span class="sxs-lookup"><span data-stu-id="42e8a-256">**Listing 8 - Controllers\GroupController.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample8.cs)]

<span data-ttu-id="42e8a-257">Tenga en cuenta que la acción de creación () del controlador de grupo ahora contiene la validación y la lógica de base de datos.</span><span class="sxs-lookup"><span data-stu-id="42e8a-257">Notice that the Group controller Create() action now contains both validation and database logic.</span></span> <span data-ttu-id="42e8a-258">Actualmente, la base de datos utilizada por el controlador de grupo no está formada por nada más que una colección en memoria.</span><span class="sxs-lookup"><span data-stu-id="42e8a-258">Currently, the database used by the Group controller consists of nothing more than an in-memory collection.</span></span>

## <a name="time-to-refactor"></a><span data-ttu-id="42e8a-259">Tiempo para refactorizar</span><span class="sxs-lookup"><span data-stu-id="42e8a-259">Time to Refactor</span></span>

<span data-ttu-id="42e8a-260">El tercer paso en rojo/verde/refactorizar es la parte del refactorización.</span><span class="sxs-lookup"><span data-stu-id="42e8a-260">The third step in Red/Green/Refactor is the Refactor part.</span></span> <span data-ttu-id="42e8a-261">Llegados a este punto, necesitamos devolverlo de nuestro código y considerar cómo podemos refactorizar la aplicación para mejorar su diseño.</span><span class="sxs-lookup"><span data-stu-id="42e8a-261">At this point, we need to step back from our code and consider how we can refactor our application to improve its design.</span></span> <span data-ttu-id="42e8a-262">La fase de refactorización es la fase en la que pensamos en la mejor manera de implementar los principios y patrones de diseño de software.</span><span class="sxs-lookup"><span data-stu-id="42e8a-262">The Refactor stage is the stage at which we think hard about the best way of implementing software design principles and patterns.</span></span>

<span data-ttu-id="42e8a-263">Tenemos la posibilidad de modificar el código de cualquier manera que elijamos para mejorar el diseño del código.</span><span class="sxs-lookup"><span data-stu-id="42e8a-263">We are free to modify our code in any way that we choose to improve the design of the code.</span></span> <span data-ttu-id="42e8a-264">Tenemos una red de seguridad de pruebas unitarias que nos impiden interrumpir la funcionalidad existente.</span><span class="sxs-lookup"><span data-stu-id="42e8a-264">We have a safety net of unit tests that prevent us from breaking existing functionality.</span></span>

<span data-ttu-id="42e8a-265">En este momento, el controlador de grupo es un desastre desde la perspectiva del buen diseño de software.</span><span class="sxs-lookup"><span data-stu-id="42e8a-265">Right now, our Group controller is a mess from the perspective of good software design.</span></span> <span data-ttu-id="42e8a-266">El controlador de grupo contiene un desenredado de la validación y el código de acceso a datos.</span><span class="sxs-lookup"><span data-stu-id="42e8a-266">The Group controller contains a tangled mess of validation and data access code.</span></span> <span data-ttu-id="42e8a-267">Para evitar infringir el principio de responsabilidad única, es necesario separar estas preocupaciones en clases diferentes.</span><span class="sxs-lookup"><span data-stu-id="42e8a-267">To avoid violating the Single Responsibility Principle, we need to separate these concerns into different classes.</span></span>

<span data-ttu-id="42e8a-268">Nuestra clase de controlador de grupo refactorizada se incluye en la lista 9.</span><span class="sxs-lookup"><span data-stu-id="42e8a-268">Our refactored Group controller class is contained in Listing 9.</span></span> <span data-ttu-id="42e8a-269">El controlador se ha modificado para usar el nivel de servicio ContactManager.</span><span class="sxs-lookup"><span data-stu-id="42e8a-269">The controller has been modified to use the ContactManager service layer.</span></span> <span data-ttu-id="42e8a-270">Este es el mismo nivel de servicio que usamos con el controlador de contactos.</span><span class="sxs-lookup"><span data-stu-id="42e8a-270">This is the same service layer that we use with the Contact controller.</span></span>

<span data-ttu-id="42e8a-271">La lista 10 contiene los nuevos métodos agregados a la capa de servicio de ContactManager para admitir la validación, la enumeración y la creación de grupos.</span><span class="sxs-lookup"><span data-stu-id="42e8a-271">Listing 10 contains the new methods added to the ContactManager service layer to support validating, listing, and creating groups.</span></span> <span data-ttu-id="42e8a-272">La interfaz IContactManagerService se actualizó para incluir los nuevos métodos.</span><span class="sxs-lookup"><span data-stu-id="42e8a-272">The IContactManagerService interface was updated to include the new methods.</span></span>

<span data-ttu-id="42e8a-273">La lista 11 contiene una nueva clase FakeContactManagerRepository que implementa la interfaz IContactManagerRepository.</span><span class="sxs-lookup"><span data-stu-id="42e8a-273">Listing 11 contains a new FakeContactManagerRepository class that implements the IContactManagerRepository interface.</span></span> <span data-ttu-id="42e8a-274">A diferencia de la clase EntityContactManagerRepository que también implementa la interfaz IContactManagerRepository, nuestra nueva clase FakeContactManagerRepository no se comunica con la base de datos.</span><span class="sxs-lookup"><span data-stu-id="42e8a-274">Unlike the EntityContactManagerRepository class that also implements the IContactManagerRepository interface, our new FakeContactManagerRepository class does not communicate with the database.</span></span> <span data-ttu-id="42e8a-275">La clase FakeContactManagerRepository usa una colección en memoria como proxy para la base de datos.</span><span class="sxs-lookup"><span data-stu-id="42e8a-275">The FakeContactManagerRepository class uses an in-memory collection as a proxy for the database.</span></span> <span data-ttu-id="42e8a-276">Usaremos esta clase en nuestras pruebas unitarias como una capa de repositorio falsa.</span><span class="sxs-lookup"><span data-stu-id="42e8a-276">We'll use this class in our unit tests as a fake repository layer.</span></span>

<span data-ttu-id="42e8a-277">**Lista 9-Controllers\GroupController.cs**</span><span class="sxs-lookup"><span data-stu-id="42e8a-277">**Listing 9 - Controllers\GroupController.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample9.cs)]

<span data-ttu-id="42e8a-278">**Listado 10: Controllers\ContactManagerService.cs**</span><span class="sxs-lookup"><span data-stu-id="42e8a-278">**Listing 10 - Controllers\ContactManagerService.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample10.cs)]

<span data-ttu-id="42e8a-279">**Listado 11-Controllers\FakeContactManagerRepository.cs**</span><span class="sxs-lookup"><span data-stu-id="42e8a-279">**Listing 11 - Controllers\FakeContactManagerRepository.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample11.cs)]

<span data-ttu-id="42e8a-280">La modificación de la interfaz IContactManagerRepository requiere el uso de para implementar los métodos CreateGroup () y ListGroups () en la clase EntityContactManagerRepository.</span><span class="sxs-lookup"><span data-stu-id="42e8a-280">Modifying the IContactManagerRepository interface requires use to implement the CreateGroup() and ListGroups() methods in the EntityContactManagerRepository class.</span></span> <span data-ttu-id="42e8a-281">La forma más rápida y Laziest de hacerlo es agregar métodos de código auxiliar que tengan el aspecto siguiente:</span><span class="sxs-lookup"><span data-stu-id="42e8a-281">The laziest and fastest way to do this is to add stub methods that look like this:</span></span>   

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample12.cs)]

<span data-ttu-id="42e8a-282">Por último, estos cambios en el diseño de nuestra aplicación requieren realizar algunas modificaciones en nuestras pruebas unitarias.</span><span class="sxs-lookup"><span data-stu-id="42e8a-282">Finally, these changes to the design of our application require us to make some modifications to our unit tests.</span></span> <span data-ttu-id="42e8a-283">Ahora es necesario usar FakeContactManagerRepository al realizar las pruebas unitarias.</span><span class="sxs-lookup"><span data-stu-id="42e8a-283">We now need to use the FakeContactManagerRepository when performing the unit tests.</span></span> <span data-ttu-id="42e8a-284">La clase GroupControllerTest actualizada está incluida en la lista 12.</span><span class="sxs-lookup"><span data-stu-id="42e8a-284">The updated GroupControllerTest class is contained in Listing 12.</span></span>

<span data-ttu-id="42e8a-285">**Listado 12-Controllers\GroupControllerTest.cs**</span><span class="sxs-lookup"><span data-stu-id="42e8a-285">**Listing 12 - Controllers\GroupControllerTest.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample13.cs)]

<span data-ttu-id="42e8a-286">Después de realizar todos estos cambios, una vez más, todas nuestras pruebas unitarias pasan.</span><span class="sxs-lookup"><span data-stu-id="42e8a-286">After we make all of these changes, once again, all of our unit tests pass.</span></span> <span data-ttu-id="42e8a-287">Hemos completado todo el ciclo de rojo, verde y refactorización.</span><span class="sxs-lookup"><span data-stu-id="42e8a-287">We have completed the entire cycle of Red/Green/Refactor.</span></span> <span data-ttu-id="42e8a-288">Hemos implementado los dos primeros casos de usuario.</span><span class="sxs-lookup"><span data-stu-id="42e8a-288">We have implemented the first two user stories.</span></span> <span data-ttu-id="42e8a-289">Ahora tenemos compatibilidad con pruebas unitarias para los requisitos expresados en los casos de usuario.</span><span class="sxs-lookup"><span data-stu-id="42e8a-289">We now have supporting unit tests for the requirements expressed in the user stories.</span></span> <span data-ttu-id="42e8a-290">Implementar el resto de los casos de usuario implica repetir el mismo ciclo de rojo, verde y refactorización.</span><span class="sxs-lookup"><span data-stu-id="42e8a-290">Implementing the remainder of the user stories involves repeating the same cycle of Red/Green/Refactor.</span></span>

## <a name="modifying-our-database"></a><span data-ttu-id="42e8a-291">Modificar nuestra base de datos</span><span class="sxs-lookup"><span data-stu-id="42e8a-291">Modifying our Database</span></span>

<span data-ttu-id="42e8a-292">Desafortunadamente, aunque hemos satisfecho todos los requisitos expresados por nuestras pruebas unitarias, nuestro trabajo no se realiza.</span><span class="sxs-lookup"><span data-stu-id="42e8a-292">Unfortunately, even though we have satisfied all of the requirements expressed by our unit tests, our work is not done.</span></span> <span data-ttu-id="42e8a-293">Todavía necesitamos modificar nuestra base de datos.</span><span class="sxs-lookup"><span data-stu-id="42e8a-293">We still need to modify our database.</span></span>

<span data-ttu-id="42e8a-294">Necesitamos crear una nueva tabla de base de datos de grupo.</span><span class="sxs-lookup"><span data-stu-id="42e8a-294">We need to create a new Group database table.</span></span> <span data-ttu-id="42e8a-295">Siga estos pasos:</span><span class="sxs-lookup"><span data-stu-id="42e8a-295">Follow these steps:</span></span>

1. <span data-ttu-id="42e8a-296">En la ventana de Explorador de servidores, haga clic con el botón secundario en la carpeta tablas y seleccione la opción de menú **Agregar nueva tabla**.</span><span class="sxs-lookup"><span data-stu-id="42e8a-296">In the Server Explorer window, right-click the Tables folder and select the menu option **Add New Table**.</span></span>
2. <span data-ttu-id="42e8a-297">Escriba las dos columnas que se describen a continuación en el Diseñador de tablas.</span><span class="sxs-lookup"><span data-stu-id="42e8a-297">Enter the two columns described below in the Table Designer.</span></span>
3. <span data-ttu-id="42e8a-298">Marque la columna ID como una clave principal y una columna de identidad.</span><span class="sxs-lookup"><span data-stu-id="42e8a-298">Mark the Id column as a primary key and Identity column.</span></span>
4. <span data-ttu-id="42e8a-299">Guarde la nueva tabla con los grupos de nombres haciendo clic en el icono del disquete.</span><span class="sxs-lookup"><span data-stu-id="42e8a-299">Save the new table with the name Groups by clicking the icon of the floppy.</span></span>

<a id="0.11_table01"></a>

| <span data-ttu-id="42e8a-300">**Nombre de la columna**</span><span class="sxs-lookup"><span data-stu-id="42e8a-300">**Column Name**</span></span> | <span data-ttu-id="42e8a-301">**Tipo de datos**</span><span class="sxs-lookup"><span data-stu-id="42e8a-301">**Data Type**</span></span> | <span data-ttu-id="42e8a-302">**Permitir valores NULL**</span><span class="sxs-lookup"><span data-stu-id="42e8a-302">**Allow Nulls**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="42e8a-303">Id.</span><span class="sxs-lookup"><span data-stu-id="42e8a-303">Id</span></span> | <span data-ttu-id="42e8a-304">int</span><span class="sxs-lookup"><span data-stu-id="42e8a-304">int</span></span> | <span data-ttu-id="42e8a-305">False</span><span class="sxs-lookup"><span data-stu-id="42e8a-305">False</span></span> |
| <span data-ttu-id="42e8a-306">Name</span><span class="sxs-lookup"><span data-stu-id="42e8a-306">Name</span></span> | <span data-ttu-id="42e8a-307">nvarchar(50)</span><span class="sxs-lookup"><span data-stu-id="42e8a-307">nvarchar(50)</span></span> | <span data-ttu-id="42e8a-308">False</span><span class="sxs-lookup"><span data-stu-id="42e8a-308">False</span></span> |

<span data-ttu-id="42e8a-309">A continuación, es necesario eliminar todos los datos de la tabla contactos (de lo contrario, no se podrá crear una relación entre las tablas contactos y grupos).</span><span class="sxs-lookup"><span data-stu-id="42e8a-309">Next, we need to delete all of the data from the Contacts table (otherwise, we won't be able to create a relationship between the Contacts and Groups tables).</span></span> <span data-ttu-id="42e8a-310">Siga estos pasos:</span><span class="sxs-lookup"><span data-stu-id="42e8a-310">Follow these steps:</span></span>

1. <span data-ttu-id="42e8a-311">Haga clic con el botón secundario en la tabla contactos y seleccione la opción de menú **Mostrar datos**de la tabla.</span><span class="sxs-lookup"><span data-stu-id="42e8a-311">Right-click the Contacts table and select the menu option **Show Table Data**.</span></span>
2. <span data-ttu-id="42e8a-312">Elimine todas las filas.</span><span class="sxs-lookup"><span data-stu-id="42e8a-312">Delete all of the rows.</span></span>

<span data-ttu-id="42e8a-313">A continuación, es necesario definir una relación entre la tabla de base de datos de grupos y la tabla de base de datos de contactos existente.</span><span class="sxs-lookup"><span data-stu-id="42e8a-313">Next, we need to define a relationship between the Groups database table and the existing Contacts database table.</span></span> <span data-ttu-id="42e8a-314">Siga estos pasos:</span><span class="sxs-lookup"><span data-stu-id="42e8a-314">Follow these steps:</span></span>

1. <span data-ttu-id="42e8a-315">Haga doble clic en la tabla contactos de la ventana Explorador de servidores para abrir el Diseñador de tablas.</span><span class="sxs-lookup"><span data-stu-id="42e8a-315">Double-click the Contacts table in the Server Explorer window to open the Table Designer.</span></span>
2. <span data-ttu-id="42e8a-316">Agregue una nueva columna de tipo entero a la tabla Contacts denominada GroupId.</span><span class="sxs-lookup"><span data-stu-id="42e8a-316">Add a new integer column to the Contacts table named GroupId.</span></span>
3. <span data-ttu-id="42e8a-317">Haga clic en el botón relación para abrir el cuadro de diálogo relaciones de clave externa (vea la figura 3).</span><span class="sxs-lookup"><span data-stu-id="42e8a-317">Click the Relationship button to open the Foreign Key Relationships dialog (see Figure 3).</span></span>
4. <span data-ttu-id="42e8a-318">Haga clic en el botón Agregar.</span><span class="sxs-lookup"><span data-stu-id="42e8a-318">Click the Add button.</span></span>
5. <span data-ttu-id="42e8a-319">Haga clic en el botón de puntos suspensivos que aparece junto al botón especificación de tabla y columnas.</span><span class="sxs-lookup"><span data-stu-id="42e8a-319">Click the ellipsis button that appears next to the Table and Columns Specification button.</span></span>
6. <span data-ttu-id="42e8a-320">En el cuadro de diálogo tablas y columnas, seleccione grupos como tabla de clave principal e identificador como columna de clave principal.</span><span class="sxs-lookup"><span data-stu-id="42e8a-320">In the Tables and Columns dialog, select Groups as the primary key table and Id as the primary key column.</span></span> <span data-ttu-id="42e8a-321">Seleccione contactos como tabla de clave externa y GroupId como columna de clave externa (consulte la figura 4).</span><span class="sxs-lookup"><span data-stu-id="42e8a-321">Select Contacts as the foreign key table and GroupId as the foreign key column (see Figure 4).</span></span> <span data-ttu-id="42e8a-322">Haga clic en el botón Aceptar.</span><span class="sxs-lookup"><span data-stu-id="42e8a-322">Click the OK button.</span></span>
7. <span data-ttu-id="42e8a-323">En **especificación de inserción y actualización**, seleccione el valor **en cascada** para **eliminar regla**.</span><span class="sxs-lookup"><span data-stu-id="42e8a-323">Under **INSERT and UPDATE Specification**, select the value **Cascade** for **Delete Rule**.</span></span>
8. <span data-ttu-id="42e8a-324">Haga clic en el botón Cerrar para cerrar el cuadro de diálogo relaciones de clave externa.</span><span class="sxs-lookup"><span data-stu-id="42e8a-324">Click the Close button to close the Foreign Key Relationships dialog.</span></span>
9. <span data-ttu-id="42e8a-325">Haga clic en el botón Guardar para guardar los cambios en la tabla contactos.</span><span class="sxs-lookup"><span data-stu-id="42e8a-325">Click the Save button to save the changes to the Contacts table.</span></span>

<span data-ttu-id="42e8a-326">[![crear una relación de tabla de base de datos](iteration-6-use-test-driven-development-cs/_static/image3.jpg)](iteration-6-use-test-driven-development-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="42e8a-326">[![Creating a database table relationship](iteration-6-use-test-driven-development-cs/_static/image3.jpg)](iteration-6-use-test-driven-development-cs/_static/image5.png)</span></span>

<span data-ttu-id="42e8a-327">**Figura 03**: creación de una relación de tabla de base de datos ([haga clic para ver la imagen de tamaño completo](iteration-6-use-test-driven-development-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="42e8a-327">**Figure 03**: Creating a database table relationship ([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image6.png))</span></span>

<span data-ttu-id="42e8a-328">[![especificar relaciones de tabla](iteration-6-use-test-driven-development-cs/_static/image4.jpg)](iteration-6-use-test-driven-development-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="42e8a-328">[![Specifying table relationships](iteration-6-use-test-driven-development-cs/_static/image4.jpg)](iteration-6-use-test-driven-development-cs/_static/image7.png)</span></span>

<span data-ttu-id="42e8a-329">**Figura 04**: especificación de relaciones de tabla ([haga clic para ver la imagen de tamaño completo](iteration-6-use-test-driven-development-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="42e8a-329">**Figure 04**: Specifying table relationships([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image8.png))</span></span>

### <a name="updating-our-data-model"></a><span data-ttu-id="42e8a-330">Actualización del modelo de datos</span><span class="sxs-lookup"><span data-stu-id="42e8a-330">Updating our Data Model</span></span>

<span data-ttu-id="42e8a-331">A continuación, es necesario actualizar nuestro modelo de datos para representar la nueva tabla de base de datos.</span><span class="sxs-lookup"><span data-stu-id="42e8a-331">Next, we need to update our data model to represent the new database table.</span></span> <span data-ttu-id="42e8a-332">Siga estos pasos:</span><span class="sxs-lookup"><span data-stu-id="42e8a-332">Follow these steps:</span></span>

1. <span data-ttu-id="42e8a-333">Haga doble clic en el archivo ContactManagerModel. edmx en la carpeta models para abrir el diseñador de entidades.</span><span class="sxs-lookup"><span data-stu-id="42e8a-333">Double-click the ContactManagerModel.edmx file in the Models folder to open the Entity Designer.</span></span>
2. <span data-ttu-id="42e8a-334">Haga clic con el botón secundario en la superficie del diseñador y seleccione la opción **de menú Actualizar modelo desde base de datos**.</span><span class="sxs-lookup"><span data-stu-id="42e8a-334">Right-click the Designer surface and select the menu option **Update Model from Database**.</span></span>
3. <span data-ttu-id="42e8a-335">En el Asistente para actualización, seleccione la tabla grupos y haga clic en el botón Finalizar (vea la figura 5).</span><span class="sxs-lookup"><span data-stu-id="42e8a-335">In the Update Wizard, select the Groups table and click the Finish button (see Figure 5).</span></span>
4. <span data-ttu-id="42e8a-336">Haga clic con el botón secundario en la entidad grupos y seleccione la opción de menú **cambiar nombre**.</span><span class="sxs-lookup"><span data-stu-id="42e8a-336">Right-click the Groups entity and select the menu option **Rename**.</span></span> <span data-ttu-id="42e8a-337">Cambie el nombre de la entidad *Groups* a *Group* (singular).</span><span class="sxs-lookup"><span data-stu-id="42e8a-337">Change the name of the *Groups* entity to *Group* (singular).</span></span>
5. <span data-ttu-id="42e8a-338">Haga clic con el botón secundario en la propiedad de navegación grupos que aparece en la parte inferior de la entidad contacto.</span><span class="sxs-lookup"><span data-stu-id="42e8a-338">Right-click the Groups navigation property that appears at the bottom of the Contact entity.</span></span> <span data-ttu-id="42e8a-339">Cambie el nombre de la propiedad de navegación *Groups* a *Group* (singular).</span><span class="sxs-lookup"><span data-stu-id="42e8a-339">Change the name of the *Groups* navigation property to *Group* (singular).</span></span>

<span data-ttu-id="42e8a-340">[![actualizar un modelo de Entity Framework desde la base de datos](iteration-6-use-test-driven-development-cs/_static/image5.jpg)](iteration-6-use-test-driven-development-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="42e8a-340">[![Updating an Entity Framework model from the database](iteration-6-use-test-driven-development-cs/_static/image5.jpg)](iteration-6-use-test-driven-development-cs/_static/image9.png)</span></span>

<span data-ttu-id="42e8a-341">**Figura 05**: actualización de un modelo de Entity Framework desde la base de datos ([haga clic para ver la imagen de tamaño completo](iteration-6-use-test-driven-development-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="42e8a-341">**Figure 05**: Updating an Entity Framework model from the database([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image10.png))</span></span>

<span data-ttu-id="42e8a-342">Después de completar estos pasos, el modelo de datos representará las tablas contactos y grupos.</span><span class="sxs-lookup"><span data-stu-id="42e8a-342">After you complete these steps, your data model will represent both the Contacts and Groups tables.</span></span> <span data-ttu-id="42e8a-343">Entity Designer debería mostrar ambas entidades (vea la ilustración 6).</span><span class="sxs-lookup"><span data-stu-id="42e8a-343">The Entity Designer should show both entities (see Figure 6).</span></span>

<span data-ttu-id="42e8a-344">[![Entity Designer mostrando el grupo y el contacto](iteration-6-use-test-driven-development-cs/_static/image6.jpg)](iteration-6-use-test-driven-development-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="42e8a-344">[![Entity Designer displaying Group and Contact](iteration-6-use-test-driven-development-cs/_static/image6.jpg)](iteration-6-use-test-driven-development-cs/_static/image11.png)</span></span>

<span data-ttu-id="42e8a-345">**Figura 06**: diseñador de entidades que muestra el grupo y el contacto ([haga clic para ver la imagen de tamaño completo](iteration-6-use-test-driven-development-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="42e8a-345">**Figure 06**: Entity Designer displaying Group and Contact([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image12.png))</span></span>

### <a name="creating-our-repository-classes"></a><span data-ttu-id="42e8a-346">Creación de las clases de repositorio</span><span class="sxs-lookup"><span data-stu-id="42e8a-346">Creating our Repository Classes</span></span>

<span data-ttu-id="42e8a-347">A continuación, es necesario implementar nuestra clase de repositorio.</span><span class="sxs-lookup"><span data-stu-id="42e8a-347">Next, we need to implement our repository class.</span></span> <span data-ttu-id="42e8a-348">En el transcurso de esta iteración, agregamos varios métodos nuevos a la interfaz IContactManagerRepository mientras escribía código para satisfacer nuestras pruebas unitarias.</span><span class="sxs-lookup"><span data-stu-id="42e8a-348">Over the course of this iteration, we added several new methods to the IContactManagerRepository interface while writing code to satisfy our unit tests.</span></span> <span data-ttu-id="42e8a-349">La versión final de la interfaz IContactManagerRepository se incluye en la lista 14.</span><span class="sxs-lookup"><span data-stu-id="42e8a-349">The final version of the IContactManagerRepository interface is contained in Listing 14.</span></span>

<span data-ttu-id="42e8a-350">**Listado 14-Models\IContactManagerRepository.cs**</span><span class="sxs-lookup"><span data-stu-id="42e8a-350">**Listing 14 - Models\IContactManagerRepository.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample14.cs)]

<span data-ttu-id="42e8a-351">No hemos implementado realmente ninguno de los métodos relacionados con el trabajo con grupos de contactos.</span><span class="sxs-lookup"><span data-stu-id="42e8a-351">We haven't actually implemented any of the methods related to working with contact groups.</span></span> <span data-ttu-id="42e8a-352">Actualmente, la clase EntityContactManagerRepository tiene métodos de código auxiliar para cada uno de los métodos de grupo Contact enumerados en la interfaz IContactManagerRepository.</span><span class="sxs-lookup"><span data-stu-id="42e8a-352">Currently, the EntityContactManagerRepository class has stub methods for each of the contact group methods listed in the IContactManagerRepository interface.</span></span> <span data-ttu-id="42e8a-353">Por ejemplo, el método ListGroups () tiene actualmente el siguiente aspecto:</span><span class="sxs-lookup"><span data-stu-id="42e8a-353">For example, the ListGroups() method currently looks like this:</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample15.cs)]

<span data-ttu-id="42e8a-354">Los métodos de código auxiliar nos han permitido compilar la aplicación y pasar las pruebas unitarias.</span><span class="sxs-lookup"><span data-stu-id="42e8a-354">The stub methods enabled us to compile our application and pass the unit tests.</span></span> <span data-ttu-id="42e8a-355">Sin embargo, ahora es el momento de implementar estos métodos.</span><span class="sxs-lookup"><span data-stu-id="42e8a-355">However, now it is time to actually implement these methods.</span></span> <span data-ttu-id="42e8a-356">La versión final de la clase EntityContactManagerRepository se encuentra en la lista 13.</span><span class="sxs-lookup"><span data-stu-id="42e8a-356">The final version of the EntityContactManagerRepository class is contained in Listing 13.</span></span>

<span data-ttu-id="42e8a-357">**Lista 13-Models\EntityContactManagerRepository.cs**</span><span class="sxs-lookup"><span data-stu-id="42e8a-357">**Listing 13 - Models\EntityContactManagerRepository.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample16.cs)]

### <a name="creating-the-views"></a><span data-ttu-id="42e8a-358">Crear las vistas</span><span class="sxs-lookup"><span data-stu-id="42e8a-358">Creating the Views</span></span>

<span data-ttu-id="42e8a-359">Aplicación ASP.NET MVC cuando se usa el motor de vista ASP.NET predeterminado.</span><span class="sxs-lookup"><span data-stu-id="42e8a-359">ASP.NET MVC application when you use the default ASP.NET view engine.</span></span> <span data-ttu-id="42e8a-360">Por lo tanto, no cree vistas en respuesta a una prueba unitaria determinada.</span><span class="sxs-lookup"><span data-stu-id="42e8a-360">So, you don t create views in response to a particular unit test.</span></span> <span data-ttu-id="42e8a-361">Sin embargo, dado que una aplicación sería inútil sin vistas, podemos completar esta iteración sin crear y modificar las vistas contenidas en la aplicación Contact Manager.</span><span class="sxs-lookup"><span data-stu-id="42e8a-361">However, because an application would be useless without views, we can t complete this iteration without creating and modifying the views contained in the Contact Manager application.</span></span>

<span data-ttu-id="42e8a-362">Necesitamos crear las siguientes vistas nuevas para administrar grupos de contactos (consulte la figura 7):</span><span class="sxs-lookup"><span data-stu-id="42e8a-362">We need to create the following new views for managing contact groups (see Figure 7):</span></span>

- <span data-ttu-id="42e8a-363">Views\Group\Index.aspx: muestra la lista de grupos de contactos</span><span class="sxs-lookup"><span data-stu-id="42e8a-363">Views\Group\Index.aspx - Displays list of contact groups</span></span>
- <span data-ttu-id="42e8a-364">Views\Group\Delete.aspx: muestra el formulario de confirmación para eliminar un grupo de contactos.</span><span class="sxs-lookup"><span data-stu-id="42e8a-364">Views\Group\Delete.aspx - Displays confirmation form for deleting a contact group</span></span>

<span data-ttu-id="42e8a-365">[![la vista de índice de grupo](iteration-6-use-test-driven-development-cs/_static/image7.jpg)](iteration-6-use-test-driven-development-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="42e8a-365">[![The Group Index view](iteration-6-use-test-driven-development-cs/_static/image7.jpg)](iteration-6-use-test-driven-development-cs/_static/image13.png)</span></span>

<span data-ttu-id="42e8a-366">**Figura 07**: vista de índice de grupo ([haga clic para ver la imagen de tamaño completo](iteration-6-use-test-driven-development-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="42e8a-366">**Figure 07**: The Group Index view([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image14.png))</span></span>

<span data-ttu-id="42e8a-367">Es necesario modificar las siguientes vistas existentes para que incluyan grupos de contactos:</span><span class="sxs-lookup"><span data-stu-id="42e8a-367">We need to modify the following existing views so that they include contact groups:</span></span>

- <span data-ttu-id="42e8a-368">Views\Home\Create.aspx</span><span class="sxs-lookup"><span data-stu-id="42e8a-368">Views\Home\Create.aspx</span></span>
- <span data-ttu-id="42e8a-369">Views\Home\Edit.aspx</span><span class="sxs-lookup"><span data-stu-id="42e8a-369">Views\Home\Edit.aspx</span></span>
- <span data-ttu-id="42e8a-370">Views\Home\Index.aspx</span><span class="sxs-lookup"><span data-stu-id="42e8a-370">Views\Home\Index.aspx</span></span>

<span data-ttu-id="42e8a-371">Puede ver las vistas modificadas examinando la aplicación de Visual Studio que acompaña a este tutorial.</span><span class="sxs-lookup"><span data-stu-id="42e8a-371">You can see the modified views by looking at the Visual Studio application that accompanies this tutorial.</span></span> <span data-ttu-id="42e8a-372">Por ejemplo, la figura 8 muestra la vista de índice de contactos.</span><span class="sxs-lookup"><span data-stu-id="42e8a-372">For example, Figure 8 illustrates the Contact Index view.</span></span>

<span data-ttu-id="42e8a-373">[![la vista de índice de contactos](iteration-6-use-test-driven-development-cs/_static/image8.jpg)](iteration-6-use-test-driven-development-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="42e8a-373">[![The Contact Index view](iteration-6-use-test-driven-development-cs/_static/image8.jpg)](iteration-6-use-test-driven-development-cs/_static/image15.png)</span></span>

<span data-ttu-id="42e8a-374">**Figura 08**: vista de índice de contactos ([haga clic para ver la imagen de tamaño completo](iteration-6-use-test-driven-development-cs/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="42e8a-374">**Figure 08**: The Contact Index view([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image16.png))</span></span>

## <a name="summary"></a><span data-ttu-id="42e8a-375">Resumen</span><span class="sxs-lookup"><span data-stu-id="42e8a-375">Summary</span></span>

<span data-ttu-id="42e8a-376">En esta iteración, se ha agregado una nueva funcionalidad a nuestra aplicación de administrador de contactos siguiendo una metodología de diseño de aplicaciones de desarrollo controlado por pruebas.</span><span class="sxs-lookup"><span data-stu-id="42e8a-376">In this iteration, we added new functionality to our Contact Manager application by following a test-driven development application design methodology.</span></span> <span data-ttu-id="42e8a-377">Comenzamos por crear un conjunto de casos de usuario.</span><span class="sxs-lookup"><span data-stu-id="42e8a-377">We started by creating a set of user stories.</span></span> <span data-ttu-id="42e8a-378">Hemos creado un conjunto de pruebas unitarias que corresponde a los requisitos expresados por los casos de usuario.</span><span class="sxs-lookup"><span data-stu-id="42e8a-378">We created a set of unit tests that corresponds to the requirements expressed by the user stories.</span></span> <span data-ttu-id="42e8a-379">Por último, escribimos solo código suficiente para satisfacer los requisitos expresados por las pruebas unitarias.</span><span class="sxs-lookup"><span data-stu-id="42e8a-379">Finally, we wrote just enough code to satisfy the requirements expressed by the unit tests.</span></span>

<span data-ttu-id="42e8a-380">Una vez finalizada la escritura de código suficiente para satisfacer los requisitos expresados por las pruebas unitarias, hemos actualizado nuestra base de datos y las vistas.</span><span class="sxs-lookup"><span data-stu-id="42e8a-380">After we finished writing enough code to satisfy the requirements expressed by the unit tests, we updated our database and views.</span></span> <span data-ttu-id="42e8a-381">Hemos agregado una nueva tabla grupos a nuestra base de datos y hemos actualizado nuestro Entity Framework modelo de datos.</span><span class="sxs-lookup"><span data-stu-id="42e8a-381">We added a new Groups table to our database and updated our Entity Framework Data Model.</span></span> <span data-ttu-id="42e8a-382">También creamos y modificamos un conjunto de vistas.</span><span class="sxs-lookup"><span data-stu-id="42e8a-382">We also created and modified a set of views.</span></span>

<span data-ttu-id="42e8a-383">En la siguiente iteración (la iteración final), se vuelve a escribir la aplicación para aprovechar las ventajas de Ajax.</span><span class="sxs-lookup"><span data-stu-id="42e8a-383">In the next iteration -- the final iteration -- we rewrite our application to take advantage of Ajax.</span></span> <span data-ttu-id="42e8a-384">Al aprovechar las ventajas de Ajax, mejoraremos la capacidad de respuesta y el rendimiento de la aplicación Contact Manager.</span><span class="sxs-lookup"><span data-stu-id="42e8a-384">By taking advantage of Ajax, we'll improve the responsiveness and performance of the Contact Manager application.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="42e8a-385">[Anterior](iteration-5-create-unit-tests-cs.md)
> [Siguiente](iteration-7-add-ajax-functionality-cs.md)</span><span class="sxs-lookup"><span data-stu-id="42e8a-385">[Previous](iteration-5-create-unit-tests-cs.md)
[Next](iteration-7-add-ajax-functionality-cs.md)</span></span>
