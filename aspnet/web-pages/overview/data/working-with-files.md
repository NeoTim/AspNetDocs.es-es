---
uid: web-pages/overview/data/working-with-files
title: Trabajar con archivos en un sitio ASP.NET Web Pages (Razor) | Microsoft Docs
author: Rick-Anderson
description: Este capítulo explica cómo leer, escribir, anexar, eliminar y cargar archivos.
ms.author: riande
ms.date: 02/20/2014
ms.assetid: eee916e4-ba4c-439a-a24e-68df7d45a569
msc.legacyurl: /web-pages/overview/data/working-with-files
msc.type: authoredcontent
ms.openlocfilehash: 4a62cce3af57b507882744f948ce208becdb03ac
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 04/17/2019
ms.locfileid: "59382308"
---
# <a name="working-with-files-in-an-aspnet-web-pages-razor-site"></a><span data-ttu-id="cd9a4-103">Trabajar con archivos en un sitio Web de ASP.NET Pages (Razor)</span><span class="sxs-lookup"><span data-stu-id="cd9a4-103">Working with Files in an ASP.NET Web Pages (Razor) Site</span></span>

<span data-ttu-id="cd9a4-104">por [Tom FitzMacken](https://github.com/tfitzmac)</span><span class="sxs-lookup"><span data-stu-id="cd9a4-104">by [Tom FitzMacken](https://github.com/tfitzmac)</span></span>

> <span data-ttu-id="cd9a4-105">En este artículo se explica cómo leer, escribir, anexar, eliminar y cargar archivos en un sitio de ASP.NET Web Pages (Razor).</span><span class="sxs-lookup"><span data-stu-id="cd9a4-105">This article explains how to read, write, append, delete, and upload files in an ASP.NET Web Pages (Razor) site.</span></span>
> 
> > [!NOTE]
> > <span data-ttu-id="cd9a4-106">Si desea cargar imágenes y manipularlos (por ejemplo, voltear o cambiar su tamaño), consulte [trabajar con imágenes en un sitio de ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=202897).</span><span class="sxs-lookup"><span data-stu-id="cd9a4-106">If you want to upload images and manipulate them (for example, flip or resize them), see [Working with Images in an ASP.NET Web Pages Site](https://go.microsoft.com/fwlink/?LinkId=202897).</span></span>
> 
> 
> <span data-ttu-id="cd9a4-107">**Lo que aprenderá:**</span><span class="sxs-lookup"><span data-stu-id="cd9a4-107">**What you'll learn:**</span></span> 
> 
> - <span data-ttu-id="cd9a4-108">Cómo crear un archivo de texto y escribir datos en él.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-108">How to create a text file and write data to it.</span></span>
> - <span data-ttu-id="cd9a4-109">Cómo anexar datos a un archivo existente.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-109">How to append data to an existing file.</span></span>
> - <span data-ttu-id="cd9a4-110">Cómo leer un archivo y mostrar a partir de él.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-110">How to read a file and display from it.</span></span>
> - <span data-ttu-id="cd9a4-111">Cómo eliminar archivos desde un sitio Web.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-111">How to delete files from a website.</span></span>
> - <span data-ttu-id="cd9a4-112">Cómo permitir a los usuarios cargar uno o varios archivos.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-112">How to let users upload one file or multiple files.</span></span>
> 
> <span data-ttu-id="cd9a4-113">Estas son las características introducidas en el artículo de programación de ASP.NET:</span><span class="sxs-lookup"><span data-stu-id="cd9a4-113">These are the ASP.NET programming features introduced in the article:</span></span>
> 
> - <span data-ttu-id="cd9a4-114">El `File` object, que proporciona una manera de administrar los archivos.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-114">The `File` object, which provides a way to manage files.</span></span>
> - <span data-ttu-id="cd9a4-115">El `FileUpload` auxiliar.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-115">The `FileUpload` helper.</span></span>
> - <span data-ttu-id="cd9a4-116">El `Path` object, que proporciona métodos que permiten manipular los nombres de archivo y ruta de acceso.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-116">The `Path` object, which provides methods that let you manipulate path and file names.</span></span>
>   
> 
> ## <a name="software-versions-used-in-the-tutorial"></a><span data-ttu-id="cd9a4-117">Versiones de software que se usa en el tutorial</span><span class="sxs-lookup"><span data-stu-id="cd9a4-117">Software versions used in the tutorial</span></span>
> 
> 
> - <span data-ttu-id="cd9a4-118">ASP.NET Web Pages (Razor) 2</span><span class="sxs-lookup"><span data-stu-id="cd9a4-118">ASP.NET Web Pages (Razor) 2</span></span>
> - <span data-ttu-id="cd9a4-119">WebMatrix 2</span><span class="sxs-lookup"><span data-stu-id="cd9a4-119">WebMatrix 2</span></span>
>   
> 
> <span data-ttu-id="cd9a4-120">Este tutorial también funciona con WebMatrix 3.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-120">This tutorial also works with WebMatrix 3.</span></span>


<a id="Creating_a_Text_File"></a>
## <a name="creating-a-text-file-and-writing-data-to-it"></a><span data-ttu-id="cd9a4-121">Creación de un archivo de texto y escribir datos en él</span><span class="sxs-lookup"><span data-stu-id="cd9a4-121">Creating a Text File and Writing Data to It</span></span>

<span data-ttu-id="cd9a4-122">Además de usar una base de datos en su sitio Web, puede trabajar con archivos.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-122">In addition to using a database in your website, you might work with files.</span></span> <span data-ttu-id="cd9a4-123">Por ejemplo, puede usar archivos de texto como una manera sencilla para almacenar los datos del sitio.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-123">For example, you might use text files as a simple way to store data for the site.</span></span> <span data-ttu-id="cd9a4-124">(A veces se llama a un archivo de texto que se usa para almacenar los datos de un *archivos planos*.) Archivos de texto pueden ser en diferentes formatos, como *.txt*, *.xml*, o *.csv* (valores separados por coma).</span><span class="sxs-lookup"><span data-stu-id="cd9a4-124">(A text file that's used to store data is sometimes called a *flat file*.) Text files can be in different formats, like *.txt*, *.xml*, or *.csv* (comma-delimited values).</span></span>

<span data-ttu-id="cd9a4-125">Si desea almacenar los datos en un archivo de texto, puede usar el `File.WriteAllText` método para especificar el archivo para crear y los datos que se va a escribir en él.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-125">If you want to store data in a text file, you can use the `File.WriteAllText` method to specify the file to create and the data to write to it.</span></span> <span data-ttu-id="cd9a4-126">En este procedimiento, creará una página que contiene un formulario simple con tres `input` elementos (nombre, apellido y dirección de correo electrónico) y un **enviar** botón.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-126">In this procedure, you'll create a page that contains a simple form with three `input` elements (first name, last name, and email address) and a **Submit** button.</span></span> <span data-ttu-id="cd9a4-127">Cuando el usuario envía el formulario, que almacenará la entrada del usuario en un archivo de texto.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-127">When the user submits the form, you'll store the user's input in a text file.</span></span>

1. <span data-ttu-id="cd9a4-128">Cree una carpeta nueva denominada *aplicación\_datos*, si aún no existe.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-128">Create a new folder named *App\_Data*, if it doesn't exist already.</span></span>
2. <span data-ttu-id="cd9a4-129">En la raíz de su sitio Web, cree un nuevo archivo denominado *UserData.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-129">At the root of your website, create a new file named *UserData.cshtml*.</span></span>
3. <span data-ttu-id="cd9a4-130">Reemplace el contenido existente por lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="cd9a4-130">Replace the existing content with the following:</span></span> 

    [!code-cshtml[Main](working-with-files/samples/sample1.cshtml)]

    <span data-ttu-id="cd9a4-131">El marcado HTML crea el formulario con los tres cuadros de texto.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-131">The HTML markup creates the form with the three text boxes.</span></span> <span data-ttu-id="cd9a4-132">En el código, usa el `IsPost` propiedad para determinar si se ha enviado la página antes de iniciar el procesamiento.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-132">In the code, you use the `IsPost` property to determine whether the page has been submitted before you start processing.</span></span>

    <span data-ttu-id="cd9a4-133">La primera tarea consiste en obtener la entrada del usuario y asignarlo a las variables.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-133">The first task is to get the user input and assign it to variables.</span></span> <span data-ttu-id="cd9a4-134">El código, a continuación, concatena los valores de las variables independientes en una sola delimitada por comas, que, a continuación, se almacena en otra variable.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-134">The code then concatenates the values of the separate variables into one comma-delimited string, which is then stored in a different variable.</span></span> <span data-ttu-id="cd9a4-135">Tenga en cuenta que el separador de coma es una cadena incluida entre comillas (","), porque lo está insertando literalmente una coma en la cadena de gran tamaño que se va a crear.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-135">Notice that the comma separator is a string contained in quotation marks (","), because you're literally embedding a comma into the big string that you're creating.</span></span> <span data-ttu-id="cd9a4-136">Al final de los datos que concatenan juntos, agrega `Environment.NewLine`.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-136">At the end of the data that you concatenate together, you add `Environment.NewLine`.</span></span> <span data-ttu-id="cd9a4-137">Esto agrega un salto de línea (un carácter de nueva línea).</span><span class="sxs-lookup"><span data-stu-id="cd9a4-137">This adds a line break (a newline character).</span></span> <span data-ttu-id="cd9a4-138">Lo que está creando con toda esta concatenación es una cadena que tiene este aspecto:</span><span class="sxs-lookup"><span data-stu-id="cd9a4-138">What you're creating with all this concatenation is a string that looks like this:</span></span>

    [!code-css[Main](working-with-files/samples/sample2.css)]

    <span data-ttu-id="cd9a4-139">(Con un salto de línea invisible al final).</span><span class="sxs-lookup"><span data-stu-id="cd9a4-139">(With an invisible line break at the end.)</span></span>

    <span data-ttu-id="cd9a4-140">A continuación, cree una variable (`dataFile`) que contiene la ubicación y el nombre del archivo para almacenar los datos.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-140">You then create a variable (`dataFile`) that contains the location and name of the file to store the data in.</span></span> <span data-ttu-id="cd9a4-141">La ubicación de la configuración requiere algún tratamiento especial.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-141">Setting the location requires some special handling.</span></span> <span data-ttu-id="cd9a4-142">En los sitios Web, es una práctica incorrecta para hacer referencia en el código a las rutas de acceso absolutas como *C:\Folder\File.txt* para los archivos en el servidor web.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-142">In websites, it's a bad practice to refer in code to absolute paths like *C:\Folder\File.txt* for files on the web server.</span></span> <span data-ttu-id="cd9a4-143">Si se mueve un sitio Web, una ruta de acceso absoluta será incorrecta.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-143">If a website is moved, an absolute path will be wrong.</span></span> <span data-ttu-id="cd9a4-144">Además, para un sitio hospedado (en contraposición a su propio equipo) normalmente ni siquiera sabe lo que es la ruta de acceso correcta al escribir el código.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-144">Moreover, for a hosted site (as opposed to on your own computer) you typically don't even know what the correct path is when you're writing the code.</span></span>

    <span data-ttu-id="cd9a4-145">Pero a veces (por ejemplo, ahora, para escribir en un archivo) necesita una ruta de acceso completa.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-145">But sometimes (like now, for writing a file) you do need a complete path.</span></span> <span data-ttu-id="cd9a4-146">La solución consiste en usar el `MapPath` método de la `Server` objeto.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-146">The solution is to use the `MapPath` method of the `Server` object.</span></span> <span data-ttu-id="cd9a4-147">Esto devuelve la ruta de acceso completa a su sitio Web.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-147">This returns the complete path to your website.</span></span> <span data-ttu-id="cd9a4-148">Para obtener la ruta de acceso para la raíz del sitio Web, es un usuario de la `~` operador (para represen el sitio de virtual raíz) para `MapPath`.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-148">To get the path for the website root, you user the `~` operator (to represen the site's virtual root) to `MapPath`.</span></span> <span data-ttu-id="cd9a4-149">(También puede pasar un nombre de la subcarpeta, como *~/App\_datos /*, para obtener la ruta de acceso para esa subcarpeta.) A continuación, puede concatenar información adicional en cualquier método la devuelve con el fin de crear una ruta de acceso completa.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-149">(You can also pass a subfolder name to it, like *~/App\_Data/*, to get the path for that subfolder.) You can then concatenate additional information onto whatever the method returns in order to create a complete path.</span></span> <span data-ttu-id="cd9a4-150">En este ejemplo, agregue un nombre de archivo.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-150">In this example, you add a file name.</span></span> <span data-ttu-id="cd9a4-151">(Puede leer más acerca de cómo trabajar con rutas de acceso de archivos y carpetas en [Introducción a ASP.NET Web Pages de programación mediante la sintaxis Razor](https://go.microsoft.com/fwlink/?LinkId=195205#ID_WorkingWithFileAndFolderPaths).)</span><span class="sxs-lookup"><span data-stu-id="cd9a4-151">(You can read more about how to work with file and folder paths in [Introduction to ASP.NET Web Pages Programming Using the Razor Syntax](https://go.microsoft.com/fwlink/?LinkId=195205#ID_WorkingWithFileAndFolderPaths).)</span></span>

    <span data-ttu-id="cd9a4-152">El archivo se guarda en el *aplicación\_datos* carpeta.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-152">The file is saved in the *App\_Data* folder.</span></span> <span data-ttu-id="cd9a4-153">Esta carpeta es una carpeta especial en ASP.NET que se usa para almacenar archivos de datos, como se describe en [Introducción al trabajo con una base de datos en sitios de ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=195209).</span><span class="sxs-lookup"><span data-stu-id="cd9a4-153">This folder is a special folder in ASP.NET that's used to store data files, as described in [Introduction to Working with a Database in ASP.NET Web Pages Sites](https://go.microsoft.com/fwlink/?LinkId=195209).</span></span>

    <span data-ttu-id="cd9a4-154">El `WriteAllText` método de la `File` objeto escribe los datos en el archivo.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-154">The `WriteAllText` method of the `File` object writes the data to the file.</span></span> <span data-ttu-id="cd9a4-155">Este método toma dos parámetros: el nombre (con la ruta de acceso) del archivo para escribir en y los datos reales para escribir.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-155">This method takes two parameters: the name (with path) of the file to write to, and the actual data to write.</span></span> <span data-ttu-id="cd9a4-156">Tenga en cuenta que el nombre del primer parámetro tiene un `@` carácter como prefijo.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-156">Notice that the name of the first parameter has an `@` character as a prefix.</span></span> <span data-ttu-id="cd9a4-157">Esto indica a ASP.NET que está proporcionando un literal de cadena textual y caracteres como "/" no debe interpretarse de formas especiales.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-157">This tells ASP.NET that you're providing a verbatim string literal, and that characters like "/" should not be interpreted in special ways.</span></span> <span data-ttu-id="cd9a4-158">(Para obtener más información, consulte [Introducción a ASP.NET Web programación mediante la sintaxis Razor](https://go.microsoft.com/fwlink/?LinkId=195205#ID_WorkingWithFileAndFolderPaths).)</span><span class="sxs-lookup"><span data-stu-id="cd9a4-158">(For more information, see [Introduction to ASP.NET Web Programming Using the Razor Syntax](https://go.microsoft.com/fwlink/?LinkId=195205#ID_WorkingWithFileAndFolderPaths).)</span></span>

    > [!NOTE]
    > <span data-ttu-id="cd9a4-159">Para el código guardar los archivos en el *aplicación\_datos* carpeta, la aplicación necesita permisos de lectura-escritura para esa carpeta.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-159">In order for your code to save files in the *App\_Data* folder, the application needs read-write permissions for that folder.</span></span> <span data-ttu-id="cd9a4-160">En el equipo de desarrollo esto no es normalmente un problema.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-160">On your development computer this is not typically an issue.</span></span> <span data-ttu-id="cd9a4-161">Sin embargo, cuando se publica un sitio al servidor de un proveedor de hospedaje web, debe establecer explícitamente esos permisos.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-161">However, when you publish your site to a hosting provider's web server, you might need to explicitly set those permissions.</span></span> <span data-ttu-id="cd9a4-162">Si ejecuta este código en el servidor de un proveedor de hospedaje y obtiene errores, póngase en contacto con el proveedor de hospedaje para obtener información sobre cómo establecer estos permisos.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-162">If you run this code on a hosting provider's server and get errors, check with the hosting provider to find out how to set those permissions.</span></span>

- <span data-ttu-id="cd9a4-163">Ejecute la página en un explorador.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-163">Run the page in a browser.</span></span> 

    ![](working-with-files/_static/image1.jpg)
- <span data-ttu-id="cd9a4-164">Escriba valores en los campos y, a continuación, haga clic en **enviar**.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-164">Enter values into the fields and then click **Submit**.</span></span>
- <span data-ttu-id="cd9a4-165">Cierre el explorador.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-165">Close the browser.</span></span>
- <span data-ttu-id="cd9a4-166">Vuelva al proyecto y actualice la vista.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-166">Return to the project and refresh the view.</span></span>
- <span data-ttu-id="cd9a4-167">Abra el *data.txt* archivo.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-167">Open the *data.txt* file.</span></span> <span data-ttu-id="cd9a4-168">Los datos que ha enviado en el formulario están en el archivo.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-168">The data you submitted in the form is in the file.</span></span> 

    ![[image]](working-with-files/_static/image2.jpg)
- <span data-ttu-id="cd9a4-170">Cerrar la *data.txt* archivo.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-170">Close the *data.txt* file.</span></span>

<a id="Appending_Data"></a>
## <a name="appending-data-to-an-existing-file"></a><span data-ttu-id="cd9a4-171">Anexar datos a un archivo existente</span><span class="sxs-lookup"><span data-stu-id="cd9a4-171">Appending Data to an Existing File</span></span>

<span data-ttu-id="cd9a4-172">En el ejemplo anterior, ha utilizado `WriteAllText` para crear un archivo de texto que tiene un solo elemento de datos en ella.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-172">In the previous example, you used `WriteAllText` to create a text file that's got just one piece of data in it.</span></span> <span data-ttu-id="cd9a4-173">Si vuelve a llamar al método y pásele el nombre de archivo mismo, el archivo existente se sobrescribe completamente.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-173">If you call the method again and pass it the same file name, the existing file is completely overwritten.</span></span> <span data-ttu-id="cd9a4-174">Sin embargo, después de crear un archivo a menudo desea agregar datos nuevos al final del archivo.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-174">However, after you've created a file you often want to add new data to the end of the file.</span></span> <span data-ttu-id="cd9a4-175">Puede hacerlo mediante el `AppendAllText` método de la `File` objeto.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-175">You can do that using the `AppendAllText` method of the `File` object.</span></span>

1. <span data-ttu-id="cd9a4-176">En el sitio Web, realice una copia de la *UserData.cshtml* de archivos y el nombre de *UserDataMultiple.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-176">In the website, make a copy of the *UserData.cshtml* file and name the copy *UserDataMultiple.cshtml*.</span></span>
2. <span data-ttu-id="cd9a4-177">Reemplace el bloque de código antes de la apertura `<!DOCTYPE html>` etiqueta con el bloque de código siguiente:</span><span class="sxs-lookup"><span data-stu-id="cd9a4-177">Replace the code block before the opening `<!DOCTYPE html>` tag with the following code block:</span></span> 

    [!code-cshtml[Main](working-with-files/samples/sample3.cshtml)]

    <span data-ttu-id="cd9a4-178">Este código tiene un cambio en el ejemplo anterior.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-178">This code has one change in it from the previous example.</span></span> <span data-ttu-id="cd9a4-179">En lugar de usar `WriteAllText`, usa `the AppendAllText` método.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-179">Instead of using `WriteAllText`, it uses `the AppendAllText` method.</span></span> <span data-ttu-id="cd9a4-180">Los métodos son similares, salvo que `AppendAllText` agrega los datos al final del archivo.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-180">The methods are similar, except that `AppendAllText` adds the data to the end of the file.</span></span> <span data-ttu-id="cd9a4-181">Igual que con `WriteAllText`, `AppendAllText` crea el archivo si aún no existe.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-181">As with `WriteAllText`, `AppendAllText` creates the file if it doesn't already exist.</span></span>
3. <span data-ttu-id="cd9a4-182">Ejecute la página en un explorador.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-182">Run the page in a browser.</span></span>
4. <span data-ttu-id="cd9a4-183">Especifique valores para los campos y, a continuación, haga clic en **enviar**.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-183">Enter values for the fields and then click **Submit**.</span></span>
5. <span data-ttu-id="cd9a4-184">Agregar más datos y envía el formulario de nuevo.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-184">Add more data and submit the form again.</span></span>
6. <span data-ttu-id="cd9a4-185">Volver a su proyecto, haga clic en la carpeta del proyecto y, a continuación, haga clic en **actualizar**.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-185">Return to your project, right-click the project folder, and then click **Refresh**.</span></span>
7. <span data-ttu-id="cd9a4-186">Abra el *data.txt* archivo.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-186">Open the *data.txt* file.</span></span> <span data-ttu-id="cd9a4-187">Ahora contiene los nuevos datos que acaba de escribir.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-187">It now contains the new data that you just entered.</span></span> 

    ![[image]](working-with-files/_static/image3.jpg)

<a id="Reading_and_Displaying_Data"></a>
## <a name="reading-and-displaying-data-from-a-file"></a><span data-ttu-id="cd9a4-189">Leer y mostrar datos desde un archivo</span><span class="sxs-lookup"><span data-stu-id="cd9a4-189">Reading and Displaying Data from a File</span></span>

<span data-ttu-id="cd9a4-190">Incluso si no necesita escribir datos en un archivo de texto, probablemente a veces deba leer datos de uno.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-190">Even if you don't need to write data to a text file, you'll probably sometimes need to read data from one.</span></span> <span data-ttu-id="cd9a4-191">Para ello, puede volver a usar el `File` objeto.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-191">To do this, you can again use the `File` object.</span></span> <span data-ttu-id="cd9a4-192">Puede usar el `File` objeto leer cada línea individualmente (separados por saltos de línea) o para leer un elemento individual con independencia de cómo se separan.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-192">You can use the `File` object to read each line individually (separated by line breaks) or to read individual item no matter how they're separated.</span></span>

<span data-ttu-id="cd9a4-193">Este procedimiento muestra cómo leer y mostrar los datos que creó en el ejemplo anterior.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-193">This procedure shows you how to read and display the data that you created in the previous example.</span></span>

1. <span data-ttu-id="cd9a4-194">En la raíz de su sitio Web, cree un nuevo archivo denominado *DisplayData.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-194">At the root of your website, create a new file named *DisplayData.cshtml*.</span></span>
2. <span data-ttu-id="cd9a4-195">Reemplace el contenido existente por lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="cd9a4-195">Replace the existing content with the following:</span></span> 

    [!code-cshtml[Main](working-with-files/samples/sample4.cshtml)]

    <span data-ttu-id="cd9a4-196">El código comienza por leer el archivo que creó en el ejemplo anterior en una variable denominada `userData`, mediante esta llamada al método:</span><span class="sxs-lookup"><span data-stu-id="cd9a4-196">The code starts by reading the file that you created in the previous example into a variable named `userData`, using this method call:</span></span>

    [!code-css[Main](working-with-files/samples/sample5.css)]

    <span data-ttu-id="cd9a4-197">El código para hacer esto es dentro de un `if` instrucción.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-197">The code to do this is inside an `if` statement.</span></span> <span data-ttu-id="cd9a4-198">Cuando desea leer un archivo, es una buena idea usar el `File.Exists` método para determinar primero si el archivo está disponible.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-198">When you want to read a file, it's a good idea to use the `File.Exists` method to determine first whether the file is available.</span></span> <span data-ttu-id="cd9a4-199">El código también comprueba si el archivo está vacío.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-199">The code also checks whether the file is empty.</span></span>

    <span data-ttu-id="cd9a4-200">El cuerpo de la página contiene dos `foreach` bucles, uno anidado dentro de otro.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-200">The body of the page contains two `foreach` loops, one nested inside the other.</span></span> <span data-ttu-id="cd9a4-201">El exterior `foreach` bucle Obtiene una línea a la vez desde el archivo de datos.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-201">The outer `foreach` loop gets one line at a time from the data file.</span></span> <span data-ttu-id="cd9a4-202">En este caso, las líneas se definen mediante saltos de línea en el archivo &#8212; es decir, cada elemento de datos en su propia línea.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-202">In this case, the lines are defined by line breaks in the file &#8212; that is, each data item is on its own line.</span></span> <span data-ttu-id="cd9a4-203">El bucle exterior crea un nuevo elemento (`<li>` elemento) dentro de una lista ordenada (`<ol>` elemento).</span><span class="sxs-lookup"><span data-stu-id="cd9a4-203">The outer loop creates a new item (`<li>` element) inside an ordered list (`<ol>` element).</span></span>

    <span data-ttu-id="cd9a4-204">El bucle interior divide cada línea de datos en los elementos (campos) con una coma como delimitador.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-204">The inner loop splits each data line into items (fields) using a comma as a delimiter.</span></span> <span data-ttu-id="cd9a4-205">(Según el ejemplo anterior, esto significa que cada línea contiene tres campos &#8212; el nombre, apellido y dirección de correo electrónico, separados por una coma.) El bucle interno crea también un `<ul>` lista y muestra una lista de elementos para cada campo de la línea de datos.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-205">(Based on the previous example, this means that each line contains three fields &#8212; the first name, last name, and email address, each separated by a comma.) The inner loop also creates a `<ul>` list and displays one list item for each field in the data line.</span></span>

    <span data-ttu-id="cd9a4-206">El código muestra cómo usar dos tipos de datos, una matriz y el `char` tipo de datos.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-206">The code illustrates how to use two data types, an array and the `char` data type.</span></span> <span data-ttu-id="cd9a4-207">La matriz es necesaria porque el `File.ReadAllLines` método devuelve los datos como una matriz.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-207">The array is required because the `File.ReadAllLines` method returns data as an array.</span></span> <span data-ttu-id="cd9a4-208">El `char` tipo de datos es necesario porque el `Split` método devuelve un `array` en el que cada elemento es del tipo `char`.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-208">The `char` data type is required because the `Split` method returns an `array` in which each element is of the type `char`.</span></span> <span data-ttu-id="cd9a4-209">(Para obtener información acerca de las matrices, vea [Introducción a ASP.NET Web programación mediante la sintaxis Razor](https://go.microsoft.com/fwlink/?LinkId=202890#ID_CollectionsAndObjects).)</span><span class="sxs-lookup"><span data-stu-id="cd9a4-209">(For information about arrays, see [Introduction to ASP.NET Web Programming Using the Razor Syntax](https://go.microsoft.com/fwlink/?LinkId=202890#ID_CollectionsAndObjects).)</span></span>
3. <span data-ttu-id="cd9a4-210">Ejecute la página en un explorador.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-210">Run the page in a browser.</span></span> <span data-ttu-id="cd9a4-211">Se muestran los datos especificados en los ejemplos anteriores.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-211">The data you entered for the previous examples is displayed.</span></span> 

    ![[image]](working-with-files/_static/image4.jpg)

> [!TIP] 
> 
> <span data-ttu-id="cd9a4-213">**Mostrar datos desde un archivo delimitado por comas de Microsoft Excel**</span><span class="sxs-lookup"><span data-stu-id="cd9a4-213">**Displaying Data from a Microsoft Excel Comma-Delimited File**</span></span>
> 
> <span data-ttu-id="cd9a4-214">Puede usar Microsoft Excel para guardar los datos contenidos en una hoja de cálculo como un archivo delimitado por comas (*.csv* archivo).</span><span class="sxs-lookup"><span data-stu-id="cd9a4-214">You can use Microsoft Excel to save the data contained in a spreadsheet as a comma-delimited file (*.csv* file).</span></span> <span data-ttu-id="cd9a4-215">Al hacerlo, se guarda el archivo de texto sin formato, no en el formato de Excel.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-215">When you do, the file is saved in plain text, not in Excel format.</span></span> <span data-ttu-id="cd9a4-216">Cada fila de la hoja de cálculo está separado por un salto de línea del archivo de texto, y cada elemento de datos está separado por una coma.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-216">Each row in the spreadsheet is separated by a line break in the text file, and each data item is separated by a comma.</span></span> <span data-ttu-id="cd9a4-217">Puede usar el código que se muestra en el ejemplo anterior para leer un archivo delimitado por comas de Excel cambiando el nombre del archivo de datos en el código.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-217">You can use the code shown in the previous example to read an Excel comma-delimited file just by changing the name of the data file in your code.</span></span>


<a id="Deleting_Files"></a>
## <a name="deleting-files"></a><span data-ttu-id="cd9a4-218">Eliminación de archivos</span><span class="sxs-lookup"><span data-stu-id="cd9a4-218">Deleting Files</span></span>

<span data-ttu-id="cd9a4-219">Para eliminar archivos desde su sitio Web, puede usar el `File.Delete` método.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-219">To delete files from your website, you can use the `File.Delete` method.</span></span> <span data-ttu-id="cd9a4-220">Este procedimiento muestra cómo permitir que los usuarios eliminar una imagen (*.jpg* archivo) desde un *imágenes* carpeta si conoce el nombre del archivo.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-220">This procedure shows how to let users delete an image (*.jpg* file) from an *images* folder if they know the name of the file.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="cd9a4-221">**Importante** en un sitio Web de producción, normalmente restringe quién se puede realizar cambios en los datos.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-221">**Important** In a production website, you typically restrict who's allowed to make changes to the data.</span></span> <span data-ttu-id="cd9a4-222">Para obtener información acerca de cómo configurar la pertenencia y formas de autorizar a los usuarios realizar tareas en el sitio, consulte [agregar seguridad y la pertenencia a un sitio de ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=202904).</span><span class="sxs-lookup"><span data-stu-id="cd9a4-222">For information about how to set up membership and about ways to authorize users to perform tasks on the site, see [Adding Security and Membership to an ASP.NET Web Pages Site](https://go.microsoft.com/fwlink/?LinkId=202904).</span></span>


1. <span data-ttu-id="cd9a4-223">En el sitio Web, cree una subcarpeta denominada *imágenes*.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-223">In the website, create a subfolder named *images*.</span></span>
2. <span data-ttu-id="cd9a4-224">Copia uno o más *.jpg* archivos en el *imágenes* carpeta.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-224">Copy one or more *.jpg* files into the *images* folder.</span></span>
3. <span data-ttu-id="cd9a4-225">En la raíz del sitio Web, cree un nuevo archivo denominado *FileDelete.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-225">In the root of the website, create a new file named *FileDelete.cshtml*.</span></span>
4. <span data-ttu-id="cd9a4-226">Reemplace el contenido existente por lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="cd9a4-226">Replace the existing content with the following:</span></span> 

    [!code-cshtml[Main](working-with-files/samples/sample6.cshtml)]

    <span data-ttu-id="cd9a4-227">Esta página contiene un formulario donde los usuarios pueden escribir el nombre de un archivo de imagen.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-227">This page contains a form where users can enter the name of an image file.</span></span> <span data-ttu-id="cd9a4-228">Que no entre en el *.jpg* extensión de nombre de archivo; restringiendo el nombre de archivo como esta, que ayuda impide que los usuarios elimine archivos arbitrarios de su sitio.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-228">They don't enter the *.jpg* file-name extension; by restricting the file name like this, you help prevents users from deleting arbitrary files on your site.</span></span>

    <span data-ttu-id="cd9a4-229">El código lee el nombre de archivo que el usuario ha escrito y, a continuación, crea una ruta de acceso completa.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-229">The code reads the file name that the user has entered and then constructs a complete path.</span></span> <span data-ttu-id="cd9a4-230">Para crear la ruta de acceso, el código usa la ruta de acceso del sitio Web actual (devuelto por la `Server.MapPath` método), el *imágenes* ".jpg" como una cadena literal, el nombre que el usuario ha proporcionado y nombre de la carpeta.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-230">To create the path, the code uses the current website path (as returned by the `Server.MapPath` method), the *images* folder name, the name that the user has provided, and ".jpg" as a literal string.</span></span>

    <span data-ttu-id="cd9a4-231">Para eliminar el archivo, el código llama a la `File.Delete` método y pásele la ruta de acceso completa que acaba de crear.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-231">To delete the file, the code calls the `File.Delete` method, passing it the full path that you just constructed.</span></span> <span data-ttu-id="cd9a4-232">Al final del marcado, código muestra un mensaje de confirmación que se ha eliminado el archivo.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-232">At the end of the markup, code displays a confirmation message that the file was deleted.</span></span>
5. <span data-ttu-id="cd9a4-233">Ejecute la página en un explorador.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-233">Run the page in a browser.</span></span> 

    ![[image]](working-with-files/_static/image5.jpg)
6. <span data-ttu-id="cd9a4-235">Escriba el nombre del archivo que desea eliminar y, a continuación, haga clic en **enviar**.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-235">Enter the name of the file to delete and then click **Submit**.</span></span> <span data-ttu-id="cd9a4-236">Si se eliminó el archivo, el nombre del archivo se muestra en la parte inferior de la página.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-236">If the file was deleted, the name of the file is displayed at the bottom of the page.</span></span>

<a id="Letting_Users_Upload_a_File"></a>
## <a name="letting-users-upload-a-file"></a><span data-ttu-id="cd9a4-237">Lo que permite a los usuarios cargar un archivo</span><span class="sxs-lookup"><span data-stu-id="cd9a4-237">Letting Users Upload a File</span></span>

<span data-ttu-id="cd9a4-238">El `FileUpload` auxiliar permite a los usuarios cargar archivos en su sitio Web.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-238">The `FileUpload` helper lets users upload files to your website.</span></span> <span data-ttu-id="cd9a4-239">El procedimiento siguiente muestra cómo permitir que los usuarios cargar un único archivo.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-239">The procedure below shows you how to let users upload a single file.</span></span>

1. <span data-ttu-id="cd9a4-240">Agregue la ASP.NET Web Helpers Library a su sitio Web, como se describe en [las aplicaciones auxiliares de la instalación en un sitio de ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=252372), si no agregó anteriormente.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-240">Add the ASP.NET Web Helpers Library to your website as described in [Installing Helpers in an ASP.NET Web Pages Site](https://go.microsoft.com/fwlink/?LinkId=252372), if you didn't add it previously.</span></span>
2. <span data-ttu-id="cd9a4-241">En el *aplicación\_datos* carpeta, cree un nuevo de una carpeta y asígnele el nombre *UploadedFiles*.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-241">In the *App\_Data* folder, create a new a folder and name it *UploadedFiles*.</span></span>
3. <span data-ttu-id="cd9a4-242">En la raíz, cree un nuevo archivo denominado *FileUpload.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-242">In the root, create a new file named *FileUpload.cshtml*.</span></span>
4. <span data-ttu-id="cd9a4-243">Reemplace el contenido existente en la página con lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="cd9a4-243">Replace the existing content in the page with the following:</span></span> 

    [!code-cshtml[Main](working-with-files/samples/sample7.cshtml)]

    <span data-ttu-id="cd9a4-244">La parte del cuerpo de la página usa el `FileUpload` auxiliar para crear el cuadro de carga y los botones que le resulte familiar:</span><span class="sxs-lookup"><span data-stu-id="cd9a4-244">The body portion of the page uses the `FileUpload` helper to create the upload box and buttons that you're probably familiar with:</span></span>

    ![[image]](working-with-files/_static/image6.jpg)

    <span data-ttu-id="cd9a4-246">Las propiedades configuradas para el `FileUpload` auxiliar especificar que desea que un cuadro único para el archivo para cargar y que desea que el botón Enviar para leer **cargar**.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-246">The properties that you set for the `FileUpload` helper specify that you want a single box for the file to upload and that you want the submit button to read **Upload**.</span></span> <span data-ttu-id="cd9a4-247">(Agregará más cuadros más adelante en este artículo.)</span><span class="sxs-lookup"><span data-stu-id="cd9a4-247">(You'll add more boxes later in the article.)</span></span>

    <span data-ttu-id="cd9a4-248">Cuando el usuario hace clic en **cargar**, el código en la parte superior de la página obtiene el archivo y lo guarda.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-248">When the user clicks **Upload**, the code at the top of the page gets the file and saves it.</span></span> <span data-ttu-id="cd9a4-249">El `Request` objeto que utiliza normalmente para obtener valores de los campos de formulario también tiene un `Files` matriz que contiene el archivo (o archivos) que se han cargado.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-249">The `Request` object that you normally use to get values from form fields also has a `Files` array that contains the file (or files) that have been uploaded.</span></span> <span data-ttu-id="cd9a4-250">Puede obtener los archivos individuales fuera de las posiciones específicas de la matriz &#8212; por ejemplo, para obtener el primer archivo cargado, obtener `Request.Files[0]`, para obtener el segundo archivo, obtendrá `Request.Files[1]`, y así sucesivamente.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-250">You can get individual files out of specific positions in the array &#8212; for example, to get the first uploaded file, you get `Request.Files[0]`, to get the second file, you get `Request.Files[1]`, and so on.</span></span> <span data-ttu-id="cd9a4-251">(Recuerde que en la programación, contando normalmente comienza en cero).</span><span class="sxs-lookup"><span data-stu-id="cd9a4-251">(Remember that in programming, counting usually starts at zero.)</span></span>

    <span data-ttu-id="cd9a4-252">Al recuperar un archivo cargado, se coloca en una variable (en este caso, `uploadedFile`) para que pueda procesarlos.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-252">When you fetch an uploaded file, you put it in a variable (here, `uploadedFile`) so that you can manipulate it.</span></span> <span data-ttu-id="cd9a4-253">Para determinar el nombre del archivo cargado, sólo obtendrá su `FileName` propiedad.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-253">To determine the name of the uploaded file, you just get its `FileName` property.</span></span> <span data-ttu-id="cd9a4-254">Sin embargo, cuando el usuario carga un archivo, `FileName` contiene el nombre del usuario original, que incluye la ruta de acceso completa.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-254">However, when the user uploads a file, `FileName` contains the user's original name, which includes the entire path.</span></span> <span data-ttu-id="cd9a4-255">Podría parecerse a esto:</span><span class="sxs-lookup"><span data-stu-id="cd9a4-255">It might look like this:</span></span>

    <span data-ttu-id="cd9a4-256">*C:\Users\Public\Sample.txt*</span><span class="sxs-lookup"><span data-stu-id="cd9a4-256">*C:\Users\Public\Sample.txt*</span></span>

    <span data-ttu-id="cd9a4-257">Sin embargo, no desea toda esa información de ruta de acceso, ya que es la ruta de acceso en el equipo del usuario, no para el servidor.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-257">You don't want all that path information, though, because that's the path on the user's computer, not for your server.</span></span> <span data-ttu-id="cd9a4-258">Tan solo quiere el nombre de archivo real (*Sample.txt*).</span><span class="sxs-lookup"><span data-stu-id="cd9a4-258">You just want the actual file name (*Sample.txt*).</span></span> <span data-ttu-id="cd9a4-259">Puede eliminar solo el archivo desde una ruta de acceso mediante el uso de la `Path.GetFileName` método, similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="cd9a4-259">You can strip out just the file from a path by using the `Path.GetFileName` method, like this:</span></span>

    [!code-csharp[Main](working-with-files/samples/sample8.cs)]

    <span data-ttu-id="cd9a4-260">La `Path` objeto es una utilidad que tiene una serie de métodos, así que puede usar para quitar rutas de acceso, combinar trazados y así sucesivamente.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-260">The `Path` object is a utility that has a number of methods like this that you can use to strip paths, combine paths, and so on.</span></span>

    <span data-ttu-id="cd9a4-261">Una vez que ha llegado el nombre del archivo cargado, puede crear una nueva ruta de acceso donde desea almacenar el archivo cargado en su sitio Web.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-261">Once you've gotten the name of the uploaded file, you can build a new path for where you want to store the uploaded file in your website.</span></span> <span data-ttu-id="cd9a4-262">En este caso, combinan `Server.MapPath`, los nombres de carpeta (*aplicación\_datos/UploadedFiles*) y el nombre de archivo recién eliminados para crear una nueva ruta de acceso.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-262">In this case, you combine `Server.MapPath`, the folder names (*App\_Data/UploadedFiles*), and the newly stripped file name to create a new path.</span></span> <span data-ttu-id="cd9a4-263">A continuación, puede llamar el archivo cargado `SaveAs` método realmente guardar el archivo.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-263">You can then call the uploaded file's `SaveAs` method to actually save the file.</span></span>
5. <span data-ttu-id="cd9a4-264">Ejecute la página en un explorador.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-264">Run the page in a browser.</span></span> 

    ![[image]](working-with-files/_static/image7.jpg)
6. <span data-ttu-id="cd9a4-266">Haga clic en **examinar** y, a continuación, seleccione un archivo para cargarlo.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-266">Click **Browse** and then select a file to upload.</span></span> 

    ![[image]](working-with-files/_static/image8.jpg)

    <span data-ttu-id="cd9a4-268">El cuadro de texto junto a la **examinar** botón contendrá la ruta de acceso y ubicación del archivo.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-268">The text box next to the **Browse** button will contain the path and file location.</span></span>

    ![[image]](working-with-files/_static/image9.jpg)
7. <span data-ttu-id="cd9a4-270">Haga clic en **Cargar**.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-270">Click **Upload**.</span></span>
8. <span data-ttu-id="cd9a4-271">En el sitio Web, haga clic en la carpeta del proyecto y, a continuación, haga clic en **actualizar**.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-271">In the website, right-click the project folder and then click **Refresh**.</span></span>
9. <span data-ttu-id="cd9a4-272">Abra el *UploadedFiles* carpeta.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-272">Open the *UploadedFiles* folder.</span></span> <span data-ttu-id="cd9a4-273">El archivo cargado está en la carpeta.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-273">The file that you uploaded is in the folder.</span></span> 

    ![[image]](working-with-files/_static/image10.jpg)

<a id="Letting_Users_Upload_Multiple_Files"></a>
## <a name="letting-users-upload-multiple-files"></a><span data-ttu-id="cd9a4-275">Permitir que los usuarios cargar varios archivos</span><span class="sxs-lookup"><span data-stu-id="cd9a4-275">Letting Users Upload Multiple Files</span></span>

<span data-ttu-id="cd9a4-276">En el ejemplo anterior, permiten a los usuarios cargar un archivo.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-276">In the previous example, you let users upload one file.</span></span> <span data-ttu-id="cd9a4-277">Pero puede usar el `FileUpload` auxiliar para cargar varios archivos a la vez.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-277">But you can use the `FileUpload` helper to upload more than one file at a time.</span></span> <span data-ttu-id="cd9a4-278">Esto es útil para escenarios como carga de fotos, donde cargar un archivo cada vez es una tarea tediosa.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-278">This is handy for scenarios like uploading photos, where uploading one file at a time is tedious.</span></span> <span data-ttu-id="cd9a4-279">(Encontrará información sobre cómo cargar fotografías en [trabajar con imágenes en un sitio de ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=202897).) Este ejemplo muestra cómo permitir que los usuarios cargar dos a la vez, aunque puede usar la misma técnica para cargar más que eso.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-279">(You can read about uploading photos in [Working with Images in an ASP.NET Web Pages Site](https://go.microsoft.com/fwlink/?LinkId=202897).) This example shows how to let users upload two at a time, although you can use the same technique to upload more than that.</span></span>

1. <span data-ttu-id="cd9a4-280">Agregue la ASP.NET Web Helpers Library a su sitio Web, como se describe en [las aplicaciones auxiliares de la instalación en un sitio de ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=252372), si no lo ha hecho ya.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-280">Add the ASP.NET Web Helpers Library to your website as described in [Installing Helpers in an ASP.NET Web Pages Site](https://go.microsoft.com/fwlink/?LinkId=252372), if you haven't already.</span></span>
2. <span data-ttu-id="cd9a4-281">Crear una nueva página denominada *FileUploadMultiple.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-281">Create a new page named *FileUploadMultiple.cshtml*.</span></span>
3. <span data-ttu-id="cd9a4-282">Reemplace el contenido existente en la página con lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="cd9a4-282">Replace the existing content in the page with the following:</span></span>  

    [!code-cshtml[Main](working-with-files/samples/sample9.cshtml)]

    <span data-ttu-id="cd9a4-283">En este ejemplo, el `FileUpload` auxiliar en el cuerpo de la página está configurado para permitir que los usuarios cargar dos archivos de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-283">In this example, the `FileUpload` helper in the body of the page is configured to let users upload two files by default.</span></span> <span data-ttu-id="cd9a4-284">Dado que `allowMoreFilesToBeAdded` está establecido en `true`, la aplicación auxiliar representa un vínculo que permite al usuario agregar más cuadros de carga:</span><span class="sxs-lookup"><span data-stu-id="cd9a4-284">Because `allowMoreFilesToBeAdded` is set to `true`, the helper renders a link that lets user add more upload boxes:</span></span>

    ![[image]](working-with-files/_static/image11.jpg)

    <span data-ttu-id="cd9a4-286">Para procesar los archivos que el usuario cargue, el código usa la misma técnica básica que usó en el ejemplo anterior &#8212; obtener un archivo de `Request.Files` y, a continuación, guárdelo.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-286">To process the files that the user uploads, the code uses the same basic technique that you used in the previous example &#8212; get a file from `Request.Files` and then save it.</span></span> <span data-ttu-id="cd9a4-287">(Incluidas las diversas cosas debe hacer para obtener el nombre de archivo correcto y la ruta de acceso.) La innovación en este momento es que el usuario podría tener que cargar varios archivos y no sabe muchos.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-287">(Including the various things you need to do to get the right file name and path.) The innovation this time is that the user might be uploading multiple files and you don't know many.</span></span> <span data-ttu-id="cd9a4-288">Para averiguar, puede obtener `Request.Files.Count`.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-288">To find out, you can get `Request.Files.Count`.</span></span>

    <span data-ttu-id="cd9a4-289">Con este número en mano, puede recorrer `Request.Files`, capturar a su vez cada archivo y guárdelo.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-289">With this number in hand, you can loop through `Request.Files`, fetch each file in turn, and save it.</span></span> <span data-ttu-id="cd9a4-290">Cuando desee que se ejecute en bucle un número determinado de veces a través de una colección, puede usar un `for` bucle, similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="cd9a4-290">When you want to loop a known number of times through a collection, you can use a `for` loop, like this:</span></span>

    [!code-csharp[Main](working-with-files/samples/sample10.cs)]

    <span data-ttu-id="cd9a4-291">La variable `i` es simplemente un contador temporal que irá desde cero hasta el límite superior establecido.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-291">The variable `i` is just a temporary counter that will go from zero to whatever upper limit you set.</span></span> <span data-ttu-id="cd9a4-292">En este caso, el límite superior es el número de archivos.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-292">In this case, the upper limit is the number of files.</span></span> <span data-ttu-id="cd9a4-293">Pero, dado que el contador comienza en cero, como es típico para el recuento de escenarios en ASP.NET, el límite superior es realmente una menor que el número de archivos.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-293">But because the counter starts at zero, as is typical for counting scenarios in ASP.NET, the upper limit is actually one less than the file count.</span></span> <span data-ttu-id="cd9a4-294">(Si se cargan los tres archivos, el recuento es cero a 2).</span><span class="sxs-lookup"><span data-stu-id="cd9a4-294">(If three files are uploaded, the count is zero to 2.)</span></span>

    <span data-ttu-id="cd9a4-295">El `uploadedCount` variable totales de todos los archivos que se cargan y se guardó correctamente.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-295">The `uploadedCount` variable totals all the files that are successfully uploaded and saved.</span></span> <span data-ttu-id="cd9a4-296">Este código en cuenta la posibilidad de que un archivo esperado no pueda cargarse.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-296">This code accounts for the possibility that an expected file may not be able to be uploaded.</span></span>
4. <span data-ttu-id="cd9a4-297">Ejecute la página en un explorador.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-297">Run the page in a browser.</span></span> <span data-ttu-id="cd9a4-298">El explorador muestra la página y sus cuadros de carga de dos.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-298">The browser displays the page and its two upload boxes.</span></span>
5. <span data-ttu-id="cd9a4-299">Seleccione dos archivos para cargar.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-299">Select two files to upload.</span></span>
6. <span data-ttu-id="cd9a4-300">Haga clic en **agregar otro archivo**.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-300">Click **Add another file**.</span></span> <span data-ttu-id="cd9a4-301">La página muestra un cuadro de la carga de nuevo.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-301">The page displays a new upload box.</span></span> 

    ![[image]](working-with-files/_static/image12.jpg)
7. <span data-ttu-id="cd9a4-303">Haga clic en **Cargar**.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-303">Click **Upload**.</span></span>
8. <span data-ttu-id="cd9a4-304">En el sitio Web, haga clic en la carpeta del proyecto y, a continuación, haga clic en **actualizar**.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-304">In the website, right-click the project folder and then click **Refresh**.</span></span>
9. <span data-ttu-id="cd9a4-305">Abra el *UploadedFiles* carpeta para ver los archivos cargados correctamente.</span><span class="sxs-lookup"><span data-stu-id="cd9a4-305">Open the *UploadedFiles* folder to see the successfully uploaded files.</span></span>

<a id="Additional_Resources"></a>
## <a name="additional-resources"></a><span data-ttu-id="cd9a4-306">Recursos adicionales</span><span class="sxs-lookup"><span data-stu-id="cd9a4-306">Additional Resources</span></span>


[<span data-ttu-id="cd9a4-307">Trabajar con imágenes en un sitio de ASP.NET Web Pages</span><span class="sxs-lookup"><span data-stu-id="cd9a4-307">Working with Images in an ASP.NET Web Pages Site</span></span>](https://go.microsoft.com/fwlink/?LinkId=202897)

[<span data-ttu-id="cd9a4-308">Exportar a un archivo CSV</span><span class="sxs-lookup"><span data-stu-id="cd9a4-308">Exporting to a CSV File</span></span>](https://msdn.microsoft.com/library/ms155919.aspx)
