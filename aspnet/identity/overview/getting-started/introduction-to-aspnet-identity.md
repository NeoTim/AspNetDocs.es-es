---
uid: identity/overview/getting-started/introduction-to-aspnet-identity
title: Introducción a ASP.NET Identity - ASP.NET 4.x
author: jongalloway
description: El sistema de pertenencia ASP.NET se introdujo con ASP.NET 2.0 back en 2005 y, puesto que, a continuación, ha habido muchos cambios en lo veinticinco de aplicaciones web de formas...
ms.author: riande
ms.date: 01/22/2019
ms.assetid: 38717fc1-5989-43cf-952d-4007cc1dd923
ms.custom: seoapril2019
msc.legacyurl: /identity/overview/getting-started/introduction-to-aspnet-identity
msc.type: authoredcontent
ms.openlocfilehash: 34a0d62d7afcaffa8fbac0bc774d9266efb6b165
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 04/17/2019
ms.locfileid: "59413053"
---
# <a name="introduction-to-aspnet-identity"></a><span data-ttu-id="89343-103">Introducción a ASP.NET Identity</span><span class="sxs-lookup"><span data-stu-id="89343-103">Introduction to ASP.NET Identity</span></span>


> <span data-ttu-id="89343-104">El sistema de pertenencia ASP.NET se introdujo con ASP.NET 2.0 back en 2005 y, puesto que, a continuación, ha habido muchos cambios en las formas en las aplicaciones web normalmente controlan la autenticación y autorización.</span><span class="sxs-lookup"><span data-stu-id="89343-104">The ASP.NET membership system was introduced with ASP.NET 2.0 back in 2005, and since then there have been many changes in the ways web applications typically handle authentication and authorization.</span></span> <span data-ttu-id="89343-105">ASP.NET Identity es un aspecto novedoso en cuál debe ser el sistema de pertenencia para compilar aplicaciones modernas para la web, tableta o teléfono.</span><span class="sxs-lookup"><span data-stu-id="89343-105">ASP.NET Identity is a fresh look at what the membership system should be when you are building modern applications for the web, phone, or tablet.</span></span>


## <a name="background-membership-in-aspnet"></a><span data-ttu-id="89343-106">Información previa: Pertenencia a ASP.NET</span><span class="sxs-lookup"><span data-stu-id="89343-106">Background: Membership in ASP.NET</span></span>

### <a name="aspnet-membership"></a><span data-ttu-id="89343-107">Pertenencia a ASP.NET</span><span class="sxs-lookup"><span data-stu-id="89343-107">ASP.NET Membership</span></span>

<span data-ttu-id="89343-108">[Pertenencia a ASP.NET](https://msdn.microsoft.com/library/yh26yfzy(v=VS.100).aspx) se diseñó para resolver los requisitos de pertenencia de sitio que son comunes en 2005, que implica la autenticación de formularios y una base de datos de SQL Server para los nombres de usuario, contraseñas y datos de perfil.</span><span class="sxs-lookup"><span data-stu-id="89343-108">[ASP.NET Membership](https://msdn.microsoft.com/library/yh26yfzy(v=VS.100).aspx) was designed to solve site membership requirements that were common in 2005, which involved Forms Authentication, and a SQL Server database for user names, passwords, and profile data.</span></span> <span data-ttu-id="89343-109">En la actualidad hay mucho más amplio de opciones de almacenamiento de datos para aplicaciones web y la mayoría de los desarrolladores desean permitir que sus sitios usar proveedores de identidades sociales para la funcionalidad de autenticación y autorización.</span><span class="sxs-lookup"><span data-stu-id="89343-109">Today there is a much broader array of data storage options for web applications, and most developers want to enable their sites to use social identity providers for authentication and authorization functionality.</span></span> <span data-ttu-id="89343-110">Las limitaciones de diseño de la pertenencia de ASP.NET realizar esta transición difícil:</span><span class="sxs-lookup"><span data-stu-id="89343-110">The limitations of ASP.NET Membership's design make this transition difficult:</span></span>

- <span data-ttu-id="89343-111">El esquema de base de datos se diseñó para SQL Server y no podrá cambiarlo.</span><span class="sxs-lookup"><span data-stu-id="89343-111">The database schema was designed for SQL Server and you can't change it.</span></span> <span data-ttu-id="89343-112">Puede agregar información de perfil, pero los datos adicionales se empaquetan en una tabla diferente, lo que dificulta a acceso por ningún medio, excepto a través de la API de proveedor de Profile.</span><span class="sxs-lookup"><span data-stu-id="89343-112">You can add profile information, but the additional data is packed into a different table, which makes it difficult to access by any means except through the Profile Provider API.</span></span>
- <span data-ttu-id="89343-113">El sistema del proveedor le permite cambiar el almacén de datos de copia de seguridad, pero el sistema está diseñado en torno a las suposiciones adecuadas para una base de datos relacional.</span><span class="sxs-lookup"><span data-stu-id="89343-113">The provider system enables you to change the backing data store, but the system is designed around assumptions appropriate for a relational database.</span></span> <span data-ttu-id="89343-114">Puede escribir un proveedor para almacenar información de pertenencia en un mecanismo de almacenamiento no relacional, como las tablas de almacenamiento de Azure, pero, a continuación, debe evitar el diseño relacional al escribir mucho código y mucha `System.NotImplementedException` excepciones para los métodos que no se aplica a bases de datos NoSQL.</span><span class="sxs-lookup"><span data-stu-id="89343-114">You can write a provider to store membership information in a non-relational storage mechanism, such as Azure Storage Tables, but then you have to work around the relational design by writing much code and a lot of `System.NotImplementedException` exceptions for methods that don't apply to NoSQL databases.</span></span>
- <span data-ttu-id="89343-115">Puesto que la funcionalidad de registro-y registro horizontal se basa en la autenticación de formularios, no se puede usar el sistema de pertenencia [OWIN](../../../aspnet/overview/owin-and-katana/an-overview-of-project-katana.md).</span><span class="sxs-lookup"><span data-stu-id="89343-115">Since the log-in/log-out functionality is based on Forms Authentication, the membership system can't use [OWIN](../../../aspnet/overview/owin-and-katana/an-overview-of-project-katana.md).</span></span> <span data-ttu-id="89343-116">OWIN incluye componentes de middleware para la autenticación, incluida la compatibilidad con inicios de sesión con proveedores de identidades externos (por ejemplo, Accounts de Microsoft, Facebook, Google, Twitter) y los inicios de sesión con cuentas organizativas de Active Directory local o Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="89343-116">OWIN includes middleware components for authentication, including support for log-ins using external identity providers (like Microsoft Accounts, Facebook, Google, Twitter), and log-ins using organizational accounts from on-premises Active Directory or Azure Active Directory.</span></span> <span data-ttu-id="89343-117">OWIN también incluye compatibilidad con OAuth 2.0, JWT y CORS.</span><span class="sxs-lookup"><span data-stu-id="89343-117">OWIN also includes support for OAuth 2.0, JWT and CORS.</span></span>

### <a name="aspnet-simple-membership"></a><span data-ttu-id="89343-118">Pertenencia a ASP.NET Simple</span><span class="sxs-lookup"><span data-stu-id="89343-118">ASP.NET Simple Membership</span></span>

<span data-ttu-id="89343-119">[Pertenencia ASP.NET sencilla](../../../web-pages/overview/security/16-adding-security-and-membership.md) se desarrolló como un sistema de pertenencia de ASP.NET Web Pages.</span><span class="sxs-lookup"><span data-stu-id="89343-119">[ASP.NET simple membership](../../../web-pages/overview/security/16-adding-security-and-membership.md) was developed as a membership system for ASP.NET Web Pages.</span></span> <span data-ttu-id="89343-120">Se lanzó con WebMatrix y Visual Studio 2010 SP1.</span><span class="sxs-lookup"><span data-stu-id="89343-120">It was released with WebMatrix and Visual Studio 2010 SP1.</span></span> <span data-ttu-id="89343-121">El objetivo de pertenencia sencilla era para que sea fácil agregar la funcionalidad de pertenencia a una aplicación de páginas Web.</span><span class="sxs-lookup"><span data-stu-id="89343-121">The goal of Simple Membership was to make it easy to add membership functionality to a Web Pages application.</span></span>

<span data-ttu-id="89343-122">Pertenencia sencilla que resulte más fácil personalizar la información de perfil de usuario, pero todavía comparte los otros problemas con la pertenencia a ASP.NET y tiene algunas limitaciones:</span><span class="sxs-lookup"><span data-stu-id="89343-122">Simple Membership did make it easier to customize user profile information, but it still shares the other problems with ASP.NET Membership, and it has some limitations:</span></span>

- <span data-ttu-id="89343-123">Era difícil conservar los datos del sistema de pertenencia en un almacén no relacional.</span><span class="sxs-lookup"><span data-stu-id="89343-123">It was hard to persist membership system data in a non-relational store.</span></span>
- <span data-ttu-id="89343-124">No puede utilizarla con OWIN.</span><span class="sxs-lookup"><span data-stu-id="89343-124">You can't use it with OWIN.</span></span>
- <span data-ttu-id="89343-125">No funciona bien con los proveedores de pertenencia de ASP.NET existentes y no es extensible.</span><span class="sxs-lookup"><span data-stu-id="89343-125">It doesn't work well with existing ASP.NET Membership providers, and it's not extensible.</span></span>

### <a name="aspnet-universal-providers"></a><span data-ttu-id="89343-126">Proveedores universales de ASP.NET</span><span class="sxs-lookup"><span data-stu-id="89343-126">ASP.NET Universal Providers</span></span>

<span data-ttu-id="89343-127">[ASP.NET Universal Providers](http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx) se desarrollaron para que sea posible conservar información de pertenencia en Microsoft Azure SQL Database y también funcionan con SQL Server Compact.</span><span class="sxs-lookup"><span data-stu-id="89343-127">[ASP.NET Universal Providers](http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx) were developed to make it possible to persist membership information in Microsoft Azure SQL Database, and they also work with SQL Server Compact.</span></span> <span data-ttu-id="89343-128">Los proveedores universales se basa en Entity Framework Code First, lo que significa que los proveedores universales pueden usarse para conservar los datos en cualquier almacén compatible con EF.</span><span class="sxs-lookup"><span data-stu-id="89343-128">The Universal Providers were built on Entity Framework Code First, which means that the Universal Providers can be used to persist data in any store supported by EF.</span></span> <span data-ttu-id="89343-129">Con los proveedores universales, el esquema de base de datos se limpió también una gran cantidad.</span><span class="sxs-lookup"><span data-stu-id="89343-129">With the Universal Providers, the database schema was cleaned up quite a lot as well.</span></span>

<span data-ttu-id="89343-130">Los proveedores universales están integrados en la infraestructura de la pertenencia a ASP.NET, por lo que realizar las mismas limitaciones que el proveedor SqlMembership.</span><span class="sxs-lookup"><span data-stu-id="89343-130">The Universal Providers are built on the ASP.NET Membership infrastructure, so they still carry the same limitations as the SqlMembership Provider.</span></span> <span data-ttu-id="89343-131">Es decir, como se diseñaron para bases de datos relacionales y resulta difícil personalizar la información de usuario y perfiles.</span><span class="sxs-lookup"><span data-stu-id="89343-131">That is, they were designed for relational databases and it's hard to customize profile and user information.</span></span> <span data-ttu-id="89343-132">Estos proveedores también sigue usan la autenticación de formularios para la funcionalidad de inicio de sesión y cierre de sesión.</span><span class="sxs-lookup"><span data-stu-id="89343-132">These providers also still use Forms Authentication for sign-in and sign-out functionality.</span></span>

## <a name="aspnet-identity"></a><span data-ttu-id="89343-133">ASP.NET Identity</span><span class="sxs-lookup"><span data-stu-id="89343-133">ASP.NET Identity</span></span>

<span data-ttu-id="89343-134">Como la pertenencia al caso en ASP.NET ha evolucionado durante años, el equipo de ASP.NET ha aprendido mucho de comentarios de los clientes.</span><span class="sxs-lookup"><span data-stu-id="89343-134">As the membership story in ASP.NET has evolved over the years, the ASP.NET team has learned a lot from feedback from customers.</span></span>

<span data-ttu-id="89343-135">La suposición de que los usuarios iniciarán sesión, escriba un nombre de usuario y una contraseña que ha registrado en su propia aplicación ya no es válida.</span><span class="sxs-lookup"><span data-stu-id="89343-135">The assumption that users will sign in by entering a user name and password that they have registered in your own application is no longer valid.</span></span> <span data-ttu-id="89343-136">La web se ha vuelto más social.</span><span class="sxs-lookup"><span data-stu-id="89343-136">The web has become more social.</span></span> <span data-ttu-id="89343-137">Los usuarios interactúan entre sí en tiempo real a través de canales sociales como Facebook, Twitter y otros sitios web sociales.</span><span class="sxs-lookup"><span data-stu-id="89343-137">Users are interacting with each other in real time through social channels such as Facebook, Twitter, and other social web sites.</span></span> <span data-ttu-id="89343-138">Los desarrolladores desean que los usuarios puedan iniciar sesión con sus identidades sociales, por lo que pueden tener una experiencia enriquecida en sus sitios web.</span><span class="sxs-lookup"><span data-stu-id="89343-138">Developers want users to be able to sign in with their social identities so that they can have a rich experience on their web sites.</span></span> <span data-ttu-id="89343-139">Un sistema de pertenencia moderno debe habilitar los inicios de sesión basada en redirección a los proveedores de autenticación, como Facebook, Twitter y otros.</span><span class="sxs-lookup"><span data-stu-id="89343-139">A modern membership system must enable redirection-based log-ins to authentication providers such as Facebook, Twitter, and others.</span></span>

<span data-ttu-id="89343-140">Como ha evolucionado el desarrollo web, también lo hacían los patrones de desarrollo web.</span><span class="sxs-lookup"><span data-stu-id="89343-140">As web development evolved, so did the patterns of web development.</span></span> <span data-ttu-id="89343-141">Unidad de las pruebas del código de aplicación se convirtió en una preocupación principal para desarrolladores de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="89343-141">Unit testing of application code became a core concern for application developers.</span></span> <span data-ttu-id="89343-142">En 2008, ASP.NET agrega un nuevo marco basado en el patrón Model-View-Controller (MVC), en parte a ayudar a los desarrolladores crear unidad puede probar aplicaciones de ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="89343-142">In 2008 ASP.NET added a new framework based on the Model-View-Controller (MVC) pattern, in part to help developers build unit testable ASP.NET applications.</span></span> <span data-ttu-id="89343-143">Los desarrolladores que querían unidad probar su lógica de aplicación también quería ser capaz de hacerlo con el sistema de pertenencia.</span><span class="sxs-lookup"><span data-stu-id="89343-143">Developers who wanted to unit test their application logic also wanted to be able to do that with the membership system.</span></span>

<span data-ttu-id="89343-144">Teniendo en cuenta estos cambios en el desarrollo de aplicaciones web, ASP.NET Identity se desarrolló con los siguientes objetivos:</span><span class="sxs-lookup"><span data-stu-id="89343-144">Considering these changes in web application development, ASP.NET Identity was developed with the following goals:</span></span>

- <span data-ttu-id="89343-145">**Un sistema ASP.NET Identity**</span><span class="sxs-lookup"><span data-stu-id="89343-145">**One ASP.NET Identity system**</span></span>

    - <span data-ttu-id="89343-146">ASP.NET Identity se puede usar con todos los marcos ASP.NET, como ASP.NET MVC, formularios Web Forms, las páginas Web, Web API y SignalR.</span><span class="sxs-lookup"><span data-stu-id="89343-146">ASP.NET Identity can be used with all of the ASP.NET frameworks, such as ASP.NET MVC, Web Forms, Web Pages, Web API, and SignalR.</span></span>
    - <span data-ttu-id="89343-147">ASP.NET Identity se puede usar cuando se crean aplicaciones web, teléfono, almacén o híbrida.</span><span class="sxs-lookup"><span data-stu-id="89343-147">ASP.NET Identity can be used when you are building web, phone, store, or hybrid applications.</span></span>
- <span data-ttu-id="89343-148">**Facilidad de la conexión de datos de perfil sobre el usuario**</span><span class="sxs-lookup"><span data-stu-id="89343-148">**Ease of plugging in profile data about the user**</span></span>

    - <span data-ttu-id="89343-149">Tener control sobre el esquema de usuario y la información de perfil.</span><span class="sxs-lookup"><span data-stu-id="89343-149">You have control over the schema of user and profile information.</span></span> <span data-ttu-id="89343-150">Por ejemplo, puede habilitar fácilmente el sistema almacenar las fechas de nacimiento especificadas por los usuarios cuando registra una cuenta en la aplicación.</span><span class="sxs-lookup"><span data-stu-id="89343-150">For example, you can easily enable the system to store birth dates entered by users when they register an account in your application.</span></span>

- <span data-ttu-id="89343-151">**Control de persistencia**</span><span class="sxs-lookup"><span data-stu-id="89343-151">**Persistence control**</span></span>

    - <span data-ttu-id="89343-152">De forma predeterminada, el sistema ASP.NET Identity almacena toda la información de usuario en una base de datos.</span><span class="sxs-lookup"><span data-stu-id="89343-152">By default, the ASP.NET Identity system stores all the user information in a database.</span></span> <span data-ttu-id="89343-153">ASP.NET Identity utiliza Entity Framework Code First para implementar todos su mecanismo de persistencia.</span><span class="sxs-lookup"><span data-stu-id="89343-153">ASP.NET Identity uses Entity Framework Code First to implement all of its persistence mechanism.</span></span>
    - <span data-ttu-id="89343-154">Puesto que controlar el esquema de base de datos, tareas comunes, como cambiar los nombres de tabla o el tipo de datos de las claves principales es fácil.</span><span class="sxs-lookup"><span data-stu-id="89343-154">Since you control the database schema, common tasks such as changing table names or changing the data type of primary keys is simple to do.</span></span>
    - <span data-ttu-id="89343-155">Es fácil conectar mecanismos de almacenamiento diferentes, como SharePoint, Azure Storage Table Service, las bases de datos NoSQL, etc., sin tener que iniciar `System.NotImplementedExceptions` excepciones.</span><span class="sxs-lookup"><span data-stu-id="89343-155">It's easy to plug in different storage mechanisms such as SharePoint, Azure Storage Table Service, NoSQL databases, etc., without having to throw `System.NotImplementedExceptions` exceptions.</span></span>
- <span data-ttu-id="89343-156">**Capacidad de prueba unitaria**</span><span class="sxs-lookup"><span data-stu-id="89343-156">**Unit testability**</span></span>

    - <span data-ttu-id="89343-157">ASP.NET Identity hace que la aplicación web de la unidad más apta para las pruebas.</span><span class="sxs-lookup"><span data-stu-id="89343-157">ASP.NET Identity makes the web application more unit testable.</span></span> <span data-ttu-id="89343-158">Puede escribir pruebas unitarias para las partes de la aplicación que utilicen ASP.NET Identity.</span><span class="sxs-lookup"><span data-stu-id="89343-158">You can write unit tests for the parts of your application that use ASP.NET Identity.</span></span>
- <span data-ttu-id="89343-159">**Proveedor de roles**</span><span class="sxs-lookup"><span data-stu-id="89343-159">**Role provider**</span></span>

    - <span data-ttu-id="89343-160">Hay un proveedor de roles que le permite restringir el acceso a partes de la aplicación mediante roles.</span><span class="sxs-lookup"><span data-stu-id="89343-160">There is a role provider which lets you restrict access to parts of your application by roles.</span></span> <span data-ttu-id="89343-161">Fácilmente, puede crear funciones, como "Admin" y agregar usuarios a roles.</span><span class="sxs-lookup"><span data-stu-id="89343-161">You can easily create roles such as "Admin" and add users to roles.</span></span>
- <span data-ttu-id="89343-162">**Basada en notificaciones**</span><span class="sxs-lookup"><span data-stu-id="89343-162">**Claims Based**</span></span>

    - <span data-ttu-id="89343-163">ASP.NET Identity admite la autenticación basada en notificaciones, donde la identidad del usuario se representa como un conjunto de notificaciones.</span><span class="sxs-lookup"><span data-stu-id="89343-163">ASP.NET Identity supports claims-based authentication, where the user's identity is represented as a set of claims.</span></span> <span data-ttu-id="89343-164">Las notificaciones permiten a los desarrolladores a ser mucho más expresivo para describir una identidad de usuario de roles permiten.</span><span class="sxs-lookup"><span data-stu-id="89343-164">Claims allow developers to be a lot more expressive in describing a user's identity than roles allow.</span></span> <span data-ttu-id="89343-165">Mientras que la pertenencia a roles es simplemente un valor booleano (miembro o no miembro), una notificación puede incluir información valiosa acerca de la identidad y la pertenencia del usuario.</span><span class="sxs-lookup"><span data-stu-id="89343-165">Whereas role membership is just a boolean (member or non-member), a claim can include rich information about the user's identity and membership.</span></span>
- <span data-ttu-id="89343-166">**Proveedores de inicio de sesión social**</span><span class="sxs-lookup"><span data-stu-id="89343-166">**Social Login Providers**</span></span>

    - <span data-ttu-id="89343-167">Fácilmente, puede agregar inicios de sesión sociales, como Account de Microsoft, Facebook, Twitter, Google y otros usuarios a la aplicación y almacenar los datos específicos del usuario en la aplicación.</span><span class="sxs-lookup"><span data-stu-id="89343-167">You can easily add social log-ins such as Microsoft Account, Facebook, Twitter, Google, and others to your application, and store the user-specific data in your application.</span></span>

- <span data-ttu-id="89343-168">**Integración de OWIN**</span><span class="sxs-lookup"><span data-stu-id="89343-168">**OWIN Integration**</span></span>

    - <span data-ttu-id="89343-169">Autenticación de ASP.NET se basa ahora en middleware OWIN que se puede usar en cualquier host basado en OWIN.</span><span class="sxs-lookup"><span data-stu-id="89343-169">ASP.NET authentication is now based on OWIN middleware that can be used on any OWIN-based host.</span></span> <span data-ttu-id="89343-170">ASP.NET Identity no tiene ninguna dependencia en System.Web.</span><span class="sxs-lookup"><span data-stu-id="89343-170">ASP.NET Identity does not have any dependency on System.Web.</span></span> <span data-ttu-id="89343-171">Es un marco OWIN totalmente compatible y puede usarse en cualquier aplicación hospedada de OWIN.</span><span class="sxs-lookup"><span data-stu-id="89343-171">It is a fully compliant OWIN framework and can be used in any OWIN hosted application.</span></span>
    - <span data-ttu-id="89343-172">ASP.NET Identity utiliza la autenticación de OWIN para el registro en/log-horizontal de los usuarios en el sitio web.</span><span class="sxs-lookup"><span data-stu-id="89343-172">ASP.NET Identity uses OWIN Authentication for log-in/log-out of users in the web site.</span></span> <span data-ttu-id="89343-173">Esto significa que, en lugar de usar FormsAuthentication para generar la cookie, la aplicación usa OWIN CookieAuthentication hacer eso.</span><span class="sxs-lookup"><span data-stu-id="89343-173">This means that instead of using FormsAuthentication to generate the cookie, the application uses OWIN CookieAuthentication to do that.</span></span>
- <span data-ttu-id="89343-174">**Paquete NuGet**</span><span class="sxs-lookup"><span data-stu-id="89343-174">**NuGet package**</span></span>

    - <span data-ttu-id="89343-175">ASP.NET Identity se redistribuye como un paquete de NuGet que se instala en las plantillas de ASP.NET MVC, formularios Web Forms y Web API que se suministran con Visual Studio 2017.</span><span class="sxs-lookup"><span data-stu-id="89343-175">ASP.NET Identity is redistributed as a NuGet package which is installed in the ASP.NET MVC, Web Forms and Web API templates that ship with Visual Studio 2017.</span></span> <span data-ttu-id="89343-176">Puede descargar este paquete de NuGet desde la Galería de NuGet.</span><span class="sxs-lookup"><span data-stu-id="89343-176">You can download this NuGet package from the NuGet gallery.</span></span>
    - <span data-ttu-id="89343-177">Liberación de ASP.NET Identity como NuGet paquete resulta más fácil para el equipo de ASP.NET iterar en las nuevas características y correcciones de errores y ofrecer a los desarrolladores de una manera ágil.</span><span class="sxs-lookup"><span data-stu-id="89343-177">Releasing ASP.NET Identity as a NuGet package makes it easier for the ASP.NET team to iterate on new features and bug fixes, and deliver these to developers in an agile manner.</span></span>

## <a name="get-started-with-aspnet-identity"></a><span data-ttu-id="89343-178">Introducción a ASP.NET Identity</span><span class="sxs-lookup"><span data-stu-id="89343-178">Get started with ASP.NET Identity</span></span>

<span data-ttu-id="89343-179">ASP.NET Identity se utiliza en las plantillas de proyecto de Visual Studio 2017 para ASP.NET MVC, formularios Web Forms, Web API y SPA.</span><span class="sxs-lookup"><span data-stu-id="89343-179">ASP.NET Identity is used in the Visual Studio 2017 project templates for ASP.NET MVC, Web Forms, Web API and SPA.</span></span> <span data-ttu-id="89343-180">En este tutorial, le explicaremos cómo las plantillas de proyecto usan ASP.NET Identity para agregar funcionalidad para registrar, inicie sesión y cerrar sesión un usuario.</span><span class="sxs-lookup"><span data-stu-id="89343-180">In this walkthrough, we'll illustrate how the project templates use ASP.NET Identity to add functionality to register, sign in and sign out a user.</span></span>

<span data-ttu-id="89343-181">ASP.NET Identity se implementa mediante el procedimiento siguiente.</span><span class="sxs-lookup"><span data-stu-id="89343-181">ASP.NET Identity is implemented using the following procedure.</span></span> <span data-ttu-id="89343-182">El propósito de este artículo es proporcionarle una visión general de alto nivel de ASP.NET Identity; puede seguir paso a paso o simplemente leer los detalles.</span><span class="sxs-lookup"><span data-stu-id="89343-182">The purpose of this article is to give you a high level overview of ASP.NET Identity; you can follow it step by step or just read the details.</span></span> <span data-ttu-id="89343-183">Para obtener instrucciones más detalladas sobre la creación de aplicaciones con ASP.NET Identity, incluido el uso de la nueva API para agregar usuarios, roles y la información de perfil, vea la sección pasos siguientes al final de este artículo.</span><span class="sxs-lookup"><span data-stu-id="89343-183">For more detailed instructions on creating apps using ASP.NET Identity, including using the new API to add users, roles and profile information, see the Next Steps section at the end of this article.</span></span>

1. <span data-ttu-id="89343-184">Cree una aplicación ASP.NET MVC con cuentas individuales.</span><span class="sxs-lookup"><span data-stu-id="89343-184">Create an ASP.NET MVC application with Individual Accounts.</span></span> <span data-ttu-id="89343-185">Puede usar ASP.NET Identity en ASP.NET MVC, formularios Web Forms, Web API, SignalR etcetera. En este artículo comenzamos con una aplicación ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="89343-185">You can use ASP.NET Identity in ASP.NET MVC, Web Forms, Web API, SignalR etc. In this article we will start with an ASP.NET MVC application.</span></span>  
  
    ![](introduction-to-aspnet-identity/_static/image1.png)
2. <span data-ttu-id="89343-186">El proyecto creado contiene los siguientes tres paquetes de ASP.NET Identity.</span><span class="sxs-lookup"><span data-stu-id="89343-186">The created project contains the following three packages for ASP.NET Identity.</span></span>

    - [`Microsoft.AspNet.Identity.EntityFramework`](http://www.nuget.org/packages/Microsoft.AspNet.Identity.EntityFramework/)  
   <span data-ttu-id="89343-187">Este paquete tiene la implementación de Entity Framework de ASP.NET Identity que se conservarán los datos de identidad de ASP.NET y el esquema a SQL Server.</span><span class="sxs-lookup"><span data-stu-id="89343-187">This package has the Entity Framework implementation of ASP.NET Identity which will persist the ASP.NET Identity data and schema to SQL Server.</span></span>
    - [`Microsoft.AspNet.Identity.Core`](http://www.nuget.org/packages/Microsoft.AspNet.Identity.Core/)  
   <span data-ttu-id="89343-188">Este paquete tiene las interfaces del núcleo de ASP.NET Identity.</span><span class="sxs-lookup"><span data-stu-id="89343-188">This package has the core interfaces for ASP.NET Identity.</span></span> <span data-ttu-id="89343-189">Este paquete se puede usar para escribir una implementación para la identidad de ASP.NET que almacena persistencia diferentes destinos como Azure Table Storage, NoSQL etcetera las bases de datos.</span><span class="sxs-lookup"><span data-stu-id="89343-189">This package can be used to write an implementation for ASP.NET Identity that targets different persistence stores such as Azure Table Storage, NoSQL databases etc.</span></span>
    - [`Microsoft.AspNet.Identity.OWIN`](http://www.nuget.org/packages/Microsoft.AspNet.Identity.Owin/)  
   <span data-ttu-id="89343-190">Este paquete contiene la funcionalidad que se usa para conectar autenticación OWIN con ASP.NET Identity en aplicaciones ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="89343-190">This package contains functionality that is used to plug in OWIN authentication with ASP.NET Identity in ASP.NET applications.</span></span> <span data-ttu-id="89343-191">Esto se utiliza cuando se agrega un inicio de sesión en la funcionalidad a su aplicación y llamar a la autenticación de cookies de OWIN middleware para generar una cookie.</span><span class="sxs-lookup"><span data-stu-id="89343-191">This is used when you add sign in functionality to your application and call into OWIN Cookie Authentication middleware to generate a cookie.</span></span>
3. <span data-ttu-id="89343-192">Creación de un usuario.</span><span class="sxs-lookup"><span data-stu-id="89343-192">Creating a user.</span></span>  
   <span data-ttu-id="89343-193">Iniciar la aplicación y, a continuación, haga clic en el **registrar** vínculo para crear un usuario.</span><span class="sxs-lookup"><span data-stu-id="89343-193">Launch the application and then click on the **Register** link to create a user.</span></span> <span data-ttu-id="89343-194">La siguiente imagen muestra la página de registro que se recopilan en el nombre de usuario y la contraseña.</span><span class="sxs-lookup"><span data-stu-id="89343-194">The following image shows the Register page that collects the user name and password.</span></span>  
  
    ![](introduction-to-aspnet-identity/_static/image2.png)  
  
   <span data-ttu-id="89343-195">Cuando el usuario selecciona el **registrar** botón, el `Register` acción del controlador de la cuenta crea el usuario mediante una llamada a la API de ASP.NET Identity, tal como se muestra a continuación:</span><span class="sxs-lookup"><span data-stu-id="89343-195">When the user selects the **Register** button, the `Register` action of the Account controller creates the user by calling the ASP.NET Identity API, as highlighted below:</span></span>

    [!code-csharp[Main](introduction-to-aspnet-identity/samples/sample1.cs?highlight=8-9)]
4. <span data-ttu-id="89343-196">Inicia sesión.</span><span class="sxs-lookup"><span data-stu-id="89343-196">Sign in.</span></span>  
   <span data-ttu-id="89343-197">Si el usuario se creó correctamente, inicia sesión el `SignInAsync` método.</span><span class="sxs-lookup"><span data-stu-id="89343-197">If the user was successfully created, she is signed in by the `SignInAsync` method.</span></span>  

    [!code-csharp[Main](introduction-to-aspnet-identity/samples/sample6.cs?highlight=12)]


   <span data-ttu-id="89343-198">El `SignInManager.SignInAsync` método genera una [ClaimsIdentity](https://msdn.microsoft.com/library/system.security.claims.claimsidentity.aspx).</span><span class="sxs-lookup"><span data-stu-id="89343-198">The `SignInManager.SignInAsync` method generates a [ClaimsIdentity](https://msdn.microsoft.com/library/system.security.claims.claimsidentity.aspx).</span></span> <span data-ttu-id="89343-199">Dado que ASP.NET Identity y autenticación de cookies de OWIN son sistema basada en notificaciones, el marco de trabajo requiere la aplicación para generar una ClaimsIdentity para el usuario.</span><span class="sxs-lookup"><span data-stu-id="89343-199">Since ASP.NET Identity and OWIN Cookie Authentication are claims-based system, the framework requires the app to generate a ClaimsIdentity for the user.</span></span> <span data-ttu-id="89343-200">ClaimsIdentity tiene información sobre todas las notificaciones del usuario, como los roles que pertenece el usuario.</span><span class="sxs-lookup"><span data-stu-id="89343-200">ClaimsIdentity has information about all the claims for the user, such as what roles the user belongs to.</span></span>   
 
5. <span data-ttu-id="89343-201">Cierre la sesión.</span><span class="sxs-lookup"><span data-stu-id="89343-201">Log off.</span></span>  
   <span data-ttu-id="89343-202">Seleccione el **cerrar** vínculo para llamar a la acción de cierre de sesión en el controlador de cuentas.</span><span class="sxs-lookup"><span data-stu-id="89343-202">Select the **Log off** link to call the LogOff action in the account controller.</span></span> 

    [!code-csharp[Main](introduction-to-aspnet-identity/samples/sample5.cs?highlight=6)]

   <span data-ttu-id="89343-203">Código resaltado anterior se muestra cómo OWIN `AuthenticationManager.SignOut` método.</span><span class="sxs-lookup"><span data-stu-id="89343-203">The highlighted code above shows the OWIN `AuthenticationManager.SignOut` method.</span></span> <span data-ttu-id="89343-204">Esto es análogo a [FormsAuthentication.SignOut](https://msdn.microsoft.com/library/system.web.security.formsauthentication.signout.aspx) método utilizado por el [FormsAuthentication](https://msdn.microsoft.com/library/system.web.security.formsauthenticationmodule.aspx) módulo en formularios Web Forms.</span><span class="sxs-lookup"><span data-stu-id="89343-204">This is analogous to [FormsAuthentication.SignOut](https://msdn.microsoft.com/library/system.web.security.formsauthentication.signout.aspx) method used by the [FormsAuthentication](https://msdn.microsoft.com/library/system.web.security.formsauthenticationmodule.aspx) module in Web Forms.</span></span>

## <a name="components-of-aspnet-identity"></a><span data-ttu-id="89343-205">Componentes de ASP.NET Identity</span><span class="sxs-lookup"><span data-stu-id="89343-205">Components of ASP.NET Identity</span></span>

<span data-ttu-id="89343-206">El diagrama siguiente muestra los componentes del sistema ASP.NET Identity (seleccione en [esto](introduction-to-aspnet-identity/_static/image3.png) o en el diagrama para ampliarla).</span><span class="sxs-lookup"><span data-stu-id="89343-206">The diagram below shows the components of the ASP.NET Identity system (select on [this](introduction-to-aspnet-identity/_static/image3.png) or on the diagram to enlarge it).</span></span> <span data-ttu-id="89343-207">Los paquetes en verde conforman el sistema ASP.NET Identity.</span><span class="sxs-lookup"><span data-stu-id="89343-207">The packages in green make up the ASP.NET Identity system.</span></span> <span data-ttu-id="89343-208">Todos los paquetes son dependencias que son necesarios para usar el sistema ASP.NET Identity en aplicaciones ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="89343-208">All the other packages are dependencies which are needed to use the ASP.NET Identity system in ASP.NET applications.</span></span>

[![](introduction-to-aspnet-identity/_static/image5.png)](introduction-to-aspnet-identity/_static/image4.png)

<span data-ttu-id="89343-209">La siguiente es una breve descripción de los paquetes de NuGet que no se ha mencionado anteriormente:</span><span class="sxs-lookup"><span data-stu-id="89343-209">The following is a brief description of the NuGet packages not mentioned previously:</span></span>

- [<span data-ttu-id="89343-210">Microsoft.Owin.Security.Cookies</span><span class="sxs-lookup"><span data-stu-id="89343-210">Microsoft.Owin.Security.Cookies</span></span>](http://www.nuget.org/packages/Microsoft.Owin.Security.Cookies/)  
 <span data-ttu-id="89343-211">Middleware que permite que una aplicación usar la cookie basa la autenticación, similar a ASP. Autenticación de formularios de la red.</span><span class="sxs-lookup"><span data-stu-id="89343-211">Middleware that enables an application to use cookie based authentication, similar to ASP.NET's Forms Authentication.</span></span>
- [<span data-ttu-id="89343-212">EntityFramework</span><span class="sxs-lookup"><span data-stu-id="89343-212">EntityFramework</span></span>](http://www.nuget.org/packages/EntityFramework/)  
 <span data-ttu-id="89343-213">Entity Framework es la tecnología de acceso de datos recomendado de Microsoft para bases de datos relacionales.</span><span class="sxs-lookup"><span data-stu-id="89343-213">Entity Framework is Microsoft's recommended data access technology for relational databases.</span></span>

## <a name="migrating-from-membership-to-aspnet-identity"></a><span data-ttu-id="89343-214">Migración de la pertenencia a ASP.NET Identity</span><span class="sxs-lookup"><span data-stu-id="89343-214">Migrating from Membership to ASP.NET Identity</span></span>

<span data-ttu-id="89343-215">Esperamos que pronto se proporcionan instrucciones sobre cómo migrar las aplicaciones existentes que usan la pertenencia de ASP.NET o de pertenencia sencilla al nuevo sistema ASP.NET Identity.</span><span class="sxs-lookup"><span data-stu-id="89343-215">We hope to soon provide guidance on migrating your existing apps that use ASP.NET Membership or Simple Membership to the new ASP.NET Identity system.</span></span>

## <a name="next-steps"></a><span data-ttu-id="89343-216">Pasos siguientes</span><span class="sxs-lookup"><span data-stu-id="89343-216">Next Steps</span></span>

- [<span data-ttu-id="89343-217">Crear una aplicación ASP.NET MVC 5 con Facebook y Google OAuth2 y OpenID Sign-on</span><span class="sxs-lookup"><span data-stu-id="89343-217">Create an ASP.NET MVC 5 App with Facebook and Google OAuth2 and OpenID Sign-on</span></span>](../../../mvc/overview/security/create-an-aspnet-mvc-5-app-with-facebook-and-google-oauth2-and-openid-sign-on.md)  
 <span data-ttu-id="89343-218">El tutorial utiliza la API de ASP.NET Identity para agregar información de perfil para la base de datos de usuario y cómo realizar la autenticación con Google y Facebook.</span><span class="sxs-lookup"><span data-stu-id="89343-218">The tutorial uses the ASP.NET Identity API to add profile information to the user database, and how to authenticate with Google and Facebook.</span></span>
- [<span data-ttu-id="89343-219">Crear una aplicación ASP.NET MVC con la autenticación y base de datos SQL e implementar en Azure App Service</span><span class="sxs-lookup"><span data-stu-id="89343-219">Create an ASP.NET MVC app with auth and SQL DB and deploy to Azure App Service</span></span>](https://docs.microsoft.com/aspnet/core/security/authorization/secure-data)  
 <span data-ttu-id="89343-220">Este tutorial muestra cómo usar la API de identidad para agregar usuarios y roles.</span><span class="sxs-lookup"><span data-stu-id="89343-220">This tutorial shows how to use the Identity API to add users and roles.</span></span>
- [https://github.com/rustd/AspnetIdentitySample](https://github.com/rustd/AspnetIdentitySample)  
 <span data-ttu-id="89343-221">Aplicación de ejemplo que muestra cómo agregar roles básicos y soporte técnico de usuario y cómo realizar la administración de usuarios y roles.</span><span class="sxs-lookup"><span data-stu-id="89343-221">Sample application that shows how to add basic roles and user support and how to do roles and user management.</span></span>
