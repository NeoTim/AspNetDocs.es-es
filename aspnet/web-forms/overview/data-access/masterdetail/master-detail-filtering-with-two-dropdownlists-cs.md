---
uid: web-forms/overview/data-access/masterdetail/master-detail-filtering-with-two-dropdownlists-cs
title: Filtrado de maestro y detalles con dos DropDownListsC#() | Microsoft Docs
author: rick-anderson
description: En este tutorial se expande la relación principal-detalle para agregar una tercera capa, mediante dos controles DropDownList para seleccionar el elemento primario y el grabación primario que se desean...
ms.author: riande
ms.date: 03/31/2010
ms.assetid: ac4b0d77-4816-4ded-afd0-88dab667aedd
msc.legacyurl: /web-forms/overview/data-access/masterdetail/master-detail-filtering-with-two-dropdownlists-cs
msc.type: authoredcontent
ms.openlocfilehash: e24b7f91d34fbce1676f7f28ebb7d23903157f7f
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 11/28/2019
ms.locfileid: "74625759"
---
# <a name="masterdetail-filtering-with-two-dropdownlists-c"></a><span data-ttu-id="35b1f-103">Filtrado de maestro y detalles con dos DropDownLists (C#)</span><span class="sxs-lookup"><span data-stu-id="35b1f-103">Master/Detail Filtering With Two DropDownLists (C#)</span></span>

<span data-ttu-id="35b1f-104">por [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="35b1f-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="35b1f-105">[Descarga](https://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_8_CS.exe) de la aplicación de ejemplo o [descarga de PDF](master-detail-filtering-with-two-dropdownlists-cs/_static/datatutorial08cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="35b1f-105">[Download Sample App](https://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_8_CS.exe) or [Download PDF](master-detail-filtering-with-two-dropdownlists-cs/_static/datatutorial08cs1.pdf)</span></span>

> <span data-ttu-id="35b1f-106">En este tutorial se expande la relación principal-detalle para agregar una tercera capa, mediante dos controles DropDownList para seleccionar los registros primarios y principales deseados.</span><span class="sxs-lookup"><span data-stu-id="35b1f-106">This tutorial expands the master/detail relationship to add a third layer, using two DropDownList controls to select the desired parent and grandparent records.</span></span>

## <a name="introduction"></a><span data-ttu-id="35b1f-107">Introducción</span><span class="sxs-lookup"><span data-stu-id="35b1f-107">Introduction</span></span>

<span data-ttu-id="35b1f-108">En el [tutorial anterior](master-detail-filtering-with-a-dropdownlist-cs.md) , hemos examinado cómo mostrar un informe sencillo de maestro y detalles con un solo DropDownList rellenado con las categorías y un control GridView que muestra los productos que pertenecen a la categoría seleccionada.</span><span class="sxs-lookup"><span data-stu-id="35b1f-108">In the [previous tutorial](master-detail-filtering-with-a-dropdownlist-cs.md) we examined how to display a simple master/details report using a single DropDownList populated with the categories and a GridView showing those products that belong to the selected category.</span></span> <span data-ttu-id="35b1f-109">Este patrón de informe funciona bien cuando se muestran registros que tienen una relación de uno a varios y se pueden ampliar fácilmente para trabajar en escenarios que incluyen varias relaciones uno a varios.</span><span class="sxs-lookup"><span data-stu-id="35b1f-109">This report pattern works well when displaying records that have a one-to-many relationship and can easily be extended to work for scenarios that include multiple one-to-many relationships.</span></span> <span data-ttu-id="35b1f-110">Por ejemplo, un sistema de entrada de pedidos tendría tablas que corresponden a clientes, pedidos y artículos de línea de pedido.</span><span class="sxs-lookup"><span data-stu-id="35b1f-110">For example, an order entry system would have tables that correspond to customers, orders, and order line items.</span></span> <span data-ttu-id="35b1f-111">Un cliente determinado puede tener varios pedidos con cada pedido que consta de varios elementos.</span><span class="sxs-lookup"><span data-stu-id="35b1f-111">A given customer may have multiple orders with each order consisting of multiple items.</span></span> <span data-ttu-id="35b1f-112">Estos datos se pueden presentar al usuario con dos DropDownLists y un control GridView.</span><span class="sxs-lookup"><span data-stu-id="35b1f-112">Such data can be presented to the user with two DropDownLists and a GridView.</span></span> <span data-ttu-id="35b1f-113">El primer DropDownList tendría un elemento de lista para cada cliente en la base de datos, donde el contenido de la segunda parte es el de los pedidos realizados por el cliente seleccionado.</span><span class="sxs-lookup"><span data-stu-id="35b1f-113">The first DropDownList would have a list item for each customer in the database with the second one's contents being the orders placed by the selected customer.</span></span> <span data-ttu-id="35b1f-114">Un control GridView Enumeraría los elementos de línea del pedido seleccionado.</span><span class="sxs-lookup"><span data-stu-id="35b1f-114">A GridView would list the line items from the selected order.</span></span>

<span data-ttu-id="35b1f-115">Aunque la base de datos Northwind incluye la información canónica Customer/Order/Order Details en sus `Customers`, `Orders`y `Order Details` tablas, estas tablas no se capturan en nuestra arquitectura.</span><span class="sxs-lookup"><span data-stu-id="35b1f-115">While the Northwind database include the canonical customer/order/order details information in its `Customers`, `Orders`, and `Order Details` tables, these tables aren't captured in our architecture.</span></span> <span data-ttu-id="35b1f-116">No obstante, podemos seguir ilustrando el uso de dos DropDownLists dependientes.</span><span class="sxs-lookup"><span data-stu-id="35b1f-116">Nonetheless, we can still illustrate using two dependent DropDownLists.</span></span> <span data-ttu-id="35b1f-117">En el primer DropDownList se enumeran las categorías y la segunda de los productos que pertenecen a la categoría seleccionada.</span><span class="sxs-lookup"><span data-stu-id="35b1f-117">The first DropDownList will list the categories and the second the products belonging to the selected category.</span></span> <span data-ttu-id="35b1f-118">A continuación, DetailsView mostrará los detalles del producto seleccionado.</span><span class="sxs-lookup"><span data-stu-id="35b1f-118">A DetailsView will then list the details of the selected product.</span></span>

## <a name="step-1-creating-and-populating-the-categories-dropdownlist"></a><span data-ttu-id="35b1f-119">Paso 1: crear y rellenar las categorías DropDownList</span><span class="sxs-lookup"><span data-stu-id="35b1f-119">Step 1: Creating and Populating the Categories DropDownList</span></span>

<span data-ttu-id="35b1f-120">Nuestro primer objetivo es agregar el DropDownList que enumera las categorías.</span><span class="sxs-lookup"><span data-stu-id="35b1f-120">Our first goal is to add the DropDownList that lists the categories.</span></span> <span data-ttu-id="35b1f-121">Estos pasos se examinaron detalladamente en el tutorial anterior, pero se resumen aquí para la integridad.</span><span class="sxs-lookup"><span data-stu-id="35b1f-121">These steps were examined in detail in the preceding tutorial, but are summarized here for completeness.</span></span>

<span data-ttu-id="35b1f-122">Abra la página `MasterDetailsDetails.aspx` de la carpeta `Filtering`, agregue un DropDownList a la página, establezca su propiedad `ID` en `Categories`y, a continuación, haga clic en el vínculo configurar origen de datos en su etiqueta inteligente.</span><span class="sxs-lookup"><span data-stu-id="35b1f-122">Open the `MasterDetailsDetails.aspx` page in the `Filtering` folder, add a DropDownList to the page, set its `ID` property to `Categories`, and then click the Configure Data Source link in its smart tag.</span></span> <span data-ttu-id="35b1f-123">En el Asistente para la configuración de orígenes de datos, elija Agregar un nuevo origen de datos.</span><span class="sxs-lookup"><span data-stu-id="35b1f-123">From the Data Source Configuration Wizard choose to add a new data source.</span></span>

<span data-ttu-id="35b1f-124">[![agregar un nuevo origen de datos para DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image2.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="35b1f-124">[![Add a New Data Source for the DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image2.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image1.png)</span></span>

<span data-ttu-id="35b1f-125">**Figura 1**: agregar un nuevo origen de datos para el DropDownList ([haga clic para ver la imagen de tamaño completo](master-detail-filtering-with-two-dropdownlists-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="35b1f-125">**Figure 1**: Add a New Data Source for the DropDownList ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image3.png))</span></span>

<span data-ttu-id="35b1f-126">El nuevo origen de datos debe ser, de forma natural, una ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="35b1f-126">The new data source should, naturally, be an ObjectDataSource.</span></span> <span data-ttu-id="35b1f-127">Asigne a este nuevo `CategoriesDataSource` ObjectDataSource el nombre e invoque al método `GetCategories()` del objeto `CategoriesBLL`.</span><span class="sxs-lookup"><span data-stu-id="35b1f-127">Name this new ObjectDataSource `CategoriesDataSource` and have it invoke the `CategoriesBLL` object's `GetCategories()` method.</span></span>

<span data-ttu-id="35b1f-128">[![optar por usar la clase CategoriesBLL](master-detail-filtering-with-two-dropdownlists-cs/_static/image5.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="35b1f-128">[![Choose to Use the CategoriesBLL Class](master-detail-filtering-with-two-dropdownlists-cs/_static/image5.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image4.png)</span></span>

<span data-ttu-id="35b1f-129">**Figura 2**: elija usar la clase `CategoriesBLL` ([haga clic para ver la imagen de tamaño completo](master-detail-filtering-with-two-dropdownlists-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="35b1f-129">**Figure 2**: Choose to Use the `CategoriesBLL` Class ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image6.png))</span></span>

<span data-ttu-id="35b1f-130">[![configurar ObjectDataSource para usar el método GetCategories ()](master-detail-filtering-with-two-dropdownlists-cs/_static/image8.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="35b1f-130">[![Configure the ObjectDataSource to Use the GetCategories() Method](master-detail-filtering-with-two-dropdownlists-cs/_static/image8.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image7.png)</span></span>

<span data-ttu-id="35b1f-131">**Figura 3**: configuración de ObjectDataSource para usar el método `GetCategories()` ([haga clic para ver la imagen de tamaño completo](master-detail-filtering-with-two-dropdownlists-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="35b1f-131">**Figure 3**: Configure the ObjectDataSource to Use the `GetCategories()` Method ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image9.png))</span></span>

<span data-ttu-id="35b1f-132">Después de configurar la ObjectDataSource, todavía necesitamos especificar qué campo de origen de datos se debe mostrar en el `Categories` DropDownList y cuál debe configurarse como el valor del elemento de lista.</span><span class="sxs-lookup"><span data-stu-id="35b1f-132">After configuring the ObjectDataSource we still need to specify which data source field should be displayed in the `Categories` DropDownList and which one should be configured as the value for the list item.</span></span> <span data-ttu-id="35b1f-133">Establezca el campo `CategoryName` como la pantalla y `CategoryID` como el valor de cada elemento de la lista.</span><span class="sxs-lookup"><span data-stu-id="35b1f-133">Set the `CategoryName` field as the display and `CategoryID` as the value for each list item.</span></span>

<span data-ttu-id="35b1f-134">[![que el DropDownList muestre el campo CategoryName y use CategoryID como valor](master-detail-filtering-with-two-dropdownlists-cs/_static/image11.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="35b1f-134">[![Have the DropDownList Display the CategoryName Field and Use CategoryID as the Value](master-detail-filtering-with-two-dropdownlists-cs/_static/image11.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image10.png)</span></span>

<span data-ttu-id="35b1f-135">**Figura 4**: haga que el DropDownList muestre el campo `CategoryName` y use `CategoryID` como valor ([haga clic para ver la imagen de tamaño completo](master-detail-filtering-with-two-dropdownlists-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="35b1f-135">**Figure 4**: Have the DropDownList Display the `CategoryName` Field and Use `CategoryID` as the Value ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image12.png))</span></span>

<span data-ttu-id="35b1f-136">En este momento, tenemos un control DropDownList (`Categories`) que se rellena con los registros de la tabla `Categories`.</span><span class="sxs-lookup"><span data-stu-id="35b1f-136">At this point we have a DropDownList control (`Categories`) that's populated with the records from the `Categories` table.</span></span> <span data-ttu-id="35b1f-137">Cuando el usuario elige una nueva categoría de la clase DropDownList, queremos que se produzca un postback para actualizar el objeto DropDownList del producto que vamos a crear en el paso 2.</span><span class="sxs-lookup"><span data-stu-id="35b1f-137">When the user chooses a new category from the DropDownList we'll want a postback to occur in order to refresh the product DropDownList that we're going to create in Step 2.</span></span> <span data-ttu-id="35b1f-138">Por lo tanto, active la opción Habilitar AutoPostBack en la etiqueta inteligente de `categories` DropDownList.</span><span class="sxs-lookup"><span data-stu-id="35b1f-138">Therefore, check the Enable AutoPostBack option from the `categories` DropDownList's smart tag.</span></span>

<span data-ttu-id="35b1f-139">[![habilitar AutoPostBack para las categorías DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image14.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="35b1f-139">[![Enable AutoPostBack for the Categories DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image14.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image13.png)</span></span>

<span data-ttu-id="35b1f-140">**Figura 5**: habilitar AutoPostBack para el `Categories` DropDownList ([haga clic para ver la imagen de tamaño completo](master-detail-filtering-with-two-dropdownlists-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="35b1f-140">**Figure 5**: Enable AutoPostBack for the `Categories` DropDownList ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image15.png))</span></span>

## <a name="step-2-displaying-the-selected-categorys-products-in-a-second-dropdownlist"></a><span data-ttu-id="35b1f-141">Paso 2: mostrar los productos de la categoría seleccionada en un segundo DropDownList</span><span class="sxs-lookup"><span data-stu-id="35b1f-141">Step 2: Displaying the Selected Category's Products in a Second DropDownList</span></span>

<span data-ttu-id="35b1f-142">Con el `Categories` DropDownList completado, el siguiente paso es mostrar un DropDownList de productos que pertenecen a la categoría seleccionada.</span><span class="sxs-lookup"><span data-stu-id="35b1f-142">With the `Categories` DropDownList completed, our next step is to display a DropDownList of products belonging to the selected category.</span></span> <span data-ttu-id="35b1f-143">Para ello, agregue otro DropDownList a la página denominada `ProductsByCategory`.</span><span class="sxs-lookup"><span data-stu-id="35b1f-143">To accomplish this, add another DropDownList to the page named `ProductsByCategory`.</span></span> <span data-ttu-id="35b1f-144">Como con el `Categories` DropDownList, cree un nuevo ObjectDataSource para el `ProductsByCategory` DropDownList denominado `ProductsByCategoryDataSource`.</span><span class="sxs-lookup"><span data-stu-id="35b1f-144">As with the `Categories` DropDownList, create a new ObjectDataSource for the `ProductsByCategory` DropDownList named `ProductsByCategoryDataSource`.</span></span>

<span data-ttu-id="35b1f-145">[![agregar un nuevo origen de datos para el ProductsByCategory DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image17.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="35b1f-145">[![Add a New Data Source for the ProductsByCategory DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image17.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image16.png)</span></span>

<span data-ttu-id="35b1f-146">**Figura 6**: agregar un nuevo origen de datos para el `ProductsByCategory` DropDownList ([haga clic para ver la imagen de tamaño completo](master-detail-filtering-with-two-dropdownlists-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="35b1f-146">**Figure 6**: Add a New Data Source for the `ProductsByCategory` DropDownList ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image18.png))</span></span>

<span data-ttu-id="35b1f-147">[![crear un nuevo ObjectDataSource denominado ProductsByCategoryDataSource](master-detail-filtering-with-two-dropdownlists-cs/_static/image20.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="35b1f-147">[![Create a New ObjectDataSource Named ProductsByCategoryDataSource](master-detail-filtering-with-two-dropdownlists-cs/_static/image20.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image19.png)</span></span>

<span data-ttu-id="35b1f-148">**Figura 7**: creación de un nuevo ObjectDataSource denominado `ProductsByCategoryDataSource` ([haga clic para ver la imagen de tamaño completo](master-detail-filtering-with-two-dropdownlists-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="35b1f-148">**Figure 7**: Create a New ObjectDataSource Named `ProductsByCategoryDataSource` ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image21.png))</span></span>

<span data-ttu-id="35b1f-149">Dado que el `ProductsByCategory` DropDownList necesita mostrar solo los productos que pertenecen a la categoría seleccionada, haga que ObjectDataSource invoque el método `GetProductsByCategoryID(categoryID)` del objeto `ProductsBLL`.</span><span class="sxs-lookup"><span data-stu-id="35b1f-149">Since the `ProductsByCategory` DropDownList needs to display just those products belonging to the selected category, have the ObjectDataSource invoke the `GetProductsByCategoryID(categoryID)` method from the `ProductsBLL` object.</span></span>

<span data-ttu-id="35b1f-150">[![optar por usar la clase ProductsBLL](master-detail-filtering-with-two-dropdownlists-cs/_static/image23.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="35b1f-150">[![Choose to Use the ProductsBLL Class](master-detail-filtering-with-two-dropdownlists-cs/_static/image23.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image22.png)</span></span>

<span data-ttu-id="35b1f-151">**Figura 8**: elija usar la clase `ProductsBLL` ([haga clic para ver la imagen de tamaño completo](master-detail-filtering-with-two-dropdownlists-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="35b1f-151">**Figure 8**: Choose to Use the `ProductsBLL` Class ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image24.png))</span></span>

<span data-ttu-id="35b1f-152">[![configurar ObjectDataSource para usar el método GetProductsByCategoryID (categoryID)](master-detail-filtering-with-two-dropdownlists-cs/_static/image26.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="35b1f-152">[![Configure the ObjectDataSource to Use the GetProductsByCategoryID(categoryID) Method](master-detail-filtering-with-two-dropdownlists-cs/_static/image26.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image25.png)</span></span>

<span data-ttu-id="35b1f-153">**Figura 9**: configuración de ObjectDataSource para usar el método `GetProductsByCategoryID(categoryID)` ([haga clic para ver la imagen de tamaño completo](master-detail-filtering-with-two-dropdownlists-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="35b1f-153">**Figure 9**: Configure the ObjectDataSource to Use the `GetProductsByCategoryID(categoryID)` Method ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image27.png))</span></span>

<span data-ttu-id="35b1f-154">En el paso final del asistente, es necesario especificar el valor del parámetro *`categoryID`* .</span><span class="sxs-lookup"><span data-stu-id="35b1f-154">In the final step of the wizard we need to specify the value of the *`categoryID`* parameter.</span></span> <span data-ttu-id="35b1f-155">Asigne este parámetro al elemento seleccionado desde el `Categories` DropDownList.</span><span class="sxs-lookup"><span data-stu-id="35b1f-155">Assign this parameter to the selected item from the `Categories` DropDownList.</span></span>

<span data-ttu-id="35b1f-156">[![extraer el valor del parámetro categoryID de las categorías DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image29.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="35b1f-156">[![Pull the categoryID Parameter Value from the Categories DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image29.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image28.png)</span></span>

<span data-ttu-id="35b1f-157">**Figura 10**: extracción del valor del parámetro *`categoryID`* del `Categories` DropDownList ([haga clic para ver la imagen de tamaño completo](master-detail-filtering-with-two-dropdownlists-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="35b1f-157">**Figure 10**: Pull the *`categoryID`* Parameter Value from the `Categories` DropDownList ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image30.png))</span></span>

<span data-ttu-id="35b1f-158">Con ObjectDataSource configurado, todo lo que queda es especificar qué campos de origen de datos se usan para la presentación y el valor de los elementos de DropDownList.</span><span class="sxs-lookup"><span data-stu-id="35b1f-158">With the ObjectDataSource configured, all that remains is to specify what data source fields are used for the display and value of the DropDownList's items.</span></span> <span data-ttu-id="35b1f-159">Muestre el campo `ProductName` y use el campo `ProductID` como valor.</span><span class="sxs-lookup"><span data-stu-id="35b1f-159">Display the `ProductName` field and use the `ProductID` field as the value.</span></span>

<span data-ttu-id="35b1f-160">[![especificar los campos de origen de datos utilizados para las propiedades de texto y valor de ListItems de DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image32.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="35b1f-160">[![Specify the Data Source Fields Used for the DropDownList's ListItems' Text and Value Properties](master-detail-filtering-with-two-dropdownlists-cs/_static/image32.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image31.png)</span></span>

<span data-ttu-id="35b1f-161">**Figura 11**: especifique los campos de origen de datos usados para las propiedades `Text` y `Value` de `ListItem` s de DropDownList ([haga clic para ver la imagen de tamaño completo](master-detail-filtering-with-two-dropdownlists-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="35b1f-161">**Figure 11**: Specify the Data Source Fields Used for the DropDownList's `ListItem` s' `Text` and `Value` Properties ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image33.png))</span></span>

<span data-ttu-id="35b1f-162">Con ObjectDataSource y `ProductsByCategory` DropDownList configurados, la página mostrará dos DropDownLists: la primera enumerará todas las categorías, mientras que la segunda enumerará los productos que pertenecen a la categoría seleccionada.</span><span class="sxs-lookup"><span data-stu-id="35b1f-162">With the ObjectDataSource and `ProductsByCategory` DropDownList configured our page will display two DropDownLists: the first will list all of the categories while the second will list those products belonging to the selected category.</span></span> <span data-ttu-id="35b1f-163">Cuando el usuario selecciona una nueva categoría del primer DropDownList, se producirá un postback y el segundo DropDownList se volverá a enlazar, mostrando los productos que pertenecen a la categoría recién seleccionada.</span><span class="sxs-lookup"><span data-stu-id="35b1f-163">When the user selects a new category from the first DropDownList, a postback will ensue and the second DropDownList will be rebound, showing those products that belong to the newly selected category.</span></span> <span data-ttu-id="35b1f-164">Las figuras 12 y 13 muestran `MasterDetailsDetails.aspx` en acción cuando se ven a través de un explorador.</span><span class="sxs-lookup"><span data-stu-id="35b1f-164">Figures 12 and 13 show `MasterDetailsDetails.aspx` in action when viewed through a browser.</span></span>

<span data-ttu-id="35b1f-165">[![al visitar la página por primera vez, se selecciona la categoría bebidas](master-detail-filtering-with-two-dropdownlists-cs/_static/image35.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="35b1f-165">[![When First Visiting the Page, the Beverages Category is Selected](master-detail-filtering-with-two-dropdownlists-cs/_static/image35.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image34.png)</span></span>

<span data-ttu-id="35b1f-166">**Figura 12**: al visitar la página por primera vez, se selecciona la categoría bebidas ([haga clic para ver la imagen a tamaño completo](master-detail-filtering-with-two-dropdownlists-cs/_static/image36.png))</span><span class="sxs-lookup"><span data-stu-id="35b1f-166">**Figure 12**: When First Visiting the Page, the Beverages Category is Selected ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image36.png))</span></span>

<span data-ttu-id="35b1f-167">[![elegir una categoría diferente muestra los productos de la nueva categoría](master-detail-filtering-with-two-dropdownlists-cs/_static/image38.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="35b1f-167">[![Choosing a Different Category Displays the New Category's Products](master-detail-filtering-with-two-dropdownlists-cs/_static/image38.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image37.png)</span></span>

<span data-ttu-id="35b1f-168">**Figura 13**: selección de una categoría diferente muestra los productos de la nueva categoría ([haga clic para ver la imagen de tamaño completo](master-detail-filtering-with-two-dropdownlists-cs/_static/image39.png))</span><span class="sxs-lookup"><span data-stu-id="35b1f-168">**Figure 13**: Choosing a Different Category Displays the New Category's Products ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image39.png))</span></span>

<span data-ttu-id="35b1f-169">Actualmente, el `productsByCategory` DropDownList, cuando se cambia, *no* produce un postback.</span><span class="sxs-lookup"><span data-stu-id="35b1f-169">Currently the `productsByCategory` DropDownList, when changed, does *not* cause a postback.</span></span> <span data-ttu-id="35b1f-170">Sin embargo, se deseará que se produzca un postback una vez que se agregue un DetailsView para mostrar los detalles del producto seleccionado (paso 3).</span><span class="sxs-lookup"><span data-stu-id="35b1f-170">However, we will want a postback to occur once we add a DetailsView to display the selected product's details (Step 3).</span></span> <span data-ttu-id="35b1f-171">Por lo tanto, active la casilla habilitar AutoPostBack en la etiqueta inteligente de `productsByCategory` DropDownList.</span><span class="sxs-lookup"><span data-stu-id="35b1f-171">Therefore, check the Enable AutoPostBack checkbox from the `productsByCategory` DropDownList's smart tag.</span></span>

<span data-ttu-id="35b1f-172">[![habilitar la característica de postback para productsByCategory DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image41.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image40.png)</span><span class="sxs-lookup"><span data-stu-id="35b1f-172">[![Enable the AutoPostBack Feature for the productsByCategory DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image41.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image40.png)</span></span>

<span data-ttu-id="35b1f-173">**Figura 14**: habilitar la característica de postback para el `productsByCategory` DropDownList ([haga clic para ver la imagen de tamaño completo](master-detail-filtering-with-two-dropdownlists-cs/_static/image42.png))</span><span class="sxs-lookup"><span data-stu-id="35b1f-173">**Figure 14**: Enable the AutoPostBack Feature for the `productsByCategory` DropDownList ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image42.png))</span></span>

## <a name="step-3-using-a-detailsview-to-display-details-for-the-selected-product"></a><span data-ttu-id="35b1f-174">Paso 3: usar DetailsView para mostrar los detalles del producto seleccionado</span><span class="sxs-lookup"><span data-stu-id="35b1f-174">Step 3: Using a DetailsView to Display Details for the Selected Product</span></span>

<span data-ttu-id="35b1f-175">El paso final consiste en mostrar los detalles del producto seleccionado en DetailsView.</span><span class="sxs-lookup"><span data-stu-id="35b1f-175">The final step is to display the details for the selected product in a DetailsView.</span></span> <span data-ttu-id="35b1f-176">Para ello, agregue un DetailsView a la página, establezca su propiedad `ID` en `ProductDetails`y cree un nuevo ObjectDataSource para él.</span><span class="sxs-lookup"><span data-stu-id="35b1f-176">To accomplish this, add a DetailsView to the page, set its `ID` property to `ProductDetails`, and create a new ObjectDataSource for it.</span></span> <span data-ttu-id="35b1f-177">Configure este origen ObjectDataSource para que extraiga sus datos del método `GetProductByProductID(productID)` de la clase `ProductsBLL` mediante el valor seleccionado de la `ProductsByCategory` DropDownList para el valor del parámetro *`productID`* .</span><span class="sxs-lookup"><span data-stu-id="35b1f-177">Configure this ObjectDataSource to pull its data from the `ProductsBLL` class's `GetProductByProductID(productID)` method using the selected value of the `ProductsByCategory` DropDownList for the value of the *`productID`* parameter.</span></span>

<span data-ttu-id="35b1f-178">[![optar por usar la clase ProductsBLL](master-detail-filtering-with-two-dropdownlists-cs/_static/image44.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image43.png)</span><span class="sxs-lookup"><span data-stu-id="35b1f-178">[![Choose to Use the ProductsBLL Class](master-detail-filtering-with-two-dropdownlists-cs/_static/image44.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image43.png)</span></span>

<span data-ttu-id="35b1f-179">**Figura 15**: elija usar la clase `ProductsBLL` ([haga clic para ver la imagen de tamaño completo](master-detail-filtering-with-two-dropdownlists-cs/_static/image45.png))</span><span class="sxs-lookup"><span data-stu-id="35b1f-179">**Figure 15**: Choose to Use the `ProductsBLL` Class ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image45.png))</span></span>

<span data-ttu-id="35b1f-180">[![configurar ObjectDataSource para usar el método GetProductByProductID (productID)](master-detail-filtering-with-two-dropdownlists-cs/_static/image47.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image46.png)</span><span class="sxs-lookup"><span data-stu-id="35b1f-180">[![Configure the ObjectDataSource to Use the GetProductByProductID(productID) Method](master-detail-filtering-with-two-dropdownlists-cs/_static/image47.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image46.png)</span></span>

<span data-ttu-id="35b1f-181">**Figura 16**: configuración de ObjectDataSource para usar el método `GetProductByProductID(productID)` ([haga clic para ver la imagen de tamaño completo](master-detail-filtering-with-two-dropdownlists-cs/_static/image48.png))</span><span class="sxs-lookup"><span data-stu-id="35b1f-181">**Figure 16**: Configure the ObjectDataSource to Use the `GetProductByProductID(productID)` Method ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image48.png))</span></span>

<span data-ttu-id="35b1f-182">[![extraer el valor del parámetro productID de ProductsByCategory DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image50.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image49.png)</span><span class="sxs-lookup"><span data-stu-id="35b1f-182">[![Pull the productID Parameter Value from the ProductsByCategory DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image50.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image49.png)</span></span>

<span data-ttu-id="35b1f-183">**Figura 17**: extracción del valor del parámetro *`productID`* del `ProductsByCategory` DropDownList ([haga clic para ver la imagen de tamaño completo](master-detail-filtering-with-two-dropdownlists-cs/_static/image51.png))</span><span class="sxs-lookup"><span data-stu-id="35b1f-183">**Figure 17**: Pull the *`productID`* Parameter Value from the `ProductsByCategory` DropDownList ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image51.png))</span></span>

<span data-ttu-id="35b1f-184">Puede optar por mostrar cualquiera de los campos disponibles en DetailsView.</span><span class="sxs-lookup"><span data-stu-id="35b1f-184">You can choose to display any of the available fields in the DetailsView.</span></span> <span data-ttu-id="35b1f-185">He optado por quitar los campos `ProductID`, `SupplierID`y `CategoryID`, y volver a ordenar y dar formato a los campos restantes.</span><span class="sxs-lookup"><span data-stu-id="35b1f-185">I've opted to remove the `ProductID`, `SupplierID`, and `CategoryID` fields and reordered and formatted the remaining fields.</span></span> <span data-ttu-id="35b1f-186">Además, se borrón las propiedades `Height` y `Width` de DetailsView, lo que permite a DetailsView expandirse hasta el ancho necesario para mostrar mejor sus datos en lugar de limitarse a un tamaño especificado.</span><span class="sxs-lookup"><span data-stu-id="35b1f-186">In addition, I cleared out the DetailsView's `Height` and `Width` properties, allowing the DetailsView to expand to the width needed to best display its data rather than having it constrained to a specified size.</span></span> <span data-ttu-id="35b1f-187">A continuación se muestra el marcado completo:</span><span class="sxs-lookup"><span data-stu-id="35b1f-187">The full markup appears below:</span></span>

[!code-aspx[Main](master-detail-filtering-with-two-dropdownlists-cs/samples/sample1.aspx)]

<span data-ttu-id="35b1f-188">Dedique un momento a probar la página de `MasterDetailsDetails.aspx` en un explorador.</span><span class="sxs-lookup"><span data-stu-id="35b1f-188">Take a moment to try out the `MasterDetailsDetails.aspx` page in a browser.</span></span> <span data-ttu-id="35b1f-189">A primera vista, puede parecer que todo funciona como se desea, pero hay un problema sutil.</span><span class="sxs-lookup"><span data-stu-id="35b1f-189">At first glance it may appear that everything is working as desired, but there's a subtle problem.</span></span> <span data-ttu-id="35b1f-190">Al elegir una nueva categoría, el `ProductsByCategory` DropDownList se actualiza para incluir los productos de la categoría seleccionada, pero el `ProductDetails` DetailsView continuó mostrando la información anterior del producto.</span><span class="sxs-lookup"><span data-stu-id="35b1f-190">When you choose a new category the `ProductsByCategory` DropDownList is updated to include those products for the selected category, but the `ProductDetails` DetailsView continued to show the previous product information.</span></span> <span data-ttu-id="35b1f-191">DetailsView se actualiza al elegir un producto diferente para la categoría seleccionada.</span><span class="sxs-lookup"><span data-stu-id="35b1f-191">The DetailsView is updated when choosing a different product for the selected category.</span></span> <span data-ttu-id="35b1f-192">Además, si realiza pruebas lo suficientemente minuciosas, observará que si elige continuamente nuevas categorías (por ejemplo, seleccionando bebidas en el `Categories` DropDownList, después condimentos y, después, confections), se actualizará el `ProductDetails` DetailsView.</span><span class="sxs-lookup"><span data-stu-id="35b1f-192">Furthermore, if you test thoroughly enough, you'll find that if you continually choose new categories (such as choosing Beverages from the `Categories` DropDownList, then Condiments, then Confections) every other category selection causes the `ProductDetails` DetailsView to be refreshed.</span></span>

<span data-ttu-id="35b1f-193">Para ayudar a concretizar la este problema, echemos un vistazo a un ejemplo específico.</span><span class="sxs-lookup"><span data-stu-id="35b1f-193">To help concretize this problem, let's look at a specific example.</span></span> <span data-ttu-id="35b1f-194">Al visitar la página por primera vez, se selecciona la categoría bebidas y se cargan los productos relacionados en el `ProductsByCategory` DropDownList.</span><span class="sxs-lookup"><span data-stu-id="35b1f-194">When you first visit the page the Beverages category is selected and the related products are loaded in the `ProductsByCategory` DropDownList.</span></span> <span data-ttu-id="35b1f-195">Chai es el producto seleccionado y sus detalles se muestran en el `ProductDetails` DetailsView, como se muestra en la figura 18.</span><span class="sxs-lookup"><span data-stu-id="35b1f-195">Chai is the selected product and its details are displayed in the `ProductDetails` DetailsView, as shown in Figure 18.</span></span>

<span data-ttu-id="35b1f-196">[![los detalles del producto seleccionado se muestran en DetailsView](master-detail-filtering-with-two-dropdownlists-cs/_static/image53.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image52.png)</span><span class="sxs-lookup"><span data-stu-id="35b1f-196">[![The Selected Product's Details are Displayed in a DetailsView](master-detail-filtering-with-two-dropdownlists-cs/_static/image53.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image52.png)</span></span>

<span data-ttu-id="35b1f-197">**Figura 18**: los detalles del producto seleccionado se muestran en DetailsView ([haga clic para ver la imagen de tamaño completo](master-detail-filtering-with-two-dropdownlists-cs/_static/image54.png))</span><span class="sxs-lookup"><span data-stu-id="35b1f-197">**Figure 18**: The Selected Product's Details are Displayed in a DetailsView ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image54.png))</span></span>

<span data-ttu-id="35b1f-198">Si cambia la selección de categoría de bebidas a condimentos, se produce un postback y el `ProductsByCategory` DropDownList se actualiza en consecuencia, pero el DetailsView sigue mostrando los detalles de Chai.</span><span class="sxs-lookup"><span data-stu-id="35b1f-198">If you change the category selection from Beverages to Condiments, a postback occurs and the `ProductsByCategory` DropDownList is updated accordingly, but the DetailsView still displays details for Chai.</span></span>

<span data-ttu-id="35b1f-199">[![se siguen mostrando los detalles del producto seleccionado anteriormente](master-detail-filtering-with-two-dropdownlists-cs/_static/image56.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image55.png)</span><span class="sxs-lookup"><span data-stu-id="35b1f-199">[![The Previously Selected Product's Details are Still Displayed](master-detail-filtering-with-two-dropdownlists-cs/_static/image56.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image55.png)</span></span>

<span data-ttu-id="35b1f-200">**Figura 19**: los detalles del producto seleccionado anteriormente siguen apareciendo ([haga clic para ver la imagen de tamaño completo](master-detail-filtering-with-two-dropdownlists-cs/_static/image57.png))</span><span class="sxs-lookup"><span data-stu-id="35b1f-200">**Figure 19**: The Previously Selected Product's Details are Still Displayed ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image57.png))</span></span>

<span data-ttu-id="35b1f-201">Al seleccionar un nuevo producto de la lista, se actualiza DetailsView según lo previsto.</span><span class="sxs-lookup"><span data-stu-id="35b1f-201">Picking a new product from the list refreshes the DetailsView as expected.</span></span> <span data-ttu-id="35b1f-202">Si elige una nueva categoría después de cambiar el producto, el DetailsView no se actualizará.</span><span class="sxs-lookup"><span data-stu-id="35b1f-202">If you pick a new category after changing the product, the DetailsView again won't refresh.</span></span> <span data-ttu-id="35b1f-203">Sin embargo, si en lugar de elegir un nuevo producto seleccionó una nueva categoría, DetailsView se actualizaría.</span><span class="sxs-lookup"><span data-stu-id="35b1f-203">However, if instead of choosing a new product you selected a new category, the DetailsView would refresh.</span></span> <span data-ttu-id="35b1f-204">¿Qué ocurre en el mundo aquí?</span><span class="sxs-lookup"><span data-stu-id="35b1f-204">What in the world is going on here?</span></span>

<span data-ttu-id="35b1f-205">El problema es un problema de temporización en el ciclo de vida de la página.</span><span class="sxs-lookup"><span data-stu-id="35b1f-205">The problem is a timing issue in the page's lifecycle.</span></span> <span data-ttu-id="35b1f-206">Cada vez que se solicita una página, pasa por una serie de pasos como representación.</span><span class="sxs-lookup"><span data-stu-id="35b1f-206">Whenever a page is requested it proceeds through a number of steps as its rendering.</span></span> <span data-ttu-id="35b1f-207">En uno de estos pasos, los controles ObjectDataSource comprueban si han cambiado los valores de `SelectParameters`.</span><span class="sxs-lookup"><span data-stu-id="35b1f-207">In one of these steps the ObjectDataSource controls check to see if any of their `SelectParameters` values have changed.</span></span> <span data-ttu-id="35b1f-208">Si es así, el control Web de datos enlazado a ObjectDataSource sabe que necesita actualizar su presentación.</span><span class="sxs-lookup"><span data-stu-id="35b1f-208">If so, the data Web control bound to the ObjectDataSource knows that it needs to refresh its display.</span></span> <span data-ttu-id="35b1f-209">Por ejemplo, cuando se selecciona una nueva categoría, el `ProductsByCategoryDataSource` ObjectDataSource detecta que sus valores de parámetro han cambiado y el `ProductsByCategory` DropDownList se vuelve a enlazar, obteniendo los productos de la categoría seleccionada.</span><span class="sxs-lookup"><span data-stu-id="35b1f-209">For example, when a new category is selected, the `ProductsByCategoryDataSource` ObjectDataSource detects that its parameter values have changed and the `ProductsByCategory` DropDownList rebinds itself, getting the products for the selected category.</span></span>

<span data-ttu-id="35b1f-210">El problema que surge en esta situación es que el punto del ciclo de vida de la página en el que la ObjectDataSource comprueba los parámetros modificados se produce *antes* del reenlace de los controles Web de datos asociados.</span><span class="sxs-lookup"><span data-stu-id="35b1f-210">The problem that arises in this situation is that the point in the page lifecycle that the ObjectDataSources check for changed parameters occurs *before* the rebinding of the associated data Web controls.</span></span> <span data-ttu-id="35b1f-211">Por lo tanto, al seleccionar una nueva categoría, el `ProductsByCategoryDataSource` ObjectDataSource detecta un cambio en el valor de su parámetro.</span><span class="sxs-lookup"><span data-stu-id="35b1f-211">Therefore, when selecting a new category the `ProductsByCategoryDataSource` ObjectDataSource detects a change in its parameter's value.</span></span> <span data-ttu-id="35b1f-212">Sin embargo, el origen ObjectDataSource utilizado por el `ProductDetails` DetailsView no anota tales cambios porque el `ProductsByCategory` DropDownList todavía se debe volver a enlazar.</span><span class="sxs-lookup"><span data-stu-id="35b1f-212">The ObjectDataSource used by the `ProductDetails` DetailsView, however, doesn't note any such changes because the `ProductsByCategory` DropDownList has yet to be rebound.</span></span> <span data-ttu-id="35b1f-213">Más adelante, en el ciclo de vida, el `ProductsByCategory` DropDownList vuelve a enlazar a su ObjectDataSource, lo que capta los productos de la categoría recién seleccionada.</span><span class="sxs-lookup"><span data-stu-id="35b1f-213">Later in the lifecycle the `ProductsByCategory` DropDownList rebinds to its ObjectDataSource, grabbing the products for the newly selected category.</span></span> <span data-ttu-id="35b1f-214">Mientras el valor de la `ProductsByCategory` DropDownList ha cambiado, la `ProductDetails` ObjectDataSource de DetailsView ya ha hecho su comprobación de valor de parámetro; por lo tanto, DetailsView muestra los resultados anteriores.</span><span class="sxs-lookup"><span data-stu-id="35b1f-214">While the `ProductsByCategory` DropDownList's value has changed, the `ProductDetails` DetailsView's ObjectDataSource has already done its parameter value check; therefore, the DetailsView displays its previous results.</span></span> <span data-ttu-id="35b1f-215">Esta interacción se representa en la figura 20.</span><span class="sxs-lookup"><span data-stu-id="35b1f-215">This interaction is depicted in Figure 20.</span></span>

<span data-ttu-id="35b1f-216">[![el valor de ProductsByCategory de DropDownList cambia después de que la ObjectDataSource de ProductDetails de DetailsView busque cambios](master-detail-filtering-with-two-dropdownlists-cs/_static/image59.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image58.png)</span><span class="sxs-lookup"><span data-stu-id="35b1f-216">[![The ProductsByCategory DropDownList Value Changes After the ProductDetails DetailsView's ObjectDataSource Checks for Changes](master-detail-filtering-with-two-dropdownlists-cs/_static/image59.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image58.png)</span></span>

<span data-ttu-id="35b1f-217">**Figura 20**: el valor de `ProductsByCategory` DropDownList cambia después del `ProductDetails` ObjectDataSource de DetailsView comprueba si hay cambios ([haga clic para ver la imagen de tamaño completo](master-detail-filtering-with-two-dropdownlists-cs/_static/image60.png))</span><span class="sxs-lookup"><span data-stu-id="35b1f-217">**Figure 20**: The `ProductsByCategory` DropDownList Value Changes After the `ProductDetails` DetailsView's ObjectDataSource Checks for Changes ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image60.png))</span></span>

<span data-ttu-id="35b1f-218">Para solucionar este error, es necesario volver a enlazar explícitamente el `ProductDetails` DetailsView una vez enlazada la `ProductsByCategory` DropDownList.</span><span class="sxs-lookup"><span data-stu-id="35b1f-218">To remedy this we need to explicitly rebind the `ProductDetails` DetailsView after the `ProductsByCategory` DropDownList has been bound.</span></span> <span data-ttu-id="35b1f-219">Podemos lograr esto llamando al método `DataBind()` de `ProductDetails` DetailsView cuando se activa el evento `DataBound` de la `ProductsByCategory` DropDownList.</span><span class="sxs-lookup"><span data-stu-id="35b1f-219">We can accomplish this by calling the `ProductDetails` DetailsView's `DataBind()` method when the `ProductsByCategory` DropDownList's `DataBound` event fires.</span></span> <span data-ttu-id="35b1f-220">Agregue el siguiente código de controlador de eventos a la clase de código subyacente de la página `MasterDetailsDetails.aspx` (consulte "[establecer mediante programación los valores de parámetro de ObjectDataSource](../basic-reporting/programmatically-setting-the-objectdatasource-s-parameter-values-cs.md)" para obtener una explicación sobre cómo agregar un controlador de eventos):</span><span class="sxs-lookup"><span data-stu-id="35b1f-220">Add the following event handler code to the `MasterDetailsDetails.aspx` page's code-behind class (refer to the "[Programmatically Setting the ObjectDataSource's Parameter Values](../basic-reporting/programmatically-setting-the-objectdatasource-s-parameter-values-cs.md)" for a discussion on how to add an event handler):</span></span>

[!code-csharp[Main](master-detail-filtering-with-two-dropdownlists-cs/samples/sample2.cs)]

<span data-ttu-id="35b1f-221">Después de agregar esta llamada explícita al método `DataBind()` de `ProductDetails` DetailsView, el tutorial funciona según lo esperado.</span><span class="sxs-lookup"><span data-stu-id="35b1f-221">After this explicit call to the `ProductDetails` DetailsView's `DataBind()` method has been added, the tutorial works as expected.</span></span> <span data-ttu-id="35b1f-222">En la figura 21 se resalta cómo este cambio ha solucionado el problema anterior.</span><span class="sxs-lookup"><span data-stu-id="35b1f-222">Figure 21 highlights how this changed remedied our earlier problem.</span></span>

<span data-ttu-id="35b1f-223">[![se actualiza explícitamente DetailsView de ProductDetails cuando se activa el evento DataBound de ProductsByCategory DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image62.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image61.png)</span><span class="sxs-lookup"><span data-stu-id="35b1f-223">[![The ProductDetails DetailsView is Explicitly Refreshed When the ProductsByCategory DropDownList's DataBound Event Fires](master-detail-filtering-with-two-dropdownlists-cs/_static/image62.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image61.png)</span></span>

<span data-ttu-id="35b1f-224">**Figura 21**: el `ProductDetails` DetailsView se actualiza explícitamente cuando se activa el evento `DataBound` de `ProductsByCategory` DropDownList ([haga clic para ver la imagen de tamaño completo](master-detail-filtering-with-two-dropdownlists-cs/_static/image63.png))</span><span class="sxs-lookup"><span data-stu-id="35b1f-224">**Figure 21**: The `ProductDetails` DetailsView is Explicitly Refreshed When the `ProductsByCategory` DropDownList's `DataBound` Event Fires ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image63.png))</span></span>

## <a name="summary"></a><span data-ttu-id="35b1f-225">Resumen</span><span class="sxs-lookup"><span data-stu-id="35b1f-225">Summary</span></span>

<span data-ttu-id="35b1f-226">DropDownList actúa como un elemento de interfaz de usuario ideal para los informes maestros y detallados en los que hay una relación de uno a varios entre los registros maestro y de detalle.</span><span class="sxs-lookup"><span data-stu-id="35b1f-226">The DropDownList serves as an ideal user interface element for master/detail reports where there is a one-to-many relationship between the master and detail records.</span></span> <span data-ttu-id="35b1f-227">En el tutorial anterior, vimos cómo usar un solo DropDownList para filtrar los productos mostrados por la categoría seleccionada.</span><span class="sxs-lookup"><span data-stu-id="35b1f-227">In the preceding tutorial we saw how to use a single DropDownList to filter the products displayed by the selected category.</span></span> <span data-ttu-id="35b1f-228">En este tutorial se ha reemplazado GridView de productos con DropDownList y se ha usado DetailsView para mostrar los detalles del producto seleccionado.</span><span class="sxs-lookup"><span data-stu-id="35b1f-228">In this tutorial we replaced the GridView of products with a DropDownList, and used a DetailsView to display the details of the selected product.</span></span> <span data-ttu-id="35b1f-229">Los conceptos descritos en este tutorial se pueden ampliar fácilmente a los modelos de datos que implican varias relaciones uno a varios, como clientes, pedidos y artículos de pedido.</span><span class="sxs-lookup"><span data-stu-id="35b1f-229">The concepts discussed in this tutorial can easily be extended to data models involving multiple one-to-many relationships, such as customers, orders, and order items.</span></span> <span data-ttu-id="35b1f-230">En general, siempre puede Agregar un DropDownList para cada una de las entidades "uno" en las relaciones uno a varios.</span><span class="sxs-lookup"><span data-stu-id="35b1f-230">In general, you can always add a DropDownList for each of the "one" entities in the one-to-many relationships.</span></span>

<span data-ttu-id="35b1f-231">¡ Feliz programación!</span><span class="sxs-lookup"><span data-stu-id="35b1f-231">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="35b1f-232">Acerca del autor</span><span class="sxs-lookup"><span data-stu-id="35b1f-232">About the Author</span></span>

<span data-ttu-id="35b1f-233">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor de siete libros de ASP/ASP. net y fundador de [4GuysFromRolla.com](http://www.4guysfromrolla.com), ha estado trabajando con las tecnologías Web de Microsoft desde 1998.</span><span class="sxs-lookup"><span data-stu-id="35b1f-233">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="35b1f-234">Scott funciona como consultor, profesor y redactor independiente.</span><span class="sxs-lookup"><span data-stu-id="35b1f-234">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="35b1f-235">Su último libro se [*enseña a ASP.NET 2,0 en 24 horas*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="35b1f-235">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="35b1f-236">Puede ponerse en contacto con usted en [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="35b1f-236">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="35b1f-237">o a través de su blog, que encontrará en [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="35b1f-237">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="35b1f-238">Agradecimiento especial a</span><span class="sxs-lookup"><span data-stu-id="35b1f-238">Special Thanks To</span></span>

<span data-ttu-id="35b1f-239">Muchos revisores útiles revisaron esta serie de tutoriales.</span><span class="sxs-lookup"><span data-stu-id="35b1f-239">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="35b1f-240">El revisor responsable de este tutorial fue Hilton Giesenow.</span><span class="sxs-lookup"><span data-stu-id="35b1f-240">Lead reviewer for this tutorial was Hilton Giesenow.</span></span> <span data-ttu-id="35b1f-241">¿Está interesado en revisar los próximos artículos de MSDN?</span><span class="sxs-lookup"><span data-stu-id="35b1f-241">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="35b1f-242">En caso afirmativo, suéltelo en [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="35b1f-242">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="35b1f-243">[Anterior](master-detail-filtering-with-a-dropdownlist-cs.md)
> [Siguiente](master-detail-filtering-across-two-pages-cs.md)</span><span class="sxs-lookup"><span data-stu-id="35b1f-243">[Previous](master-detail-filtering-with-a-dropdownlist-cs.md)
[Next](master-detail-filtering-across-two-pages-cs.md)</span></span>
