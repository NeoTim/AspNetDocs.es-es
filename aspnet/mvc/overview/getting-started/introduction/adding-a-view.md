---
title: Agregar una vista a una aplicación MVC
author: Rick-Anderson
description: Agregar una vista a una aplicación MVC
ms.author: riande
ms.date: 01/23/2019
uid: mvc/overview/getting-started/introduction/adding-a-view
ms.openlocfilehash: 42469611f94b374d6692a1c2017aced77a0a414c
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 04/17/2019
ms.locfileid: "59403862"
---
# <a name="adding-a-view"></a><span data-ttu-id="021a2-103">Agregar una vista</span><span class="sxs-lookup"><span data-stu-id="021a2-103">Adding a View</span></span>

<span data-ttu-id="021a2-104">by [Rick Anderson]((https://twitter.com/RickAndMSFT))</span><span class="sxs-lookup"><span data-stu-id="021a2-104">by [Rick Anderson]((https://twitter.com/RickAndMSFT))</span></span>

[!INCLUDE [Tutorial Note](sample/code-location.md)]

<span data-ttu-id="021a2-105">En esta sección va a modificar el `HelloWorldController` clase para usar la vista archivos de plantilla correctamente encapsulan el proceso de generar respuestas HTML a un cliente.</span><span class="sxs-lookup"><span data-stu-id="021a2-105">In this section you're going to modify the `HelloWorldController` class to use view template files to cleanly encapsulate the process of generating HTML responses to a client.</span></span> 

<span data-ttu-id="021a2-106">Creará un archivo de plantilla de vista mediante el [motor de vistas Razor](../../../../web-pages/overview/getting-started/introducing-razor-syntax-c.md).</span><span class="sxs-lookup"><span data-stu-id="021a2-106">You'll create a view template file using the [Razor view engine](../../../../web-pages/overview/getting-started/introducing-razor-syntax-c.md).</span></span> <span data-ttu-id="021a2-107">Las plantillas de vista Razor tienen una *.cshtml* la extensión de archivo y proporcionan una manera elegante para crear el código HTML de salida con C#.</span><span class="sxs-lookup"><span data-stu-id="021a2-107">Razor-based view templates have a *.cshtml* file extension, and provide an elegant way to create HTML output using C#.</span></span> <span data-ttu-id="021a2-108">Minimiza el número de caracteres y pulsaciones de teclas necesarias cuando se escribe una plantilla de vista Razor y permite un rápido, fluido flujo de trabajo de codificación.</span><span class="sxs-lookup"><span data-stu-id="021a2-108">Razor minimizes the number of characters and keystrokes required when writing a view template, and enables a fast, fluid coding workflow.</span></span>

<span data-ttu-id="021a2-109">Actualmente, el método `Index` devuelve una cadena con un mensaje que está codificado de forma rígida en la clase de controlador.</span><span class="sxs-lookup"><span data-stu-id="021a2-109">Currently the `Index` method returns a string with a message that is hard-coded in the controller class.</span></span> <span data-ttu-id="021a2-110">Cambiar el `Index` método para llamar a los controladores de [vista](/dotnet/api/microsoft.aspnetcore.mvc.controller.view#Microsoft_AspNetCore_Mvc_Controller_View) método, como se muestra en el código siguiente:</span><span class="sxs-lookup"><span data-stu-id="021a2-110">Change the `Index` method to call the controllers [View](/dotnet/api/microsoft.aspnetcore.mvc.controller.view#Microsoft_AspNetCore_Mvc_Controller_View) method, as shown in the following code:</span></span>

[!code-csharp[Main](adding-a-view/samples/sample1.cs?highlight=1,3)]

<span data-ttu-id="021a2-111">El `Index` método anterior usa una plantilla de vista para generar una respuesta HTML al explorador.</span><span class="sxs-lookup"><span data-stu-id="021a2-111">The `Index` method above uses a view template to generate an HTML response to the browser.</span></span> <span data-ttu-id="021a2-112">Los métodos de controlador (también conocido como [métodos de acción](http://rachelappel.com/asp.net-mvc-actionresults-explained)), como el `Index` método anterior, suelen devolver un [ActionResult](https://msdn.microsoft.com/library/system.web.mvc.actionresult.aspx) (o una clase derivada de [ActionResult](https://msdn.microsoft.com/library/system.web.mvc.actionresult.aspx)), los tipos no primitivos como cadena.</span><span class="sxs-lookup"><span data-stu-id="021a2-112">Controller methods (also known as [action methods](http://rachelappel.com/asp.net-mvc-actionresults-explained)), such as the `Index` method above, generally return an [ActionResult](https://msdn.microsoft.com/library/system.web.mvc.actionresult.aspx) (or a class derived from [ActionResult](https://msdn.microsoft.com/library/system.web.mvc.actionresult.aspx)), not primitive types like string.</span></span>

<span data-ttu-id="021a2-113">Haga clic en el *Views\HelloWorld* carpeta y haga clic en **agregar**, a continuación, haga clic en **página de vista de MVC 5 con diseño (Razor)**.</span><span class="sxs-lookup"><span data-stu-id="021a2-113">Right click the *Views\HelloWorld* folder and click **Add**, then click **MVC 5 View Page with Layout (Razor)**.</span></span>
  
![](adding-a-view/_static/image1.png)   
  
<span data-ttu-id="021a2-114">En el **especificar nombre para el elemento** diálogo cuadro, escriba *índice*y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="021a2-114">In the **Specify Name for Item** dialog box, enter *Index*, and then click **OK**.</span></span>  
  
![](adding-a-view/_static/image2.png)  
  
<span data-ttu-id="021a2-115">En el **seleccionar una página de diseño** cuadro de diálogo, acepte el valor predeterminado  **\_Layout.cshtml** y haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="021a2-115">In the **Select a Layout Page** dialog, accept the default **\_Layout.cshtml** and click **OK**.</span></span>  
  
![](adding-a-view/_static/image3.png)  
  
<span data-ttu-id="021a2-116">En el cuadro de diálogo anterior, el *Views\Shared* carpeta está seleccionada en el panel izquierdo.</span><span class="sxs-lookup"><span data-stu-id="021a2-116">In the dialog above, the *Views\Shared* folder is selected in the left pane.</span></span> <span data-ttu-id="021a2-117">Si tenía un archivo de diseño personalizado en otra carpeta, se puede seleccionar.</span><span class="sxs-lookup"><span data-stu-id="021a2-117">If you had a custom layout file in another folder, you could select it.</span></span> <span data-ttu-id="021a2-118">Hablaremos sobre el archivo de diseño más adelante en el tutorial</span><span class="sxs-lookup"><span data-stu-id="021a2-118">We'll talk about the layout file later in the tutorial</span></span>

<span data-ttu-id="021a2-119">El *MvcMovie\Views\HelloWorld\Index.cshtml* se crea el archivo.</span><span class="sxs-lookup"><span data-stu-id="021a2-119">The *MvcMovie\Views\HelloWorld\Index.cshtml* file is created.</span></span>

![](adding-a-view/_static/image4.png)

<span data-ttu-id="021a2-120">Agregue el siguiente marcado resaltado.</span><span class="sxs-lookup"><span data-stu-id="021a2-120">Add the following highlighted markup.</span></span>

[!code-cshtml[Main](adding-a-view/samples/sample2.cshtml?highlight=4-11)]

<span data-ttu-id="021a2-121">Haga clic en el *Index.cshtml* de archivo y seleccione **ver en el explorador**.</span><span class="sxs-lookup"><span data-stu-id="021a2-121">Right click the *Index.cshtml* file and select **View in Browser**.</span></span>

![PI](adding-a-view/_static/image5.png)

<span data-ttu-id="021a2-123">También puede derecho en el *Index.cshtml* de archivo y seleccione **ver en Inspector de página.**</span><span class="sxs-lookup"><span data-stu-id="021a2-123">You can also right click the *Index.cshtml* file and select **View in Page Inspector.**</span></span> <span data-ttu-id="021a2-124">Consulte la [tutorial del Inspector de página](../../views/using-page-inspector-in-aspnet-mvc.md) para obtener más información.</span><span class="sxs-lookup"><span data-stu-id="021a2-124">See the [Page Inspector tutorial](../../views/using-page-inspector-in-aspnet-mvc.md) for more information.</span></span>

<span data-ttu-id="021a2-125">Como alternativa, ejecute la aplicación y vaya a la `HelloWorld` controlador (`http://localhost:xxxx/HelloWorld`).</span><span class="sxs-lookup"><span data-stu-id="021a2-125">Alternatively, run the application and browse to the `HelloWorld` controller (`http://localhost:xxxx/HelloWorld`).</span></span> <span data-ttu-id="021a2-126">El `Index` método en el controlador no hacen mucho trabajo; simplemente ejecutó la instrucción `return View()`, que especifica que el método debe utilizar un archivo de plantilla de vista para presentar una respuesta al explorador.</span><span class="sxs-lookup"><span data-stu-id="021a2-126">The `Index` method in your controller didn't do much work; it simply ran the statement `return View()`, which specified that the method should use a view template file to render a response to the browser.</span></span> <span data-ttu-id="021a2-127">Dado que no especifica explícitamente el nombre del archivo de plantilla de vista para usar, ASP.NET MVC usa de forma predeterminada el *Index.cshtml* los archivos de vista el *\Views\HelloWorld* carpeta.</span><span class="sxs-lookup"><span data-stu-id="021a2-127">Because you didn't explicitly specify the name of the view template file to use, ASP.NET MVC defaulted to using the *Index.cshtml* view file in the *\Views\HelloWorld* folder.</span></span> <span data-ttu-id="021a2-128">La siguiente imagen muestra la cadena &quot;Hola desde nuestra plantilla de vista!&quot; codificado de forma rígida en la vista.</span><span class="sxs-lookup"><span data-stu-id="021a2-128">The image below shows the string &quot;Hello from our View Template!&quot; hard-coded in the view.</span></span>

![](adding-a-view/_static/image6.png)

<span data-ttu-id="021a2-129">Parece bastante bueno.</span><span class="sxs-lookup"><span data-stu-id="021a2-129">Looks pretty good.</span></span> <span data-ttu-id="021a2-130">Sin embargo, tenga en cuenta que se muestra la barra de título del explorador "Índice – mi aplicación ASP.NET," y el vínculo grande en la parte superior de la página se lee "Application name".</span><span class="sxs-lookup"><span data-stu-id="021a2-130">However, notice that the browser's title bar shows "Index - My ASP.NET Application," and the big link at the top of the page says "Application name."</span></span> <span data-ttu-id="021a2-131">Dependiendo de cómo realizar la ventana del explorador, es posible que deba haga clic en las tres barras en la esquina superior derecha para ver el para el **inicio**, **sobre**, **póngase en contacto con**, **Registrar** y **iniciarla** vínculos.</span><span class="sxs-lookup"><span data-stu-id="021a2-131">Depending on how small you make your browser window, you might need to click the three bars in the upper right to see the to the **Home**, **About**, **Contact**, **Register** and **Log in** links.</span></span>

## <a name="changing-views-and-layout-pages"></a><span data-ttu-id="021a2-132">Cambiar vistas y páginas de diseño</span><span class="sxs-lookup"><span data-stu-id="021a2-132">Changing Views and Layout Pages</span></span>

<span data-ttu-id="021a2-133">En primer lugar, desea cambiar la &quot;nombre de la aplicación&quot; vínculo en la parte superior de la página.</span><span class="sxs-lookup"><span data-stu-id="021a2-133">First, you want to change the &quot;Application name&quot; link at the top of the page.</span></span> <span data-ttu-id="021a2-134">Es común a todas las páginas que el texto.</span><span class="sxs-lookup"><span data-stu-id="021a2-134">That text is common to every page.</span></span> <span data-ttu-id="021a2-135">En realidad se implementa en un único lugar en el proyecto, aunque aparezca en todas las páginas en la aplicación.</span><span class="sxs-lookup"><span data-stu-id="021a2-135">It's actually implemented in only one place in the project, even though it appears on every page in the application.</span></span> <span data-ttu-id="021a2-136">Vaya a la */Views/Shared* carpeta **el Explorador de soluciones** y abra el  *\_Layout.cshtml* archivo.</span><span class="sxs-lookup"><span data-stu-id="021a2-136">Go to the */Views/Shared* folder in **Solution Explorer** and open the *\_Layout.cshtml* file.</span></span> <span data-ttu-id="021a2-137">Este archivo se denomina un *página de diseño* y se encuentra en la carpeta compartida que usan todas las demás páginas.</span><span class="sxs-lookup"><span data-stu-id="021a2-137">This file is called a *layout page* and it's in the shared folder that all other pages use.</span></span>

![_LayoutCshtml](adding-a-view/_static/image7.png)

<span data-ttu-id="021a2-139">Las plantillas de diseño permiten especificar el diseño del contenedor HTML del sitio en un solo lugar y, a continuación, aplicarla en varias páginas del sitio.</span><span class="sxs-lookup"><span data-stu-id="021a2-139">Layout templates allow you to specify the HTML container layout of your site in one place and then apply it across multiple pages in your site.</span></span> <span data-ttu-id="021a2-140">Busque la línea `@RenderBody()`.</span><span class="sxs-lookup"><span data-stu-id="021a2-140">Find the `@RenderBody()` line.</span></span> <span data-ttu-id="021a2-141">`RenderBody` es un marcador de posición donde se mostrarán todas las páginas específicas de vista que cree, &quot;encapsuladas&quot; en la página de diseño.</span><span class="sxs-lookup"><span data-stu-id="021a2-141">`RenderBody` is a placeholder where all the view-specific pages you create show up, &quot;wrapped&quot; in the layout page.</span></span> <span data-ttu-id="021a2-142">Por ejemplo, si selecciona el **sobre** vínculo, el *Views\Home\About.cshtml* vista se representa dentro de la `RenderBody` método.</span><span class="sxs-lookup"><span data-stu-id="021a2-142">For example, if you select the **About** link, the *Views\Home\About.cshtml* view is rendered inside the `RenderBody` method.</span></span>

<span data-ttu-id="021a2-143">Cambie el contenido del elemento de título.</span><span class="sxs-lookup"><span data-stu-id="021a2-143">Change the contents of the title element.</span></span> <span data-ttu-id="021a2-144">Cambiar el [ActionLink](https://msdn.microsoft.com/library/dd504972(v=vs.108).aspx) en la plantilla de diseño de &quot;nombre de la aplicación&quot; a &quot;MVC Movie&quot; y el controlador de `Home` a `Movies`.</span><span class="sxs-lookup"><span data-stu-id="021a2-144">Change the [ActionLink](https://msdn.microsoft.com/library/dd504972(v=vs.108).aspx) in the layout template from &quot;Application name&quot; to &quot;MVC Movie&quot; and the controller from `Home` to `Movies`.</span></span> <span data-ttu-id="021a2-145">El archivo de diseño completo se muestra a continuación:</span><span class="sxs-lookup"><span data-stu-id="021a2-145">The complete layout file is shown below:</span></span>

[!code-cshtml[Main](adding-a-view/samples/sample3.cshtml?highlight=6,20)]

<span data-ttu-id="021a2-146">Ejecute la aplicación y observe que ahora dice &quot;MVC Movie &quot;.</span><span class="sxs-lookup"><span data-stu-id="021a2-146">Run the application and notice that it now says &quot;MVC Movie &quot;.</span></span> <span data-ttu-id="021a2-147">Haga clic en el **sobre** vínculo y ver cómo se muestra esa página &quot;MVC Movie&quot;, demasiado.</span><span class="sxs-lookup"><span data-stu-id="021a2-147">Click the **About** link, and you see how that page shows &quot;MVC Movie&quot;, too.</span></span> <span data-ttu-id="021a2-148">Fuimos capaces de realizar el cambio una vez en la plantilla de diseño y dispone de todas las páginas del sitio refleja el nuevo título.</span><span class="sxs-lookup"><span data-stu-id="021a2-148">We were able to make the change once in the layout template and have all pages on the site reflect the new title.</span></span>

![](adding-a-view/_static/image8.png)

<span data-ttu-id="021a2-149">Cuando se crea por primera vez el *Views\HelloWorld\Index.cshtml* archivo, contiene el código siguiente:</span><span class="sxs-lookup"><span data-stu-id="021a2-149">When we first created the *Views\HelloWorld\Index.cshtml* file, it contained the following code:</span></span>

[!code-cshtml[Main](adding-a-view/samples/sample4.cshtml)]

<span data-ttu-id="021a2-150">El código Razor anterior establece explícitamente la página de diseño.</span><span class="sxs-lookup"><span data-stu-id="021a2-150">The Razor code above is explicitly setting the layout page.</span></span> <span data-ttu-id="021a2-151">Examine el *vistas\\_ViewStart.cshtml* archivo, contiene el mismo marcado exacto de Razor.</span><span class="sxs-lookup"><span data-stu-id="021a2-151">Examine the *Views\\_ViewStart.cshtml* file, it contains the exact same Razor markup.</span></span> <span data-ttu-id="021a2-152">El *[vistas\\_ViewStart.cshtml](https://weblogs.asp.net/scottgu/archive/2010/10/22/asp-net-mvc-3-layouts.aspx)* archivo define el diseño común que se va a usar todas las vistas, por lo tanto, puede comentar o elimine dicho código desde el *Views\HelloWorld\ Index.cshtml* archivo.</span><span class="sxs-lookup"><span data-stu-id="021a2-152">The *[Views\\_ViewStart.cshtml](https://weblogs.asp.net/scottgu/archive/2010/10/22/asp-net-mvc-3-layouts.aspx)* file defines the common layout that all views will use, therefore you can comment out or remove that code from the *Views\HelloWorld\Index.cshtml* file.</span></span>

[!code-cshtml[Main](adding-a-view/samples/sample5.cshtml?highlight=1-3)]

<span data-ttu-id="021a2-153">Puede usar la propiedad `Layout` para establecer una vista de diseño diferente o establecerla en `null` para que no se use ningún archivo de diseño.</span><span class="sxs-lookup"><span data-stu-id="021a2-153">You can use the `Layout` property to set a different layout view, or set it to `null` so no layout file will be used.</span></span>

<span data-ttu-id="021a2-154">Ahora, vamos a cambiar el título de la vista de índice.</span><span class="sxs-lookup"><span data-stu-id="021a2-154">Now, let's change the title of the Index view.</span></span>

<span data-ttu-id="021a2-155">Abra *MvcMovie\Views\HelloWorld\Index.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="021a2-155">Open *MvcMovie\Views\HelloWorld\Index.cshtml*.</span></span> <span data-ttu-id="021a2-156">Hay dos lugares para realizar un cambio: en primer lugar, el texto que aparece en el título del explorador y, a continuación, en el encabezado secundario (el `<h2>` elemento).</span><span class="sxs-lookup"><span data-stu-id="021a2-156">There are two places to make a change: first, the text that appears in the title of the browser, and then in the secondary header (the `<h2>` element).</span></span> <span data-ttu-id="021a2-157">Haremos que sean algo diferentes para que pueda ver qué parte del código cambia cada área de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="021a2-157">You'll make them slightly different so you can see which bit of code changes which part of the app.</span></span>

[!code-cshtml[Main](adding-a-view/samples/sample6.cshtml?highlight=2,5)]

<span data-ttu-id="021a2-158">Para indicar el título HTML para mostrar el código anterior establece un `Title` propiedad de la `ViewBag` objeto (que se encuentra en la *Index.cshtml* plantilla de vista).</span><span class="sxs-lookup"><span data-stu-id="021a2-158">To indicate the HTML title to display, the code above sets a `Title` property of the `ViewBag` object (which is in the *Index.cshtml* view template).</span></span> <span data-ttu-id="021a2-159">Tenga en cuenta que la plantilla de diseño ( *Views\Shared\\_Layout.cshtml* ) usa este valor en el `<title>` elemento como parte de la `<head>` sección del archivo HTML que se modificó anteriormente.</span><span class="sxs-lookup"><span data-stu-id="021a2-159">Notice that the layout template ( *Views\Shared\\_Layout.cshtml* ) uses this value in the `<title>` element as part of the `<head>` section of the HTML that we modified previously.</span></span>

[!code-cshtml[Main](adding-a-view/samples/sample7.cshtml?highlight=6)]

<span data-ttu-id="021a2-160">Mediante este `ViewBag` enfoque, puede pasar fácilmente otros parámetros entre la plantilla de vista y el archivo de diseño.</span><span class="sxs-lookup"><span data-stu-id="021a2-160">Using this `ViewBag` approach, you can easily pass other parameters between your view template and your layout file.</span></span>

<span data-ttu-id="021a2-161">Ejecute la aplicación.</span><span class="sxs-lookup"><span data-stu-id="021a2-161">Run the application.</span></span> <span data-ttu-id="021a2-162">Tenga en cuenta que el título del explorador, el encabezado principal y los encabezados secundarios han cambiado.</span><span class="sxs-lookup"><span data-stu-id="021a2-162">Notice that the browser title, the primary heading, and the secondary headings have changed.</span></span> <span data-ttu-id="021a2-163">(Si no ve los cambios en el explorador, es posible que esté viendo contenido almacenado en caché.</span><span class="sxs-lookup"><span data-stu-id="021a2-163">(If you don't see changes in the browser, you might be viewing cached content.</span></span> <span data-ttu-id="021a2-164">Presione Ctrl+F5 en el explorador para forzar que se cargue la respuesta del servidor). El título del explorador se crea con el `ViewBag.Title` se establece el *Index.cshtml* ver la plantilla y el adicionales &quot;-Movie App&quot; agregado en el archivo de diseño.</span><span class="sxs-lookup"><span data-stu-id="021a2-164">Press Ctrl+F5 in your browser to force the response from the server to be loaded.) The browser title is created with the `ViewBag.Title` we set in the *Index.cshtml* view template and the additional &quot;- Movie App&quot; added in the layout file.</span></span>

<span data-ttu-id="021a2-165">Observe también cómo el contenido en el *Index.cshtml* plantilla de vista se combinó con el  *\_Layout.cshtml* se envió la plantilla de vista y una única respuesta HTML al explorador.</span><span class="sxs-lookup"><span data-stu-id="021a2-165">Also notice how the content in the *Index.cshtml* view template was merged with the *\_Layout.cshtml* view template and a single HTML response was sent to the browser.</span></span> <span data-ttu-id="021a2-166">Con las plantillas de diseño es realmente fácil hacer cambios para que se apliquen en todas las páginas de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="021a2-166">Layout templates make it really easy to make changes that apply across all of the pages in your application.</span></span>

![](adding-a-view/_static/image9.png)

<span data-ttu-id="021a2-167">Nuestra pequeña cantidad de &quot;datos&quot; (en este caso el &quot;Hola desde nuestra plantilla de vista!&quot; mensaje) está codificado de forma rígida, sin embargo.</span><span class="sxs-lookup"><span data-stu-id="021a2-167">Our little bit of &quot;data&quot; (in this case the &quot;Hello from our View Template!&quot; message) is hard-coded, though.</span></span> <span data-ttu-id="021a2-168">La aplicación de MVC tiene un &quot;V&quot; (vista) y tiene un &quot;C&quot; (controlador), pero no &quot;M&quot; (model) todavía.</span><span class="sxs-lookup"><span data-stu-id="021a2-168">The MVC application has a &quot;V&quot; (view) and you've got a &quot;C&quot; (controller), but no &quot;M&quot; (model) yet.</span></span> <span data-ttu-id="021a2-169">En breve, le guiaremos a través de cómo crear una base de datos y recuperar los datos de modelo de.</span><span class="sxs-lookup"><span data-stu-id="021a2-169">Shortly, we'll walk through how to create a database and retrieve model data from it.</span></span>

## <a name="passing-data-from-the-controller-to-the-view"></a><span data-ttu-id="021a2-170">Pasar datos del controlador a la vista</span><span class="sxs-lookup"><span data-stu-id="021a2-170">Passing Data from the Controller to the View</span></span>

<span data-ttu-id="021a2-171">Antes de hablar acerca de los modelos y vaya a una base de datos, sin embargo, en primer lugar hablemos acerca de cómo pasar información desde el controlador a una vista.</span><span class="sxs-lookup"><span data-stu-id="021a2-171">Before we go to a database and talk about models, though, let's first talk about passing information from the controller to a view.</span></span> <span data-ttu-id="021a2-172">Las clases de controlador se invocan en respuesta a una solicitud de dirección URL entrante.</span><span class="sxs-lookup"><span data-stu-id="021a2-172">Controller classes are invoked in response to an incoming URL request.</span></span> <span data-ttu-id="021a2-173">Una clase de controlador es donde se escribe el código que controla el explorador entrante solicita, recupera datos de una base de datos y, en última instancia decida qué tipo de respuesta para enviar al explorador.</span><span class="sxs-lookup"><span data-stu-id="021a2-173">A controller class is where you write the code that handles the incoming browser requests, retrieves data from a database, and ultimately decides what type of response to send back to the browser.</span></span> <span data-ttu-id="021a2-174">Plantillas de vista, a continuación, pueden utilizarse desde un controlador para generar y dar formato a una respuesta HTML al explorador.</span><span class="sxs-lookup"><span data-stu-id="021a2-174">View templates can then be used from a controller to generate and format an HTML response to the browser.</span></span>

<span data-ttu-id="021a2-175">Los controladores son responsables de proporcionar los datos u objetos son necesarios para una plantilla de vista presentar una respuesta al explorador.</span><span class="sxs-lookup"><span data-stu-id="021a2-175">Controllers are responsible for providing whatever data or objects are required in order for a view template to render a response to the browser.</span></span> <span data-ttu-id="021a2-176">Procedimiento recomendado: **Una plantilla de vista nunca debe realizar la lógica de negocios ni interactuar directamente con una base de datos**.</span><span class="sxs-lookup"><span data-stu-id="021a2-176">A best practice: **A view template should never perform business logic or interact with a database directly**.</span></span> <span data-ttu-id="021a2-177">En su lugar, una plantilla de vista deban trabajar solo con los datos que se proporcionan el controlador.</span><span class="sxs-lookup"><span data-stu-id="021a2-177">Instead, a view template should work only with the data that's provided to it by the controller.</span></span> <span data-ttu-id="021a2-178">Esto mantiene &quot;separación de preocupaciones&quot; ayuda a mantener el código limpio, fácil de probar y más fácil de mantener.</span><span class="sxs-lookup"><span data-stu-id="021a2-178">Maintaining this &quot;separation of concerns&quot; helps keep your code clean, testable and more maintainable.</span></span>

<span data-ttu-id="021a2-179">Actualmente, el `Welcome` método de acción en el `HelloWorldController` clase toma un `name` y un `numTimes` parámetro y, a continuación, obtiene los valores directamente en el explorador.</span><span class="sxs-lookup"><span data-stu-id="021a2-179">Currently, the `Welcome` action method in the `HelloWorldController` class takes a `name` and a `numTimes` parameter and then outputs the values directly to the browser.</span></span> <span data-ttu-id="021a2-180">En lugar de que el controlador represente esta respuesta como una cadena, vamos a cambiar el controlador para que use una plantilla de vista en su lugar.</span><span class="sxs-lookup"><span data-stu-id="021a2-180">Rather than have the controller render this response as a string, let's change the controller to use a view template instead.</span></span> <span data-ttu-id="021a2-181">La plantilla de vista generará una respuesta dinámica, lo que significa que debe pasar las partes de datos adecuadas desde el controlador a la vista para que se genere la respuesta.</span><span class="sxs-lookup"><span data-stu-id="021a2-181">The view template will generate a dynamic response, which means that you need to pass appropriate bits of data from the controller to the view in order to generate the response.</span></span> <span data-ttu-id="021a2-182">Para ello, indique al controlador que coloque los datos dinámicos (parámetros) que necesita la plantilla de vista en un `ViewBag` objeto que puede tener acceso la plantilla de vista.</span><span class="sxs-lookup"><span data-stu-id="021a2-182">You can do this by having the controller put the dynamic data (parameters) that the view template needs in a `ViewBag` object that the view template can then access.</span></span>

<span data-ttu-id="021a2-183">Vuelva a la *HelloWorldController.cs* y cambie el `Welcome` método para agregar un `Message` y `NumTimes` valor para el `ViewBag` objeto.</span><span class="sxs-lookup"><span data-stu-id="021a2-183">Return to the *HelloWorldController.cs* file and change the `Welcome` method to add a `Message` and `NumTimes` value to the `ViewBag` object.</span></span> <span data-ttu-id="021a2-184">`ViewBag` es un objeto dinámico, lo que significa que puede colocar todo lo desee en él; la `ViewBag` objeto no tiene ninguna propiedad definida hasta que coloca algo dentro de él.</span><span class="sxs-lookup"><span data-stu-id="021a2-184">`ViewBag` is a dynamic object, which means you can put whatever you want in to it; the `ViewBag` object has no defined properties until you put something inside it.</span></span> <span data-ttu-id="021a2-185">El [sistema de enlace de modelos ASP.NET MVC](http://odetocode.com/Blogs/scott/archive/2009/04/27/6-tips-for-asp-net-mvc-model-binding.aspx) asigna automáticamente los parámetros con nombre (`name` y `numTimes`) de la cadena de consulta en la barra de direcciones para los parámetros del método.</span><span class="sxs-lookup"><span data-stu-id="021a2-185">The [ASP.NET MVC model binding system](http://odetocode.com/Blogs/scott/archive/2009/04/27/6-tips-for-asp-net-mvc-model-binding.aspx) automatically maps the named parameters (`name` and `numTimes`) from the query string in the address bar to parameters in your method.</span></span> <span data-ttu-id="021a2-186">El archivo *HelloWorldController.cs* completo tiene este aspecto:</span><span class="sxs-lookup"><span data-stu-id="021a2-186">The complete *HelloWorldController.cs* file looks like this:</span></span>

[!code-csharp[Main](adding-a-view/samples/sample8.cs)]

<span data-ttu-id="021a2-187">Ahora el `ViewBag` objeto contiene los datos que se pasará automáticamente a la vista.</span><span class="sxs-lookup"><span data-stu-id="021a2-187">Now the `ViewBag` object contains data that will be passed to the view automatically.</span></span> <span data-ttu-id="021a2-188">A continuación, necesita una plantilla de vista principal.</span><span class="sxs-lookup"><span data-stu-id="021a2-188">Next, you need a Welcome view template!</span></span> <span data-ttu-id="021a2-189">En el **compilar** menú, seleccione **compilar solución** (o Ctrl + Mayús + B) para asegurarse de que se compila el proyecto.</span><span class="sxs-lookup"><span data-stu-id="021a2-189">In the **Build** menu, select **Build Solution** (or Ctrl+Shift+B) to make sure the project is compiled.</span></span> <span data-ttu-id="021a2-190">Haga clic en el *Views\HelloWorld* carpeta y haga clic en **agregar**, a continuación, haga clic en **página de vista de MVC 5 con diseño (Razor)**.</span><span class="sxs-lookup"><span data-stu-id="021a2-190">Right click the *Views\HelloWorld* folder and click **Add**, then click **MVC 5 View Page with Layout (Razor)**.</span></span>
  
![](adding-a-view/_static/image10.png)   
  
<span data-ttu-id="021a2-191">En el **especificar nombre para el elemento** diálogo cuadro, escriba *bienvenida*y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="021a2-191">In the **Specify Name for Item** dialog box, enter *Welcome*, and then click **OK**.</span></span>   
  
<span data-ttu-id="021a2-192">En el **seleccionar una página de diseño** cuadro de diálogo, acepte el valor predeterminado  **\_Layout.cshtml** y haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="021a2-192">In the **Select a Layout Page** dialog, accept the default **\_Layout.cshtml** and click **OK**.</span></span>  
  
![](adding-a-view/_static/image11.png)   

<span data-ttu-id="021a2-193">El *MvcMovie\Views\HelloWorld\Welcome.cshtml* se crea el archivo.</span><span class="sxs-lookup"><span data-stu-id="021a2-193">The *MvcMovie\Views\HelloWorld\Welcome.cshtml* file is created.</span></span>

<span data-ttu-id="021a2-194">Reemplace el marcado en el *Welcome.cshtml* archivo.</span><span class="sxs-lookup"><span data-stu-id="021a2-194">Replace the markup in the *Welcome.cshtml* file.</span></span> <span data-ttu-id="021a2-195">Se creará un bucle que dice &quot;Hello&quot; tantas veces como el usuario indica que debería.</span><span class="sxs-lookup"><span data-stu-id="021a2-195">You'll create a loop that says &quot;Hello&quot; as many times as the user says it should.</span></span> <span data-ttu-id="021a2-196">La completa *Welcome.cshtml* archivo se muestra a continuación.</span><span class="sxs-lookup"><span data-stu-id="021a2-196">The complete *Welcome.cshtml* file is shown below.</span></span>

[!code-cshtml[Main](adding-a-view/samples/sample9.cshtml)]

<span data-ttu-id="021a2-197">Ejecute la aplicación y vaya a la dirección URL siguiente:</span><span class="sxs-lookup"><span data-stu-id="021a2-197">Run the application and browse to the following URL:</span></span>

`http://localhost:xx/HelloWorld/Welcome?name=Scott&numtimes=4`

<span data-ttu-id="021a2-198">Ahora los datos se toman de la dirección URL y pasa al controlador mediante la [enlazador de modelos](http://odetocode.com/Blogs/scott/archive/2009/04/27/6-tips-for-asp-net-mvc-model-binding.aspx).</span><span class="sxs-lookup"><span data-stu-id="021a2-198">Now data is taken from the URL and passed to the controller using the [model binder](http://odetocode.com/Blogs/scott/archive/2009/04/27/6-tips-for-asp-net-mvc-model-binding.aspx).</span></span> <span data-ttu-id="021a2-199">El controlador empaqueta los datos en un `ViewBag` objeto y pasa ese objeto a la vista.</span><span class="sxs-lookup"><span data-stu-id="021a2-199">The controller packages the data into a `ViewBag` object and passes that object to the view.</span></span> <span data-ttu-id="021a2-200">La vista, a continuación, muestra los datos como HTML al usuario.</span><span class="sxs-lookup"><span data-stu-id="021a2-200">The view then displays the data as HTML to the user.</span></span>

![](adding-a-view/_static/image12.png)

<span data-ttu-id="021a2-201">En el ejemplo anterior, hemos usado un `ViewBag` objeto que se va a pasar datos a una vista del controlador.</span><span class="sxs-lookup"><span data-stu-id="021a2-201">In the sample above, we used a `ViewBag` object to pass data from the controller to a view.</span></span> <span data-ttu-id="021a2-202">Más adelante en el tutorial usaremos un modelo de vista para pasar datos de un controlador a una vista.</span><span class="sxs-lookup"><span data-stu-id="021a2-202">Later in the tutorial, we will use a view model to pass data from a controller to a view.</span></span> <span data-ttu-id="021a2-203">El enfoque del modelo de vista para pasar los datos es generalmente mucho más conveniente el enfoque de contenedor de vista.</span><span class="sxs-lookup"><span data-stu-id="021a2-203">The view model approach to passing data is generally much preferred over the view bag approach.</span></span> <span data-ttu-id="021a2-204">Consulte la entrada de blog [vistas dinámicas de V fuertemente tipados](https://blogs.msdn.com/b/rickandy/archive/2011/01/28/dynamic-v-strongly-typed-views.aspx) para obtener más información.</span><span class="sxs-lookup"><span data-stu-id="021a2-204">See the blog entry [Dynamic V Strongly Typed Views](https://blogs.msdn.com/b/rickandy/archive/2011/01/28/dynamic-v-strongly-typed-views.aspx) for more information.</span></span> 

<span data-ttu-id="021a2-205">Bueno, eso era un tipo de un &quot;M&quot; para el modelo, pero no el tipo de base de datos.</span><span class="sxs-lookup"><span data-stu-id="021a2-205">Well, that was a kind of an &quot;M&quot; for model, but not the database kind.</span></span> <span data-ttu-id="021a2-206">Vamos a aprovechar lo que hemos aprendido para crear una base de datos de películas.</span><span class="sxs-lookup"><span data-stu-id="021a2-206">Let's take what we've learned and create a database of movies.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="021a2-207">[Anterior](adding-a-controller.md)
> [Siguiente](adding-a-model.md)</span><span class="sxs-lookup"><span data-stu-id="021a2-207">[Previous](adding-a-controller.md)
[Next](adding-a-model.md)</span></span>
