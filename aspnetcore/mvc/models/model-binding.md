---
title: Enlace de modelos en ASP.NET Core
author: tdykstra
description: Obtenga información sobre cómo el enlace de modelos en ASP.NET Core MVC asigna datos de solicitudes HTTP a parámetros de método de acción.
ms.assetid: 0be164aa-1d72-4192-bd6b-192c9c301164
ms.author: tdykstra
ms.date: 11/13/2018
uid: mvc/models/model-binding
ms.openlocfilehash: 1dc9b41328ed78440622acc1865b6f088d394403
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 03/01/2019
ms.locfileid: "57037052"
---
# <a name="model-binding-in-aspnet-core"></a><span data-ttu-id="f419e-103">Enlace de modelos en ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="f419e-103">Model Binding in ASP.NET Core</span></span>

<span data-ttu-id="f419e-104">Por [Rachel Appel](https://github.com/rachelappel)</span><span class="sxs-lookup"><span data-stu-id="f419e-104">By [Rachel Appel](https://github.com/rachelappel)</span></span>

## <a name="introduction-to-model-binding"></a><span data-ttu-id="f419e-105">Introducción enlace de modelos</span><span class="sxs-lookup"><span data-stu-id="f419e-105">Introduction to model binding</span></span>

<span data-ttu-id="f419e-106">El enlace de modelos en ASP.NET Core MVC asigna datos de solicitudes HTTP a parámetros de método de acción.</span><span class="sxs-lookup"><span data-stu-id="f419e-106">Model binding in ASP.NET Core MVC maps data from HTTP requests to action method parameters.</span></span> <span data-ttu-id="f419e-107">Los parámetros pueden ser tipos simples, como cadenas, enteros o flotantes, o pueden ser tipos complejos.</span><span class="sxs-lookup"><span data-stu-id="f419e-107">The parameters may be simple types such as strings, integers, or floats, or they may be complex types.</span></span> <span data-ttu-id="f419e-108">Se trata de una excelente característica de MVC porque la asignación de los datos entrantes a un equivalente es un escenario muy frecuente, independientemente del tamaño o la complejidad de los datos.</span><span class="sxs-lookup"><span data-stu-id="f419e-108">This is a great feature of MVC because mapping incoming data to a counterpart is an often repeated scenario, regardless of size or complexity of the data.</span></span> <span data-ttu-id="f419e-109">MVC soluciona este problema abstrayendo el enlace para que los desarrolladores no tengan que seguir reescribiendo una versión algo diferente de ese mismo código en cada aplicación.</span><span class="sxs-lookup"><span data-stu-id="f419e-109">MVC solves this problem by abstracting binding away so developers don't have to keep rewriting a slightly different version of that same code in every app.</span></span> <span data-ttu-id="f419e-110">Escribir su propio texto o código para el convertidor de tipos es una tarea aburrida y proclive a errores.</span><span class="sxs-lookup"><span data-stu-id="f419e-110">Writing your own text to type converter code is tedious, and error prone.</span></span>

## <a name="how-model-binding-works"></a><span data-ttu-id="f419e-111">Cómo funciona el enlace de modelos</span><span class="sxs-lookup"><span data-stu-id="f419e-111">How model binding works</span></span>

<span data-ttu-id="f419e-112">Cuando MVC recibe una solicitud HTTP, la enruta a un método de acción específico de un controlador.</span><span class="sxs-lookup"><span data-stu-id="f419e-112">When MVC receives an HTTP request, it routes it to a specific action method of a controller.</span></span> <span data-ttu-id="f419e-113">Determina qué método de acción se ejecutará en función del contenido de los datos de ruta y luego enlaza valores de la solicitud HTTP a los parámetros de ese método de acción.</span><span class="sxs-lookup"><span data-stu-id="f419e-113">It determines which action method to run based on what is in the route data, then it binds values from the HTTP request to that action method's parameters.</span></span> <span data-ttu-id="f419e-114">Pongamos como ejemplo esta URL:</span><span class="sxs-lookup"><span data-stu-id="f419e-114">For example, consider the following URL:</span></span>

`http://contoso.com/movies/edit/2`

<span data-ttu-id="f419e-115">Puesto que la plantilla de ruta tiene este aspecto, `{controller=Home}/{action=Index}/{id?}`, `movies/edit/2` enruta al controlador `Movies` y su método de acción `Edit`.</span><span class="sxs-lookup"><span data-stu-id="f419e-115">Since the route template looks like this, `{controller=Home}/{action=Index}/{id?}`, `movies/edit/2` routes to the `Movies` controller, and its `Edit` action method.</span></span> <span data-ttu-id="f419e-116">También acepta un parámetro opcional denominado `id`.</span><span class="sxs-lookup"><span data-stu-id="f419e-116">It also accepts an optional parameter called `id`.</span></span> <span data-ttu-id="f419e-117">El código para el método de acción debe parecerse a esto:</span><span class="sxs-lookup"><span data-stu-id="f419e-117">The code for the action method should look something like this:</span></span>

```csharp
public IActionResult Edit(int? id)
   ```

<span data-ttu-id="f419e-118">Nota: Las cadenas de la ruta de dirección URL no distinguen mayúsculas de minúsculas.</span><span class="sxs-lookup"><span data-stu-id="f419e-118">Note: The strings in the URL route are not case sensitive.</span></span>

<span data-ttu-id="f419e-119">MVC intentará enlazar los datos de la solicitud a los parámetros de acción por su nombre.</span><span class="sxs-lookup"><span data-stu-id="f419e-119">MVC will try to bind request data to the action parameters by name.</span></span> <span data-ttu-id="f419e-120">MVC buscará valores para cada parámetro mediante el nombre del parámetro y los nombres de sus propiedades públicas configurables.</span><span class="sxs-lookup"><span data-stu-id="f419e-120">MVC will look for values for each parameter using the parameter name and the names of its public settable properties.</span></span> <span data-ttu-id="f419e-121">En el ejemplo anterior, el único parámetro de acción se denomina `id`, el cual MVC enlaza al valor con el mismo nombre en los valores de ruta.</span><span class="sxs-lookup"><span data-stu-id="f419e-121">In the above example, the only action parameter is named `id`, which MVC binds to the value with the same name in the route values.</span></span> <span data-ttu-id="f419e-122">Además de los valores de ruta, MVC enlazará datos de varias partes de la solicitud y lo hará en un orden establecido.</span><span class="sxs-lookup"><span data-stu-id="f419e-122">In addition to route values MVC will bind data from various parts of the request and it does so in a set order.</span></span> <span data-ttu-id="f419e-123">Esta es una lista de los orígenes de datos en el orden en que el enlace de modelos busca en ellos:</span><span class="sxs-lookup"><span data-stu-id="f419e-123">Below is a list of the data sources in the order that model binding looks through them:</span></span>

1. <span data-ttu-id="f419e-124">`Form values`: Estos son los valores de formulario que van en la solicitud HTTP mediante el método POST.</span><span class="sxs-lookup"><span data-stu-id="f419e-124">`Form values`: These are form values that go in the HTTP request using the POST method.</span></span> <span data-ttu-id="f419e-125">(incluidas las solicitudes POST de jQuery).</span><span class="sxs-lookup"><span data-stu-id="f419e-125">(including jQuery POST requests).</span></span>

2. <span data-ttu-id="f419e-126">`Route values`: El conjunto de valores de ruta proporcionados por [enrutamiento](xref:fundamentals/routing)</span><span class="sxs-lookup"><span data-stu-id="f419e-126">`Route values`: The set of route values provided by [Routing](xref:fundamentals/routing)</span></span>

3. <span data-ttu-id="f419e-127">`Query strings`: La parte de la cadena de consulta del URI.</span><span class="sxs-lookup"><span data-stu-id="f419e-127">`Query strings`: The query string part of the URI.</span></span>

<!-- DocFX BUG
The link works but generates an error when building with DocFX
@fundamentals/routing
[Routing](xref:fundamentals/routing)
-->

<span data-ttu-id="f419e-128">Nota: Los valores del formulario, datos de ruta y las cadenas se almacenan como pares nombre / valor de consulta.</span><span class="sxs-lookup"><span data-stu-id="f419e-128">Note: Form values, route data, and query strings are all stored as name-value pairs.</span></span>

<span data-ttu-id="f419e-129">Como el enlace de modelos pidió una clave con el nombre `id` y no hay nada denominado `id` en los valores de formulario, continuó con los valores de ruta buscando esa clave.</span><span class="sxs-lookup"><span data-stu-id="f419e-129">Since model binding asked for a key named `id` and there's nothing named `id` in the form values, it moved on to the route values looking for that key.</span></span> <span data-ttu-id="f419e-130">En nuestro ejemplo, es una coincidencia.</span><span class="sxs-lookup"><span data-stu-id="f419e-130">In our example, it's a match.</span></span> <span data-ttu-id="f419e-131">Se produce el enlace y el valor se convierte en el entero 2.</span><span class="sxs-lookup"><span data-stu-id="f419e-131">Binding happens, and the value is converted to the integer 2.</span></span> <span data-ttu-id="f419e-132">La misma solicitud mediante Edit(string id) se convertiría en la cadena "2".</span><span class="sxs-lookup"><span data-stu-id="f419e-132">The same request using Edit(string id) would convert to the string "2".</span></span>

<span data-ttu-id="f419e-133">Hasta ahora en el ejemplo se usan tipos simples.</span><span class="sxs-lookup"><span data-stu-id="f419e-133">So far the example uses simple types.</span></span> <span data-ttu-id="f419e-134">En MVC, los tipos simples son cualquier tipo o tipo primitivo de .NET con un convertidor de tipos de cadena.</span><span class="sxs-lookup"><span data-stu-id="f419e-134">In MVC simple types are any .NET primitive type or type with a string type converter.</span></span> <span data-ttu-id="f419e-135">Si el parámetro del método de acción fuera una clase como el tipo `Movie`, que contiene tipos simples y complejos como propiedades, el enlace de modelos de MVC seguiría controlándolo correctamente.</span><span class="sxs-lookup"><span data-stu-id="f419e-135">If the action method's parameter were a class such as the `Movie` type, which contains both simple and complex types as properties, MVC's model binding will still handle it nicely.</span></span> <span data-ttu-id="f419e-136">Usa reflexión y recursividad para recorrer las propiedades de tipos complejos buscando coincidencias.</span><span class="sxs-lookup"><span data-stu-id="f419e-136">It uses reflection and recursion to traverse the properties of complex types looking for matches.</span></span> <span data-ttu-id="f419e-137">El enlace de modelos busca el patrón *parameter_name.property_name* para enlazar los valores a las propiedades.</span><span class="sxs-lookup"><span data-stu-id="f419e-137">Model binding looks for the pattern *parameter_name.property_name* to bind values to properties.</span></span> <span data-ttu-id="f419e-138">Si no encuentra los valores coincidentes con esta forma, intentará enlazar usando solo el nombre de propiedad.</span><span class="sxs-lookup"><span data-stu-id="f419e-138">If it doesn't find matching values of this form, it will attempt to bind using just the property name.</span></span> <span data-ttu-id="f419e-139">Para esos tipos, como los tipos `Collection`, el enlace de modelos busca coincidencias para *parameter_name[index]* o solo *[index]*.</span><span class="sxs-lookup"><span data-stu-id="f419e-139">For those types such as `Collection` types, model binding looks for matches to *parameter_name[index]* or just *[index]*.</span></span> <span data-ttu-id="f419e-140">En enlace de modelos trata los tipos `Dictionary` del mismo modo, preguntando por *parameter_name [key]* o simplemente *[key]*, siempre que las claves sean tipos simples.</span><span class="sxs-lookup"><span data-stu-id="f419e-140">Model binding treats  `Dictionary` types similarly, asking for *parameter_name[key]* or just *[key]*, as long as the keys are simple types.</span></span> <span data-ttu-id="f419e-141">Las claves compatibles coinciden con el HTML de nombres de campos y los asistentes de etiquetas generadas para el mismo tipo de modelo.</span><span class="sxs-lookup"><span data-stu-id="f419e-141">Keys that are supported match the field names HTML and tag helpers generated for the same model type.</span></span> <span data-ttu-id="f419e-142">Esto permite realizar un recorrido de ida y vuelta para que los campos del formulario permanezcan rellenados con los datos del usuario para su comodidad (por ejemplo, cuando los datos enlazados de una creación o una edición no superaron la validación).</span><span class="sxs-lookup"><span data-stu-id="f419e-142">This enables round-tripping values so that the form fields remain filled with the user's input for their convenience, for example, when bound data from a create or edit didn't pass validation.</span></span>

<span data-ttu-id="f419e-143">Para que el enlace de modelos sea posible, la clase debe tener un constructor público predeterminado y propiedades grabables públicas para enlazar.</span><span class="sxs-lookup"><span data-stu-id="f419e-143">To make model binding possible, the class must have a public default constructor and public writable properties to bind.</span></span> <span data-ttu-id="f419e-144">Cuando se da el enlace de modelos, se crea una instancia de la clase solamente con el constructor predeterminado público. Después, es posible establecer las propiedades.</span><span class="sxs-lookup"><span data-stu-id="f419e-144">When model binding occurs, the class is instantiated using the public default constructor, then the properties can be set.</span></span>

<span data-ttu-id="f419e-145">Cuando se enlaza un parámetro, el enlace de modelos deja de buscar valores con ese nombre y pasa a enlazar el siguiente parámetro.</span><span class="sxs-lookup"><span data-stu-id="f419e-145">When a parameter is bound, model binding stops looking for values with that name and it moves on to bind the next parameter.</span></span> <span data-ttu-id="f419e-146">En caso contrario, el comportamiento predeterminado del enlace de modelos establece los parámetros en sus valores predeterminados según el tipo:</span><span class="sxs-lookup"><span data-stu-id="f419e-146">Otherwise, the default model binding behavior sets parameters to their default values depending on their type:</span></span>

* <span data-ttu-id="f419e-147">`T[]`: A excepción de las matrices de tipo `byte[]`, enlace establece parámetros de tipo `T[]` a `Array.Empty<T>()`.</span><span class="sxs-lookup"><span data-stu-id="f419e-147">`T[]`: With the exception of arrays of type `byte[]`, binding sets parameters of type `T[]` to `Array.Empty<T>()`.</span></span> <span data-ttu-id="f419e-148">Las matrices de tipo `byte[]` se establecen en `null`.</span><span class="sxs-lookup"><span data-stu-id="f419e-148">Arrays of type `byte[]` are set to `null`.</span></span>

* <span data-ttu-id="f419e-149">Tipos de referencia: Enlace crea una instancia de una clase con el constructor predeterminado sin tener que establecer las propiedades.</span><span class="sxs-lookup"><span data-stu-id="f419e-149">Reference Types: Binding creates an instance of a class with the default constructor without setting properties.</span></span> <span data-ttu-id="f419e-150">Pero el enlace de modelos establece parámetros `string` en `null`.</span><span class="sxs-lookup"><span data-stu-id="f419e-150">However, model binding sets `string` parameters to `null`.</span></span>

* <span data-ttu-id="f419e-151">Tipos que aceptan valores NULL: Tipos que aceptan valores NULL se establecen en `null`.</span><span class="sxs-lookup"><span data-stu-id="f419e-151">Nullable Types: Nullable types are set to `null`.</span></span> <span data-ttu-id="f419e-152">En el ejemplo anterior, el enlace de modelos establece `id` en `null` ya que es de tipo `int?`.</span><span class="sxs-lookup"><span data-stu-id="f419e-152">In the above example, model binding sets `id` to `null` since it's of type `int?`.</span></span>

* <span data-ttu-id="f419e-153">Tipos de valor: Tipos de valor que acepta valores null que no son de tipo `T` se establecen en `default(T)`.</span><span class="sxs-lookup"><span data-stu-id="f419e-153">Value Types: Non-nullable value types of type `T` are set to `default(T)`.</span></span> <span data-ttu-id="f419e-154">Por ejemplo, el enlace de modelos establecerá un parámetro `int id` en 0.</span><span class="sxs-lookup"><span data-stu-id="f419e-154">For example, model binding will set a parameter `int id` to 0.</span></span> <span data-ttu-id="f419e-155">Considere la posibilidad de usar la validación de modelos o los tipos que aceptan valores NULL en lugar de depender de valores predeterminados.</span><span class="sxs-lookup"><span data-stu-id="f419e-155">Consider using model validation or nullable types rather than relying on default values.</span></span>

<span data-ttu-id="f419e-156">Si se produce un error de enlace, MVC no genera un error.</span><span class="sxs-lookup"><span data-stu-id="f419e-156">If binding fails, MVC doesn't throw an error.</span></span> <span data-ttu-id="f419e-157">Todas las acciones que aceptan datos del usuario deben comprobar la propiedad `ModelState.IsValid`.</span><span class="sxs-lookup"><span data-stu-id="f419e-157">Every action which accepts user input should check the `ModelState.IsValid` property.</span></span>

<span data-ttu-id="f419e-158">Nota: Cada entrada en el controlador `ModelState` propiedad es un `ModelStateEntry` que contiene un `Errors` propiedad.</span><span class="sxs-lookup"><span data-stu-id="f419e-158">Note: Each entry in the controller's `ModelState` property is a `ModelStateEntry` containing an `Errors` property.</span></span> <span data-ttu-id="f419e-159">No suele ser necesario consultar esta colección por su cuenta.</span><span class="sxs-lookup"><span data-stu-id="f419e-159">It's rarely necessary to query this collection yourself.</span></span> <span data-ttu-id="f419e-160">Utilice `ModelState.IsValid` en su lugar.</span><span class="sxs-lookup"><span data-stu-id="f419e-160">Use `ModelState.IsValid` instead.</span></span>

<span data-ttu-id="f419e-161">Además, hay algunos tipos de datos especiales que MVC debe tener en cuenta al realizar el enlace de modelos:</span><span class="sxs-lookup"><span data-stu-id="f419e-161">Additionally, there are some special data types that MVC must consider when performing model binding:</span></span>

* <span data-ttu-id="f419e-162">`IFormFile`, `IEnumerable<IFormFile>`: Uno o varios archivos cargados que forman parte de la solicitud HTTP.</span><span class="sxs-lookup"><span data-stu-id="f419e-162">`IFormFile`, `IEnumerable<IFormFile>`: One or more uploaded files that are part of the HTTP request.</span></span>

* <span data-ttu-id="f419e-163">`CancellationToken`: Se utiliza para cancelar la actividad en controladores asincrónicos.</span><span class="sxs-lookup"><span data-stu-id="f419e-163">`CancellationToken`: Used to cancel activity in asynchronous controllers.</span></span>

<span data-ttu-id="f419e-164">Estos tipos se pueden enlazar a parámetros de acción o a propiedades en un tipo de clase.</span><span class="sxs-lookup"><span data-stu-id="f419e-164">These types can be bound to action parameters or to properties on a class type.</span></span>

<span data-ttu-id="f419e-165">Cuando se completa el enlace de modelos, se produce la [validación](validation.md).</span><span class="sxs-lookup"><span data-stu-id="f419e-165">Once model binding is complete, [Validation](validation.md) occurs.</span></span> <span data-ttu-id="f419e-166">El enlace de modelos predeterminado funciona muy bien para la amplia mayoría de escenarios de desarrollo.</span><span class="sxs-lookup"><span data-stu-id="f419e-166">Default model binding works great for the vast majority of development scenarios.</span></span> <span data-ttu-id="f419e-167">También es extensible, por lo que si tiene necesidades únicas, puede personalizar el comportamiento integrado.</span><span class="sxs-lookup"><span data-stu-id="f419e-167">It's also extensible so if you have unique needs you can customize the built-in behavior.</span></span>

## <a name="customize-model-binding-behavior-with-attributes"></a><span data-ttu-id="f419e-168">Personalizar el comportamiento de enlace de modelos con atributos</span><span class="sxs-lookup"><span data-stu-id="f419e-168">Customize model binding behavior with attributes</span></span>

<span data-ttu-id="f419e-169">MVC contiene varios atributos que puede usar para dirigir su comportamiento de enlace de modelos predeterminado a un origen diferente.</span><span class="sxs-lookup"><span data-stu-id="f419e-169">MVC contains several attributes that you can use to direct its default model binding behavior to a different source.</span></span> <span data-ttu-id="f419e-170">Por ejemplo, puede especificar si se requiere el enlace para una propiedad o si nunca debe ocurrir en absoluto mediante el uso de los atributos `[BindRequired]` o `[BindNever]`.</span><span class="sxs-lookup"><span data-stu-id="f419e-170">For example, you can specify whether binding is required for a property, or if it should never happen at all by using the `[BindRequired]` or `[BindNever]` attributes.</span></span> <span data-ttu-id="f419e-171">Como alternativa, puede reemplazar el origen de datos predeterminado y especificar el origen de datos del enlazador de modelos.</span><span class="sxs-lookup"><span data-stu-id="f419e-171">Alternatively, you can override the default data source, and specify the model binder's data source.</span></span> <span data-ttu-id="f419e-172">En esta lista se muestran los atributos del enlace de modelos:</span><span class="sxs-lookup"><span data-stu-id="f419e-172">Below is a list of model binding attributes:</span></span>

* <span data-ttu-id="f419e-173">`[BindRequired]`: Este atributo agrega un error de estado del modelo si no se puede producir el enlace.</span><span class="sxs-lookup"><span data-stu-id="f419e-173">`[BindRequired]`: This attribute adds a model state error if binding cannot occur.</span></span>

* <span data-ttu-id="f419e-174">`[BindNever]`: Indica que el enlazador de modelos que nunca enlace a este parámetro.</span><span class="sxs-lookup"><span data-stu-id="f419e-174">`[BindNever]`: Tells the model binder to never bind to this parameter.</span></span>

* <span data-ttu-id="f419e-175">`[FromHeader]`, `[FromQuery]`, `[FromRoute]`, `[FromForm]`: Puede usarlas para especificar el origen de enlace exacto que desea aplicar.</span><span class="sxs-lookup"><span data-stu-id="f419e-175">`[FromHeader]`, `[FromQuery]`, `[FromRoute]`, `[FromForm]`: Use these to specify the exact binding source you want to apply.</span></span>

* <span data-ttu-id="f419e-176">`[FromServices]`: Utiliza este atributo [inserción de dependencias](../../fundamentals/dependency-injection.md) para enlazar parámetros de servicios.</span><span class="sxs-lookup"><span data-stu-id="f419e-176">`[FromServices]`: This attribute uses [dependency injection](../../fundamentals/dependency-injection.md) to bind parameters from services.</span></span>

* <span data-ttu-id="f419e-177">`[FromBody]`: Use los formateadores configurados para enlazar datos desde el cuerpo de solicitud.</span><span class="sxs-lookup"><span data-stu-id="f419e-177">`[FromBody]`: Use the configured formatters to bind data from the request body.</span></span> <span data-ttu-id="f419e-178">El formateador se selecciona según el tipo de contenido de la solicitud.</span><span class="sxs-lookup"><span data-stu-id="f419e-178">The formatter is selected based on content type of the request.</span></span>

* <span data-ttu-id="f419e-179">`[ModelBinder]`: Se utiliza para reemplazar el enlazador de modelos predeterminado, origen y el nombre de enlace.</span><span class="sxs-lookup"><span data-stu-id="f419e-179">`[ModelBinder]`: Used to override the default model binder, binding source and name.</span></span>

<span data-ttu-id="f419e-180">Los atributos son herramientas muy útiles cuando es necesario invalidar el comportamiento predeterminado del enlace de modelos.</span><span class="sxs-lookup"><span data-stu-id="f419e-180">Attributes are very helpful tools when you need to override the default behavior of model binding.</span></span>

## <a name="customize-model-binding-and-validation-globally"></a><span data-ttu-id="f419e-181">Personalizar la validación y el enlace de modelos de forma global</span><span class="sxs-lookup"><span data-stu-id="f419e-181">Customize model binding and validation globally</span></span>

<span data-ttu-id="f419e-182">El comportamiento del enlace de modelos y la validación del sistema se controla con [ModelMetadata](/dotnet/api/microsoft.aspnetcore.mvc.modelbinding.modelmetadata), que describe lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="f419e-182">The model binding and validation system's behavior is driven by [ModelMetadata](/dotnet/api/microsoft.aspnetcore.mvc.modelbinding.modelmetadata) that describes:</span></span>

* <span data-ttu-id="f419e-183">Cómo se va a enlazar un modelo.</span><span class="sxs-lookup"><span data-stu-id="f419e-183">How a model is to be bound.</span></span>
* <span data-ttu-id="f419e-184">Cómo se produce la validación en el tipo y sus propiedades.</span><span class="sxs-lookup"><span data-stu-id="f419e-184">How validation occurs on the type and its properties.</span></span>

<span data-ttu-id="f419e-185">Los aspectos de comportamiento del sistema se pueden configurar de forma global mediante la adición de un proveedor de detalles para [MvcOptions.ModelMetadataDetailsProviders](/dotnet/api/microsoft.aspnetcore.mvc.mvcoptions.modelmetadatadetailsproviders#Microsoft_AspNetCore_Mvc_MvcOptions_ModelMetadataDetailsProviders).</span><span class="sxs-lookup"><span data-stu-id="f419e-185">Aspects of the system's behavior can be configured globally by adding a details provider to [MvcOptions.ModelMetadataDetailsProviders](/dotnet/api/microsoft.aspnetcore.mvc.mvcoptions.modelmetadatadetailsproviders#Microsoft_AspNetCore_Mvc_MvcOptions_ModelMetadataDetailsProviders).</span></span> <span data-ttu-id="f419e-186">MVC tiene algunos proveedores de detalles integrados que permiten configurar el comportamiento, como deshabilitar el enlace de modelos o la validación para tipos concretos.</span><span class="sxs-lookup"><span data-stu-id="f419e-186">MVC has a few built-in details providers that allow configuring behavior such as disabling model binding or validation for certain types.</span></span>

<span data-ttu-id="f419e-187">Para deshabilitar el enlace de modelos en todos los modelos de un tipo determinado, agregue un [ExcludeBindingMetadataProvider](/dotnet/api/microsoft.aspnetcore.mvc.modelbinding.metadata.excludebindingmetadataprovider) en `Startup.ConfigureServices`.</span><span class="sxs-lookup"><span data-stu-id="f419e-187">To disable model binding on all models of a certain type, add an [ExcludeBindingMetadataProvider](/dotnet/api/microsoft.aspnetcore.mvc.modelbinding.metadata.excludebindingmetadataprovider) in `Startup.ConfigureServices`.</span></span> <span data-ttu-id="f419e-188">Por ejemplo, para deshabilitar el enlace de modelos en todos los modelos del tipo `System.Version`:</span><span class="sxs-lookup"><span data-stu-id="f419e-188">For example, to disable model binding on all models of type `System.Version`:</span></span>

```csharp
services.AddMvc().AddMvcOptions(options =>
    options.ModelMetadataDetailsProviders.Add(
        new ExcludeBindingMetadataProvider(typeof(System.Version))));
```

<span data-ttu-id="f419e-189">Para deshabilitar la validación en las propiedades de un tipo determinado, agregue un [SuppressChildValidationMetadataProvider](/dotnet/api/microsoft.aspnetcore.mvc.modelbinding.suppresschildvalidationmetadataprovider) en `Startup.ConfigureServices`.</span><span class="sxs-lookup"><span data-stu-id="f419e-189">To disable validation on properties of a certain type, add a [SuppressChildValidationMetadataProvider](/dotnet/api/microsoft.aspnetcore.mvc.modelbinding.suppresschildvalidationmetadataprovider) in `Startup.ConfigureServices`.</span></span> <span data-ttu-id="f419e-190">Por ejemplo, para deshabilitar la validación en las propiedades de tipo `System.Guid`:</span><span class="sxs-lookup"><span data-stu-id="f419e-190">For example, to disable validation on properties of type `System.Guid`:</span></span>

```csharp
services.AddMvc().AddMvcOptions(options =>
    options.ModelMetadataDetailsProviders.Add(
        new SuppressChildValidationMetadataProvider(typeof(System.Guid))));
```

## <a name="bind-formatted-data-from-the-request-body"></a><span data-ttu-id="f419e-191">Enlazar datos con formato desde el cuerpo de la solicitud</span><span class="sxs-lookup"><span data-stu-id="f419e-191">Bind formatted data from the request body</span></span>

<span data-ttu-id="f419e-192">Los datos de la solicitud pueden proceder de una variedad de formatos como JSON, XML y muchos otros.</span><span class="sxs-lookup"><span data-stu-id="f419e-192">Request data can come in a variety of formats including JSON, XML and many others.</span></span> <span data-ttu-id="f419e-193">Cuando se usa el atributo [FromBody] para indicar que quiere enlazar un parámetro a los datos en el cuerpo de la solicitud, MVC usa un conjunto de formateadores configurado para administrar los datos de la solicitud en función de su tipo de contenido.</span><span class="sxs-lookup"><span data-stu-id="f419e-193">When you use the [FromBody] attribute to indicate that you want to bind a parameter to data in the request body, MVC uses a configured set of formatters to handle the request data based on its content type.</span></span> <span data-ttu-id="f419e-194">De forma predeterminada, MVC incluye una clase `JsonInputFormatter` para controlar datos JSON, pero puede agregar formateadores adicionales para administrar XML y otros formatos personalizados.</span><span class="sxs-lookup"><span data-stu-id="f419e-194">By default MVC includes a `JsonInputFormatter` class for handling JSON data, but you can add additional formatters for handling XML and other custom formats.</span></span>

> [!NOTE]
> <span data-ttu-id="f419e-195">Puede haber como máximo un parámetro por cada acción decorada con `[FromBody]`.</span><span class="sxs-lookup"><span data-stu-id="f419e-195">There can be at most one parameter per action decorated with `[FromBody]`.</span></span> <span data-ttu-id="f419e-196">El tiempo de ejecución de ASP.NET Core MVC delega la responsabilidad de leer la secuencia de solicitudes al formateador.</span><span class="sxs-lookup"><span data-stu-id="f419e-196">The ASP.NET Core MVC run-time delegates the responsibility of reading the request stream to the formatter.</span></span> <span data-ttu-id="f419e-197">Una vez que se lee la secuencia de solicitudes para un parámetro, por lo general no es posible leer la secuencia de solicitudes de nuevo para enlazar otros parámetros `[FromBody]`.</span><span class="sxs-lookup"><span data-stu-id="f419e-197">Once the request stream is read for a parameter, it's generally not possible to read the request stream again for binding other `[FromBody]` parameters.</span></span>

> [!NOTE]
> <span data-ttu-id="f419e-198">`JsonInputFormatter` es el formateador predeterminado y se basa en [Json.NET](https://www.newtonsoft.com/json).</span><span class="sxs-lookup"><span data-stu-id="f419e-198">The `JsonInputFormatter` is the default formatter and is based on [Json.NET](https://www.newtonsoft.com/json).</span></span>

<span data-ttu-id="f419e-199">ASP.NET Core selecciona formateadores de entradas en función del encabezado [Content-Type](https://www.w3.org/Protocols/rfc1341/4_Content-Type.html) y el tipo del parámetro, a menos que tenga un atributo aplicado que especifique lo contrario.</span><span class="sxs-lookup"><span data-stu-id="f419e-199">ASP.NET Core selects input formatters based on the [Content-Type](https://www.w3.org/Protocols/rfc1341/4_Content-Type.html) header and the type of the parameter, unless there's an attribute applied to it specifying otherwise.</span></span> <span data-ttu-id="f419e-200">Si quiere usar XML u otro formato, debe configurarlo en el archivo *Startup.cs*, pero primero tiene que obtener una referencia a `Microsoft.AspNetCore.Mvc.Formatters.Xml` mediante NuGet.</span><span class="sxs-lookup"><span data-stu-id="f419e-200">If you'd like to use XML or another format you must configure it in the *Startup.cs* file, but you may first have to obtain a reference to `Microsoft.AspNetCore.Mvc.Formatters.Xml` using NuGet.</span></span> <span data-ttu-id="f419e-201">El código de inicio debe tener este aspecto:</span><span class="sxs-lookup"><span data-stu-id="f419e-201">Your startup code should look something like this:</span></span>

```csharp
public void ConfigureServices(IServiceCollection services)
{
    services.AddMvc()
        .AddXmlSerializerFormatters();
   }
```

<span data-ttu-id="f419e-202">El código del archivo *Startup.cs* contiene un método `ConfigureServices` con un argumento `services` que se puede usar para crear servicios para la aplicación ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="f419e-202">Code in the *Startup.cs* file contains a `ConfigureServices` method with a `services` argument you can use to build up services for your ASP.NET Core app.</span></span> <span data-ttu-id="f419e-203">En el ejemplo, vamos a agregar un formateador XML como un servicio que MVC proporcionará para esta aplicación.</span><span class="sxs-lookup"><span data-stu-id="f419e-203">In the sample, we are adding an XML formatter as a service that MVC will provide for this app.</span></span> <span data-ttu-id="f419e-204">El argumento `options` pasado al método `AddMvc` permite agregar y administrar filtros, formateadores y otras opciones del sistema desde MVC al inicio de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="f419e-204">The `options` argument passed into the `AddMvc` method allows you to add and manage filters, formatters, and other system options from MVC upon app startup.</span></span> <span data-ttu-id="f419e-205">Después, aplique el atributo `Consumes` a las clases de controlador o a los métodos de acción para que funcione con el formato que quiera.</span><span class="sxs-lookup"><span data-stu-id="f419e-205">Then apply the `Consumes` attribute to controller classes or action methods to work with the format you want.</span></span>

### <a name="custom-model-binding"></a><span data-ttu-id="f419e-206">Enlace de modelos personalizado</span><span class="sxs-lookup"><span data-stu-id="f419e-206">Custom Model Binding</span></span>

<span data-ttu-id="f419e-207">Puede ampliar el enlace de modelos escribiendo sus propios enlazadores de modelos personalizados.</span><span class="sxs-lookup"><span data-stu-id="f419e-207">You can extend model binding by writing your own custom model binders.</span></span> <span data-ttu-id="f419e-208">Más información sobre el [enlace de modelos personalizados](../advanced/custom-model-binding.md).</span><span class="sxs-lookup"><span data-stu-id="f419e-208">Learn more about [custom model binding](../advanced/custom-model-binding.md).</span></span>
