---
uid: whitepapers/aspnet4/breaking-changes
title: ASP.NET 4 cambios importantes | Microsoft Docs
author: rick-anderson
description: En este documento se describen los cambios realizados en la versión 4 de .NET Framework que pueden afectar a las aplicaciones que se crearon con...
ms.author: riande
ms.date: 02/10/2010
ms.assetid: d601c540-f86b-4feb-890c-20c806b3da6c
msc.legacyurl: /whitepapers/aspnet4/breaking-changes
msc.type: content
ms.openlocfilehash: 8ccad3b40a723c92a3164de082e1f94577141008
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 03/06/2020
ms.locfileid: "78439513"
---
# <a name="aspnet-4-breaking-changes"></a><span data-ttu-id="353c9-103">Cambios importantes de ASP.NET 4</span><span class="sxs-lookup"><span data-stu-id="353c9-103">ASP.NET 4 Breaking Changes</span></span>

> <span data-ttu-id="353c9-104">En este documento se describen los cambios realizados en la versión 4 de .NET Framework que pueden afectar a las aplicaciones que se crearon con versiones anteriores, incluidas las versiones beta 1 y beta 2 de ASP.NET 4.</span><span class="sxs-lookup"><span data-stu-id="353c9-104">This document describes changes that have been made for the .NET Framework version 4 release that can potentially affect applications that were created using earlier releases, including the ASP.NET 4 Beta 1 and Beta 2 releases.</span></span>
> 
> [<span data-ttu-id="353c9-105">Descargue estas notas del producto</span><span class="sxs-lookup"><span data-stu-id="353c9-105">Download This Whitepaper</span></span>](https://download.microsoft.com/download/7/1/A/71A105A9-89D6-4201-9CC5-AD6A3B7E2F22/ASP_NET_4_Breaking_Changes.pdf)

<a id="0.1__Toc256768952"></a><a id="0.1__Toc256770056"></a>

## <a name="contents"></a><span data-ttu-id="353c9-106">Contenido</span><span class="sxs-lookup"><span data-stu-id="353c9-106">Contents</span></span>

[<span data-ttu-id="353c9-107">Configuración de ControlRenderingCompatibilityVersion en el archivo Web. config</span><span class="sxs-lookup"><span data-stu-id="353c9-107">ControlRenderingCompatibilityVersion Setting in the Web.config File</span></span>](#0.1__Toc256770141 "_Toc256770141")  
[<span data-ttu-id="353c9-108">ClientIDMode cambios</span><span class="sxs-lookup"><span data-stu-id="353c9-108">ClientIDMode Changes</span></span>](#0.1__Toc256770142 "_Toc256770142")  
[<span data-ttu-id="353c9-109">HtmlEncode y UrlEncode ahora codifican comillas simples</span><span class="sxs-lookup"><span data-stu-id="353c9-109">HtmlEncode and UrlEncode Now Encode Single Quotation Marks</span></span>](#0.1__Toc256770143 "_Toc256770143")  
[<span data-ttu-id="353c9-110">El analizador de páginas ASP.NET (. aspx) es más estricto</span><span class="sxs-lookup"><span data-stu-id="353c9-110">ASP.NET Page (.aspx) Parser is Stricter</span></span>](#0.1__Toc256770144 "_Toc256770144")  
[<span data-ttu-id="353c9-111">Archivos de definición del explorador actualizados</span><span class="sxs-lookup"><span data-stu-id="353c9-111">Browser Definition Files Updated</span></span>](#0.1__Toc256770145 "_Toc256770145")  
[<span data-ttu-id="353c9-112">System. Web. Mobile. dll quitado del archivo de configuración Web raíz</span><span class="sxs-lookup"><span data-stu-id="353c9-112">System.Web.Mobile.dll Removed from Root Web Configuration File</span></span>](#0.1__Toc256770146 "_Toc256770146")  
[<span data-ttu-id="353c9-113">Validación de solicitud de ASP.NET</span><span class="sxs-lookup"><span data-stu-id="353c9-113">ASP.NET Request Validation</span></span>](#0.1__Toc256770147 "_Toc256770147")  
[<span data-ttu-id="353c9-114">El algoritmo hash predeterminado es ahora HMACSHA256</span><span class="sxs-lookup"><span data-stu-id="353c9-114">Default Hashing Algorithm Is Now HMACSHA256</span></span>](#0.1__Toc256770148 "_Toc256770148")  
[<span data-ttu-id="353c9-115">Errores de configuración relacionados con la nueva configuración raíz de ASP.NET 4</span><span class="sxs-lookup"><span data-stu-id="353c9-115">Configuration Errors Related to New ASP.NET 4 Root Configuration</span></span>](#0.1__Toc256770149 "_Toc256770149")  
[<span data-ttu-id="353c9-116">ASP.NET 4 las aplicaciones secundarias no se inician cuando se están en aplicaciones ASP.NET 2,0 o ASP.NET 3,5</span><span class="sxs-lookup"><span data-stu-id="353c9-116">ASP.NET 4 Child Applications Fail to Start When Under ASP.NET 2.0 or ASP.NET 3.5 Applications</span></span>](#0.1__Toc256770150 "_Toc256770150")  
[<span data-ttu-id="353c9-117">ASP.NET 4 los sitios web no se inician en los equipos en los que SharePoint está instalado</span><span class="sxs-lookup"><span data-stu-id="353c9-117">ASP.NET 4 Web Sites Fail to Start on Computers Where SharePoint Is Installed</span></span>](#0.1__Toc256770151 "_Toc256770151")  
[<span data-ttu-id="353c9-118">La propiedad HttpRequest. FilePath ya no incluye los valores de PathInfo</span><span class="sxs-lookup"><span data-stu-id="353c9-118">The HttpRequest.FilePath Property No Longer Includes PathInfo Values</span></span>](#0.1__Toc256770152 "_Toc256770152")  
[<span data-ttu-id="353c9-119">Las aplicaciones de ASP.NET 2,0 pueden generar errores de HttpException que hacen referencia a EURL. axd</span><span class="sxs-lookup"><span data-stu-id="353c9-119">ASP.NET 2.0 Applications Might Generate HttpException Errors that Reference eurl.axd</span></span>](#0.1__Toc256770153 "_Toc256770153")  
[<span data-ttu-id="353c9-120">Es posible que los controladores de eventos no se generen en un documento predeterminado en el modo integrado de IIS 7 o IIS 7,5</span><span class="sxs-lookup"><span data-stu-id="353c9-120">Event Handlers Might Not Be Not Raised in a Default Document in IIS 7 or IIS 7.5 Integrated Mode</span></span>](#0.1__Toc256770154 "_Toc256770154")  
[<span data-ttu-id="353c9-121">Cambios en la implementación de seguridad de acceso del código (CAS) de ASP.NET</span><span class="sxs-lookup"><span data-stu-id="353c9-121">Changes to the ASP.NET Code Access Security (CAS) Implementation</span></span>](#0.1__Toc256770155 "_Toc256770155")  
[<span data-ttu-id="353c9-122">Se han migrado MembershipUser y otros tipos en el espacio de nombres System. Web. Security</span><span class="sxs-lookup"><span data-stu-id="353c9-122">MembershipUser and Other Types in the System.Web.Security Namespace Have Been Moved</span></span>](#0.1__Toc256770156 "_Toc256770156")  
[<span data-ttu-id="353c9-123">El almacenamiento en caché de resultados cambia para variar \* encabezado HTTP</span><span class="sxs-lookup"><span data-stu-id="353c9-123">Output Caching Changes to Vary \* HTTP Header</span></span>](#0.1__Toc256770157 "_Toc256770157")  
[<span data-ttu-id="353c9-124">System. Web. Security Types for Passport está obsoleto</span><span class="sxs-lookup"><span data-stu-id="353c9-124">System.Web.Security Types for Passport are Obsolete</span></span>](#0.1__Toc256770158 "_Toc256770158")  
[<span data-ttu-id="353c9-125">La propiedad MenuItem. PopOutImageUrl no representa una imagen en ASP.NET 4</span><span class="sxs-lookup"><span data-stu-id="353c9-125">The MenuItem.PopOutImageUrl Property Fails to Render an Image in ASP.NET 4</span></span>](#0.1__Toc256770159 "_Toc256770159")  
[<span data-ttu-id="353c9-126">MENU. StaticPopOutImageUrl y menu. DynamicPopOutImageUrl no pueden representar imágenes cuando las rutas de acceso contienen barras diagonales inversas</span><span class="sxs-lookup"><span data-stu-id="353c9-126">Menu.StaticPopOutImageUrl and Menu.DynamicPopOutImageUrl Fail to Render Images When Paths Contain Backslashes</span></span>](#0.1__Toc256770160 "_Toc256770160")  
[<span data-ttu-id="353c9-127">Ausencia</span><span class="sxs-lookup"><span data-stu-id="353c9-127">Disclaimer</span></span>](#0.1__Toc256770161 "_Toc256770161")

<a id="0.1__ControlRenderingCompatibilityVersio"></a><a id="0.1__Toc245724853"></a><a id="0.1__Toc255587630"></a><a id="0.1__Toc256770141"></a>

## <a name="controlrenderingcompatibilityversion-setting-in-the-webconfig-file"></a><span data-ttu-id="353c9-128">Configuración de ControlRenderingCompatibilityVersion en el archivo Web. config</span><span class="sxs-lookup"><span data-stu-id="353c9-128">ControlRenderingCompatibilityVersion Setting in the Web.config File</span></span>

<span data-ttu-id="353c9-129">Los controles ASP.NET se han modificado en la versión 4 de .NET Framework para que pueda especificar de forma más precisa cómo representan el marcado.</span><span class="sxs-lookup"><span data-stu-id="353c9-129">ASP.NET controls have been modified in the .NET Framework version 4 in order to let you specify more precisely how they render markup.</span></span> <span data-ttu-id="353c9-130">En versiones anteriores del .NET Framework, algunos controles emitieron marcado que no se podía deshabilitar.</span><span class="sxs-lookup"><span data-stu-id="353c9-130">In previous versions of the .NET Framework, some controls emitted markup that you had no way to disable.</span></span> <span data-ttu-id="353c9-131">De forma predeterminada, ASP.NET 4 este tipo de marcado ya no se genera.</span><span class="sxs-lookup"><span data-stu-id="353c9-131">By default, ASP.NET 4 this type of markup is no longer generated.</span></span>

<span data-ttu-id="353c9-132">Si usa Visual Studio 2010 para actualizar la aplicación desde ASP.NET 2,0 o ASP.NET 3,5, la herramienta agrega automáticamente una configuración al archivo `Web.config` que conserva la representación heredada.</span><span class="sxs-lookup"><span data-stu-id="353c9-132">If you use Visual Studio 2010 to upgrade your application from ASP.NET 2.0 or ASP.NET 3.5, the tool automatically adds a setting to the `Web.config` file that preserves legacy rendering.</span></span> <span data-ttu-id="353c9-133">Sin embargo, si actualiza una aplicación cambiando el grupo de aplicaciones en IIS para elegir como destino .NET Framework 4, ASP.NET usa el nuevo modo de representación de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="353c9-133">However, if you upgrade an application by changing the application pool in IIS to target the .NET Framework 4, ASP.NET uses the new rendering mode by default.</span></span> <span data-ttu-id="353c9-134">Para deshabilitar el nuevo modo de representación, agregue la siguiente configuración en el archivo `Web.config`:</span><span class="sxs-lookup"><span data-stu-id="353c9-134">To disable the new rendering mode, add the following setting in the `Web.config` file:</span></span>

[!code-xml[Main](breaking-changes/samples/sample1.xml)]

<span data-ttu-id="353c9-135">Los cambios de representación principales que aporta el nuevo comportamiento son los siguientes:</span><span class="sxs-lookup"><span data-stu-id="353c9-135">The major rendering changes that the new behavior brings are as follows:</span></span>

- <span data-ttu-id="353c9-136">Los controles **Image** e **ImageButton** ya no representan un atributo `border="0"`.</span><span class="sxs-lookup"><span data-stu-id="353c9-136">The **Image** and **ImageButton** controls no longer render a `border="0"` attribute.</span></span>
- <span data-ttu-id="353c9-137">La clase **BaseValidator** y los controles de validación que derivan de ella ya no representan texto rojo de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="353c9-137">The **BaseValidator** class and validation controls that derive from it no longer render red text by default.</span></span>
- <span data-ttu-id="353c9-138">El control **HtmlForm** no representa un atributo de **nombre** .</span><span class="sxs-lookup"><span data-stu-id="353c9-138">The **HtmlForm** control does not render a **name** attribute.</span></span>
- <span data-ttu-id="353c9-139">El control de **tabla** ya no representa un atributo de `border="0"`.</span><span class="sxs-lookup"><span data-stu-id="353c9-139">The **Table** control no longer renders a `border="0"` attribute.</span></span>
- <span data-ttu-id="353c9-140">Los controles que no están diseñados para la entrada del usuario (por ejemplo, el control de **etiqueta** ) ya no representan el atributo `disabled="disabled"` si su propiedad **Enabled** está establecida en **false** (o si heredan esta configuración de un control contenedor).</span><span class="sxs-lookup"><span data-stu-id="353c9-140">Controls that are not designed for user input (for example, the **Label** control) no longer render the `disabled="disabled"` attribute if their **Enabled** property is set to **false** (or if they inherit this setting from a container control).</span></span>

<a id="0.1__Toc245724854"></a><a id="0.1__Toc255587631"></a><a id="0.1__Toc256770142"></a>

## <a name="clientidmode-changes"></a><span data-ttu-id="353c9-141">ClientIDMode cambios</span><span class="sxs-lookup"><span data-stu-id="353c9-141">ClientIDMode Changes</span></span>

<span data-ttu-id="353c9-142">El valor **ClientIDMode** de ASP.net 4 le permite especificar cómo ASP.net genera el atributo **ID** para los elementos HTML.</span><span class="sxs-lookup"><span data-stu-id="353c9-142">The **ClientIDMode** setting in ASP.NET 4 lets you specify how ASP.NET generates the **id** attribute for HTML elements.</span></span> <span data-ttu-id="353c9-143">En versiones anteriores de ASP.NET, el comportamiento predeterminado era equivalente al valor de **AutoID** de **ClientIDMode**.</span><span class="sxs-lookup"><span data-stu-id="353c9-143">In previous versions of ASP.NET, the default behavior was equivalent to the **AutoID** setting of **ClientIDMode**.</span></span> <span data-ttu-id="353c9-144">Sin embargo, el valor predeterminado es ahora **predecible**.</span><span class="sxs-lookup"><span data-stu-id="353c9-144">However, the default setting is now **Predictable**.</span></span>

<span data-ttu-id="353c9-145">Si usa Visual Studio 2010 para actualizar la aplicación desde ASP.NET 2,0 o ASP.NET 3,5, la herramienta agrega automáticamente una configuración al archivo `Web.config` que conserva el comportamiento de las versiones anteriores del .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="353c9-145">If you use Visual Studio 2010 to upgrade your application from ASP.NET 2.0 or ASP.NET 3.5, the tool automatically adds a setting to the `Web.config` file that preserves the behavior of earlier versions of the .NET Framework.</span></span> <span data-ttu-id="353c9-146">Sin embargo, si actualiza una aplicación cambiando el grupo de aplicaciones en IIS para elegir como destino .NET Framework 4, ASP.NET usará el nuevo modo de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="353c9-146">However, if you upgrade an application by changing the application pool in IIS to target the .NET Framework 4, ASP.NET uses the new mode by default.</span></span> <span data-ttu-id="353c9-147">Para deshabilitar el nuevo modo de identificador de cliente, agregue la siguiente configuración en el archivo `Web.config`:</span><span class="sxs-lookup"><span data-stu-id="353c9-147">To disable the new client ID mode, add the following setting in the `Web.config` file:</span></span>

[!code-xml[Main](breaking-changes/samples/sample2.xml)]

<a id="0.1__Toc245724855"></a><a id="0.1__Toc255587632"></a><a id="0.1__Toc256770143"></a>

## <a name="htmlencode-and-urlencode-now-encode-single-quotation-marks"></a><span data-ttu-id="353c9-148">HtmlEncode y UrlEncode ahora codifican comillas simples</span><span class="sxs-lookup"><span data-stu-id="353c9-148">HtmlEncode and UrlEncode Now Encode Single Quotation Marks</span></span>

<span data-ttu-id="353c9-149">En ASP.NET 4, los métodos **HtmlEncode** y **UrlEncode** de las clases **HttpUtility** y **HttpServerUtility** se han actualizado para codificar el carácter de comilla simple (') como se indica a continuación:</span><span class="sxs-lookup"><span data-stu-id="353c9-149">In ASP.NET 4, the **HtmlEncode** and **UrlEncode** methods of the **HttpUtility** and **HttpServerUtility** classes have been updated to encode the single quotation mark character (') as follows:</span></span>

- <span data-ttu-id="353c9-150">El método **HtmlEncode** codifica las instancias de la comilla simple como '.</span><span class="sxs-lookup"><span data-stu-id="353c9-150">The **HtmlEncode** method encodes instances of the single quotation mark as ' .</span></span>
- <span data-ttu-id="353c9-151">El método **UrlEncode** codifica las instancias de la comilla simple como %27.</span><span class="sxs-lookup"><span data-stu-id="353c9-151">The **UrlEncode** method encodes instances of the single quotation mark as %27.</span></span>

<a id="0.1__Toc255587633"></a><a id="0.1__Toc256770144"></a><a id="0.1__Toc245724856"></a>

## <a name="aspnet-page-aspx-parser-is-stricter"></a><span data-ttu-id="353c9-152">El analizador de páginas ASP.NET (. aspx) es más estricto</span><span class="sxs-lookup"><span data-stu-id="353c9-152">ASP.NET Page (.aspx) Parser is Stricter</span></span>

<span data-ttu-id="353c9-153">El analizador de páginas para páginas ASP.NET (archivos`.aspx`) y controles de usuario (archivos`.ascx`) es más estricto en ASP.NET 4 y rechazará más instancias de marcado no válido.</span><span class="sxs-lookup"><span data-stu-id="353c9-153">The page parser for ASP.NET pages (`.aspx` files) and user controls (`.ascx` files) is stricter in ASP.NET 4 and will reject more instances of invalid markup.</span></span> <span data-ttu-id="353c9-154">Por ejemplo, los dos fragmentos de código siguientes se analizarán correctamente en las versiones anteriores de ASP.NET, pero ahora generarán errores de analizador en ASP.NET 4.</span><span class="sxs-lookup"><span data-stu-id="353c9-154">For example, the following two snippets would successfully parse in earlier releases of ASP.NET, but will now raise parser errors in ASP.NET 4.</span></span>

[!code-aspx[Main](breaking-changes/samples/sample3.aspx)]

<span data-ttu-id="353c9-155">Observe el punto y coma no válido al final de la etiqueta **HiddenField** .</span><span class="sxs-lookup"><span data-stu-id="353c9-155">Notice the invalid semicolon at the end of the **HiddenField** tag.</span></span>

[!code-aspx[Main](breaking-changes/samples/sample4.aspx)]

<span data-ttu-id="353c9-156">Observe el atributo de **estilo** sin cerrar que se ejecuta en el atributo **CssClass** .</span><span class="sxs-lookup"><span data-stu-id="353c9-156">Notice the unclosed **style** attribute that runs into the **CssClass** attribute.</span></span>

<a id="0.1__Toc255587634"></a><a id="0.1__Toc256770145"></a>

## <a name="browser-definition-files-updated"></a><span data-ttu-id="353c9-157">Archivos de definición del explorador actualizados</span><span class="sxs-lookup"><span data-stu-id="353c9-157">Browser Definition Files Updated</span></span>

<span data-ttu-id="353c9-158">Los archivos de definición de explorador se han actualizado para que incluyan información sobre exploradores y dispositivos nuevos y actualizados.</span><span class="sxs-lookup"><span data-stu-id="353c9-158">The browser definition files have been updated to include information about new and updated browsers and devices.</span></span> <span data-ttu-id="353c9-159">Se han quitado exploradores y dispositivos anteriores, como Netscape Navigator, y se han agregado exploradores y dispositivos más recientes, como Google Chrome y Apple iPhone.</span><span class="sxs-lookup"><span data-stu-id="353c9-159">Older browsers and devices such as Netscape Navigator have been removed, and newer browsers and devices such as Google Chrome and Apple iPhone have been added.</span></span>

<span data-ttu-id="353c9-160">Si la aplicación contiene definiciones de explorador personalizadas que heredan de una de las definiciones de explorador que se han quitado, aparecerá un error.</span><span class="sxs-lookup"><span data-stu-id="353c9-160">If your application contains custom browser definitions that inherit from one of the browser definitions that have been removed, you will see an error.</span></span> <span data-ttu-id="353c9-161">Por ejemplo, si la carpeta `App_Browsers` contiene una definición de explorador que hereda de la definición del explorador IE2, recibirá el siguiente mensaje de error de configuración:</span><span class="sxs-lookup"><span data-stu-id="353c9-161">For example, if the `App_Browsers` folder contains a browser definition that inherits from the IE2 browser definition, you will receive the following configuration error message:</span></span>

- <span data-ttu-id="353c9-162">No se encuentra el elemento de puerta de enlace o el explorador con el identificador ' IE2 '.</span><span class="sxs-lookup"><span data-stu-id="353c9-162">The browser or gateway element with ID 'IE2' cannot be found.</span></span>

> [!NOTE]
> <span data-ttu-id="353c9-163">Los archivos de definiciones del explorador controlan el objeto **HttpBrowserCapabilities** (que se expone mediante la propiedad **request. Browser** de la página).</span><span class="sxs-lookup"><span data-stu-id="353c9-163">The **HttpBrowserCapabilities** object (which is exposed by the page's **Request.Browser** property) is driven by the browser definitions files.</span></span> <span data-ttu-id="353c9-164">Por lo tanto, la información devuelta por el acceso a una propiedad de este objeto en ASP.NET 4 podría ser diferente de la información devuelta en una versión anterior de ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="353c9-164">Therefore, the information returned by accessing a property of this object in ASP.NET 4 might be different than the information returned in an earlier version of ASP.NET.</span></span>

<span data-ttu-id="353c9-165">Puede revertir a los archivos de definición del explorador antiguos copiando los archivos de definición del explorador de la siguiente carpeta:</span><span class="sxs-lookup"><span data-stu-id="353c9-165">You can revert to the old browser definition files by copying the browser definition files from the following folder:</span></span>

[!code-console[Main](breaking-changes/samples/sample5.cmd)]

<span data-ttu-id="353c9-166">Copie los archivos en la carpeta de `\CONFIG\Browsers` correspondiente para ASP.NET 4.</span><span class="sxs-lookup"><span data-stu-id="353c9-166">Copy the files into the corresponding `\CONFIG\Browsers` folder for ASP.NET 4.</span></span> <span data-ttu-id="353c9-167">Después de copiar los archivos, ejecute la herramienta de línea de comandos ASPNET\_regbrowsers. exe.</span><span class="sxs-lookup"><span data-stu-id="353c9-167">After you copy the files, run the Aspnet\_regbrowsers.exe command-line tool.</span></span>

<a id="0.1__Toc255587635"></a><a id="0.1__Toc256770146"></a>

## <a name="systemwebmobiledll-removed-from-root-web-configuration-file"></a><span data-ttu-id="353c9-168">System. Web. Mobile. dll quitado del archivo de configuración Web raíz</span><span class="sxs-lookup"><span data-stu-id="353c9-168">System.Web.Mobile.dll Removed from Root Web Configuration File</span></span>

<span data-ttu-id="353c9-169">En versiones anteriores de ASP.NET, se incluyó una referencia al ensamblado System. Web. Mobile. dll en el archivo `Web.config` raíz de la sección de **ensamblados** en.</span><span class="sxs-lookup"><span data-stu-id="353c9-169">In previous versions of ASP.NET, a reference to the System.Web.Mobile.dll assembly was included in the root `Web.config` file in the **assemblies** section under.</span></span> <span data-ttu-id="353c9-170">Para mejorar el rendimiento, se quitó la referencia a este ensamblado.</span><span class="sxs-lookup"><span data-stu-id="353c9-170">In order to improve performance, the reference to this assembly was removed.</span></span>

<span data-ttu-id="353c9-171">El ensamblado System. Web. Mobile. dll se incluye en ASP.NET 4, pero está en desuso.</span><span class="sxs-lookup"><span data-stu-id="353c9-171">The System.Web.Mobile.dll assembly is included in ASP.NET 4, but it is deprecated.</span></span> <span data-ttu-id="353c9-172">Si desea usar tipos del ensamblado System. Web. Mobile. dll, agregue una referencia a este ensamblado en el archivo `Web.config` raíz o en un archivo de `Web.config` de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="353c9-172">If you want to use types from the System.Web.Mobile.dll assembly, add a reference to this assembly to either the root `Web.config` file or to an application `Web.config` file.</span></span> <span data-ttu-id="353c9-173">Por ejemplo, si desea utilizar cualquiera de los controles móviles de ASP.NET (en desuso), debe agregar una referencia al ensamblado System. Web. Mobile. dll en el archivo de `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="353c9-173">For example, if you want to use any of the (deprecated) ASP.NET mobile controls, you must add a reference to the System.Web.Mobile.dll assembly to the `Web.config` file.</span></span>

<a id="0.1__Toc245724857"></a><a id="0.1__Toc255587636"></a><a id="0.1__Toc256770147"></a>

## <a name="aspnet-request-validation"></a><span data-ttu-id="353c9-174">Validación de solicitud de ASP.NET</span><span class="sxs-lookup"><span data-stu-id="353c9-174">ASP.NET Request Validation</span></span>

<span data-ttu-id="353c9-175">La característica de validación de solicitudes de ASP.NET proporciona un cierto nivel de protección predeterminada contra ataques de scripting entre sitios (XSS).</span><span class="sxs-lookup"><span data-stu-id="353c9-175">The request validation feature in ASP.NET provides a certain level of default protection against cross-site scripting (XSS) attacks.</span></span> <span data-ttu-id="353c9-176">En versiones anteriores de ASP.NET, la validación de solicitudes estaba habilitada de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="353c9-176">In previous versions of ASP.NET, request validation was enabled by default.</span></span> <span data-ttu-id="353c9-177">Sin embargo, solo se aplica a las páginas ASP.NET (archivos de`.aspx` y sus archivos de clase) y solo cuando se ejecutan esas páginas.</span><span class="sxs-lookup"><span data-stu-id="353c9-177">However, it applied only to ASP.NET pages (`.aspx` files and their class files) and only when those pages were executing.</span></span>

<span data-ttu-id="353c9-178">En ASP.NET 4, de forma predeterminada, la validación de solicitudes está habilitada para todas las solicitudes, ya que está habilitada antes de la fase **BeginRequest** de una solicitud HTTP.</span><span class="sxs-lookup"><span data-stu-id="353c9-178">In ASP.NET 4, by default, request validation is enabled for all requests, because it is enabled before the **BeginRequest** phase of an HTTP request.</span></span> <span data-ttu-id="353c9-179">Como resultado, la validación de solicitudes se aplica a las solicitudes de todos los recursos de ASP.NET, no solo de las solicitudes de página. aspx.</span><span class="sxs-lookup"><span data-stu-id="353c9-179">As a result, request validation applies to requests for all ASP.NET resources, not just .aspx page requests.</span></span> <span data-ttu-id="353c9-180">Esto incluye solicitudes como llamadas a servicios web y controladores HTTP personalizados.</span><span class="sxs-lookup"><span data-stu-id="353c9-180">This includes requests such as Web service calls and custom HTTP handlers.</span></span> <span data-ttu-id="353c9-181">La validación de solicitudes también está activa cuando los módulos HTTP personalizados leen el contenido de una solicitud HTTP.</span><span class="sxs-lookup"><span data-stu-id="353c9-181">Request validation is also active when custom HTTP modules are reading the contents of an HTTP request.</span></span>

<span data-ttu-id="353c9-182">Como resultado, ahora se pueden producir errores de validación de solicitudes para las solicitudes que anteriormente no desencadenaron errores.</span><span class="sxs-lookup"><span data-stu-id="353c9-182">As a result, request validation errors might now occur for requests that previously did not trigger errors.</span></span> <span data-ttu-id="353c9-183">Para revertir al comportamiento de la característica de validación de solicitudes de ASP.NET 2,0, agregue la siguiente configuración en el archivo `Web.config`:</span><span class="sxs-lookup"><span data-stu-id="353c9-183">To revert to the behavior of the ASP.NET 2.0 request validation feature, add the following setting in the `Web.config` file:</span></span>

[!code-xml[Main](breaking-changes/samples/sample6.xml)]

<span data-ttu-id="353c9-184">Sin embargo, se recomienda que analice los errores de validación de solicitudes para determinar si los controladores existentes, los módulos u otro código personalizado tiene acceso a entradas HTTP potencialmente no seguras que podrían ser vectores de ataque de XSS.</span><span class="sxs-lookup"><span data-stu-id="353c9-184">However, we recommend that you analyze any request validation errors to determine whether existing handlers, modules, or other custom code accesses potentially unsafe HTTP inputs that could be XSS attack vectors.</span></span>

<a id="0.1__Toc245724858"></a><a id="0.1__Toc255587637"></a><a id="0.1__Toc256770148"></a>

## <a name="default-hashing-algorithm-is-now-hmacsha256"></a><span data-ttu-id="353c9-185">El algoritmo hash predeterminado es ahora HMACSHA256</span><span class="sxs-lookup"><span data-stu-id="353c9-185">Default Hashing Algorithm Is Now HMACSHA256</span></span>

<span data-ttu-id="353c9-186">ASP.NET usa cifrado y algoritmos hash para ayudar a proteger los datos, como las cookies de autenticación de formularios y el estado de vista.</span><span class="sxs-lookup"><span data-stu-id="353c9-186">ASP.NET uses both encryption and hashing algorithms to help secure data such as forms authentication cookies and view state.</span></span> <span data-ttu-id="353c9-187">De forma predeterminada, ASP.NET 4 ahora usa el algoritmo HMACSHA256 para las operaciones hash en las cookies y el estado de vista.</span><span class="sxs-lookup"><span data-stu-id="353c9-187">By default, ASP.NET 4 now uses the HMACSHA256 algorithm for hash operations on cookies and view state.</span></span> <span data-ttu-id="353c9-188">Las versiones anteriores de ASP.NET usaban el algoritmo HMACSHA1 anterior.</span><span class="sxs-lookup"><span data-stu-id="353c9-188">Earlier versions of ASP.NET used the older HMACSHA1 algorithm.</span></span>

<span data-ttu-id="353c9-189">Las aplicaciones pueden verse afectadas si se ejecutan entornos mixtos de ASP.NET 2.0/ASP. NET 4 en los que los datos, como las cookies de autenticación de formularios, deben funcionar con las versiones de .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="353c9-189">Your applications might be affected if you run mixed ASP.NET 2.0/ASP.NET 4 environments where data such as forms authentication cookies must work across.NET Framework versions.</span></span> <span data-ttu-id="353c9-190">Para configurar una aplicación Web de ASP.NET 4 para que use el algoritmo HMACSHA1 anterior, agregue la siguiente configuración en el archivo `Web.config`:</span><span class="sxs-lookup"><span data-stu-id="353c9-190">To configure an ASP.NET 4 Web application to use the older HMACSHA1 algorithm, add the following setting in the `Web.config` file:</span></span>

[!code-xml[Main](breaking-changes/samples/sample7.xml)]

<a id="0.1__Toc245724859"></a><a id="0.1__Toc255587638"></a><a id="0.1__Toc256770149"></a>

## <a name="configuration-errors-related-to-new-aspnet-4-root-configuration"></a><span data-ttu-id="353c9-191">Errores de configuración relacionados con la nueva configuración raíz de ASP.NET 4</span><span class="sxs-lookup"><span data-stu-id="353c9-191">Configuration Errors Related to New ASP.NET 4 Root Configuration</span></span>

<span data-ttu-id="353c9-192">Los archivos de configuración raíz (el archivo de `machine.config` y el archivo raíz `Web.config`) de la .NET Framework 4 (y, por tanto, ASP.NET 4) se han actualizado para incluir la mayor parte de la información de configuración reutilizable que en ASP.NET 3,5 se encontró en los archivos de `Web.config` de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="353c9-192">The root configuration files (the `machine.config` file and the root `Web.config` file) for the .NET Framework 4 (and therefore ASP.NET 4) have been updated to include most of the boilerplate configuration information that in ASP.NET 3.5 was found in the application `Web.config` files.</span></span> <span data-ttu-id="353c9-193">Debido a la complejidad de los sistemas de configuración de IIS 7 e IIS 7,5 administrados, la ejecución de aplicaciones de ASP.NET 3,5 en ASP.NET 4 y en IIS 7 e IIS 7,5 puede producir errores de configuración de ASP.NET o IIS.</span><span class="sxs-lookup"><span data-stu-id="353c9-193">Because of the complexity of the managed IIS 7 and IIS 7.5 configuration systems, running ASP.NET 3.5 applications under ASP.NET 4 and under IIS 7 and IIS 7.5 can result in either ASP.NET or IIS configuration errors.</span></span>

<span data-ttu-id="353c9-194">Se recomienda actualizar las aplicaciones de ASP.NET 3,5 a ASP.NET 4 mediante el uso de las herramientas de actualización de proyectos en Visual Studio 2010, si es práctico.</span><span class="sxs-lookup"><span data-stu-id="353c9-194">We recommend that you upgrade ASP.NET 3.5 applications to ASP.NET 4 by using the project upgrade tools in Visual Studio 2010, if practical.</span></span> <span data-ttu-id="353c9-195">Visual Studio 2010 modifica automáticamente el archivo `Web.config` de la aplicación ASP.NET 3,5 para que contenga la configuración adecuada para ASP.NET 4.</span><span class="sxs-lookup"><span data-stu-id="353c9-195">Visual Studio 2010 automatically modifies the ASP.NET 3.5 application's `Web.config` file to contain the appropriate settings for ASP.NET 4.</span></span>

<span data-ttu-id="353c9-196">Sin embargo, es un escenario admitido para ejecutar aplicaciones de ASP.NET 3,5 mediante el .NET Framework 4 sin volver a compilar.</span><span class="sxs-lookup"><span data-stu-id="353c9-196">However, it is a supported scenario to run ASP.NET 3.5 applications using the .NET Framework 4 without recompilation.</span></span> <span data-ttu-id="353c9-197">En ese caso, es posible que tenga que modificar manualmente el archivo de `Web.config` de la aplicación antes de ejecutar la aplicación en el .NET Framework 4 y en IIS 7 o IIS 7,5.</span><span class="sxs-lookup"><span data-stu-id="353c9-197">In that case, you might have to manually modify the application's `Web.config` file before you run the application under the .NET Framework 4 and under IIS 7 or IIS 7.5.</span></span>

<span data-ttu-id="353c9-198">En las dos secciones siguientes se describen los cambios que es posible que deba realizar para diferentes combinaciones de software.</span><span class="sxs-lookup"><span data-stu-id="353c9-198">The next two sections describe changes that you might need to make for different combinations of software.</span></span>

<span data-ttu-id="353c9-199">**Windows Vista SP1 o Windows Server 2008 SP1, donde no se instalan la revisión KB958854 ni el SP2.**</span><span class="sxs-lookup"><span data-stu-id="353c9-199">**Windows Vista SP1 or Windows Server 2008 SP1, where neither hotfix KB958854 nor SP2 are installed.**</span></span> <span data-ttu-id="353c9-200">En esta configuración, el sistema de configuración de IIS 7 combina incorrectamente la configuración administrada de una aplicación comparando el archivo de `Web.config` de nivel de aplicación con los archivos de ASP.NET 2,0 `machine.config`.</span><span class="sxs-lookup"><span data-stu-id="353c9-200">In this configuration, the IIS 7 configuration system incorrectly merges an application's managed configuration by comparing the application-level `Web.config` file to the ASP.NET 2.0 `machine.config` files.</span></span> <span data-ttu-id="353c9-201">Por este motivo, los archivos de `Web.config` de nivel de aplicación del .NET Framework 3,5 o posterior deben tener una definición de la sección de configuración **System. Web. Extensions** (el elemento) para que no se produzca un error de validación de IIS 7.</span><span class="sxs-lookup"><span data-stu-id="353c9-201">Because of this, application-level `Web.config` files from the .NET Framework 3.5 or later must have a **system.web.extensions** configuration section definition (the element) in order not to cause an IIS 7 validation failure.</span></span>

<span data-ttu-id="353c9-202">Sin embargo, las entradas de archivo `Web.config` de nivel de aplicación modificadas manualmente que no coincidan exactamente con las definiciones de la sección de configuración reutilizable original que se introdujeron con Visual Studio 2008 provocarán errores de configuración de ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="353c9-202">However, manually modified application-level `Web.config` file entries that do not precisely match the original boilerplate configuration section definitions that were introduced with Visual Studio 2008 will cause ASP.NET configuration errors.</span></span> <span data-ttu-id="353c9-203">(Las entradas de configuración predeterminadas generadas por Visual Studio 2008 funcionan correctamente). Un problema común es que los archivos de `Web.config` modificados de forma manual omiten los atributos de configuración **allowDefinition** y **requirePermission** que se encuentran en diversas definiciones de sección de configuración.</span><span class="sxs-lookup"><span data-stu-id="353c9-203">(The default configuration entries that are generated by Visual Studio 2008 work correctly.) A common problem is that manually modified `Web.config` files leave out the **allowDefinition** and **requirePermission** configuration attributes that are found on various configuration section definitions.</span></span> <span data-ttu-id="353c9-204">Esto provoca una falta de coincidencia entre la sección de configuración abreviada en los archivos de `Web.config` de nivel de aplicación y la definición completa en el archivo de `machine.config` ASP.NET 4.</span><span class="sxs-lookup"><span data-stu-id="353c9-204">This causes a mismatch between the abbreviated configuration section in application-level `Web.config` files and the complete definition in the ASP.NET 4 `machine.config` file.</span></span> <span data-ttu-id="353c9-205">Como resultado, en tiempo de ejecución, el sistema de configuración ASP.NET 4 produce un error de configuración.</span><span class="sxs-lookup"><span data-stu-id="353c9-205">As a result, at run time, the ASP.NET 4 configuration system throws a configuration error.</span></span>

<span data-ttu-id="353c9-206">**Windows Vista SP2, Windows Server 2008 SP2, Windows 7, Windows Server 2008 R2 y también Windows Vista SP1 y Windows Server 2008 SP1, donde está instalada la revisión KB958854.**</span><span class="sxs-lookup"><span data-stu-id="353c9-206">**Windows Vista SP2, Windows Server 2008 SP2, Windows 7, Windows Server 2008 R2, and also Windows Vista SP1 and Windows Server 2008 SP1 where hotfix KB958854 is installed.**</span></span>

<span data-ttu-id="353c9-207">En este escenario, el sistema de configuración nativa de IIS 7 e IIS 7,5 devuelve un error de configuración porque realiza una comparación de texto en el atributo de **tipo** definido para un controlador de sección de configuración administrada.</span><span class="sxs-lookup"><span data-stu-id="353c9-207">In this scenario, the IIS 7 and IIS 7.5 native configuration system returns a configuration error because it performs a text comparison on the **type** attribute that is defined for a managed configuration section handler.</span></span> <span data-ttu-id="353c9-208">Dado que todos los `Web.config` archivos generados por Visual Studio 2008 y Visual Studio 2008 SP1 tienen "3,5" en la cadena de tipo del sistema. controladores de la sección de configuración **Web. Extensions** (y relacionados), y dado que el archivo ASP.NET 4 `machine.config` tiene "4,0" en el atributo **Type** para los mismos controladores de sección de configuración, las aplicaciones que se generan en Visual Studio 2008 o Visual Studio 2008 SP1 siempre producen un error en la validación de configuración en iis 7 y IIS 7,5.</span><span class="sxs-lookup"><span data-stu-id="353c9-208">Because all `Web.config` files that are generated by Visual Studio 2008 and Visual Studio 2008 SP1 have "3.5" in the type string for the **system.web.extensions** (and related) configuration section handlers, and because the ASP.NET 4 `machine.config` file has "4.0" in the **type** attribute for the same configuration section handlers, applications that are generated in Visual Studio 2008 or Visual Studio 2008 SP1 always fail configuration validation in IIS 7 and IIS 7.5.</span></span>

<a id="0.1__Toc251910248"></a>

### <a name="resolving-these-issues"></a><span data-ttu-id="353c9-209">Resolver estos problemas</span><span class="sxs-lookup"><span data-stu-id="353c9-209">Resolving These Issues</span></span>

<span data-ttu-id="353c9-210">La solución alternativa para el primer escenario es actualizar el archivo de `Web.config` de nivel de aplicación incluyendo el texto de configuración reutilizable de un archivo `Web.config` generado automáticamente por Visual Studio 2008.</span><span class="sxs-lookup"><span data-stu-id="353c9-210">The workaround for the first scenario is to update the application-level `Web.config` file by including the boilerplate configuration text from a `Web.config` file that was generated automatically by Visual Studio 2008.</span></span>

<span data-ttu-id="353c9-211">Una solución alternativa para el primer escenario es instalar el Service Pack 2 para vista o Windows Server 2008 en el equipo, o bien instalar la revisión KB958854 ([https://support.microsoft.com/kb/958854](https://support.microsoft.com/kb/958854)) para corregir el comportamiento incorrecto de la combinación de configuración del sistema de configuración de IIS.</span><span class="sxs-lookup"><span data-stu-id="353c9-211">An alternative workaround for the first scenario is to install Service Pack 2 for Vista or Windows Server 2008 on your computer or to install hotfix KB958854 ([https://support.microsoft.com/kb/958854](https://support.microsoft.com/kb/958854)) to fix the incorrect configuration-merge behavior of the IIS configuration system.</span></span> <span data-ttu-id="353c9-212">Sin embargo, después de realizar cualquiera de estas acciones, es probable que la aplicación detecte un error de configuración debido al problema descrito en el segundo escenario.</span><span class="sxs-lookup"><span data-stu-id="353c9-212">However, after you perform either of these actions, your application will likely encounter a configuration error due to the issue described for the second scenario.</span></span>

<span data-ttu-id="353c9-213">La solución alternativa para el segundo escenario es eliminar o comentar todas las definiciones de la sección de configuración de **System. Web. Extensions** y las definiciones de grupos de secciones de configuración del archivo de `Web.config` en el nivel de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="353c9-213">The workaround for the second scenario is to delete or comment out all the **system.web.extensions** configuration section definitions and configuration section group definitions from the application-level `Web.config` file.</span></span> <span data-ttu-id="353c9-214">Estas definiciones suelen estar en la parte superior del archivo de `Web.config` de nivel de aplicación y se pueden identificar mediante el elemento **configSections** y sus elementos secundarios.</span><span class="sxs-lookup"><span data-stu-id="353c9-214">These definitions are usually at the top of the application-level `Web.config` file and can be identified by the **configSections** element and its children.</span></span>

<span data-ttu-id="353c9-215">En ambos escenarios, se recomienda que también elimine manualmente la sección **System. CodeDom** , aunque esto no es necesario.</span><span class="sxs-lookup"><span data-stu-id="353c9-215">For both scenarios, it is recommended that you also manually delete the **system.codedom** section, although this is not required.</span></span>

<a id="0.1__Toc252995490"></a><a id="0.1__Toc255587639"></a><a id="0.1__Toc256770150"></a><a id="0.1__Toc245724860"></a>

## <a name="aspnet-4-child-applications-fail-to-start-when-under-aspnet-20-or-aspnet-35-applications"></a><span data-ttu-id="353c9-216">ASP.NET 4 las aplicaciones secundarias no se inician cuando se están en aplicaciones ASP.NET 2,0 o ASP.NET 3,5</span><span class="sxs-lookup"><span data-stu-id="353c9-216">ASP.NET 4 Child Applications Fail to Start When Under ASP.NET 2.0 or ASP.NET 3.5 Applications</span></span>

<span data-ttu-id="353c9-217">Las aplicaciones de ASP.NET 4 configuradas como elementos secundarios de aplicaciones que ejecutan versiones anteriores de ASP.NET podrían no iniciarse debido a errores de configuración o de compilación.</span><span class="sxs-lookup"><span data-stu-id="353c9-217">ASP.NET 4 applications that are configured as children of applications that run earlier versions of ASP.NET might fail to start because of configuration or compilation errors.</span></span> <span data-ttu-id="353c9-218">En el ejemplo siguiente se muestra una estructura de directorios para una aplicación afectada.</span><span class="sxs-lookup"><span data-stu-id="353c9-218">The following example shows a directory structure for an affected application.</span></span>

<span data-ttu-id="353c9-219">`/parentwebapp` (configurado para usar ASP.NET 2,0 o ASP.NET 3,5)</span><span class="sxs-lookup"><span data-stu-id="353c9-219">`/parentwebapp` (configured to use ASP.NET 2.0 or ASP.NET 3.5)</span></span>  
<span data-ttu-id="353c9-220">`/childwebapp` (configurado para usar ASP.NET 4)</span><span class="sxs-lookup"><span data-stu-id="353c9-220">`/childwebapp` (configured to use ASP.NET 4)</span></span>

<span data-ttu-id="353c9-221">La aplicación en la carpeta `childwebapp` no se iniciará en IIS 7 o IIS 7,5 y notificará un error de configuración.</span><span class="sxs-lookup"><span data-stu-id="353c9-221">The application in the `childwebapp` folder will fail to start on IIS 7 or IIS 7.5 and will report a configuration error.</span></span> <span data-ttu-id="353c9-222">El texto de error incluirá un mensaje similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="353c9-222">The error text will include a message similar to the following:</span></span>

- `The requested page cannot be accessed because the related configuration data for the page is invalid.`

- `The configuration section 'configSections' cannot be read because it is missing a section declaration.`

<span data-ttu-id="353c9-223">En IIS 6, la aplicación de la carpeta `childwebapp` tampoco podrá iniciarse, pero notificará un error diferente.</span><span class="sxs-lookup"><span data-stu-id="353c9-223">On IIS 6, the application in the `childwebapp` folder will also fail to start, but it will report a different error.</span></span> <span data-ttu-id="353c9-224">Por ejemplo, el texto del error podría indicar lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="353c9-224">For example, the error text might state the following:</span></span>

- `The value for the 'compilerVersion' attribute in the provider options must be 'v4.0' or later if you are compiling for version 4.0 or later of the .NET Framework. To compile this Web application for version 3.5 or earlier of the .NET Framework, remove the 'targetFramework' attribute from the element of the Web.config file`

<span data-ttu-id="353c9-225">Estos escenarios se producen porque la información de configuración de la aplicación primaria en la carpeta `parentwebapp` forma parte de la jerarquía de información de configuración que determina los valores de configuración finales combinados que usa la aplicación web secundaria en la carpeta `childwebapp`.</span><span class="sxs-lookup"><span data-stu-id="353c9-225">These scenarios occur because the configuration information from the parent application in the `parentwebapp` folder is part of the hierarchy of configuration information that determines the final merged configuration settings that are used by the child web application in the `childwebapp` folder.</span></span> <span data-ttu-id="353c9-226">En función de si la aplicación Web ASP.NET 4 se está ejecutando en IIS 7 (o IIS 7,5) o en IIS 6, el sistema de configuración de IIS o el sistema de compilación ASP.NET 4 devolverán un error.</span><span class="sxs-lookup"><span data-stu-id="353c9-226">Depending on whether the ASP.NET 4 Web application is running on IIS 7 (or IIS 7.5) or on IIS 6, either the IIS configuration system or the ASP.NET 4 compilation system will return an error.</span></span>

<span data-ttu-id="353c9-227">Los pasos que debe seguir para resolver este problema y para que la aplicación secundaria de ASP.NET 4 funcione dependen de si la aplicación ASP.NET 4 se ejecuta en IIS 6 o en IIS 7 (o IIS 7,5).</span><span class="sxs-lookup"><span data-stu-id="353c9-227">The steps that you must follow to resolve this issue and to get the child ASP.NET 4 application to work depend on whether the ASP.NET 4 application runs on IIS 6 or on IIS 7 (or IIS 7.5).</span></span>

### <a name="step-1-iis-7-or-iis-75-only"></a><span data-ttu-id="353c9-228">Paso 1 (solo IIS 7 o IIS 7,5)</span><span class="sxs-lookup"><span data-stu-id="353c9-228">Step 1 (IIS 7 or IIS 7.5 only)</span></span>

<span data-ttu-id="353c9-229">Este paso solo es necesario en los sistemas operativos que ejecutan IIS 7 o IIS 7,5, que incluye Windows Vista, Windows Server 2008, Windows 7 y Windows Server 2008 R2.</span><span class="sxs-lookup"><span data-stu-id="353c9-229">This step is necessary only on operating systems that run IIS 7 or IIS 7.5, which includes Windows Vista, Windows Server 2008, Windows 7, and Windows Server 2008 R2.</span></span>

<span data-ttu-id="353c9-230">Mueva la definición de **configSections** en el archivo de `Web.config` de la aplicación primaria (la aplicación que ejecuta ASP.net 2,0 o ASP.net 3,5) en el archivo raíz `Web.config` para the.NET Framework 2,0.</span><span class="sxs-lookup"><span data-stu-id="353c9-230">Move the **configSections** definition in the `Web.config` file of the parent application (the application that runs ASP.NET 2.0 or ASP.NET 3.5) into the root `Web.config` file for the.NET Framework 2.0.</span></span> <span data-ttu-id="353c9-231">El sistema de configuración nativa de IIS 7 e IIS 7,5 examina el elemento **configSections** cuando combina la jerarquía de archivos de configuración.</span><span class="sxs-lookup"><span data-stu-id="353c9-231">The IIS 7 and IIS 7.5 native configuration system scans the **configSections** element when it merges the hierarchy of configuration files.</span></span> <span data-ttu-id="353c9-232">Mover la definición de **configSections** desde el archivo de `Web.config` de la aplicación web primaria al archivo raíz `Web.config` oculta de forma eficaz el elemento del proceso de combinación de configuración que se produce para la aplicación secundaria ASP.net 4.</span><span class="sxs-lookup"><span data-stu-id="353c9-232">Moving the **configSections** definition from the parent Web application's `Web.config` file to the root `Web.config` file effectively hides the element from the configuration merge process that occurs for the child ASP.NET 4 application.</span></span>

<span data-ttu-id="353c9-233">En un sistema operativo de 32 bits o en los grupos de aplicaciones de 32 bits, el archivo de `Web.config` raíz para ASP.NET 2,0 y ASP.NET 3,5 se encuentra normalmente en la carpeta siguiente:</span><span class="sxs-lookup"><span data-stu-id="353c9-233">On a 32-bit operating system or for 32-bit application pools, the root `Web.config` file for ASP.NET 2.0 and ASP.NET 3.5 is normally located in the following folder:</span></span>

`C:\Windows\Microsoft.NET\Framework\v2.0.50727\CONFIG`

<span data-ttu-id="353c9-234">En un sistema operativo de 64 bits o en los grupos de aplicaciones de 64 bits, el archivo de `Web.config` raíz para ASP.NET 2,0 y ASP.NET 3,5 se encuentra normalmente en la carpeta siguiente:</span><span class="sxs-lookup"><span data-stu-id="353c9-234">On a 64-bit operating system or for 64-bit application pools, the root `Web.config` file for ASP.NET 2.0 and ASP.NET 3.5 is normally located in the following folder:</span></span>

`C:\Windows\Microsoft.NET\Framework64\v2.0.50727\CONFIG`

<span data-ttu-id="353c9-235">Si ejecuta aplicaciones Web de 32 y 64 bits en un equipo de 64 bits, debe trasladar el elemento **configSections** hacia arriba en los archivos de `Web.config` raíz para los sistemas de 32 y de 64 bits.</span><span class="sxs-lookup"><span data-stu-id="353c9-235">If you run both 32-bit and 64-bit Web applications on a 64-bit computer, you must move the **configSections** element up into root `Web.config` files for both the 32-bit and the 64-bit systems.</span></span>

<span data-ttu-id="353c9-236">Al colocar el elemento **configSections** en el archivo `Web.config` raíz, pegue la sección inmediatamente después del elemento de **configuración** .</span><span class="sxs-lookup"><span data-stu-id="353c9-236">When you put the **configSections** element in the root `Web.config` file, paste the section immediately after the **configuration** element.</span></span> <span data-ttu-id="353c9-237">En el ejemplo siguiente se muestra el aspecto de la parte superior del archivo `Web.config` raíz cuando ha terminado de mover los elementos.</span><span class="sxs-lookup"><span data-stu-id="353c9-237">The following example shows what the top portion of the root `Web.config` file should look like when you have finished moving the elements.</span></span>

> [!NOTE]
> <span data-ttu-id="353c9-238">En el ejemplo siguiente, las líneas se han ajustado para mejorar la legibilidad.</span><span class="sxs-lookup"><span data-stu-id="353c9-238">In the following example, lines have been wrapped for readability.</span></span>

[!code-xml[Main](breaking-changes/samples/sample8.xml)]

### <a name="step-2-all-versions-of-iis"></a><span data-ttu-id="353c9-239">Paso 2 (todas las versiones de IIS)</span><span class="sxs-lookup"><span data-stu-id="353c9-239">Step 2 (all versions of IIS)</span></span>

<span data-ttu-id="353c9-240">Este paso es necesario si la aplicación web secundaria ASP.NET 4 se está ejecutando en IIS 6 o en IIS 7 (o IIS 7,5).</span><span class="sxs-lookup"><span data-stu-id="353c9-240">This step is required whether the ASP.NET 4 child Web application is running on IIS 6 or on IIS 7 (or IIS 7.5).</span></span>

<span data-ttu-id="353c9-241">En el archivo de `Web.config` de la aplicación web primaria que ejecuta ASP.NET 2 o ASP.NET 3,5, agregue una etiqueta de **Ubicación** que especifique explícitamente (para los sistemas de configuración de IIS y ASP.net) que las entradas de configuración solo se aplican a la aplicación web primaria.</span><span class="sxs-lookup"><span data-stu-id="353c9-241">In the `Web.config` file of the parent Web application that is running ASP.NET 2 or ASP.NET 3.5, add a **location** tag that explicitly specifies (for both the IIS and ASP.NET configuration systems) that the configuration entries only apply to the parent Web application.</span></span> <span data-ttu-id="353c9-242">En el ejemplo siguiente se muestra la sintaxis del elemento **Location** que se va a agregar:</span><span class="sxs-lookup"><span data-stu-id="353c9-242">The following example shows the syntax of the **location** element to add:</span></span>

[!code-xml[Main](breaking-changes/samples/sample9.xml)]

<span data-ttu-id="353c9-243">En el ejemplo siguiente se muestra cómo se usa la etiqueta **Location** para incluir todas las secciones de configuración comenzando por la sección **appSettings** y finalizando con la sección **System. WebServer** .</span><span class="sxs-lookup"><span data-stu-id="353c9-243">The following example shows how the **location** tag is used to wrap all configuration sections starting with the **appSettings** section and ending with **system.webServer** section.</span></span>

[!code-xml[Main](breaking-changes/samples/sample10.xml)]

<span data-ttu-id="353c9-244">Cuando haya completado los pasos 1 y 2, las aplicaciones web secundarias de ASP.NET 4 se iniciarán sin errores.</span><span class="sxs-lookup"><span data-stu-id="353c9-244">When you have completed steps 1 and 2, child ASP.NET 4 Web applications will start without errors.</span></span>

<a id="0.1__Toc252995491"></a><a id="0.1__Toc255587640"></a><a id="0.1__Toc256770151"></a>

## <a name="aspnet-4-web-sites-fail-to-start-on-computers-where-sharepoint-is-installed"></a><span data-ttu-id="353c9-245">ASP.NET 4 los sitios web no se inician en los equipos en los que SharePoint está instalado</span><span class="sxs-lookup"><span data-stu-id="353c9-245">ASP.NET 4 Web Sites Fail to Start on Computers Where SharePoint Is Installed</span></span>

<span data-ttu-id="353c9-246">Los servidores web que ejecutan SharePoint tienen un archivo `Web.config` que se implementa en la raíz de un sitio web de SharePoint (por ejemplo, `c:\inetpub\wwwroot\web.config` para sitio web predeterminado).</span><span class="sxs-lookup"><span data-stu-id="353c9-246">Web servers that run SharePoint have a `Web.config` file that is deployed at the root of a SharePoint Web site (for example, `c:\inetpub\wwwroot\web.config` for Default Web Site).</span></span> <span data-ttu-id="353c9-247">En este archivo de `Web.config`, SharePoint establece un nivel de confianza parcial personalizado denominado WSS\_mínima.</span><span class="sxs-lookup"><span data-stu-id="353c9-247">In this `Web.config` file, SharePoint sets a custom partial-trust level named WSS\_Minimal.</span></span>

<span data-ttu-id="353c9-248">Si intenta ejecutar un sitio web de ASP.NET 4 que está implementado como un elemento secundario de este tipo de sitio web de SharePoint, verá el siguiente error:</span><span class="sxs-lookup"><span data-stu-id="353c9-248">If you try to run an ASP.NET 4 Web site that is deployed as a child of this type of SharePoint Web site, you will see the following error:</span></span>

`Could not find permission set named 'ASP.NET'.`

<span data-ttu-id="353c9-249">Este error se produce porque la infraestructura de seguridad de acceso del código (CAS) de ASP.NET 4 busca un conjunto de permisos denominado ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="353c9-249">This error occurs because the ASP.NET 4 code access security (CAS) infrastructure looks for a permission set named ASP.NET.</span></span> <span data-ttu-id="353c9-250">Sin embargo, el archivo de configuración de confianza parcial al que hace referencia WSS\_mínimo no contiene ningún conjunto de permisos con ese nombre.</span><span class="sxs-lookup"><span data-stu-id="353c9-250">However, the partial trust configuration file that is referenced by WSS\_Minimal does not contain any permission sets with that name.</span></span>

<span data-ttu-id="353c9-251">Actualmente no hay disponible una versión de SharePoint que sea compatible con ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="353c9-251">Currently there is not a version of SharePoint available that is compatible with ASP.NET.</span></span> <span data-ttu-id="353c9-252">Como resultado, no debe intentar ejecutar un sitio web de ASP.NET 4 como sitio secundario bajo sitios web de SharePoint.</span><span class="sxs-lookup"><span data-stu-id="353c9-252">As a result, you should not attempt to run an ASP.NET 4 Web site as a child site underneath SharePoint Web sites.</span></span>

<a id="0.1__Toc255587641"></a><a id="0.1__Toc256770152"></a>

## <a name="the-httprequestfilepath-property-no-longer-includes-pathinfo-values"></a><span data-ttu-id="353c9-253">La propiedad HttpRequest. FilePath ya no incluye los valores de PathInfo</span><span class="sxs-lookup"><span data-stu-id="353c9-253">The HttpRequest.FilePath Property No Longer Includes PathInfo Values</span></span>

<span data-ttu-id="353c9-254">En las versiones anteriores de ASP.NET se incluía un valor de **PathInfo** en el valor devuelto desde varias propiedades relacionadas con la ruta de acceso de archivo, incluidas **HttpRequest. FilePath**, **HttpRequest. AppRelativeCurrentExecutionFilePath**y **HttpRequest. CurrentExecutionFilePath**.</span><span class="sxs-lookup"><span data-stu-id="353c9-254">Previous versions of ASP.NET included a **PathInfo** value in the value returned from various file path-related properties, including **HttpRequest.FilePath**, **HttpRequest.AppRelativeCurrentExecutionFilePath**, and **HttpRequest.CurrentExecutionFilePath**.</span></span> <span data-ttu-id="353c9-255">ASP.NET 4 ya no incluye el valor de **PathInfo** en los valores devueltos de estas propiedades.</span><span class="sxs-lookup"><span data-stu-id="353c9-255">ASP.NET 4 no longer includes the **PathInfo** value in the return values from these properties.</span></span> <span data-ttu-id="353c9-256">En su lugar, la información de **PathInfo** está disponible en **HttpRequest. PathInfo**.</span><span class="sxs-lookup"><span data-stu-id="353c9-256">Instead, the **PathInfo** information is available in **HttpRequest.PathInfo**.</span></span> <span data-ttu-id="353c9-257">Por ejemplo, veamos el siguiente fragmento de dirección URL:</span><span class="sxs-lookup"><span data-stu-id="353c9-257">For example, imagine the following URL fragment:</span></span>

`/testapp/Action.mvc/SomeAction`

<span data-ttu-id="353c9-258">En versiones anteriores de ASP.NET, las propiedades **HttpRequest** tienen los siguientes valores:</span><span class="sxs-lookup"><span data-stu-id="353c9-258">In earlier versions of ASP.NET, **HttpRequest** properties have the following values:</span></span>

<span data-ttu-id="353c9-259">**HttpRequest. FilePath**: `/testapp/Action.mvc/SomeAction`</span><span class="sxs-lookup"><span data-stu-id="353c9-259">**HttpRequest.FilePath**: `/testapp/Action.mvc/SomeAction`</span></span>

<span data-ttu-id="353c9-260">**HttpRequest. PathInfo**: (vacío)</span><span class="sxs-lookup"><span data-stu-id="353c9-260">**HttpRequest.PathInfo**: (empty)</span></span>

<span data-ttu-id="353c9-261">En ASP.NET 4, en su lugar, las propiedades **HttpRequest** tienen los valores siguientes:</span><span class="sxs-lookup"><span data-stu-id="353c9-261">In ASP.NET 4, **HttpRequest** properties instead have the following values:</span></span>

<span data-ttu-id="353c9-262">**HttpRequest. FilePath**: `/testapp/Action.mvc`</span><span class="sxs-lookup"><span data-stu-id="353c9-262">**HttpRequest.FilePath**: `/testapp/Action.mvc`</span></span>

<span data-ttu-id="353c9-263">**HttpRequest. PathInfo**: `SomeAction`</span><span class="sxs-lookup"><span data-stu-id="353c9-263">**HttpRequest.PathInfo**: `SomeAction`</span></span>

<a id="0.1__Toc252995493"></a><a id="0.1__Toc255587642"></a><a id="0.1__Toc256770153"></a><a id="0.1__Toc245724861"></a>

## <a name="aspnet-20-applications-might-generate-httpexception-errors-that-reference-eurlaxd"></a><span data-ttu-id="353c9-264">Las aplicaciones de ASP.NET 2,0 pueden generar errores de HttpException que hacen referencia a EURL. axd</span><span class="sxs-lookup"><span data-stu-id="353c9-264">ASP.NET 2.0 Applications Might Generate HttpException Errors that Reference eurl.axd</span></span>

<span data-ttu-id="353c9-265">Una vez que se ha habilitado ASP.NET 4 en IIS 6, las aplicaciones de ASP.NET 2.0 que se ejecutan en IIS 6 (en Windows Server 2003 o Windows Server 2003 R2) podrían generar errores como el siguiente:</span><span class="sxs-lookup"><span data-stu-id="353c9-265">After ASP.NET 4 has been enabled on IIS 6, ASP.NET 2.0 applications that run on IIS 6 (in either Windows Server 2003 or Windows Server 2003 R2) might generate errors such as the following:</span></span>

`System.Web.HttpException: Path '/[yourApplicationRoot]/eurl.axd/[Value]' was not found.`

<span data-ttu-id="353c9-266">Este error se produce porque, cuando ASP.NET detecta que un sitio web está configurado para usar ASP.NET 4, un componente nativo de ASP.NET 4 pasa una dirección URL sin extensión a la parte administrada de ASP.NET para su posterior procesamiento.</span><span class="sxs-lookup"><span data-stu-id="353c9-266">This error occurs because when ASP.NET detects that a Web site is configured to use ASP.NET 4, a native component of ASP.NET 4 passes an extensionless URL to the managed portion of ASP.NET for further processing.</span></span> <span data-ttu-id="353c9-267">Sin embargo, si los directorios virtuales que se encuentran debajo de un sitio web de ASP.NET 4 están configurados para usar ASP.NET 2,0, el procesamiento de la dirección URL sin extensión de esta manera da como resultado una dirección URL modificada que contiene la cadena "EURL. axd".</span><span class="sxs-lookup"><span data-stu-id="353c9-267">However, if virtual directories that are below an ASP.NET 4 Web site are configured to use ASP.NET 2.0, processing the extensionless URL in this way results in a modified URL that contains the string "eurl.axd".</span></span> <span data-ttu-id="353c9-268">Esta dirección URL modificada se envía a la aplicación ASP.NET 2,0.</span><span class="sxs-lookup"><span data-stu-id="353c9-268">This modified URL is then sent to the ASP.NET 2.0 application.</span></span> <span data-ttu-id="353c9-269">ASP.NET 2,0 no reconoce el formato "EURL. axd".</span><span class="sxs-lookup"><span data-stu-id="353c9-269">ASP.NET 2.0 cannot recognize the "eurl.axd" format.</span></span> <span data-ttu-id="353c9-270">Por lo tanto, ASP.NET 2,0 intenta encontrar un archivo llamado `eurl.axd` y ejecutarlo.</span><span class="sxs-lookup"><span data-stu-id="353c9-270">Therefore, ASP.NET 2.0 tries to find a file named `eurl.axd` and execute it.</span></span> <span data-ttu-id="353c9-271">Dado que no existe este archivo, se produce un error en la solicitud con una excepción **HttpException** .</span><span class="sxs-lookup"><span data-stu-id="353c9-271">Because no such file exists, the request fails with an **HttpException** exception.</span></span>

<span data-ttu-id="353c9-272">Puede solucionar este problema mediante una de las siguientes opciones.</span><span class="sxs-lookup"><span data-stu-id="353c9-272">You can work around this issue using one of the following options.</span></span>

### <a name="option-1"></a><span data-ttu-id="353c9-273">Opción 1</span><span class="sxs-lookup"><span data-stu-id="353c9-273">Option 1</span></span>

<span data-ttu-id="353c9-274">Si ASP.NET 4 no es necesario para ejecutar el sitio web, vuelva a asignar el sitio para usar ASP.NET 2,0 en su lugar.</span><span class="sxs-lookup"><span data-stu-id="353c9-274">If ASP.NET 4 is not required in order to run the Web site, remap the site to use ASP.NET 2.0 instead.</span></span>

### <a name="option-2"></a><span data-ttu-id="353c9-275">Opción 2</span><span class="sxs-lookup"><span data-stu-id="353c9-275">Option 2</span></span>

<span data-ttu-id="353c9-276">Si se requiere ASP.NET 4 para ejecutar el sitio web, mueva los directorios virtuales ASP.NET 2,0 secundarios a otro sitio web que esté asignado a ASP.NET 2,0.</span><span class="sxs-lookup"><span data-stu-id="353c9-276">If ASP.NET 4 is required in order to run the Web site, move any child ASP.NET 2.0 virtual directories to a different Web site that is mapped to ASP.NET 2.0.</span></span>

### <a name="option-3"></a><span data-ttu-id="353c9-277">Opción 3</span><span class="sxs-lookup"><span data-stu-id="353c9-277">Option 3</span></span>

<span data-ttu-id="353c9-278">Si no es práctico reasignar el sitio web a ASP.NET 2,0 o cambiar la ubicación de un directorio virtual, deshabilite explícitamente el procesamiento de direcciones URL sin extensión en ASP.NET 4.</span><span class="sxs-lookup"><span data-stu-id="353c9-278">If it is not practical to remap the Web site to ASP.NET 2.0 or to change the location of a virtual directory, explicitly disable extensionless URL processing in ASP.NET 4.</span></span> <span data-ttu-id="353c9-279">Utilice el siguiente procedimiento:</span><span class="sxs-lookup"><span data-stu-id="353c9-279">Use the following procedure:</span></span>

1. <span data-ttu-id="353c9-280">En el registro de Windows, abra el siguiente nodo:</span><span class="sxs-lookup"><span data-stu-id="353c9-280">In the Windows registry, open the following node:</span></span>

`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\ASP.NET\4.0.30319.0`

1. <span data-ttu-id="353c9-281">Cree un nuevo valor **DWORD** denominado **EnableExtensionlessUrls**.</span><span class="sxs-lookup"><span data-stu-id="353c9-281">Create a new **DWORD** value named **EnableExtensionlessUrls**.</span></span>
2. <span data-ttu-id="353c9-282">Establezca **EnableExtensionlessUrls** en 0.</span><span class="sxs-lookup"><span data-stu-id="353c9-282">Set **EnableExtensionlessUrls** to 0.</span></span> <span data-ttu-id="353c9-283">Esto deshabilita el comportamiento de la dirección URL sin extensión.</span><span class="sxs-lookup"><span data-stu-id="353c9-283">This disables extensionless URL behavior.</span></span>
3. <span data-ttu-id="353c9-284">Guarde el valor del registro y cierre el editor del registro.</span><span class="sxs-lookup"><span data-stu-id="353c9-284">Save the registry value and close the registry editor.</span></span>
4. <span data-ttu-id="353c9-285">Ejecute la herramienta de línea de comandos **iisreset** , que hace que IIS Lea el nuevo valor del registro.</span><span class="sxs-lookup"><span data-stu-id="353c9-285">Run the **iisreset** command-line tool, which causes IIS to read the new registry value.</span></span>

> [!NOTE]
> <span data-ttu-id="353c9-286">Al establecer **EnableExtensionlessUrls** en 1, se habilita el comportamiento de la dirección URL sin extensión.</span><span class="sxs-lookup"><span data-stu-id="353c9-286">Setting **EnableExtensionlessUrls** to 1 enables extensionless URL behavior.</span></span> <span data-ttu-id="353c9-287">Esta es la configuración predeterminada si no se especifica ningún valor.</span><span class="sxs-lookup"><span data-stu-id="353c9-287">This is the default setting if no value is specified.</span></span>

<a id="0.1__Toc252995494"></a><a id="0.1__Toc255587643"></a><a id="0.1__Toc256770154"></a><a id="0.1__Toc245724862"></a>

## <a name="event-handlers-might-not-be-not-raised-in-a-default-document-in-iis-7-or-iis-75-integrated-mode"></a><span data-ttu-id="353c9-288">Es posible que los controladores de eventos no se generen en un documento predeterminado en el modo integrado de IIS 7 o IIS 7,5</span><span class="sxs-lookup"><span data-stu-id="353c9-288">Event Handlers Might Not Be Not Raised in a Default Document in IIS 7 or IIS 7.5 Integrated Mode</span></span>

<span data-ttu-id="353c9-289">ASP.NET 4 incluye modificaciones que cambian cómo se representa el atributo de **acción** del elemento de **formulario** HTML cuando una dirección URL sin extensión se resuelve como un documento predeterminado.</span><span class="sxs-lookup"><span data-stu-id="353c9-289">ASP.NET 4 includes modifications that change how the **action** attribute of the HTML **form** element is rendered when an extensionless URL resolves to a default document.</span></span> <span data-ttu-id="353c9-290">Un ejemplo de una dirección URL sin extensión que se resuelve en un documento predeterminado sería [http://contoso.com/](http://contoso.com/), lo que da lugar a una solicitud a [http://contoso.com/Default.aspx](http://contoso.com/Default.aspx).</span><span class="sxs-lookup"><span data-stu-id="353c9-290">An example of an extensionless URL resolving to a default document would be [http://contoso.com/](http://contoso.com/), resulting in a request to [http://contoso.com/Default.aspx](http://contoso.com/Default.aspx).</span></span>

<span data-ttu-id="353c9-291">ASP.NET 4 ahora representa el valor del atributo de **acción** del elemento de **formulario** HTML como una cadena vacía cuando se realiza una solicitud a una dirección URL sin extensión que tiene un documento predeterminado asignado.</span><span class="sxs-lookup"><span data-stu-id="353c9-291">ASP.NET 4 now renders the HTML **form** element's **action** attribute value as an empty string when a request is made to an extensionless URL that has a default document mapped to it.</span></span> <span data-ttu-id="353c9-292">Por ejemplo, en versiones anteriores de ASP.NET, una solicitud a [http://contoso.com](http://contoso.com) daría como resultado una solicitud a `Default.aspx`.</span><span class="sxs-lookup"><span data-stu-id="353c9-292">For example, in earlier releases of ASP.NET, a request to [http://contoso.com](http://contoso.com) would result in a request to `Default.aspx`.</span></span> <span data-ttu-id="353c9-293">En ese documento, la etiqueta de apertura del **formulario** se representaría como en el ejemplo siguiente:</span><span class="sxs-lookup"><span data-stu-id="353c9-293">In that document, the opening **form** tag would be rendered as in the following example:</span></span>

`<form action="Default.aspx" />`

<span data-ttu-id="353c9-294">En ASP.NET 4, una solicitud a [http://contoso.com](http://contoso.com) también produce una solicitud a `Default.aspx`.</span><span class="sxs-lookup"><span data-stu-id="353c9-294">In ASP.NET 4, a request to [http://contoso.com](http://contoso.com) also results in a request to `Default.aspx`.</span></span> <span data-ttu-id="353c9-295">Sin embargo, ASP.NET ahora representa la etiqueta HTML de apertura del **formulario** como en el ejemplo siguiente:</span><span class="sxs-lookup"><span data-stu-id="353c9-295">However, ASP.NET now renders the HTML opening **form** tag as in the following example:</span></span>

`<form action="" />`

<span data-ttu-id="353c9-296">Esta diferencia en la forma en que se representa el atributo de **acción** puede provocar cambios sutiles en el modo en que IIS y ASP.net procesan una publicación de formulario.</span><span class="sxs-lookup"><span data-stu-id="353c9-296">This difference in how the **action** attribute is rendered can cause subtle changes in how a form post is processed by IIS and ASP.NET.</span></span> <span data-ttu-id="353c9-297">Cuando el atributo **Action** es una cadena vacía, el objeto **DefaultDocumentModule** de IIS creará una solicitud secundaria para `Default.aspx`.</span><span class="sxs-lookup"><span data-stu-id="353c9-297">When the **action** attribute is an empty string, the IIS **DefaultDocumentModule** object will create a child request to `Default.aspx`.</span></span> <span data-ttu-id="353c9-298">En la mayoría de las condiciones, esta solicitud secundaria es transparente para el código de aplicación y la página `Default.aspx` se ejecuta con normalidad.</span><span class="sxs-lookup"><span data-stu-id="353c9-298">Under most conditions, this child request is transparent to application code, and the `Default.aspx` page runs normally.</span></span>

<span data-ttu-id="353c9-299">A pesar de ello, una interacción potencial entre el código administrado y el modo integrado de IIS 7 o IIS 7.5 puede hacer que las páginas .aspx administradas dejen de funcionar correctamente durante la solicitud secundaria.</span><span class="sxs-lookup"><span data-stu-id="353c9-299">However, a potential interaction between managed code and IIS 7 or IIS 7.5 Integrated mode can cause managed .aspx pages to stop working properly during the child request.</span></span> <span data-ttu-id="353c9-300">Si se producen las condiciones siguientes, la solicitud secundaria a un documento de `Default.aspx` producirá un error o un comportamiento inesperado:</span><span class="sxs-lookup"><span data-stu-id="353c9-300">If the following conditions occur, the child request to a `Default.aspx` document will result in an error or in unexpected behavior:</span></span>

1. <span data-ttu-id="353c9-301">Se envía una página. aspx al explorador con el atributo de **acción** del elemento de **formulario** establecido en "".</span><span class="sxs-lookup"><span data-stu-id="353c9-301">An .aspx page is sent to the browser with the **form** element's **action** attribute set to "".</span></span>
2. <span data-ttu-id="353c9-302">El formulario se devuelve a ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="353c9-302">The form is posted back to ASP.NET.</span></span>
3. <span data-ttu-id="353c9-303">Un módulo HTTP administrado Lee parte del cuerpo de la entidad.</span><span class="sxs-lookup"><span data-stu-id="353c9-303">A managed HTTP module reads some part of the entity body.</span></span> <span data-ttu-id="353c9-304">Por ejemplo, un módulo Lee **request. Form** o **request. params**.</span><span class="sxs-lookup"><span data-stu-id="353c9-304">For example, a module reads **Request.Form** or **Request.Params**.</span></span> <span data-ttu-id="353c9-305">Esto hace que el cuerpo de la entidad de la solicitud POST se lea en la memoria administrada.</span><span class="sxs-lookup"><span data-stu-id="353c9-305">This causes the entity body of the POST request to be read into managed memory.</span></span> <span data-ttu-id="353c9-306">Como resultado, el cuerpo de la entidad ya no está disponible para los módulos de código nativo que se ejecutan en el modo integrado de IIS 7 o IIS 7.5.</span><span class="sxs-lookup"><span data-stu-id="353c9-306">As a result, the entity body is no longer available to any native code modules that are running in IIS 7 or IIS 7.5 Integrated mode.</span></span>
4. <span data-ttu-id="353c9-307">El objeto **DefaultDocumentModule** de IIS se ejecuta finalmente y crea una solicitud secundaria al documento `Default.aspx`.</span><span class="sxs-lookup"><span data-stu-id="353c9-307">The IIS **DefaultDocumentModule** object eventually runs and creates a child request to the `Default.aspx` document.</span></span> <span data-ttu-id="353c9-308">Sin embargo, dado que un fragmento del código administrado ya ha leído el cuerpo de la entidad, no hay ningún cuerpo de entidad disponible para enviarlo a la solicitud secundaria.</span><span class="sxs-lookup"><span data-stu-id="353c9-308">However, because the entity body has already been read by a piece of managed code, there is no entity body available to send to the child request.</span></span>
5. <span data-ttu-id="353c9-309">Cuando se ejecuta la canalización HTTP para la solicitud secundaria, el controlador de `.aspx` archivos se ejecuta durante la fase de ejecución del controlador.</span><span class="sxs-lookup"><span data-stu-id="353c9-309">When the HTTP pipeline runs for the child request, the handler for `.aspx` files runs during the handler-execute phase.</span></span>
6. <span data-ttu-id="353c9-310">Dado que no hay ningún cuerpo de entidad, no hay ninguna variable de formulario y ningún estado de vista, por lo que no hay información disponible para que el controlador de páginas. aspx determine qué evento (si existe) se supone que se va a producir.</span><span class="sxs-lookup"><span data-stu-id="353c9-310">Because there is no entity body, there are no form variables and no view state, and therefore no information is available for the .aspx page handler to determine what event (if any) is supposed to be raised.</span></span> <span data-ttu-id="353c9-311">Como resultado, no se ejecuta ninguno de los controladores de eventos postback para la página .aspx afectada.</span><span class="sxs-lookup"><span data-stu-id="353c9-311">As a result, none of the postback event handlers for the affected .aspx page run.</span></span>

<span data-ttu-id="353c9-312">Puede solucionar este comportamiento de las siguientes maneras:</span><span class="sxs-lookup"><span data-stu-id="353c9-312">You can work around this behavior in the following ways:</span></span>

- <span data-ttu-id="353c9-313">Identifique el módulo HTTP que está accediendo al cuerpo de la entidad de la solicitud durante las solicitudes de documento predeterminadas y determine si puede configurarse para que se ejecute solo para las solicitudes administradas.</span><span class="sxs-lookup"><span data-stu-id="353c9-313">Identify the HTTP module that is accessing the request's entity body during default document requests and determine whether it can be configured to run only for managed requests.</span></span> <span data-ttu-id="353c9-314">En el modo integrado de IIS 7 e IIS 7,5, los módulos HTTP se pueden marcar para que se ejecuten solo para las solicitudes administradas agregando el atributo siguiente a la entrada **System. WebServer/modules** del módulo:</span><span class="sxs-lookup"><span data-stu-id="353c9-314">In Integrated mode for both IIS 7 and IIS 7.5, HTTP modules can be marked to run only for managed requests by adding the following attribute to the module's **system.webServer/modules** entry:</span></span>

- `precondition="managedHandler"`

- <span data-ttu-id="353c9-315">Esta configuración deshabilita el módulo para las solicitudes que IIS 7 e IIS 7,5 determinan como solicitudes no administradas.</span><span class="sxs-lookup"><span data-stu-id="353c9-315">This setting disables the module for requests that IIS 7 and IIS 7.5 determine as not being managed requests.</span></span> <span data-ttu-id="353c9-316">En el caso de las solicitudes de documento predeterminadas, la primera solicitud es a una dirección URL sin extensión.</span><span class="sxs-lookup"><span data-stu-id="353c9-316">For default document requests, the first request is to an extensionless URL.</span></span> <span data-ttu-id="353c9-317">Por lo tanto, IIS no ejecuta módulos administrados marcados con una condición previa de controlador administrado durante el procesamiento de la solicitud inicial.</span><span class="sxs-lookup"><span data-stu-id="353c9-317">Therefore, IIS does not run any managed modules that are marked with a precondition of managed Handler during initial request processing.</span></span> <span data-ttu-id="353c9-318">Como resultado, los módulos administrados no leerán accidentalmente el cuerpo de la entidad y, por lo tanto, el cuerpo de la entidad seguirá estando disponible y se pasará a la solicitud secundaria y al documento predeterminado.</span><span class="sxs-lookup"><span data-stu-id="353c9-318">As a result, managed modules will not accidentally read the entity body and thus the entity body is still available and is passed along to the child request and to the default document.</span></span>

- <span data-ttu-id="353c9-319">Si los módulos HTTP problemáticos deben ejecutarse para todas las solicitudes (para los archivos estáticos, para las direcciones URL sin extensión que se resuelven en el objeto **DefaultDocumentModule** , para las solicitudes administradas, etc.), modifique las páginas. aspx afectadas estableciendo explícitamente la propiedad **acción** del control **System. Web. UI. HtmlControls. HtmlForm** de la página en una cadena no vacía.</span><span class="sxs-lookup"><span data-stu-id="353c9-319">If the problematic HTTP modules have to run for all requests (for static files, for extensionless URLs that resolve to the **DefaultDocumentModule** object, for managed requests, etc.), modify the affected .aspx pages by explicitly setting the **Action** property of the page's **System.Web.UI.HtmlControls.HtmlForm** control to a non-empty string.</span></span> <span data-ttu-id="353c9-320">Por ejemplo, si el documento predeterminado es `Default.aspx`, modifique el código de la página para establecer explícitamente la propiedad de **acción** del control **HtmlForm** en "default. aspx".</span><span class="sxs-lookup"><span data-stu-id="353c9-320">For example, if the default document is `Default.aspx`, modify the page's code to explicitly set the **HtmlForm** control's **Action** property to "Default.aspx".</span></span>

<a id="0.1__Toc255587644"></a><a id="0.1__Toc256770155"></a>

## <a name="changes-to-the-aspnet-code-access-security-cas-implementation"></a><span data-ttu-id="353c9-321">Cambios en la implementación de seguridad de acceso del código (CAS) de ASP.NET</span><span class="sxs-lookup"><span data-stu-id="353c9-321">Changes to the ASP.NET Code Access Security (CAS) Implementation</span></span>

<span data-ttu-id="353c9-322">ASP.NET 2,0 y, por extensión, las características de ASP.NET que se agregaron en 3,5, usan el modelo de seguridad de acceso del código (CAS) de .NET Framework 1,1 y 2,0.</span><span class="sxs-lookup"><span data-stu-id="353c9-322">ASP.NET 2.0, and by extension the ASP.NET features that were added in 3.5, use the .NET Framework 1.1 and 2.0 code access security (CAS) model.</span></span> <span data-ttu-id="353c9-323">Aun así, la implementación de CAS en ASP.NET 4 se ha mejorado considerablemente.</span><span class="sxs-lookup"><span data-stu-id="353c9-323">However, the implementation of CAS in ASP.NET 4 has been substantially overhauled.</span></span> <span data-ttu-id="353c9-324">Como resultado, las aplicaciones ASP.NET de confianza parcial que se basan en el código de confianza que se ejecuta en la caché de ensamblados global (GAC) podrían producir errores con varias excepciones de seguridad.</span><span class="sxs-lookup"><span data-stu-id="353c9-324">As a result, partial-trust ASP.NET applications that rely on trusted code running in the global assembly cache (GAC) might fail with various security exceptions.</span></span> <span data-ttu-id="353c9-325">Las aplicaciones de confianza parcial que se basan en modificaciones extensas en la Directiva de CA de equipo también podrían producir un error con excepciones de seguridad.</span><span class="sxs-lookup"><span data-stu-id="353c9-325">Partial-trust applications that rely on extensive modifications to machine CAS policy might also fail with security exceptions.</span></span>

<span data-ttu-id="353c9-326">Puede revertir las aplicaciones de ASP.NET 4 de confianza parcial al comportamiento de ASP.NET 1,1 y 2,0 con el nuevo atributo **legacyCasModel** en el elemento de configuración de **confianza** , como se muestra en el ejemplo siguiente:</span><span class="sxs-lookup"><span data-stu-id="353c9-326">You can revert partial-trust ASP.NET 4 applications to the behavior of ASP.NET 1.1 and 2.0 using the new **legacyCasModel** attribute in the **trust** configuration element, as shown in the following example:</span></span>

`<trust level= "Medium" legacyCasModel="true" />`

<span data-ttu-id="353c9-327">Al revertir al modelo CAS heredado, se habilitan los siguientes comportamientos de CAS antiguos:</span><span class="sxs-lookup"><span data-stu-id="353c9-327">When you revert to the legacy CAS model, the following old CAS behaviors are enabled:</span></span>

- <span data-ttu-id="353c9-328">Se respeta la Directiva de CAS del equipo.</span><span class="sxs-lookup"><span data-stu-id="353c9-328">Machine CAS policy is honored.</span></span>
- <span data-ttu-id="353c9-329">Se permiten varios conjuntos de permisos diferentes en un dominio de aplicación único.</span><span class="sxs-lookup"><span data-stu-id="353c9-329">Multiple different permission sets in a single application domain are allowed.</span></span>
- <span data-ttu-id="353c9-330">No se requieren aserciones de permisos explícitas para los ensamblados de la GAC que se invocan cuando solo ASP.NET u otro código .NET Framework está en la pila.</span><span class="sxs-lookup"><span data-stu-id="353c9-330">Explicit permission assertions are not required for assemblies in the GAC that are invoked when only ASP.NET or other .NET Framework code is on the stack.</span></span>

<span data-ttu-id="353c9-331">Un escenario no se puede revertir en el .NET Framework 4: las aplicaciones que no son de confianza parcial web ya no pueden llamar a determinadas API en System. Web. dll y System. Web. Extensions. dll.</span><span class="sxs-lookup"><span data-stu-id="353c9-331">One scenario cannot be reverted in the .NET Framework 4: non-Web partial-trust applications can no longer call certain APIs in System.Web.dll and System.Web.Extensions.dll.</span></span> <span data-ttu-id="353c9-332">En versiones anteriores de la .NET Framework, era posible que las aplicaciones que no son de confianza parcial de Web se concedieran explícitamente permisos de **AspNetHostingPermission** .</span><span class="sxs-lookup"><span data-stu-id="353c9-332">In previous versions of the .NET Framework, it was possible for non-Web partial-trust applications to be explicitly granted **AspNetHostingPermission** permissions.</span></span> <span data-ttu-id="353c9-333">Después, estas aplicaciones podrían usar **System. Web. HttpUtility**, los tipos de los espacios de nombres **System. Web. ClientServices.\*** y los tipos relacionados con la pertenencia, los roles y los perfiles.</span><span class="sxs-lookup"><span data-stu-id="353c9-333">These applications could then use **System.Web.HttpUtility**, types in the **System.Web.ClientServices.\*** namespaces, and types related to membership, roles, and profiles.</span></span> <span data-ttu-id="353c9-334">La llamada a estos tipos de aplicaciones de confianza parcial que no son web ya no se admite en el .NET Framework 4.</span><span class="sxs-lookup"><span data-stu-id="353c9-334">Calling these types from non-Web partial trust applications is no longer supported in the .NET Framework 4.</span></span>

> [!NOTE]
> <span data-ttu-id="353c9-335">La funcionalidad **HtmlEncode** y **HtmlDecode** de la clase **System. Web. HttpUtility** se ha migrado a la nueva clase .NET Framework 4 **System .net. webutility** .</span><span class="sxs-lookup"><span data-stu-id="353c9-335">The **HtmlEncode** and **HtmlDecode** functionality of the **System.Web.HttpUtility** class was moved to the new .NET Framework 4 **System.Net.WebUtility** class.</span></span> <span data-ttu-id="353c9-336">Si esa era la única funcionalidad de ASP.NET que se estaba usando, modifique el código de la aplicación para usar la nueva clase **Webutility** en su lugar.</span><span class="sxs-lookup"><span data-stu-id="353c9-336">If that was the only ASP.NET functionality that was being used, modify the application's code to use the new **WebUtility** class instead.</span></span>

<span data-ttu-id="353c9-337">A continuación se encuentra un resumen de alto nivel de los cambios en la implementación de CAS predeterminada en ASP.NET 4:</span><span class="sxs-lookup"><span data-stu-id="353c9-337">The following is a high-level summary of the changes to the default CAS implementation in ASP.NET 4:</span></span>

- <span data-ttu-id="353c9-338">Los dominios de aplicación de ASP.NET son ahora dominios de aplicación homogéneos.</span><span class="sxs-lookup"><span data-stu-id="353c9-338">ASP.NET application domains are now homogeneous application domains.</span></span> <span data-ttu-id="353c9-339">En un dominio de aplicación solo están disponibles conjuntos de permisos de confianza parcial y plena confianza.</span><span class="sxs-lookup"><span data-stu-id="353c9-339">Only partial-trust and full-trust grant sets are available in an application domain.</span></span>
- <span data-ttu-id="353c9-340">Los conjuntos de concesión de confianza parcial de ASP.NET son independientes de cualquier directiva CAS de nivel empresarial, de nivel de equipo o de nivel de usuario.</span><span class="sxs-lookup"><span data-stu-id="353c9-340">ASP.NET partial-trust grant sets are independent from any enterprise-level, machine-level, or user-level CAS policy.</span></span>
- <span data-ttu-id="353c9-341">Los ensamblados de ASP.NET que se distribuyeron en 3,5 y 3,5 SP1 se han convertido para usar el modelo de transparencia de .NET Framework 4.</span><span class="sxs-lookup"><span data-stu-id="353c9-341">ASP.NET assemblies that shipped in 3.5 and 3.5 SP1 have been converted to use the .NET Framework 4 transparency model.</span></span>
- <span data-ttu-id="353c9-342">El uso del atributo **AspNetHostingPermission** ASP.net se ha reducido considerablemente.</span><span class="sxs-lookup"><span data-stu-id="353c9-342">Use of the ASP.NET **AspNetHostingPermission** attribute has been substantially reduced.</span></span> <span data-ttu-id="353c9-343">La mayoría de las instancias de este atributo se han quitado de las API de ASP.NET públicas.</span><span class="sxs-lookup"><span data-stu-id="353c9-343">Most instances of this attribute have been removed from the public ASP.NET APIs.</span></span>
- <span data-ttu-id="353c9-344">Los ensamblados compilados de forma dinámica creados por los proveedores de compilación de ASP.NET se han actualizado para marcar explícitamente los ensamblados como transparentes.</span><span class="sxs-lookup"><span data-stu-id="353c9-344">Dynamically compiled assemblies that are created by ASP.NET build providers have been updated to explicitly mark assemblies as transparent.</span></span>
- <span data-ttu-id="353c9-345">Todos los ensamblados de ASP.NET se marcan ahora de forma que el atributo APTCA se respeta solo en entornos de hospedaje Web.</span><span class="sxs-lookup"><span data-stu-id="353c9-345">All ASP.NET assemblies are now marked in such a way that the APTCA attribute is honored only in Web hosting environments.</span></span> <span data-ttu-id="353c9-346">Los entornos de hospedaje no Web de confianza parcial, como ClickOnce, no podrán llamar a los ensamblados de ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="353c9-346">Partially trusted non-Web hosting environments like ClickOnce will not be able to call into ASP.NET assemblies.</span></span>

<span data-ttu-id="353c9-347">Para obtener más información sobre el nuevo modelo de seguridad de acceso del código de ASP.NET 4, vea [using Code Access Security in ASP.Net Applications](https://msdn.microsoft.com/library/dd984947%28VS.100%29.aspx) en el sitio web de MSDN.</span><span class="sxs-lookup"><span data-stu-id="353c9-347">For more information about the new ASP.NET 4 code access security model, see [Using Code Access Security in ASP.NET Applications](https://msdn.microsoft.com/library/dd984947%28VS.100%29.aspx) on the MSDN Web site.</span></span>

<a id="0.1__Toc256770156"></a><a id="0.1__Toc245724863"></a><a id="0.1__Toc252995496"></a><a id="0.1__Toc255587645"></a><a id="0.1__Toc245724864"></a>

## <a name="membershipuser-and-other-types-in-the-systemwebsecurity-namespace-have-been-moved"></a><span data-ttu-id="353c9-348">Se han migrado MembershipUser y otros tipos en el espacio de nombres System. Web. Security</span><span class="sxs-lookup"><span data-stu-id="353c9-348">MembershipUser and Other Types in the System.Web.Security Namespace Have Been Moved</span></span>

<span data-ttu-id="353c9-349">Algunos tipos que se usan en la pertenencia a ASP.NET se han pasado de `System.Web.dll` al nuevo ensamblado System. Web. ApplicationServices. dll.</span><span class="sxs-lookup"><span data-stu-id="353c9-349">Some types that are used in ASP.NET membership have been moved from `System.Web.dll` to the new System.Web.ApplicationServices.dll assembly.</span></span> <span data-ttu-id="353c9-350">Estos tipos se han movido para resolver las dependencias de capas de arquitectura entre los tipos del cliente y de las SKU de .NET Framework extendidas.</span><span class="sxs-lookup"><span data-stu-id="353c9-350">The types were moved in order to resolve architectural layering dependencies between types in the client and in extended .NET Framework SKUs.</span></span>

<span data-ttu-id="353c9-351">Los proyectos de sitios web no tienen problemas como resultado de mover estos tipos, ya que System. Web. ApplicationServices. dll se ha agregado a la lista de ensamblados a los que se hace referencia que el sistema de compilación ASP.NET usa de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="353c9-351">Web site projects do not have problems as a result of moving these types, because System.Web.ApplicationServices.dll was added to the list of referenced assemblies that is used by default by the ASP.NET compilation system.</span></span> <span data-ttu-id="353c9-352">Si actualiza un proyecto de sitio web creado con una versión anterior de ASP.NET a ASP.NET 4 abriéndolo en Visual Studio 2010, el proyecto se compilará sin errores.</span><span class="sxs-lookup"><span data-stu-id="353c9-352">If you upgrade a Web site project that was created using an earlier version of ASP.NET to ASP.NET 4 by opening it in Visual Studio 2010, the project will compile without errors.</span></span>

<span data-ttu-id="353c9-353">Del mismo modo, si actualiza un proyecto de aplicación web creado en una versión anterior de ASP.NET a ASP.NET 4 abriéndolo en Visual Studio 2010, el proceso de actualización agrega una referencia a System. Web. ApplicationServices. dll al proyecto.</span><span class="sxs-lookup"><span data-stu-id="353c9-353">Similarly, if you upgrade a Web application project that was created in an earlier version of ASP.NET to ASP.NET 4 by opening it in Visual Studio 2010, the upgrade process adds a reference to System.Web.ApplicationServices.dll to the project.</span></span> <span data-ttu-id="353c9-354">Por consiguiente, los proyectos de aplicación web actualizados también se compilarán sin errores.</span><span class="sxs-lookup"><span data-stu-id="353c9-354">Therefore, upgraded Web application projects will also compile without errors.</span></span>

<span data-ttu-id="353c9-355">Los archivos compilados (binarios) que se crearon con versiones anteriores de ASP.NET también se ejecutarán sin errores en ASP.NET 4, aunque los tipos de pertenencia se movieron a otro ensamblado.</span><span class="sxs-lookup"><span data-stu-id="353c9-355">Compiled (binary) files that were created using earlier versions of ASP.NET will also run without errors on ASP.NET 4, even though the membership types were moved to a different assembly.</span></span> <span data-ttu-id="353c9-356">Se ha agregado información de reenvío de tipos a la versión ASP.NET 4 de `System.Web.dll` que enruta automáticamente las referencias en tiempo de ejecución de estos tipos a la nueva ubicación de los tipos.</span><span class="sxs-lookup"><span data-stu-id="353c9-356">Type forwarding information has been added to the ASP.NET 4 version of `System.Web.dll` that automatically routes run-time references for these types to the new location for the types.</span></span>

<span data-ttu-id="353c9-357">Sin embargo, las bibliotecas de clases que usan tipos de pertenencia específicos y que se han actualizado desde versiones anteriores de ASP.NET no se compilarán cuando se usen en un proyecto de ASP.NET 4.</span><span class="sxs-lookup"><span data-stu-id="353c9-357">However, class libraries that use specific membership types and that have been upgraded from earlier versions of ASP.NET will fail to compile when used in an ASP.NET 4 project.</span></span> <span data-ttu-id="353c9-358">Por ejemplo, un proyecto de biblioteca de clases podría no compilarse e informar de un error como el siguiente:</span><span class="sxs-lookup"><span data-stu-id="353c9-358">For example, a class library project might fail to compile and report an error such as the following:</span></span>

- `The type 'System.Web.Security.MembershipUser' is defined in an assembly that is not referenced. You must add a reference to assembly 'System.Web.ApplicationServices, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'.`

- `The type name 'MembershipUser' could not be found. This type has been forwarded to assembly 'System.Web.ApplicationServices, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'. Consider adding a reference to that assembly.`

<span data-ttu-id="353c9-359">Puede solucionar este problema agregando una referencia en el proyecto de biblioteca de clases a System. Web. ApplicationServices. dll.</span><span class="sxs-lookup"><span data-stu-id="353c9-359">You can work around this problem by adding a reference in your class library project to System.Web.ApplicationServices.dll.</span></span>

<span data-ttu-id="353c9-360">En la lista siguiente se muestran los tipos *System. Web. Security* que se movieron de `System.Web.dll` a System. Web. ApplicationServices. dll:</span><span class="sxs-lookup"><span data-stu-id="353c9-360">The following list shows the *System.Web.Security* types that were moved from `System.Web.dll` to System.Web.ApplicationServices.dll:</span></span>

- <span data-ttu-id="353c9-361">*System. Web. Security. MembershipCreateStatus@*</span><span class="sxs-lookup"><span data-stu-id="353c9-361">*System.Web.Security.MembershipCreateStatus*</span></span>
- <span data-ttu-id="353c9-362">*System. Web. Security. Membership. CreateUserException*</span><span class="sxs-lookup"><span data-stu-id="353c9-362">*System.Web.Security.Membership.CreateUserException*</span></span>
- <span data-ttu-id="353c9-363">*System. Web. Security. MembershipPasswordException*</span><span class="sxs-lookup"><span data-stu-id="353c9-363">*System.Web.Security.MembershipPasswordException*</span></span>
- <span data-ttu-id="353c9-364">*System. Web. Security. MembershipPasswordFormat*</span><span class="sxs-lookup"><span data-stu-id="353c9-364">*System.Web.Security.MembershipPasswordFormat*</span></span>
- <span data-ttu-id="353c9-365">*System. Web. Security. MembershipProvider*</span><span class="sxs-lookup"><span data-stu-id="353c9-365">*System.Web.Security.MembershipProvider*</span></span>
- <span data-ttu-id="353c9-366">*System. Web. Security. MembershipProviderCollection*</span><span class="sxs-lookup"><span data-stu-id="353c9-366">*System.Web.Security.MembershipProviderCollection*</span></span>
- <span data-ttu-id="353c9-367">*System. Web. Security. MembershipUser*</span><span class="sxs-lookup"><span data-stu-id="353c9-367">*System.Web.Security.MembershipUser*</span></span>
- <span data-ttu-id="353c9-368">*System. Web. Security. MembershipUserCollection*</span><span class="sxs-lookup"><span data-stu-id="353c9-368">*System.Web.Security.MembershipUserCollection*</span></span>
- <span data-ttu-id="353c9-369">*System. Web. Security. MembershipValidatePasswordEventHandler*</span><span class="sxs-lookup"><span data-stu-id="353c9-369">*System.Web.Security.MembershipValidatePasswordEventHandler*</span></span>
- <span data-ttu-id="353c9-370">*System. Web. Security. ValidatePasswordEventArgs*</span><span class="sxs-lookup"><span data-stu-id="353c9-370">*System.Web.Security.ValidatePasswordEventArgs*</span></span>
- <span data-ttu-id="353c9-371">*System. Web. Security. RoleProvider*</span><span class="sxs-lookup"><span data-stu-id="353c9-371">*System.Web.Security.RoleProvider*</span></span>
- <a id="0.1_a"></a><span data-ttu-id="353c9-372">*System. Web. Configuration. MembershipPasswordCompatibilityMode*</span><span class="sxs-lookup"><span data-stu-id="353c9-372">*System.Web.Configuration.MembershipPasswordCompatibilityMode*</span></span>

<a id="0.1__Toc256770157"></a>

## <a name="output-caching-changes-to-vary--http-header"></a><span data-ttu-id="353c9-373">El almacenamiento en caché de resultados cambia para variar \* encabezado HTTP</span><span class="sxs-lookup"><span data-stu-id="353c9-373">Output Caching Changes to Vary \* HTTP Header</span></span>

<span data-ttu-id="353c9-374">En ASP.NET 1,0, un error provocó que las páginas almacenadas en caché especificaban `Location="ServerAndClient"` como una configuración de caché de resultados para emitir un encabezado HTTP `Vary:*` en la respuesta.</span><span class="sxs-lookup"><span data-stu-id="353c9-374">In ASP.NET 1.0, a bug caused cached pages that specified `Location="ServerAndClient"` as an output–cache setting to emit a `Vary:*` HTTP header in the response.</span></span> <span data-ttu-id="353c9-375">Como consecuencia, se indicaba a los exploradores de cliente que nunca almacenasen en caché la página localmente.</span><span class="sxs-lookup"><span data-stu-id="353c9-375">This had the effect of telling client browsers to never cache the page locally.</span></span>

<span data-ttu-id="353c9-376">En ASP.NET 1,1, se ha agregado el método **System. Web. HttpCachePolicy. SetOmitVaryStar** , al que se puede llamar para suprimir el encabezado `Vary:*`.</span><span class="sxs-lookup"><span data-stu-id="353c9-376">In ASP.NET 1.1, the **System.Web.HttpCachePolicy.SetOmitVaryStar** method was added, which you could call to suppress the `Vary:*` header.</span></span> <span data-ttu-id="353c9-377">Se eligió este método porque el cambio del encabezado HTTP emitido se consideró un cambio potencialmente importante en este momento.</span><span class="sxs-lookup"><span data-stu-id="353c9-377">This method was chosen because changing the emitted HTTP header was considered a potentially breaking change at the time.</span></span> <span data-ttu-id="353c9-378">Sin embargo, los desarrolladores han sido confundidos por el comportamiento de ASP.NET y los informes de errores sugieren que los desarrolladores no saben cuál es el comportamiento de **SetOmitVaryStar** existente.</span><span class="sxs-lookup"><span data-stu-id="353c9-378">However, developers have been confused by the behavior in ASP.NET, and bug reports suggest that developers are unaware of the existing **SetOmitVaryStar** behavior.</span></span>

<span data-ttu-id="353c9-379">En ASP.NET 4, se tomó la decisión de corregir el problema raíz.</span><span class="sxs-lookup"><span data-stu-id="353c9-379">In ASP.NET 4, the decision was made to fix the root problem.</span></span> <span data-ttu-id="353c9-380">El encabezado HTTP `Vary:*` ya no se emite desde las respuestas que especifican la siguiente directiva:</span><span class="sxs-lookup"><span data-stu-id="353c9-380">The `Vary:*` HTTP header is no longer emitted from responses that specify the following directive:</span></span>

`<%@OutputCache Location="ServerAndClient" %>`

<span data-ttu-id="353c9-381">Como resultado, **SetOmitVaryStar** ya no es necesario para suprimir el encabezado `Vary:*`.</span><span class="sxs-lookup"><span data-stu-id="353c9-381">As a result, **SetOmitVaryStar** is no longer needed in order to suppress the `Vary:*` header.</span></span>

<span data-ttu-id="353c9-382">En las aplicaciones que especifican `Location="ServerAndClient"` en la directiva **@ OutputCache** en una página, ahora verá el comportamiento implícito por el nombre del valor del atributo de **Ubicación** , es decir, las páginas se podrán almacenar en caché en el explorador sin necesidad de llamar al método **SetOmitVaryStar** .</span><span class="sxs-lookup"><span data-stu-id="353c9-382">In applications that specify `Location="ServerAndClient"` in the **@ OutputCache** directive on a page, you will now see the behavior implied by the name of the **Location** attribute's value – that is, pages will be cacheable in the browser without requiring that you call the **SetOmitVaryStar** method.</span></span>

<span data-ttu-id="353c9-383">Si las páginas de la aplicación deben emitir `Vary:*`, llame al método **AppendHeader** , como en el ejemplo siguiente:</span><span class="sxs-lookup"><span data-stu-id="353c9-383">If pages in your application must emit `Vary:*`, call the **AppendHeader** method, as in the following example:</span></span>

`HttpResponse.AppendHeader("Vary","*");`

<span data-ttu-id="353c9-384">Como alternativa, puede cambiar el valor del atributo **Ubicación** de almacenamiento en caché de resultados a "servidor".</span><span class="sxs-lookup"><span data-stu-id="353c9-384">Alternatively, you can change the value of the output caching **Location** attribute to "Server".</span></span>

<a id="0.1__Toc255587646"></a><a id="0.1__Toc256770158"></a>

## <a name="systemwebsecurity-types-for-passport-are-obsolete"></a><span data-ttu-id="353c9-385">System. Web. Security Types for Passport está obsoleto</span><span class="sxs-lookup"><span data-stu-id="353c9-385">System.Web.Security Types for Passport are Obsolete</span></span>

<span data-ttu-id="353c9-386">La compatibilidad con Passport integrada en ASP.NET 2,0 está obsoleta y no se admite durante unos años debido a cambios en Passport (ahora LiveID).</span><span class="sxs-lookup"><span data-stu-id="353c9-386">The Passport support built into ASP.NET 2.0 has been obsolete and unsupported for a few years due to changes in Passport (now LiveID).</span></span> <span data-ttu-id="353c9-387">Como resultado, los cinco tipos relacionados con Passport en **System. Web. Security** ahora se marcan con el atributo **ObsoleteAttribute** .</span><span class="sxs-lookup"><span data-stu-id="353c9-387">As a result, the five types related to Passport in **System.Web.Security** are now marked with the **ObsoleteAttribute** attribute.</span></span>

<a id="0.1__The_MenuItem.PopOutImageUrl_Propert"></a><a id="0.1__Toc256770159"></a>

## <a name="the-menuitempopoutimageurl-property-fails-to-render-an-image-in-aspnet-4"></a><span data-ttu-id="353c9-388">La propiedad MenuItem. PopOutImageUrl no representa una imagen en ASP.NET 4</span><span class="sxs-lookup"><span data-stu-id="353c9-388">The MenuItem.PopOutImageUrl Property Fails to Render an Image in ASP.NET 4</span></span>

<span data-ttu-id="353c9-389">En ASP.NET 3,5, la propiedad *MenuItem. PopOutImageUrl* permite especificar la dirección URL de una imagen que se muestra en un elemento de menú para indicar que el elemento de menú tiene un submenú dinámico.</span><span class="sxs-lookup"><span data-stu-id="353c9-389">In ASP.NET 3.5, the *MenuItem.PopOutImageUrl* property lets you specify the URL for an image that is displayed in a menu item to indicate that the menu item has a dynamic submenu.</span></span> <span data-ttu-id="353c9-390">En el ejemplo siguiente se muestra cómo especificar esta propiedad en el marcado en ASP.NET 3,5.</span><span class="sxs-lookup"><span data-stu-id="353c9-390">The following example shows how to specify this property in markup in ASP.NET 3.5.</span></span>

[!code-aspx[Main](breaking-changes/samples/sample11.aspx)]

<span data-ttu-id="353c9-391">Como resultado de un cambio de diseño en ASP.NET 4, no se representa ninguna salida para *PopOutImageUrl* si la propiedad está establecida para la clase *MenuItem* .</span><span class="sxs-lookup"><span data-stu-id="353c9-391">As a result of a design change in ASP.NET 4, no output is rendered for the *PopOutImageUrl* if the property is set for the *MenuItem* class.</span></span> <span data-ttu-id="353c9-392">En su lugar, debe especificar una dirección URL de imagen directamente en el control de *menú* mediante la propiedad *StaticPopOutImageUrl* o la propiedad *DynamicPopOutImageUrl* .</span><span class="sxs-lookup"><span data-stu-id="353c9-392">Instead, you must specify an image URL directly in the *Menu* control using either the *StaticPopOutImageUrl* property or the *DynamicPopOutImageUrl* property.</span></span> <span data-ttu-id="353c9-393">Cuando se trabaja con un menú estático, la propiedad *Menu. StaticPopOutImageUrl* especifica la dirección URL de una imagen que se muestra para indicar que el elemento de menú estático tiene un submenú, tal como se muestra en el ejemplo siguiente:</span><span class="sxs-lookup"><span data-stu-id="353c9-393">When you work with a static menu, the *Menu.StaticPopOutImageUrl* property specifies the URL for an image that is displayed in order to indicate that the static menu item has a submenu, as shown in the following example:</span></span>

[!code-aspx[Main](breaking-changes/samples/sample12.aspx)]

<span data-ttu-id="353c9-394">Si está trabajando con un menú dinámico, use la propiedad *Menu. DynamicPopOutImageUrl* para especificar la dirección URL de una imagen que indica que un elemento de menú dinámico tiene un submenú.</span><span class="sxs-lookup"><span data-stu-id="353c9-394">If you are working with a dynamic menu, you use the *Menu.DynamicPopOutImageUrl* property to specify the URL for an image that indicates that a dynamic menu item has a submenu.</span></span> <span data-ttu-id="353c9-395">El siguiente ejemplo es similar al anterior, pero muestra cómo establecer la propiedad *DynamicPopOutImageUrl* para un menú dinámico.</span><span class="sxs-lookup"><span data-stu-id="353c9-395">The following example is similar to the previous one, but shows how to set the *DynamicPopOutImageUrl* property for a dynamic menu.</span></span>

[!code-aspx[Main](breaking-changes/samples/sample13.aspx)]

<span data-ttu-id="353c9-396">Si no se establece la propiedad *Menu. DynamicPopOutImageUrl* y la propiedad *Menu. DynamicEnableDefaultPopOutImage* se establece en *false*, no se muestra ninguna imagen.</span><span class="sxs-lookup"><span data-stu-id="353c9-396">If the *Menu.DynamicPopOutImageUrl* property is not set and the *Menu.DynamicEnableDefaultPopOutImage* property is set to *false*, no image is displayed.</span></span> <span data-ttu-id="353c9-397">Del mismo modo, si no se establece la propiedad *StaticPopOutImageUrl* y la propiedad *StaticEnableDefaultPopOutImage* se establece en *false*, no se muestra ninguna imagen.</span><span class="sxs-lookup"><span data-stu-id="353c9-397">Similarly, if the *StaticPopOutImageUrl* property is not set and the *StaticEnableDefaultPopOutImage* property is set to *false*, no image is displayed.</span></span>

<span data-ttu-id="353c9-398">Cuando establezca las rutas de acceso para estas propiedades, use una barra diagonal (/) en lugar de una barra diagonal inversa (\).</span><span class="sxs-lookup"><span data-stu-id="353c9-398">When you set the paths for these properties, use a forward slash (/) instead of a backslash (\).</span></span> <span data-ttu-id="353c9-399">Para obtener más información, vea [Menu. StaticPopOutImageUrl y menu. DynamicPopOutImageUrl no pueden representar imágenes cuando las rutas de acceso contienen barras diagonales inversas](#0.1__Menu.StaticPopOutImageUrl_and_Menu. "_Menu. StaticPopOutImageUrl_and_Menu.") en otro lugar de este documento.</span><span class="sxs-lookup"><span data-stu-id="353c9-399">For more information, see [Menu.StaticPopOutImageUrl and Menu.DynamicPopOutImageUrl Fail to Render Images When Paths Contain Backslashes](#0.1__Menu.StaticPopOutImageUrl_and_Menu. "_Menu.StaticPopOutImageUrl_and_Menu.") elsewhere in this document.</span></span>

<a id="0.1__Menu.StaticPopOutImageUrl_and_Menu."></a><a id="0.1__Toc256770160"></a>

## <a name="menustaticpopoutimageurl-and-menudynamicpopoutimageurl-fail-to-render-images-when-paths-contain-backslashes"></a><span data-ttu-id="353c9-400">MENU. StaticPopOutImageUrl y menu. DynamicPopOutImageUrl no pueden representar imágenes cuando las rutas de acceso contienen barras diagonales inversas</span><span class="sxs-lookup"><span data-stu-id="353c9-400">Menu.StaticPopOutImageUrl and Menu.DynamicPopOutImageUrl Fail to Render Images When Paths Contain Backslashes</span></span>

<span data-ttu-id="353c9-401">En ASP.NET 4, las imágenes que se especifican con las propiedades *Menu. StaticPopOutImageUrl* y *Menu. DynamicPopOutImageUrl* no se representarán si la ruta de acceso contiene backlashes (\).</span><span class="sxs-lookup"><span data-stu-id="353c9-401">In ASP.NET 4, the images that you specify using the *Menu.StaticPopOutImageUrl* and *Menu.DynamicPopOutImageUrl* properties will not render if the path contains backlashes (\).</span></span> <span data-ttu-id="353c9-402">Se trata de un cambio respecto a las versiones anteriores de ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="353c9-402">This is a change from earlier versions of ASP.NET.</span></span>

<span data-ttu-id="353c9-403">En el siguiente ejemplo de marcado de control de *menú* se muestra el conjunto de propiedades *StaticPopOutImageUrl* con una ruta de acceso que contiene una barra diagonal inversa.</span><span class="sxs-lookup"><span data-stu-id="353c9-403">The following example of *Menu* control markup shows the *StaticPopOutImageUrl* property set using a path that contains a backslash.</span></span> <span data-ttu-id="353c9-404">En ASP.NET 4, la imagen especificada en la propiedad no se representará.</span><span class="sxs-lookup"><span data-stu-id="353c9-404">In ASP.NET 4, the image specified in the property will not render.</span></span>

[!code-aspx[Main](breaking-changes/samples/sample14.aspx)]

<span data-ttu-id="353c9-405">Para corregir este problema, cambie los valores de ruta de acceso que se especifican en las propiedades *StaticPopOutImageUrl* y *DynamicPopOutImageUrl* para usar barras diagonales (/).</span><span class="sxs-lookup"><span data-stu-id="353c9-405">To correct this issue, change path values that are specified in the *StaticPopOutImageUrl* and *DynamicPopOutImageUrl* properties to use forward slashes (/).</span></span> <span data-ttu-id="353c9-406">En el ejemplo siguiente se muestra este cambio:</span><span class="sxs-lookup"><span data-stu-id="353c9-406">The following example shows this change:</span></span>

[!code-aspx[Main](breaking-changes/samples/sample15.aspx)]

<span data-ttu-id="353c9-407">Tenga en cuenta que las aplicaciones que se migraron desde versiones anteriores de ASP.NET a ASP.NET 4 también podrían verse afectadas, ya que se ha cambiado la propiedad *MenuItem. PopOutImageUrl* .</span><span class="sxs-lookup"><span data-stu-id="353c9-407">Note that applications that were migrated from earlier versions of ASP.NET to ASP.NET 4 might also be affected, because the *MenuItem.PopOutImageUrl* property has been changed.</span></span> <span data-ttu-id="353c9-408">Para obtener más información, vea [la propiedad MenuItem. PopOutImageUrl no puede representar una imagen en ASP.net 4](#0.1__The_MenuItem.PopOutImageUrl_Propert "_The_MenuItem. PopOutImageUrl_Propert") en otro lugar de este documento.</span><span class="sxs-lookup"><span data-stu-id="353c9-408">For more information, see [The MenuItem.PopOutImageUrl Property Fails to Render an Image in ASP.NET 4](#0.1__The_MenuItem.PopOutImageUrl_Propert "_The_MenuItem.PopOutImageUrl_Propert") elsewhere in this document.</span></span>

<a id="0.1__Toc224729061"></a><a id="0.1__Toc255587647"></a><a id="0.1__Toc256770161"></a>

## <a name="disclaimer"></a><span data-ttu-id="353c9-409">Declinación de responsabilidades</span><span class="sxs-lookup"><span data-stu-id="353c9-409">Disclaimer</span></span>

<span data-ttu-id="353c9-410">Este documento es preliminar y puede cambiar considerablemente antes de la versión comercial final del software que se describe en él.</span><span class="sxs-lookup"><span data-stu-id="353c9-410">This is a preliminary document and may be changed substantially prior to final commercial release of the software described herein.</span></span>

<span data-ttu-id="353c9-411">La información que incluye este documento representa el punto de vista actual de Microsoft Corporation sobre las cuestiones descritas en la fecha de la publicación.</span><span class="sxs-lookup"><span data-stu-id="353c9-411">The information contained in this document represents the current view of Microsoft Corporation on the issues discussed as of the date of publication.</span></span> <span data-ttu-id="353c9-412">Debido a que Microsoft debe responder a las condiciones de mercado cambiantes, no se debe interpretar como un compromiso por parte de Microsoft y Microsoft no puede garantizar la precisión de la información presentada después de la fecha de publicación.</span><span class="sxs-lookup"><span data-stu-id="353c9-412">Because Microsoft must respond to changing market conditions, it should not be interpreted to be a commitment on the part of Microsoft, and Microsoft cannot guarantee the accuracy of any information presented after the date of publication.</span></span>

<span data-ttu-id="353c9-413">Estas notas del producto solo tienen fines informativos.</span><span class="sxs-lookup"><span data-stu-id="353c9-413">This White Paper is for informational purposes only.</span></span> <span data-ttu-id="353c9-414">MICROSOFT NO OTORGA NINGUNA GARANTÍA, EXPRESA, IMPLÍCITA O ESTUTARIAS, EN LA INFORMACIÓN DE ESTE DOCUMENTO.</span><span class="sxs-lookup"><span data-stu-id="353c9-414">MICROSOFT MAKES NO WARRANTIES, EXPRESS, IMPLIED OR STATUTORY, AS TO THE INFORMATION IN THIS DOCUMENT.</span></span>

<span data-ttu-id="353c9-415">Es responsabilidad del usuario el cumplimiento de toda la legislación aplicable en materia de copyright.</span><span class="sxs-lookup"><span data-stu-id="353c9-415">Complying with all applicable copyright laws is the responsibility of the user.</span></span> <span data-ttu-id="353c9-416">Sin limitación de los derechos protegidos por copyright, ninguna parte del presente documento podrá ser reproducida, almacenada o introducida en un sistema de recuperación, o bien transmitida en ninguna forma o medio (electrónico, mecánico, mediante fotocopia o grabación, etc.), ni con ningún propósito, sin la autorización expresa y por escrito de Microsoft Corporation.</span><span class="sxs-lookup"><span data-stu-id="353c9-416">Without limiting the rights under copyright, no part of this document may be reproduced, stored in or introduced into a retrieval system, or transmitted in any form or by any means (electronic, mechanical, photocopying, recording, or otherwise), or for any purpose, without the express written permission of Microsoft Corporation.</span></span>

<span data-ttu-id="353c9-417">Microsoft puede ser titular de patentes, solicitudes de patentes, marcas, derechos de autor u otros derechos de propiedad intelectual sobre los contenidos de este documento.</span><span class="sxs-lookup"><span data-stu-id="353c9-417">Microsoft may have patents, patent applications, trademarks, copyrights, or other intellectual property rights covering subject matter in this document.</span></span> <span data-ttu-id="353c9-418">Este documento no otorga ninguna licencia sobre estas patentes, marcas, derechos de autor u otros derechos de propiedad intelectual, a menos que se indique expresamente en un contrato escrito de licencia de Microsoft.</span><span class="sxs-lookup"><span data-stu-id="353c9-418">Except as expressly provided in any written license agreement from Microsoft, the furnishing of this document does not give you any license to these patents, trademarks, copyrights, or other intellectual property.</span></span>

<span data-ttu-id="353c9-419">A menos que se indique lo contrario, las compañías, organizaciones, productos, nombres de dominio, direcciones de correo electrónico, logotipos, personas, lugares y eventos que se describen aquí son ficticios y no tienen ninguna asociación con ninguna empresa, organización, producto, nombre de dominio y correo electrónico reales. la dirección, el logotipo, la persona, el lugar o el evento está pensado o debe deducirse.</span><span class="sxs-lookup"><span data-stu-id="353c9-419">Unless otherwise noted, the example companies, organizations, products, domain names, email addresses, logos, people, places and events depicted herein are fictitious, and no association with any real company, organization, product, domain name, email address, logo, person, place or event is intended or should be inferred.</span></span>

<span data-ttu-id="353c9-420">© 2010 Microsoft Corporation.</span><span class="sxs-lookup"><span data-stu-id="353c9-420">© 2010 Microsoft Corporation.</span></span> <span data-ttu-id="353c9-421">All rights reserved.</span><span class="sxs-lookup"><span data-stu-id="353c9-421">All rights reserved.</span></span>

<span data-ttu-id="353c9-422">Microsoft y Windows son marcas registradas o marcas comerciales de Microsoft Corporation en Estados Unidos y en otros países.</span><span class="sxs-lookup"><span data-stu-id="353c9-422">Microsoft and Windows are either registered trademarks or trademarks of Microsoft Corporation in the United States and/or other countries.</span></span>

<span data-ttu-id="353c9-423">Los nombres de las compañías y productos reales mencionados en el presente documento pueden ser marcas comerciales de sus respectivos propietarios.</span><span class="sxs-lookup"><span data-stu-id="353c9-423">The names of actual companies and products mentioned herein may be the trademarks of their respective owners.</span></span>
