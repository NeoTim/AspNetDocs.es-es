---
uid: web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-asp-net-ajax-updatepanel-triggers
title: Descripción de los desencadenadores UpdatePanel de ASP.NET AJAX | Microsoft Docs
author: scottcate
description: Al trabajar en el editor de marcado de Visual Studio, es posible que observe (desde IntelliSense) que hay dos elementos secundarios de un control UpdatePanel. Uno de qu...
ms.author: riande
ms.date: 03/12/2008
ms.assetid: faab8503-2984-48a9-8a40-7728461abc50
msc.legacyurl: /web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-asp-net-ajax-updatepanel-triggers
msc.type: authoredcontent
ms.openlocfilehash: b1cc869f373d4f8283b4d92af74707c3f11fef61
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 11/28/2019
ms.locfileid: "74588799"
---
# <a name="understanding-aspnet-ajax-updatepanel-triggers"></a><span data-ttu-id="032e9-104">Descripción de los desencadenadores UpdatePanel de ASP.NET AJAX</span><span class="sxs-lookup"><span data-stu-id="032e9-104">Understanding ASP.NET AJAX UpdatePanel Triggers</span></span>

<span data-ttu-id="032e9-105">por [Scott Cate](https://github.com/scottcate)</span><span class="sxs-lookup"><span data-stu-id="032e9-105">by [Scott Cate](https://github.com/scottcate)</span></span>

[<span data-ttu-id="032e9-106">Descargar PDF</span><span class="sxs-lookup"><span data-stu-id="032e9-106">Download PDF</span></span>](https://download.microsoft.com/download/C/1/9/C19A3451-1D14-477C-B703-54EF22E197EE/AJAX_tutorial02_Triggers_cs.pdf)

> <span data-ttu-id="032e9-107">Al trabajar en el editor de marcado de Visual Studio, es posible que observe (desde IntelliSense) que hay dos elementos secundarios de un control UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="032e9-107">When working in the markup editor in Visual Studio, you may notice (from IntelliSense) that there are two child elements of an UpdatePanel control.</span></span> <span data-ttu-id="032e9-108">Uno de los cuales es el elemento triggers, que especifica los controles de la página (o el control de usuario, si está usando uno) que desencadenará una representación parcial del control UpdatePanel en el que reside el elemento.</span><span class="sxs-lookup"><span data-stu-id="032e9-108">One of which is the Triggers element, which specifies the controls on the page (or the user control, if you are using one) that will trigger a partial render of the UpdatePanel control in which the element resides.</span></span>

## <a name="introduction"></a><span data-ttu-id="032e9-109">Introducción</span><span class="sxs-lookup"><span data-stu-id="032e9-109">Introduction</span></span>

<span data-ttu-id="032e9-110">La tecnología ASP.NET de Microsoft aporta un modelo de programación orientado a objetos y basado en eventos y lo agrupa con las ventajas del código compilado.</span><span class="sxs-lookup"><span data-stu-id="032e9-110">Microsoft's ASP.NET technology brings an object-oriented and event-driven programming model and unites it with the benefits of compiled code.</span></span> <span data-ttu-id="032e9-111">Sin embargo, su modelo de procesamiento del lado servidor tiene varias desventajas inherentes a la tecnología, muchas de las cuales se pueden solucionar con las nuevas características incluidas en las extensiones de AJAX Microsoft ASP.NET 3,5.</span><span class="sxs-lookup"><span data-stu-id="032e9-111">However, its server-side processing model has several drawbacks inherent in the technology, many of which can be addressed by the new features included in the Microsoft ASP.NET 3.5 AJAX Extensions.</span></span> <span data-ttu-id="032e9-112">Estas extensiones permiten muchas características nuevas de cliente enriquecidas, incluida la representación parcial de páginas sin necesidad de una actualización de página completa, la capacidad de obtener acceso a los servicios web a través de scripts de cliente (incluida la API de generación de perfiles de ASP.NET) y una amplia API del lado cliente. diseñado para reflejar muchos de los esquemas de control que se han detectado en el conjunto de controles del servidor de ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="032e9-112">These extensions enable many new rich client features, including partial rendering of pages without requiring a full page refresh, the ability to access Web Services via client script (including the ASP.NET profiling API), and an extensive client-side API designed to mirror many of the control schemes seen in the ASP.NET server-side control set.</span></span>

<span data-ttu-id="032e9-113">En estas notas del producto se examina la funcionalidad de los desencadenadores XML del componente `UpdatePanel` de ASP.NET AJAX.</span><span class="sxs-lookup"><span data-stu-id="032e9-113">This whitepaper examines the XML Triggers functionality of the ASP.NET AJAX `UpdatePanel` component.</span></span> <span data-ttu-id="032e9-114">Los desencadenadores XML proporcionan un control granular sobre los componentes que pueden provocar una representación parcial de controles UpdatePanel específicos.</span><span class="sxs-lookup"><span data-stu-id="032e9-114">XML Triggers give granular control over the components that can cause partial rendering for specific UpdatePanel controls.</span></span>

<span data-ttu-id="032e9-115">Estas notas del producto se basan en la versión beta 2 del .NET Framework 3,5 y Visual Studio 2008.</span><span class="sxs-lookup"><span data-stu-id="032e9-115">This whitepaper is based on the Beta 2 release of the .NET Framework 3.5 and Visual Studio 2008.</span></span> <span data-ttu-id="032e9-116">Las extensiones de AJAX de ASP.NET, anteriormente un ensamblado de complementos destinado a ASP.NET 2,0, ahora se integran en la biblioteca de clases base .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="032e9-116">The ASP.NET AJAX Extensions, previously an add-on assembly targeted at ASP.NET 2.0, are now integrated into the .NET Framework Base Class Library.</span></span> <span data-ttu-id="032e9-117">En estas notas del producto también se da por hecho que va a trabajar con Visual Studio 2008, no con Visual Web Developer Express, y proporcionará tutoriales de acuerdo con la interfaz de usuario de Visual Studio (aunque los listados de código serán totalmente compatibles con independencia de entorno de desarrollo).</span><span class="sxs-lookup"><span data-stu-id="032e9-117">This whitepaper also assumes that you will be working with Visual Studio 2008, not Visual Web Developer Express, and will provide walkthroughs according to the user interface of Visual Studio (although code listings will be entirely compatible regardless of development environment).</span></span>

## <a name="triggers"></a><span data-ttu-id="032e9-118">*Desencadenadores*</span><span class="sxs-lookup"><span data-stu-id="032e9-118">*Triggers*</span></span>

<span data-ttu-id="032e9-119">De forma predeterminada, los desencadenadores de un UpdatePanel determinado incluyen automáticamente los controles secundarios que invocan un postback, incluidos los controles de cuadro de texto (por ejemplo) que tienen su propiedad `AutoPostBack` establecida en **true**.</span><span class="sxs-lookup"><span data-stu-id="032e9-119">Triggers for a given UpdatePanel, by default, automatically include any child controls that invoke a postback, including (for example) TextBox controls that have their `AutoPostBack` property set to **true**.</span></span> <span data-ttu-id="032e9-120">Sin embargo, los desencadenadores también se pueden incluir mediante declaración con el marcado; Esto se hace en la sección `<triggers>` de la declaración del control UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="032e9-120">However, triggers can also be included declaratively using markup; this is done within the `<triggers>` section of the UpdatePanel control declaration.</span></span> <span data-ttu-id="032e9-121">Aunque se puede tener acceso a los desencadenadores a través de la propiedad de colección `Triggers`, se recomienda registrar los desencadenadores de representación parciales en tiempo de ejecución (por ejemplo, si un control no está disponible en tiempo de diseño) mediante el método `RegisterAsyncPostBackControl(Control)` del objeto ScriptManager de la página, dentro del evento `Page_Load`.</span><span class="sxs-lookup"><span data-stu-id="032e9-121">Although triggers can be accessed via the `Triggers` collection property, it is recommended that you register any partial render triggers at run-time (for instance, if a control is not available at design time) by using the `RegisterAsyncPostBackControl(Control)` method of the ScriptManager object for your page, within the `Page_Load` event.</span></span> <span data-ttu-id="032e9-122">Recuerde que las páginas no tienen estado, por lo que debe volver a registrar estos controles cada vez que se crean.</span><span class="sxs-lookup"><span data-stu-id="032e9-122">Remember that Pages are stateless, and so you should re-register these controls every time they are created.</span></span>

<span data-ttu-id="032e9-123">También se puede deshabilitar la inclusión automática del desencadenador secundario (para que los controles secundarios que crean postbacks no desencadenen automáticamente representaciones parciales) estableciendo la propiedad `ChildrenAsTriggers` en **false**.</span><span class="sxs-lookup"><span data-stu-id="032e9-123">Automatic child trigger inclusion can also be disabled (so that child controls that create postbacks do not automatically trigger partial renders) by setting the `ChildrenAsTriggers` property to **false**.</span></span> <span data-ttu-id="032e9-124">Esto le permite la máxima flexibilidad a la hora de asignar los controles específicos que pueden invocar una representación de página y se recomienda, de modo que un desarrollador pueda optar por responder a un evento, en lugar de controlar los eventos que puedan surgir.</span><span class="sxs-lookup"><span data-stu-id="032e9-124">This allows you the greatest flexibility in assigning which specific controls may invoke a page render, and is recommended, so that a developer will opt-in to respond to an event, rather than handling any events that may arise.</span></span>

<span data-ttu-id="032e9-125">Tenga en cuenta que cuando los controles UpdatePanel están anidados, cuando UpdateMode está establecido en **Conditional**, si se desencadena el UpdatePanel secundario, pero el elemento primario no lo es, solo se actualizará el UpdatePanel secundario.</span><span class="sxs-lookup"><span data-stu-id="032e9-125">Note that when UpdatePanel controls are nested, when the UpdateMode is set to **Conditional**, if the child UpdatePanel is triggered, but the parent is not, then only the child UpdatePanel will refresh.</span></span> <span data-ttu-id="032e9-126">Sin embargo, si se actualiza el UpdatePanel primario, también se actualizará el UpdatePanel secundario.</span><span class="sxs-lookup"><span data-stu-id="032e9-126">However, if the parent UpdatePanel is refreshed, then the child UpdatePanel will also be refreshed.</span></span>

## <a name="the-lttriggersgt-element"></a><span data-ttu-id="032e9-127">*&lt;desencadena&gt; elemento*</span><span class="sxs-lookup"><span data-stu-id="032e9-127">*The &lt;Triggers&gt; Element*</span></span>

<span data-ttu-id="032e9-128">Al trabajar en el editor de marcado de Visual Studio, es posible que observe (desde IntelliSense) que hay dos elementos secundarios de un control de `UpdatePanel`.</span><span class="sxs-lookup"><span data-stu-id="032e9-128">When working in the markup editor in Visual Studio, you may notice (from IntelliSense) that there are two child elements of an `UpdatePanel` control.</span></span> <span data-ttu-id="032e9-129">El elemento más frecuente es el elemento `<ContentTemplate>`, que básicamente encapsula el contenido que se conservará en el panel de actualización (el contenido para el que se habilita la representación parcial).</span><span class="sxs-lookup"><span data-stu-id="032e9-129">The most-frequently seen element is the `<ContentTemplate>` element, which essentially encapsulates the content that will be held by the update panel (the content for which we are enabling partial rendering).</span></span> <span data-ttu-id="032e9-130">El otro elemento es el elemento `<Triggers>`, que especifica los controles de la página (o el control de usuario, si está usando uno) que desencadenará una representación parcial del control UpdatePanel en el que residen los desencadenadores de &lt;&gt; elemento.</span><span class="sxs-lookup"><span data-stu-id="032e9-130">The other element is the `<Triggers>` element, which specifies the controls on the page (or the user control, if you are using one) that will trigger a partial render of the UpdatePanel control in which the &lt;Triggers&gt; element resides.</span></span>

<span data-ttu-id="032e9-131">El elemento `<Triggers>` puede contener cualquier número cada uno de los dos nodos secundarios: `<asp:AsyncPostBackTrigger>` y `<asp:PostBackTrigger>`.</span><span class="sxs-lookup"><span data-stu-id="032e9-131">The `<Triggers>` element can contain any number each of two child nodes: `<asp:AsyncPostBackTrigger>` and `<asp:PostBackTrigger>`.</span></span> <span data-ttu-id="032e9-132">Ambos aceptan dos atributos, `ControlID` y `EventName`, y pueden especificar cualquier control dentro de la unidad de encapsulación actual (por ejemplo, si el control UpdatePanel reside dentro de un control de usuario Web, no debe intentar hacer referencia a un control de la página en la que residirá el control de usuario).</span><span class="sxs-lookup"><span data-stu-id="032e9-132">They both accept two attributes, `ControlID` and `EventName`, and can specify any Control within the current unit of encapsulation (for instance, if your UpdatePanel control resides within a Web User Control, you should not attempt to reference a Control on the Page on which the User Control will reside).</span></span>

<span data-ttu-id="032e9-133">El elemento `<asp:AsyncPostBackTrigger>` es especialmente útil para que pueda tener como destino cualquier evento de un control que exista como elemento secundario de *cualquier* control UpdatePanel en la unidad de encapsulación, no solo el UpdatePanel bajo el que este desencadenador es un elemento secundario.</span><span class="sxs-lookup"><span data-stu-id="032e9-133">The `<asp:AsyncPostBackTrigger>` element is particularly useful in that it can target any event from a Control that exists as a child of *any* UpdatePanel control in the unit of encapsulation, not just the UpdatePanel under which this trigger is a child.</span></span> <span data-ttu-id="032e9-134">Por lo tanto, se puede realizar cualquier control para desencadenar una actualización de página parcial.</span><span class="sxs-lookup"><span data-stu-id="032e9-134">Thus, any control can be made to trigger a partial page update.</span></span>

<span data-ttu-id="032e9-135">Del mismo modo, el elemento `<asp:PostBackTrigger>` se puede usar para desencadenar una representación de página parcial, pero una que requiere un recorrido de ida y vuelta completo al servidor.</span><span class="sxs-lookup"><span data-stu-id="032e9-135">Similarly, the `<asp:PostBackTrigger>` element can be used to trigger a partial page render, but one that requires a full round-trip to the server.</span></span> <span data-ttu-id="032e9-136">Este elemento de desencadenador también se puede usar para forzar una representación de página completa cuando un control desencadenaría de otro modo una representación de página parcial (por ejemplo, cuando un control de `Button` existe en el elemento `<ContentTemplate>` de un control UpdatePanel).</span><span class="sxs-lookup"><span data-stu-id="032e9-136">This trigger element can also be used to force a full page render when a control would otherwise normally trigger a partial page render (for instance, when a `Button` control exists in the `<ContentTemplate>` element of an UpdatePanel control).</span></span> <span data-ttu-id="032e9-137">De nuevo, el elemento PostBackTrigger puede especificar cualquier control que sea un elemento secundario de cualquier control UpdatePanel en la unidad de encapsulación actual.</span><span class="sxs-lookup"><span data-stu-id="032e9-137">Again, the PostBackTrigger element can specify any control that is a child of any UpdatePanel control in the current unit of encapsulation.</span></span>

## <a name="lttriggersgt-element-reference"></a><span data-ttu-id="032e9-138">*&lt;desencadenadores&gt; referencia de elemento*</span><span class="sxs-lookup"><span data-stu-id="032e9-138">*&lt;Triggers&gt; Element Reference*</span></span>

<span data-ttu-id="032e9-139">*Descendientes de marcado:*</span><span class="sxs-lookup"><span data-stu-id="032e9-139">*Markup Descendants:*</span></span>

| <span data-ttu-id="032e9-140">**Etiqueta**</span><span class="sxs-lookup"><span data-stu-id="032e9-140">**Tag**</span></span> | <span data-ttu-id="032e9-141">**Descripción**</span><span class="sxs-lookup"><span data-stu-id="032e9-141">**Description**</span></span> |
| --- | --- |
| <span data-ttu-id="032e9-142">&lt;ASP: AsyncPostBackTrigger&gt;</span><span class="sxs-lookup"><span data-stu-id="032e9-142">&lt;asp:AsyncPostBackTrigger&gt;</span></span> | <span data-ttu-id="032e9-143">Especifica un control y evento que producirá una actualización de página parcial para el UpdatePanel que contiene esta referencia de desencadenador.</span><span class="sxs-lookup"><span data-stu-id="032e9-143">Specifies a control and event that will cause a partial page update for the UpdatePanel that contains this trigger reference.</span></span> |
| <span data-ttu-id="032e9-144">&lt;ASP: PostBackTrigger&gt;</span><span class="sxs-lookup"><span data-stu-id="032e9-144">&lt;asp:PostBackTrigger&gt;</span></span> | <span data-ttu-id="032e9-145">Especifica un control y un evento que producirán una actualización de página completa (una actualización de página completa).</span><span class="sxs-lookup"><span data-stu-id="032e9-145">Specifies a control and event that will cause a full page update (a full page refresh).</span></span> <span data-ttu-id="032e9-146">Esta etiqueta se puede usar para forzar una actualización completa cuando un control desencadenaría de otro modo la representación parcial.</span><span class="sxs-lookup"><span data-stu-id="032e9-146">This tag can be used to force a full refresh when a control would otherwise trigger partial rendering.</span></span> |

## <a name="walkthrough-cross-updatepanel-triggers"></a><span data-ttu-id="032e9-147">*Tutorial: desencadenadores Cross-UpdatePanel*</span><span class="sxs-lookup"><span data-stu-id="032e9-147">*Walkthrough: Cross-UpdatePanel Triggers*</span></span>

1. <span data-ttu-id="032e9-148">Cree una nueva página de ASP.NET con un conjunto de objetos ScriptManager para habilitar la representación parcial.</span><span class="sxs-lookup"><span data-stu-id="032e9-148">Create a new ASP.NET page with a ScriptManager object set to enable partial rendering.</span></span> <span data-ttu-id="032e9-149">Agregue dos UpdatePanel a esta página: en el primero, incluya un control de etiqueta (Label1) y dos controles de botón (button1 y BUTTON2).</span><span class="sxs-lookup"><span data-stu-id="032e9-149">Add two UpdatePanels to this page - in the first, include a Label control ( Label1 ) and two Button controls ( Button1 and Button2 ).</span></span> <span data-ttu-id="032e9-150">Button1 debe indicar hacer clic para actualizar y BUTTON2 debe indicar hacer clic para actualizar esto, o algo a lo largo de estas líneas.</span><span class="sxs-lookup"><span data-stu-id="032e9-150">Button1 should say Click to Update Both and Button2 should say Click to Update This, or something along those lines.</span></span> <span data-ttu-id="032e9-151">En el segundo UpdatePanel, incluya solo un control de etiqueta (Label2), pero establezca su propiedad ForeColor en un valor distinto del predeterminado para diferenciarlo.</span><span class="sxs-lookup"><span data-stu-id="032e9-151">In the second UpdatePanel, include only a Label control ( Label2 ), but set its ForeColor property to something other than the default to differentiate it.</span></span>
2. <span data-ttu-id="032e9-152">Establezca la propiedad UpdateMode de ambas etiquetas UpdatePanel en **Conditional**.</span><span class="sxs-lookup"><span data-stu-id="032e9-152">Set the UpdateMode property of both UpdatePanel tags to **Conditional**.</span></span>

<span data-ttu-id="032e9-153">**Lista 1: marcado para default. aspx:**</span><span class="sxs-lookup"><span data-stu-id="032e9-153">**Listing 1: Markup for default.aspx:**</span></span> 

[!code-aspx[Main](understanding-asp-net-ajax-updatepanel-triggers/samples/sample1.aspx)]

1. <span data-ttu-id="032e9-154">En el controlador de eventos de clic para Button1, establezca Label1. Text y Label2. Text en algo dependiente del tiempo (por ejemplo, DateTime. Now. ToLongTimeString ()).</span><span class="sxs-lookup"><span data-stu-id="032e9-154">In the Click event handler for Button1, set Label1.Text and Label2.Text to something time-dependent (such as DateTime.Now.ToLongTimeString()).</span></span> <span data-ttu-id="032e9-155">En el caso del controlador de eventos click para BUTTON2, establezca solo Label1. Text en el valor dependiente del tiempo.</span><span class="sxs-lookup"><span data-stu-id="032e9-155">For the Click event handler for Button2, set only Label1.Text to the time-dependent value.</span></span>

<span data-ttu-id="032e9-156">**Lista 2: Codebehind (recortado) en default.aspx.cs:**</span><span class="sxs-lookup"><span data-stu-id="032e9-156">**Listing 2: Codebehind (trimmed) in default.aspx.cs:**</span></span> 

[!code-csharp[Main](understanding-asp-net-ajax-updatepanel-triggers/samples/sample2.cs)]

1. <span data-ttu-id="032e9-157">Presione F5 para compilar y ejecutar el proyecto.</span><span class="sxs-lookup"><span data-stu-id="032e9-157">Press F5 to build and run the project.</span></span> <span data-ttu-id="032e9-158">Tenga en cuenta que, al hacer clic en actualizar ambos paneles, ambas etiquetas cambian el texto; sin embargo, al hacer clic en actualizar este panel, solo se actualiza Label1.</span><span class="sxs-lookup"><span data-stu-id="032e9-158">Note that, when you click Update Both Panels, both labels change text; however, when you click Update This Panel, only Label1 updates.</span></span>

[![](understanding-asp-net-ajax-updatepanel-triggers/_static/image2.png)](understanding-asp-net-ajax-updatepanel-triggers/_static/image1.png)

<span data-ttu-id="032e9-159">([Haga clic para ver la imagen de tamaño completo](understanding-asp-net-ajax-updatepanel-triggers/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="032e9-159">([Click to view full-size image](understanding-asp-net-ajax-updatepanel-triggers/_static/image3.png))</span></span>

## <a name="under-the-hood"></a><span data-ttu-id="032e9-160">*Aspectos técnicos*</span><span class="sxs-lookup"><span data-stu-id="032e9-160">*Under the Hood*</span></span>

<span data-ttu-id="032e9-161">Al utilizar el ejemplo que acabamos de crear, podemos echar un vistazo a lo que está haciendo ASP.NET AJAX y cómo funcionan los desencadenadores multipanel de UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="032e9-161">Utilizing the example we just constructed, we can take a look at what ASP.NET AJAX is doing and how our UpdatePanel cross-panel triggers work.</span></span> <span data-ttu-id="032e9-162">Para ello, trabajaremos con el código HTML de origen de la página generado, así como con la extensión Mozilla Firefox denominada FireBug, con él, podemos examinar fácilmente las devoluciones de AJAX.</span><span class="sxs-lookup"><span data-stu-id="032e9-162">To do so, we will work with the generated page source HTML, as well as the Mozilla Firefox extension called FireBug - with it, we can easily examine the AJAX postbacks.</span></span> <span data-ttu-id="032e9-163">También usaremos la herramienta de reflector de .NET de Lutz Roeder.</span><span class="sxs-lookup"><span data-stu-id="032e9-163">We will also use the .NET Reflector tool by Lutz Roeder.</span></span> <span data-ttu-id="032e9-164">Ambas herramientas están disponibles de forma gratuita y se pueden encontrar con una búsqueda en Internet.</span><span class="sxs-lookup"><span data-stu-id="032e9-164">Both of these tools are freely available online, and can be found with an internet search.</span></span>

<span data-ttu-id="032e9-165">Un examen del código fuente de la página muestra casi nada de lo normal; los controles UpdatePanel se representan como contenedores `<div>` y podemos ver que los recursos del script incluyen los que proporciona el `<asp:ScriptManager>`.</span><span class="sxs-lookup"><span data-stu-id="032e9-165">An examination of the page source code shows almost nothing out of the ordinary; the UpdatePanel controls are rendered as `<div>` containers, and we can see the script resource includes provided by the `<asp:ScriptManager>`.</span></span> <span data-ttu-id="032e9-166">También hay algunas nuevas llamadas específicas de AJAX a PageRequestManager que son internas a la biblioteca de scripts de cliente de AJAX.</span><span class="sxs-lookup"><span data-stu-id="032e9-166">There are also some new AJAX-specific calls to the PageRequestManager that are internal to the AJAX client script library.</span></span> <span data-ttu-id="032e9-167">Por último, vemos los dos contenedores UpdatePanel: uno con los botones `<input>` representados con los dos controles `<asp:Label>` que se representan como contenedores `<span>`.</span><span class="sxs-lookup"><span data-stu-id="032e9-167">Finally, we see the two UpdatePanel containers - one with the rendered `<input>` buttons with the two `<asp:Label>` controls rendered as `<span>` containers.</span></span> <span data-ttu-id="032e9-168">(Si inspecciona el árbol DOM en FireBug, observará que las etiquetas están atenuadas para indicar que no producen contenido visible).</span><span class="sxs-lookup"><span data-stu-id="032e9-168">(If you inspect the DOM tree in FireBug, you will notice that the labels are dimmed to indicate that they are not producing visible content).</span></span>

<span data-ttu-id="032e9-169">Haga clic en el botón actualizar este panel y observe que el UpdatePanel superior se actualizará con la hora actual del servidor.</span><span class="sxs-lookup"><span data-stu-id="032e9-169">Click the Update This Panel button, and notice the top UpdatePanel will be updated with the current server time.</span></span> <span data-ttu-id="032e9-170">En FireBug, elija la pestaña consola para que pueda examinar la solicitud.</span><span class="sxs-lookup"><span data-stu-id="032e9-170">In FireBug, choose the Console tab so that you can examine the request.</span></span> <span data-ttu-id="032e9-171">Examine primero los parámetros de la solicitud POST:</span><span class="sxs-lookup"><span data-stu-id="032e9-171">Examine the POST request parameters first:</span></span>

[![](understanding-asp-net-ajax-updatepanel-triggers/_static/image5.png)](understanding-asp-net-ajax-updatepanel-triggers/_static/image4.png)

<span data-ttu-id="032e9-172">([Haga clic para ver la imagen de tamaño completo](understanding-asp-net-ajax-updatepanel-triggers/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="032e9-172">([Click to view full-size image](understanding-asp-net-ajax-updatepanel-triggers/_static/image6.png))</span></span>

<span data-ttu-id="032e9-173">Tenga en cuenta que UpdatePanel ha indicado exactamente el código AJAX del servidor que se ha desencadenado mediante el parámetro ScriptManager1: `Button1` del control `UpdatePanel1`.</span><span class="sxs-lookup"><span data-stu-id="032e9-173">Note that the UpdatePanel has indicated to the server-side AJAX code precisely which control tree was fired via the ScriptManager1 parameter: `Button1` of the `UpdatePanel1` control.</span></span> <span data-ttu-id="032e9-174">Ahora, haga clic en el botón actualizar ambos paneles.</span><span class="sxs-lookup"><span data-stu-id="032e9-174">Now, click on the Update Both Panels button.</span></span> <span data-ttu-id="032e9-175">A continuación, examinando la respuesta, vemos una serie de variables delimitadas por canalización establecidas en una cadena. en concreto, vemos que el UpdatePanel superior, `UpdatePanel1`, tiene el código HTML que se envía al explorador.</span><span class="sxs-lookup"><span data-stu-id="032e9-175">Then, examining the response, we see a pipe-delimited series of variables set in a string; specifically, we see the top UpdatePanel, `UpdatePanel1`, has the entirety of its HTML sent to the browser.</span></span> <span data-ttu-id="032e9-176">La biblioteca de scripts de cliente de AJAX sustituye el contenido HTML original de UpdatePanel por el nuevo contenido a través de la propiedad `.innerHTML`, por lo que el servidor envía el contenido cambiado del servidor como HTML.</span><span class="sxs-lookup"><span data-stu-id="032e9-176">The AJAX client script library substitutes the UpdatePanel's original HTML content with the new content via the `.innerHTML` property, and so the server sends the changed content from the server as HTML.</span></span>

<span data-ttu-id="032e9-177">Ahora, haga clic en el botón actualizar ambos paneles y examine los resultados del servidor.</span><span class="sxs-lookup"><span data-stu-id="032e9-177">Now, click on the Update Both Panels button and examine the results from the server.</span></span> <span data-ttu-id="032e9-178">Los resultados son muy similares: ambos UpdatePanel reciben un nuevo HTML del servidor.</span><span class="sxs-lookup"><span data-stu-id="032e9-178">The results are very similar - both UpdatePanels receive new HTML from the server.</span></span> <span data-ttu-id="032e9-179">Al igual que con la devolución de llamada anterior, se envía un estado de página adicional.</span><span class="sxs-lookup"><span data-stu-id="032e9-179">As with the previous callback, additional page state is sent.</span></span>

<span data-ttu-id="032e9-180">Como podemos ver, dado que no se utiliza ningún código especial para realizar un postback de AJAX, la biblioteca de scripts de cliente de AJAX es capaz de interceptar postbacks de formulario sin ningún código adicional.</span><span class="sxs-lookup"><span data-stu-id="032e9-180">As we can see, because no special code is utilized to perform an AJAX postback, the AJAX client script library is able to intercept form postbacks without any additional code.</span></span> <span data-ttu-id="032e9-181">Los controles de servidor usan automáticamente JavaScript para que no envíen automáticamente el formulario-ASP.NET inserta automáticamente el código para la validación del formulario y el estado ya, que se consigue principalmente mediante la inclusión automática de recursos de script, la clase PostBackOptions y la clase ClientScriptManager.</span><span class="sxs-lookup"><span data-stu-id="032e9-181">Server controls automatically utilize JavaScript so that they do not automatically submit the form - ASP.NET automatically injects code for form validation and state already, primarily achieved by automatic script resource inclusion, the PostBackOptions class, and the ClientScriptManager class.</span></span>

<span data-ttu-id="032e9-182">Por ejemplo, considere un control CheckBox; Examine el desensamblado de la clase en .NET reflector.</span><span class="sxs-lookup"><span data-stu-id="032e9-182">For instance, consider a CheckBox control; examine the class disassembly in .NET Reflector.</span></span> <span data-ttu-id="032e9-183">Para ello, asegúrese de que el ensamblado System. Web está abierto y navegue hasta la clase `System.Web.UI.WebControls.CheckBox`, abriendo el método `RenderInputTag`.</span><span class="sxs-lookup"><span data-stu-id="032e9-183">To do so, ensure that your System.Web assembly is open, and navigate to the `System.Web.UI.WebControls.CheckBox` class, opening the `RenderInputTag` method.</span></span> <span data-ttu-id="032e9-184">Busque un condicional que Compruebe la propiedad `AutoPostBack`:</span><span class="sxs-lookup"><span data-stu-id="032e9-184">Look for a conditional that checks the `AutoPostBack` property:</span></span>

[![](understanding-asp-net-ajax-updatepanel-triggers/_static/image8.png)](understanding-asp-net-ajax-updatepanel-triggers/_static/image7.png)

<span data-ttu-id="032e9-185">([Haga clic para ver la imagen de tamaño completo](understanding-asp-net-ajax-updatepanel-triggers/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="032e9-185">([Click to view full-size image](understanding-asp-net-ajax-updatepanel-triggers/_static/image9.png))</span></span>

<span data-ttu-id="032e9-186">Cuando el PostBack automático está habilitado en un control de `CheckBox` (a través de la propiedad AutoPostBack es true), por lo tanto, la etiqueta de `<input>` resultante se representa con un script de control de eventos ASP.NET en su atributo `onclick`.</span><span class="sxs-lookup"><span data-stu-id="032e9-186">When automatic postback is enabled on a `CheckBox` control (via the AutoPostBack property being true), the resultant `<input>` tag is therefore rendered with an ASP.NET event handling script in its `onclick` attribute.</span></span> <span data-ttu-id="032e9-187">La interceptación del envío del formulario y, a continuación, permite que ASP.NET AJAX se inserte en la página nonintrusively, lo que ayuda a evitar posibles cambios importantes que podrían producirse al usar un reemplazo de cadena posiblemente imprecisa.</span><span class="sxs-lookup"><span data-stu-id="032e9-187">The interception of the form's submission, then, allows ASP.NET AJAX to be injected into the page nonintrusively, helping to avoid any potential breaking changes that might occur by utilizing a possibly-imprecise string replacement.</span></span> <span data-ttu-id="032e9-188">Además, esto permite que *cualquier* control ASP.net personalizado use la eficacia de ASP.NET AJAX sin código adicional para admitir su uso dentro de un contenedor UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="032e9-188">Furthermore, this enables *any* custom ASP.NET control to utilize the power of ASP.NET AJAX without any additional code to support its use within an UpdatePanel container.</span></span>

<span data-ttu-id="032e9-189">La funcionalidad de `<triggers>` corresponde a los valores inicializados en la llamada PageRequestManager a \_updateControls (tenga en cuenta que la biblioteca de scripts de cliente de ASP.NET AJAX usa la Convención de que los métodos, eventos y nombres de campo que comienzan con un carácter de subrayado se marcan como internos y no están diseñados para usarse fuera de la propia biblioteca).</span><span class="sxs-lookup"><span data-stu-id="032e9-189">The `<triggers>` functionality corresponds to the values initialized in the PageRequestManager call to \_updateControls (note that the ASP.NET AJAX client script library utilizes the convention that methods, events, and field names that begin with an underscore are marked as internal, and are not meant for use outside of the library itself).</span></span> <span data-ttu-id="032e9-190">Con él, podemos observar qué controles están diseñados para hacer retrovoluciones de AJAX.</span><span class="sxs-lookup"><span data-stu-id="032e9-190">With it, we can observe which controls are intended to cause AJAX postbacks.</span></span>

<span data-ttu-id="032e9-191">Por ejemplo, vamos a agregar dos controles adicionales a la página, quedando un control fuera del todo el UpdatePanel y saliendo de uno dentro de un UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="032e9-191">For example, let's add two additional controls to the page, leaving one control outside of the UpdatePanels entirely, and leaving one within an UpdatePanel.</span></span> <span data-ttu-id="032e9-192">Agregaremos un control CheckBox en el UpdatePanel superior y colocará un DropDownList con varios colores definidos en la lista.</span><span class="sxs-lookup"><span data-stu-id="032e9-192">We will add a CheckBox control within the upper UpdatePanel, and drop a DropDownList with a number of colors defined within the list.</span></span> <span data-ttu-id="032e9-193">Este es el nuevo marcado:</span><span class="sxs-lookup"><span data-stu-id="032e9-193">Here is the new markup:</span></span>

<span data-ttu-id="032e9-194">**Lista 3: nuevo marcado**</span><span class="sxs-lookup"><span data-stu-id="032e9-194">**Listing 3: New Markup**</span></span>

[!code-aspx[Main](understanding-asp-net-ajax-updatepanel-triggers/samples/sample3.aspx)]

<span data-ttu-id="032e9-195">Y este es el nuevo código subyacente:</span><span class="sxs-lookup"><span data-stu-id="032e9-195">And here is the new code-behind:</span></span>

<span data-ttu-id="032e9-196">**Lista 4: Codebehind**</span><span class="sxs-lookup"><span data-stu-id="032e9-196">**Listing 4: Codebehind**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-updatepanel-triggers/samples/sample4.cs)]

<span data-ttu-id="032e9-197">La idea que subyace en esta página es que la lista desplegable selecciona uno de tres colores para mostrar la segunda etiqueta, que la casilla determina si está en negrita y si las etiquetas muestran la fecha y la hora.</span><span class="sxs-lookup"><span data-stu-id="032e9-197">The idea behind this page is that the drop-down list selects one of three colors to show the second label, that the check box determines both whether it is bold, and whether the labels display the date as well as the time.</span></span> <span data-ttu-id="032e9-198">La casilla no debe producir una actualización de AJAX, pero la lista desplegable debería, aunque no esté hospedada en un UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="032e9-198">The check box should not cause an AJAX update, but the drop-down list should, even though it is not housed within an UpdatePanel.</span></span>

[![](understanding-asp-net-ajax-updatepanel-triggers/_static/image11.png)](understanding-asp-net-ajax-updatepanel-triggers/_static/image10.png)

<span data-ttu-id="032e9-199">([Haga clic para ver la imagen de tamaño completo](understanding-asp-net-ajax-updatepanel-triggers/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="032e9-199">([Click to view full-size image](understanding-asp-net-ajax-updatepanel-triggers/_static/image12.png))</span></span>

<span data-ttu-id="032e9-200">Como se aprecia en la captura de pantalla anterior, el botón más reciente en el que se hace clic fue el botón derecho actualizar este panel, que actualizó el tiempo superior independiente del tiempo inferior.</span><span class="sxs-lookup"><span data-stu-id="032e9-200">As is apparent in the above screen shot, the most-recent button to be clicked was the right button Update This Panel, which updated the top time independent of the bottom time.</span></span> <span data-ttu-id="032e9-201">La fecha también se desactivó entre los clics, ya que la fecha es visible en la etiqueta inferior.</span><span class="sxs-lookup"><span data-stu-id="032e9-201">The date was also switched off between clicks, as the date is visible in the bottom label.</span></span> <span data-ttu-id="032e9-202">Por último, es el color de la etiqueta inferior: se actualizó más recientemente que el texto de la etiqueta, lo que demuestra que el estado del control es importante y los usuarios esperan que se conserven a través de los postbacks de AJAX.</span><span class="sxs-lookup"><span data-stu-id="032e9-202">Finally of interest is the bottom label's color: it was updated more recently than the label's text, which demonstrates that control state is important, and users expect it to be preserved through AJAX postbacks.</span></span> <span data-ttu-id="032e9-203">*Sin embargo*, no se actualizó la hora.</span><span class="sxs-lookup"><span data-stu-id="032e9-203">*However*, the time was not updated.</span></span> <span data-ttu-id="032e9-204">El tiempo se rellenó automáticamente a través de la persistencia de la \_\_campo VIEWSTATE de la página que está interpretando el tiempo de ejecución de ASP.NET cuando el control se representó en el servidor.</span><span class="sxs-lookup"><span data-stu-id="032e9-204">The time was automatically repopulated through the persistence of the \_\_VIEWSTATE field of the page being interpreted by the ASP.NET runtime when the control was being re-rendered on the server.</span></span> <span data-ttu-id="032e9-205">El código del servidor de ASP.NET AJAX no reconoce en qué métodos están cambiando el estado de los controles. simplemente se vuelve a rellenar desde el estado de vista y, a continuación, se ejecutan los eventos adecuados.</span><span class="sxs-lookup"><span data-stu-id="032e9-205">The ASP.NET AJAX server code does not recognize in which methods the controls are changing state; it simply repopulates from view state and then runs the events that are appropriate.</span></span>

<span data-ttu-id="032e9-206">Sin embargo, debe señalarse que había inicializado el tiempo dentro de la página\_evento de carga, el tiempo se habría incrementado correctamente.</span><span class="sxs-lookup"><span data-stu-id="032e9-206">It should be pointed out, however, that had I initialized the time within the Page\_Load event, the time would have been incremented correctly.</span></span> <span data-ttu-id="032e9-207">Por lo tanto, los desarrolladores deben tener cuidado de que el código adecuado se ejecute durante los controladores de eventos adecuados y evitar el uso de la carga de la página\_cuando un controlador de eventos de control sea adecuado.</span><span class="sxs-lookup"><span data-stu-id="032e9-207">Consequently, developers should be wary that the appropriate code is being run during the appropriate event handlers, and avoid use of Page\_Load when a control event handler would be appropriate.</span></span>

## <a name="summary"></a><span data-ttu-id="032e9-208">Resumen</span><span class="sxs-lookup"><span data-stu-id="032e9-208">Summary</span></span>

<span data-ttu-id="032e9-209">El control UpdatePanel de ASP.NET AJAX Extensions es versátil y puede utilizar una serie de métodos para identificar los eventos de control que deben hacer que se actualice.</span><span class="sxs-lookup"><span data-stu-id="032e9-209">The ASP.NET AJAX Extensions UpdatePanel control is versatile, and can utilize a number of methods for identifying control events that should cause it to be updated.</span></span> <span data-ttu-id="032e9-210">Permite que los controles secundarios los actualicen automáticamente, pero también pueden responder a los eventos de control en cualquier parte de la página.</span><span class="sxs-lookup"><span data-stu-id="032e9-210">It supports being updated automatically by its child controls, but can also respond to control events elsewhere on the page.</span></span>

<span data-ttu-id="032e9-211">Para reducir la posibilidad de la carga de procesamiento del servidor, se recomienda que la propiedad `ChildrenAsTriggers` de un UpdatePanel se establezca en `false`y que se opte por los eventos en lugar de incluirlos de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="032e9-211">To reduce potential for server processing load, it is recommended that the `ChildrenAsTriggers` property of an UpdatePanel be set to `false`, and that events be opted-into rather than included by default.</span></span> <span data-ttu-id="032e9-212">Esto también evita que los eventos innecesarios provoquen efectos potencialmente no deseados, incluida la validación, y cambios en los campos de entrada.</span><span class="sxs-lookup"><span data-stu-id="032e9-212">This also prevents any unneeded events from causing potentially-unwanted effects, including validation, and changes to input fields.</span></span> <span data-ttu-id="032e9-213">Estos tipos de errores pueden ser difíciles de aislar, ya que la página se actualiza de forma transparente al usuario y, por tanto, la causa puede no ser obvia de inmediato.</span><span class="sxs-lookup"><span data-stu-id="032e9-213">These types of bugs may be difficult to isolate, because the page updates transparently to the user, and the cause may therefore not be immediately obvious.</span></span>

<span data-ttu-id="032e9-214">Mediante el examen de los trabajos internos del modelo de interceptación post de formulario de ASP.NET AJAX, pudimos determinar que utiliza el marco de trabajo ya proporcionado por ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="032e9-214">By examining the inner workings of the ASP.NET AJAX form post interception model, we were able to determine that it utilizes the framework already provided by ASP.NET.</span></span> <span data-ttu-id="032e9-215">Al hacerlo, se conserva la compatibilidad máxima con los controles diseñados con el mismo marco de trabajo y se realiza una intrusión mínima en cualquier JavaScript adicional escrito para la página.</span><span class="sxs-lookup"><span data-stu-id="032e9-215">In doing so, it preserves maximum compatibility with controls designed using the same framework, and intrudes minimally on any additional JavaScript written for the page.</span></span>

## <a name="bio"></a><span data-ttu-id="032e9-216">Disponibilidad</span><span class="sxs-lookup"><span data-stu-id="032e9-216">Bio</span></span>

<span data-ttu-id="032e9-217">Rob Paveza es un desarrollador de aplicaciones .NET Senior en Terralever ([www.terralever.com](http://www.terralever.com)), una principal empresa de marketing interactiva en Tempe, AZ.</span><span class="sxs-lookup"><span data-stu-id="032e9-217">Rob Paveza is a senior .NET application developer at Terralever ([www.terralever.com](http://www.terralever.com)), a leading interactive marketing firm in Tempe, AZ.</span></span> <span data-ttu-id="032e9-218">Puede ponerse en contacto con usted en [robpaveza@gmail.com](mailto:robpaveza@gmail.com)y su blog se encuentra en [http://geekswithblogs.net/robp/](http://geekswithblogs.net/robp/).</span><span class="sxs-lookup"><span data-stu-id="032e9-218">He can be reached at [robpaveza@gmail.com](mailto:robpaveza@gmail.com), and his blog is located at [http://geekswithblogs.net/robp/](http://geekswithblogs.net/robp/).</span></span>

<span data-ttu-id="032e9-219">Scott Cate ha estado trabajando con las tecnologías Web de Microsoft desde 1997 y es el Presidente de myKB.com ([www.myKB.com](http://www.myKB.com)), donde se especializa en escribir aplicaciones basadas en ASP.net centradas en las soluciones de software de la base de conocimiento.</span><span class="sxs-lookup"><span data-stu-id="032e9-219">Scott Cate has been working with Microsoft Web technologies since 1997 and is the President of myKB.com ([www.myKB.com](http://www.myKB.com)) where he specializes in writing ASP.NET based applications focused on Knowledge Base Software solutions.</span></span> <span data-ttu-id="032e9-220">Puede ponerse en contacto con Scott por correo electrónico en [scott.cate@myKB.com](mailto:scott.cate@myKB.com) o su blog en [ScottCate.com](http://ScottCate.com)</span><span class="sxs-lookup"><span data-stu-id="032e9-220">Scott can be contacted via email at [scott.cate@myKB.com](mailto:scott.cate@myKB.com) or his blog at [ScottCate.com](http://ScottCate.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="032e9-221">[Anterior](understanding-partial-page-updates-with-asp-net-ajax.md)
> [Siguiente](understanding-asp-net-ajax-authentication-and-profile-application-services.md)</span><span class="sxs-lookup"><span data-stu-id="032e9-221">[Previous](understanding-partial-page-updates-with-asp-net-ajax.md)
[Next](understanding-asp-net-ajax-authentication-and-profile-application-services.md)</span></span>
