---
uid: web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-3
title: Introducción con Entity Framework 4,0 Database First y ASP.NET 4 formularios Web Forms, parte 3 | Microsoft Docs
author: tdykstra
description: En la aplicación Web de ejemplo contoso University se muestra cómo crear aplicaciones de formularios Web Forms de ASP.NET mediante el Entity Framework. La aplicación de ejemplo es...
ms.author: riande
ms.date: 12/03/2010
ms.assetid: ccdc3f8c-2568-40a7-8f8b-3c23d2e05388
msc.legacyurl: /web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-3
msc.type: authoredcontent
ms.openlocfilehash: 88debb11a9157dce9ff000b1cb459b876dbceaf3
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 03/06/2020
ms.locfileid: "78522643"
---
# <a name="getting-started-with-entity-framework-40-database-first-and-aspnet-4-web-forms---part-3"></a><span data-ttu-id="f9fa4-104">Introducción con Entity Framework 4,0 Database First y ASP.NET 4 formularios Web Forms, parte 3</span><span class="sxs-lookup"><span data-stu-id="f9fa4-104">Getting Started with Entity Framework 4.0 Database First and ASP.NET 4 Web Forms - Part 3</span></span>

<span data-ttu-id="f9fa4-105">por [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="f9fa4-105">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

> <span data-ttu-id="f9fa4-106">En la aplicación Web de ejemplo contoso University se muestra cómo crear aplicaciones de formularios Web Forms de ASP.NET mediante el Entity Framework 4,0 y Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-106">The Contoso University sample web application demonstrates how to create ASP.NET Web Forms applications using the Entity Framework 4.0 and Visual Studio 2010.</span></span> <span data-ttu-id="f9fa4-107">Para obtener información sobre la serie de tutoriales, consulte [el primer tutorial de la serie](the-entity-framework-and-aspnet-getting-started-part-1.md) .</span><span class="sxs-lookup"><span data-stu-id="f9fa4-107">For information about the tutorial series, see [the first tutorial in the series](the-entity-framework-and-aspnet-getting-started-part-1.md)</span></span>

## <a name="filtering-ordering-and-grouping-data"></a><span data-ttu-id="f9fa4-108">Filtrar, ordenar y agrupar datos</span><span class="sxs-lookup"><span data-stu-id="f9fa4-108">Filtering, Ordering, and Grouping Data</span></span>

<span data-ttu-id="f9fa4-109">En el tutorial anterior, usó el control `EntityDataSource` para mostrar y editar datos.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-109">In the previous tutorial you used the `EntityDataSource` control to display and edit data.</span></span> <span data-ttu-id="f9fa4-110">En este tutorial, filtrará, ordenará y agrupará los datos.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-110">In this tutorial you'll filter, order, and group data.</span></span> <span data-ttu-id="f9fa4-111">Al hacer esto estableciendo las propiedades del control `EntityDataSource`, la sintaxis es diferente de otros controles de origen de datos.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-111">When you do this by setting properties of the `EntityDataSource` control, the syntax is different from other data source controls.</span></span> <span data-ttu-id="f9fa4-112">Como verá, sin embargo, puede usar el control `QueryExtender` para minimizar estas diferencias.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-112">As you'll see, however, you can use the `QueryExtender` control to minimize these differences.</span></span>

<span data-ttu-id="f9fa4-113">Cambiará la página *Students. aspx* para filtrar a los estudiantes, ordenar por nombre y buscar por nombre.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-113">You'll change the *Students.aspx* page to filter for students, sort by name, and search on name.</span></span> <span data-ttu-id="f9fa4-114">También cambiará la página *Courses. aspx* para mostrar los cursos del Departamento seleccionado y buscar cursos por nombre.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-114">You'll also change the *Courses.aspx* page to display courses for the selected department and search for courses by name.</span></span> <span data-ttu-id="f9fa4-115">Por último, agregará estadísticas de estudiante a la página *About. aspx* .</span><span class="sxs-lookup"><span data-stu-id="f9fa4-115">Finally, you'll add student statistics to the *About.aspx* page.</span></span>

<span data-ttu-id="f9fa4-116">[![Image02](the-entity-framework-and-aspnet-getting-started-part-3/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="f9fa4-116">[![Image02](the-entity-framework-and-aspnet-getting-started-part-3/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image1.png)</span></span>

<span data-ttu-id="f9fa4-117">[![Image11](the-entity-framework-and-aspnet-getting-started-part-3/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="f9fa4-117">[![Image11](the-entity-framework-and-aspnet-getting-started-part-3/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image3.png)</span></span>

<span data-ttu-id="f9fa4-118">[![Image10](the-entity-framework-and-aspnet-getting-started-part-3/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="f9fa4-118">[![Image10](the-entity-framework-and-aspnet-getting-started-part-3/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image5.png)</span></span>

<span data-ttu-id="f9fa4-119">[![Image14](the-entity-framework-and-aspnet-getting-started-part-3/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="f9fa4-119">[![Image14](the-entity-framework-and-aspnet-getting-started-part-3/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image7.png)</span></span>

## <a name="using-the-entitydatasource-where-property-to-filter-data"></a><span data-ttu-id="f9fa4-120">Usar la propiedad EntityDataSource "where" para filtrar los datos</span><span class="sxs-lookup"><span data-stu-id="f9fa4-120">Using the EntityDataSource "Where" Property to Filter Data</span></span>

<span data-ttu-id="f9fa4-121">Abra la página *Students. aspx* que creó en el tutorial anterior.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-121">Open the *Students.aspx* page that you created in the previous tutorial.</span></span> <span data-ttu-id="f9fa4-122">Como está configurado actualmente, el control de `GridView` en la página muestra todos los nombres del conjunto de entidades `People`.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-122">As currently configured, the `GridView` control in the page displays all the names from the `People` entity set.</span></span> <span data-ttu-id="f9fa4-123">Sin embargo, desea mostrar solo los estudiantes, que puede buscar seleccionando `Person` entidades que tienen fechas de inscripción no nulas.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-123">However, you want to show only students, which you can find by selecting `Person` entities that have non-null enrollment dates.</span></span>

<span data-ttu-id="f9fa4-124">Cambie a la vista de **diseño** y seleccione el control `EntityDataSource`.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-124">Switch to **Design** view and select the `EntityDataSource` control.</span></span> <span data-ttu-id="f9fa4-125">En la ventana **Propiedades** , establezca la propiedad `Where` en `it.EnrollmentDate is not null`.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-125">In the **Properties** window, set the `Where` property to `it.EnrollmentDate is not null`.</span></span>

<span data-ttu-id="f9fa4-126">[![Image01](the-entity-framework-and-aspnet-getting-started-part-3/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="f9fa4-126">[![Image01](the-entity-framework-and-aspnet-getting-started-part-3/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image9.png)</span></span>

<span data-ttu-id="f9fa4-127">La sintaxis que se usa en la propiedad `Where` del control `EntityDataSource` es Entity SQL.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-127">The syntax you use in the `Where` property of the `EntityDataSource` control is Entity SQL.</span></span> <span data-ttu-id="f9fa4-128">Entity SQL es similar a Transact-SQL, pero se ha personalizado para su uso con entidades en lugar de objetos de base de datos.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-128">Entity SQL is similar to Transact-SQL, but it's customized for use with entities rather than database objects.</span></span> <span data-ttu-id="f9fa4-129">En el `it.EnrollmentDate is not null`de la expresión, la palabra `it` representa una referencia a la entidad devuelta por la consulta.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-129">In the expression `it.EnrollmentDate is not null`, the word `it` represents a reference to the entity returned by the query.</span></span> <span data-ttu-id="f9fa4-130">Por lo tanto, `it.EnrollmentDate` hace referencia a la propiedad `EnrollmentDate` de la entidad `Person` que devuelve el control `EntityDataSource`.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-130">Therefore, `it.EnrollmentDate` refers to the `EnrollmentDate` property of the `Person` entity that the `EntityDataSource` control returns.</span></span>

<span data-ttu-id="f9fa4-131">Ejecute la página.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-131">Run the page.</span></span> <span data-ttu-id="f9fa4-132">La lista Students ahora solo contiene estudiantes.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-132">The students list now contains only students.</span></span> <span data-ttu-id="f9fa4-133">(No se muestra ninguna fila en la que no hay ninguna fecha de inscripción).</span><span class="sxs-lookup"><span data-stu-id="f9fa4-133">(There are no rows displayed where there's no enrollment date.)</span></span>

<span data-ttu-id="f9fa4-134">[![Image02](the-entity-framework-and-aspnet-getting-started-part-3/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="f9fa4-134">[![Image02](the-entity-framework-and-aspnet-getting-started-part-3/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image11.png)</span></span>

## <a name="using-the-entitydatasource-orderby-property-to-order-data"></a><span data-ttu-id="f9fa4-135">Usar la propiedad EntityDataSource "OrderBy" para ordenar los datos</span><span class="sxs-lookup"><span data-stu-id="f9fa4-135">Using the EntityDataSource "OrderBy" Property to Order Data</span></span>

<span data-ttu-id="f9fa4-136">También desea que esta lista esté en orden de nombres cuando se muestra por primera vez.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-136">You also want this list to be in name order when it's first displayed.</span></span> <span data-ttu-id="f9fa4-137">Con la página *Students. aspx* todavía abierta en la vista **diseño** y, con el control `EntityDataSource` aún seleccionado, en la ventana **propiedades** , establezca la propiedad **OrderBy** en `it.LastName`.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-137">With the *Students.aspx* page still open in **Design** view, and with the `EntityDataSource` control still selected, in the **Properties** window set the **OrderBy** property to `it.LastName`.</span></span>

<span data-ttu-id="f9fa4-138">[![Image05](the-entity-framework-and-aspnet-getting-started-part-3/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="f9fa4-138">[![Image05](the-entity-framework-and-aspnet-getting-started-part-3/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image13.png)</span></span>

<span data-ttu-id="f9fa4-139">Ejecute la página.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-139">Run the page.</span></span> <span data-ttu-id="f9fa4-140">La lista Students ahora está ordenada por Apellido.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-140">The students list is now in order by last name.</span></span>

<span data-ttu-id="f9fa4-141">[![Image04](the-entity-framework-and-aspnet-getting-started-part-3/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="f9fa4-141">[![Image04](the-entity-framework-and-aspnet-getting-started-part-3/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image15.png)</span></span>

## <a name="using-a-control-parameter-to-set-the-where-property"></a><span data-ttu-id="f9fa4-142">Usar un parámetro de control para establecer la propiedad "where"</span><span class="sxs-lookup"><span data-stu-id="f9fa4-142">Using a Control Parameter to Set the "Where" Property</span></span>

<span data-ttu-id="f9fa4-143">Como con otros controles de origen de datos, puede pasar valores de parámetro a la propiedad `Where`.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-143">As with other data source controls, you can pass parameter values to the `Where` property.</span></span> <span data-ttu-id="f9fa4-144">En la página *Courses. aspx* que creó en la parte 2 del tutorial, puede usar este método para mostrar los cursos asociados al Departamento que un usuario selecciona en la lista desplegable.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-144">On the *Courses.aspx* page that you created in part 2 of the tutorial, you can use this method to display courses that are associated with the department that a user selects from the drop-down list.</span></span>

<span data-ttu-id="f9fa4-145">Abra *Courses. aspx* y cambie a la vista **diseño** .</span><span class="sxs-lookup"><span data-stu-id="f9fa4-145">Open *Courses.aspx* and switch to **Design** view.</span></span> <span data-ttu-id="f9fa4-146">Agregue un segundo control `EntityDataSource` a la página y asígnele el nombre `CoursesEntityDataSource`.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-146">Add a second `EntityDataSource` control to the page, and name it `CoursesEntityDataSource`.</span></span> <span data-ttu-id="f9fa4-147">Conéctelo al modelo de `SchoolEntities` y seleccione `Courses` como el valor de **entitySetName** .</span><span class="sxs-lookup"><span data-stu-id="f9fa4-147">Connect it to the `SchoolEntities` model, and select `Courses` as the **EntitySetName** value.</span></span>

<span data-ttu-id="f9fa4-148">En la ventana **propiedades** , haga clic en los puntos suspensivos del cuadro de propiedades **Where** .</span><span class="sxs-lookup"><span data-stu-id="f9fa4-148">In the **Properties** window, click the ellipsis in the **Where** property box.</span></span> <span data-ttu-id="f9fa4-149">(Asegúrese de que el control `CoursesEntityDataSource` todavía está seleccionado antes de usar la ventana **propiedades** ).</span><span class="sxs-lookup"><span data-stu-id="f9fa4-149">(Make sure the `CoursesEntityDataSource` control is still selected before using the **Properties** window.)</span></span>

<span data-ttu-id="f9fa4-150">[![Image06](the-entity-framework-and-aspnet-getting-started-part-3/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="f9fa4-150">[![Image06](the-entity-framework-and-aspnet-getting-started-part-3/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image17.png)</span></span>

<span data-ttu-id="f9fa4-151">Se muestra el cuadro de diálogo **Editor de expresiones** .</span><span class="sxs-lookup"><span data-stu-id="f9fa4-151">The **Expression Editor** dialog box is displayed.</span></span> <span data-ttu-id="f9fa4-152">En este cuadro de diálogo, seleccione **generar automáticamente la expresión Where según los parámetros proporcionados**y, a continuación, haga clic en **Agregar parámetro**.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-152">In this dialog box, select **Automatically generate the Where expression based on the provided parameters**, and then click **Add Parameter**.</span></span> <span data-ttu-id="f9fa4-153">Asigne al parámetro el nombre `DepartmentID`, seleccione **control** como valor de **origen del parámetro** y seleccione **DepartmentsDropDownList** como valor de **ControlID** .</span><span class="sxs-lookup"><span data-stu-id="f9fa4-153">Name the parameter `DepartmentID`, select **Control** as the **Parameter source** value, and select **DepartmentsDropDownList** as the **ControlID** value.</span></span>

<span data-ttu-id="f9fa4-154">[![Image07](the-entity-framework-and-aspnet-getting-started-part-3/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="f9fa4-154">[![Image07](the-entity-framework-and-aspnet-getting-started-part-3/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image19.png)</span></span>

<span data-ttu-id="f9fa4-155">Haga clic en **Mostrar propiedades avanzadas**y, en la ventana **propiedades** del cuadro de diálogo **Editor de expresiones** , cambie la propiedad `Type` a `Int32`.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-155">Click **Show advanced properties**, and in the **Properties** window of the **Expression Editor** dialog box, change the `Type` property to `Int32`.</span></span>

<span data-ttu-id="f9fa4-156">[![Image15](the-entity-framework-and-aspnet-getting-started-part-3/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="f9fa4-156">[![Image15](the-entity-framework-and-aspnet-getting-started-part-3/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image21.png)</span></span>

<span data-ttu-id="f9fa4-157">Cuando haya terminado, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-157">When you're done, click **OK**.</span></span>

<span data-ttu-id="f9fa4-158">Debajo de la lista desplegable, agregue un control `GridView` a la página y asígnele el nombre `CoursesGridView`.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-158">Below the drop-down list, add a `GridView` control to the page and name it `CoursesGridView`.</span></span> <span data-ttu-id="f9fa4-159">Conéctelo al control de origen de datos `CoursesEntityDataSource`, haga clic en **actualizar esquema**, haga clic en **Editar columnas**y quite la columna `DepartmentID`.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-159">Connect it to the `CoursesEntityDataSource` data source control, click **Refresh Schema**, click **Edit Columns**, and remove the `DepartmentID` column.</span></span> <span data-ttu-id="f9fa4-160">El marcado del control `GridView` es similar al ejemplo siguiente.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-160">The `GridView` control markup resembles the following example.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample1.aspx)]

<span data-ttu-id="f9fa4-161">Cuando el usuario cambia el Departamento seleccionado en la lista desplegable, desea que la lista de cursos asociados cambie automáticamente.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-161">When the user changes the selected department in the drop-down list, you want the list of associated courses to change automatically.</span></span> <span data-ttu-id="f9fa4-162">Para que esto suceda, seleccione la lista desplegable y, en la ventana **propiedades** , establezca la propiedad `AutoPostBack` en `True`.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-162">To make this happen, select the drop-down list, and in the **Properties** window set the `AutoPostBack` property to `True`.</span></span>

<span data-ttu-id="f9fa4-163">[![Image08](the-entity-framework-and-aspnet-getting-started-part-3/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="f9fa4-163">[![Image08](the-entity-framework-and-aspnet-getting-started-part-3/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image23.png)</span></span>

<span data-ttu-id="f9fa4-164">Ahora que ha terminado de usar el diseñador, cambie a la vista **código fuente** y reemplace las propiedades `ConnectionString` y `DefaultContainer` nombre del control `CoursesEntityDataSource` con el atributo `ContextTypeName="ContosoUniversity.DAL.SchoolEntities"`.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-164">Now that you're finished using the designer, switch to **Source** view and replace the `ConnectionString` and `DefaultContainer` name properties of the `CoursesEntityDataSource` control with the `ContextTypeName="ContosoUniversity.DAL.SchoolEntities"` attribute.</span></span> <span data-ttu-id="f9fa4-165">Cuando haya terminado, el marcado del control será similar al del ejemplo siguiente.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-165">When you're done, the markup for the control will look like the following example.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample2.aspx)]

<span data-ttu-id="f9fa4-166">Ejecute la página y use la lista desplegable para seleccionar distintos departamentos.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-166">Run the page and use the drop-down list to select different departments.</span></span> <span data-ttu-id="f9fa4-167">En el control `GridView` solo se muestran los cursos que ofrece el Departamento seleccionado.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-167">Only courses that are offered by the selected department are displayed in the `GridView` control.</span></span>

<span data-ttu-id="f9fa4-168">[![Image09](the-entity-framework-and-aspnet-getting-started-part-3/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="f9fa4-168">[![Image09](the-entity-framework-and-aspnet-getting-started-part-3/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image25.png)</span></span>

## <a name="using-the-entitydatasource-groupby-property-to-group-data"></a><span data-ttu-id="f9fa4-169">Usar la propiedad EntityDataSource "GroupBy" para agrupar datos</span><span class="sxs-lookup"><span data-stu-id="f9fa4-169">Using the EntityDataSource "GroupBy" Property to Group Data</span></span>

<span data-ttu-id="f9fa4-170">Supongamos que contoso University quiere incluir algunas estadísticas de cuerpo de estudiante en su página acerca de.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-170">Suppose Contoso University wants to put some student-body statistics on its About page.</span></span> <span data-ttu-id="f9fa4-171">En concreto, desea mostrar un desglose de números de estudiantes en la fecha en que se inscribieron.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-171">Specifically, it wants to show a breakdown of numbers of students by the date they enrolled.</span></span>

<span data-ttu-id="f9fa4-172">Abra *About. aspx*y, en la vista **código fuente** , reemplace el contenido existente del control `BodyContent` por "Student Body statistics" entre `h2` Etiquetas:</span><span class="sxs-lookup"><span data-stu-id="f9fa4-172">Open *About.aspx*, and in **Source** view, replace the existing contents of the `BodyContent` control with "Student Body Statistics" between `h2` tags:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample3.aspx)]

<span data-ttu-id="f9fa4-173">Después del encabezado, agregue un control `EntityDataSource` y asígnele el nombre `StudentStatisticsEntityDataSource`.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-173">After the heading, add an `EntityDataSource` control and name it `StudentStatisticsEntityDataSource`.</span></span> <span data-ttu-id="f9fa4-174">Conéctela a `SchoolEntities`, seleccione el conjunto de entidades `People` y deje el cuadro **seleccionar** del asistente sin cambios.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-174">Connect it to `SchoolEntities`, select the `People` entity set, and leave the **Select** box in the wizard unchanged.</span></span> <span data-ttu-id="f9fa4-175">Establezca las siguientes propiedades en la ventana **propiedades** :</span><span class="sxs-lookup"><span data-stu-id="f9fa4-175">Set the following properties in the **Properties** window:</span></span>

- <span data-ttu-id="f9fa4-176">Para filtrar solo a los estudiantes, establezca la propiedad `Where` en `it.EnrollmentDate is not null`.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-176">To filter for students only, set the `Where` property to `it.EnrollmentDate is not null`.</span></span>
- <span data-ttu-id="f9fa4-177">Para agrupar los resultados por la fecha de inscripción, establezca la propiedad `GroupBy` en `it.EnrollmentDate`.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-177">To group the results by the enrollment date, set the `GroupBy` property to `it.EnrollmentDate`.</span></span>
- <span data-ttu-id="f9fa4-178">Para seleccionar la fecha de inscripción y el número de estudiantes, establezca la propiedad `Select` en `it.EnrollmentDate, Count(it.EnrollmentDate) AS NumberOfStudents`.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-178">To select the enrollment date and the number of students, set the `Select` property to `it.EnrollmentDate, Count(it.EnrollmentDate) AS NumberOfStudents`.</span></span>
- <span data-ttu-id="f9fa4-179">Para ordenar los resultados por la fecha de inscripción, establezca la propiedad `OrderBy` en `it.EnrollmentDate`.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-179">To order the results by the enrollment date, set the `OrderBy` property to `it.EnrollmentDate`.</span></span>

<span data-ttu-id="f9fa4-180">En la vista **código fuente** , reemplace las propiedades `ConnectionString` y `DefaultContainer` nombre por una propiedad `ContextTypeName`.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-180">In **Source** view, replace the `ConnectionString` and `DefaultContainer` name properties with a `ContextTypeName` property.</span></span> <span data-ttu-id="f9fa4-181">El marcado del control `EntityDataSource` ahora es similar al ejemplo siguiente.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-181">The `EntityDataSource` control markup now resembles the following example.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample4.aspx)]

<span data-ttu-id="f9fa4-182">La sintaxis de las propiedades `Select`, `GroupBy`y `Where` es similar a Transact-SQL, a excepción de la palabra clave `it` que especifica la entidad actual.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-182">The syntax of the `Select`, `GroupBy`, and `Where` properties resembles Transact-SQL except for the `it` keyword that specifies the current entity.</span></span>

<span data-ttu-id="f9fa4-183">Agregue el marcado siguiente para crear un control de `GridView` para mostrar los datos.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-183">Add the following markup to create a `GridView` control to display the data.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample5.aspx)]

<span data-ttu-id="f9fa4-184">Ejecute la página para ver una lista que muestra el número de alumnos por fecha de inscripción.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-184">Run the page to see a list showing the number of students by enrollment date.</span></span>

<span data-ttu-id="f9fa4-185">[![Image10](the-entity-framework-and-aspnet-getting-started-part-3/_static/image28.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="f9fa4-185">[![Image10](the-entity-framework-and-aspnet-getting-started-part-3/_static/image28.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image27.png)</span></span>

## <a name="using-the-queryextender-control-for-filtering-and-ordering"></a><span data-ttu-id="f9fa4-186">Usar el control QueryExtender para filtrar y ordenar</span><span class="sxs-lookup"><span data-stu-id="f9fa4-186">Using the QueryExtender Control for Filtering and Ordering</span></span>

<span data-ttu-id="f9fa4-187">El control `QueryExtender` proporciona una manera de especificar el filtrado y la ordenación en el marcado.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-187">The `QueryExtender` control provides a way to specify filtering and sorting in markup.</span></span> <span data-ttu-id="f9fa4-188">La sintaxis es independiente del sistema de administración de bases de datos (DBMS) que está usando.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-188">The syntax is independent of the database management system (DBMS) you're using.</span></span> <span data-ttu-id="f9fa4-189">También es normalmente independiente del Entity Framework, con la excepción de que la sintaxis que se usa para las propiedades de navegación es única en el Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-189">It's also generally independent of the Entity Framework, with the exception that syntax you use for navigation properties is unique to the Entity Framework.</span></span>

<span data-ttu-id="f9fa4-190">En esta parte del tutorial, usará un control de `QueryExtender` para filtrar y ordenar los datos, y uno de los campos order by será una propiedad de navegación.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-190">In this part of the tutorial you'll use a `QueryExtender` control to filter and order data, and one of the order-by fields will be a navigation property.</span></span>

<span data-ttu-id="f9fa4-191">(Si prefiere utilizar código en lugar de marcado para extender las consultas generadas automáticamente por el control `EntityDataSource`, puede hacerlo controlando el evento `QueryCreated`.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-191">(If you prefer to use code instead of markup to extend the queries that are automatically generated by the `EntityDataSource` control, you can do that by handling the `QueryCreated` event.</span></span> <span data-ttu-id="f9fa4-192">Así es como el control `QueryExtender` amplía también `EntityDataSource` las consultas de control).</span><span class="sxs-lookup"><span data-stu-id="f9fa4-192">This is how the `QueryExtender` control extends `EntityDataSource` control queries also.)</span></span>

<span data-ttu-id="f9fa4-193">Abra la página *Courses. aspx* y debajo del marcado que agregó anteriormente, inserte el marcado siguiente para crear un encabezado, un cuadro de texto para escribir cadenas de búsqueda, un botón de búsqueda y un control de `EntityDataSource` enlazado al conjunto de entidades `Courses`.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-193">Open the *Courses.aspx* page, and below the markup you added previously, insert the following markup to create a heading, a text box for entering search strings, a search button, and an `EntityDataSource` control that's bound to the `Courses` entity set.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample6.aspx)]

<span data-ttu-id="f9fa4-194">Observe que la propiedad `Include` del control `EntityDataSource` está establecida en `Department`.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-194">Notice that the `EntityDataSource` control's `Include` property is set to `Department`.</span></span> <span data-ttu-id="f9fa4-195">En la base de datos, la tabla `Course` no contiene el nombre del Departamento; contiene una `DepartmentID` columna de clave externa.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-195">In the database, the `Course` table does not contain the department name; it contains a `DepartmentID` foreign key column.</span></span> <span data-ttu-id="f9fa4-196">Si estaba consultando la base de datos directamente, para obtener el nombre del Departamento junto con los datos del curso, tendría que combinar las tablas `Course` y `Department`.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-196">If you were querying the database directly, to get the department name along with course data, you would have to join the `Course` and `Department` tables.</span></span> <span data-ttu-id="f9fa4-197">Al establecer la propiedad `Include` en `Department`, se especifica que el Entity Framework debe hacer el trabajo de obtener la entidad de `Department` relacionada cuando obtiene una entidad de `Course`.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-197">By setting the `Include` property to `Department`, you specify that the Entity Framework should do the work of getting the related `Department` entity when it gets a `Course` entity.</span></span> <span data-ttu-id="f9fa4-198">A continuación, la entidad `Department` se almacena en la propiedad de navegación `Department` de la entidad `Course`.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-198">The `Department` entity is then stored in the `Department` navigation property of the `Course` entity.</span></span> <span data-ttu-id="f9fa4-199">(De forma predeterminada, la clase `SchoolEntities` generada por el diseñador de modelos de datos recupera los datos relacionados cuando es necesario y se ha enlazado el control de origen de datos a esa clase, por lo que no es necesario establecer la propiedad `Include`.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-199">(By default, the `SchoolEntities` class that was generated by the data model designer retrieves related data when it's needed, and you've bound the data source control to that class, so setting the `Include` property is not necessary.</span></span> <span data-ttu-id="f9fa4-200">Sin embargo, si se establece, se mejora el rendimiento de la página, ya que de lo contrario el Entity Framework realizar llamadas independientes a la base de datos para recuperar los datos de las entidades `Course` y de las entidades `Department` relacionadas).</span><span class="sxs-lookup"><span data-stu-id="f9fa4-200">However, setting it improves performance of the page, because otherwise the Entity Framework would make separate calls to the database to retrieve data for the `Course` entities and for the related `Department` entities.)</span></span>

<span data-ttu-id="f9fa4-201">Después del control de `EntityDataSource` que acaba de crear, inserte el marcado siguiente para crear un `QueryExtender` control que esté enlazado a ese control de `EntityDataSource`.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-201">After the `EntityDataSource` control you just created, insert the following markup to create a `QueryExtender` control that's bound to that `EntityDataSource` control.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample7.aspx)]

<span data-ttu-id="f9fa4-202">El elemento `SearchExpression` especifica que desea seleccionar los cursos cuyos títulos coinciden con el valor especificado en el cuadro de texto.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-202">The `SearchExpression` element specifies that you want to select courses whose titles match the value entered in the text box.</span></span> <span data-ttu-id="f9fa4-203">Solo se compararán tantos caracteres como se escriban en el cuadro de texto, porque la propiedad `SearchType` especifica `StartsWith`.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-203">Only as many characters as are entered in the text box will be compared, because the `SearchType` property specifies `StartsWith`.</span></span>

<span data-ttu-id="f9fa4-204">El elemento `OrderByExpression` especifica que el conjunto de resultados se ordenará por el título del curso dentro del nombre del Departamento.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-204">The `OrderByExpression` element specifies that the result set will be ordered by course title within department name.</span></span> <span data-ttu-id="f9fa4-205">Observe cómo se especifica el nombre de Departamento: `Department.Name`.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-205">Notice how department name is specified: `Department.Name`.</span></span> <span data-ttu-id="f9fa4-206">Dado que la asociación entre la entidad `Course` y la entidad `Department` es de uno a uno, la propiedad de navegación `Department` contiene una entidad `Department`.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-206">Because the association between the `Course` entity and the `Department` entity is one-to-one, the `Department` navigation property contains a `Department` entity.</span></span> <span data-ttu-id="f9fa4-207">(Si se trata de una relación de uno a varios, la propiedad incluiría una colección). Para obtener el nombre del Departamento, debe especificar la propiedad `Name` de la entidad `Department`.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-207">(If this were a one-to-many relationship, the property would contain a collection.) To get the department name, you must specify the `Name` property of the `Department` entity.</span></span>

<span data-ttu-id="f9fa4-208">Por último, agregue un control `GridView` para mostrar la lista de cursos:</span><span class="sxs-lookup"><span data-stu-id="f9fa4-208">Finally, add a `GridView` control to display the list of courses:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample8.aspx)]

<span data-ttu-id="f9fa4-209">La primera columna es un campo de plantilla que muestra el nombre del Departamento.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-209">The first column is a template field that displays the department name.</span></span> <span data-ttu-id="f9fa4-210">La expresión DataBinding especifica `Department.Name`, tal como se vio en el control `QueryExtender`.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-210">The databinding expression specifies `Department.Name`, just as you saw in the `QueryExtender` control.</span></span>

<span data-ttu-id="f9fa4-211">Ejecute la página.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-211">Run the page.</span></span> <span data-ttu-id="f9fa4-212">En la pantalla inicial se muestra una lista de todos los cursos en orden por departamento y, a continuación, por título del curso.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-212">The initial display shows a list of all courses in order by department and then by course title.</span></span>

<span data-ttu-id="f9fa4-213">[![Image11](the-entity-framework-and-aspnet-getting-started-part-3/_static/image30.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="f9fa4-213">[![Image11](the-entity-framework-and-aspnet-getting-started-part-3/_static/image30.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image29.png)</span></span>

<span data-ttu-id="f9fa4-214">Escriba una "m" y haga clic en **Buscar** para ver todos los cursos cuyos títulos empiecen por "m" (la búsqueda no distingue mayúsculas de minúsculas).</span><span class="sxs-lookup"><span data-stu-id="f9fa4-214">Enter an "m" and click **Search** to see all courses whose titles begin with "m" (the search is not case sensitive).</span></span>

<span data-ttu-id="f9fa4-215">[![Image12](the-entity-framework-and-aspnet-getting-started-part-3/_static/image32.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="f9fa4-215">[![Image12](the-entity-framework-and-aspnet-getting-started-part-3/_static/image32.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image31.png)</span></span>

## <a name="using-the-like-operator-to-filter-data"></a><span data-ttu-id="f9fa4-216">Usar el operador "like" para filtrar datos</span><span class="sxs-lookup"><span data-stu-id="f9fa4-216">Using the "Like" Operator to Filter Data</span></span>

<span data-ttu-id="f9fa4-217">Puede lograr un efecto similar al de los tipos de búsqueda `StartsWith`, `Contains`y `EndsWith` del control `QueryExtender` mediante el uso de un operador `Like` en la propiedad `EntityDataSource` del control `Where`.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-217">You can achieve an effect similar to the `QueryExtender` control's `StartsWith`, `Contains`, and `EndsWith` search types by using a `Like` operator in the `EntityDataSource` control's `Where` property.</span></span> <span data-ttu-id="f9fa4-218">En esta parte del tutorial, verá cómo usar el operador `Like` para buscar un estudiante por nombre.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-218">In this part of the tutorial, you'll see how to use the `Like` operator to search for a student by name.</span></span>

<span data-ttu-id="f9fa4-219">Abra *Students. aspx* en la vista **código fuente** .</span><span class="sxs-lookup"><span data-stu-id="f9fa4-219">Open *Students.aspx* in **Source** view.</span></span> <span data-ttu-id="f9fa4-220">Después del control de `GridView`, agregue el siguiente marcado:</span><span class="sxs-lookup"><span data-stu-id="f9fa4-220">After the `GridView` control, add the following markup:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample9.aspx)]

<span data-ttu-id="f9fa4-221">Este marcado es similar a lo que se ha visto anteriormente, excepto por el valor de la propiedad `Where`.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-221">This markup is similar to what you've seen earlier except for the `Where` property value.</span></span> <span data-ttu-id="f9fa4-222">La segunda parte de la expresión `Where` define una búsqueda de subcadena (`LIKE %FirstMidName% or LIKE %LastName%`) que busca el nombre y los apellidos de lo que se especifique en el cuadro de texto.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-222">The second part of the `Where` expression defines a substring search (`LIKE %FirstMidName% or LIKE %LastName%`) that searches both the first and last names for whatever is entered in the text box.</span></span>

<span data-ttu-id="f9fa4-223">Ejecute la página.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-223">Run the page.</span></span> <span data-ttu-id="f9fa4-224">Inicialmente, verá todos los alumnos porque el valor predeterminado del parámetro `StudentName` es "%".</span><span class="sxs-lookup"><span data-stu-id="f9fa4-224">Initially you see all of the students because the default value for the `StudentName` parameter is "%".</span></span>

<span data-ttu-id="f9fa4-225">[![Image13](the-entity-framework-and-aspnet-getting-started-part-3/_static/image34.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="f9fa4-225">[![Image13](the-entity-framework-and-aspnet-getting-started-part-3/_static/image34.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image33.png)</span></span>

<span data-ttu-id="f9fa4-226">Escriba la letra "g" en el cuadro de texto y haga clic en **Buscar**.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-226">Enter the letter "g" in the text box and click **Search**.</span></span> <span data-ttu-id="f9fa4-227">Verá una lista de estudiantes que tienen una "g" en el nombre o en el apellido.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-227">You see a list of students that have a "g" in either the first or last name.</span></span>

<span data-ttu-id="f9fa4-228">[![Image14](the-entity-framework-and-aspnet-getting-started-part-3/_static/image36.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="f9fa4-228">[![Image14](the-entity-framework-and-aspnet-getting-started-part-3/_static/image36.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image35.png)</span></span>

<span data-ttu-id="f9fa4-229">Ahora ha mostrado, actualizado, filtrado, ordenado y agrupado los datos de las tablas individuales.</span><span class="sxs-lookup"><span data-stu-id="f9fa4-229">You've now displayed, updated, filtered, ordered, and grouped data from individual tables.</span></span> <span data-ttu-id="f9fa4-230">En el siguiente tutorial, comenzará a trabajar con datos relacionados (escenarios principales-detalle).</span><span class="sxs-lookup"><span data-stu-id="f9fa4-230">In the next tutorial you'll begin to work with related data (master-detail scenarios).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="f9fa4-231">[Anterior](the-entity-framework-and-aspnet-getting-started-part-2.md)
> [Siguiente](the-entity-framework-and-aspnet-getting-started-part-4.md)</span><span class="sxs-lookup"><span data-stu-id="f9fa4-231">[Previous](the-entity-framework-and-aspnet-getting-started-part-2.md)
[Next](the-entity-framework-and-aspnet-getting-started-part-4.md)</span></span>
