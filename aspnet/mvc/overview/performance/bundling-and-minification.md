---
uid: mvc/overview/performance/bundling-and-minification
title: Unión y Minificación | Microsoft Docs
author: Rick-Anderson
description: Unión y minificación son dos técnicas puede usar en ASP.NET 4.5 para mejorar el tiempo de carga de solicitud. Unión y minificación mejora el tiempo de carga por reducin...
ms.author: riande
ms.date: 08/23/2012
ms.assetid: 5894dc13-5d45-4dad-8096-136499120f1d
msc.legacyurl: /mvc/overview/performance/bundling-and-minification
msc.type: authoredcontent
ms.openlocfilehash: 9e4a2a9fc56393ac816f25a1039b233aa8961608
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 04/09/2019
ms.locfileid: "59383842"
---
# <a name="bundling-and-minification"></a><span data-ttu-id="aff6c-104">Unión y minificación</span><span class="sxs-lookup"><span data-stu-id="aff6c-104">Bundling and Minification</span></span>

<span data-ttu-id="aff6c-105">by [Rick Anderson]((https://twitter.com/RickAndMSFT))</span><span class="sxs-lookup"><span data-stu-id="aff6c-105">by [Rick Anderson]((https://twitter.com/RickAndMSFT))</span></span>

> <span data-ttu-id="aff6c-106">Unión y minificación son dos técnicas puede usar en ASP.NET 4.5 para mejorar el tiempo de carga de solicitud.</span><span class="sxs-lookup"><span data-stu-id="aff6c-106">Bundling and minification are two techniques you can use in ASP.NET 4.5 to improve request load time.</span></span> <span data-ttu-id="aff6c-107">Unión y minificación mejora el tiempo de carga por lo que reduce el número de solicitudes al servidor y reducir el tamaño de los activos solicitados (por ejemplo, CSS y JavaScript).</span><span class="sxs-lookup"><span data-stu-id="aff6c-107">Bundling and minification improves load time by reducing the number of requests to the server and reducing the size of requested assets (such as CSS and JavaScript.)</span></span>


<span data-ttu-id="aff6c-108">La mayoría de los principales exploradores actuales limita el número de [conexiones simultáneas](http://www.browserscope.org/?category=network) por cada nombre de host a seis.</span><span class="sxs-lookup"><span data-stu-id="aff6c-108">Most of the current major browsers limit the number of [simultaneous connections](http://www.browserscope.org/?category=network) per each hostname to six.</span></span> <span data-ttu-id="aff6c-109">Esto significa que mientras se están procesando seis solicitudes, las solicitudes adicionales para los recursos en un host se pondrán en el explorador.</span><span class="sxs-lookup"><span data-stu-id="aff6c-109">That means that while six requests are being processed, additional requests for assets on a host will be queued by the browser.</span></span> <span data-ttu-id="aff6c-110">En la imagen siguiente, las fichas de red de herramientas de desarrollador F12 de Internet Explorer muestra el tiempo para los recursos requeridos por la vista About de una aplicación de ejemplo.</span><span class="sxs-lookup"><span data-stu-id="aff6c-110">In the image below, the IE F12 developer tools network tabs shows the timing for assets required by the About view of a sample application.</span></span>

![B/M](bundling-and-minification/_static/image1.png)

<span data-ttu-id="aff6c-112">Las barras grises muestran el tiempo que se pone en cola la solicitud mediante el explorador a la espera en el límite de conexiones de seis.</span><span class="sxs-lookup"><span data-stu-id="aff6c-112">The gray bars show the time the request is queued by the browser waiting on the six connection limit.</span></span> <span data-ttu-id="aff6c-113">La barra amarilla es el tiempo de solicitud hasta el primer byte, es decir, el tiempo necesario para enviar la solicitud y recibir la primera respuesta del servidor.</span><span class="sxs-lookup"><span data-stu-id="aff6c-113">The yellow bar is the request time to first byte, that is, the time taken to send the request and receive the first response from the server.</span></span> <span data-ttu-id="aff6c-114">Las barras azules muestran el tiempo dedicado a recibir los datos de respuesta del servidor.</span><span class="sxs-lookup"><span data-stu-id="aff6c-114">The blue bars show the time taken to receive the response data from the server.</span></span> <span data-ttu-id="aff6c-115">Puede hacer doble clic en un recurso para obtener información de tiempo detallada.</span><span class="sxs-lookup"><span data-stu-id="aff6c-115">You can double-click on an asset to get detailed timing information.</span></span> <span data-ttu-id="aff6c-116">Por ejemplo, la siguiente imagen muestra los detalles de tiempo para cargar el */Scripts/MyScripts/JavaScript6.js* archivo.</span><span class="sxs-lookup"><span data-stu-id="aff6c-116">For example, the following image shows the timing details for loading the */Scripts/MyScripts/JavaScript6.js* file.</span></span>

![](bundling-and-minification/_static/image2.png)

<span data-ttu-id="aff6c-117">La imagen anterior se muestra la **iniciar** eventos, que proporciona el tiempo que se puso en cola la solicitud porque el Explorador de limita el número de conexiones simultáneas.</span><span class="sxs-lookup"><span data-stu-id="aff6c-117">The preceding image shows the **Start** event, which gives the time the request was queued because of the browser limit the number of simultaneous connections.</span></span> <span data-ttu-id="aff6c-118">En este caso, la solicitud se puso en cola para 46 milisegundos de espera otra solicitud para completarse.</span><span class="sxs-lookup"><span data-stu-id="aff6c-118">In this case, the request was queued for 46 milliseconds waiting for another request to complete.</span></span>

## <a name="bundling"></a><span data-ttu-id="aff6c-119">La Unión</span><span class="sxs-lookup"><span data-stu-id="aff6c-119">Bundling</span></span>

<span data-ttu-id="aff6c-120">La unión es una nueva característica de ASP.NET 4.5 que facilita combinar o agrupar varios archivos en un único archivo.</span><span class="sxs-lookup"><span data-stu-id="aff6c-120">Bundling is a new feature in ASP.NET 4.5 that makes it easy to combine or bundle multiple files into a single file.</span></span> <span data-ttu-id="aff6c-121">Puede crear otros paquetes, CSS y JavaScript.</span><span class="sxs-lookup"><span data-stu-id="aff6c-121">You can create CSS, JavaScript and other bundles.</span></span> <span data-ttu-id="aff6c-122">Menos archivos significa menos solicitudes HTTP y que puede mejorar el rendimiento de carga de primera página.</span><span class="sxs-lookup"><span data-stu-id="aff6c-122">Fewer files means fewer HTTP requests and that can improve first page load performance.</span></span>

<span data-ttu-id="aff6c-123">La siguiente imagen muestra la misma vista de control de tiempo de la vista About mostrada anteriormente, pero esta vez con la unión y minificación habilitado.</span><span class="sxs-lookup"><span data-stu-id="aff6c-123">The following image shows the same timing view of the About view shown previously, but this time with bundling and minification enabled.</span></span>

![](bundling-and-minification/_static/image3.png)

## <a name="minification"></a><span data-ttu-id="aff6c-124">Minificación</span><span class="sxs-lookup"><span data-stu-id="aff6c-124">Minification</span></span>

<span data-ttu-id="aff6c-125">Realiza la minificación una variedad de optimizaciones de código diferente para las secuencias de comandos o css, como la eliminación de espacio en blanco innecesario y comentarios y acortar los nombres de variable a un carácter.</span><span class="sxs-lookup"><span data-stu-id="aff6c-125">Minification performs a variety of different code optimizations to scripts or css, such as removing unnecessary white space and comments and shortening variable names to one character.</span></span> <span data-ttu-id="aff6c-126">Considere la siguiente función de JavaScript.</span><span class="sxs-lookup"><span data-stu-id="aff6c-126">Consider the following JavaScript function.</span></span>

[!code-javascript[Main](bundling-and-minification/samples/sample1.js)]

<span data-ttu-id="aff6c-127">Después de la minificación, la función se reduce a lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="aff6c-127">After minification, the function is reduced to the following:</span></span>

[!code-javascript[Main](bundling-and-minification/samples/sample2.js)]

<span data-ttu-id="aff6c-128">Además de quitar los comentarios y espacios en blanco innecesarios, los siguientes parámetros y los nombres de variable se cambió el nombre (abreviado) como sigue:</span><span class="sxs-lookup"><span data-stu-id="aff6c-128">In addition to removing the comments and unnecessary whitespace, the following parameters and variable names were renamed (shortened) as follows:</span></span>

| **<span data-ttu-id="aff6c-129">Original</span><span class="sxs-lookup"><span data-stu-id="aff6c-129">Original</span></span>** | **<span data-ttu-id="aff6c-130">Se cambia el nombre</span><span class="sxs-lookup"><span data-stu-id="aff6c-130">Renamed</span></span>** |
| --- | --- |
| <span data-ttu-id="aff6c-131">imageTagAndImageID</span><span class="sxs-lookup"><span data-stu-id="aff6c-131">imageTagAndImageID</span></span> | <span data-ttu-id="aff6c-132">n</span><span class="sxs-lookup"><span data-stu-id="aff6c-132">n</span></span> |
| <span data-ttu-id="aff6c-133">imageContext</span><span class="sxs-lookup"><span data-stu-id="aff6c-133">imageContext</span></span> | <span data-ttu-id="aff6c-134">m</span><span class="sxs-lookup"><span data-stu-id="aff6c-134">t</span></span> |
| <span data-ttu-id="aff6c-135">imageElement</span><span class="sxs-lookup"><span data-stu-id="aff6c-135">imageElement</span></span> | <span data-ttu-id="aff6c-136">i</span><span class="sxs-lookup"><span data-stu-id="aff6c-136">i</span></span> |

## <a name="impact-of-bundling-and-minification"></a><span data-ttu-id="aff6c-137">Impacto de la unión y Minificación</span><span class="sxs-lookup"><span data-stu-id="aff6c-137">Impact of Bundling and Minification</span></span>

<span data-ttu-id="aff6c-138">En la tabla siguiente se muestra varias diferencias importantes entre el listado de todos los recursos individualmente y el uso de unión y minificación (B/M) en el programa de ejemplo.</span><span class="sxs-lookup"><span data-stu-id="aff6c-138">The following table shows several important differences between listing all the assets individually and using bundling and minification (B/M) in the sample program.</span></span>

|  | **<span data-ttu-id="aff6c-139">Uso de B/M</span><span class="sxs-lookup"><span data-stu-id="aff6c-139">Using B/M</span></span>** | **<span data-ttu-id="aff6c-140">Sin B/M</span><span class="sxs-lookup"><span data-stu-id="aff6c-140">Without B/M</span></span>** | **<span data-ttu-id="aff6c-141">Cambio</span><span class="sxs-lookup"><span data-stu-id="aff6c-141">Change</span></span>** |
| --- | --- | --- | --- |
| **<span data-ttu-id="aff6c-142">Solicitudes de archivos</span><span class="sxs-lookup"><span data-stu-id="aff6c-142">File Requests</span></span>** | <span data-ttu-id="aff6c-143">9</span><span class="sxs-lookup"><span data-stu-id="aff6c-143">9</span></span> | <span data-ttu-id="aff6c-144">34</span><span class="sxs-lookup"><span data-stu-id="aff6c-144">34</span></span> | <span data-ttu-id="aff6c-145">256%</span><span class="sxs-lookup"><span data-stu-id="aff6c-145">256%</span></span> |
| **<span data-ttu-id="aff6c-146">KB Sent</span><span class="sxs-lookup"><span data-stu-id="aff6c-146">KB Sent</span></span>** | <span data-ttu-id="aff6c-147">3.26</span><span class="sxs-lookup"><span data-stu-id="aff6c-147">3.26</span></span> | <span data-ttu-id="aff6c-148">11.92</span><span class="sxs-lookup"><span data-stu-id="aff6c-148">11.92</span></span> | <span data-ttu-id="aff6c-149">266%</span><span class="sxs-lookup"><span data-stu-id="aff6c-149">266%</span></span> |
| **<span data-ttu-id="aff6c-150">KB recibido</span><span class="sxs-lookup"><span data-stu-id="aff6c-150">KB Received</span></span>** | <span data-ttu-id="aff6c-151">388.51</span><span class="sxs-lookup"><span data-stu-id="aff6c-151">388.51</span></span> | <span data-ttu-id="aff6c-152">530</span><span class="sxs-lookup"><span data-stu-id="aff6c-152">530</span></span> | <span data-ttu-id="aff6c-153">36%</span><span class="sxs-lookup"><span data-stu-id="aff6c-153">36%</span></span> |
| **<span data-ttu-id="aff6c-154">Tiempo de carga</span><span class="sxs-lookup"><span data-stu-id="aff6c-154">Load Time</span></span>** | <span data-ttu-id="aff6c-155">510 MS</span><span class="sxs-lookup"><span data-stu-id="aff6c-155">510 MS</span></span> | <span data-ttu-id="aff6c-156">780 MS</span><span class="sxs-lookup"><span data-stu-id="aff6c-156">780 MS</span></span> | <span data-ttu-id="aff6c-157">53%</span><span class="sxs-lookup"><span data-stu-id="aff6c-157">53%</span></span> |

<span data-ttu-id="aff6c-158">Los bytes enviados tenían una reducción significativa con unión tal como los exploradores son bastante detallados con los encabezados HTTP que se aplican en las solicitudes.</span><span class="sxs-lookup"><span data-stu-id="aff6c-158">The bytes sent had a significant reduction with bundling as browsers are fairly verbose with the HTTP headers they apply on requests.</span></span> <span data-ttu-id="aff6c-159">La reducción de bytes recibidos no es tan grande porque los archivos más grandes (*Scripts\\jquery-ui-1.8.11.min.js* y *Scripts\\jquery 1.7.1.min.js*) ya se han minimizado .</span><span class="sxs-lookup"><span data-stu-id="aff6c-159">The received bytes reduction is not as large because the largest files (*Scripts\\jquery-ui-1.8.11.min.js* and *Scripts\\jquery-1.7.1.min.js*) are already minified.</span></span> <span data-ttu-id="aff6c-160">Nota: Los intervalos en el programa de ejemplo usa el [Fiddler](http://www.fiddler2.com/fiddler2/) herramienta para simular una red lenta.</span><span class="sxs-lookup"><span data-stu-id="aff6c-160">Note: The timings on the sample program used the [Fiddler](http://www.fiddler2.com/fiddler2/) tool to simulate a slow network.</span></span> <span data-ttu-id="aff6c-161">(Desde el Fiddler **reglas** menú, seleccione **rendimiento** , a continuación, **simular un módem**.)</span><span class="sxs-lookup"><span data-stu-id="aff6c-161">(From the Fiddler **Rules** menu, select **Performance** then **Simulate Modem Speeds**.)</span></span>

## <a name="debugging-bundled-and-minified-javascript"></a><span data-ttu-id="aff6c-162">Depuración y Minificado JavaScript</span><span class="sxs-lookup"><span data-stu-id="aff6c-162">Debugging Bundled and Minified JavaScript</span></span>

<span data-ttu-id="aff6c-163">Es fácil de depurar el código JavaScript en un entorno de desarrollo (donde el [elemento compilation](https://msdn.microsoft.com/library/s10awwz0.aspx) en el *Web.config* archivo se establece en `debug="true"` ) porque no se empaquetan los archivos JavaScript o han minimizado.</span><span class="sxs-lookup"><span data-stu-id="aff6c-163">It's easy to debug your JavaScript in a development environment (where the [compilation Element](https://msdn.microsoft.com/library/s10awwz0.aspx) in the *Web.config* file is set to `debug="true"` ) because the JavaScript files are not bundled or minified.</span></span> <span data-ttu-id="aff6c-164">También puede depurar una versión de lanzamiento donde los archivos JavaScript se agrupan y han minimizado.</span><span class="sxs-lookup"><span data-stu-id="aff6c-164">You can also debug a release build where your JavaScript files are bundled and minified.</span></span> <span data-ttu-id="aff6c-165">Con las herramientas de desarrollo F12 de IE, depurar una función de JavaScript incluida en un paquete minimizado mediante el siguiente método:</span><span class="sxs-lookup"><span data-stu-id="aff6c-165">Using the IE F12 developer tools, you debug a JavaScript function included in a minified bundle using the following approach:</span></span>

1. <span data-ttu-id="aff6c-166">Seleccione el **Script** pestaña y, a continuación, seleccione el **iniciar la depuración** botón.</span><span class="sxs-lookup"><span data-stu-id="aff6c-166">Select the **Script** tab and then select the **Start debugging** button.</span></span>
2. <span data-ttu-id="aff6c-167">Seleccione el paquete que contiene la función de JavaScript que desea depurar mediante el botón de recursos.</span><span class="sxs-lookup"><span data-stu-id="aff6c-167">Select the bundle containing the JavaScript function you want to debug using the assets button.</span></span>  
    ![](bundling-and-minification/_static/image4.png)
3. <span data-ttu-id="aff6c-168">Formato de JavaScript minimizado, seleccione el **botón configuración** ![](bundling-and-minification/_static/image5.png)y, a continuación, seleccione **formato JavaScript**.</span><span class="sxs-lookup"><span data-stu-id="aff6c-168">Format the minified JavaScript by selecting the **Configuration button** ![](bundling-and-minification/_static/image5.png), and then selecting **Format JavaScript**.</span></span>
4. <span data-ttu-id="aff6c-169">En el **secuencia de comandos de búsqueda** cuadro de entrada, seleccione el nombre de la función que desea depurar.</span><span class="sxs-lookup"><span data-stu-id="aff6c-169">In the **Search Script** input box, select the name of the function you want to debug.</span></span> <span data-ttu-id="aff6c-170">En la siguiente imagen, **AddAltToImg** se escribió en el **secuencia de comandos de búsqueda** cuadro de entrada.</span><span class="sxs-lookup"><span data-stu-id="aff6c-170">In the following image, **AddAltToImg** was entered in the **Search Script** input box.</span></span>  
    ![](bundling-and-minification/_static/image6.png)

<span data-ttu-id="aff6c-171">Para obtener más información sobre la depuración con herramientas de desarrollo F12, consulte el artículo de MSDN [mediante las herramientas de desarrollo F12 para depurar errores de JavaScript](https://msdn.microsoft.com/library/ie/gg699336(v=vs.85).aspx).</span><span class="sxs-lookup"><span data-stu-id="aff6c-171">For more information on debugging with the F12 developer tools, see the MSDN article [Using the F12 Developer Tools to Debug JavaScript Errors](https://msdn.microsoft.com/library/ie/gg699336(v=vs.85).aspx).</span></span>

## <a name="controlling-bundling-and-minification"></a><span data-ttu-id="aff6c-172">Control de unión y Minificación</span><span class="sxs-lookup"><span data-stu-id="aff6c-172">Controlling Bundling and Minification</span></span>

<span data-ttu-id="aff6c-173">Unión y minificación está habilitada o deshabilitada, establezca el valor del atributo de depuración en el [elemento compilation](https://msdn.microsoft.com/library/s10awwz0.aspx) en el *Web.config* archivo.</span><span class="sxs-lookup"><span data-stu-id="aff6c-173">Bundling and minification is enabled or disabled by setting the value of the debug attribute in the [compilation Element](https://msdn.microsoft.com/library/s10awwz0.aspx)  in the *Web.config* file.</span></span> <span data-ttu-id="aff6c-174">En el siguiente código XML, `debug` está establecida en true, la unión y minificación está deshabilitada.</span><span class="sxs-lookup"><span data-stu-id="aff6c-174">In the following XML, `debug` is set to true so bundling and minification is disabled.</span></span>

[!code-xml[Main](bundling-and-minification/samples/sample3.xml?highlight=2)]

<span data-ttu-id="aff6c-175">Para habilitar la unión y minificación, establezca el `debug` valor en "false".</span><span class="sxs-lookup"><span data-stu-id="aff6c-175">To enable bundling and minification, set the `debug` value to "false".</span></span> <span data-ttu-id="aff6c-176">Puede invalidar el *Web.config* establecer con el `EnableOptimizations` propiedad en el `BundleTable` clase.</span><span class="sxs-lookup"><span data-stu-id="aff6c-176">You can override the *Web.config* setting with the `EnableOptimizations` property on the `BundleTable` class.</span></span> <span data-ttu-id="aff6c-177">El código siguiente permite la unión y minificación y reemplaza cualquier configuración en el *Web.config* archivo.</span><span class="sxs-lookup"><span data-stu-id="aff6c-177">The following code enables bundling and minification and overrides any setting in the *Web.config* file.</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample4.cs?highlight=7)]

> [!NOTE]
> <span data-ttu-id="aff6c-178">A menos que `EnableOptimizations` es `true` o el atributo de depuración en el [elemento compilation](https://msdn.microsoft.com/library/s10awwz0.aspx) en el *Web.config* archivo se establece en `false`, archivos no se incluye o se han minimizado.</span><span class="sxs-lookup"><span data-stu-id="aff6c-178">Unless `EnableOptimizations` is `true` or the debug attribute in the [compilation Element](https://msdn.microsoft.com/library/s10awwz0.aspx)  in the *Web.config* file is set to `false`, files will not be bundled or minified.</span></span> <span data-ttu-id="aff6c-179">Además, no se usará la versión .min de archivos, seleccionará las versiones de depuración completa.</span><span class="sxs-lookup"><span data-stu-id="aff6c-179">Additionally, the .min version of files will not be used, the full debug versions will be selected.</span></span> `EnableOptimizations` <span data-ttu-id="aff6c-180">invalida el atributo de depuración en el [elemento compilation](https://msdn.microsoft.com/library/s10awwz0.aspx) en el *Web.config* archivo</span><span class="sxs-lookup"><span data-stu-id="aff6c-180">overrides the debug attribute in the [compilation Element](https://msdn.microsoft.com/library/s10awwz0.aspx)  in the *Web.config* file</span></span>


## <a name="using-bundling-and-minification-with-aspnet-web-forms-and-web-pages"></a><span data-ttu-id="aff6c-181">Uso de la unión y Minificación con formularios Web Forms ASP.NET y páginas Web</span><span class="sxs-lookup"><span data-stu-id="aff6c-181">Using Bundling and Minification with ASP.NET Web Forms and Web Pages</span></span>

- <span data-ttu-id="aff6c-182">Para las páginas Web, consulte la entrada de blog [adición de optimización Web a un sitio Web Pages](https://blogs.msdn.com/b/rickandy/archive/2012/08/15/adding-web-optimization-to-a-web-pages-site.aspx).</span><span class="sxs-lookup"><span data-stu-id="aff6c-182">For Web Pages, see the blog entry [Adding Web Optimization to a Web Pages Site](https://blogs.msdn.com/b/rickandy/archive/2012/08/15/adding-web-optimization-to-a-web-pages-site.aspx).</span></span>
- <span data-ttu-id="aff6c-183">Para los formularios Web Forms, vea la entrada de blog [agregar unión y Minificación para formularios Web Forms](https://blogs.msdn.com/b/rickandy/archive/2012/08/14/adding-bundling-and-minification-to-web-forms.aspx).</span><span class="sxs-lookup"><span data-stu-id="aff6c-183">For Web Forms, see the blog entry [Adding Bundling and Minification to Web Forms](https://blogs.msdn.com/b/rickandy/archive/2012/08/14/adding-bundling-and-minification-to-web-forms.aspx).</span></span>

## <a name="using-bundling-and-minification-with-aspnet-mvc"></a><span data-ttu-id="aff6c-184">Uso de la unión y Minificación con ASP.NET MVC</span><span class="sxs-lookup"><span data-stu-id="aff6c-184">Using Bundling and Minification with ASP.NET MVC</span></span>

<span data-ttu-id="aff6c-185">En esta sección se creará un ASP.NET MVC project para examinar la unión y minificación.</span><span class="sxs-lookup"><span data-stu-id="aff6c-185">In this section we will create an ASP.NET MVC project to examine bundling and minification.</span></span> <span data-ttu-id="aff6c-186">En primer lugar, cree un nuevo proyecto de ASP.NET MVC internet denominado **MvcBM** sin cambiar cualquiera de los valores predeterminados.</span><span class="sxs-lookup"><span data-stu-id="aff6c-186">First, create a new ASP.NET MVC internet project named **MvcBM** without changing any of the defaults.</span></span>

<span data-ttu-id="aff6c-187">Abra el *aplicación\\\_iniciar\\BundleConfig.cs* de archivo y examine el `RegisterBundles` método que se usa para crear, registrar y configurar paquetes.</span><span class="sxs-lookup"><span data-stu-id="aff6c-187">Open the *App\\\_Start\\BundleConfig.cs* file and examine the `RegisterBundles` method which is used to create, register and configure bundles.</span></span> <span data-ttu-id="aff6c-188">El código siguiente muestra una parte de la `RegisterBundles` método.</span><span class="sxs-lookup"><span data-stu-id="aff6c-188">The following code shows a portion of the `RegisterBundles` method.</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample5.cs)]

<span data-ttu-id="aff6c-189">El código anterior crea un nuevo paquete de JavaScript denominado *~/bundles/jquery* que incluye todos los controles (que es la depuración o se han minimizado pero no. *vsdoc*) archivos en el *Scripts* carpeta que coincide con la cadena comodín "~/Scripts/jquery-{version} .js".</span><span class="sxs-lookup"><span data-stu-id="aff6c-189">The  preceding code creates a new JavaScript bundle named *~/bundles/jquery* that includes all the appropriate (that is debug or minified but not .*vsdoc*) files in the *Scripts* folder that match the wild card string "~/Scripts/jquery-{version}.js".</span></span> <span data-ttu-id="aff6c-190">En ASP.NET MVC 4, esto significa que con una configuración de depuración, el archivo *jquery 1.7.1.js* se agregará a la agrupación.</span><span class="sxs-lookup"><span data-stu-id="aff6c-190">For ASP.NET MVC 4, this means with a debug configuration, the file *jquery-1.7.1.js* will be added to the bundle.</span></span> <span data-ttu-id="aff6c-191">En una configuración de lanzamiento, *jquery 1.7.1.min.js* se agregará.</span><span class="sxs-lookup"><span data-stu-id="aff6c-191">In a release configuration, *jquery-1.7.1.min.js* will be added.</span></span> <span data-ttu-id="aff6c-192">El marco de unión sigue varias convenciones comunes, como:</span><span class="sxs-lookup"><span data-stu-id="aff6c-192">The bundling framework follows several common conventions such as:</span></span>

- <span data-ttu-id="aff6c-193">Seleccionar archivo ".min" para la versión cuando *FileX.min.js* y *FileX.js* existe.</span><span class="sxs-lookup"><span data-stu-id="aff6c-193">Selecting ".min" file for release when *FileX.min.js* and *FileX.js* exist.</span></span>
- <span data-ttu-id="aff6c-194">Seleccionar la versión que no sea ".min" para la depuración.</span><span class="sxs-lookup"><span data-stu-id="aff6c-194">Selecting the non ".min" version for debug.</span></span>
- <span data-ttu-id="aff6c-195">Se omitirá "-vsdoc" archivos (como *jquery-1.7.1-vsdoc.js*), que solo son utilizados por IntelliSense.</span><span class="sxs-lookup"><span data-stu-id="aff6c-195">Ignoring "-vsdoc" files (such as *jquery-1.7.1-vsdoc.js*), which are used only by IntelliSense.</span></span>

<span data-ttu-id="aff6c-196">El `{version}` con caracteres comodín de coincidencia que se muestra arriba se usa para crear automáticamente un paquete jQuery con la versión adecuada de jQuery en su *Scripts* carpeta.</span><span class="sxs-lookup"><span data-stu-id="aff6c-196">The `{version}` wild card matching shown above is used to automatically create a jQuery bundle with the appropriate version of jQuery in your *Scripts* folder.</span></span> <span data-ttu-id="aff6c-197">En este ejemplo, el uso de un carácter comodín proporciona las siguientes ventajas:</span><span class="sxs-lookup"><span data-stu-id="aff6c-197">In this example, using a wild card provides the following benefits:</span></span>

- <span data-ttu-id="aff6c-198">Permite usar NuGet para actualizar a una versión más reciente de jQuery sin cambiar el código anterior de agrupación o referencias de jQuery en las páginas de vista.</span><span class="sxs-lookup"><span data-stu-id="aff6c-198">Allows you to use NuGet to update to a newer jQuery version without changing the preceding bundling code or jQuery references in your view pages.</span></span>
- <span data-ttu-id="aff6c-199">Selecciona la versión completa de las configuraciones de depuración y la versión ".min" versión crea automáticamente.</span><span class="sxs-lookup"><span data-stu-id="aff6c-199">Automatically selects the full version for debug configurations and the ".min" version for release builds.</span></span>

## <a name="using-a-cdn"></a><span data-ttu-id="aff6c-200">Usa una red CDN</span><span class="sxs-lookup"><span data-stu-id="aff6c-200">Using a CDN</span></span>

 <span data-ttu-id="aff6c-201">El código siguiente reemplaza la agrupación de jQuery local con un conjunto de jQuery CDN.</span><span class="sxs-lookup"><span data-stu-id="aff6c-201">The follow code replaces the local jQuery bundle with a CDN jQuery bundle.</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample6.cs)]

<span data-ttu-id="aff6c-202">En el código anterior, se solicitará jQuery desde la red CDN mientras que en la versión modo y la versión de depuración de jQuery se capturarán localmente en modo de depuración.</span><span class="sxs-lookup"><span data-stu-id="aff6c-202">In the code above, jQuery will be requested from the CDN while in release mode and the debug version of jQuery will be fetched locally in debug mode.</span></span> <span data-ttu-id="aff6c-203">Cuando se usa una red CDN, debe tener un mecanismo de reserva en caso de que se produce un error en la solicitud de la red CDN.</span><span class="sxs-lookup"><span data-stu-id="aff6c-203">When using a CDN, you should have a fallback mechanism in case the CDN request fails.</span></span> <span data-ttu-id="aff6c-204">El marcado siguiente fragmento del final de la secuencia de comandos muestra del archivo de diseño agregó a la solicitud de jQuery debe el error de la red CDN.</span><span class="sxs-lookup"><span data-stu-id="aff6c-204">The following markup fragment from the end of the layout file shows script added to request jQuery should the CDN fail.</span></span>

[!code-cshtml[Main](bundling-and-minification/samples/sample7.cshtml?highlight=5-13)]

## <a name="creating-a-bundle"></a><span data-ttu-id="aff6c-205">Creación de un paquete</span><span class="sxs-lookup"><span data-stu-id="aff6c-205">Creating a Bundle</span></span>

<span data-ttu-id="aff6c-206">El [agrupación](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) clase `Include` método toma una matriz de cadenas, donde cada cadena es una ruta de acceso virtual al recurso.</span><span class="sxs-lookup"><span data-stu-id="aff6c-206">The [Bundle](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) class `Include` method takes an array of strings, where each string is a virtual path to resource.</span></span> <span data-ttu-id="aff6c-207">El siguiente código de la `RegisterBundles` método en el *aplicación\\\_iniciar\\BundleConfig.cs* archivo muestra cómo varios archivos se agregan a una agrupación:</span><span class="sxs-lookup"><span data-stu-id="aff6c-207">The following code from the `RegisterBundles` method in the *App\\\_Start\\BundleConfig.cs* file shows how multiple files are added to a bundle:</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample8.cs)]

<span data-ttu-id="aff6c-208">El [agrupación](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) clase `IncludeDirectory` método se proporciona para agregar todos los archivos en un directorio (y, opcionalmente, todos los subdirectorios) que coinciden con un patrón de búsqueda.</span><span class="sxs-lookup"><span data-stu-id="aff6c-208">The [Bundle](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) class `IncludeDirectory` method is provided to add all the files in a directory (and optionally all subdirectories) which match a search pattern.</span></span> <span data-ttu-id="aff6c-209">El [agrupación](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) clase `IncludeDirectory` API se muestra a continuación:</span><span class="sxs-lookup"><span data-stu-id="aff6c-209">The [Bundle](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) class `IncludeDirectory` API is shown below:</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample9.cs)]

<span data-ttu-id="aff6c-210">Se hace referencia a agrupaciones en vistas mediante el método Render (`Styles.Render` para CSS y `Scripts.Render` para JavaScript).</span><span class="sxs-lookup"><span data-stu-id="aff6c-210">Bundles are referenced in views using the Render method, (`Styles.Render` for CSS and `Scripts.Render` for JavaScript).</span></span> <span data-ttu-id="aff6c-211">El siguiente marcado de la *vistas\\Shared\\\_Layout.cshtml* archivo muestra cómo hacer referencia a las vistas de proyecto predeterminada ASP.NET internet agrupaciones CSS y JavaScript.</span><span class="sxs-lookup"><span data-stu-id="aff6c-211">The following markup from the *Views\\Shared\\\_Layout.cshtml* file shows how the default ASP.NET internet project views reference CSS and JavaScript bundles.</span></span>

[!code-cshtml[Main](bundling-and-minification/samples/sample10.cshtml?highlight=5-6,11)]

<span data-ttu-id="aff6c-212">Tenga en cuenta los métodos de representación toma una matriz de cadenas, por lo que puede agregar varios paquetes en una línea de código.</span><span class="sxs-lookup"><span data-stu-id="aff6c-212">Notice the Render methods takes an array of strings, so you can add multiple bundles in one line of code.</span></span> <span data-ttu-id="aff6c-213">Por lo general, deseará utilizar los métodos de representación que creación el código HTML necesario para hacer referencia a los activos.</span><span class="sxs-lookup"><span data-stu-id="aff6c-213">You will generally want to use the Render methods which create the necessary HTML to reference the asset.</span></span> <span data-ttu-id="aff6c-214">Puede usar el `Url` método para generar la dirección URL al recurso sin el marcado necesario para hacer referencia al asset.</span><span class="sxs-lookup"><span data-stu-id="aff6c-214">You can use the `Url` method to generate the URL to the asset without the markup needed to reference the asset.</span></span> <span data-ttu-id="aff6c-215">Imagine que quiere usar el nuevo HTML5 [async](http://www.whatwg.org/specs/web-apps/current-work/#attr-script-async) atributo.</span><span class="sxs-lookup"><span data-stu-id="aff6c-215">Suppose you wanted to use the new HTML5 [async](http://www.whatwg.org/specs/web-apps/current-work/#attr-script-async) attribute.</span></span> <span data-ttu-id="aff6c-216">El código siguiente muestra cómo hacer referencia a modernizr utilizando el `Url` método.</span><span class="sxs-lookup"><span data-stu-id="aff6c-216">The following code shows how to reference modernizr using the `Url` method.</span></span>

[!code-cshtml[Main](bundling-and-minification/samples/sample11.cshtml?highlight=11)]

## <a name="using-the--wildcard-character-to-select-files"></a><span data-ttu-id="aff6c-217">Mediante la "\*" carácter comodín para seleccionar archivos</span><span class="sxs-lookup"><span data-stu-id="aff6c-217">Using the "\*" Wildcard Character to Select Files</span></span>

<span data-ttu-id="aff6c-218">La ruta de acceso virtual especificada en el `Include` método y la búsqueda de patrones en el `IncludeDirectory` método puede aceptar una "\*" carácter comodín como prefijo o sufijo que en el último segmento de ruta de acceso.</span><span class="sxs-lookup"><span data-stu-id="aff6c-218">The virtual path specified in the `Include` method and the search pattern in the `IncludeDirectory` method can accept one "\*" wildcard character as a prefix or suffix to in the last path segment.</span></span> <span data-ttu-id="aff6c-219">La cadena de búsqueda distingue mayúsculas de minúsculas.</span><span class="sxs-lookup"><span data-stu-id="aff6c-219">The search string is case insensitive.</span></span> <span data-ttu-id="aff6c-220">El `IncludeDirectory` método tiene la opción de buscar en los subdirectorios.</span><span class="sxs-lookup"><span data-stu-id="aff6c-220">The `IncludeDirectory` method has the option of searching subdirectories.</span></span>

<span data-ttu-id="aff6c-221">Considere la posibilidad de un proyecto con los siguientes archivos JavaScript:</span><span class="sxs-lookup"><span data-stu-id="aff6c-221">Consider a project with the following JavaScript files:</span></span>

- *<span data-ttu-id="aff6c-222">Scripts\\Common\\AddAltToImg.js</span><span class="sxs-lookup"><span data-stu-id="aff6c-222">Scripts\\Common\\AddAltToImg.js</span></span>*
- *<span data-ttu-id="aff6c-223">Scripts\\Common\\ToggleDiv.js</span><span class="sxs-lookup"><span data-stu-id="aff6c-223">Scripts\\Common\\ToggleDiv.js</span></span>*
- *<span data-ttu-id="aff6c-224">Scripts\\Common\\ToggleImg.js</span><span class="sxs-lookup"><span data-stu-id="aff6c-224">Scripts\\Common\\ToggleImg.js</span></span>*
- *<span data-ttu-id="aff6c-225">Scripts\\Common\\Sub1\\ToggleLinks.js</span><span class="sxs-lookup"><span data-stu-id="aff6c-225">Scripts\\Common\\Sub1\\ToggleLinks.js</span></span>*

![imag dir](bundling-and-minification/_static/image7.png)

<span data-ttu-id="aff6c-227">La siguiente tabla muestra los archivos agregados a una agrupación mediante el carácter comodín, como se muestra:</span><span class="sxs-lookup"><span data-stu-id="aff6c-227">The following table shows the files added to a bundle using the wildcard as shown:</span></span>

| **<span data-ttu-id="aff6c-228">Llamar a</span><span class="sxs-lookup"><span data-stu-id="aff6c-228">Call</span></span>** | **<span data-ttu-id="aff6c-229">Archivos agregados o una excepción</span><span class="sxs-lookup"><span data-stu-id="aff6c-229">Files Added or Exception Raised</span></span>** |
| --- | --- |
| <span data-ttu-id="aff6c-230">Include("~/Scripts/Common/\*.js")</span><span class="sxs-lookup"><span data-stu-id="aff6c-230">Include("~/Scripts/Common/\*.js")</span></span> | <span data-ttu-id="aff6c-231">*AddAltToImg.js*, *ToggleDiv.js*, *ToggleImg.js*</span><span class="sxs-lookup"><span data-stu-id="aff6c-231">*AddAltToImg.js*, *ToggleDiv.js*, *ToggleImg.js*</span></span> |
| <span data-ttu-id="aff6c-232">Include("~/Scripts/Common/T\*.js")</span><span class="sxs-lookup"><span data-stu-id="aff6c-232">Include("~/Scripts/Common/T\*.js")</span></span> | <span data-ttu-id="aff6c-233">Excepción de patrón no válido.</span><span class="sxs-lookup"><span data-stu-id="aff6c-233">Invalid pattern exception.</span></span> <span data-ttu-id="aff6c-234">Solo se permite el carácter comodín en el prefijo o sufijo.</span><span class="sxs-lookup"><span data-stu-id="aff6c-234">The wildcard character is only allowed on the prefix or suffix.</span></span> |
| <span data-ttu-id="aff6c-235">Include("~/Scripts/Common/\*og.\*")</span><span class="sxs-lookup"><span data-stu-id="aff6c-235">Include("~/Scripts/Common/\*og.\*")</span></span> | <span data-ttu-id="aff6c-236">Excepción de patrón no válido.</span><span class="sxs-lookup"><span data-stu-id="aff6c-236">Invalid pattern exception.</span></span> <span data-ttu-id="aff6c-237">Se permite sólo un carácter comodín.</span><span class="sxs-lookup"><span data-stu-id="aff6c-237">Only one wildcard character is allowed.</span></span> |
| <span data-ttu-id="aff6c-238">Incluir ("~/Scripts/Common/T\*")</span><span class="sxs-lookup"><span data-stu-id="aff6c-238">Include("~/Scripts/Common/T\*")</span></span> | <span data-ttu-id="aff6c-239">*ToggleDiv.js*, *ToggleImg.js*</span><span class="sxs-lookup"><span data-stu-id="aff6c-239">*ToggleDiv.js*, *ToggleImg.js*</span></span> |
| <span data-ttu-id="aff6c-240">Include("~/Scripts/Common/\*")</span><span class="sxs-lookup"><span data-stu-id="aff6c-240">Include("~/Scripts/Common/\*")</span></span> | <span data-ttu-id="aff6c-241">Excepción de patrón no válido.</span><span class="sxs-lookup"><span data-stu-id="aff6c-241">Invalid pattern exception.</span></span> <span data-ttu-id="aff6c-242">Un segmento comodín puro no es válido.</span><span class="sxs-lookup"><span data-stu-id="aff6c-242">A pure wildcard segment is not valid.</span></span> |
| <span data-ttu-id="aff6c-243">IncludeDirectory("~/Scripts/Common", "T\*")</span><span class="sxs-lookup"><span data-stu-id="aff6c-243">IncludeDirectory("~/Scripts/Common", "T\*")</span></span> | <span data-ttu-id="aff6c-244">*ToggleDiv.js*, *ToggleImg.js*</span><span class="sxs-lookup"><span data-stu-id="aff6c-244">*ToggleDiv.js*, *ToggleImg.js*</span></span> |
| <span data-ttu-id="aff6c-245">IncludeDirectory("~/Scripts/Common", "T\*", true)</span><span class="sxs-lookup"><span data-stu-id="aff6c-245">IncludeDirectory("~/Scripts/Common", "T\*", true)</span></span> | <span data-ttu-id="aff6c-246">*ToggleDiv.js*, *ToggleImg.js*, *ToggleLinks.js*</span><span class="sxs-lookup"><span data-stu-id="aff6c-246">*ToggleDiv.js*, *ToggleImg.js*, *ToggleLinks.js*</span></span> |

<span data-ttu-id="aff6c-247">Agregar explícitamente cada archivo a una agrupación es normalmente el preferido a través de la carga de comodín de archivos por las razones siguientes:</span><span class="sxs-lookup"><span data-stu-id="aff6c-247">Explicitly adding each file to a bundle is generally the preferred over wildcard loading of files for the following reasons:</span></span>

- <span data-ttu-id="aff6c-248">Agregar secuencias de comandos con valores predeterminados de comodín para cargarlos en orden alfabético, que normalmente no es lo que desea.</span><span class="sxs-lookup"><span data-stu-id="aff6c-248">Adding scripts by wildcard defaults to loading them in alphabetical order, which is typically not what you want.</span></span> <span data-ttu-id="aff6c-249">Con frecuencia, los archivos CSS y JavaScript deben agregarse en un orden específico (no alfabéticos).</span><span class="sxs-lookup"><span data-stu-id="aff6c-249">CSS and JavaScript files frequently need to be added in a specific (non-alphabetic) order.</span></span> <span data-ttu-id="aff6c-250">Puede mitigar este riesgo mediante la adición de un personalizado [IBundleOrderer](https://msdn.microsoft.com/library/system.web.optimization.ibundleorderer(VS.110).aspx) implementación, pero agregar explícitamente cada archivo es menos propenso a errores.</span><span class="sxs-lookup"><span data-stu-id="aff6c-250">You can mitigate this risk by adding a custom [IBundleOrderer](https://msdn.microsoft.com/library/system.web.optimization.ibundleorderer(VS.110).aspx) implementation, but explicitly adding each file is less error prone.</span></span> <span data-ttu-id="aff6c-251">Por ejemplo, puede agregar nuevos recursos en una carpeta en el futuro que podrían requerir que se va a modificar su [IBundleOrderer](https://msdn.microsoft.com/library/system.web.optimization.ibundleorderer(VS.110).aspx) implementación.</span><span class="sxs-lookup"><span data-stu-id="aff6c-251">For example, you might add new assets to a folder in the future which might require you to modify your [IBundleOrderer](https://msdn.microsoft.com/library/system.web.optimization.ibundleorderer(VS.110).aspx) implementation.</span></span>
- <span data-ttu-id="aff6c-252">Ver archivos específicos agregados a un directorio mediante la carga de carácter comodín pueden incluirse en todas las vistas que hacen referencia a ese paquete.</span><span class="sxs-lookup"><span data-stu-id="aff6c-252">View specific files added to a directory using wild card loading can be included in all views referencing that bundle.</span></span> <span data-ttu-id="aff6c-253">Si la secuencia de comandos específicos de la vista se agrega a una agrupación, es posible que obtenga un error de JavaScript en otras vistas que hacen referencia a la agrupación.</span><span class="sxs-lookup"><span data-stu-id="aff6c-253">If the view specific script is added to a bundle, you may get a JavaScript error on other views that reference the bundle.</span></span>
- <span data-ttu-id="aff6c-254">Como resultado archivos CSS que importan otros archivos en los archivos importados cargados dos veces.</span><span class="sxs-lookup"><span data-stu-id="aff6c-254">CSS files that import other files result in the imported files loaded twice.</span></span> <span data-ttu-id="aff6c-255">Por ejemplo, el código siguiente crea un paquete con la mayoría de los archivos CSS de jQuery UI tema cargados dos veces.</span><span class="sxs-lookup"><span data-stu-id="aff6c-255">For example, the following code creates a bundle with most of the jQuery UI theme CSS files loaded twice.</span></span> 

    [!code-csharp[Main](bundling-and-minification/samples/sample12.cs)]

  <span data-ttu-id="aff6c-256">El selector de carácter comodín "\*.css" pone en cada archivo CSS en la carpeta, incluido el *contenido\\temas\\base\\jquery.ui.all.css* archivo.</span><span class="sxs-lookup"><span data-stu-id="aff6c-256">The wild card selector "\*.css" brings in each CSS file in the folder, including the *Content\\themes\\base\\jquery.ui.all.css* file.</span></span> <span data-ttu-id="aff6c-257">El *jquery.ui.all.css* archivo importa otros archivos CSS.</span><span class="sxs-lookup"><span data-stu-id="aff6c-257">The *jquery.ui.all.css* file imports other CSS files.</span></span>

## <a name="bundle-caching"></a><span data-ttu-id="aff6c-258">Lote de almacenamiento en caché</span><span class="sxs-lookup"><span data-stu-id="aff6c-258">Bundle Caching</span></span>

<span data-ttu-id="aff6c-259">Agrupaciones establecer el encabezado Expires de HTTP un año de cuando se crea el paquete.</span><span class="sxs-lookup"><span data-stu-id="aff6c-259">Bundles set the HTTP Expires Header one year from when the bundle is created.</span></span> <span data-ttu-id="aff6c-260">Si navega a una página consultada anteriormente, se muestra en Fiddler IE no realizar una solicitud condicional para la agrupación, es decir, hay ninguna solicitud HTTP GET desde Internet Explorer para los paquetes y no hay respuestas HTTP 304 desde el servidor.</span><span class="sxs-lookup"><span data-stu-id="aff6c-260">If you navigate to a previously viewed page, Fiddler shows IE does not make a conditional request for the bundle, that is, there are no HTTP GET requests from IE for the bundles and no HTTP 304 responses from the server.</span></span> <span data-ttu-id="aff6c-261">Puede forzar que Internet Explorer para realizar una solicitud condicional para cada agrupación con la tecla F5 (lo que conlleva una respuesta HTTP 304 por cada paquete).</span><span class="sxs-lookup"><span data-stu-id="aff6c-261">You can force IE to make a conditional request for each bundle with the F5 key (resulting in a HTTP 304 response for each bundle).</span></span> <span data-ttu-id="aff6c-262">Puede forzar una actualización completa mediante el uso de ^ F5 (lo que conlleva una respuesta HTTP 200 por cada paquete).</span><span class="sxs-lookup"><span data-stu-id="aff6c-262">You can force a full refresh by using ^F5 (resulting in a HTTP 200 response for each bundle.)</span></span>

<span data-ttu-id="aff6c-263">La siguiente imagen muestra la **Caching** ficha del panel de respuesta de Fiddler:</span><span class="sxs-lookup"><span data-stu-id="aff6c-263">The following image shows the **Caching** tab of the Fiddler response pane:</span></span>

![imagen de almacenamiento en caché de Fiddler](bundling-and-minification/_static/image8.png)

<span data-ttu-id="aff6c-265">La solicitud</span><span class="sxs-lookup"><span data-stu-id="aff6c-265">The request</span></span>   
`http://localhost/MvcBM_time/bundles/AllMyScripts?v=r0sLDicvP58AIXN_mc3QdyVvVj5euZNzdsa2N1PKvb81`  
 <span data-ttu-id="aff6c-266">es para la agrupación **AllMyScripts** y contiene un par de cadena de consulta **v = r0sLDicvP58AIXN\\\_mc3QdyVvVj5euZNzdsa2N1PKvb81**.</span><span class="sxs-lookup"><span data-stu-id="aff6c-266">is for the bundle **AllMyScripts** and contains a query string pair **v=r0sLDicvP58AIXN\\\_mc3QdyVvVj5euZNzdsa2N1PKvb81**.</span></span> <span data-ttu-id="aff6c-267">La cadena de consulta **v** tiene un valor que es un identificador único usado para almacenar en caché del token.</span><span class="sxs-lookup"><span data-stu-id="aff6c-267">The query string **v** has a value token that is a unique identifier used for caching.</span></span> <span data-ttu-id="aff6c-268">Siempre que el paquete no cambia, la aplicación de ASP.NET solicitará el **AllMyScripts** usando este token de lote.</span><span class="sxs-lookup"><span data-stu-id="aff6c-268">As long as the bundle doesn't change, the ASP.NET application will request the **AllMyScripts** bundle using this token.</span></span> <span data-ttu-id="aff6c-269">Si cambia cualquier archivo en el paquete, el marco de optimización de ASP.NET generará un nuevo token, lo que garantiza que las solicitudes del explorador para la agrupación obtendrán el paquete más reciente.</span><span class="sxs-lookup"><span data-stu-id="aff6c-269">If any file in the bundle changes, the ASP.NET optimization framework will generate a new token, guaranteeing that browser requests for the bundle will get the latest bundle.</span></span>

<span data-ttu-id="aff6c-270">Si ejecuta las herramientas de desarrollo F12 de Internet Explorer 9 y navegar a una página previamente cargada, IE incorrectamente muestra solicitudes GET condicionales realizadas en cada lote y el servidor devuelve HTTP 304.</span><span class="sxs-lookup"><span data-stu-id="aff6c-270">If you run the IE9 F12 developer tools and navigate to a previously loaded page, IE incorrectly shows conditional GET requests made to each bundle and the server returning HTTP 304.</span></span> <span data-ttu-id="aff6c-271">Puede leer por qué IE9 tiene problemas para determinar si se realizó una solicitud condicional en la entrada de blog [uso de CDN y Expires para mejorar el rendimiento del sitio Web](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span><span class="sxs-lookup"><span data-stu-id="aff6c-271">You can read why IE9 has problems determining if a conditional request was made in the blog entry [Using CDNs and Expires to Improve Web Site Performance](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span></span>

## <a name="less-coffeescript-scss-sass-bundling"></a><span data-ttu-id="aff6c-272">LESS, CoffeeScript, SCSS, Sass, la unión.</span><span class="sxs-lookup"><span data-stu-id="aff6c-272">LESS, CoffeeScript, SCSS, Sass Bundling.</span></span>

<span data-ttu-id="aff6c-273">El marco de trabajo de unión y minificación proporciona un mecanismo para procesar lenguajes intermedios como [SCSS](http://sass-lang.com/), [Sass](http://sass-lang.com/), [menos](http://www.dotlesscss.org/) o [Coffeescript ](http://coffeescript.org/)y aplicar transformaciones, como la minificación a la agrupación resultante.</span><span class="sxs-lookup"><span data-stu-id="aff6c-273">The bundling and minification framework provides a mechanism to process intermediate languages such as [SCSS](http://sass-lang.com/), [Sass](http://sass-lang.com/), [LESS](http://www.dotlesscss.org/) or [Coffeescript](http://coffeescript.org/), and apply transforms such as minification to the resulting bundle.</span></span> <span data-ttu-id="aff6c-274">Por ejemplo, para agregar [.less](http://www.dotlesscss.org/) archivos al proyecto de MVC 4:</span><span class="sxs-lookup"><span data-stu-id="aff6c-274">For example, to add [.less](http://www.dotlesscss.org/) files to your MVC 4 project:</span></span>

1. <span data-ttu-id="aff6c-275">Cree una carpeta para la menor cantidad de contenido.</span><span class="sxs-lookup"><span data-stu-id="aff6c-275">Create a folder for your LESS content.</span></span> <span data-ttu-id="aff6c-276">En el ejemplo siguiente se usa el *contenido\\MyLess* carpeta.</span><span class="sxs-lookup"><span data-stu-id="aff6c-276">The following example uses the *Content\\MyLess* folder.</span></span>
2. <span data-ttu-id="aff6c-277">Agregar el [.less](http://www.dotlesscss.org/) paquete NuGet **dotless** al proyecto.</span><span class="sxs-lookup"><span data-stu-id="aff6c-277">Add the [.less](http://www.dotlesscss.org/) NuGet package **dotless** to your project.</span></span>  
    ![Instalación de NuGet dotless](bundling-and-minification/_static/image9.png)
3. <span data-ttu-id="aff6c-279">Agregue una clase que implementa el [IBundleTransform](https://msdn.microsoft.com/library/system.web.optimization.ibundletransform(VS.110).aspx) interfaz.</span><span class="sxs-lookup"><span data-stu-id="aff6c-279">Add a class that implements the [IBundleTransform](https://msdn.microsoft.com/library/system.web.optimization.ibundletransform(VS.110).aspx) interface.</span></span> <span data-ttu-id="aff6c-280">Para la transformación .less, agregue el código siguiente al proyecto.</span><span class="sxs-lookup"><span data-stu-id="aff6c-280">For the .less transform, add the following code to your project.</span></span>

    [!code-csharp[Main](bundling-and-minification/samples/sample13.cs)]
4. <span data-ttu-id="aff6c-281">Crear un paquete de menos archivos con la `LessTransform` y [CssMinify](https://msdn.microsoft.com/library/system.web.optimization.cssminify(VS.110).aspx) transformar.</span><span class="sxs-lookup"><span data-stu-id="aff6c-281">Create a bundle of LESS files with the `LessTransform` and the [CssMinify](https://msdn.microsoft.com/library/system.web.optimization.cssminify(VS.110).aspx) transform.</span></span> <span data-ttu-id="aff6c-282">Agregue el código siguiente a la `RegisterBundles` método en el *aplicación\\_iniciar\\BundleConfig.cs* archivo.</span><span class="sxs-lookup"><span data-stu-id="aff6c-282">Add the following code to the `RegisterBundles` method in the *App\\_Start\\BundleConfig.cs* file.</span></span>

    [!code-csharp[Main](bundling-and-minification/samples/sample14.cs)]
5. <span data-ttu-id="aff6c-283">Agregue el código siguiente a todas las vistas que se hace referencia a la agrupación de menos.</span><span class="sxs-lookup"><span data-stu-id="aff6c-283">Add the following code to any views which references the LESS bundle.</span></span>

    [!code-cshtml[Main](bundling-and-minification/samples/sample15.cshtml)]

## <a name="bundle-considerations"></a><span data-ttu-id="aff6c-284">Consideraciones sobre la agrupación</span><span class="sxs-lookup"><span data-stu-id="aff6c-284">Bundle Considerations</span></span>

<span data-ttu-id="aff6c-285">Es una buena convención deben seguir al crear agrupaciones incluir "agrupar" como prefijo en el nombre del lote.</span><span class="sxs-lookup"><span data-stu-id="aff6c-285">A good convention to follow when creating bundles is to include "bundle" as a prefix in the bundle name.</span></span> <span data-ttu-id="aff6c-286">Esto evitará que una posible [conflicto de enrutamiento](https://forums.asp.net/post/5012037.aspx).</span><span class="sxs-lookup"><span data-stu-id="aff6c-286">This will prevent a possible [routing conflict](https://forums.asp.net/post/5012037.aspx).</span></span>

<span data-ttu-id="aff6c-287">Una vez que actualice un archivo de un paquete, se genera un nuevo token para el parámetro de cadena de consulta de agrupación y el paquete completo debe descargarse la próxima vez que un cliente solicita una página que contiene el paquete.</span><span class="sxs-lookup"><span data-stu-id="aff6c-287">Once you update one file in a bundle, a new token is generated for the bundle query string parameter and the full bundle must be downloaded the next time a client requests a page containing the bundle.</span></span> <span data-ttu-id="aff6c-288">En el marcado tradicional donde se muestra cada activo de forma individual, se descargarían solo el archivo modificado.</span><span class="sxs-lookup"><span data-stu-id="aff6c-288">In traditional markup where each asset is listed individually, only the changed file would be downloaded.</span></span> <span data-ttu-id="aff6c-289">Los activos que cambian con frecuencia no pueden ser buenos candidatos para la unión.</span><span class="sxs-lookup"><span data-stu-id="aff6c-289">Assets that change frequently may not be good candidates for bundling.</span></span>

<span data-ttu-id="aff6c-290">Unión y minificación principalmente mejoran el tiempo de carga de solicitud de primera página.</span><span class="sxs-lookup"><span data-stu-id="aff6c-290">Bundling and minification primarily improve the first page request load time.</span></span> <span data-ttu-id="aff6c-291">Una vez que se ha solicitado una página Web, el explorador almacena en caché los activos (JavaScript, CSS e imágenes) por lo que la unión y minificación no proporcionan ningún aumento del rendimiento cuando se solicita la misma página o páginas en el mismo sitio que solicita los mismos recursos.</span><span class="sxs-lookup"><span data-stu-id="aff6c-291">Once a webpage has been requested, the browser caches the assets (JavaScript, CSS and images) so bundling and minification won't provide any performance boost when requesting the same page, or pages on the same site requesting the same assets.</span></span> <span data-ttu-id="aff6c-292">Si no establece la expira el encabezado correctamente en los recursos y no use unión y minificación, la heurística de actualización de los exploradores marcará los recursos obsoletos después de unos días y el explorador requiere una solicitud de validación para cada recurso.</span><span class="sxs-lookup"><span data-stu-id="aff6c-292">If you don't set the expires header correctly on your assets, and you don't use bundling and minification, the browsers freshness heuristics will mark the assets stale after a few days and the browser will require a validation request for each asset.</span></span> <span data-ttu-id="aff6c-293">En este caso, unión y minificación proporcionan un aumento del rendimiento tras la primera solicitud de página.</span><span class="sxs-lookup"><span data-stu-id="aff6c-293">In this case, bundling and minification provide a performance increase after the first page request.</span></span> <span data-ttu-id="aff6c-294">Para obtener más información, consulte el blog de [uso de CDN y Expires para mejorar el rendimiento del sitio Web](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span><span class="sxs-lookup"><span data-stu-id="aff6c-294">For details, see the blog [Using CDNs and Expires to Improve Web Site Performance](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span></span>

<span data-ttu-id="aff6c-295">La limitación del explorador de seis conexiones simultáneas por cada nombre de host se puede mitigar mediante el uso de un [CDN](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span><span class="sxs-lookup"><span data-stu-id="aff6c-295">The browser limitation of six simultaneous connections per each hostname can be mitigated by using a [CDN](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span></span> <span data-ttu-id="aff6c-296">Debido a que la red CDN tiene un nombre de host diferente que el sitio de hospedaje, las solicitudes de activos de la red CDN se descontarán el límite de conexiones simultáneas de seis a su entorno de hospedaje.</span><span class="sxs-lookup"><span data-stu-id="aff6c-296">Because the CDN will have a different hostname than your hosting site, asset requests from the CDN will not count against the six simultaneous connections limit to your hosting environment.</span></span> <span data-ttu-id="aff6c-297">También puede proporcionar una red CDN comunes del almacenamiento en caché de paquete y las ventajas de almacenamiento en caché de borde.</span><span class="sxs-lookup"><span data-stu-id="aff6c-297">A CDN can also provide common package caching and edge caching advantages.</span></span>

<span data-ttu-id="aff6c-298">Los paquetes se deben particionar por las páginas que las necesiten.</span><span class="sxs-lookup"><span data-stu-id="aff6c-298">Bundles should be partitioned by pages that need them.</span></span> <span data-ttu-id="aff6c-299">Por ejemplo, la plantilla de MVC de ASP.NET para una aplicación de internet predeterminada crea un paquete de validación de jQuery independiente de jQuery.</span><span class="sxs-lookup"><span data-stu-id="aff6c-299">For example, the default ASP.NET MVC template for an internet application creates a jQuery Validation bundle separate from jQuery.</span></span> <span data-ttu-id="aff6c-300">Dado que las vistas predeterminadas que se crea no tienen ninguna entrada y no las publique los valores, no incluyen la agrupación de validación.</span><span class="sxs-lookup"><span data-stu-id="aff6c-300">Because the default views created have no input and do not post values, they don't include the validation bundle.</span></span>

<span data-ttu-id="aff6c-301">El `System.Web.Optimization` espacio de nombres se implementa en *System.Web.Optimization.dll*.</span><span class="sxs-lookup"><span data-stu-id="aff6c-301">The `System.Web.Optimization` namespace is implemented in *System.Web.Optimization.dll*.</span></span> <span data-ttu-id="aff6c-302">Aprovecha la biblioteca de WebGrease (*WebGrease.dll*) para las capacidades de la minificación, que a su vez utiliza *Antlr3.Runtime.dll*.</span><span class="sxs-lookup"><span data-stu-id="aff6c-302">It leverages the WebGrease library (*WebGrease.dll*) for minification capabilities, which in turn uses *Antlr3.Runtime.dll*.</span></span>

<span data-ttu-id="aff6c-303">*Usar Twitter para realizar publicaciones rápidos y compartir vínculos. Mi identificador de Twitter es*: [@RickAndMSFT](http://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="aff6c-303">*I use Twitter to make quick posts and share links. My Twitter handle is*: [@RickAndMSFT](http://twitter.com/RickAndMSFT)</span></span>

## <a name="additional-resources"></a><span data-ttu-id="aff6c-304">Recursos adicionales</span><span class="sxs-lookup"><span data-stu-id="aff6c-304">Additional resources</span></span>

- <span data-ttu-id="aff6c-305">Vídeo:[unión y optimizar](https://channel9.msdn.com/Events/aspConf/aspConf/Bundling-and-Optimizing) por [Howard Dierking](https://twitter.com/#!/howard_dierking)</span><span class="sxs-lookup"><span data-stu-id="aff6c-305">Video:[Bundling and Optimizing](https://channel9.msdn.com/Events/aspConf/aspConf/Bundling-and-Optimizing) by [Howard Dierking](https://twitter.com/#!/howard_dierking)</span></span>
- <span data-ttu-id="aff6c-306">[Adición de optimización Web a un sitio Web Pages](https://blogs.msdn.com/b/rickandy/archive/2012/08/15/adding-web-optimization-to-a-web-pages-site.aspx).</span><span class="sxs-lookup"><span data-stu-id="aff6c-306">[Adding Web Optimization to a Web Pages Site](https://blogs.msdn.com/b/rickandy/archive/2012/08/15/adding-web-optimization-to-a-web-pages-site.aspx).</span></span>
- <span data-ttu-id="aff6c-307">[Adición de unión y Minificación para formularios Web Forms](https://blogs.msdn.com/b/rickandy/archive/2012/08/14/adding-bundling-and-minification-to-web-forms.aspx).</span><span class="sxs-lookup"><span data-stu-id="aff6c-307">[Adding Bundling and Minification to Web Forms](https://blogs.msdn.com/b/rickandy/archive/2012/08/14/adding-bundling-and-minification-to-web-forms.aspx).</span></span>
- <span data-ttu-id="aff6c-308">[Implicaciones de rendimiento de la unión y Minificación de exploración Web](https://blogs.msdn.com/b/henrikn/archive/2012/06/17/performance-implications-of-bundling-and-minification-on-http.aspx) por [Henrik F Nielsen](http://en.wikipedia.org/wiki/Henrik_Frystyk_Nielsen) [@frystyk](https://twitter.com/frystyk)</span><span class="sxs-lookup"><span data-stu-id="aff6c-308">[Performance Implications of Bundling and Minification on Web Browsing](https://blogs.msdn.com/b/henrikn/archive/2012/06/17/performance-implications-of-bundling-and-minification-on-http.aspx) by [Henrik F Nielsen](http://en.wikipedia.org/wiki/Henrik_Frystyk_Nielsen) [@frystyk](https://twitter.com/frystyk)</span></span>
- <span data-ttu-id="aff6c-309">[Uso de CDN y caduca para mejorar el rendimiento del sitio Web](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx) Rick Anderson [@RickAndMSFT](https://twitter.com/#!/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="aff6c-309">[Using CDNs and Expires to Improve Web Site Performance](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx) by Rick Anderson [@RickAndMSFT](https://twitter.com/#!/RickAndMSFT)</span></span>
- [<span data-ttu-id="aff6c-310">Minimizar el RTT (tiempos de ida y vuelta)</span><span class="sxs-lookup"><span data-stu-id="aff6c-310">Minimize RTT (round-trip times)</span></span>](https://developers.google.com/speed/docs/best-practices/rtt)

## <a name="contributors"></a><span data-ttu-id="aff6c-311">Colaboradores</span><span class="sxs-lookup"><span data-stu-id="aff6c-311">Contributors</span></span>

- <span data-ttu-id="aff6c-312">Hao Kung</span><span class="sxs-lookup"><span data-stu-id="aff6c-312">Hao Kung</span></span>
- [<span data-ttu-id="aff6c-313">Howard Dierking</span><span class="sxs-lookup"><span data-stu-id="aff6c-313">Howard Dierking</span></span>](https://twitter.com/#!/howard_dierking)
- <span data-ttu-id="aff6c-314">Diana LaRose</span><span class="sxs-lookup"><span data-stu-id="aff6c-314">Diana LaRose</span></span>
