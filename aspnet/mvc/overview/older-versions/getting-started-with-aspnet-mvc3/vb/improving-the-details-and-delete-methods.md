---
uid: mvc/overview/older-versions/getting-started-with-aspnet-mvc3/vb/improving-the-details-and-delete-methods
title: Mejora de los métodos Details y Delete (VB) | Microsoft Docs
author: Rick-Anderson
description: Este tutorial le enseñará los aspectos básicos de la creación de una aplicación Web de ASP.NET MVC mediante Microsoft Visual Web Developer 2010 Express Service Pack 1, que es...
ms.author: riande
ms.date: 01/12/2011
ms.assetid: c5c14ef0-c128-4dc1-8c01-7f0fdb09e411
msc.legacyurl: /mvc/overview/older-versions/getting-started-with-aspnet-mvc3/vb/improving-the-details-and-delete-methods
msc.type: authoredcontent
ms.openlocfilehash: 1912a36c19b27993e2bf17368d671d5a3b7f6450
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 05/06/2019
ms.locfileid: "65130024"
---
# <a name="improving-the-details-and-delete-methods-vb"></a><span data-ttu-id="158c9-103">Mejorar los métodos Details y Delete (VB)</span><span class="sxs-lookup"><span data-stu-id="158c9-103">Improving the Details and Delete Methods (VB)</span></span>

<span data-ttu-id="158c9-104">by [Rick Anderson]((https://twitter.com/RickAndMSFT))</span><span class="sxs-lookup"><span data-stu-id="158c9-104">by [Rick Anderson]((https://twitter.com/RickAndMSFT))</span></span>

> <span data-ttu-id="158c9-105">Este tutorial le enseñará los aspectos básicos de la creación de una aplicación Web de ASP.NET MVC mediante Microsoft Visual Web Developer 2010 Express Service Pack 1, que es una versión gratuita de Microsoft Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="158c9-105">This tutorial will teach you the basics of building an ASP.NET MVC Web application using Microsoft Visual Web Developer 2010 Express Service Pack 1, which is a free version of Microsoft Visual Studio.</span></span> <span data-ttu-id="158c9-106">Antes de empezar, asegúrese de que ha instalado los requisitos previos descritos a continuación.</span><span class="sxs-lookup"><span data-stu-id="158c9-106">Before you start, make sure you've installed the prerequisites listed below.</span></span> <span data-ttu-id="158c9-107">Puede instalar todos ellos haciendo clic en el siguiente vínculo: [Instalador de plataforma Web](https://www.microsoft.com/web/gallery/install.aspx?appid=VWD2010SP1Pack).</span><span class="sxs-lookup"><span data-stu-id="158c9-107">You can install all of them by clicking the following link: [Web Platform Installer](https://www.microsoft.com/web/gallery/install.aspx?appid=VWD2010SP1Pack).</span></span> <span data-ttu-id="158c9-108">Como alternativa, puede instalar individualmente los requisitos previos mediante los vínculos siguientes:</span><span class="sxs-lookup"><span data-stu-id="158c9-108">Alternatively, you can individually install the prerequisites using the following links:</span></span>
> 
> - [<span data-ttu-id="158c9-109">Requisitos previos de Visual Studio Web Developer Express SP1</span><span class="sxs-lookup"><span data-stu-id="158c9-109">Visual Studio Web Developer Express SP1 prerequisites</span></span>](https://www.microsoft.com/web/gallery/install.aspx?appid=VWD2010SP1Pack)
> - [<span data-ttu-id="158c9-110">ASP.NET MVC 3 Tools Update</span><span class="sxs-lookup"><span data-stu-id="158c9-110">ASP.NET MVC 3 Tools Update</span></span>](https://www.microsoft.com/web/gallery/install.aspx?appsxml=&amp;appid=MVC3)
> - <span data-ttu-id="158c9-111">[SQL Server Compact 4.0](https://www.microsoft.com/web/gallery/install.aspx?appid=SQLCE;SQLCEVSTools_4_0)(tiempo de ejecución de herramientas de soporte técnico +)</span><span class="sxs-lookup"><span data-stu-id="158c9-111">[SQL Server Compact 4.0](https://www.microsoft.com/web/gallery/install.aspx?appid=SQLCE;SQLCEVSTools_4_0)(runtime + tools support)</span></span>
> 
> <span data-ttu-id="158c9-112">Si usa Visual Studio 2010, en lugar de Visual Web Developer 2010, instale los requisitos previos, haga clic en el siguiente vínculo: [Requisitos previos de Visual Studio 2010](https://www.microsoft.com/web/gallery/install.aspx?appsxml=&amp;appid=VS2010SP1Pack).</span><span class="sxs-lookup"><span data-stu-id="158c9-112">If you're using Visual Studio 2010 instead of Visual Web Developer 2010, install the prerequisites by clicking the following link: [Visual Studio 2010 prerequisites](https://www.microsoft.com/web/gallery/install.aspx?appsxml=&amp;appid=VS2010SP1Pack).</span></span>
> 
> <span data-ttu-id="158c9-113">Un proyecto de Visual Web Developer con código fuente VB.NET está disponible como acompañamiento de este tema.</span><span class="sxs-lookup"><span data-stu-id="158c9-113">A Visual Web Developer project with VB.NET source code is available to accompany this topic.</span></span> <span data-ttu-id="158c9-114">[Descargue la versión VB.NET](https://code.msdn.microsoft.com/Introduction-to-MVC-3-10d1b098).</span><span class="sxs-lookup"><span data-stu-id="158c9-114">[Download the VB.NET version](https://code.msdn.microsoft.com/Introduction-to-MVC-3-10d1b098).</span></span> <span data-ttu-id="158c9-115">Si lo prefiere C#, cambie a la [C# versión](../cs/improving-the-details-and-delete-methods.md) de este tutorial.</span><span class="sxs-lookup"><span data-stu-id="158c9-115">If you prefer C#, switch to the [C# version](../cs/improving-the-details-and-delete-methods.md) of this tutorial.</span></span>

<span data-ttu-id="158c9-116">En esta parte del tutorial, realizará algunas mejoras en el que se han generado automáticamente `Details` y `Delete` métodos.</span><span class="sxs-lookup"><span data-stu-id="158c9-116">In this part of the tutorial, you'll make some improvements to the automatically generated `Details` and `Delete` methods.</span></span> <span data-ttu-id="158c9-117">Estos cambios no son necesarios, pero con tan solo unos pequeños fragmentos de código, puede mejorar fácilmente la aplicación.</span><span class="sxs-lookup"><span data-stu-id="158c9-117">These changes aren't required, but with just a few small bits of code, you can easily enhance the application.</span></span>

## <a name="improving-the-details-and-delete-methods"></a><span data-ttu-id="158c9-118">Mejora de los métodos Details y Delete</span><span class="sxs-lookup"><span data-stu-id="158c9-118">Improving the Details and Delete Methods</span></span>

<span data-ttu-id="158c9-119">Cuando se ha aplicado scaffolding la `Movie` , controlador de MVC de ASP.NET genera código que funcionaba muy bien, pero que se pueden realizar más sólida con tan solo unos pequeños cambios.</span><span class="sxs-lookup"><span data-stu-id="158c9-119">When you scaffolded the `Movie` controller, ASP.NET MVC generated code that worked great, but that can be made more robust with just a few small changes.</span></span>

<span data-ttu-id="158c9-120">Abra el `Movie` controlador y modificar el `Details` método devolviendo `HttpNotFound` cuando no se encuentra una película.</span><span class="sxs-lookup"><span data-stu-id="158c9-120">Open the `Movie` controller and modify the `Details` method by returning `HttpNotFound` when a movie isn't found.</span></span> <span data-ttu-id="158c9-121">También se debe modificar el `Details` método para establecer un valor predeterminado para el identificador que se pasa a él.</span><span class="sxs-lookup"><span data-stu-id="158c9-121">You should also modify the `Details` method to set a default value for the ID that's passed to it.</span></span> <span data-ttu-id="158c9-122">(Realizar modificaciones similares a los `Edit` método [parte 6](examining-the-edit-methods-and-edit-view.md) de este tutorial.) Sin embargo, debe cambiar el tipo de valor devuelto de la `Details` método desde `ViewResult` a `ActionResult`, porque el `HttpNotFound` método no devuelve un `ViewResult` objeto.</span><span class="sxs-lookup"><span data-stu-id="158c9-122">(You made similar changes to the `Edit` method in [part 6](examining-the-edit-methods-and-edit-view.md) of this tutorial.) However, you must change the return type of the `Details` method from `ViewResult` to `ActionResult`, because the `HttpNotFound` method doesn't return a `ViewResult` object.</span></span> <span data-ttu-id="158c9-123">En el ejemplo siguiente se muestra el texto modificado `Details` método.</span><span class="sxs-lookup"><span data-stu-id="158c9-123">The following example shows the modified `Details` method.</span></span>

[!code-vb[Main](improving-the-details-and-delete-methods/samples/sample1.vb)]

<span data-ttu-id="158c9-124">Código primero simplifica la búsqueda de datos mediante el `Find` método.</span><span class="sxs-lookup"><span data-stu-id="158c9-124">Code First makes it easy to search for data using the `Find` method.</span></span> <span data-ttu-id="158c9-125">Una característica de seguridad importante que creamos en el método es que el código comprueba que el `Find` método ha encontrado una película antes de que el código intenta hacer algo con él.</span><span class="sxs-lookup"><span data-stu-id="158c9-125">An important security feature that we built into the method is that the code verifies that the `Find` method has found a movie before the code tries to do anything with it.</span></span> <span data-ttu-id="158c9-126">Por ejemplo, un pirata informático podría introducir errores en el sitio cambiando la dirección URL creada por los vínculos de `http://localhost:xxxx/Movies/Details/1` en algo similar a `http://localhost:xxxx/Movies/Details/12345` (o algún otro valor que no represente una película real).</span><span class="sxs-lookup"><span data-stu-id="158c9-126">For example, a hacker could introduce errors into the site by changing the URL created by the links from `http://localhost:xxxx/Movies/Details/1` to something like `http://localhost:xxxx/Movies/Details/12345` (or some other value that doesn't represent an actual movie).</span></span> <span data-ttu-id="158c9-127">Si no lo hace la comprobación de una película null, esto podría dar lugar a un error de base de datos.</span><span class="sxs-lookup"><span data-stu-id="158c9-127">If you don't the check for a null movie, this could result in a database error.</span></span>

<span data-ttu-id="158c9-128">Del mismo modo, cambie el `Delete` y `DeleteConfirmed` métodos para especificar un valor predeterminado para el parámetro ID y devolver `HttpNotFound` cuando no se encuentra una película.</span><span class="sxs-lookup"><span data-stu-id="158c9-128">Similarly, change the `Delete` and `DeleteConfirmed` methods to specify a default value for the ID parameter and to return `HttpNotFound` when a movie isn't found.</span></span> <span data-ttu-id="158c9-129">La actualización `Delete` métodos en el `Movie` controlador se muestran a continuación.</span><span class="sxs-lookup"><span data-stu-id="158c9-129">The updated `Delete` methods in the `Movie` controller are shown below.</span></span>

[!code-vb[Main](improving-the-details-and-delete-methods/samples/sample2.vb)]

<span data-ttu-id="158c9-130">Tenga en cuenta que el `Delete` método no elimina los datos.</span><span class="sxs-lookup"><span data-stu-id="158c9-130">Note that the `Delete` method doesn't delete the data.</span></span> <span data-ttu-id="158c9-131">La acción de efectuar una operación de eliminación en respuesta a una solicitud GET (o con este propósito efectuar una operación de edición, creación o cualquier otra operación que modifique los datos) genera una vulnerabilidad de seguridad.</span><span class="sxs-lookup"><span data-stu-id="158c9-131">Performing a delete operation in response to a GET request (or for that matter, performing an edit operation, create operation, or any other operation that changes data) opens up a security hole.</span></span> <span data-ttu-id="158c9-132">Para obtener más información acerca de esto, consulte la entrada de blog de Stephen Walther [ASP.NET MVC sugerencia #46; no utilice los vínculos eliminar ya que crean vulnerabilidades de seguridad](http://stephenwalther.com/blog/archive/2009/01/21/asp.net-mvc-tip-46-ndash-donrsquot-use-delete-links-because.aspx).</span><span class="sxs-lookup"><span data-stu-id="158c9-132">For more information about this, see Stephen Walther's blog entry [ASP.NET MVC Tip #46 — Don't use Delete Links because they create Security Holes](http://stephenwalther.com/blog/archive/2009/01/21/asp.net-mvc-tip-46-ndash-donrsquot-use-delete-links-because.aspx).</span></span>

<span data-ttu-id="158c9-133">El método `HttpPost` que elimina los datos se denomina `DeleteConfirmed` para proporcionar al método HTTP POST una firma o nombre únicos.</span><span class="sxs-lookup"><span data-stu-id="158c9-133">The `HttpPost` method that deletes the data is named `DeleteConfirmed` to give the HTTP POST method a unique signature or name.</span></span> <span data-ttu-id="158c9-134">Las dos firmas de método se muestran a continuación:</span><span class="sxs-lookup"><span data-stu-id="158c9-134">The two method signatures are shown below:</span></span>

[!code-vb[Main](improving-the-details-and-delete-methods/samples/sample3.vb)]

<span data-ttu-id="158c9-135">Common language runtime (CLR) requiere métodos sobrecargados para tener una firma única (mismo nombre, lista de parámetros diferente).</span><span class="sxs-lookup"><span data-stu-id="158c9-135">The common language runtime (CLR) requires overloaded methods to have a unique signature (same name, different list of parameters).</span></span> <span data-ttu-id="158c9-136">Sin embargo, aquí tiene dos métodos de eliminación: uno para GET y otro para POST que ambas requieren la misma firma.</span><span class="sxs-lookup"><span data-stu-id="158c9-136">However, here you need two Delete methods -- one for GET and one for POST -- that both require the same signature.</span></span> <span data-ttu-id="158c9-137">(ambos deben aceptar un número entero como parámetro).</span><span class="sxs-lookup"><span data-stu-id="158c9-137">(They both need to accept a single integer as a parameter.)</span></span>

<span data-ttu-id="158c9-138">Para ordenar este comando, puede hacer un par de cosas.</span><span class="sxs-lookup"><span data-stu-id="158c9-138">To sort this out, you can do a couple of things.</span></span> <span data-ttu-id="158c9-139">Uno es dar a los métodos con nombres diferentes.</span><span class="sxs-lookup"><span data-stu-id="158c9-139">One is to give the methods different names.</span></span> <span data-ttu-id="158c9-140">Eso es lo que hicimos en el que el anterior ejemplo.</span><span class="sxs-lookup"><span data-stu-id="158c9-140">That's what we did in he preceding example.</span></span> <span data-ttu-id="158c9-141">Pero esto implica un pequeño problema: ASP.NET asigna los segmentos de una dirección URL a los métodos de acción por nombre, de modo que si cambia el nombre de un método, el enrutamiento seguramente no podrá encontrar dicho método.</span><span class="sxs-lookup"><span data-stu-id="158c9-141">However, this introduces a small problem: ASP.NET maps segments of a URL to action methods by name, and if you rename a method, routing normally wouldn't be able to find that method.</span></span> <span data-ttu-id="158c9-142">La solución es la que ve en el ejemplo, que consiste en agregar el atributo `ActionName("Delete")` al método `DeleteConfirmed`.</span><span class="sxs-lookup"><span data-stu-id="158c9-142">The solution is what you see in the example, which is to add the `ActionName("Delete")` attribute to the `DeleteConfirmed` method.</span></span> <span data-ttu-id="158c9-143">Esto realiza eficazmente asignación para el sistema de enrutamiento para que una dirección URL que incluya <em>/Delete /</em>para una entrada de blog encontrará solicitud la `DeleteConfirmed` método.</span><span class="sxs-lookup"><span data-stu-id="158c9-143">This effectively performs mapping for the routing system so that a URL that includes <em>/Delete/</em>for a POST request will find the `DeleteConfirmed` method.</span></span>

<span data-ttu-id="158c9-144">Otra manera de evitar un problema con los métodos que tienen nombres idénticos y firmas es artificialmente cambiar la firma del método POST para que incluya un parámetro no utilizado.</span><span class="sxs-lookup"><span data-stu-id="158c9-144">Another way to avoid a problem with methods that have identical names and signatures is to artificially change the signature of the POST method to include an unused parameter.</span></span> <span data-ttu-id="158c9-145">Por ejemplo, algunos desarrolladores agregar un tipo de parámetro `FormCollection` que se pasa al método POST y, a continuación, simplemente no usa el parámetro:</span><span class="sxs-lookup"><span data-stu-id="158c9-145">For example, some developers add a parameter type `FormCollection` that is passed to the POST method, and then simply don't use the parameter:</span></span>

[!code-vb[Main](improving-the-details-and-delete-methods/samples/sample4.vb)]

## <a name="wrapping-up"></a><span data-ttu-id="158c9-146">Conclusión</span><span class="sxs-lookup"><span data-stu-id="158c9-146">Wrapping Up</span></span>

<span data-ttu-id="158c9-147">Ahora tiene una aplicación ASP.NET MVC completa que almacena datos en una base de datos de SQL Server Compact.</span><span class="sxs-lookup"><span data-stu-id="158c9-147">You now have a complete ASP.NET MVC application that stores data in a SQL Server Compact database.</span></span> <span data-ttu-id="158c9-148">Puede crear, leer, actualizar, eliminar y buscar películas.</span><span class="sxs-lookup"><span data-stu-id="158c9-148">You can create, read, update, delete, and search for movies.</span></span>

![](improving-the-details-and-delete-methods/_static/image1.png)

<span data-ttu-id="158c9-149">Este tutorial básico de lo que a realizar los controladores de su asociación con las vistas y pasan datos codificados de forma rígida.</span><span class="sxs-lookup"><span data-stu-id="158c9-149">This basic tutorial got you started making controllers, associating them with views, and passing around hard-coded data.</span></span> <span data-ttu-id="158c9-150">A continuación, ha creado y había diseñado un modelo de datos.</span><span class="sxs-lookup"><span data-stu-id="158c9-150">Then you created and designed a data model.</span></span> <span data-ttu-id="158c9-151">Entity Framework Code First crea una base de datos del modelo de datos sobre la marcha, y el sistema de scaffolding de ASP.NET MVC genera automáticamente los métodos de acción y vistas de operaciones CRUD básicas.</span><span class="sxs-lookup"><span data-stu-id="158c9-151">Entity Framework Code First created a database from the data model on the fly, and the ASP.NET MVC scaffolding system automatically generated the action methods and views for basic CRUD operations.</span></span> <span data-ttu-id="158c9-152">A continuación, agrega un formulario de búsqueda que permite a los usuarios buscar la base de datos.</span><span class="sxs-lookup"><span data-stu-id="158c9-152">You then added a search form that let users search the database.</span></span> <span data-ttu-id="158c9-153">Puede cambiar la base de datos para incluir una nueva columna de datos y, a continuación, actualiza las dos páginas para crear y mostrar estos nuevos datos.</span><span class="sxs-lookup"><span data-stu-id="158c9-153">You changed the database to include a new column of data, and then updated two pages to create and display this new data.</span></span> <span data-ttu-id="158c9-154">Agregar validación marcando el modelo de datos con atributos de la `DataAnnotations` espacio de nombres.</span><span class="sxs-lookup"><span data-stu-id="158c9-154">You added validation by marking the data model with attributes from the `DataAnnotations` namespace.</span></span> <span data-ttu-id="158c9-155">La validación resultante se ejecuta en el cliente y en el servidor.</span><span class="sxs-lookup"><span data-stu-id="158c9-155">The resulting validation runs on the client and on the server.</span></span>

<span data-ttu-id="158c9-156">Si desea implementar la aplicación, es útil probar primero la aplicación en el servidor local de IIS 7.</span><span class="sxs-lookup"><span data-stu-id="158c9-156">If you'd like to deploy your application, it's helpful to first test the application on your local IIS 7 server.</span></span> <span data-ttu-id="158c9-157">Puede usar esto [instalador de plataforma Web](https://www.microsoft.com/web/gallery/install.aspx?appsxml=&amp;appid=ASPNET;) vínculo para habilitar la configuración de IIS para las aplicaciones de ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="158c9-157">You can use this [Web Platform Installer](https://www.microsoft.com/web/gallery/install.aspx?appsxml=&amp;appid=ASPNET;) link to enable IIS setting for ASP.NET applications.</span></span> <span data-ttu-id="158c9-158">Consulte los vínculos de implementación siguientes:</span><span class="sxs-lookup"><span data-stu-id="158c9-158">See the following deployment links:</span></span>

- [<span data-ttu-id="158c9-159">Mapa de contenido de implementación de ASP.NET</span><span class="sxs-lookup"><span data-stu-id="158c9-159">ASP.NET Deployment Content Map</span></span>](https://msdn.microsoft.com/library/dd394698.aspx)
- [<span data-ttu-id="158c9-160">Enabling IIS 7.x</span><span class="sxs-lookup"><span data-stu-id="158c9-160">Enabling IIS 7.x</span></span>](https://blogs.msdn.com/b/rickandy/archive/2011/03/14/enabling-iis-7-x-on-windows-7-vista-sp1-windows-2008-windows-2008-r2.aspx)
- [<span data-ttu-id="158c9-161">Implementación de proyectos de aplicación Web</span><span class="sxs-lookup"><span data-stu-id="158c9-161">Web Application Projects Deployment</span></span>](https://msdn.microsoft.com/library/dd394698.aspx)

<span data-ttu-id="158c9-162">Ahora le animo a pasar a nuestro nivel intermedio [creación de un modelo de datos de Entity Framework para una aplicación ASP.NET MVC](../../../getting-started/getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application.md) y [MVC Music Store](../../mvc-music-store/mvc-music-store-part-1.md) tutoriales para explorar el [ASP.NET artículos en MSDN](https://msdn.microsoft.com/library/gg416514(VS.98).aspx)y consulte los vídeos y recursos en muchas [ https://asp.net/mvc ](https://asp.net/mvc) para obtener más información sobre ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="158c9-162">I now encourage you to move on to our intermediate-level [Creating an Entity Framework Data Model for an ASP.NET MVC Application](../../../getting-started/getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application.md) and [MVC Music Store](../../mvc-music-store/mvc-music-store-part-1.md) tutorials, to explore the [ASP.NET articles on MSDN](https://msdn.microsoft.com/library/gg416514(VS.98).aspx), and to check out the many videos and resources at [https://asp.net/mvc](https://asp.net/mvc) to learn even more about ASP.NET MVC!</span></span> <span data-ttu-id="158c9-163">El [foros de ASP.NET MVC](https://forums.asp.net/1146.aspx) son un buen lugar para formular preguntas.</span><span class="sxs-lookup"><span data-stu-id="158c9-163">The [ASP.NET MVC forums](https://forums.asp.net/1146.aspx) are a great place to ask questions.</span></span>

<span data-ttu-id="158c9-164">Disfrútelo.</span><span class="sxs-lookup"><span data-stu-id="158c9-164">Enjoy!</span></span>

<span data-ttu-id="158c9-165">— Scott Hanselman ([ http://hanselman.com ](http://hanselman.com) y [ @shanselman ](http://twitter.com/shanselman) en Twitter) y Rick Anderson [blogs.msdn.com/rickAndy](https://blogs.msdn.com/rickAndy)</span><span class="sxs-lookup"><span data-stu-id="158c9-165">— Scott Hanselman ([http://hanselman.com](http://hanselman.com) and [@shanselman](http://twitter.com/shanselman) on Twitter) and Rick Anderson [blogs.msdn.com/rickAndy](https://blogs.msdn.com/rickAndy)</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="158c9-166">Anterior</span><span class="sxs-lookup"><span data-stu-id="158c9-166">Previous</span></span>](adding-validation-to-the-model.md)
