---
uid: web-forms/overview/older-versions-security/admin/building-an-interface-to-select-one-user-account-from-many-cs
title: Creación de una interfaz para seleccionar una cuenta de usuario de muchos (C#) | Microsoft Docs
author: rick-anderson
description: En este tutorial vamos a crear una interfaz de usuario con una cuadrícula por página, puede filtrar. En concreto, la interfaz de usuario constará de una serie de LinkButtons para...
ms.author: riande
ms.date: 04/01/2008
ms.assetid: 9e4e687c-b4ec-434f-a4ef-edb0b8f365e4
msc.legacyurl: /web-forms/overview/older-versions-security/admin/building-an-interface-to-select-one-user-account-from-many-cs
msc.type: authoredcontent
ms.openlocfilehash: ede2bf737464fde47e304e23255349599c1ea663
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 05/06/2019
ms.locfileid: "65116288"
---
# <a name="building-an-interface-to-select-one-user-account-from-many-c"></a><span data-ttu-id="defec-104">Crear una interfaz para seleccionar una cuenta de usuario entre varias cuentas (C#)</span><span class="sxs-lookup"><span data-stu-id="defec-104">Building an Interface to Select One User Account from Many (C#)</span></span>

<span data-ttu-id="defec-105">por [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="defec-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="defec-106">[Descargar código](http://download.microsoft.com/download/6/0/e/60e1bd94-e5f9-4d5a-a079-f23c98f4f67d/CS.12.zip) o [descargar PDF](http://download.microsoft.com/download/6/0/e/60e1bd94-e5f9-4d5a-a079-f23c98f4f67d/aspnet_tutorial12_SelectUser_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="defec-106">[Download Code](http://download.microsoft.com/download/6/0/e/60e1bd94-e5f9-4d5a-a079-f23c98f4f67d/CS.12.zip) or [Download PDF](http://download.microsoft.com/download/6/0/e/60e1bd94-e5f9-4d5a-a079-f23c98f4f67d/aspnet_tutorial12_SelectUser_cs.pdf)</span></span>

> <span data-ttu-id="defec-107">En este tutorial vamos a crear una interfaz de usuario con una cuadrícula por página, puede filtrar.</span><span class="sxs-lookup"><span data-stu-id="defec-107">In this tutorial we will build a user interface with a paged, filterable grid.</span></span> <span data-ttu-id="defec-108">En concreto, la interfaz de usuario constará de una serie de LinkButtons para filtrar los resultados según la letra inicial del nombre de usuario y un control GridView para mostrar los usuarios coincidentes.</span><span class="sxs-lookup"><span data-stu-id="defec-108">In particular, our user interface will consist of a series of LinkButtons for filtering the results based on the starting letter of the username, and a GridView control to show the matching users.</span></span> <span data-ttu-id="defec-109">Comenzaremos con una lista de todas las cuentas de usuario en un control GridView.</span><span class="sxs-lookup"><span data-stu-id="defec-109">We'll start by listing all of the user accounts in a GridView.</span></span> <span data-ttu-id="defec-110">A continuación, en el paso 3, se agregará el filtro LinkButtons.</span><span class="sxs-lookup"><span data-stu-id="defec-110">Then, in Step 3, we will add the filter LinkButtons.</span></span> <span data-ttu-id="defec-111">Paso 4 se examina los resultados filtrados de paginación.</span><span class="sxs-lookup"><span data-stu-id="defec-111">Step 4 looks at paging the filtered results.</span></span> <span data-ttu-id="defec-112">La interfaz construida en los pasos 2 a 4 se usará en los tutoriales siguientes para realizar tareas administrativas para una cuenta de usuario determinada.</span><span class="sxs-lookup"><span data-stu-id="defec-112">The interface constructed in Steps 2 through 4 will be used in the subsequent tutorials to perform administrative tasks for a particular user account.</span></span>

## <a name="introduction"></a><span data-ttu-id="defec-113">Introducción</span><span class="sxs-lookup"><span data-stu-id="defec-113">Introduction</span></span>

<span data-ttu-id="defec-114">En el <a id="_msoanchor_1"> </a> [ *asignar Roles a los usuarios* ](../roles/assigning-roles-to-users-cs.md) tutorial, creamos una interfaz rudimentaria para que un administrador seleccionar un usuario y administrar sus roles.</span><span class="sxs-lookup"><span data-stu-id="defec-114">In the <a id="_msoanchor_1"></a>[*Assigning Roles to Users*](../roles/assigning-roles-to-users-cs.md) tutorial, we created a rudimentary interface for an administrator to select a user and manage her roles.</span></span> <span data-ttu-id="defec-115">En concreto, la interfaz presenta el Administrador con una lista desplegable de todos los usuarios.</span><span class="sxs-lookup"><span data-stu-id="defec-115">Specifically, the interface presented the administrator with a drop-down list of all of the users.</span></span> <span data-ttu-id="defec-116">Esta interfaz es adecuada cuando hay, pero las cuentas de una docena de usuario, pero es difícil de manejar para sitios con cientos o miles de cuentas.</span><span class="sxs-lookup"><span data-stu-id="defec-116">Such an interface is suitable when there are but a dozen or so user accounts, but is unwieldy for sites with hundreds or thousands of accounts.</span></span> <span data-ttu-id="defec-117">Una cuadrícula por página, puede filtrar es la interfaz de usuario más adecuado para sitios Web con bases de usuarios grande.</span><span class="sxs-lookup"><span data-stu-id="defec-117">A paged, filterable grid is more suitable user interface for websites with large user bases.</span></span>

<span data-ttu-id="defec-118">En este tutorial vamos a crear una interfaz de usuario de este tipo.</span><span class="sxs-lookup"><span data-stu-id="defec-118">In this tutorial we will build such a user interface.</span></span> <span data-ttu-id="defec-119">En concreto, la interfaz de usuario constará de una serie de LinkButtons para filtrar los resultados según la letra inicial del nombre de usuario y un control GridView para mostrar los usuarios coincidentes.</span><span class="sxs-lookup"><span data-stu-id="defec-119">In particular, our user interface will consist of a series of LinkButtons for filtering the results based on the starting letter of the username, and a GridView control to show the matching users.</span></span> <span data-ttu-id="defec-120">Comenzaremos con una lista de todas las cuentas de usuario en un control GridView.</span><span class="sxs-lookup"><span data-stu-id="defec-120">We'll start by listing all of the user accounts in a GridView.</span></span> <span data-ttu-id="defec-121">A continuación, en el paso 3, se agregará el filtro LinkButtons.</span><span class="sxs-lookup"><span data-stu-id="defec-121">Then, in Step 3, we will add the filter LinkButtons.</span></span> <span data-ttu-id="defec-122">Paso 4 se examina los resultados filtrados de paginación.</span><span class="sxs-lookup"><span data-stu-id="defec-122">Step 4 looks at paging the filtered results.</span></span> <span data-ttu-id="defec-123">La interfaz construida en los pasos 2 a 4 se usará en los tutoriales siguientes para realizar tareas administrativas para una cuenta de usuario determinada.</span><span class="sxs-lookup"><span data-stu-id="defec-123">The interface constructed in Steps 2 through 4 will be used in the subsequent tutorials to perform administrative tasks for a particular user account.</span></span>

<span data-ttu-id="defec-124">Comencemos.</span><span class="sxs-lookup"><span data-stu-id="defec-124">Let's get started!</span></span>

## <a name="step-1-adding-new-aspnet-pages"></a><span data-ttu-id="defec-125">Paso 1: Agregar nuevas páginas ASP.NET</span><span class="sxs-lookup"><span data-stu-id="defec-125">Step 1: Adding New ASP.NET Pages</span></span>

<span data-ttu-id="defec-126">En este tutorial y los dos siguientes analizaremos diversas funciones relacionadas con la administración y capacidades.</span><span class="sxs-lookup"><span data-stu-id="defec-126">In this tutorial and the next two we will be examining various administration-related functions and capabilities.</span></span> <span data-ttu-id="defec-127">Necesitamos una serie de páginas ASP.NET para implementar los temas que se examinan a lo largo de estos tutoriales.</span><span class="sxs-lookup"><span data-stu-id="defec-127">We will need a series of ASP.NET pages to implement the topics examined throughout these tutorials.</span></span> <span data-ttu-id="defec-128">Vamos a crear estas páginas y actualizar el mapa del sitio.</span><span class="sxs-lookup"><span data-stu-id="defec-128">Let's create these pages and update the site map.</span></span>

<span data-ttu-id="defec-129">Empiece por crear una nueva carpeta en el proyecto denominado `Administration`.</span><span class="sxs-lookup"><span data-stu-id="defec-129">Start by creating a new folder in the project named `Administration`.</span></span> <span data-ttu-id="defec-130">A continuación, agregue dos nuevas páginas ASP.NET a la carpeta, vincular cada página con el `Site.master` página maestra.</span><span class="sxs-lookup"><span data-stu-id="defec-130">Next, add two new ASP.NET pages to the folder, linking each page with the `Site.master` master page.</span></span> <span data-ttu-id="defec-131">Nombre de las páginas:</span><span class="sxs-lookup"><span data-stu-id="defec-131">Name the pages:</span></span>

- `ManageUsers.aspx`
- `UserInformation.aspx`

<span data-ttu-id="defec-132">También agrega dos páginas al directorio de raíz del sitio Web: `ChangePassword.aspx` y `RecoverPassword.aspx`.</span><span class="sxs-lookup"><span data-stu-id="defec-132">Also add two pages to the website's root directory: `ChangePassword.aspx` and `RecoverPassword.aspx`.</span></span>

<span data-ttu-id="defec-133">Estas cuatro páginas en este punto, deberían, tiene dos controles de contenido, uno para cada uno de ContentPlaceHolders la página maestra: `MainContent` y `LoginContent`.</span><span class="sxs-lookup"><span data-stu-id="defec-133">These four pages should, at this point, have two Content controls, one for each of the master page's ContentPlaceHolders: `MainContent` and `LoginContent`.</span></span>

[!code-aspx[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample1.aspx)]

<span data-ttu-id="defec-134">Queremos que aparezca el marcado de la página maestra predeterminada para el `LoginContent` ContentPlaceHolder para estas páginas.</span><span class="sxs-lookup"><span data-stu-id="defec-134">We want to show the master page's default markup for the `LoginContent` ContentPlaceHolder for these pages.</span></span> <span data-ttu-id="defec-135">Por lo tanto, quite el marcado declarativo para el `Content2` control de contenido.</span><span class="sxs-lookup"><span data-stu-id="defec-135">Therefore, remove the declarative markup for the `Content2` Content control.</span></span> <span data-ttu-id="defec-136">Una vez hecho esto, el marcado de las páginas debe contener un solo control de contenido.</span><span class="sxs-lookup"><span data-stu-id="defec-136">After doing so, the pages' markup should contain just one Content control.</span></span>

<span data-ttu-id="defec-137">Páginas de ASP.NET en el `Administration` carpeta está diseñada únicamente para los usuarios administrativos.</span><span class="sxs-lookup"><span data-stu-id="defec-137">The ASP.NET pages in the `Administration` folder are intended solely for administrative users.</span></span> <span data-ttu-id="defec-138">Se ha agregado un rol de administradores en el sistema en el <a id="_msoanchor_2"> </a> [ *creación y administración de funciones* ](../roles/creating-and-managing-roles-cs.md) tutorial; restringir el acceso a estas dos páginas para este rol.</span><span class="sxs-lookup"><span data-stu-id="defec-138">We added an Administrators role to the system in the <a id="_msoanchor_2"></a>[*Creating and Managing Roles*](../roles/creating-and-managing-roles-cs.md) tutorial; restrict access to these two pages to this role.</span></span> <span data-ttu-id="defec-139">Para ello, agregue un `Web.config` del archivo a la `Administration` carpeta y configurar su `<authorization>` elemento para admitir usuarios de la función de los administradores y denegar todos los demás.</span><span class="sxs-lookup"><span data-stu-id="defec-139">To accomplish this, add a `Web.config` file to the `Administration` folder and configure its `<authorization>` element to admit users in the Administrators role and to deny all others.</span></span>

[!code-xml[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample2.xml)]

<span data-ttu-id="defec-140">En este momento, el Explorador de soluciones del proyecto debe ser similar a la pantalla se muestra en la figura 1.</span><span class="sxs-lookup"><span data-stu-id="defec-140">At this point your project's Solution Explorer should look similar to the screen shot shown in Figure 1.</span></span>

<span data-ttu-id="defec-141">[![Se han agregado cuatro nuevas páginas y un archivo Web.config para el sitio Web](building-an-interface-to-select-one-user-account-from-many-cs/_static/image2.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="defec-141">[![Four New Pages and a Web.config File Have Been Added to the Website](building-an-interface-to-select-one-user-account-from-many-cs/_static/image2.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image1.png)</span></span>

<span data-ttu-id="defec-142">**Figura 1**: Cuatro nuevas páginas y una `Web.config` archivo se han agregado al sitio Web ([haga clic aquí para ver imagen en tamaño completo](building-an-interface-to-select-one-user-account-from-many-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="defec-142">**Figure 1**: Four New Pages and a `Web.config` File Have Been Added to the Website  ([Click to view full-size image](building-an-interface-to-select-one-user-account-from-many-cs/_static/image3.png))</span></span>

<span data-ttu-id="defec-143">Por último, actualice el mapa del sitio (`Web.sitemap`) para incluir una entrada para el `ManageUsers.aspx` página.</span><span class="sxs-lookup"><span data-stu-id="defec-143">Finally, update the site map (`Web.sitemap`) to include an entry to the `ManageUsers.aspx` page.</span></span> <span data-ttu-id="defec-144">Agregue el siguiente código XML después de la `<siteMapNode>` se ha agregado para los tutoriales de Roles.</span><span class="sxs-lookup"><span data-stu-id="defec-144">Add the following XML after the `<siteMapNode>` we added for the Roles tutorials.</span></span>

[!code-xml[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample3.xml)]

<span data-ttu-id="defec-145">Con el mapa del sitio actualizado, visite el sitio mediante un explorador.</span><span class="sxs-lookup"><span data-stu-id="defec-145">With the site map updated, visit the site through a browser.</span></span> <span data-ttu-id="defec-146">Como se muestra en la figura 2, el panel de navegación de la izquierda ahora incluye elementos para los tutoriales de administración.</span><span class="sxs-lookup"><span data-stu-id="defec-146">As Figure 2 shows, the navigation on the left now includes items for the Administration tutorials.</span></span>

<span data-ttu-id="defec-147">[![El mapa del sitio incluye un nodo denominado Administración de usuarios](building-an-interface-to-select-one-user-account-from-many-cs/_static/image5.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="defec-147">[![The Site Map Includes a Node Titled User Administration](building-an-interface-to-select-one-user-account-from-many-cs/_static/image5.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image4.png)</span></span>

<span data-ttu-id="defec-148">**Figura 2**: El mapa del sitio incluye un nodo denominado Administración de usuarios ([haga clic aquí para ver imagen en tamaño completo](building-an-interface-to-select-one-user-account-from-many-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="defec-148">**Figure 2**: The Site Map Includes a Node Titled User Administration  ([Click to view full-size image](building-an-interface-to-select-one-user-account-from-many-cs/_static/image6.png))</span></span>

## <a name="step-2-listing-all-user-accounts-in-a-gridview"></a><span data-ttu-id="defec-149">Paso 2: Enumerar todas las cuentas de usuario en un control GridView</span><span class="sxs-lookup"><span data-stu-id="defec-149">Step 2: Listing All User Accounts in a GridView</span></span>

<span data-ttu-id="defec-150">Nuestro objetivo final de este tutorial es crear una cuadrícula por página, puede filtrar a través del cual un administrador puede seleccionar una cuenta de usuario para administrar.</span><span class="sxs-lookup"><span data-stu-id="defec-150">Our end goal for this tutorial is to create a paged, filterable grid through which an administrator can select a user account to manage.</span></span> <span data-ttu-id="defec-151">Empecemos por lista *todas* a los usuarios en un control GridView.</span><span class="sxs-lookup"><span data-stu-id="defec-151">Let's start by listing *all* users in a GridView.</span></span> <span data-ttu-id="defec-152">Una vez completado, se agregará la funcionalidad y las interfaces de filtrado y paginación.</span><span class="sxs-lookup"><span data-stu-id="defec-152">Once this is complete, we will add the filtering and paging interfaces and functionality.</span></span>

<span data-ttu-id="defec-153">Abra el `ManageUsers.aspx` página en el `Administration` carpeta y agregar un control GridView, estableciendo su `ID` a `UserAccounts`.</span><span class="sxs-lookup"><span data-stu-id="defec-153">Open the `ManageUsers.aspx` page in the `Administration` folder and add a GridView, setting its `ID` to `UserAccounts`.</span></span> <span data-ttu-id="defec-154">En unos instantes, escribiremos código para enlazar el conjunto de cuentas de usuario a la GridView mediante el `Membership` la clase `GetAllUsers` método.</span><span class="sxs-lookup"><span data-stu-id="defec-154">In a moment, we will write code to bind the set of user accounts to the GridView using the `Membership` class's `GetAllUsers` method.</span></span> <span data-ttu-id="defec-155">Como se describe en los tutoriales anteriores, el método GetAllUsers devuelve un `MembershipUserCollection` objeto, que es una colección de `MembershipUser` objetos.</span><span class="sxs-lookup"><span data-stu-id="defec-155">As discussed in earlier tutorials, the GetAllUsers method returns a `MembershipUserCollection` object, which is a collection of `MembershipUser` objects.</span></span> <span data-ttu-id="defec-156">Cada `MembershipUser` en la colección incluye propiedades como `UserName`, `Email`, `IsApproved`, y así sucesivamente.</span><span class="sxs-lookup"><span data-stu-id="defec-156">Each `MembershipUser` in the collection includes properties like `UserName`, `Email`, `IsApproved`, and so on.</span></span>

<span data-ttu-id="defec-157">Con el fin de mostrar la información de cuenta de usuario deseado en el control GridView, establezca la GridView `AutoGenerateColumns` propiedad en False y agregue BoundFields para el `UserName`, `Email`, y `Comment` propiedades y CheckBoxFields para el `IsApproved`, `IsLockedOut`, y `IsOnline` propiedades.</span><span class="sxs-lookup"><span data-stu-id="defec-157">In order to display the desired user account information in the GridView, set the GridView's `AutoGenerateColumns` property to False and add BoundFields for the `UserName`, `Email`, and `Comment` properties and CheckBoxFields for the `IsApproved`, `IsLockedOut`, and `IsOnline` properties.</span></span> <span data-ttu-id="defec-158">Esta configuración se puede aplicar a través de marcado declarativo del control o a través del cuadro de diálogo campos.</span><span class="sxs-lookup"><span data-stu-id="defec-158">This configuration can be applied through the control's declarative markup or via the Fields dialog box.</span></span> <span data-ttu-id="defec-159">Figura 3 muestra una captura de pantalla de los campos de cuadro de diálogo después de que se activó la casilla de verificación Generar automáticamente los campos y se han agregado y configurado el BoundFields y CheckBoxFields.</span><span class="sxs-lookup"><span data-stu-id="defec-159">Figure 3 shows a screen shot of the Fields dialog box after the Auto-generate fields checkbox has been unchecked and the BoundFields and CheckBoxFields have been added and configured.</span></span>

<span data-ttu-id="defec-160">[![Agregar tres BoundFields y tres CheckBoxFields en GridView](building-an-interface-to-select-one-user-account-from-many-cs/_static/image8.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="defec-160">[![Add Three BoundFields and Three CheckBoxFields to the GridView](building-an-interface-to-select-one-user-account-from-many-cs/_static/image8.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image7.png)</span></span>

<span data-ttu-id="defec-161">**Figura 3**: Agregar tres BoundFields y tres CheckBoxFields en GridView ([haga clic aquí para ver imagen en tamaño completo](building-an-interface-to-select-one-user-account-from-many-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="defec-161">**Figure 3**: Add Three BoundFields and Three CheckBoxFields to the GridView  ([Click to view full-size image](building-an-interface-to-select-one-user-account-from-many-cs/_static/image9.png))</span></span>

<span data-ttu-id="defec-162">Después de configurar el control GridView, asegúrese de que su marcado declarativo es similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="defec-162">After configuring your GridView, ensure that its declarative markup resembles the following:</span></span>

[!code-aspx[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample4.aspx)]

<span data-ttu-id="defec-163">A continuación, se debe escribir código que enlaza las cuentas de usuario en el control GridView.</span><span class="sxs-lookup"><span data-stu-id="defec-163">Next, we need to write code that binds the user accounts to the GridView.</span></span> <span data-ttu-id="defec-164">Cree un método denominado `BindUserAccounts` para realizar esta tarea y, a continuación, llámelo desde el `Page_Load` controlador de eventos en la primera visita de página.</span><span class="sxs-lookup"><span data-stu-id="defec-164">Create a method named `BindUserAccounts` to perform this task and then call it from the `Page_Load` event handler on the first page visit.</span></span>

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample5.cs)]

<span data-ttu-id="defec-165">Dedique un momento para probar la página a través de un explorador.</span><span class="sxs-lookup"><span data-stu-id="defec-165">Take a moment to test the page through a browser.</span></span> <span data-ttu-id="defec-166">Como se muestra en la figura 4, el `UserAccounts` GridView muestra el nombre de usuario, dirección de correo electrónico y otra información pertinente de cuenta para todos los usuarios en el sistema.</span><span class="sxs-lookup"><span data-stu-id="defec-166">As Figure 4 shows, the `UserAccounts` GridView lists the username, email address, and other pertinent account information for all users in the system.</span></span>

<span data-ttu-id="defec-167">[![Las cuentas de usuario se muestran en el control GridView](building-an-interface-to-select-one-user-account-from-many-cs/_static/image11.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="defec-167">[![The User Accounts are Listed in the GridView](building-an-interface-to-select-one-user-account-from-many-cs/_static/image11.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image10.png)</span></span>

<span data-ttu-id="defec-168">**Figura 4**: Las cuentas de usuario se muestran en el control GridView ([haga clic aquí para ver imagen en tamaño completo](building-an-interface-to-select-one-user-account-from-many-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="defec-168">**Figure 4**: The User Accounts are Listed in the GridView  ([Click to view full-size image](building-an-interface-to-select-one-user-account-from-many-cs/_static/image12.png))</span></span>

## <a name="step-3-filtering-the-results-by-the-first-letter-of-the-username"></a><span data-ttu-id="defec-169">Paso 3: Filtrar los resultados por la primera letra del nombre de usuario</span><span class="sxs-lookup"><span data-stu-id="defec-169">Step 3: Filtering the Results by the First Letter of the Username</span></span>

<span data-ttu-id="defec-170">Actualmente la `UserAccounts` GridView muestra *todas* las cuentas de usuario.</span><span class="sxs-lookup"><span data-stu-id="defec-170">Currently the `UserAccounts` GridView shows *all* of the user accounts.</span></span> <span data-ttu-id="defec-171">Para los sitios Web con cientos o miles de cuentas de usuario, es imperativo que el usuario sea capaz de reducir rápidamente a las cuentas mostradas.</span><span class="sxs-lookup"><span data-stu-id="defec-171">For websites with hundreds or thousands of user accounts, it is imperative that user be able to quickly pare down the displayed accounts.</span></span> <span data-ttu-id="defec-172">Esto puede realizarse mediante la adición de filtrado LinkButtons a la página.</span><span class="sxs-lookup"><span data-stu-id="defec-172">This can be accomplished by adding filtering LinkButtons to the page.</span></span> <span data-ttu-id="defec-173">Vamos a agregar 27 LinkButtons a la página: uno denominado todo junto con un control LinkButton para cada letra del alfabeto.</span><span class="sxs-lookup"><span data-stu-id="defec-173">Let's add 27 LinkButtons to the page: one titled All along with one LinkButton for each letter of the alphabet.</span></span> <span data-ttu-id="defec-174">Si un visitante hace clic en LinkButton todas, el control GridView mostrará todos los usuarios.</span><span class="sxs-lookup"><span data-stu-id="defec-174">If a visitor clicks the All LinkButton, the GridView will show all of the users.</span></span> <span data-ttu-id="defec-175">Si hace clic en una letra determinada, se mostrará únicamente los usuarios cuyo nombre de usuario comienza por la letra seleccionada.</span><span class="sxs-lookup"><span data-stu-id="defec-175">If they click a particular letter, only those users whose username starts with the selected letter will be displayed.</span></span>

<span data-ttu-id="defec-176">Nuestra primera tarea consiste en agregar los controles LinkButton 27.</span><span class="sxs-lookup"><span data-stu-id="defec-176">Our first task is to add the 27 LinkButton controls.</span></span> <span data-ttu-id="defec-177">Sería una opción crear el 27 LinkButtons mediante declaración, una vez.</span><span class="sxs-lookup"><span data-stu-id="defec-177">One option would be to create the 27 LinkButtons declaratively, one at a time.</span></span> <span data-ttu-id="defec-178">Un enfoque más flexible es utilizar un control Repeater con un `ItemTemplate` que representa un control LinkButton y, a continuación, enlaza las opciones de filtrado para el control Repeater como un `string` matriz.</span><span class="sxs-lookup"><span data-stu-id="defec-178">A more flexible approach is to use a Repeater control with an `ItemTemplate` that renders a LinkButton and then binds the filtering options to the Repeater as a `string` array.</span></span>

<span data-ttu-id="defec-179">Comience por agregar un control Repeater a la página anterior del `UserAccounts` GridView.</span><span class="sxs-lookup"><span data-stu-id="defec-179">Start by adding a Repeater control to the page above the `UserAccounts` GridView.</span></span> <span data-ttu-id="defec-180">Establecer el repetidor `ID` propiedad `FilteringUI`.</span><span class="sxs-lookup"><span data-stu-id="defec-180">Set the Repeater's `ID` property to `FilteringUI`.</span></span> <span data-ttu-id="defec-181">Configurar las plantillas de Repeater para que su `ItemTemplate` representa un control LinkButton cuyo `Text` y `CommandName` propiedades se enlazan al elemento de matriz actual.</span><span class="sxs-lookup"><span data-stu-id="defec-181">Configure the Repeater's templates so that its `ItemTemplate` renders a LinkButton whose `Text` and `CommandName` properties are bound to the current array element.</span></span> <span data-ttu-id="defec-182">Como hemos visto en el <a id="_msoanchor_3"> </a> [ *asignar Roles a los usuarios* ](../roles/assigning-roles-to-users-cs.md) tutorial, esto puede realizarse mediante el `Container.DataItem` sintaxis de enlace de datos.</span><span class="sxs-lookup"><span data-stu-id="defec-182">As we saw in the <a id="_msoanchor_3"></a>[*Assigning Roles to Users*](../roles/assigning-roles-to-users-cs.md) tutorial, this can be accomplished using the `Container.DataItem` databinding syntax.</span></span> <span data-ttu-id="defec-183">Utilice el repetidor `SeparatorTemplate` para mostrar una línea vertical entre cada vínculo.</span><span class="sxs-lookup"><span data-stu-id="defec-183">Use the Repeater's `SeparatorTemplate` to display a vertical line between each link.</span></span>

[!code-aspx[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample6.aspx)]

<span data-ttu-id="defec-184">Para rellenar este Repeater con las opciones de filtrado deseadas, cree un método denominado `BindFilteringUI`.</span><span class="sxs-lookup"><span data-stu-id="defec-184">To populate this Repeater with the desired filtering options, create a method named `BindFilteringUI`.</span></span> <span data-ttu-id="defec-185">No olvide llamar a este método desde el `Page_Load` controlador de eventos en la primera carga de página.</span><span class="sxs-lookup"><span data-stu-id="defec-185">Be sure to call this method from the `Page_Load` event handler on the first page load.</span></span>

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample7.cs)]

<span data-ttu-id="defec-186">Este método especifica las opciones de filtrado como elementos en el `string` matriz `filterOptions`.</span><span class="sxs-lookup"><span data-stu-id="defec-186">This method specifies the filtering options as elements in the `string` array `filterOptions`.</span></span> <span data-ttu-id="defec-187">Para cada elemento de la matriz, el control Repeater representará un control LinkButton con su `Text` y `CommandName` las propiedades asignadas al valor del elemento de matriz.</span><span class="sxs-lookup"><span data-stu-id="defec-187">For each element in the array, the Repeater will render a LinkButton with its `Text` and `CommandName` properties assigned to the value of the array element.</span></span>

<span data-ttu-id="defec-188">La figura 5 muestra el `ManageUsers.aspx` página cuando se ve mediante un explorador.</span><span class="sxs-lookup"><span data-stu-id="defec-188">Figure 5 shows the `ManageUsers.aspx` page when viewed through a browser.</span></span>

<span data-ttu-id="defec-189">[![El control Repeater enumera 27 LinkButtons filtrados](building-an-interface-to-select-one-user-account-from-many-cs/_static/image14.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="defec-189">[![The Repeater Lists 27 Filtering LinkButtons](building-an-interface-to-select-one-user-account-from-many-cs/_static/image14.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image13.png)</span></span>

<span data-ttu-id="defec-190">**Figura 5**: El control Repeater enumera LinkButtons de filtrado de 27 ([haga clic aquí para ver imagen en tamaño completo](building-an-interface-to-select-one-user-account-from-many-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="defec-190">**Figure 5**: The Repeater Lists 27 Filtering LinkButtons  ([Click to view full-size image](building-an-interface-to-select-one-user-account-from-many-cs/_static/image15.png))</span></span>

> [!NOTE]
> <span data-ttu-id="defec-191">Los nombres de usuario pueden empezar con cualquier carácter, incluidos números y signos de puntuación.</span><span class="sxs-lookup"><span data-stu-id="defec-191">Usernames may start with any character, including numbers and punctuation.</span></span> <span data-ttu-id="defec-192">Con el fin de ver estas cuentas, el administrador tendrá que usar la opción LinkButton todas.</span><span class="sxs-lookup"><span data-stu-id="defec-192">In order to view these accounts, the administrator will have to use the All LinkButton option.</span></span> <span data-ttu-id="defec-193">Como alternativa, puede agregar un control LinkButton para devolver todas las cuentas de usuario que comienzan con un número.</span><span class="sxs-lookup"><span data-stu-id="defec-193">Alternatively, you could add a LinkButton to return all user accounts that start with a number.</span></span> <span data-ttu-id="defec-194">Dejar como un ejercicio para el lector.</span><span class="sxs-lookup"><span data-stu-id="defec-194">I leave this as an exercise for the reader.</span></span>

<span data-ttu-id="defec-195">Al hacer clic en cualquiera de los LinkButtons filtrados provoca una devolución de datos y genera el repetidor `ItemCommand` eventos, pero no hay ningún cambio en la cuadrícula porque aún no hemos escribir ningún código para filtrar los resultados.</span><span class="sxs-lookup"><span data-stu-id="defec-195">Clicking any of the filtering LinkButtons causes a postback and raises the Repeater's `ItemCommand` event, but there's no change in the grid because we've yet to write any code to filter the results.</span></span> <span data-ttu-id="defec-196">El `Membership` clase incluye un [ `FindUsersByName` método](https://technet.microsoft.com/library/system.web.security.membership.findusersbyname.aspx) que devuelve esas cuentas de usuario cuyo nombre de usuario coincide con un patrón de búsqueda especificado.</span><span class="sxs-lookup"><span data-stu-id="defec-196">The `Membership` class includes a [`FindUsersByName` method](https://technet.microsoft.com/library/system.web.security.membership.findusersbyname.aspx) that returns those user accounts whose username matches a specified search pattern.</span></span> <span data-ttu-id="defec-197">Podemos usar este método para recuperar sólo a las cuentas de usuario cuyos nombres de usuario comiencen con la letra especificada por el `CommandName` de LinkButton filtrado que se hizo clic.</span><span class="sxs-lookup"><span data-stu-id="defec-197">We can use this method to retrieve just those user accounts whose usernames start with the letter specified by the `CommandName` of the filtered LinkButton that was clicked.</span></span>

<span data-ttu-id="defec-198">Empiece actualizando el `ManageUser.aspx` clase de código subyacente de la página para que incluya una propiedad denominada `UsernameToMatch`.</span><span class="sxs-lookup"><span data-stu-id="defec-198">Start by updating the `ManageUser.aspx` page's code-behind class so that it includes a property named `UsernameToMatch`.</span></span> <span data-ttu-id="defec-199">Esta propiedad mantiene la cadena de filtro de nombre de usuario en las devoluciones de datos:</span><span class="sxs-lookup"><span data-stu-id="defec-199">This property persists the username filter string across postbacks:</span></span>

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample8.cs)]

<span data-ttu-id="defec-200">El `UsernameToMatch` propiedad almacena su valor se asigna a la `ViewState` colección mediante la clave UsernameToMatch.</span><span class="sxs-lookup"><span data-stu-id="defec-200">The `UsernameToMatch` property stores its value it is assigned into the `ViewState` collection using the key UsernameToMatch.</span></span> <span data-ttu-id="defec-201">Cuando se lee el valor de esta propiedad, comprueba para ver si existe un valor en el `ViewState` colección; en caso contrario, se devuelve el valor predeterminado, una cadena vacía.</span><span class="sxs-lookup"><span data-stu-id="defec-201">When this property's value is read, it checks to see if a value exists in the `ViewState` collection; if not, it returns the default value, an empty string.</span></span> <span data-ttu-id="defec-202">El `UsernameToMatch` propiedad exhibe un patrón común, es decir, conservar un valor de estado de vista para que los cambios a la propiedad se conservan entre las devoluciones de datos.</span><span class="sxs-lookup"><span data-stu-id="defec-202">The `UsernameToMatch` property exhibits a common pattern, namely persisting a value to view state so that any changes to the property are persisted across postbacks.</span></span> <span data-ttu-id="defec-203">Para obtener más información sobre este patrón, lea [Understanding ASP.NET View State](https://msdn.microsoft.com/library/ms972976.aspx).</span><span class="sxs-lookup"><span data-stu-id="defec-203">For more information on this pattern, read [Understanding ASP.NET View State](https://msdn.microsoft.com/library/ms972976.aspx).</span></span>

<span data-ttu-id="defec-204">A continuación, actualice el `BindUserAccounts` método así que, en lugar de llamar a `Membership.GetAllUsers`, llama a `Membership.FindUsersByName`, pasando el valor de la `UsernameToMatch` propiedad anexado con el carácter comodín SQL, %.</span><span class="sxs-lookup"><span data-stu-id="defec-204">Next, update the `BindUserAccounts` method so that instead of calling `Membership.GetAllUsers`, it calls `Membership.FindUsersByName`, passing in the value of the `UsernameToMatch` property appended with the SQL wildcard character, %.</span></span>

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample9.cs)]

<span data-ttu-id="defec-205">Para mostrar solo aquellos usuarios cuyo nombre de usuario se inicia con la letra A, establezca el `UsernameToMatch` propiedad a la A y, a continuación, llame a `BindUserAccounts`.</span><span class="sxs-lookup"><span data-stu-id="defec-205">To display just those users whose username starts with the letter A, set the `UsernameToMatch` property to A and then call `BindUserAccounts`.</span></span> <span data-ttu-id="defec-206">Esto daría lugar a una llamada a `Membership.FindUsersByName("A%")`, que devolverá todos los usuarios cuyo nombre de usuario comienza por A. Asimismo, para devolver *todas* a los usuarios, asignar una cadena vacía para el `UsernameToMatch` propiedad para que el `BindUserAccounts` método invocar `Membership.FindUsersByName("%")`, lo que devuelve todas las cuentas de usuario.</span><span class="sxs-lookup"><span data-stu-id="defec-206">This would result in a call to `Membership.FindUsersByName("A%")`, which will return all users whose username starts with A. Likewise, to return *all* users, assign an empty string to the `UsernameToMatch` property so that the `BindUserAccounts` method will invoke `Membership.FindUsersByName("%")`, thereby returning all user accounts.</span></span>

<span data-ttu-id="defec-207">Crear un controlador de eventos para el repetidor `ItemCommand` eventos.</span><span class="sxs-lookup"><span data-stu-id="defec-207">Create an event handler for the Repeater's `ItemCommand` event.</span></span> <span data-ttu-id="defec-208">Este evento se desencadena cuando se hace clic en uno de los filtros LinkButtons; se pasa el control LinkButton donde ha hecho clic `CommandName` valor a través de la `RepeaterCommandEventArgs` objeto.</span><span class="sxs-lookup"><span data-stu-id="defec-208">This event is raised whenever one of the filter LinkButtons is clicked; it is passed the clicked LinkButton's `CommandName` value through the `RepeaterCommandEventArgs` object.</span></span> <span data-ttu-id="defec-209">Se debe asignar el valor adecuado para el `UsernameToMatch` propiedad y, después, llame el `BindUserAccounts` método.</span><span class="sxs-lookup"><span data-stu-id="defec-209">We need to assign the appropriate value to the `UsernameToMatch` property and then call the `BindUserAccounts` method.</span></span> <span data-ttu-id="defec-210">Si el `CommandName` es, asigna una cadena vacía a `UsernameToMatch` para que se muestren todas las cuentas de usuario.</span><span class="sxs-lookup"><span data-stu-id="defec-210">If the `CommandName` is All, assign an empty string to `UsernameToMatch` so that all user accounts are displayed.</span></span> <span data-ttu-id="defec-211">De lo contrario, asigne el `CommandName` valor `UsernameToMatch`.</span><span class="sxs-lookup"><span data-stu-id="defec-211">Otherwise, assign the `CommandName` value to `UsernameToMatch`.</span></span>

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample10.cs)]

<span data-ttu-id="defec-212">Con este código en su lugar, pruebe la funcionalidad de filtrado.</span><span class="sxs-lookup"><span data-stu-id="defec-212">With this code in place, test out the filtering functionality.</span></span> <span data-ttu-id="defec-213">Cuando primero se visita la página, se muestran todas las cuentas de usuario (consulte la vuelta a la figura 5).</span><span class="sxs-lookup"><span data-stu-id="defec-213">When the page is first visited, all user accounts are displayed (refer back to Figure 5).</span></span> <span data-ttu-id="defec-214">Al hacer clic en LinkButton A produce un postback y filtra los resultados, mostrar solo esas cuentas de usuario que empiezan por A.</span><span class="sxs-lookup"><span data-stu-id="defec-214">Clicking the A LinkButton causes a postback and filters the results, displaying only those user accounts that start with A .</span></span>

<span data-ttu-id="defec-215">[![Use el filtrado LinkButtons para mostrar aquellos usuarios cuyo nombre de usuario se inicia con una letra determinada](building-an-interface-to-select-one-user-account-from-many-cs/_static/image17.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="defec-215">[![Use the Filtering LinkButtons to Display those Users Whose Username Starts with a Certain Letter](building-an-interface-to-select-one-user-account-from-many-cs/_static/image17.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image16.png)</span></span>

<span data-ttu-id="defec-216">**Figura 6**: Use el filtrado LinkButtons para mostrar esos usuarios cuyo nombre de usuario comience con una letra ciertos ([haga clic aquí para ver imagen en tamaño completo](building-an-interface-to-select-one-user-account-from-many-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="defec-216">**Figure 6**: Use the Filtering LinkButtons to Display those Users Whose Username Starts with a Certain Letter  ([Click to view full-size image](building-an-interface-to-select-one-user-account-from-many-cs/_static/image18.png))</span></span>

## <a name="step-4-updating-the-gridview-to-use-paging"></a><span data-ttu-id="defec-217">Paso 4: Actualizando el control GridView para usar la paginación</span><span class="sxs-lookup"><span data-stu-id="defec-217">Step 4: Updating the GridView to Use Paging</span></span>

<span data-ttu-id="defec-218">El control GridView se muestra en las figuras 5 y 6 muestra todos los registros devueltos desde el `FindUsersByName` método.</span><span class="sxs-lookup"><span data-stu-id="defec-218">The GridView shown in Figures 5 and 6 lists all of the records returned from the `FindUsersByName` method.</span></span> <span data-ttu-id="defec-219">Si hay cientos o miles de cuentas de usuario Esto puede conducir a la sobrecarga de información cuando se ven todas las cuentas (como es el caso al hacer clic en LinkButton todas o cuando se visita inicialmente la página).</span><span class="sxs-lookup"><span data-stu-id="defec-219">If there are hundreds or thousands of user accounts this can lead to information overload when viewing all of the accounts (as is the case when clicking the All LinkButton or when initially visiting the page).</span></span> <span data-ttu-id="defec-220">Para ayudar a presentar las cuentas de usuario en fragmentos más manejables, vamos a configurar el control GridView para mostrar 10 cuentas de usuario a la vez.</span><span class="sxs-lookup"><span data-stu-id="defec-220">To help present the user accounts in more manageable chunks, let's configure the GridView to display 10 user accounts at a time.</span></span>

<span data-ttu-id="defec-221">El control GridView ofrece dos tipos de paginación:</span><span class="sxs-lookup"><span data-stu-id="defec-221">The GridView control offers two types of paging:</span></span>

- <span data-ttu-id="defec-222">**Paginación predeterminada** : fácil de implementar, pero ineficaz.</span><span class="sxs-lookup"><span data-stu-id="defec-222">**Default paging** - easy to implement, but inefficient.</span></span> <span data-ttu-id="defec-223">En pocas palabras, no tiene valor predeterminado de paginación del control GridView espera *todas* los registros de su origen de datos.</span><span class="sxs-lookup"><span data-stu-id="defec-223">In a nutshell, with default paging the GridView expects *all* of the records from its data source.</span></span> <span data-ttu-id="defec-224">A continuación, solo muestra la página adecuada de registros.</span><span class="sxs-lookup"><span data-stu-id="defec-224">It then only displays the appropriate page of records.</span></span>
- <span data-ttu-id="defec-225">**Paginación personalizada** -requiere más trabajo para implementar, pero es más eficaz que una paginación predeterminada porque con personalizada que pagine los datos en origen devuelve solo el conjunto de registros que deben mostrarse.</span><span class="sxs-lookup"><span data-stu-id="defec-225">**Custom paging** - requires more work to implement, but is more efficient than default paging because with custom paging the data source returns only the precise set of records to display.</span></span>

<span data-ttu-id="defec-226">La diferencia de rendimiento entre el valor predeterminado y la paginación personalizada puede ser bastante considerable al paginar a través de miles de registros.</span><span class="sxs-lookup"><span data-stu-id="defec-226">The performance difference between default and custom paging can be quite substantial when paging through thousands of records.</span></span> <span data-ttu-id="defec-227">Dado que estamos creando esta interfaz suponiendo que no haya puede ser de cientos o miles de cuentas de usuario, vamos a usar paginación personalizada.</span><span class="sxs-lookup"><span data-stu-id="defec-227">Because we are building this interface assuming that there may be hundreds or thousands of user accounts, let's use custom paging.</span></span>

> [!NOTE]
> <span data-ttu-id="defec-228">Para obtener una explicación más exhaustiva sobre las diferencias entre el valor predeterminado y la paginación personalizada, así como los desafíos implicados en implementar paginación personalizada, consulte [eficazmente paginar a través de grandes cantidades de datos](https://asp.net/learn/data-access/tutorial-25-cs.aspx).</span><span class="sxs-lookup"><span data-stu-id="defec-228">For a more thorough discussion on the differences between default and custom paging, as well as the challenges involved in implementing custom paging, refer to [Efficiently Paging Through Large Amounts of Data](https://asp.net/learn/data-access/tutorial-25-cs.aspx).</span></span> <span data-ttu-id="defec-229">Para un análisis de la diferencia de rendimiento entre el valor predeterminado y la paginación personalizada, vea [paginación personalizada en ASP.NET con SQL Server 2005](http://aspnet.4guysfromrolla.com/articles/031506-1.aspx).</span><span class="sxs-lookup"><span data-stu-id="defec-229">For some analysis of the performance difference between default and custom paging, see [Custom Paging in ASP.NET with SQL Server 2005](http://aspnet.4guysfromrolla.com/articles/031506-1.aspx).</span></span>

<span data-ttu-id="defec-230">Para implementar la paginación personalizada, que primero es necesario algún mecanismo por el que se va a recuperar el subconjunto de registros mostrados por el control GridView preciso.</span><span class="sxs-lookup"><span data-stu-id="defec-230">To implement custom paging we first need some mechanism by which to retrieve the precise subset of records being displayed by the GridView.</span></span> <span data-ttu-id="defec-231">La buena noticia es que la `Membership` la clase `FindUsersByName` método tiene una sobrecarga que nos permite especificar el índice de la página y el tamaño de página y devuelve solo esas cuentas de usuario que se encuentran dentro de ese intervalo de registros.</span><span class="sxs-lookup"><span data-stu-id="defec-231">The good news is that the `Membership` class's `FindUsersByName` method has an overload that allows us to specify the page index and page size, and returns only those user accounts that fall within that range of records.</span></span>

<span data-ttu-id="defec-232">En concreto, esta sobrecarga tiene la siguiente firma: [ `FindUsersByName(usernameToMatch, pageIndex, pageSize, totalRecords)` ](https://msdn.microsoft.com/library/fa5st8b2.aspx).</span><span class="sxs-lookup"><span data-stu-id="defec-232">In particular, this overload has the following signature: [`FindUsersByName(usernameToMatch, pageIndex, pageSize, totalRecords)`](https://msdn.microsoft.com/library/fa5st8b2.aspx).</span></span>

<span data-ttu-id="defec-233">El *pageIndex* parámetro especifica la página de cuentas de usuario para devolver; *pageSize* indica el número de registros que se muestran por página.</span><span class="sxs-lookup"><span data-stu-id="defec-233">The *pageIndex* parameter specifies the page of user accounts to return; *pageSize* indicates how many records to display per page.</span></span> <span data-ttu-id="defec-234">El *totalRecords* parámetro es un `out` parámetro que devuelve el número de cuentas de usuario total en el almacén del usuario.</span><span class="sxs-lookup"><span data-stu-id="defec-234">The *totalRecords* parameter is an `out` parameter that returns the number of total user accounts in the user store.</span></span>

> [!NOTE]
> <span data-ttu-id="defec-235">Los datos devueltos por `FindUsersByName` se ordena por nombre de usuario; no se pueden personalizar los criterios de ordenación.</span><span class="sxs-lookup"><span data-stu-id="defec-235">The data returned by `FindUsersByName` is sorted by username; the sort criteria cannot be customized.</span></span>

<span data-ttu-id="defec-236">El control GridView puede configurarse para utilizar la paginación personalizada, pero solo cuando se enlaza a un control ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="defec-236">The GridView can be configured to utilize custom paging, but only when bound to an ObjectDataSource control.</span></span> <span data-ttu-id="defec-237">Para que el control ObjectDataSource implementar la paginación personalizada, necesita dos métodos: uno que se pasa a un índice de fila inicial y el número máximo de registros que deben mostrarse, y devuelve el subconjunto de registros que se encuentran dentro de ese intervalo; preciso y un método que devuelve el número total de registros que se va a paginar a través.</span><span class="sxs-lookup"><span data-stu-id="defec-237">For the ObjectDataSource control to implement custom paging, it requires two methods: one that is passed a start row index and the maximum number of records to display, and returns the precise subset of records that fall within that span; and a method that returns the total number of records being paged through.</span></span> <span data-ttu-id="defec-238">El `FindUsersByName` sobrecarga acepta un índice de la página y el tamaño de página y devuelve el número total de registros a través de un `out` parámetro.</span><span class="sxs-lookup"><span data-stu-id="defec-238">The `FindUsersByName` overload accepts a page index and page size, and returns the total number of records through an `out` parameter.</span></span> <span data-ttu-id="defec-239">Por tanto, hay una falta de coincidencia de interfaz.</span><span class="sxs-lookup"><span data-stu-id="defec-239">So there is an interface mismatch here.</span></span>

<span data-ttu-id="defec-240">Una opción sería crear una clase de proxy que expone la interfaz espera ObjectDataSource y, a continuación, se llama internamente el `FindUsersByName` método.</span><span class="sxs-lookup"><span data-stu-id="defec-240">One option would be to create a proxy class that exposes the interface the ObjectDataSource expects, and then internally calls the `FindUsersByName` method.</span></span> <span data-ttu-id="defec-241">Otra opción - y uno que para este artículo usaremos - consiste en crear nuestra propia interfaz de paginación y usarla en lugar de la interfaz de paginación integrada de GridView.</span><span class="sxs-lookup"><span data-stu-id="defec-241">Another option - and the one we'll use for this article - is to create our own paging interface and use that instead of the GridView's built-in paging interface.</span></span>

### <a name="creating-a-first-previous-next-last-paging-interface"></a><span data-ttu-id="defec-242">Crear una primera, anterior, a continuación, última interfaz de paginación</span><span class="sxs-lookup"><span data-stu-id="defec-242">Creating a First, Previous, Next, Last Paging Interface</span></span>

<span data-ttu-id="defec-243">Vamos a crear una interfaz de paginación con el primero, anterior, siguiente y última LinkButtons.</span><span class="sxs-lookup"><span data-stu-id="defec-243">Let's build a paging interface with First, Previous, Next, and Last LinkButtons.</span></span> <span data-ttu-id="defec-244">El primer LinkButton, al hacer clic, llevará al usuario a la primera página de datos, mientras que el anterior le devolverá a la página anterior.</span><span class="sxs-lookup"><span data-stu-id="defec-244">The First LinkButton, when clicked, will take the user to the first page of data, whereas Previous will return him to the previous page.</span></span> <span data-ttu-id="defec-245">Del mismo modo, siguiente y último moverá al usuario a la página siguiente y última, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="defec-245">Likewise, Next and Last will move the user to the next and last page, respectively.</span></span> <span data-ttu-id="defec-246">Agregue los cuatro controles LinkButton debajo el `UserAccounts` GridView.</span><span class="sxs-lookup"><span data-stu-id="defec-246">Add the four LinkButton controls beneath the `UserAccounts` GridView.</span></span>

[!code-aspx[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample11.aspx)]

<span data-ttu-id="defec-247">A continuación, cree un controlador de eventos para cada uno de lo LinkButton `Click` eventos.</span><span class="sxs-lookup"><span data-stu-id="defec-247">Next, create an event handler for each of the LinkButton's `Click` events.</span></span>

<span data-ttu-id="defec-248">Figura 7 muestra los cuatro LinkButtons cuando se ven a través de la vista de diseño de Visual Web Developer.</span><span class="sxs-lookup"><span data-stu-id="defec-248">Figure 7 shows the four LinkButtons when viewed through the Visual Web Developer Design view.</span></span>

<span data-ttu-id="defec-249">[![Agregar en primer lugar, anterior, a continuación, y la última LinkButtons bajo el control GridView](building-an-interface-to-select-one-user-account-from-many-cs/_static/image20.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="defec-249">[![Add First, Previous, Next, and Last LinkButtons Beneath the GridView](building-an-interface-to-select-one-user-account-from-many-cs/_static/image20.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image19.png)</span></span>

<span data-ttu-id="defec-250">**Figura 7**: En primer lugar, agregue anterior, siguiente y última LinkButtons debajo de GridView ([haga clic aquí para ver imagen en tamaño completo](building-an-interface-to-select-one-user-account-from-many-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="defec-250">**Figure 7**: Add First, Previous, Next, and Last LinkButtons Beneath the GridView  ([Click to view full-size image](building-an-interface-to-select-one-user-account-from-many-cs/_static/image21.png))</span></span>

### <a name="keeping-track-of-the-current-page-index"></a><span data-ttu-id="defec-251">Realizar el seguimiento del índice de la página actual</span><span class="sxs-lookup"><span data-stu-id="defec-251">Keeping Track of the Current Page Index</span></span>

<span data-ttu-id="defec-252">Cuando un usuario visita por primera vez el `ManageUsers.aspx` página o hace clic en uno de filtrado de los botones, deseamos mostrar la primera página de datos en GridView.</span><span class="sxs-lookup"><span data-stu-id="defec-252">When a user first visits the `ManageUsers.aspx` page or clicks one of the filtering buttons, we want to display the first page of data in the GridView.</span></span> <span data-ttu-id="defec-253">Sin embargo, cuando el usuario hace clic en uno de los vínculos de desplazamiento, se debe actualizar el índice de página.</span><span class="sxs-lookup"><span data-stu-id="defec-253">When the user clicks one of the navigation LinkButtons, however, we need to update the page index.</span></span> <span data-ttu-id="defec-254">Para mantener el índice de página y el número de registros que se muestran por página, agregue las dos propiedades siguientes a la clase de código subyacente de la página:</span><span class="sxs-lookup"><span data-stu-id="defec-254">To maintain the page index and the number of records to display per page, add the following two properties to the page's code-behind class:</span></span>

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample12.cs)]

<span data-ttu-id="defec-255">Al igual que el `UsernameToMatch` propiedad, el `PageIndex` propiedad conserva su valor para el estado de vista.</span><span class="sxs-lookup"><span data-stu-id="defec-255">Like the `UsernameToMatch` property, the `PageIndex` property persists its value to view state.</span></span> <span data-ttu-id="defec-256">Solo lectura `PageSize` propiedad devuelve un valor codificado de forma rígida, 10.</span><span class="sxs-lookup"><span data-stu-id="defec-256">The read-only `PageSize` property returns a hard-coded value, 10.</span></span> <span data-ttu-id="defec-257">Se puede invitar a sitúa para actualizar esta propiedad para utilizar el mismo patrón que `PageIndex`y, a continuación, para aumentar la `ManageUsers.aspx` página tal que la persona que visita la página puede especificar cuántas cuentas de usuario que se muestran por página.</span><span class="sxs-lookup"><span data-stu-id="defec-257">I invite the interested reader to update this property to use the same pattern as `PageIndex`, and then to augment the `ManageUsers.aspx` page such that the person visiting the page can specify how many user accounts to display per page.</span></span>

### <a name="retrieving-just-the-current-pages-records-updating-the-page-index-and-enabling-and-disabling-the-paging-interface-linkbuttons"></a><span data-ttu-id="defec-258">Recuperar sólo los registros de la página actual, actualizando el índice de página y habilitar y deshabilitar el LinkButtons de interfaz de paginación</span><span class="sxs-lookup"><span data-stu-id="defec-258">Retrieving Just the Current Page's Records, Updating the Page Index, and Enabling and Disabling the Paging Interface LinkButtons</span></span>

<span data-ttu-id="defec-259">Con la interfaz de paginación en su lugar y `PageIndex` y `PageSize` agregan propiedades, estamos preparados para actualizar el `BindUserAccounts` método para que use adecuado `FindUsersByName` sobrecargar.</span><span class="sxs-lookup"><span data-stu-id="defec-259">With the paging interface in place and the `PageIndex` and `PageSize` properties added, we are ready to update the `BindUserAccounts` method so that it uses the appropriate `FindUsersByName` overload.</span></span> <span data-ttu-id="defec-260">Además, es necesario que este método habilita o deshabilita dependiendo de qué página se muestra la interfaz de paginación.</span><span class="sxs-lookup"><span data-stu-id="defec-260">Additionally, we need to have this method enable or disable the paging interface depending on what page is being displayed.</span></span> <span data-ttu-id="defec-261">Al ver la primera página de datos, se deben deshabilitar los vínculos primero y anterior; A continuación y última debe deshabilitarse al ver la última página.</span><span class="sxs-lookup"><span data-stu-id="defec-261">When viewing the first page of data, the First and Previous links should be disabled; Next and Last should be disabled when viewing the last page.</span></span>

<span data-ttu-id="defec-262">Actualice el método `BindUserAccounts` con el código siguiente:</span><span class="sxs-lookup"><span data-stu-id="defec-262">Update the `BindUserAccounts` method with the following code:</span></span>

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample13.cs)]

<span data-ttu-id="defec-263">Tenga en cuenta que el número total de registros que se va a paginar a través de viene determinada por el último parámetro de la `FindUsersByName` método.</span><span class="sxs-lookup"><span data-stu-id="defec-263">Note that the total number of records being paged through is determined by the last parameter of the `FindUsersByName` method.</span></span> <span data-ttu-id="defec-264">Se trata de un `out` parámetro, por lo que necesitamos en primer lugar, declare una variable que contenga este valor (`totalRecords`) y, a continuación, un prefijo con el `out` palabra clave.</span><span class="sxs-lookup"><span data-stu-id="defec-264">This is an `out` parameter, so we need to first declare a variable to hold this value (`totalRecords`) and then prefix it with the `out` keyword.</span></span>

<span data-ttu-id="defec-265">Después de que se devuelven a la página de cuentas de usuario especificada, el cuatro LinkButtons habilitados o deshabilitados, dependiendo de si se está viendo la primera o última página de datos.</span><span class="sxs-lookup"><span data-stu-id="defec-265">After the specified page of user accounts are returned, the four LinkButtons are either enabled or disabled, depending on whether the first or last page of data is being viewed.</span></span>

<span data-ttu-id="defec-266">El último paso es escribir el código para 'LinkButtons cuatro `Click` controladores de eventos.</span><span class="sxs-lookup"><span data-stu-id="defec-266">The last step is to write the code for the four LinkButtons' `Click` event handlers.</span></span> <span data-ttu-id="defec-267">Estos controladores de eventos que necesite actualizar el `PageIndex` propiedad y, a continuación, volver a enlazar los datos en el control GridView a través de una llamada a `BindUserAccounts`.</span><span class="sxs-lookup"><span data-stu-id="defec-267">These event handlers need to update the `PageIndex` property and then rebind the data to the GridView via a call to `BindUserAccounts`.</span></span> <span data-ttu-id="defec-268">La primera, anterior y siguientes controladores de eventos son muy sencillos.</span><span class="sxs-lookup"><span data-stu-id="defec-268">The First, Previous, and Next event handlers are very simple.</span></span> <span data-ttu-id="defec-269">El `Click` controlador de eventos para el último control LinkButton, sin embargo, es un poco más complejo porque es necesario determinar cuántos registros se muestran con el fin de determinar el último índice de página.</span><span class="sxs-lookup"><span data-stu-id="defec-269">The `Click` event handler for the Last LinkButton, however, is a bit more complex because we need to determine how many records are being displayed in order to determine the last page index.</span></span>

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample14.cs)]

<span data-ttu-id="defec-270">Las figuras 8 y 9 muestran la interfaz de paginación personalizada en acción.</span><span class="sxs-lookup"><span data-stu-id="defec-270">Figures 8 and 9 show the custom paging interface in action.</span></span> <span data-ttu-id="defec-271">La figura 8 muestra el `ManageUsers.aspx` página al ver la primera página de datos para todas las cuentas de usuario.</span><span class="sxs-lookup"><span data-stu-id="defec-271">Figure 8 shows the `ManageUsers.aspx` page when viewing the first page of data for all user accounts.</span></span> <span data-ttu-id="defec-272">Tenga en cuenta que se muestran sólo el 10 de las cuentas de 13.</span><span class="sxs-lookup"><span data-stu-id="defec-272">Note that only 10 of the 13 accounts are displayed.</span></span> <span data-ttu-id="defec-273">Al hacer clic en el vínculo siguiente o último produce un postback, las actualizaciones de la `PageIndex` a 1 y se enlaza a la cuadrícula de cuentas de la segunda página del usuario (consulte la figura 9).</span><span class="sxs-lookup"><span data-stu-id="defec-273">Clicking the Next or Last link causes a postback, updates the `PageIndex` to 1, and binds the second page of user accounts to the grid (see Figure 9).</span></span>

<span data-ttu-id="defec-274">[![Se muestran las primeras cuentas de usuario de 10](building-an-interface-to-select-one-user-account-from-many-cs/_static/image23.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="defec-274">[![The First 10 User Accounts are Displayed](building-an-interface-to-select-one-user-account-from-many-cs/_static/image23.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image22.png)</span></span>

<span data-ttu-id="defec-275">**Figura 8**: Se muestran las primeras cuentas de usuario de 10 ([haga clic aquí para ver imagen en tamaño completo](building-an-interface-to-select-one-user-account-from-many-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="defec-275">**Figure 8**: The First 10 User Accounts are Displayed  ([Click to view full-size image](building-an-interface-to-select-one-user-account-from-many-cs/_static/image24.png))</span></span>

<span data-ttu-id="defec-276">[![Al hacer clic en el vínculo siguiente muestra la segunda página de cuentas de usuario](building-an-interface-to-select-one-user-account-from-many-cs/_static/image26.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="defec-276">[![Clicking the Next Link Displays the Second Page of User Accounts](building-an-interface-to-select-one-user-account-from-many-cs/_static/image26.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image25.png)</span></span>

<span data-ttu-id="defec-277">**Figura 9**: Al hacer clic en el vínculo siguiente muestra la segunda página de las cuentas de usuario ([haga clic aquí para ver imagen en tamaño completo](building-an-interface-to-select-one-user-account-from-many-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="defec-277">**Figure 9**: Clicking the Next Link Displays the Second Page of User Accounts  ([Click to view full-size image](building-an-interface-to-select-one-user-account-from-many-cs/_static/image27.png))</span></span>

## <a name="summary"></a><span data-ttu-id="defec-278">Resumen</span><span class="sxs-lookup"><span data-stu-id="defec-278">Summary</span></span>

<span data-ttu-id="defec-279">A menudo, los administradores necesitan seleccionar un usuario de la lista de cuentas.</span><span class="sxs-lookup"><span data-stu-id="defec-279">Administrators often need to select a user from the list of accounts.</span></span> <span data-ttu-id="defec-280">En los tutoriales anteriores hemos examinado con una lista desplegable que se rellena con los usuarios, pero este enfoque no se escala bien.</span><span class="sxs-lookup"><span data-stu-id="defec-280">In previous tutorials we looked at using a drop-down list populated with the users, but this approach does not scale well.</span></span> <span data-ttu-id="defec-281">En este tutorial hemos explorado una alternativa mejor: una interfaz filterable cuyos resultados se muestran en un control GridView paginado.</span><span class="sxs-lookup"><span data-stu-id="defec-281">In this tutorial we explored a better alternative: a filterable interface whose results are displayed in a paged GridView.</span></span> <span data-ttu-id="defec-282">Con esta interfaz de usuario, los administradores pueden rápida y eficaz busque y seleccione una cuenta de usuario entre miles.</span><span class="sxs-lookup"><span data-stu-id="defec-282">With this user interface, administrators can quickly and efficiently locate and select one user account among thousands.</span></span>

<span data-ttu-id="defec-283">Feliz programación.</span><span class="sxs-lookup"><span data-stu-id="defec-283">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="defec-284">Información adicional</span><span class="sxs-lookup"><span data-stu-id="defec-284">Further Reading</span></span>

<span data-ttu-id="defec-285">Para obtener más información sobre los temas tratados en este tutorial, consulte los siguientes recursos:</span><span class="sxs-lookup"><span data-stu-id="defec-285">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="defec-286">Paginación personalizada en ASP.NET con SQL Server 2005</span><span class="sxs-lookup"><span data-stu-id="defec-286">Custom Paging in ASP.NET with SQL Server 2005</span></span>](http://aspnet.4guysfromrolla.com/articles/031506-1.aspx)
- [<span data-ttu-id="defec-287">Página de forma eficaz a través de grandes cantidades de datos</span><span class="sxs-lookup"><span data-stu-id="defec-287">Efficiently Paging Through Large Amounts of Data</span></span>](https://asp.net/learn/data-access/tutorial-25-cs.aspx)
- [<span data-ttu-id="defec-288">Implementar su propia herramienta de administración del sitio Web</span><span class="sxs-lookup"><span data-stu-id="defec-288">Rolling Your Own Website Administration Tool</span></span>](http://aspnet.4guysfromrolla.com/articles/052307-1.aspx)

### <a name="about-the-author"></a><span data-ttu-id="defec-289">Acerca del autor</span><span class="sxs-lookup"><span data-stu-id="defec-289">About the Author</span></span>

<span data-ttu-id="defec-290">Scott Mitchell, autor de varios libros sobre ASP/ASP.NET y fundador de 4GuysFromRolla.com, ha estado trabajando con tecnologías Web de Microsoft desde 1998.</span><span class="sxs-lookup"><span data-stu-id="defec-290">Scott Mitchell, author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="defec-291">Scott trabaja como consultor independiente, instructor y escritor.</span><span class="sxs-lookup"><span data-stu-id="defec-291">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="defec-292">Su último libro es *[SAM enseñar a usted mismo ASP.NET 2.0 en 24 horas](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span><span class="sxs-lookup"><span data-stu-id="defec-292">His latest book is *[Sams Teach Yourself ASP.NET 2.0 in 24 Hours](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span></span> <span data-ttu-id="defec-293">Puede ponerse en contacto Scott [ mitchell@4guysfromrolla.com ](mailto:mitchell@4guysfromrolla.com) o a través de su blog en [ http://ScottOnWriting.NET ](http://scottonwriting.net/).</span><span class="sxs-lookup"><span data-stu-id="defec-293">Scott can be reached at [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="defec-294">Agradecimientos especiales a</span><span class="sxs-lookup"><span data-stu-id="defec-294">Special Thanks To</span></span>

<span data-ttu-id="defec-295">Esta serie de tutoriales ha sido revisada por muchos revisores útiles.</span><span class="sxs-lookup"><span data-stu-id="defec-295">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="defec-296">Revisor de clientes potencial para este tutorial era Alicja Maziarz.</span><span class="sxs-lookup"><span data-stu-id="defec-296">Lead reviewer for this tutorial was Alicja Maziarz.</span></span> <span data-ttu-id="defec-297">¿Está interesado en leer mi próximos artículos de MSDN?</span><span class="sxs-lookup"><span data-stu-id="defec-297">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="defec-298">Si es así, envíeme una línea en [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="defec-298">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="defec-299">Siguiente</span><span class="sxs-lookup"><span data-stu-id="defec-299">Next</span></span>](recovering-and-changing-passwords-cs.md)
