---
uid: web-forms/overview/deployment/web-deployment-in-the-enterprise/understanding-the-project-file
title: Descripción del archivo de proyecto | Microsoft Docs
author: jrjlee
description: Los archivos de proyecto de Microsoft Build Engine (MSBuild) se encuentran en el núcleo del proceso de compilación e implementación. En este tema se empieza con una introducción a los conceptos de MSBuild...
ms.author: riande
ms.date: 05/04/2012
ms.assetid: 07978d9d-341c-4524-bcba-62976f390f77
msc.legacyurl: /web-forms/overview/deployment/web-deployment-in-the-enterprise/understanding-the-project-file
msc.type: authoredcontent
ms.openlocfilehash: 419fe51aaf65bddcc2c50380f099f842a8d9439c
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 03/06/2020
ms.locfileid: "78508057"
---
# <a name="understanding-the-project-file"></a><span data-ttu-id="49659-104">Descripción del archivo de proyecto</span><span class="sxs-lookup"><span data-stu-id="49659-104">Understanding the project file</span></span>

<span data-ttu-id="49659-105">por [Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="49659-105">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="49659-106">Descargar PDF</span><span class="sxs-lookup"><span data-stu-id="49659-106">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="49659-107">Los archivos de proyecto de Microsoft Build Engine (MSBuild) se encuentran en el núcleo del proceso de compilación e implementación.</span><span class="sxs-lookup"><span data-stu-id="49659-107">Microsoft Build Engine (MSBuild) project files lie at the heart of the build and deployment process.</span></span> <span data-ttu-id="49659-108">En este tema se empieza con una introducción a los conceptos de MSBuild y el archivo de proyecto.</span><span class="sxs-lookup"><span data-stu-id="49659-108">This topic starts with a conceptual overview of MSBuild and the project file.</span></span> <span data-ttu-id="49659-109">Describe los componentes clave que se aplicarán al trabajar con archivos de proyecto y funciona a través de un ejemplo de cómo puede usar archivos de proyecto para implementar aplicaciones reales.</span><span class="sxs-lookup"><span data-stu-id="49659-109">It describes the key components you'll come across when you work with project files, and it works through an example of how you can use project files to deploy real-world applications.</span></span>
> 
> <span data-ttu-id="49659-110">Temas que se abordarán:</span><span class="sxs-lookup"><span data-stu-id="49659-110">What you'll learn:</span></span>
> 
> - <span data-ttu-id="49659-111">Cómo usa MSBuild los archivos de proyecto de MSBuild para compilar proyectos.</span><span class="sxs-lookup"><span data-stu-id="49659-111">How MSBuild uses MSBuild project files to build projects.</span></span>
> - <span data-ttu-id="49659-112">Cómo se integra MSBuild con tecnologías de implementación, como la herramienta de implementación web de Internet Information Services (IIS) (Web Deploy).</span><span class="sxs-lookup"><span data-stu-id="49659-112">How MSBuild integrates with deployment technologies, like the Internet Information Services (IIS) Web Deployment Tool (Web Deploy).</span></span>
> - <span data-ttu-id="49659-113">Cómo comprender los componentes clave de un archivo de proyecto.</span><span class="sxs-lookup"><span data-stu-id="49659-113">How to understand the key components of a project file.</span></span>
> - <span data-ttu-id="49659-114">Cómo puede usar archivos de proyecto para compilar e implementar aplicaciones complejas.</span><span class="sxs-lookup"><span data-stu-id="49659-114">How you can use project files to build and deploy complex applications.</span></span>

## <a name="msbuild-and-the-project-file"></a><span data-ttu-id="49659-115">MSBuild y el archivo de proyecto</span><span class="sxs-lookup"><span data-stu-id="49659-115">MSBuild and the Project File</span></span>

<span data-ttu-id="49659-116">Al crear y compilar soluciones en Visual Studio, Visual Studio usa MSBuild para compilar cada proyecto en la solución.</span><span class="sxs-lookup"><span data-stu-id="49659-116">When you create and build solutions in Visual Studio, Visual Studio uses MSBuild to build each project in your solution.</span></span> <span data-ttu-id="49659-117">Cada proyecto de Visual Studio incluye un archivo de proyecto de MSBuild, con una extensión de archivo que refleja&#x2014;el tipo de proyecto C# , por ejemplo, un proyecto (. csproj), un proyecto de Basic.net visual (. vbproj) o un proyecto de base de datos (. dbproj).</span><span class="sxs-lookup"><span data-stu-id="49659-117">Every Visual Studio project includes an MSBuild project file, with a file extension that reflects the type of project&#x2014;for example, a C# project (.csproj), a Visual Basic.NET project (.vbproj), or a database project (.dbproj).</span></span> <span data-ttu-id="49659-118">Para compilar un proyecto, MSBuild debe procesar el archivo de proyecto asociado al proyecto.</span><span class="sxs-lookup"><span data-stu-id="49659-118">In order to build a project, MSBuild must process the project file associated with the project.</span></span> <span data-ttu-id="49659-119">El archivo de proyecto es un documento XML que contiene toda la información y las instrucciones que MSBuild necesita para compilar el proyecto, como el contenido que se debe incluir, los requisitos de plataforma, la información de control de versiones, la configuración del servidor web o del servidor de bases de datos, y el tareas que se deben realizar.</span><span class="sxs-lookup"><span data-stu-id="49659-119">The project file is an XML document that contains all the information and instructions that MSBuild needs in order to build your project, like the content to include, the platform requirements, versioning information, web server or database server settings, and the tasks that must be performed.</span></span>

<span data-ttu-id="49659-120">Los archivos de proyecto de MSBuild se basan en el [esquema XML de MSBuild](/visualstudio/msbuild/msbuild-project-file-schema-reference)y, como resultado, el proceso de compilación está completamente abierto y transparente.</span><span class="sxs-lookup"><span data-stu-id="49659-120">MSBuild project files are based on the [MSBuild XML schema](/visualstudio/msbuild/msbuild-project-file-schema-reference), and as a result the build process is entirely open and transparent.</span></span> <span data-ttu-id="49659-121">Además, no es necesario instalar Visual Studio para poder usar el motor&#x2014;de MSBuild. el ejecutable de MSBuild. exe forma parte del .NET Framework y se puede ejecutar desde un símbolo del sistema.</span><span class="sxs-lookup"><span data-stu-id="49659-121">In addition, you don't need to install Visual Studio in order to use the MSBuild engine&#x2014;the MSBuild.exe executable is part of the .NET Framework, and you can run it from a command prompt.</span></span> <span data-ttu-id="49659-122">Como programador, puede crear sus propios archivos de proyecto de MSBuild, mediante el esquema XML de MSBuild, para imponer un control sofisticado y preciso sobre cómo se compilan e implementan los proyectos.</span><span class="sxs-lookup"><span data-stu-id="49659-122">As a developer, you can craft your own MSBuild project files, using the MSBuild XML schema, to impose sophisticated and fine-grained control over how your projects are built and deployed.</span></span> <span data-ttu-id="49659-123">Estos archivos de proyecto personalizados funcionan exactamente de la misma manera que los archivos de proyecto que Visual Studio genera automáticamente.</span><span class="sxs-lookup"><span data-stu-id="49659-123">These custom project files work in exactly the same way as the project files that Visual Studio generates automatically.</span></span>

> [!NOTE]
> <span data-ttu-id="49659-124">También puede usar archivos de proyecto de MSBuild con el servicio Team Build en Team Foundation Server (TFS).</span><span class="sxs-lookup"><span data-stu-id="49659-124">You can also use MSBuild project files with the Team Build service in Team Foundation Server (TFS).</span></span> <span data-ttu-id="49659-125">Por ejemplo, puede usar archivos de proyecto en escenarios de integración continua (CI) para automatizar la implementación en un entorno de prueba cuando se protege un nuevo código.</span><span class="sxs-lookup"><span data-stu-id="49659-125">For example, you can use project files in continuous integration (CI) scenarios to automate deployment to a test environment when new code is checked in.</span></span> <span data-ttu-id="49659-126">Para obtener más información, consulte [configuración de Team Foundation Server para la implementación web automática](../configuring-team-foundation-server-for-web-deployment/configuring-team-foundation-server-for-web-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="49659-126">For more information, see [Configuring Team Foundation Server for Automated Web Deployment](../configuring-team-foundation-server-for-web-deployment/configuring-team-foundation-server-for-web-deployment.md).</span></span>

### <a name="project-file-naming-conventions"></a><span data-ttu-id="49659-127">Convenciones de nomenclatura de archivos de proyecto</span><span class="sxs-lookup"><span data-stu-id="49659-127">Project File Naming Conventions</span></span>

<span data-ttu-id="49659-128">Cuando cree sus propios archivos de proyecto, puede utilizar cualquier extensión de archivo que desee.</span><span class="sxs-lookup"><span data-stu-id="49659-128">When you create your own project files, you can use any file extension you like.</span></span> <span data-ttu-id="49659-129">Sin embargo, para facilitar la comprensión de las soluciones, debe usar estas convenciones comunes:</span><span class="sxs-lookup"><span data-stu-id="49659-129">However, to make your solutions easier for others to understand, you should use these common conventions:</span></span>

- <span data-ttu-id="49659-130">Use la extensión. proj cuando cree un archivo de proyecto que compile proyectos de.</span><span class="sxs-lookup"><span data-stu-id="49659-130">Use the .proj extension when you create a project file that builds projects.</span></span>
- <span data-ttu-id="49659-131">Use la extensión. targets al crear un archivo de proyecto reutilizable para importar en otros archivos de proyecto.</span><span class="sxs-lookup"><span data-stu-id="49659-131">Use the .targets extension when you create a reusable project file to import into other project files.</span></span> <span data-ttu-id="49659-132">Los archivos con una extensión. targets no suelen compilar nada, simplemente contienen instrucciones que puede importar en los archivos. proj.</span><span class="sxs-lookup"><span data-stu-id="49659-132">Files with a .targets extension typically don't build anything themselves, they simply contain instructions that you can import into your .proj files.</span></span>

### <a name="integration-with-deployment-technologies"></a><span data-ttu-id="49659-133">Integración con tecnologías de implementación</span><span class="sxs-lookup"><span data-stu-id="49659-133">Integration with Deployment Technologies</span></span>

<span data-ttu-id="49659-134">Si ha trabajado con proyectos de aplicación web en Visual Studio 2010, como las aplicaciones Web de ASP.NET y las aplicaciones Web de ASP.NET MVC, sabrá que estos proyectos incluyen compatibilidad integrada para empaquetar e implementar la aplicación web en un entorno de destino.</span><span class="sxs-lookup"><span data-stu-id="49659-134">If you've worked with web application projects in Visual Studio 2010, like ASP.NET web applications and ASP.NET MVC web applications, you'll know that these projects include built-in support for packaging and deploying the web application to a target environment.</span></span> <span data-ttu-id="49659-135">Las páginas de **propiedades** de estos proyectos incluyen las pestañas **empaquetar/publicar web** y **empaquetar/publicar SQL** , que puede usar para configurar cómo se empaquetan e implementan los componentes de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="49659-135">The **Properties** pages for these projects include **Package/Publish Web** and **Package/Publish SQL** tabs that you can use to configure how the components of your application are packaged and deployed.</span></span> <span data-ttu-id="49659-136">Se muestra la pestaña **empaquetar/publicar web** :</span><span class="sxs-lookup"><span data-stu-id="49659-136">This shows the **Package/Publish Web** tab:</span></span>

![](understanding-the-project-file/_static/image1.png)

<span data-ttu-id="49659-137">La tecnología subyacente que subyace a estas funcionalidades se conoce como la canalización de publicación web (WPP).</span><span class="sxs-lookup"><span data-stu-id="49659-137">The underlying technology behind these capabilities is known as the Web Publishing Pipeline (WPP).</span></span> <span data-ttu-id="49659-138">WPP básicamente incorpora MSBuild y [Web deploy](https://go.microsoft.com/?linkid=9805122) para proporcionar un proceso completo de compilación, paquete e implementación para las aplicaciones Web.</span><span class="sxs-lookup"><span data-stu-id="49659-138">The WPP essentially brings MSBuild and [Web Deploy](https://go.microsoft.com/?linkid=9805122) together to provide a complete build, package, and deployment process for your web applications.</span></span>

<span data-ttu-id="49659-139">La buena noticia es que puede aprovechar los puntos de integración que proporciona WPP al crear archivos de proyecto personalizados para proyectos Web.</span><span class="sxs-lookup"><span data-stu-id="49659-139">The good news is that you can take advantage of the integration points that the WPP provides when you create custom project files for web projects.</span></span> <span data-ttu-id="49659-140">Puede incluir instrucciones de implementación en el archivo de proyecto, lo que le permite compilar los proyectos, crear paquetes de implementación web e instalar estos paquetes en servidores remotos a través de un único archivo de proyecto y una única llamada a MSBuild.</span><span class="sxs-lookup"><span data-stu-id="49659-140">You can include deployment instructions in your project file, which allows you to build your projects, create web deployment packages, and install these packages on remote servers through a single project file and a single call to MSBuild.</span></span> <span data-ttu-id="49659-141">También puede llamar a cualquier otro ejecutable como parte del proceso de compilación.</span><span class="sxs-lookup"><span data-stu-id="49659-141">You can also call any other executables as part of your build process.</span></span> <span data-ttu-id="49659-142">Por ejemplo, puede ejecutar la herramienta de línea de comandos VSDBCMD. exe para implementar una base de datos desde un archivo de esquema.</span><span class="sxs-lookup"><span data-stu-id="49659-142">For example, you can run the VSDBCMD.exe command-line tool to deploy a database from a schema file.</span></span> <span data-ttu-id="49659-143">En el transcurso de este tema, verá cómo puede aprovechar estas capacidades para satisfacer los requisitos de los escenarios de implementación de su empresa.</span><span class="sxs-lookup"><span data-stu-id="49659-143">Over the course of this topic, you'll see how you can take advantage of these capabilities to meet the requirements of your enterprise deployment scenarios.</span></span>

> [!NOTE]
> <span data-ttu-id="49659-144">Para obtener más información sobre cómo funciona el proceso de implementación de aplicaciones Web, vea [ASP.NET Web Application Project Deployment Overview](https://msdn.microsoft.com/library/dd394698.aspx).</span><span class="sxs-lookup"><span data-stu-id="49659-144">For more information on how the web application deployment process works, see [ASP.NET Web Application Project Deployment Overview](https://msdn.microsoft.com/library/dd394698.aspx).</span></span>

## <a name="the-anatomy-of-a-project-file"></a><span data-ttu-id="49659-145">Anatomía de un archivo de proyecto</span><span class="sxs-lookup"><span data-stu-id="49659-145">The Anatomy of a Project File</span></span>

<span data-ttu-id="49659-146">Antes de examinar el proceso de compilación con más detalle, merece la pena dedicar unos minutos a familiarizarse con la estructura básica de un archivo de proyecto de MSBuild.</span><span class="sxs-lookup"><span data-stu-id="49659-146">Before you look at the build process in more detail, it's worth taking a few moments to familiarize yourself with the basic structure of an MSBuild project file.</span></span> <span data-ttu-id="49659-147">En esta sección se proporciona información general sobre los elementos más comunes que encontrará al revisar, editar o crear un archivo de proyecto.</span><span class="sxs-lookup"><span data-stu-id="49659-147">This section provides an overview of the more common elements that you'll encounter when you review, edit, or create a project file.</span></span> <span data-ttu-id="49659-148">En concreto, aprenderá lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="49659-148">In particular, you'll learn:</span></span>

- <span data-ttu-id="49659-149">Cómo usar *las propiedades* para administrar variables para el proceso de compilación.</span><span class="sxs-lookup"><span data-stu-id="49659-149">How to use *properties* to manage variables for the build process.</span></span>
- <span data-ttu-id="49659-150">Cómo usar *elementos* para identificar las entradas en el proceso de compilación, como los archivos de código.</span><span class="sxs-lookup"><span data-stu-id="49659-150">How to use *items* to identify the inputs to the build process, like code files.</span></span>
- <span data-ttu-id="49659-151">Cómo usar *destinos* y *tareas* para proporcionar instrucciones de ejecución a MSBuild mediante *las propiedades* y *los elementos* definidos en otra parte del archivo de proyecto.</span><span class="sxs-lookup"><span data-stu-id="49659-151">How to use *targets* and *tasks* to provide execution instructions to MSBuild, using *properties* and *items* defined elsewhere in the project file.</span></span>

<span data-ttu-id="49659-152">Esto muestra la relación entre los elementos clave de un archivo de proyecto de MSBuild:</span><span class="sxs-lookup"><span data-stu-id="49659-152">This shows the relationship between the key elements in an MSBuild project file:</span></span>

![](understanding-the-project-file/_static/image2.png)

### <a name="the-project-element"></a><span data-ttu-id="49659-153">El elemento Project</span><span class="sxs-lookup"><span data-stu-id="49659-153">The Project Element</span></span>

<span data-ttu-id="49659-154">El elemento [Project](https://msdn.microsoft.com/library/bcxfsh87.aspx) es el elemento raíz de cada archivo de proyecto.</span><span class="sxs-lookup"><span data-stu-id="49659-154">The [Project](https://msdn.microsoft.com/library/bcxfsh87.aspx) element is the root element of every project file.</span></span> <span data-ttu-id="49659-155">Además de identificar el esquema XML para el archivo de proyecto, el elemento de **proyecto** puede incluir atributos para especificar los puntos de entrada para el proceso de compilación.</span><span class="sxs-lookup"><span data-stu-id="49659-155">In addition to identifying the XML schema for the project file, the **Project** element can include attributes to specify the entry points for the build process.</span></span> <span data-ttu-id="49659-156">Por ejemplo, en la [solución de ejemplo de Contact Manager](the-contact-manager-solution.md), el archivo *Publish. proj* especifica que la compilación debe comenzar llamando al destino denominado **FullPublish**.</span><span class="sxs-lookup"><span data-stu-id="49659-156">For example, in the [Contact Manager sample solution](the-contact-manager-solution.md), the *Publish.proj* file specifies that the build should start by calling the target named **FullPublish**.</span></span>

[!code-xml[Main](understanding-the-project-file/samples/sample1.xml)]

### <a name="properties-and-conditions"></a><span data-ttu-id="49659-157">Propiedades y condiciones</span><span class="sxs-lookup"><span data-stu-id="49659-157">Properties and Conditions</span></span>

<span data-ttu-id="49659-158">Normalmente, un archivo de proyecto necesita proporcionar una gran cantidad de información diferente para compilar e implementar correctamente sus proyectos.</span><span class="sxs-lookup"><span data-stu-id="49659-158">A project file typically needs to provide lots of different pieces of information in order to successfully build and deploy your projects.</span></span> <span data-ttu-id="49659-159">Estos fragmentos de información podrían incluir nombres de servidor, cadenas de conexión, credenciales, configuraciones de compilación, rutas de acceso de archivos de origen y de destino, así como cualquier otra información que desee incluir para admitir la personalización.</span><span class="sxs-lookup"><span data-stu-id="49659-159">These pieces of information could include server names, connection strings, credentials, build configurations, source and destination file paths, and any other information you want to include to support customization.</span></span> <span data-ttu-id="49659-160">En un archivo de proyecto, las propiedades se deben definir dentro de un elemento [PropertyGroup](https://msdn.microsoft.com/library/t4w159bs.aspx) .</span><span class="sxs-lookup"><span data-stu-id="49659-160">In a project file, properties must be defined within a [PropertyGroup](https://msdn.microsoft.com/library/t4w159bs.aspx) element.</span></span> <span data-ttu-id="49659-161">Las propiedades de MSBuild se componen de pares de clave y valor.</span><span class="sxs-lookup"><span data-stu-id="49659-161">MSBuild properties consist of key-value pairs.</span></span> <span data-ttu-id="49659-162">Dentro del elemento **PropertyGroup** , el nombre del elemento define la clave de la propiedad y el contenido del elemento define el valor de la propiedad.</span><span class="sxs-lookup"><span data-stu-id="49659-162">Within the **PropertyGroup** element, the element name defines the property key and the content of the element defines the property value.</span></span> <span data-ttu-id="49659-163">Por ejemplo, puede definir propiedades denominadas **ServerName** y **ConnectionString** para almacenar un nombre de servidor estático y una cadena de conexión.</span><span class="sxs-lookup"><span data-stu-id="49659-163">For example, you could define properties named **ServerName** and **ConnectionString** to store a static server name and connection string.</span></span>

[!code-xml[Main](understanding-the-project-file/samples/sample2.xml)]

<span data-ttu-id="49659-164">Para recuperar un valor de propiedad, use el formato *$ (PropertyName)* .</span><span class="sxs-lookup"><span data-stu-id="49659-164">To retrieve a property value, use the format *$(PropertyName)*.</span></span> <span data-ttu-id="49659-165">Por ejemplo, para recuperar el valor de la propiedad **ServerName** , debe escribir:</span><span class="sxs-lookup"><span data-stu-id="49659-165">For example, to retrieve the value of the **ServerName** property, you would type:</span></span>

[!code-powershell[Main](understanding-the-project-file/samples/sample3.ps1)]

> [!NOTE]
> <span data-ttu-id="49659-166">Verá ejemplos de cómo y Cuándo usar los valores de propiedad más adelante en este tema.</span><span class="sxs-lookup"><span data-stu-id="49659-166">You'll see examples of how and when to use property values later in this topic.</span></span>

<span data-ttu-id="49659-167">Insertar información como propiedades estáticas en un archivo de proyecto no es siempre el enfoque ideal para administrar el proceso de compilación.</span><span class="sxs-lookup"><span data-stu-id="49659-167">Embedding information as static properties in a project file is not always the ideal approach to managing the build process.</span></span> <span data-ttu-id="49659-168">En muchos escenarios, querrá obtener la información de otros orígenes o permitir al usuario proporcionar la información desde el símbolo del sistema.</span><span class="sxs-lookup"><span data-stu-id="49659-168">In a lot of scenarios, you'll want to obtain the information from other sources or empower the user to provide the information from the command prompt.</span></span> <span data-ttu-id="49659-169">MSBuild le permite especificar cualquier valor de propiedad como parámetro de línea de comandos.</span><span class="sxs-lookup"><span data-stu-id="49659-169">MSBuild allows you to specify any property value as a command-line parameter.</span></span> <span data-ttu-id="49659-170">Por ejemplo, el usuario podría proporcionar un valor para **ServerName** cuando ejecute MSBuild. exe desde la línea de comandos.</span><span class="sxs-lookup"><span data-stu-id="49659-170">For example, the user could provide a value for **ServerName** when he or she runs MSBuild.exe from the command line.</span></span>

[!code-console[Main](understanding-the-project-file/samples/sample4.cmd)]

> [!NOTE]
> <span data-ttu-id="49659-171">Para obtener más información sobre los argumentos y modificadores que se pueden usar con MSBuild. exe, vea referencia de la [línea de comandos de MSBuild](https://msdn.microsoft.com/library/ms164311.aspx).</span><span class="sxs-lookup"><span data-stu-id="49659-171">For more information on the arguments and switches you can use with MSBuild.exe, see [MSBuild Command Line Reference](https://msdn.microsoft.com/library/ms164311.aspx).</span></span>

<span data-ttu-id="49659-172">Puede usar la misma sintaxis de propiedad para obtener los valores de las variables de entorno y las propiedades de proyecto integradas.</span><span class="sxs-lookup"><span data-stu-id="49659-172">You can use the same property syntax to obtain the values of environment variables and built-in project properties.</span></span> <span data-ttu-id="49659-173">Muchas de las propiedades que se usan con frecuencia se definen automáticamente y se pueden usar en los archivos del proyecto incluyendo el nombre del parámetro pertinente.</span><span class="sxs-lookup"><span data-stu-id="49659-173">Lots of commonly used properties are defined for you, and you can use them in your project files by including the relevant parameter name.</span></span> <span data-ttu-id="49659-174">Por ejemplo, para recuperar la&#x2014;plataforma de proyecto actual, por ejemplo, **x86** o **AnyCpu**&#x2014;, puede incluir la referencia de propiedad **$ (plataforma)** en el archivo de proyecto.</span><span class="sxs-lookup"><span data-stu-id="49659-174">For example, to retrieve the current project platform&#x2014;for example, **x86** or **AnyCpu**&#x2014;you can include the **$(Platform)** property reference in your project file.</span></span> <span data-ttu-id="49659-175">Para obtener más información, vea [macros para comandos y propiedades de compilación](https://msdn.microsoft.com/library/c02as0cs.aspx), [propiedades comunes del proyecto de MSBuild](https://msdn.microsoft.com/library/bb629394.aspx)y [propiedades reservadas](https://msdn.microsoft.com/library/ms164309.aspx).</span><span class="sxs-lookup"><span data-stu-id="49659-175">For more information, see [Macros for Build Commands and Properties](https://msdn.microsoft.com/library/c02as0cs.aspx), [Common MSBuild Project Properties](https://msdn.microsoft.com/library/bb629394.aspx), and [Reserved Properties](https://msdn.microsoft.com/library/ms164309.aspx).</span></span>

<span data-ttu-id="49659-176">Las propiedades se usan a menudo junto con *las condiciones*.</span><span class="sxs-lookup"><span data-stu-id="49659-176">Properties are often used in conjunction with *conditions*.</span></span> <span data-ttu-id="49659-177">La mayoría de los elementos de MSBuild admiten el atributo **Condition** , que permite especificar los criterios sobre los que MSBuild debe evaluar el elemento.</span><span class="sxs-lookup"><span data-stu-id="49659-177">Most MSBuild elements support the **Condition** attribute, which lets you specify the criteria upon which MSBuild should evaluate the element.</span></span> <span data-ttu-id="49659-178">Por ejemplo, considere esta definición de propiedad:</span><span class="sxs-lookup"><span data-stu-id="49659-178">For example, consider this property definition:</span></span>

[!code-xml[Main](understanding-the-project-file/samples/sample5.xml)]

<span data-ttu-id="49659-179">Cuando MSBuild procesa esta definición de propiedad, primero comprueba si un valor de la propiedad **$ (OutputRoot)** está disponible.</span><span class="sxs-lookup"><span data-stu-id="49659-179">When MSBuild processes this property definition, it first checks to see whether an **$(OutputRoot)** property value is available.</span></span> <span data-ttu-id="49659-180">Si el valor de la propiedad&#x2014;está en blanco en otras palabras, el usuario no proporcionó un&#x2014;valor para esta propiedad, la condición se evalúa como **true** y el valor de la propiedad se establece en **. \Publish\Out**. Si el usuario ha proporcionado un valor para esta propiedad, la condición se evalúa como **false** y no se utiliza el valor de la propiedad estática.</span><span class="sxs-lookup"><span data-stu-id="49659-180">If the property value is blank&#x2014;in other words, the user hasn't provided a value for this property&#x2014;the condition evaluates to **true** and the property value is set to **..\Publish\Out**. If the user has provided a value for this property, the condition evaluates to **false** and the static property value is not used.</span></span>

<span data-ttu-id="49659-181">Para obtener más información sobre las distintas formas en que se pueden especificar condiciones, vea [condiciones de MSBuild](https://msdn.microsoft.com/library/7szfhaft.aspx).</span><span class="sxs-lookup"><span data-stu-id="49659-181">For more information on the different ways in which you can specify conditions, see [MSBuild Conditions](https://msdn.microsoft.com/library/7szfhaft.aspx).</span></span>

### <a name="items-and-item-groups"></a><span data-ttu-id="49659-182">Elementos y grupos de elementos</span><span class="sxs-lookup"><span data-stu-id="49659-182">Items and Item Groups</span></span>

<span data-ttu-id="49659-183">Uno de los roles importantes del archivo de proyecto es definir las entradas para el proceso de compilación.</span><span class="sxs-lookup"><span data-stu-id="49659-183">One of the important roles of the project file is to define the inputs to the build process.</span></span> <span data-ttu-id="49659-184">Normalmente, estas entradas son archivos&#x2014;de código, archivos de configuración, archivos de comandos y otros archivos que se deben procesar o copiar como parte del proceso de compilación.</span><span class="sxs-lookup"><span data-stu-id="49659-184">Typically, these inputs are files&#x2014;code files, configuration files, command files, and any other files that you need to process or copy as part of the build process.</span></span> <span data-ttu-id="49659-185">En el esquema del proyecto de MSBuild, estas entradas se representan mediante elementos [Item](https://msdn.microsoft.com/library/ms164283.aspx) .</span><span class="sxs-lookup"><span data-stu-id="49659-185">In the MSBuild project schema, these inputs are represented by [Item](https://msdn.microsoft.com/library/ms164283.aspx) elements.</span></span> <span data-ttu-id="49659-186">En un archivo de proyecto, los elementos se deben definir dentro de un elemento [ItemGroup](https://msdn.microsoft.com/library/646dk05y.aspx) .</span><span class="sxs-lookup"><span data-stu-id="49659-186">In a project file, items must be defined within an [ItemGroup](https://msdn.microsoft.com/library/646dk05y.aspx) element.</span></span> <span data-ttu-id="49659-187">Al igual que los elementos de **propiedad** , puede asignar un nombre a un elemento de **elemento** .</span><span class="sxs-lookup"><span data-stu-id="49659-187">Just like **Property** elements, you can name an **Item** element however you like.</span></span> <span data-ttu-id="49659-188">Sin embargo, debe especificar un atributo **include** para identificar el archivo o el carácter comodín que representa el elemento.</span><span class="sxs-lookup"><span data-stu-id="49659-188">However, you must specify an **Include** attribute to identify the file or wildcard that the item represents.</span></span>

[!code-xml[Main](understanding-the-project-file/samples/sample6.xml)]

<span data-ttu-id="49659-189">Al especificar varios elementos de **elemento** con el mismo nombre, se crea una lista de recursos con nombre.</span><span class="sxs-lookup"><span data-stu-id="49659-189">By specifying multiple **Item** elements with the same name, you're effectively creating a named list of resources.</span></span> <span data-ttu-id="49659-190">Una buena manera de verlo en acción consiste en echar un vistazo al interior de uno de los archivos de proyecto que Visual Studio crea.</span><span class="sxs-lookup"><span data-stu-id="49659-190">A good way to see this in action is to take a look inside one of the project files that Visual Studio creates.</span></span> <span data-ttu-id="49659-191">Por ejemplo, el archivo *ContactManager. Mvc. csproj* de la solución de ejemplo incluye muchos grupos de elementos, cada uno de ellos con varios elementos de **elemento** con el mismo nombre.</span><span class="sxs-lookup"><span data-stu-id="49659-191">For example, the *ContactManager.Mvc.csproj* file in the sample solution includes a lot of item groups, each with several identically named **Item** elements.</span></span>

[!code-xml[Main](understanding-the-project-file/samples/sample7.xml)]

<span data-ttu-id="49659-192">De esta manera, el archivo de proyecto indica a MSBuild que construya listas de archivos que deben procesarse de la misma&#x2014;manera que la lista de **referencia** incluye los ensamblados que deben estar en su lugar para una compilación correcta, la lista de **compilación** incluye los archivos de código que se deben compilar y la lista de **contenido** incluye los recursos que se deben copiar sin modificar.</span><span class="sxs-lookup"><span data-stu-id="49659-192">In this way, the project file is instructing MSBuild to construct lists of files that need to be processed in the same way&#x2014;the **Reference** list includes assemblies that must be in place for a successful build, the **Compile** list includes code files that must be compiled, and the **Content** list includes resources that must be copied unaltered.</span></span> <span data-ttu-id="49659-193">Veremos cómo el proceso de compilación hace referencia a estos elementos y los usa más adelante en este tema.</span><span class="sxs-lookup"><span data-stu-id="49659-193">We'll look at how the build process references and uses these items later in this topic.</span></span>

<span data-ttu-id="49659-194">Los elementos de elemento también pueden incluir elementos secundarios de [ItemMetadata](https://msdn.microsoft.com/library/ms164284.aspx) .</span><span class="sxs-lookup"><span data-stu-id="49659-194">Item elements can also include [ItemMetadata](https://msdn.microsoft.com/library/ms164284.aspx) child elements.</span></span> <span data-ttu-id="49659-195">Estos son pares clave-valor definidos por el usuario y básicamente representan propiedades que son específicas de ese elemento.</span><span class="sxs-lookup"><span data-stu-id="49659-195">These are user-defined key-value pairs and essentially represent properties that are specific to that item.</span></span> <span data-ttu-id="49659-196">Por ejemplo, muchos de los elementos de elemento de **compilación** del archivo de proyecto incluyen elementos secundarios **DependentUpon** .</span><span class="sxs-lookup"><span data-stu-id="49659-196">For example, a lot of the **Compile** item elements in the project file include **DependentUpon** child elements.</span></span>

[!code-xml[Main](understanding-the-project-file/samples/sample8.xml)]

> [!NOTE]
> <span data-ttu-id="49659-197">Además de los metadatos de los elementos creados por el usuario, a todos los elementos se les asignan varios metadatos comunes en la creación.</span><span class="sxs-lookup"><span data-stu-id="49659-197">In addition to user-created item metadata, all items are assigned various common metadata on creation.</span></span> <span data-ttu-id="49659-198">Para obtener más información, consulte [Metadatos de elementos conocidos](https://msdn.microsoft.com/library/ms164313.aspx).</span><span class="sxs-lookup"><span data-stu-id="49659-198">For more information, see [Well-known Item Metadata](https://msdn.microsoft.com/library/ms164313.aspx).</span></span>

<span data-ttu-id="49659-199">Puede crear elementos **ItemGroup** en el elemento de **proyecto** de nivel raíz o en elementos de **destino** específicos.</span><span class="sxs-lookup"><span data-stu-id="49659-199">You can create **ItemGroup** elements within the root-level **Project** element or within specific **Target** elements.</span></span> <span data-ttu-id="49659-200">Los elementos **ItemGroup** también admiten atributos de **condición** , lo que permite adaptar las entradas al proceso de compilación en función de condiciones como la configuración del proyecto o la plataforma.</span><span class="sxs-lookup"><span data-stu-id="49659-200">**ItemGroup** elements also support **Condition** attributes, which lets you tailor the inputs to the build process according to conditions like the project configuration or platform.</span></span>

### <a name="targets-and-tasks"></a><span data-ttu-id="49659-201">Destinos y tareas</span><span class="sxs-lookup"><span data-stu-id="49659-201">Targets and Tasks</span></span>

<span data-ttu-id="49659-202">En el esquema de MSBuild, un elemento [Task](https://msdn.microsoft.com/library/77f2hx1s.aspx) representa una instrucción de compilación individual (o tarea).</span><span class="sxs-lookup"><span data-stu-id="49659-202">In the MSBuild schema, a [Task](https://msdn.microsoft.com/library/77f2hx1s.aspx) element represents an individual build instruction (or task).</span></span> <span data-ttu-id="49659-203">MSBuild incluye una gran variedad de tareas predefinidas.</span><span class="sxs-lookup"><span data-stu-id="49659-203">MSBuild includes a multitude of predefined tasks.</span></span> <span data-ttu-id="49659-204">Por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="49659-204">For example:</span></span>

- <span data-ttu-id="49659-205">La tarea de **copia** copia los archivos en una nueva ubicación.</span><span class="sxs-lookup"><span data-stu-id="49659-205">The **Copy** task copies files to a new location.</span></span>
- <span data-ttu-id="49659-206">La tarea **CSC** invoca el compilador visual C# .</span><span class="sxs-lookup"><span data-stu-id="49659-206">The **Csc** task invokes the Visual C# compiler.</span></span>
- <span data-ttu-id="49659-207">La tarea **VBC** invoca el compilador de Visual Basic.</span><span class="sxs-lookup"><span data-stu-id="49659-207">The **Vbc** task invokes the Visual Basic compiler.</span></span>
- <span data-ttu-id="49659-208">La tarea **exec** ejecuta un programa especificado.</span><span class="sxs-lookup"><span data-stu-id="49659-208">The **Exec** task runs a specified program.</span></span>
- <span data-ttu-id="49659-209">La tarea **Message** escribe un mensaje en un registrador.</span><span class="sxs-lookup"><span data-stu-id="49659-209">The **Message** task writes a message to a logger.</span></span>

> [!NOTE]
> <span data-ttu-id="49659-210">Para obtener detalles completos de las tareas que están disponibles de un cuadro, vea [referencia de tareas de MSBuild](https://msdn.microsoft.com/library/7z253716.aspx).</span><span class="sxs-lookup"><span data-stu-id="49659-210">For full details of the tasks that are available out of the box, see [MSBuild Task Reference](https://msdn.microsoft.com/library/7z253716.aspx).</span></span> <span data-ttu-id="49659-211">Para obtener más información sobre las tareas, incluido cómo crear sus propias tareas personalizadas, vea [tareas de MSBuild](https://msdn.microsoft.com/library/ms171466.aspx).</span><span class="sxs-lookup"><span data-stu-id="49659-211">For more information on tasks, including how to create your own custom tasks, see [MSBuild Tasks](https://msdn.microsoft.com/library/ms171466.aspx).</span></span>

<span data-ttu-id="49659-212">Las tareas siempre deben estar contenidas dentro de los elementos de [destino](https://msdn.microsoft.com/library/t50z2hka.aspx) .</span><span class="sxs-lookup"><span data-stu-id="49659-212">Tasks must always be contained within [Target](https://msdn.microsoft.com/library/t50z2hka.aspx) elements.</span></span> <span data-ttu-id="49659-213">Un elemento de **destino** es un conjunto de una o varias tareas que se ejecutan secuencialmente y un archivo de proyecto puede contener varios destinos.</span><span class="sxs-lookup"><span data-stu-id="49659-213">A **Target** element is a set of one or more tasks that are executed sequentially, and a project file can contain multiple targets.</span></span> <span data-ttu-id="49659-214">Cuando se desea ejecutar una tarea o un conjunto de tareas, se invoca el destino que las contiene.</span><span class="sxs-lookup"><span data-stu-id="49659-214">When you want to run a task, or a set of tasks, you invoke the target that contains them.</span></span> <span data-ttu-id="49659-215">Por ejemplo, supongamos que tiene un archivo de proyecto simple que registra un mensaje.</span><span class="sxs-lookup"><span data-stu-id="49659-215">For example, suppose you have a simple project file that logs a message.</span></span>

[!code-xml[Main](understanding-the-project-file/samples/sample9.xml)]

<span data-ttu-id="49659-216">Puede invocar el destino desde la línea de comandos mediante el modificador **/t** para especificar el destino.</span><span class="sxs-lookup"><span data-stu-id="49659-216">You can invoke the target from the command line, by using the **/t** switch to specify the target.</span></span>

[!code-console[Main](understanding-the-project-file/samples/sample10.cmd)]

<span data-ttu-id="49659-217">Como alternativa, puede Agregar un atributo **DefaultTargets** al elemento **Project** , para especificar los destinos que desea invocar.</span><span class="sxs-lookup"><span data-stu-id="49659-217">Alternatively, you can add a **DefaultTargets** attribute to the **Project** element, to specify the targets that you want to invoke.</span></span>

[!code-xml[Main](understanding-the-project-file/samples/sample11.xml)]

<span data-ttu-id="49659-218">En este caso, no es necesario especificar el destino desde la línea de comandos.</span><span class="sxs-lookup"><span data-stu-id="49659-218">In this case, you don't need to specify the target from the command line.</span></span> <span data-ttu-id="49659-219">Puede simplemente especificar el archivo del proyecto y MSBuild invocará el destino **FullPublish** .</span><span class="sxs-lookup"><span data-stu-id="49659-219">You can simply specify the project file, and MSBuild will invoke the **FullPublish** target for you.</span></span>

[!code-console[Main](understanding-the-project-file/samples/sample12.cmd)]

<span data-ttu-id="49659-220">Ambos destinos y tareas pueden incluir atributos de **condición** .</span><span class="sxs-lookup"><span data-stu-id="49659-220">Both targets and tasks can include **Condition** attributes.</span></span> <span data-ttu-id="49659-221">Como tal, puede elegir omitir destinos completos o tareas individuales si se cumplen ciertas condiciones.</span><span class="sxs-lookup"><span data-stu-id="49659-221">As such, you can choose to omit entire targets or individual tasks if certain conditions are met.</span></span>

<span data-ttu-id="49659-222">Por lo general, cuando cree tareas y destinos útiles, deberá hacer referencia a las propiedades y los elementos que haya definido en otra parte del archivo de proyecto:</span><span class="sxs-lookup"><span data-stu-id="49659-222">Generally speaking, when you create useful tasks and targets, you'll need to refer to the properties and items that you've defined elsewhere in the project file:</span></span>

- <span data-ttu-id="49659-223">Para usar un valor de propiedad, escriba **$ (***PropertyName***)** , donde *PropertyName* es el nombre del elemento de **propiedad** o el nombre del parámetro.</span><span class="sxs-lookup"><span data-stu-id="49659-223">To use a property value, type **$(***PropertyName***)**, where *PropertyName* is the name of the **Property** element or the name of the parameter.</span></span>
- <span data-ttu-id="49659-224">Para usar un elemento, escriba **@ (***itemname***)** , donde *itemname* **es el nombre del elemento.**</span><span class="sxs-lookup"><span data-stu-id="49659-224">To use an item, type **@(***ItemName***)**, where *ItemName* is the name of the **Item** element.</span></span>

> [!NOTE]
> <span data-ttu-id="49659-225">Recuerde que si crea varios elementos con el mismo nombre, está generando una lista.</span><span class="sxs-lookup"><span data-stu-id="49659-225">Remember that if you create multiple items with the same name, you're building a list.</span></span> <span data-ttu-id="49659-226">Por el contrario, si crea varias propiedades con el mismo nombre, el último valor de propiedad que proporcione sobrescribirá las propiedades anteriores con el mismo&#x2014;nombre. una propiedad solo puede contener un valor.</span><span class="sxs-lookup"><span data-stu-id="49659-226">In contrast, if you create multiple properties with the same name, the last property value you provide will overwrite any previous properties with the same name&#x2014;a property can only contain a single value.</span></span>

<span data-ttu-id="49659-227">Por ejemplo, en el archivo *Publish. proj* de la solución de ejemplo, eche un vistazo al destino **BuildProjects** .</span><span class="sxs-lookup"><span data-stu-id="49659-227">For example, in the *Publish.proj* file in the sample solution, take a look at the **BuildProjects** target.</span></span>

[!code-xml[Main](understanding-the-project-file/samples/sample13.xml)]

<span data-ttu-id="49659-228">En este ejemplo, puede observar estos puntos clave:</span><span class="sxs-lookup"><span data-stu-id="49659-228">In this sample, you can observe these key points:</span></span>

- <span data-ttu-id="49659-229">Si se especifica el parámetro **BuildingInTeamBuild** y tiene un valor de **true**, no se ejecutará ninguna de las tareas de este destino.</span><span class="sxs-lookup"><span data-stu-id="49659-229">If the **BuildingInTeamBuild** parameter is specified and has a value of **true**, none of the tasks within this target will be executed.</span></span>
- <span data-ttu-id="49659-230">El destino contiene una única instancia de la tarea [msbuild](https://msdn.microsoft.com/library/z7f65y0d.aspx) .</span><span class="sxs-lookup"><span data-stu-id="49659-230">The target contains a single instance of the [MSBuild](https://msdn.microsoft.com/library/z7f65y0d.aspx) task.</span></span> <span data-ttu-id="49659-231">Esta tarea le permite compilar otros proyectos de MSBuild.</span><span class="sxs-lookup"><span data-stu-id="49659-231">This task lets you build other MSBuild projects.</span></span>
- <span data-ttu-id="49659-232">El elemento **ProjectsToBuild** se pasa a la tarea.</span><span class="sxs-lookup"><span data-stu-id="49659-232">The **ProjectsToBuild** item is passed to the task.</span></span> <span data-ttu-id="49659-233">Este elemento podría representar una lista de archivos de proyecto o de solución, todos definidos por elementos de elemento de **ProjectsToBuild** dentro de un grupo de elementos.</span><span class="sxs-lookup"><span data-stu-id="49659-233">This item could represent a list of project or solution files, all defined by **ProjectsToBuild** item elements within an item group.</span></span> <span data-ttu-id="49659-234">En este caso, el elemento **ProjectsToBuild** hace referencia a un único archivo de solución.</span><span class="sxs-lookup"><span data-stu-id="49659-234">In this case, the **ProjectsToBuild** item refers to a single solution file.</span></span>

    [!code-xml[Main](understanding-the-project-file/samples/sample14.xml)]
- <span data-ttu-id="49659-235">Los valores de propiedad pasados a la tarea **msbuild** incluyen parámetros denominados **OutputRoot** y **Configuration**.</span><span class="sxs-lookup"><span data-stu-id="49659-235">The property values passed to the **MSBuild** task include parameters named **OutputRoot** and **Configuration**.</span></span> <span data-ttu-id="49659-236">Se establecen en valores de parámetro si se proporcionan o valores de propiedad estáticos si no lo están.</span><span class="sxs-lookup"><span data-stu-id="49659-236">These are set to parameter values if they are provided, or static property values if they are not.</span></span>

    [!code-xml[Main](understanding-the-project-file/samples/sample15.xml)]

<span data-ttu-id="49659-237">También puede ver que la tarea **msbuild** invoca un destino denominado **Build**.</span><span class="sxs-lookup"><span data-stu-id="49659-237">You can also see that the **MSBuild** task invokes a target named **Build**.</span></span> <span data-ttu-id="49659-238">Se trata de uno de varios destinos integrados que se usan ampliamente en los archivos de proyecto de Visual Studio y que están disponibles en los archivos de proyecto personalizados, como **compilar**, **limpiar**, **recompilar**y **publicar**.</span><span class="sxs-lookup"><span data-stu-id="49659-238">This is one of several built-in targets that are widely used in Visual Studio project files and are available to you in your custom project files, like **Build**, **Clean**, **Rebuild**, and **Publish**.</span></span> <span data-ttu-id="49659-239">Obtendrá más información sobre el uso de destinos y tareas para controlar el proceso de compilación y sobre la tarea de **msbuild** en concreto, más adelante en este tema.</span><span class="sxs-lookup"><span data-stu-id="49659-239">You'll learn more about using targets and tasks to control the build process, and about the **MSBuild** task in particular, later in this topic.</span></span>

> [!NOTE]
> <span data-ttu-id="49659-240">Para obtener más información sobre los destinos, consulte [destinos de MSBuild](https://msdn.microsoft.com/library/ms171462.aspx).</span><span class="sxs-lookup"><span data-stu-id="49659-240">For more information on targets, see [MSBuild Targets](https://msdn.microsoft.com/library/ms171462.aspx).</span></span>

## <a name="splitting-project-files-to-support-multiple-environments"></a><span data-ttu-id="49659-241">Dividir archivos de proyecto para admitir varios entornos</span><span class="sxs-lookup"><span data-stu-id="49659-241">Splitting Project Files to Support Multiple Environments</span></span>

<span data-ttu-id="49659-242">Supongamos que desea poder implementar una solución en varios entornos, como los servidores de prueba, las plataformas de ensayo y los entornos de producción.</span><span class="sxs-lookup"><span data-stu-id="49659-242">Suppose you want to be able to deploy a solution to multiple environments, like test servers, staging platforms, and production environments.</span></span> <span data-ttu-id="49659-243">La configuración puede variar considerablemente entre estos entornos&#x2014;, no solo en términos de nombres de servidor, cadenas de conexión, etc., sino también en términos de credenciales, configuración de seguridad y muchos otros factores.</span><span class="sxs-lookup"><span data-stu-id="49659-243">The configuration may vary substantially between these environments&#x2014;not just in terms of server names, connection strings, and so on, but also potentially in terms of credentials, security settings, and lots of other factors.</span></span> <span data-ttu-id="49659-244">Si necesita hacer esto con regularidad, no es realmente conveniente editar varias propiedades en el archivo de proyecto cada vez que cambia el entorno de destino.</span><span class="sxs-lookup"><span data-stu-id="49659-244">If you need to do this regularly, it's not really expedient to edit multiple properties in your project file every time you switch the target environment.</span></span> <span data-ttu-id="49659-245">Tampoco es una solución ideal para requerir una lista interminable de valores de propiedad que se proporcionarán al proceso de compilación.</span><span class="sxs-lookup"><span data-stu-id="49659-245">Nor is it an ideal solution to require an endless list of property values to be provided to the build process.</span></span>

<span data-ttu-id="49659-246">Afortunadamente, hay una alternativa.</span><span class="sxs-lookup"><span data-stu-id="49659-246">Fortunately there is an alternative.</span></span> <span data-ttu-id="49659-247">MSBuild le permite dividir la configuración de compilación en varios archivos de proyecto.</span><span class="sxs-lookup"><span data-stu-id="49659-247">MSBuild lets you split your build configuration across multiple project files.</span></span> <span data-ttu-id="49659-248">Para ver cómo funciona esto, en la solución de ejemplo, observe que hay dos archivos de proyecto personalizados:</span><span class="sxs-lookup"><span data-stu-id="49659-248">To see how this works, in the sample solution, notice that there are two custom project files:</span></span>

- <span data-ttu-id="49659-249">*Publish. proj*, que contiene propiedades, elementos y destinos comunes a todos los entornos.</span><span class="sxs-lookup"><span data-stu-id="49659-249">*Publish.proj*, which contains properties, items, and targets that are common to all environments.</span></span>
- <span data-ttu-id="49659-250">*Env-dev. proj*, que contiene propiedades que son específicas de un entorno de desarrollo.</span><span class="sxs-lookup"><span data-stu-id="49659-250">*Env-Dev.proj*, which contains properties that are specific to a developer environment.</span></span>

<span data-ttu-id="49659-251">Observe ahora que el archivo *Publish. proj* incluye un elemento [Import](https://msdn.microsoft.com/library/92x05xfs.aspx) , inmediatamente debajo de la etiqueta de apertura del **proyecto** .</span><span class="sxs-lookup"><span data-stu-id="49659-251">Now notice that the *Publish.proj* file includes an [Import](https://msdn.microsoft.com/library/92x05xfs.aspx) element, immediately beneath the opening **Project** tag.</span></span>

[!code-xml[Main](understanding-the-project-file/samples/sample16.xml)]

<span data-ttu-id="49659-252">El elemento **Import** se usa para importar el contenido de otro archivo de proyecto de MSBuild en el archivo de proyecto de MSBuild actual.</span><span class="sxs-lookup"><span data-stu-id="49659-252">The **Import** element is used to import the contents of another MSBuild project file into the current MSBuild project file.</span></span> <span data-ttu-id="49659-253">En este caso, el parámetro **TargetEnvPropsFile** proporciona el nombre de archivo del archivo de proyecto que desea importar.</span><span class="sxs-lookup"><span data-stu-id="49659-253">In this case, the **TargetEnvPropsFile** parameter provides the filename of the project file you want to import.</span></span> <span data-ttu-id="49659-254">Puede proporcionar un valor para este parámetro al ejecutar MSBuild.</span><span class="sxs-lookup"><span data-stu-id="49659-254">You can provide a value for this parameter when you run MSBuild.</span></span>

[!code-console[Main](understanding-the-project-file/samples/sample17.cmd)]

<span data-ttu-id="49659-255">Esto combina eficazmente el contenido de los dos archivos en un único archivo de proyecto.</span><span class="sxs-lookup"><span data-stu-id="49659-255">This effectively merges the contents of the two files into a single project file.</span></span> <span data-ttu-id="49659-256">Con este enfoque, puede crear un archivo de proyecto que contenga la configuración de compilación universal y varios archivos de proyecto complementarios que contengan propiedades específicas del entorno.</span><span class="sxs-lookup"><span data-stu-id="49659-256">Using this approach, you can create one project file containing your universal build configuration and multiple supplementary project files containing environment-specific properties.</span></span> <span data-ttu-id="49659-257">Como resultado, la ejecución de un comando con un valor de parámetro diferente permite implementar la solución en un entorno diferente.</span><span class="sxs-lookup"><span data-stu-id="49659-257">As a result, simply running a command with a different parameter value lets you deploy your solution to a different environment.</span></span>

![](understanding-the-project-file/_static/image3.png)

<span data-ttu-id="49659-258">Es recomendable seguir dividiendo los archivos de proyecto de esta manera.</span><span class="sxs-lookup"><span data-stu-id="49659-258">Splitting your project files in this way is a good practice to follow.</span></span> <span data-ttu-id="49659-259">Permite a los desarrolladores implementar en varios entornos mediante la ejecución de un solo comando, a la vez que evita la duplicación de propiedades de compilación universal en varios archivos de proyecto.</span><span class="sxs-lookup"><span data-stu-id="49659-259">It allows developers to deploy to multiple environments by running a single command, while avoiding the duplication of universal build properties across multiple project files.</span></span>

> [!NOTE]
> <span data-ttu-id="49659-260">Para obtener instrucciones sobre cómo personalizar los archivos de proyecto específicos del entorno para sus propios entornos de servidor, consulte [configuración de las propiedades de implementación para un entorno de destino](../configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment.md).</span><span class="sxs-lookup"><span data-stu-id="49659-260">For guidance on how to customize the environment-specific project files for your own server environments, see [Configuring Deployment Properties for a Target Environment](../configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment.md).</span></span>

## <a name="conclusion"></a><span data-ttu-id="49659-261">Conclusión</span><span class="sxs-lookup"><span data-stu-id="49659-261">Conclusion</span></span>

<span data-ttu-id="49659-262">En este tema se proporciona una introducción general a los archivos de proyecto de MSBuild y se explica cómo puede crear sus propios archivos de proyecto personalizados para controlar el proceso de compilación.</span><span class="sxs-lookup"><span data-stu-id="49659-262">This topic provided a general introduction to MSBuild project files and explained how you can create your own custom project files to control the build process.</span></span> <span data-ttu-id="49659-263">También se ha introducido el concepto de dividir archivos de proyecto en instrucciones de compilación universal y propiedades de compilación específicas del entorno, para facilitar la compilación e implementación de proyectos en varios destinos.</span><span class="sxs-lookup"><span data-stu-id="49659-263">It also introduced the concept of splitting project files into universal build instructions and environment-specific build properties, to make it easy to build and deploy projects to multiple destinations.</span></span>

<span data-ttu-id="49659-264">En el tema siguiente, se describe [el proceso de compilación](understanding-the-build-process.md), se proporciona más información sobre cómo se pueden usar los archivos de proyecto para controlar la compilación y la implementación, ya que le guiará a través de la implementación de una solución con un nivel realista de complejidad.</span><span class="sxs-lookup"><span data-stu-id="49659-264">The next topic, [Understanding the Build Process](understanding-the-build-process.md), provides more insight into how you can use project files to control build and deployment by walking you through the deployment of a solution with a realistic level of complexity.</span></span>

## <a name="further-reading"></a><span data-ttu-id="49659-265">Información adicional</span><span class="sxs-lookup"><span data-stu-id="49659-265">Further Reading</span></span>

<span data-ttu-id="49659-266">Para obtener una introducción más detallada sobre los archivos de proyecto y WPP, vea [dentro del Microsoft Build Engine: usar MSBuild y Team Foundation Build](http://amzn.com/0735645248) de Sayed Ibrahim Hashimi y William Bartholomew, ISBN: 978-0-7356-4524-0.</span><span class="sxs-lookup"><span data-stu-id="49659-266">For a more in-depth introduction to project files and the WPP, see [Inside the Microsoft Build Engine: Using MSBuild and Team Foundation Build](http://amzn.com/0735645248) by Sayed Ibrahim Hashimi and William Bartholomew, ISBN: 978-0-7356-4524-0.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="49659-267">[Anterior](setting-up-the-contact-manager-solution.md)
> [Siguiente](understanding-the-build-process.md)</span><span class="sxs-lookup"><span data-stu-id="49659-267">[Previous](setting-up-the-contact-manager-solution.md)
[Next](understanding-the-build-process.md)</span></span>
