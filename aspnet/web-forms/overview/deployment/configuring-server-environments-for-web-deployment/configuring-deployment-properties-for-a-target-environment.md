---
uid: web-forms/overview/deployment/configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment
title: Configuración de las propiedades de implementación para un entorno de destino | Microsoft Docs
author: jrjlee
description: En este tema se describe cómo configurar propiedades específicas del entorno para implementar la solución Contact Manager de ejemplo en un entorno de destino específico...
ms.author: riande
ms.date: 05/04/2012
ms.assetid: b5b86e03-b8ed-46e6-90fa-e1da88ef34e9
msc.legacyurl: /web-forms/overview/deployment/configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment
msc.type: authoredcontent
ms.openlocfilehash: 9742be7d718384c1b108d5f2c0c43e8e8d4fe8a9
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 03/06/2020
ms.locfileid: "78516811"
---
# <a name="configuring-deployment-properties-for-a-target-environment"></a>Configurar las propiedades de implementación de un entorno de destino

por [Jason Lee](https://github.com/jrjlee)

[Descargar PDF](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> En este tema se describe cómo configurar propiedades específicas del entorno para implementar la solución Contact Manager de ejemplo en un entorno de destino específico.

Este tema forma parte de una serie de tutoriales basados en los requisitos de implementación empresarial de una empresa ficticia denominada Fabrikam, Inc. En esta serie de tutoriales se&#x2014;usa una solución de&#x2014;ejemplo de la solución [Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) para representar una aplicación web con un nivel de complejidad realista, como una aplicación ASP.NET MVC 3, un servicio Windows Communication Foundation (WCF) y un proyecto de base de datos.

El método de implementación que se encuentra en el corazón de estos tutoriales se basa en el enfoque de archivo de proyecto dividido que se describe en [Descripción del proceso de compilación](../web-deployment-in-the-enterprise/understanding-the-build-process.md), en el&#x2014;que el proceso de compilación se controla mediante dos archivos de proyecto que contiene instrucciones de compilación que se aplican a cada entorno de destino y uno que contiene la configuración de compilación e implementación específica del entorno. En tiempo de compilación, el archivo de proyecto específico del entorno se combina en el archivo de proyecto independiente del entorno para formar un conjunto completo de instrucciones de compilación.

## <a name="process-overview"></a>Información general del proceso

El archivo de proyecto que usará para compilar e implementar la solución Contact Manager se divide en dos archivos físicos:

- Una que contiene las instrucciones y la configuración de la compilación universal (el archivo *Publish. proj* ).
- Una que contiene la configuración de compilación específica del entorno (*env-dev. proj*, *env-Stage. proj*, etc.).

En tiempo de compilación, el archivo de proyecto específico del entorno adecuado se combina en el archivo *Public Publish. proj* para formar un conjunto completo de instrucciones de compilación. Puede configurar la implementación en entornos de destino específicos creando o personalizando archivos de proyecto específicos del entorno con la configuración que describe su propio escenario de implementación.

Muchos de estos valores se determinan según el modo en que&#x2014;se configura el entorno de destino en particular, independientemente de que el servidor Web de destino esté configurado para usar el servicio de Deployment Agent web (el agente remoto) o el controlador de web deploy. Para obtener más información sobre estos enfoques y para obtener instrucciones sobre cómo elegir el enfoque adecuado para su propio entorno, consulte [elección del enfoque adecuado para la implementación web](choosing-the-right-approach-to-web-deployment.md).

El [escenario de administrador de contactos](../deploying-web-applications-in-enterprise-scenarios/enterprise-web-deployment-scenario-overview.md) requiere dos archivos de proyecto específicos del entorno:

- Implementación en un entorno de prueba para desarrolladores (*env-dev. proj*). El entorno de prueba del desarrollador se configura para aceptar implementaciones remotas mediante el agente remoto, como se describe en [escenario: configurar un entorno de prueba para la implementación web](scenario-configuring-a-test-environment-for-web-deployment.md). Este archivo debe proporcionar la dirección del extremo del agente remoto, así como la configuración específica de la ubicación, como las cadenas de conexión y los puntos de conexión de servicio.
- Implementación en un entorno de ensayo (*env-Stage. proj*). El entorno de ensayo se configura para aceptar implementaciones remotas mediante el controlador de Web Deploy, como se describe en [escenario: configuración de un entorno de ensayo para la implementación web](scenario-configuring-a-staging-environment-for-web-deployment.md). Este archivo debe proporcionar la dirección de extremo del controlador de Web Deploy, así como la configuración específica de la ubicación como las cadenas de conexión y los puntos de conexión de servicio.

Es importante tener en cuenta que los valores configurados en el archivo de proyecto específico del entorno no afectan al contenido del propio&#x2014;paquete Web, sino que controlan cómo se implementa el paquete y qué valores de parámetro se proporcionan cuando se extrae el paquete. Está importando el paquete Web en el entorno de producción manualmente, tal como se describe en [escenario: configurar un entorno de producción para la implementación web](scenario-configuring-a-production-environment-for-web-deployment.md) e [instalar manualmente paquetes web](../web-deployment-in-the-enterprise/manually-installing-web-packages.md), por lo que no importa qué configuración usó en el archivo de proyecto específico del entorno cuando generó el paquete. El administrador de Internet Information Services (IIS) le pedirá que indique los valores con parámetros, como las cadenas de conexión y los puntos de conexión de servicio, al importar el paquete.

Para implementar la solución Contact Manager en su propio entorno de destino, puede personalizar este archivo o usarlo como plantilla y crear su propio archivo.

**Para configurar las opciones de implementación específicas del entorno para la solución Contact Manager**

1. Abra la solución ContactManager-WCF en Visual Studio 2010.
2. En la ventana de **Explorador de soluciones** , expanda la carpeta **Publish** , expanda la carpeta **EnvConfig** y, a continuación, haga doble clic en **env-dev. proj**.

    ![](configuring-deployment-properties-for-a-target-environment/_static/image1.png)
3. Reemplace los valores de propiedad en el archivo *env-dev. proj* por los valores correctos para su propio entorno de prueba.

    > [!NOTE]
    > La tabla que sigue a este procedimiento proporciona más información sobre cada una de estas propiedades.
4. Guarde el trabajo y, a continuación, cierre el archivo *env-dev. proj* .

## <a name="choosing-the-right-deployment-properties"></a>Elección de las propiedades de implementación correctas

En esta tabla se describe el propósito de cada propiedad en el archivo de proyecto específico del entorno de ejemplo, *env-dev. proj*, y se proporcionan instrucciones sobre los valores que se deben proporcionar.

|                                                        Nombre de la propiedad                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        Detalles                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
|------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|              <strong>MSDeployComputerName</strong> Nombre del servidor Web de destino o extremo de servicio.               |                                                                                                                                                                                                                                              Si va a implementar en el servicio de agente remoto en el servidor Web de destino, puede especificar el nombre del equipo de destino (por ejemplo, <strong>TESTWEB1</strong> o <strong>TESTWEB1.fabrikam.net</strong>), o puede especificar el extremo del agente remoto (por ejemplo, `http://TESTWEB1/MSDEPLOYAGENTSERVICE`). La implementación funciona de la misma manera en cada caso. Si va a implementar en el controlador de Web Deploy en el servidor Web de destino, debe especificar el extremo de servicio e incluir el nombre del sitio web de IIS como parámetro de cadena de consulta (por ejemplo, `https://STAGEWEB1:8172/MSDeploy.axd?site=DemoSite`).                                                                                                                                                                                                                                              |
|         <strong>MSDeployAuth</strong> Método que Web Deploy debe usar para autenticarse en el equipo remoto.          |                                                                                                                                                                                                                          Debe establecerse en <strong>NTLM</strong> o <strong>básico</strong>. Normalmente, usará <strong>NTLM</strong> si está implementando en el servicio de agente remoto y <strong>básico</strong> si va a implementar en el controlador de web deploy. Si usa la autenticación básica, también debe especificar el nombre de usuario y la contraseña que la herramienta de implementación web de IIS (Web Deploy) debe suplantar para realizar la implementación. En este ejemplo, estos valores se proporcionan a través de las propiedades <strong>MSDeployUsername</strong> y <strong>MSDeployPassword</strong> . Si usa la autenticación NTLM, puede omitir estas propiedades o dejarlas en blanco.                                                                                                                                                                                                                          |
| <strong>MSDeployUsername</strong> Si usa la autenticación básica, Web Deploy usará esta cuenta en el equipo remoto.  |                                                                                                                                                                                                                                                                                                                                                                                                                       Debe tomar el formato <em>dominio</em>\*nombredeusuario * (por ejemplo, <strong>FABRIKAM\matt</strong>). Este valor solo se utiliza si se especifica la autenticación básica. Si usa la autenticación NTLM, se puede omitir la propiedad. Si se proporciona un valor, se omitirá.                                                                                                                                                                                                                                                                                                                                                                                                                        |
| <strong>MSDeployPassword</strong> Si usa la autenticación básica, Web Deploy usará esta contraseña en el equipo remoto. |                                                                                                                                                                                                                                                                                                                                                                                                                    Esta es la contraseña de la cuenta de usuario que especificó en la propiedad <strong>MSDeployUsername</strong> . Este valor solo se utiliza si se especifica la autenticación básica. Si usa la autenticación NTLM, se puede omitir la propiedad. Si se proporciona un valor, se omitirá.                                                                                                                                                                                                                                                                                                                                                                                                                    |
|     <strong>ContactManagerIisPath</strong> La ruta de acceso de IIS en la que desea implementar la aplicación MVC de Contact Manager.     |                                                                                                                                                                                                                                                                                                                                                                        Debe ser la ruta de acceso tal y como aparece en el administrador de IIS, con el formato [<em>nombre del sitio web de IIS</em>]/[<em>nombre de aplicación</em><em>Web</em>]. Recuerde que el sitio web de IIS debe existir antes de implementar la aplicación. Por ejemplo, si ha creado un sitio web de IIS denominado DemoSite, puede especificar la ruta de acceso de IIS para la aplicación MVC como DemoSite/ContactManager.                                                                                                                                                                                                                                                                                                                                                                        |
|   <strong>ContactManagerServiceIisPath</strong> La ruta de acceso de IIS en la que desea implementar el servicio WCF de Contact Manager.    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Por ejemplo, si ha creado un sitio web de IIS denominado DemoSite, puede especificar la ruta de acceso de IIS para el servicio WCF como <strong>DemoSite/ContactManagerService</strong>.                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|                  <strong>ContactManagerTargetUrl</strong> La dirección URL en la que se puede alcanzar el servicio WCF.                   |                                                                                                                                                     Tendrá el formato [<em>URL raíz del sitio web de IIS</em>]/[nombre de la<em>aplicación de servicio</em>]/[punto de<em>conexión de servicio</em>]. Por ejemplo, si ha creado un sitio web de IIS en el puerto 85, la dirección URL tendrá el formato `http://localhost:85/ContactManagerService/ContactService.svc`. Recuerde que la aplicación MVC y el servicio WCF se implementan en el mismo servidor. Como resultado, solo se tiene acceso a esta dirección URL desde el equipo en el que está instalada. Por este motivo, es mejor usar localhost o la dirección IP, en lugar del nombre de equipo o un encabezado de host, en la dirección URL. Si usa el nombre de equipo o un encabezado de host, la característica de seguridad de [comprobación de bucle invertido](https://go.microsoft.com/?linkid=9805131) de IIS puede bloquear la dirección URL y devolver un error <strong>http 401,1-no autorizado</strong> .                                                                                                                                                     |
|                  <strong>CmDatabaseConnectionString</strong> Cadena de conexión para el servidor de base de datos.                  | La cadena de conexión determina las credenciales que VSDBCMD usará para ponerse en contacto con el servidor de base de datos y crear la base de datos y las credenciales que utilizará el grupo de aplicaciones del servidor web para ponerse en contacto con el servidor de base de datos e interactuar con la base de datos. Esencialmente, tiene dos opciones aquí. Puede especificar <strong>Integrated Security = true</strong>, en cuyo caso se usa la autenticación integrada de Windows: <strong>Data Source = TESTDB1; Integrated Security = true</strong> en este caso, la base de datos se creará con las credenciales del usuario que ejecuta el ejecutable de VSDBCMD y la aplicación tendrá acceso a la base de datos mediante la identidad de la cuenta de equipo del servidor Web. También puede especificar el nombre de usuario y la contraseña de una cuenta de SQL Server. En este caso, las credenciales de SQL Server se usan en VSDBCMD para crear la base de datos y el grupo de aplicaciones para interactuar con la base de <strong>datos: Data Source = TESTDB1; ID. de usuario = ASqlUser; Password = PA $ $w 0rd</strong> los tutoriales de este tema suponen que usará la autenticación integrada de Windows. |
|        <strong>CmTargetDatabase</strong> El nombre que desea dar a la base de datos que va a crear en el servidor de base de datos.        |                                                                                                                                                                                                                                                                                                                                                                                                                                                     El valor que proporcione aquí se agrega al comando VSDBCMD como parámetro. También se usa para crear una cadena de conexión completa que el grupo de aplicaciones en el servidor web puede usar para interactuar con la base de datos.                                                                                                                                                                                                                                                                                                                                                                                                                                                     |

En estos ejemplos se muestra cómo se pueden configurar estas propiedades para escenarios de implementación específicos.

### <a name="example-1x2014deployment-to-the-remote-agent-service"></a>Ejemplo 1&#x2014;implementación en el servicio de agente remoto

En este ejemplo:

- Está implementando en el servicio de agente remoto en TESTWEB1.
- Está indicando a Web Deploy que use la autenticación NTLM. Web Deploy se ejecutarán con las credenciales que usó para invocar el Microsoft Build Engine (MSBuild).
- Está usando la autenticación integrada para implementar la base de datos **ContactManager** en TESTDB1. La base de datos se implementará con las credenciales usadas para invocar MSBuild.

[!code-xml[Main](configuring-deployment-properties-for-a-target-environment/samples/sample1.xml)]

### <a name="example-2x2014deployment-to-the-web-deploy-handler-endpoint"></a>Ejemplo 2&#x2014;de implementación en el extremo del controlador de web deploy

En este ejemplo:

- Está implementando en el punto de conexión de servicio del controlador de Web Deploy en STAGEWEB1.
- Está indicando a Web Deploy que use la autenticación básica.
- Está especificando que Web Deploy debe suplantar la cuenta FABRIKAM\stagingdeployer en el equipo remoto.
- Está usando la autenticación de SQL Server para implementar la base de datos **ContactManager** en STAGEDB1.

[!code-xml[Main](configuring-deployment-properties-for-a-target-environment/samples/sample2.xml)]

## <a name="conclusion"></a>Conclusión

En este momento, los archivos de proyecto están totalmente configurados para compilar e implementar la solución Contact Manager en uno o varios entornos de destino.

Para usar estos archivos de proyecto como parte de un proceso de implementación repetible de un solo paso, debe ejecutar el archivo *Publish. proj* con MSBuild y pasar la ubicación del archivo de proyecto específico del entorno como un parámetro. Puede hacerlo de varias maneras:

- Para obtener información general sobre MSBuild y una introducción a los archivos de proyecto personalizados, vea [Descripción del archivo de proyecto](../web-deployment-in-the-enterprise/understanding-the-project-file.md).
- Para obtener información sobre cómo formular un comando de MSBuild que ejecute los archivos de proyecto personalizados, vea [implementar paquetes web](../web-deployment-in-the-enterprise/deploying-web-packages.md).
- Para obtener información sobre cómo incorporar los comandos de MSBuild en un archivo de comandos para implementaciones repetibles de un solo paso, vea [crear y ejecutar un archivo de comandos de implementación](../web-deployment-in-the-enterprise/creating-and-running-a-deployment-command-file.md).
- Para obtener información sobre cómo ejecutar los archivos de proyecto personalizados desde Team Build, vea [crear una definición de compilación que admita la implementación](../configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment.md).

> [!div class="step-by-step"]
> [Anterior](creating-a-server-farm-with-the-web-farm-framework.md)
