---
uid: web-forms/overview/data-access/filtering-scenarios-with-the-datalist-and-repeater/master-detail-filtering-with-a-dropdownlist-datalist-vb
title: Maestro y detalles con DropDownList (VB) de filtrado | Microsoft Docs
author: rick-anderson
description: En este tutorial veremos cómo mostrar informes de maestro y detalles en una única página web con listas desplegables para mostrar los registros de 'master' y un control DataList para mostrar...
ms.author: riande
ms.date: 07/18/2007
ms.assetid: ad0f1014-1eff-465f-bdc6-93058de00e44
msc.legacyurl: /web-forms/overview/data-access/filtering-scenarios-with-the-datalist-and-repeater/master-detail-filtering-with-a-dropdownlist-datalist-vb
msc.type: authoredcontent
ms.openlocfilehash: 1218cf3463c78e4b3bd3c7ca1c65d21590358f8a
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 04/17/2019
ms.locfileid: "59395555"
---
# <a name="masterdetail-filtering-with-a-dropdownlist-vb"></a><span data-ttu-id="8dc9a-103">Filtrado de maestro y detalles con DropDownList (VB)</span><span class="sxs-lookup"><span data-stu-id="8dc9a-103">Master/Detail Filtering With a DropDownList (VB)</span></span>

<span data-ttu-id="8dc9a-104">por [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="8dc9a-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="8dc9a-105">[Descargue la aplicación de ejemplo](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_33_VB.exe) o [descargar PDF](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/datatutorial33vb1.pdf)</span><span class="sxs-lookup"><span data-stu-id="8dc9a-105">[Download Sample App](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_33_VB.exe) or [Download PDF](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/datatutorial33vb1.pdf)</span></span>

> <span data-ttu-id="8dc9a-106">En este tutorial veremos cómo mostrar informes de maestro y detalles en una única página web con listas desplegables para mostrar los registros de "maestros" y un control DataList para mostrar "Detalles".</span><span class="sxs-lookup"><span data-stu-id="8dc9a-106">In this tutorial we see how to display master/detail reports in a single web page using DropDownLists to display the "master" records and a DataList to display the "details".</span></span>


## <a name="introduction"></a><span data-ttu-id="8dc9a-107">Introducción</span><span class="sxs-lookup"><span data-stu-id="8dc9a-107">Introduction</span></span>

<span data-ttu-id="8dc9a-108">El informe de maestro y detalles, que se crea por primera vez mediante un GridView anteriormente [filtrado de maestro y detalles con un DropDownList](../masterdetail/master-detail-filtering-with-a-dropdownlist-vb.md) comienzo del tutorial, mostrando un conjunto de registros "maestros".</span><span class="sxs-lookup"><span data-stu-id="8dc9a-108">The master/detail report, which we first created using a GridView in the earlier [Master/Detail Filtering With a DropDownList](../masterdetail/master-detail-filtering-with-a-dropdownlist-vb.md) tutorial, begins by showing some set of "master" records.</span></span> <span data-ttu-id="8dc9a-109">El usuario puede, a continuación, profundizar en uno de los registros maestros, ver, por tanto, "Detalles" de ese registro maestro.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-109">The user can then drill down into one of the master records, thereby viewing that master record's "details."</span></span> <span data-ttu-id="8dc9a-110">Los informes de maestro y detalles son una opción ideal para visualizar las relaciones uno a varios y para mostrar información detallada de especialmente las tablas "anchas" (las que tiene una gran cantidad de columnas).</span><span class="sxs-lookup"><span data-stu-id="8dc9a-110">Master/detail reports are an ideal choice for visualizing one-to-many relationships and for displaying detailed information from particularly "wide" tables (ones that have a lot of columns).</span></span> <span data-ttu-id="8dc9a-111">Hemos analizado cómo implementar los informes de maestro y detalles con los controles GridView y DetailsView en los tutoriales anteriores.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-111">We've explored how to implement master/detail reports using the GridView and DetailsView controls in previous tutorials.</span></span> <span data-ttu-id="8dc9a-112">En este tutorial y los dos siguientes, se le vuelva a examinar estos conceptos, pero el enfoque sobre el uso de controles DataList y Repeater se controla en su lugar.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-112">In this tutorial and the next two, we'll reexamine these concepts, but focus on using DataList and Repeater controls instead.</span></span>

<span data-ttu-id="8dc9a-113">En este tutorial, buscaremos usando DropDownList para contener los registros de "master", con los registros de "Detalles" mostrados en un control DataList.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-113">In this tutorial, we'll look at using a DropDownList to contain the "master" records, with the "details" records displayed in a DataList.</span></span>

## <a name="step-1-adding-the-masterdetail-tutorial-web-pages"></a><span data-ttu-id="8dc9a-114">Paso 1: Adición de las páginas Web del Tutorial de maestro y detalles</span><span class="sxs-lookup"><span data-stu-id="8dc9a-114">Step 1: Adding the Master/Detail Tutorial Web Pages</span></span>

<span data-ttu-id="8dc9a-115">Antes de empezar este tutorial, primero dedique un momento para agregar la carpeta y las páginas ASP.NET que necesitaremos para este tutorial y los dos siguientes trabajar con informes de maestro y detalles mediante los controles DataList y Repeater.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-115">Before we start this tutorial, let's first take a moment to add the folder and ASP.NET pages we'll need for this tutorial and the next two dealing with master/detail reports using the DataList and Repeater controls.</span></span> <span data-ttu-id="8dc9a-116">Empiece por crear una nueva carpeta en el proyecto denominado `DataListRepeaterFiltering`.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-116">Start by creating a new folder in the project named `DataListRepeaterFiltering`.</span></span> <span data-ttu-id="8dc9a-117">A continuación, agregue las siguientes cinco páginas ASP.NET en esta carpeta, configurado para usar la página principal de mantenerlos todos `Site.master`:</span><span class="sxs-lookup"><span data-stu-id="8dc9a-117">Next, add the following five ASP.NET pages to this folder, having all of them configured to use the master page `Site.master`:</span></span>

- `Default.aspx`
- `FilterByDropDownList.aspx`
- `CategoryListMaster.aspx`
- `ProductsForCategoryDetails.aspx`
- `CategoriesAndProducts.aspx`


![Cree una carpeta DataListRepeaterFiltering y agregar las páginas del Tutorial de ASP.NET](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image1.png)

<span data-ttu-id="8dc9a-119">**Figura 1**: Crear un `DataListRepeaterFiltering` carpeta y agregue las páginas del Tutorial de ASP.NET</span><span class="sxs-lookup"><span data-stu-id="8dc9a-119">**Figure 1**: Create a `DataListRepeaterFiltering` Folder and Add the Tutorial ASP.NET Pages</span></span>


<span data-ttu-id="8dc9a-120">A continuación, abra el `Default.aspx` página y arrastre el `SectionLevelTutorialListing.ascx` Control de usuario desde el `UserControls` carpeta a la superficie de diseño.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-120">Next, open the `Default.aspx` page and drag the `SectionLevelTutorialListing.ascx` User Control from the `UserControls` folder onto the Design surface.</span></span> <span data-ttu-id="8dc9a-121">Este Control de usuario, que hemos creado en el [páginas maestras y navegación del sitio](../introduction/master-pages-and-site-navigation-vb.md) tutorial, enumera el mapa del sitio y los tutoriales se muestra en la sección actual en una lista con viñetas.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-121">This User Control, which we created in the [Master Pages and Site Navigation](../introduction/master-pages-and-site-navigation-vb.md) tutorial, enumerates the site map and displays the tutorials from the current section in a bulleted list.</span></span>


<span data-ttu-id="8dc9a-122">[![Agregar el Control de usuario SectionLevelTutorialListing.ascx a Default.aspx](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image3.png)](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image2.png)</span><span class="sxs-lookup"><span data-stu-id="8dc9a-122">[![Add the SectionLevelTutorialListing.ascx User Control to Default.aspx](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image3.png)](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image2.png)</span></span>

<span data-ttu-id="8dc9a-123">**Figura 2**: Agregar el `SectionLevelTutorialListing.ascx` Control de usuario `Default.aspx` ([haga clic aquí para ver imagen en tamaño completo](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="8dc9a-123">**Figure 2**: Add the `SectionLevelTutorialListing.ascx` User Control to `Default.aspx` ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image4.png))</span></span>


<span data-ttu-id="8dc9a-124">Para tener la visualización de la lista con viñetas los tutoriales de principal-detalle que crearemos, es necesario agregarlos al mapa del sitio.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-124">In order to have the bulleted list display the master/detail tutorials we'll be creating, we need to add them to the site map.</span></span> <span data-ttu-id="8dc9a-125">Abra el `Web.sitemap` archivo y agregue el siguiente marcado después de las marcas de nodo "Mostrar datos con los controles DataList y Repeater" asignación de sitio:</span><span class="sxs-lookup"><span data-stu-id="8dc9a-125">Open the `Web.sitemap` file and add the following markup after the "Displaying Data with the DataList and Repeater" site map node markup:</span></span>

[!code-xml[Main](master-detail-filtering-with-a-dropdownlist-datalist-vb/samples/sample1.xml)]


![Actualizar el mapa del sitio para incluir las nuevas páginas de ASP.NET](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image5.png)

<span data-ttu-id="8dc9a-127">**Figura 3**: Actualizar el mapa del sitio para incluir las nuevas páginas de ASP.NET</span><span class="sxs-lookup"><span data-stu-id="8dc9a-127">**Figure 3**: Update the Site Map to Include the New ASP.NET Pages</span></span>


## <a name="step-2-displaying-the-categories-in-a-dropdownlist"></a><span data-ttu-id="8dc9a-128">Paso 2: Mostrar las categorías en DropDownList</span><span class="sxs-lookup"><span data-stu-id="8dc9a-128">Step 2: Displaying the Categories in a DropDownList</span></span>

<span data-ttu-id="8dc9a-129">Nuestro informe de maestro y detalles mostrará las categorías de DropDownList, con los productos del elemento de lista seleccionado aparece más abajo en la página en un control DataList.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-129">Our master/detail report will list the categories in a DropDownList, with the selected list item's products displayed further down in the page in a DataList.</span></span> <span data-ttu-id="8dc9a-130">La primera tarea antes que nosotros, a continuación, es que las categorías mostradas en DropDownList.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-130">The first task ahead of us, then, is to have the categories displayed in a DropDownList.</span></span> <span data-ttu-id="8dc9a-131">Comience abriendo la `FilterByDropDownList.aspx` página en el `DataListRepeaterFiltering` carpeta y arrastre un DropDownList del cuadro de herramientas al diseñador de la página.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-131">Start by opening the `FilterByDropDownList.aspx` page in the `DataListRepeaterFiltering` folder and drag a DropDownList from the Toolbox onto the page's designer.</span></span> <span data-ttu-id="8dc9a-132">A continuación, establezca la DropDownList `ID` propiedad `Categories`.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-132">Next, set the DropDownList's `ID` property to `Categories`.</span></span> <span data-ttu-id="8dc9a-133">Haga clic en el vínculo Elegir origen de datos de etiqueta inteligente de DropDownList y cree un nuevo origen ObjectDataSource denominado `CategoriesDataSource`.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-133">Click on the Choose Data Source link from the DropDownList's smart tag and create a new ObjectDataSource named `CategoriesDataSource`.</span></span>


<span data-ttu-id="8dc9a-134">[![Agregar un nuevo origen ObjectDataSource denominado CategoriesDataSource](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image7.png)](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image6.png)</span><span class="sxs-lookup"><span data-stu-id="8dc9a-134">[![Add a New ObjectDataSource Named CategoriesDataSource](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image7.png)](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image6.png)</span></span>

<span data-ttu-id="8dc9a-135">**Figura 4**: Agregar un nuevo origen ObjectDataSource denominado `CategoriesDataSource` ([haga clic aquí para ver imagen en tamaño completo](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="8dc9a-135">**Figure 4**: Add a New ObjectDataSource Named `CategoriesDataSource` ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image8.png))</span></span>


<span data-ttu-id="8dc9a-136">Configure el nuevo origen ObjectDataSource de manera que invoca el `CategoriesBLL` la clase `GetCategories()` método.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-136">Configure the new ObjectDataSource such that it invokes the `CategoriesBLL` class's `GetCategories()` method.</span></span> <span data-ttu-id="8dc9a-137">Después de configurar ObjectDataSource necesitamos especificar qué campo del origen de datos se debe mostrar en DropDownList y que uno se debe asociar como el valor de cada elemento de lista.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-137">After configuring the ObjectDataSource we still need to specify what data source field should be displayed in the DropDownList and which one should be associated as the value for each list item.</span></span> <span data-ttu-id="8dc9a-138">Tiene la `CategoryName` campo como la presentación y `CategoryID` como el valor de cada elemento de lista.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-138">Have the `CategoryName` field as the display and `CategoryID` as the value for each list item.</span></span>


<span data-ttu-id="8dc9a-139">[![Tiene la presentación de DropDownList el campo CategoryName y Use CategoryID como valor](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image10.png)](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="8dc9a-139">[![Have the DropDownList Display the CategoryName Field and Use CategoryID as the Value](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image10.png)](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image9.png)</span></span>

<span data-ttu-id="8dc9a-140">**Figura 5**: Tiene la presentación de DropDownList el `CategoryName` campo y Use `CategoryID` como el valor ([haga clic aquí para ver imagen en tamaño completo](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image11.png))</span><span class="sxs-lookup"><span data-stu-id="8dc9a-140">**Figure 5**: Have the DropDownList Display the `CategoryName` Field and Use `CategoryID` as the Value ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image11.png))</span></span>


<span data-ttu-id="8dc9a-141">En este momento, tenemos un control DropDownList que se rellena con los registros de la `Categories` tabla (todo lleva a cabo de seis segundos aproximadamente).</span><span class="sxs-lookup"><span data-stu-id="8dc9a-141">At this point we have a DropDownList control that's populated with the records from the `Categories` table (all accomplished in about six seconds).</span></span> <span data-ttu-id="8dc9a-142">Figura 6 muestra nuestro progreso hasta ahora, cuando se ve mediante un explorador.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-142">Figure 6 shows our progress thus far when viewed through a browser.</span></span>


<span data-ttu-id="8dc9a-143">[![Una lista desplegable enumera las categorías actuales](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image13.png)](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="8dc9a-143">[![A Drop-Down Lists the Current Categories](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image13.png)](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image12.png)</span></span>

<span data-ttu-id="8dc9a-144">**Figura 6**: Una lista desplegable se enumeran las categorías actuales ([haga clic aquí para ver imagen en tamaño completo](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="8dc9a-144">**Figure 6**: A Drop-Down Lists the Current Categories ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image14.png))</span></span>


## <a name="step-2-adding-the-products-datalist"></a><span data-ttu-id="8dc9a-145">Paso 2: Agregar al control DataList de productos</span><span class="sxs-lookup"><span data-stu-id="8dc9a-145">Step 2: Adding the Products DataList</span></span>

<span data-ttu-id="8dc9a-146">El último paso de nuestro informe de maestro y detalles es enumerar los productos asociados con la categoría seleccionada.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-146">The last step in our master/detail report is to list the products associated with the selected category.</span></span> <span data-ttu-id="8dc9a-147">Para ello, agregue un control DataList a la página y crear un nuevo origen ObjectDataSource denominado `ProductsByCategoryDataSource`.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-147">To accomplish this, add a DataList to the page and create a new ObjectDataSource named `ProductsByCategoryDataSource`.</span></span> <span data-ttu-id="8dc9a-148">Tiene la `ProductsByCategoryDataSource` control recuperar sus datos desde el `ProductsBLL` la clase `GetProductsByCategoryID(categoryID)` método.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-148">Have the `ProductsByCategoryDataSource` control retrieve its data from the `ProductsBLL` class's `GetProductsByCategoryID(categoryID)` method.</span></span> <span data-ttu-id="8dc9a-149">Puesto que este informe de maestro y detalles es de solo lectura, elija la que opción la (ninguno) en las fichas de INSERT, UPDATE y DELETE.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-149">Since this master/detail report is read-only, choose the (None) option in the INSERT, UPDATE, and DELETE tabs.</span></span>


<span data-ttu-id="8dc9a-150">[![Seleccione el método GetProductsByCategoryID(categoryID)](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image16.png)](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="8dc9a-150">[![Select the GetProductsByCategoryID(categoryID) Method](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image16.png)](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image15.png)</span></span>

<span data-ttu-id="8dc9a-151">**Figura 7**: Seleccione el `GetProductsByCategoryID(categoryID)` método ([haga clic aquí para ver imagen en tamaño completo](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image17.png))</span><span class="sxs-lookup"><span data-stu-id="8dc9a-151">**Figure 7**: Select the `GetProductsByCategoryID(categoryID)` Method ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image17.png))</span></span>


<span data-ttu-id="8dc9a-152">Después de hacer clic en siguiente, el ObjectDataSource wizard nos pide el origen del valor de la `GetProductsByCategoryID(categoryID)` del método *`categoryID`* parámetro.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-152">After clicking Next, the ObjectDataSource wizard prompts us for the source of the value for the `GetProductsByCategoryID(categoryID)` method's *`categoryID`* parameter.</span></span> <span data-ttu-id="8dc9a-153">Para usar el valor del seleccionado `categories` DropDownList elemento establezca el origen de parámetro para el Control y la ControlID a `Categories`.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-153">To use the value of the selected `categories` DropDownList item set the Parameter source to Control and the ControlID to `Categories`.</span></span>


<span data-ttu-id="8dc9a-154">[![Establece el parámetro categoryID en el valor de DropDownList categorías](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image19.png)](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image18.png)</span><span class="sxs-lookup"><span data-stu-id="8dc9a-154">[![Set the categoryID Parameter to the Value of the Categories DropDownList](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image19.png)](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image18.png)</span></span>

<span data-ttu-id="8dc9a-155">**Figura 8**: Establecer el *`categoryID`* parámetro en el valor de la `Categories` DropDownList ([haga clic aquí para ver imagen en tamaño completo](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="8dc9a-155">**Figure 8**: Set the *`categoryID`* Parameter to the Value of the `Categories` DropDownList ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image20.png))</span></span>


<span data-ttu-id="8dc9a-156">Al finalizar el asistente Configurar origen de datos, Visual Studio generará automáticamente un `ItemTemplate` para el control DataList que muestra el nombre y valor de cada campo de datos.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-156">Upon completing the Configure Data Source wizard, Visual Studio will automatically generate an `ItemTemplate` for the DataList that displays the name and value of each data field.</span></span> <span data-ttu-id="8dc9a-157">Vamos a mejorar el control DataList usar en su lugar un `ItemTemplate` que muestra sólo el nombre del producto, categoría, proveedor, cantidad por unidad y el precio junto con un `SeparatorTemplate` que inyecta un `<hr>` elemento entre cada elemento.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-157">Let's enhance the DataList to instead use an `ItemTemplate` that displays just the product's name, category, supplier, quantity per unit, and price along with a `SeparatorTemplate` that injects an `<hr>` element between each item.</span></span> <span data-ttu-id="8dc9a-158">Voy a usar el `ItemTemplate` desde un ejemplo en el [mostrar datos con los controles DataList y Repeater](../displaying-data-with-the-datalist-and-repeater/displaying-data-with-the-datalist-and-repeater-controls-vb.md) tutorial, pero puede usar cualquier marcado de plantilla que se encuentre más atractivo.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-158">I'm going to use the `ItemTemplate` from an example in the [Displaying Data with the DataList and Repeater Controls](../displaying-data-with-the-datalist-and-repeater/displaying-data-with-the-datalist-and-repeater-controls-vb.md) tutorial, but feel free to use whatever template markup you find most visually appealing.</span></span>

<span data-ttu-id="8dc9a-159">Después de realizar estos cambios, los controles DataList y marcado de su ObjectDataSource deben ser similares al siguiente:</span><span class="sxs-lookup"><span data-stu-id="8dc9a-159">After making these changes, your DataList and its ObjectDataSource's markup should look similar to the following:</span></span>

[!code-aspx[Main](master-detail-filtering-with-a-dropdownlist-datalist-vb/samples/sample2.aspx)]

<span data-ttu-id="8dc9a-160">Dedique un momento para comprobar nuestro progreso en un explorador.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-160">Take a moment to check out our progress in a browser.</span></span> <span data-ttu-id="8dc9a-161">Cuando en primer lugar, visite la página, se muestran los productos que pertenecen a la categoría seleccionada (bebidas) (como se muestra en la figura 9), pero cambiar DropDownList no actualiza los datos.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-161">When first visiting the page, those products belonging to the selected category (Beverages) are displayed (as shown in Figure 9), but changing the DropDownList doesn't update the data.</span></span> <span data-ttu-id="8dc9a-162">Esto es porque se debe producir una devolución de datos para que el control DataList actualizar.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-162">This is because a postback must occur for the DataList to update.</span></span> <span data-ttu-id="8dc9a-163">Para lograr esto se puede establece la DropDownList `AutoPostBack` propiedad `true` o agregar un control de botón Web a la página.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-163">To accomplish this we can either set the DropDownList's `AutoPostBack` property to `true` or add a Button Web control to the page.</span></span> <span data-ttu-id="8dc9a-164">Para este tutorial, he optado por establecer la DropDownList `AutoPostBack` propiedad `true`.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-164">For this tutorial, I've opted to set the DropDownList's `AutoPostBack` property to `true`.</span></span>

<span data-ttu-id="8dc9a-165">Las figuras 9 y 10 se muestra el informe de maestro y detalles en acción.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-165">Figures 9 and 10 illustrate the master/detail report in action.</span></span>


<span data-ttu-id="8dc9a-166">[![Cuando se visita primero la página, se muestran los productos de bebidas](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image22.png)](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="8dc9a-166">[![When First Visiting the Page, the Beverage Products are Displayed](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image22.png)](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image21.png)</span></span>

<span data-ttu-id="8dc9a-167">**Figura 9**: Cuando se visita primero la página, se muestran los productos de bebidas ([haga clic aquí para ver imagen en tamaño completo](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image23.png))</span><span class="sxs-lookup"><span data-stu-id="8dc9a-167">**Figure 9**: When First Visiting the Page, the Beverage Products are Displayed ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image23.png))</span></span>


<span data-ttu-id="8dc9a-168">[![Seleccionar automáticamente un nuevo producto (generar) produce un PostBack, actualizando el control DataList](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image25.png)](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image24.png)</span><span class="sxs-lookup"><span data-stu-id="8dc9a-168">[![Selecting a New Product (Produce) Automatically Causes a PostBack, Updating the DataList](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image25.png)](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image24.png)</span></span>

<span data-ttu-id="8dc9a-169">**Figura 10**: Seleccionar automáticamente un nuevo producto (generar) produce un PostBack, actualizando el control DataList ([haga clic aquí para ver imagen en tamaño completo](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image26.png))</span><span class="sxs-lookup"><span data-stu-id="8dc9a-169">**Figure 10**: Selecting a New Product (Produce) Automatically Causes a PostBack, Updating the DataList ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image26.png))</span></span>


## <a name="adding-a----choose-a-category----list-item"></a><span data-ttu-id="8dc9a-170">Agregar un elemento de lista "--elegir una categoría:"</span><span class="sxs-lookup"><span data-stu-id="8dc9a-170">Adding a "-- Choose a Category --" List Item</span></span>

<span data-ttu-id="8dc9a-171">Cuando se visita primero la `FilterByDropDownList.aspx` página las categorías de primer elemento de lista del DropDownList (bebidas) está seleccionada de forma predeterminada, que muestra los productos de bebidas en el control DataList.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-171">When first visiting the `FilterByDropDownList.aspx` page the categories DropDownList's first list item (Beverages) is selected by default, showing the beverage products in the DataList.</span></span> <span data-ttu-id="8dc9a-172">En el *filtrado de maestro y detalles con un DropDownList* tutorial hemos agregado una opción "--elegir una categoría:" al control DropDownList que estaba seleccionada de forma predeterminada y, cuando se selecciona, muestra *todas* de la productos en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-172">In the *Master/Detail Filtering With a DropDownList* tutorial we added a "-- Choose a Category --" option to the DropDownList that was selected by default and, when selected, displayed *all* of the products in the database.</span></span> <span data-ttu-id="8dc9a-173">Este enfoque era fácil de administrar al enumerar los productos en un control GridView, como cada fila del producto ocupaba una pequeña cantidad de espacio en pantalla.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-173">Such an approach was manageable when listing the products in a GridView, as each product row took up a small amount of screen real estate.</span></span> <span data-ttu-id="8dc9a-174">Sin embargo, con el control DataList, información de cada producto consume un fragmento mucho mayor de la pantalla.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-174">With the DataList, however, each product's information consumes a much larger chunk of the screen.</span></span> <span data-ttu-id="8dc9a-175">Podemos agregar una opción "--elegir una categoría:" y encuentra activada de forma predeterminada, pero en lugar de tener mostrar todos los productos cuando se selecciona, vamos a configurarlo para que no muestre ningún producto.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-175">Let's still add a "-- Choose a Category --" option and have it selected by default, but instead of having it show all products when selected, let's configure it so that it shows no products.</span></span>

<span data-ttu-id="8dc9a-176">Para agregar un nuevo elemento de lista al control DropDownList, vaya a la ventana Propiedades y haga clic en el botón de puntos suspensivos en el `Items` propiedad.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-176">To add a new list item to the DropDownList, go to the Properties window and click on the ellipses in the `Items` property.</span></span> <span data-ttu-id="8dc9a-177">Agregar un nuevo elemento de lista con el `Text` "--elegir una categoría:" y el `Value` `0`.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-177">Add a new list item with the `Text` "-- Choose a Category --" and the `Value` `0`.</span></span>


![Agregar un](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image27.png)

<span data-ttu-id="8dc9a-179">**Figura 11**: Agregar un elemento de lista "--elegir una categoría:"</span><span class="sxs-lookup"><span data-stu-id="8dc9a-179">**Figure 11**: Add a "-- Choose a Category --" List Item</span></span>


<span data-ttu-id="8dc9a-180">Como alternativa, puede agregar el elemento de lista agregando el siguiente marcado al control DropDownList:</span><span class="sxs-lookup"><span data-stu-id="8dc9a-180">Alternatively, you can add the list item by adding the following markup to the DropDownList:</span></span>

[!code-aspx[Main](master-detail-filtering-with-a-dropdownlist-datalist-vb/samples/sample3.aspx)]

<span data-ttu-id="8dc9a-181">Además, se debe establecer el control DropDownList `AppendDataBoundItems` a `true` porque si se establece en `false` (valor predeterminado), cuando las categorías se enlazan al control DropDownList de ObjectDataSource sobrescribirá cualquier lista agregado manualmente elementos.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-181">Additionally, we need to set the DropDownList control's `AppendDataBoundItems` to `true` because if it's set to `false` (the default), when the categories are bound to the DropDownList from the ObjectDataSource they'll overwrite any manually-added list items.</span></span>


![Establezca la propiedad AppendDataBoundItems en True](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image28.png)

<span data-ttu-id="8dc9a-183">**Figura 12**: Establecer el `AppendDataBoundItems` propiedad en True</span><span class="sxs-lookup"><span data-stu-id="8dc9a-183">**Figure 12**: Set the `AppendDataBoundItems` Property to True</span></span>


<span data-ttu-id="8dc9a-184">La razón por la que elegimos el valor `0` para obtener la lista "--elegir una categoría:" elemento es porque no hay ninguna categoría en el sistema con un valor de `0`, por lo tanto, no se devolverá ningún registro del producto cuando se selecciona el elemento de lista "--elegir una categoría--".</span><span class="sxs-lookup"><span data-stu-id="8dc9a-184">The reason we chose the value `0` for the "-- Choose a Category --" list item is because there are no categories in the system with a value of `0`, hence no product records will be returned when the "-- Choose a Category --" list item is selected.</span></span> <span data-ttu-id="8dc9a-185">Para confirmarlo, dedique un momento para visitar la página a través de un explorador.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-185">To confirm this, take a moment to visit the page through a browser.</span></span> <span data-ttu-id="8dc9a-186">Como se muestra en la figura 13, al ver la página se selecciona el elemento de lista "--elegir una categoría:" inicialmente y no hay productos se muestran.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-186">As Figure 13 shows, when initially viewing the page the "-- Choose a Category --" list item is selected and no products are displayed.</span></span>


<span data-ttu-id="8dc9a-187">[![Cuando el](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image30.png)](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="8dc9a-187">[![When the](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image30.png)](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image29.png)</span></span>

<span data-ttu-id="8dc9a-188">**Figura 13**: Cuando se selecciona el elemento de lista "--elegir una categoría:", los productos No se muestran ([haga clic aquí para ver imagen en tamaño completo](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image31.png))</span><span class="sxs-lookup"><span data-stu-id="8dc9a-188">**Figure 13**: When the "-- Choose a Category --" List Item is Selected, No Products are Displayed ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-datalist-vb/_static/image31.png))</span></span>


<span data-ttu-id="8dc9a-189">Si en su lugar mostraría *todas* de los productos cuando se selecciona la opción "--elegir una categoría:", use un valor de `-1` en su lugar.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-189">If you'd rather display *all* of the products when the "-- Choose a Category --" option is selected, use a value of `-1` instead.</span></span> <span data-ttu-id="8dc9a-190">El lector astuto recordará esa copia en el *filtrado de maestro y detalles con un DropDownList* tutorial actualizamos el `ProductsBLL` la clase `GetProductsByCategoryID(categoryID)` método para que si un *`categoryID`* valor de `-1` se pasó en todos los productos que se devolvieron los registros.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-190">The astute reader will recall that back in the *Master/Detail Filtering With a DropDownList* tutorial we updated the `ProductsBLL` class's `GetProductsByCategoryID(categoryID)` method so that if a *`categoryID`* value of `-1` was passed in, all product records were returned.</span></span>

## <a name="summary"></a><span data-ttu-id="8dc9a-191">Resumen</span><span class="sxs-lookup"><span data-stu-id="8dc9a-191">Summary</span></span>

<span data-ttu-id="8dc9a-192">Cuando muestra datos relacionados de forma jerárquica, a menudo ayuda a presentar los datos mediante los informes de maestro/detalle, desde el que el usuario pueda empezar a examinar los datos de la parte superior de la jerarquía y explorar en profundidad los detalles.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-192">When displaying hierarchically-related data, it often helps to present the data using master/detail reports, from which the user can start perusing the data from the top of the hierarchy and drill down into details.</span></span> <span data-ttu-id="8dc9a-193">En este tutorial se examina la creación de un informe sencillo de maestro y detalles que muestre los productos de una categoría seleccionada.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-193">In this tutorial we examined building a simple master/detail report showing a selected category's products.</span></span> <span data-ttu-id="8dc9a-194">Esto se consigue usando DropDownList para la lista de categorías y un control DataList para los productos que pertenecen a la categoría seleccionada.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-194">This was accomplished by using a DropDownList for the list of categories and a DataList for the products belonging to the selected category.</span></span>

<span data-ttu-id="8dc9a-195">En el siguiente tutorial, buscaremos en separar los registros maestro y detalles en dos páginas.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-195">In the next tutorial we'll look at separating the master and details records across two pages.</span></span> <span data-ttu-id="8dc9a-196">En la primera página, una lista de registros "maestros" se mostrará, con un vínculo para ver los detalles.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-196">In the first page, a list of "master" records will be displayed, with a link to view the details.</span></span> <span data-ttu-id="8dc9a-197">Al hacer clic en el vínculo se captar el usuario a la segunda página, que mostrará los detalles para el registro maestro seleccionado.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-197">Clicking on the link will whisk the user to the second page, which will display the details for the selected master record.</span></span>

<span data-ttu-id="8dc9a-198">Feliz programación.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-198">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="8dc9a-199">Acerca del autor</span><span class="sxs-lookup"><span data-stu-id="8dc9a-199">About the Author</span></span>

<span data-ttu-id="8dc9a-200">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor de siete libros sobre ASP/ASP.NET y fundador de [4GuysFromRolla.com](http://www.4guysfromrolla.com), trabaja con tecnologías Web de Microsoft desde 1998.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-200">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="8dc9a-201">Scott trabaja como consultor independiente, instructor y escritor.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-201">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="8dc9a-202">Su último libro es [*SAM enseñar a usted mismo ASP.NET 2.0 en 24 horas*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="8dc9a-202">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="8dc9a-203">Puede ponerse en [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="8dc9a-203">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="8dc9a-204">o a través de su blog, que puede encontrarse en [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="8dc9a-204">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="8dc9a-205">Agradecimientos especiales a...</span><span class="sxs-lookup"><span data-stu-id="8dc9a-205">Special Thanks To…</span></span>

<span data-ttu-id="8dc9a-206">Esta serie de tutoriales ha sido revisada por muchos revisores útiles.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-206">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="8dc9a-207">Revisor de clientes potencial para este tutorial era Randy Schmidt.</span><span class="sxs-lookup"><span data-stu-id="8dc9a-207">Lead reviewer for this tutorial was Randy Schmidt.</span></span> <span data-ttu-id="8dc9a-208">¿Está interesado en leer mi próximos artículos de MSDN?</span><span class="sxs-lookup"><span data-stu-id="8dc9a-208">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="8dc9a-209">Si es así, envíeme una línea en [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="8dc9a-209">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="8dc9a-210">[Anterior](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs.md)
> [Siguiente](master-detail-filtering-acess-two-pages-datalist-vb.md)</span><span class="sxs-lookup"><span data-stu-id="8dc9a-210">[Previous](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs.md)
[Next](master-detail-filtering-acess-two-pages-datalist-vb.md)</span></span>
