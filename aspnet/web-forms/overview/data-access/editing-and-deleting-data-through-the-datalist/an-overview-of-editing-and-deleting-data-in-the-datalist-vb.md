---
uid: web-forms/overview/data-access/editing-and-deleting-data-through-the-datalist/an-overview-of-editing-and-deleting-data-in-the-datalist-vb
title: Información general de editar y eliminar datos en el control DataList (VB) | Microsoft Docs
author: rick-anderson
description: Mientras el control DataList carece de edición integrada y eliminación de funciones, en este tutorial veremos cómo crear a un control DataList que admite Editar y eliminar o...
ms.author: riande
ms.date: 10/30/2006
ms.assetid: 9410a23c-9697-4f07-bd71-e62b0ceac655
msc.legacyurl: /web-forms/overview/data-access/editing-and-deleting-data-through-the-datalist/an-overview-of-editing-and-deleting-data-in-the-datalist-vb
msc.type: authoredcontent
ms.openlocfilehash: b1c7834e67f7682f82ecd0b2b5140260d104aecc
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 03/01/2019
ms.locfileid: "57035792"
---
<a name="an-overview-of-editing-and-deleting-data-in-the-datalist-vb"></a><span data-ttu-id="a5152-103">Información general de editar y eliminar datos en el control DataList (VB)</span><span class="sxs-lookup"><span data-stu-id="a5152-103">An Overview of Editing and Deleting Data in the DataList (VB)</span></span>
====================
<span data-ttu-id="a5152-104">por [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="a5152-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="a5152-105">[Descargue la aplicación de ejemplo](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_36_VB.exe) o [descargar PDF](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/datatutorial36vb1.pdf)</span><span class="sxs-lookup"><span data-stu-id="a5152-105">[Download Sample App](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_36_VB.exe) or [Download PDF](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/datatutorial36vb1.pdf)</span></span>

> <span data-ttu-id="a5152-106">Mientras el control DataList carece de edición integrada y eliminación de funciones, en este tutorial veremos cómo crear a un control DataList que admite la edición y eliminación de los datos subyacentes.</span><span class="sxs-lookup"><span data-stu-id="a5152-106">While the DataList lacks built-in editing and deleting capabilities, in this tutorial we'll see how to create a DataList that supports editing and deleting of its underlying data.</span></span>


## <a name="introduction"></a><span data-ttu-id="a5152-107">Introducción</span><span class="sxs-lookup"><span data-stu-id="a5152-107">Introduction</span></span>

<span data-ttu-id="a5152-108">En el [una visión general de insertar, actualizar y eliminar datos](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md) tutorial hemos visto cómo insertar, actualizar y eliminar datos mediante la arquitectura de aplicación, un origen ObjectDataSource y GridView, DetailsView y FormView controles.</span><span class="sxs-lookup"><span data-stu-id="a5152-108">In the [An Overview of Inserting, Updating, and Deleting Data](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md) tutorial we looked at how to insert, update, and delete data using the application architecture, an ObjectDataSource, and the GridView, DetailsView, and FormView controls.</span></span> <span data-ttu-id="a5152-109">Con el origen ObjectDataSource y estos controles Web de tres datos, implementar las interfaces de modificación de datos simple era un complemento e implica simplemente funciona a la perfección una casilla de verificación de una etiqueta inteligente.</span><span class="sxs-lookup"><span data-stu-id="a5152-109">With the ObjectDataSource and these three data Web controls, implementing simple data modification interfaces was a snap and involved merely ticking a checkbox from a smart tag.</span></span> <span data-ttu-id="a5152-110">No se necesita se escriban código.</span><span class="sxs-lookup"><span data-stu-id="a5152-110">No code needed to be written.</span></span>

<span data-ttu-id="a5152-111">Lamentablemente, el control DataList no tiene integrado en la edición y eliminación de funciones inherentes en el control GridView.</span><span class="sxs-lookup"><span data-stu-id="a5152-111">Unfortunately, the DataList lacks the built-in editing and deleting capabilities inherent in the GridView control.</span></span> <span data-ttu-id="a5152-112">Esta funcionalidad que falta es debe en parte al hecho de que el control DataList es un relic desde la versión anterior de ASP.NET, cuando los controles de origen de datos declarativos y páginas de modificación de datos sin código no estaban disponibles.</span><span class="sxs-lookup"><span data-stu-id="a5152-112">This missing functionality is due in part to the fact that the DataList is a relic from the previous version of ASP.NET, when declarative data source controls and code-free data modification pages were unavailable.</span></span> <span data-ttu-id="a5152-113">Si bien el control DataList de ASP.NET 2.0 no ofrecen la misma fábrica capacidades de modificación de datos como GridView, podemos usar ASP.NET 1.x técnicas para incluir esta funcionalidad.</span><span class="sxs-lookup"><span data-stu-id="a5152-113">While the DataList in ASP.NET 2.0 does not offer the same out of the box data modification capabilities as the GridView, we can use ASP.NET 1.x techniques to include such functionality.</span></span> <span data-ttu-id="a5152-114">Este enfoque requiere un poco de código, pero, como veremos en este tutorial, el control DataList tiene algunas propiedades y eventos en su lugar para facilitar este proceso.</span><span class="sxs-lookup"><span data-stu-id="a5152-114">This approach requires a bit of code but, as we'll see in this tutorial, the DataList has some events and properties in place to aid in this process.</span></span>

<span data-ttu-id="a5152-115">En este tutorial, veremos cómo crear a un control DataList que admite la edición y eliminación de los datos subyacentes.</span><span class="sxs-lookup"><span data-stu-id="a5152-115">In this tutorial we'll see how to create a DataList that supports editing and deleting of its underlying data.</span></span> <span data-ttu-id="a5152-116">Tutoriales futuros examinará la edición más avanzada y escenarios de eliminación, incluida la validación de campo de entrada, controla correctamente las excepciones producidas desde el acceso a datos o las capas de lógica de negocio y así sucesivamente.</span><span class="sxs-lookup"><span data-stu-id="a5152-116">Future tutorials will examine more advanced editing and deleting scenarios, including input field validation, gracefully handling exceptions raised from the Data Access or Business Logic Layers, and so on.</span></span>

> [!NOTE]
> <span data-ttu-id="a5152-117">Al igual que el control DataList, el control Repeater carece de fuera de la funcionalidad del cuadro para insertar, actualizar o eliminar.</span><span class="sxs-lookup"><span data-stu-id="a5152-117">Like the DataList, the Repeater control lacks the out of the box functionality for inserting, updating, or deleting.</span></span> <span data-ttu-id="a5152-118">Aunque se puede agregar esta funcionalidad, el control DataList incluye propiedades y eventos no se encuentra en el control Repeater que simplifican la adición de estas capacidades.</span><span class="sxs-lookup"><span data-stu-id="a5152-118">While such functionality can be added, the DataList includes properties and events not found in the Repeater that simplify adding such capabilities.</span></span> <span data-ttu-id="a5152-119">Por lo tanto, este tutorial y los próximos que mirar la edición y eliminación se centrarán estrictamente en el control DataList.</span><span class="sxs-lookup"><span data-stu-id="a5152-119">Therefore, this tutorial and future ones that look at editing and deleting will focus strictly on the DataList.</span></span>


## <a name="step-1-creating-the-editing-and-deleting-tutorials-web-pages"></a><span data-ttu-id="a5152-120">Paso 1: Creación de las páginas Web de tutoriales de edición y eliminación</span><span class="sxs-lookup"><span data-stu-id="a5152-120">Step 1: Creating the Editing and Deleting Tutorials Web Pages</span></span>

<span data-ttu-id="a5152-121">Antes de empezar a explorar cómo actualizar y eliminar datos de un control DataList, permiten s primero dedique un momento para crear las páginas ASP.NET en nuestro proyecto de sitio Web que necesitaremos para este tutorial y las diversas siguientes.</span><span class="sxs-lookup"><span data-stu-id="a5152-121">Before we start exploring how to update and delete data from a DataList, let s first take a moment to create the ASP.NET pages in our website project that we'll need for this tutorial and the next several ones.</span></span> <span data-ttu-id="a5152-122">Empiece por agregar una nueva carpeta denominada `EditDeleteDataList`.</span><span class="sxs-lookup"><span data-stu-id="a5152-122">Start by adding a new folder named `EditDeleteDataList`.</span></span> <span data-ttu-id="a5152-123">A continuación, agregue las siguientes páginas ASP.NET a la carpeta y asegúrese de asociar cada página con el `Site.master` página maestra:</span><span class="sxs-lookup"><span data-stu-id="a5152-123">Next, add the following ASP.NET pages to that folder, making sure to associate each page with the `Site.master` master page:</span></span>

- `Default.aspx`
- `Basics.aspx`
- `BatchUpdate.aspx`
- `ErrorHandling.aspx`
- `UIValidation.aspx`
- `CustomizedUI.aspx`
- `OptimisticConcurrency.aspx`
- `ConfirmationOnDelete.aspx`
- `UserLevelAccess.aspx`


![Agregar las páginas ASP.NET para los tutoriales](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image1.png)

<span data-ttu-id="a5152-125">**Figura 1**: Agregar las páginas ASP.NET para los tutoriales</span><span class="sxs-lookup"><span data-stu-id="a5152-125">**Figure 1**: Add the ASP.NET Pages for the Tutorials</span></span>


<span data-ttu-id="a5152-126">Al igual que en las demás carpetas `Default.aspx` en el `EditDeleteDataList` carpeta enumeran los tutoriales en su sección.</span><span class="sxs-lookup"><span data-stu-id="a5152-126">Like in the other folders, `Default.aspx` in the `EditDeleteDataList` folder lists the tutorials in its section.</span></span> <span data-ttu-id="a5152-127">Recuerde que el `SectionLevelTutorialListing.ascx` Control de usuario proporciona esta funcionalidad.</span><span class="sxs-lookup"><span data-stu-id="a5152-127">Recall that the `SectionLevelTutorialListing.ascx` User Control provides this functionality.</span></span> <span data-ttu-id="a5152-128">Por lo tanto, agrega este Control de usuario a `Default.aspx` arrastrándolo desde el Explorador de soluciones en la página de vista de diseño de s.</span><span class="sxs-lookup"><span data-stu-id="a5152-128">Therefore, add this User Control to `Default.aspx` by dragging it from the Solution Explorer onto the page s Design view.</span></span>


<span data-ttu-id="a5152-129">[![Agregar el Control de usuario SectionLevelTutorialListing.ascx a Default.aspx](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image3.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image2.png)</span><span class="sxs-lookup"><span data-stu-id="a5152-129">[![Add the SectionLevelTutorialListing.ascx User Control to Default.aspx](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image3.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image2.png)</span></span>

<span data-ttu-id="a5152-130">**Figura 2**: Agregar el `SectionLevelTutorialListing.ascx` Control de usuario `Default.aspx` ([haga clic aquí para ver imagen en tamaño completo](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="a5152-130">**Figure 2**: Add the `SectionLevelTutorialListing.ascx` User Control to `Default.aspx` ([Click to view full-size image](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image4.png))</span></span>


<span data-ttu-id="a5152-131">Por último, agregue las páginas como entradas para el `Web.sitemap` archivo.</span><span class="sxs-lookup"><span data-stu-id="a5152-131">Lastly, add the pages as entries to the `Web.sitemap` file.</span></span> <span data-ttu-id="a5152-132">En concreto, agregue el siguiente marcado después de los informes de maestro y detalles con los controles DataList y Repeater `<siteMapNode>`:</span><span class="sxs-lookup"><span data-stu-id="a5152-132">Specifically, add the following markup after the Master/Detail Reports with the DataList and Repeater `<siteMapNode>`:</span></span>


[!code-xml[Main](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/samples/sample1.xml)]

<span data-ttu-id="a5152-133">Después de actualizar `Web.sitemap`, dedique un momento para ver el sitio Web de tutoriales a través de un explorador.</span><span class="sxs-lookup"><span data-stu-id="a5152-133">After updating `Web.sitemap`, take a moment to view the tutorials website through a browser.</span></span> <span data-ttu-id="a5152-134">El menú de la izquierda ahora incluye elementos para el control DataList, edición y eliminación de tutoriales.</span><span class="sxs-lookup"><span data-stu-id="a5152-134">The menu on the left now includes items for the DataList editing and deleting tutorials.</span></span>


![El mapa del sitio incluye ahora entradas para el control DataList, edición y eliminación de tutoriales](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image5.png)

<span data-ttu-id="a5152-136">**Figura 3**: El mapa del sitio incluye ahora entradas para el control DataList, edición y eliminación de tutoriales</span><span class="sxs-lookup"><span data-stu-id="a5152-136">**Figure 3**: The Site Map Now Includes Entries for the DataList Editing and Deleting Tutorials</span></span>


## <a name="step-2-examining-techniques-for-updating-and-deleting-data"></a><span data-ttu-id="a5152-137">Paso 2: Examen de las técnicas para actualizar y eliminar datos</span><span class="sxs-lookup"><span data-stu-id="a5152-137">Step 2: Examining Techniques for Updating and Deleting Data</span></span>

<span data-ttu-id="a5152-138">Editar y eliminar datos con el control GridView es muy sencillo porque interiormente, el control GridView y ObjectDataSource trabajan en conjunto.</span><span class="sxs-lookup"><span data-stu-id="a5152-138">Editing and deleting data with the GridView is so easy because, underneath the covers, the GridView and ObjectDataSource work in concert.</span></span> <span data-ttu-id="a5152-139">Como se describe en el [examinando los eventos asociados con la inserción, actualización y eliminación](../editing-inserting-and-deleting-data/examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) tutorial, cuando se hace clic en un botón de actualización de fila s, el control GridView asigna automáticamente sus campos que usa el enlace de datos bidireccional a la `UpdateParameters` colección de su origen ObjectDataSource y, a continuación, llama a ObjectDataSource s `Update()` método.</span><span class="sxs-lookup"><span data-stu-id="a5152-139">As discussed in the [Examining the Events Associated with Inserting, Updating, and Deleting](../editing-inserting-and-deleting-data/examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) tutorial, when a row s Update button is clicked, the GridView automatically assigns its fields that used two-way databinding to the `UpdateParameters` collection of its ObjectDataSource and then invokes that ObjectDataSource s `Update()` method.</span></span>

<span data-ttu-id="a5152-140">Por desgracia, el control DataList no proporciona esta funcionalidad integrada.</span><span class="sxs-lookup"><span data-stu-id="a5152-140">Sadly, the DataList does not provide any of this built-in functionality.</span></span> <span data-ttu-id="a5152-141">Es nuestra responsabilidad para asegurarse de que el usuario s los valores se asignan a los parámetros de ObjectDataSource s y que su `Update()` se llama al método.</span><span class="sxs-lookup"><span data-stu-id="a5152-141">It is our responsibility to ensure that the user s values are assigned to the ObjectDataSource s parameters and that its `Update()` method is called.</span></span> <span data-ttu-id="a5152-142">Para ayudar a nosotros en este esfuerzo, el control DataList proporciona las siguientes propiedades y eventos:</span><span class="sxs-lookup"><span data-stu-id="a5152-142">To aid us in this endeavor, the DataList provides the following properties and events:</span></span>

- <span data-ttu-id="a5152-143">**El [ `DataKeyField` propiedad](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basedatalist.datakeyfield.aspx)**  al actualizar o eliminar, necesitamos poder identificar de forma exclusiva cada elemento en el control DataList.</span><span class="sxs-lookup"><span data-stu-id="a5152-143">**The [`DataKeyField` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basedatalist.datakeyfield.aspx)** when updating or deleting, we need to be able to uniquely identify each item in the DataList.</span></span> <span data-ttu-id="a5152-144">Establezca esta propiedad en el campo de clave principal de los datos mostrados.</span><span class="sxs-lookup"><span data-stu-id="a5152-144">Set this property to the primary key field of the displayed data.</span></span> <span data-ttu-id="a5152-145">Si lo hace, se rellenará el control DataList s [ `DataKeys` colección](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basedatalist.datakeys.aspx) con los valores especificados `DataKeyField` valor para cada elemento DataList.</span><span class="sxs-lookup"><span data-stu-id="a5152-145">Doing so will populate the DataList s [`DataKeys` collection](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basedatalist.datakeys.aspx) with the specified `DataKeyField` value for each DataList item.</span></span>
- <span data-ttu-id="a5152-146">**El [ `EditCommand` eventos](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.editcommand.aspx)**  se desencadena cuando un botón, LinkButton o ImageButton cuyo `CommandName` propiedad está establecida en se hace clic en Editar.</span><span class="sxs-lookup"><span data-stu-id="a5152-146">**The [`EditCommand` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.editcommand.aspx)** fires when a Button, LinkButton, or ImageButton whose `CommandName` property is set to Edit is clicked.</span></span>
- <span data-ttu-id="a5152-147">**El [ `CancelCommand` eventos](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.cancelcommand.aspx)**  se desencadena cuando un botón, LinkButton o ImageButton cuyo `CommandName` propiedad está establecida en se hace clic en Cancelar.</span><span class="sxs-lookup"><span data-stu-id="a5152-147">**The [`CancelCommand` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.cancelcommand.aspx)** fires when a Button, LinkButton, or ImageButton whose `CommandName` property is set to Cancel is clicked.</span></span>
- <span data-ttu-id="a5152-148">**El [ `UpdateCommand` eventos](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.updatecommand.aspx)**  se desencadena cuando un botón, LinkButton o ImageButton cuyo `CommandName` propiedad está establecida en se hace clic en actualizar.</span><span class="sxs-lookup"><span data-stu-id="a5152-148">**The [`UpdateCommand` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.updatecommand.aspx)** fires when a Button, LinkButton, or ImageButton whose `CommandName` property is set to Update is clicked.</span></span>
- <span data-ttu-id="a5152-149">**El [ `DeleteCommand` eventos](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.deletecommand.aspx)**  se desencadena cuando un botón, LinkButton o ImageButton cuyo `CommandName` propiedad está establecida en se hace clic en eliminar.</span><span class="sxs-lookup"><span data-stu-id="a5152-149">**The [`DeleteCommand` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.deletecommand.aspx)** fires when a Button, LinkButton, or ImageButton whose `CommandName` property is set to Delete is clicked.</span></span>

<span data-ttu-id="a5152-150">Utilizando estas propiedades y eventos, existen cuatro enfoques que podemos usar para actualizar y eliminar datos desde el control DataList:</span><span class="sxs-lookup"><span data-stu-id="a5152-150">Using these properties and events, there are four approaches we can use to update and delete data from the DataList:</span></span>

1. <span data-ttu-id="a5152-151">**Uso de técnicas ASP.NET 1.x** DataList existían antes de ASP.NET 2.0 y ObjectDataSource y fue capaz de actualizar y eliminar datos completamente a través de medios de programación.</span><span class="sxs-lookup"><span data-stu-id="a5152-151">**Using ASP.NET 1.x Techniques** the DataList existed prior to ASP.NET 2.0 and ObjectDataSources and was able to update and delete data entirely through programmatic means.</span></span> <span data-ttu-id="a5152-152">Esta técnica se deshace de ObjectDataSource por completo y requiere que se enlazar los datos para el control DataList directamente desde la capa de lógica empresarial, tanto al recuperar los datos que se va a mostrar y al actualizar o eliminar un registro.</span><span class="sxs-lookup"><span data-stu-id="a5152-152">This technique ditches the ObjectDataSource altogether and requires that we bind the data to the DataList directly from the Business Logic Layer, both in retrieving the data to display and when updating or deleting a record.</span></span>
2. <span data-ttu-id="a5152-153">**Con un solo ObjectDataSource Control en la página de selección, actualización y eliminación** mientras el control DataList no tiene la edición inherente de GridView s y la eliminación de recursos, s hay ninguna razón que podemos t agregarlos en nosotros mismos.</span><span class="sxs-lookup"><span data-stu-id="a5152-153">**Using a Single ObjectDataSource Control on the Page for Selecting, Updating, and Deleting** while the DataList lacks the GridView s inherent editing and deleting capabilities, there s no reason we can t add them in ourselves.</span></span> <span data-ttu-id="a5152-154">Con este enfoque, se usa un origen ObjectDataSource igual que en los ejemplos de GridView, pero debe crear un controlador de eventos para el control DataList s `UpdateCommand` donde configuramos los parámetros de ObjectDataSource s y una llamada de evento su `Update()` método.</span><span class="sxs-lookup"><span data-stu-id="a5152-154">With this approach, we use an ObjectDataSource just like in the GridView examples, but must create an event handler for the DataList s `UpdateCommand` event where we set the ObjectDataSource s parameters and call its `Update()` method.</span></span>
3. <span data-ttu-id="a5152-155">**Uso de un ObjectDataSource Control para cuando se selecciona, pero actualizar y eliminar directamente contra el BLL** cuando se usa la opción 2, debemos escribir algo de código en el `UpdateCommand` eventos, asignación de valores de parámetro y así sucesivamente.</span><span class="sxs-lookup"><span data-stu-id="a5152-155">**Using an ObjectDataSource Control for Selecting, but Updating and Deleting Directly Against the BLL** when using option 2, we need to write a bit of code in the `UpdateCommand` event, assigning parameter values and so on.</span></span> <span data-ttu-id="a5152-156">En su lugar, nos podemos ciña a través de ObjectDataSource para seleccionar, pero realizan las llamadas de eliminación y actualización directamente en el nivel de lógica empresarial (por ejemplo, con la opción 1).</span><span class="sxs-lookup"><span data-stu-id="a5152-156">Instead, we can stick with using the ObjectDataSource for selecting, but make the updating and deleting calls directly against the BLL (like with option 1).</span></span> <span data-ttu-id="a5152-157">En mi opinión, la actualización de datos mediante una interfaz directamente con la capa BLL da lugar a código más legible que asignar la s ObjectDataSource `UpdateParameters` y llamar a su `Update()` método.</span><span class="sxs-lookup"><span data-stu-id="a5152-157">In my opinion, updating data by interfacing directly with the BLL leads to more readable code than assigning the ObjectDataSource s `UpdateParameters` and calling its `Update()` method.</span></span>
4. <span data-ttu-id="a5152-158">**Un medio declarativo a través de ObjectDataSource varios** los tres enfoques anteriores todas requieren un poco de código.</span><span class="sxs-lookup"><span data-stu-id="a5152-158">**Using Declarative Means through Multiple ObjectDataSources** the previous three approaches all require a bit of code.</span></span> <span data-ttu-id="a5152-159">Si en su lugar, d seguir usando como sintaxis declarativa mucho como sea posible, última opción es incluir varios ObjectDataSource en la página.</span><span class="sxs-lookup"><span data-stu-id="a5152-159">If you d rather keep using as much declarative syntax as possible, a final option is to include multiple ObjectDataSources on the page.</span></span> <span data-ttu-id="a5152-160">El primer ObjectDataSource recupera los datos de la capa BLL y lo enlaza al control DataList.</span><span class="sxs-lookup"><span data-stu-id="a5152-160">The first ObjectDataSource retrieves the data from the BLL and binds it to the DataList.</span></span> <span data-ttu-id="a5152-161">Para actualizar, ObjectDataSource otro agregado, pero agregar directamente en el control DataList s `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="a5152-161">For updating, another ObjectDataSource is added, but added directly within the DataList s `EditItemTemplate`.</span></span> <span data-ttu-id="a5152-162">Para incluir la eliminación de soporte técnico, todavía otra ObjectDataSource sería necesarios en el `ItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="a5152-162">To include deleting support, yet another ObjectDataSource would be needed in the `ItemTemplate`.</span></span> <span data-ttu-id="a5152-163">Con este enfoque, estos incrustado ObjectDataSource s emplean `ControlParameters` enlazar mediante declaración los parámetros de ObjectDataSource s a los controles de entrada de usuario (en lugar de tener que especificar mediante programación en el control DataList s `UpdateCommand` controlador de eventos).</span><span class="sxs-lookup"><span data-stu-id="a5152-163">With this approach, these embedded ObjectDataSource s use `ControlParameters` to declaratively bind the ObjectDataSource s parameters to the user input controls (rather than having to specify them programmatically in the DataList s `UpdateCommand` event handler).</span></span> <span data-ttu-id="a5152-164">Este enfoque requiere un poco de código es necesario para llamar a la s ObjectDataSource incrustado `Update()` o `Delete()` comando, pero requiere mucho menor que con las otras tres enfoques.</span><span class="sxs-lookup"><span data-stu-id="a5152-164">This approach still requires a bit of code we need to call the embedded ObjectDataSource s `Update()` or `Delete()` command but requires far less than with the other three approaches.</span></span> <span data-ttu-id="a5152-165">La desventaja aquí es que el ObjectDataSource varios provocar un desorden en la página, apartarse de la legibilidad global.</span><span class="sxs-lookup"><span data-stu-id="a5152-165">The downside here is that the multiple ObjectDataSources do clutter up the page, detracting from the overall readability.</span></span>

<span data-ttu-id="a5152-166">Si se ven obligados a usar solo uno de estos enfoques, d elijo la opción 1 porque proporciona la máxima flexibilidad y porque el control DataList se diseñó originalmente para dar cabida a este patrón.</span><span class="sxs-lookup"><span data-stu-id="a5152-166">If forced to only ever use one of these approaches, I d choose option 1 because it provides the most flexibility and because the DataList was originally designed to accommodate this pattern.</span></span> <span data-ttu-id="a5152-167">Mientras el control DataList se ha ampliado para trabajar con los controles de origen de datos de ASP.NET 2.0, no tiene todos los puntos de extensibilidad o las características de los datos oficiales de ASP.NET 2.0 los controles Web (GridView, DetailsView y FormView).</span><span class="sxs-lookup"><span data-stu-id="a5152-167">While the DataList was extended to work with the ASP.NET 2.0 data source controls, it does not have all of the extensibility points or features of the official ASP.NET 2.0 data Web controls (the GridView, DetailsView, and FormView).</span></span> <span data-ttu-id="a5152-168">Opciones de 2 a 4 no son fundamentada, sin embargo.</span><span class="sxs-lookup"><span data-stu-id="a5152-168">Options 2 through 4 are not without merit, though.</span></span>

<span data-ttu-id="a5152-169">Esto y el futuro edición y eliminación de tutoriales utilizará un origen ObjectDataSource para recuperar los datos para mostrar y dirigir las llamadas a la capa BLL para actualizar y eliminar datos (opción 3).</span><span class="sxs-lookup"><span data-stu-id="a5152-169">This and the future editing and deleting tutorials will use an ObjectDataSource for retrieving the data to display and direct calls to the BLL to update and delete data (option 3).</span></span>

## <a name="step-3-adding-the-datalist-and-configuring-its-objectdatasource"></a><span data-ttu-id="a5152-170">Paso 3: Agregar al control DataList y configurar su origen ObjectDataSource</span><span class="sxs-lookup"><span data-stu-id="a5152-170">Step 3: Adding the DataList and Configuring its ObjectDataSource</span></span>

<span data-ttu-id="a5152-171">En este tutorial crearemos a un control DataList que muestra información de producto y, para cada producto, proporciona al usuario la capacidad de editar el nombre y el precio y para eliminar completamente el producto.</span><span class="sxs-lookup"><span data-stu-id="a5152-171">In this tutorial we will create a DataList that lists product information and, for each product, provides the user the ability to edit the name and price and to delete the product altogether.</span></span> <span data-ttu-id="a5152-172">En concreto, se recuperará los registros que se muestran con un origen ObjectDataSource, pero realizar la actualización y acciones de eliminación mediante una interfaz directamente con la capa BLL.</span><span class="sxs-lookup"><span data-stu-id="a5152-172">In particular, we will retrieve the records to display using an ObjectDataSource, but perform the update and delete actions by interfacing directly with the BLL.</span></span> <span data-ttu-id="a5152-173">Antes de que se preocupe sobre la implementación de las capacidades de edición y eliminación para el control DataList, permiten s obtenga primero la página para mostrar los productos en una interfaz de solo lectura.</span><span class="sxs-lookup"><span data-stu-id="a5152-173">Before we worry about implementing the editing and deleting capabilities to the DataList, let s first get the page to display the products in a read-only interface.</span></span> <span data-ttu-id="a5152-174">Desde que creamos ve examina estos pasos en los tutoriales anteriores, voy a través de ellos rápidamente.</span><span class="sxs-lookup"><span data-stu-id="a5152-174">Since we ve examined these steps in previous tutorials, I'll proceed through them quickly.</span></span>

<span data-ttu-id="a5152-175">Comience abriendo la `Basics.aspx` página en el `EditDeleteDataList` carpeta y, en la vista Diseño, agregue un control DataList a la página.</span><span class="sxs-lookup"><span data-stu-id="a5152-175">Start by opening the `Basics.aspx` page in the `EditDeleteDataList` folder and, from the Design view, add a DataList to the page.</span></span> <span data-ttu-id="a5152-176">A continuación, en la etiqueta inteligente s DataList, cree un nuevo origen ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="a5152-176">Next, from the DataList s smart tag, create a new ObjectDataSource.</span></span> <span data-ttu-id="a5152-177">Puesto que estamos trabajando con datos de productos, configúrelo para utilizar el `ProductsBLL` clase.</span><span class="sxs-lookup"><span data-stu-id="a5152-177">Since we are working with product data, configure it to use the `ProductsBLL` class.</span></span> <span data-ttu-id="a5152-178">Para recuperar *todas* productos, elija el `GetProducts()` método en la ficha Seleccionar.</span><span class="sxs-lookup"><span data-stu-id="a5152-178">To retrieve *all* products, choose the `GetProducts()` method in the SELECT tab.</span></span>


<span data-ttu-id="a5152-179">[![Configurar el origen ObjectDataSource para usar la clase ProductsBLL](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image7.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image6.png)</span><span class="sxs-lookup"><span data-stu-id="a5152-179">[![Configure the ObjectDataSource to Use the ProductsBLL Class](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image7.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image6.png)</span></span>

<span data-ttu-id="a5152-180">**Figura 4**: Configurar el origen ObjectDataSource que se usarán el `ProductsBLL` clase ([haga clic aquí para ver imagen en tamaño completo](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="a5152-180">**Figure 4**: Configure the ObjectDataSource to Use the `ProductsBLL` Class ([Click to view full-size image](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image8.png))</span></span>


<span data-ttu-id="a5152-181">[![Devolver la información de producto mediante el método GetProducts()](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image10.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="a5152-181">[![Return the Product Information Using the GetProducts() Method](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image10.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image9.png)</span></span>

<span data-ttu-id="a5152-182">**Figura 5**: Devolver la información de producto mediante la `GetProducts()` método ([haga clic aquí para ver imagen en tamaño completo](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image11.png))</span><span class="sxs-lookup"><span data-stu-id="a5152-182">**Figure 5**: Return the Product Information Using the `GetProducts()` Method ([Click to view full-size image](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image11.png))</span></span>


<span data-ttu-id="a5152-183">El control DataList, como GridView, no está diseñado para insertar nuevos datos; por lo tanto, Seleccionar opción de la lista desplegable en la pestaña Insertar de la (ninguno). También elegir (ninguno) para las pestañas UPDATE y DELETE desde las actualizaciones y eliminaciones se realizarán mediante programación a través de la capa BLL.</span><span class="sxs-lookup"><span data-stu-id="a5152-183">The DataList, like the GridView, is not designed for inserting new data; therefore, select the (None) option from the drop-down list in the INSERT tab. Also choose (None) for the UPDATE and DELETE tabs since the updates and deletes will be performed programmatically through the BLL.</span></span>


<span data-ttu-id="a5152-184">[![Confirmar que la lista desplegable se enumeran en la INSERCIÓN de ObjectDataSource s, actualización y eliminar pestañas se establecen en (None)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image13.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="a5152-184">[![Confirm that the Drop-Down Lists in the ObjectDataSource s INSERT, UPDATE, and DELETE Tabs are Set to (None)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image13.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image12.png)</span></span>

<span data-ttu-id="a5152-185">**Figura 6**: Confirme que la lista desplegable se enumeran en ObjectDataSource s INSERT, UPDATE y eliminar las fichas se establecen en (None) ([haga clic aquí para ver imagen en tamaño completo](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="a5152-185">**Figure 6**: Confirm that the Drop-Down Lists in the ObjectDataSource s INSERT, UPDATE, and DELETE Tabs are Set to (None) ([Click to view full-size image](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image14.png))</span></span>


<span data-ttu-id="a5152-186">Después de configurar el origen ObjectDataSource, haga clic en Finalizar, devolver al diseñador.</span><span class="sxs-lookup"><span data-stu-id="a5152-186">After configuring the ObjectDataSource, click Finish, returning to the Designer.</span></span> <span data-ttu-id="a5152-187">Como se ve visto en ejemplos anteriores, cuando se completa automáticamente la configuración del origen ObjectDataSource, Visual Studio crea un `ItemTemplate` DropDownList, mostrando cada uno de los campos de datos.</span><span class="sxs-lookup"><span data-stu-id="a5152-187">As we ve seen in past examples, when completing the ObjectDataSource configuration, Visual Studio automatically creates an `ItemTemplate` for the DropDownList, displaying each of the data fields.</span></span> <span data-ttu-id="a5152-188">Reemplácelo `ItemTemplate` por uno que muestra el nombre de producto s y el precio.</span><span class="sxs-lookup"><span data-stu-id="a5152-188">Replace this `ItemTemplate` with one that displays only the product s name and price.</span></span> <span data-ttu-id="a5152-189">Además, establezca el `RepeatColumns` propiedad en 2.</span><span class="sxs-lookup"><span data-stu-id="a5152-189">Also, set the `RepeatColumns` property to 2.</span></span>

> [!NOTE]
> <span data-ttu-id="a5152-190">Como se describe en el *información general de insertar, actualizar y eliminar datos* tutorial, al modificar los datos a través de ObjectDataSource nuestra arquitectura requiere que se quite el `OldValuesParameterFormatString` propiedad de ObjectDataSource s marcado declarativo (o lo restablece a su valor predeterminado, `{0}`).</span><span class="sxs-lookup"><span data-stu-id="a5152-190">As discussed in the *Overview of Inserting, Updating, and Deleting Data* tutorial, when modifying data using the ObjectDataSource our architecture requires that we remove the `OldValuesParameterFormatString` property from the ObjectDataSource s declarative markup (or reset it to its default value, `{0}`).</span></span> <span data-ttu-id="a5152-191">Sin embargo, en este tutorial, estamos usando el origen ObjectDataSource sólo para recuperar datos.</span><span class="sxs-lookup"><span data-stu-id="a5152-191">In this tutorial, however, we are using the ObjectDataSource only for retrieving data.</span></span> <span data-ttu-id="a5152-192">Por lo tanto, no necesitamos modificar la s ObjectDataSource `OldValuesParameterFormatString` valor de propiedad (aunque lo t es malo para hacerlo).</span><span class="sxs-lookup"><span data-stu-id="a5152-192">Therefore, we do not need to modify the ObjectDataSource s `OldValuesParameterFormatString` property value (although it doesn t hurt to do so).</span></span>


<span data-ttu-id="a5152-193">Después de reemplazar el valor predeterminado de DataList `ItemTemplate` con una personalizada, el marcado declarativo en la página debería ser similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="a5152-193">After replacing the default DataList `ItemTemplate` with a customized one, the declarative markup on your page should look similar to the following:</span></span>


[!code-aspx[Main](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/samples/sample2.aspx)]

<span data-ttu-id="a5152-194">Dedique un momento para ver nuestro progreso a través de un explorador.</span><span class="sxs-lookup"><span data-stu-id="a5152-194">Take a moment to view our progress through a browser.</span></span> <span data-ttu-id="a5152-195">Como se muestra en la figura 7, el control DataList muestra el precio del producto, nombre y la unidad para cada producto de dos columnas.</span><span class="sxs-lookup"><span data-stu-id="a5152-195">As Figure 7 shows, the DataList displays the product name and unit price for each product in two columns.</span></span>


<span data-ttu-id="a5152-196">[![Los nombres de productos y los precios se muestran en un control DataList de dos columnas](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image16.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="a5152-196">[![The Products Names and Prices are Displayed in a Two-Column DataList](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image16.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image15.png)</span></span>

<span data-ttu-id="a5152-197">**Figura 7**: Los nombres de productos y los precios se muestran en un control DataList de dos columnas ([haga clic aquí para ver imagen en tamaño completo](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image17.png))</span><span class="sxs-lookup"><span data-stu-id="a5152-197">**Figure 7**: The Products Names and Prices are Displayed in a Two-Column DataList ([Click to view full-size image](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image17.png))</span></span>


> [!NOTE]
> <span data-ttu-id="a5152-198">El control DataList tiene un número de propiedades que son necesarias para el proceso de actualización y eliminación, y estos valores se almacenan en estado de vista.</span><span class="sxs-lookup"><span data-stu-id="a5152-198">The DataList has a number of properties that are required for the updating and deleting process, and these values are stored in view state.</span></span> <span data-ttu-id="a5152-199">Por lo tanto, cuando es compatible con la creación de un control DataList que editen o eliminen datos, es esencial que el estado de vista de DataList s esté habilitada.</span><span class="sxs-lookup"><span data-stu-id="a5152-199">Therefore, when building a DataList that supports editing or deleting data, it is essential that the DataList s view state be enabled.</span></span>  
>   
>  <span data-ttu-id="a5152-200">El lector astuto puede recordar que pudimos deshabilitar el estado de vista al crear GridView editable, DetailsViews y FormViews.</span><span class="sxs-lookup"><span data-stu-id="a5152-200">The astute reader may recall that we were able to disable view state when creating editable GridViews, DetailsViews, and FormViews.</span></span> <span data-ttu-id="a5152-201">Esto es porque los controles Web de ASP.NET 2.0 pueden incluir *controlar el estado de*, que se conserva el estado entre las devoluciones de datos, como el estado de vista, pero lo considere esenciales.</span><span class="sxs-lookup"><span data-stu-id="a5152-201">This is because ASP.NET 2.0 Web controls can include *control state*, which is state persisted across postbacks like view state, but deemed essential.</span></span>


<span data-ttu-id="a5152-202">Deshabilitar la vista de estado en el control GridView simplemente omite la información de estado trivial, pero mantiene el estado de control (que incluye el estado necesario para modificar y eliminar).</span><span class="sxs-lookup"><span data-stu-id="a5152-202">Disabling view state in the GridView merely omits trivial state information, but maintains the control state (which includes the state necessary for editing and deleting).</span></span> <span data-ttu-id="a5152-203">El control DataList, si se hubiera creado en el marco ASP.NET 1.x, no utiliza el estado de control y, por tanto, debe tener habilitado el estado de vista.</span><span class="sxs-lookup"><span data-stu-id="a5152-203">The DataList, having been created in the ASP.NET 1.x timeframe, does not utilize control state and therefore must have view state enabled.</span></span> <span data-ttu-id="a5152-204">Consulte [estado del Control. Estado de vista](https://msdn.microsoft.com/library/1whwt1k7.aspx) para obtener más información sobre el propósito del estado de control y cómo se diferencia del estado de vista.</span><span class="sxs-lookup"><span data-stu-id="a5152-204">See [Control State vs. View State](https://msdn.microsoft.com/library/1whwt1k7.aspx) for more information on the purpose of control state and how it differs from view state.</span></span>

## <a name="step-4-adding-an-editing-user-interface"></a><span data-ttu-id="a5152-205">Paso 4: Agregar una interfaz de usuario de edición</span><span class="sxs-lookup"><span data-stu-id="a5152-205">Step 4: Adding an Editing User Interface</span></span>

<span data-ttu-id="a5152-206">El control GridView se compone de una colección de campos (BoundFields, CheckBoxFields, TemplateFields y así sucesivamente).</span><span class="sxs-lookup"><span data-stu-id="a5152-206">The GridView control is composed of a collection of fields (BoundFields, CheckBoxFields, TemplateFields, and so on).</span></span> <span data-ttu-id="a5152-207">Estos campos pueden ajustar su marcado representado según su modo.</span><span class="sxs-lookup"><span data-stu-id="a5152-207">These fields can adjust their rendered markup depending on their mode.</span></span> <span data-ttu-id="a5152-208">Por ejemplo, cuando está en modo de solo lectura, BoundField muestra su valor de campo de datos como texto; Cuando está en modo de edición, representa un cuadro de texto de Web control cuya `Text` propiedad se asigna el valor del campo de datos.</span><span class="sxs-lookup"><span data-stu-id="a5152-208">For example, when in read-only mode, a BoundField displays its data field value as text; when in edit mode, it renders a TextBox Web control whose `Text` property is assigned the data field value.</span></span>

<span data-ttu-id="a5152-209">El control DataList, por otro lado, representa sus elementos mediante plantillas.</span><span class="sxs-lookup"><span data-stu-id="a5152-209">The DataList, on the other hand, renders its items using templates.</span></span> <span data-ttu-id="a5152-210">Elementos de solo lectura se representan mediante el `ItemTemplate` , mientras que los elementos en modo de edición se representan mediante el `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="a5152-210">Read-only items are rendered using the `ItemTemplate` whereas items in edit mode are rendered via the `EditItemTemplate`.</span></span> <span data-ttu-id="a5152-211">En este momento, nuestra DataList tiene sólo un `ItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="a5152-211">At this point, our DataList has only an `ItemTemplate`.</span></span> <span data-ttu-id="a5152-212">Para admitir la funcionalidad de edición de nivel de elemento que necesitamos agregar un `EditItemTemplate` que contiene el marcado que se mostrará para el elemento editable.</span><span class="sxs-lookup"><span data-stu-id="a5152-212">To support item-level editing functionality we need to add an `EditItemTemplate` that contains the markup to be displayed for the editable item.</span></span> <span data-ttu-id="a5152-213">Para este tutorial, vamos a usar los controles Web de cuadro de texto para editar el precio del producto s, nombre y la unidad.</span><span class="sxs-lookup"><span data-stu-id="a5152-213">For this tutorial, we'll use TextBox Web controls for editing the product s name and unit price.</span></span>

<span data-ttu-id="a5152-214">El `EditItemTemplate` se pueden crear mediante declaración o a través del diseñador (seleccionando la opción Editar plantillas de la etiqueta inteligente de DataList s).</span><span class="sxs-lookup"><span data-stu-id="a5152-214">The `EditItemTemplate` can be created either declaratively or through the Designer (by selecting the Edit Templates option from the DataList s smart tag).</span></span> <span data-ttu-id="a5152-215">Para usar la opción de editar plantillas, primero haga clic en el vínculo Editar plantillas en la etiqueta inteligente y, a continuación, seleccione el `EditItemTemplate` elemento de la lista desplegable.</span><span class="sxs-lookup"><span data-stu-id="a5152-215">To use the Edit Templates option, first click the Edit Templates link in the smart tag and then select the `EditItemTemplate` item from the drop-down list.</span></span>


<span data-ttu-id="a5152-216">[![Trabajo con DataList s EditItemTemplate participar](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image19.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image18.png)</span><span class="sxs-lookup"><span data-stu-id="a5152-216">[![Opt to Work with the DataList s EditItemTemplate](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image19.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image18.png)</span></span>

<span data-ttu-id="a5152-217">**Figura 8**: Participar para trabajar con el control DataList s `EditItemTemplate` ([haga clic aquí para ver imagen en tamaño completo](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="a5152-217">**Figure 8**: Opt to Work with the DataList s `EditItemTemplate` ([Click to view full-size image](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image20.png))</span></span>


<span data-ttu-id="a5152-218">A continuación, escriba el nombre de producto: y precio: y, a continuación, arrastre dos controles TextBox en el cuadro de herramientas en el `EditItemTemplate` interfaz en el diseñador.</span><span class="sxs-lookup"><span data-stu-id="a5152-218">Next, type in Product name: and Price: and then drag two TextBox controls from the Toolbox into the `EditItemTemplate` interface on the Designer.</span></span> <span data-ttu-id="a5152-219">Establecer los cuadros de texto `ID` propiedades a `ProductName` y `UnitPrice`.</span><span class="sxs-lookup"><span data-stu-id="a5152-219">Set the TextBoxes `ID` properties to `ProductName` and `UnitPrice`.</span></span>


<span data-ttu-id="a5152-220">[![Agregar un cuadro de texto para el nombre del producto y el precio](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image22.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="a5152-220">[![Add a TextBox for the Product s Name and Price](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image22.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image21.png)</span></span>

<span data-ttu-id="a5152-221">**Figura 9**: Agregue un cuadro de texto para el nombre de producto y el precio ([haga clic aquí para ver imagen en tamaño completo](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image23.png))</span><span class="sxs-lookup"><span data-stu-id="a5152-221">**Figure 9**: Add a TextBox for the Product s Name and Price ([Click to view full-size image](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image23.png))</span></span>


<span data-ttu-id="a5152-222">Es necesario enlazar los valores de campo de datos de producto correspondiente a la `Text` las propiedades de los dos cuadros de texto.</span><span class="sxs-lookup"><span data-stu-id="a5152-222">We need to bind the corresponding product data field values to the `Text` properties of the two TextBoxes.</span></span> <span data-ttu-id="a5152-223">En las etiquetas inteligentes de cuadros de texto, haga clic en el vínculo Editar DataBindings y, a continuación, asocie el campo de datos adecuado con la `Text` propiedad, como se muestra en la figura 10.</span><span class="sxs-lookup"><span data-stu-id="a5152-223">From the TextBoxes smart tags, click on the Edit DataBindings link and then associate the appropriate data field with the `Text` property, as shown in Figure 10.</span></span>

> [!NOTE]
> <span data-ttu-id="a5152-224">Al enlazar la `UnitPrice` campo de datos para el precio de cuadro de texto s `Text` campo, puede formatearlo según un valor de divisa (`{0:C}`), un número general (`{0:N}`), o dejarla sin formato.</span><span class="sxs-lookup"><span data-stu-id="a5152-224">When binding the `UnitPrice` data field to the price TextBox s `Text` field, you may format it as a currency value (`{0:C}`), a general number (`{0:N}`), or leave it unformatted.</span></span>


![Enlazar los campos de datos de UnitPrice y ProductName a las propiedades de texto de los cuadros de texto](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image24.png)

<span data-ttu-id="a5152-226">**Figura 10**: Enlazar el `ProductName` y `UnitPrice` campos de datos a la `Text` las propiedades de los cuadros de texto</span><span class="sxs-lookup"><span data-stu-id="a5152-226">**Figure 10**: Bind the `ProductName` and `UnitPrice` Data Fields to the `Text` Properties of the TextBoxes</span></span>


<span data-ttu-id="a5152-227">Tenga en cuenta cómo se realiza el cuadro de diálogo Editar DataBindings en la figura 10 *no* incluyen la casilla de verificación de enlace de datos bidireccional está presente cuando se edita un TemplateField en el control GridView o DetailsView o una plantilla de FormView.</span><span class="sxs-lookup"><span data-stu-id="a5152-227">Notice how the Edit DataBindings dialog box in Figure 10 does *not* include the Two-way databinding checkbox that is present when editing a TemplateField in the GridView or DetailsView, or a template in the FormView.</span></span> <span data-ttu-id="a5152-228">La característica de enlace de datos bidireccional permite el valor especificado en el control Web de entrada que se asignará automáticamente a la s ObjectDataSource correspondiente `InsertParameters` o `UpdateParameters` al insertar o actualizar datos.</span><span class="sxs-lookup"><span data-stu-id="a5152-228">The two-way databinding feature allowed the value entered into the input Web control to be automatically assigned to the corresponding ObjectDataSource s `InsertParameters` or `UpdateParameters` when inserting or updating data.</span></span> <span data-ttu-id="a5152-229">El control DataList no admite el enlace bidireccional como veremos más adelante en este tutorial, después el usuario realiza su cambia y está listo para actualizar los datos, es necesario obtener acceso mediante programación a estos cuadros de texto `Text` propiedades y los valores que se pase el adecuado `UpdateProduct` método en el `ProductsBLL` clase.</span><span class="sxs-lookup"><span data-stu-id="a5152-229">The DataList does not support two-way databinding as we'll see later on in this tutorial, after the user makes her changes and is ready to update the data, we will need to programmatically access these TextBoxes `Text` properties and pass in their values to the appropriate `UpdateProduct` method in the `ProductsBLL` class.</span></span>

<span data-ttu-id="a5152-230">Por último, tenemos que agregar la actualización de botones y cancelar el `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="a5152-230">Finally, we need to add Update and Cancel buttons to the `EditItemTemplate`.</span></span> <span data-ttu-id="a5152-231">Como hemos visto en el [maestro/detalle con una lista con viñetas de registros maestros con un control DataList de detalles](../filtering-scenarios-with-the-datalist-and-repeater/master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs.md) tutorial, cuando un botón, LinkButton o ImageButton cuyo `CommandName` se establece la propiedad se hace clic en desde dentro de un control Repeater o DataList, el S Repeater o DataList `ItemCommand` provoca el evento.</span><span class="sxs-lookup"><span data-stu-id="a5152-231">As we saw in the [Master/Detail Using a Bulleted List of Master Records with a Details DataList](../filtering-scenarios-with-the-datalist-and-repeater/master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs.md) tutorial, when a Button, LinkButton, or ImageButton whose `CommandName` property is set is clicked from within a Repeater or DataList, the Repeater or DataList s `ItemCommand` event is raised.</span></span> <span data-ttu-id="a5152-232">Para el control DataList, si la `CommandName` propiedad está establecida en un determinado valor, es posible que se genera un evento adicional también.</span><span class="sxs-lookup"><span data-stu-id="a5152-232">For the DataList, if the `CommandName` property is set to a certain value, an additional event may be raised as well.</span></span> <span data-ttu-id="a5152-233">Especial `CommandName` valores de propiedad incluyen, entre otros:</span><span class="sxs-lookup"><span data-stu-id="a5152-233">The special `CommandName` property values include, among others:</span></span>

- <span data-ttu-id="a5152-234">Cancelar genera el `CancelCommand` eventos</span><span class="sxs-lookup"><span data-stu-id="a5152-234">Cancel raises the `CancelCommand` event</span></span>
- <span data-ttu-id="a5152-235">Editar genera el `EditCommand` eventos</span><span class="sxs-lookup"><span data-stu-id="a5152-235">Edit raises the `EditCommand` event</span></span>
- <span data-ttu-id="a5152-236">Actualizar genera el `UpdateCommand` eventos</span><span class="sxs-lookup"><span data-stu-id="a5152-236">Update raises the `UpdateCommand` event</span></span>

<span data-ttu-id="a5152-237">Tenga en cuenta que estos eventos se generan *además* el `ItemCommand` eventos.</span><span class="sxs-lookup"><span data-stu-id="a5152-237">Keep in mind that these events are raised *in addition to* the `ItemCommand` event.</span></span>

<span data-ttu-id="a5152-238">Agregar a la `EditItemTemplate` dos controles de botón Web, uno cuyo `CommandName` se establece en la actualización y a los otros elementos establecido en Cancelar.</span><span class="sxs-lookup"><span data-stu-id="a5152-238">Add to the `EditItemTemplate` two Button Web controls, one whose `CommandName` is set to Update and the other s set to Cancel.</span></span> <span data-ttu-id="a5152-239">Después de agregar estos dos controles de botón Web, el diseñador debe ser similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="a5152-239">After adding these two Button Web controls the Designer should look similar to the following:</span></span>


<span data-ttu-id="a5152-240">[![Agregar actualización de los botones para EditItemTemplate y cancelar](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image26.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="a5152-240">[![Add Update and Cancel Buttons to the EditItemTemplate](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image26.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image25.png)</span></span>

<span data-ttu-id="a5152-241">**Figura 11**: Agregar actualizaciones y los botones Cancelar a la `EditItemTemplate` ([haga clic aquí para ver imagen en tamaño completo](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="a5152-241">**Figure 11**: Add Update and Cancel Buttons to the `EditItemTemplate` ([Click to view full-size image](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image27.png))</span></span>


<span data-ttu-id="a5152-242">Con el `EditItemTemplate` completa el marcado declarativo DataList s debe ser similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="a5152-242">With the `EditItemTemplate` complete your DataList s declarative markup should look similar to the following:</span></span>


[!code-aspx[Main](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/samples/sample3.aspx)]

## <a name="step-5-adding-the-plumbing-to-enter-edit-mode"></a><span data-ttu-id="a5152-243">Paso 5: Adición de la mecánica para entrar en modo de edición</span><span class="sxs-lookup"><span data-stu-id="a5152-243">Step 5: Adding the Plumbing to Enter Edit Mode</span></span>

<span data-ttu-id="a5152-244">En este momento nuestro DataList tiene una interfaz de edición definida a través de su `EditItemTemplate`; sin embargo, hay s actualmente ninguna manera para un usuario que visita nuestra página para indicar que desea editar la información de un producto s.</span><span class="sxs-lookup"><span data-stu-id="a5152-244">At this point our DataList has an editing interface defined via its `EditItemTemplate`; however, there s currently no way for a user visiting our page to indicate that he wants to edit a product s information.</span></span> <span data-ttu-id="a5152-245">Necesitamos agregar un botón Editar para cada producto que, al hacer clic, presenta esa DataList de elemento en modo de edición.</span><span class="sxs-lookup"><span data-stu-id="a5152-245">We need to add an Edit button to each product that, when clicked, renders that DataList item in edit mode.</span></span> <span data-ttu-id="a5152-246">Empiece agregando un botón de edición para el `ItemTemplate`, ya sea a través del diseñador o mediante declaración.</span><span class="sxs-lookup"><span data-stu-id="a5152-246">Start by adding an Edit button to the `ItemTemplate`, either through the Designer or declaratively.</span></span> <span data-ttu-id="a5152-247">Asegúrese de establecer el botón Editar s `CommandName` propiedad a editar.</span><span class="sxs-lookup"><span data-stu-id="a5152-247">Be certain to set the Edit button s `CommandName` property to Edit .</span></span>

<span data-ttu-id="a5152-248">Después de haber agregado este botón de edición, dedique un momento para ver la página mediante un explorador.</span><span class="sxs-lookup"><span data-stu-id="a5152-248">After you have added this Edit button, take a moment to view the page through a browser.</span></span> <span data-ttu-id="a5152-249">Con esta adición, cada descripción de producto debe incluir un botón de edición.</span><span class="sxs-lookup"><span data-stu-id="a5152-249">With this addition, each product listing should include an Edit button.</span></span>


<span data-ttu-id="a5152-250">[![Agregar actualización de los botones para EditItemTemplate y cancelar](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image29.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="a5152-250">[![Add Update and Cancel Buttons to the EditItemTemplate](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image29.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image28.png)</span></span>

<span data-ttu-id="a5152-251">**Figura 12**: Agregar actualizaciones y los botones Cancelar a la `EditItemTemplate` ([haga clic aquí para ver imagen en tamaño completo](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="a5152-251">**Figure 12**: Add Update and Cancel Buttons to the `EditItemTemplate` ([Click to view full-size image](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image30.png))</span></span>


<span data-ttu-id="a5152-252">Al hacer clic en el botón produce un postback, pero *no* ponga el producto listado en modo de edición.</span><span class="sxs-lookup"><span data-stu-id="a5152-252">Clicking the button causes a postback, but does *not* bring the product listing into edit mode.</span></span> <span data-ttu-id="a5152-253">Para que pueda modificar el producto, es necesario:</span><span class="sxs-lookup"><span data-stu-id="a5152-253">To make the product editable, we need to:</span></span>

1. <span data-ttu-id="a5152-254">Establecer el control DataList s [ `EditItemIndex` propiedad](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.edititemindex.aspx) al índice de la `DataListItem` cuyo botón Editar simplemente se hizo clic.</span><span class="sxs-lookup"><span data-stu-id="a5152-254">Set the DataList s [`EditItemIndex` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.edititemindex.aspx) to the index of the `DataListItem` whose Edit button was just clicked.</span></span>
2. <span data-ttu-id="a5152-255">Volver a enlazar los datos para el control DataList.</span><span class="sxs-lookup"><span data-stu-id="a5152-255">Rebind the data to the DataList.</span></span> <span data-ttu-id="a5152-256">Cuando se vuelven a representar el control DataList el `DataListItem` cuyo `ItemIndex` se corresponde con el control DataList s `EditItemIndex` se representarán mediante su `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="a5152-256">When the DataList is re-rendered, the `DataListItem` whose `ItemIndex` corresponds with the DataList s `EditItemIndex` will render using its `EditItemTemplate`.</span></span>

<span data-ttu-id="a5152-257">Desde el control DataList s `EditCommand` evento se desencadena cuando se hace clic en el botón Editar, crear un `EditCommand` controlador de eventos con el código siguiente:</span><span class="sxs-lookup"><span data-stu-id="a5152-257">Since the DataList s `EditCommand` event is fired when the Edit button is clicked, create an `EditCommand` event handler with the following code:</span></span>


[!code-vb[Main](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/samples/sample4.vb)]

<span data-ttu-id="a5152-258">El `EditCommand` controlador de eventos se pasa un objeto de tipo `DataListCommandEventArgs` como su segundo parámetro de entrada, que incluye una referencia a la `DataListItem` cuyo botón Edición se hizo clic (`e.Item`).</span><span class="sxs-lookup"><span data-stu-id="a5152-258">The `EditCommand` event handler is passed in an object of type `DataListCommandEventArgs` as its second input parameter, which includes a reference to the `DataListItem` whose Edit button was clicked (`e.Item`).</span></span> <span data-ttu-id="a5152-259">El controlador de eventos establece primero el control DataList s `EditItemIndex` a la `ItemIndex` del editable `DataListItem` y, a continuación, vuelve a enlazar los datos para el control DataList mediante una llamada a DataList s `DataBind()` método.</span><span class="sxs-lookup"><span data-stu-id="a5152-259">The event handler first sets the DataList s `EditItemIndex` to the `ItemIndex` of the editable `DataListItem` and then rebinds the data to the DataList by calling the DataList s `DataBind()` method.</span></span>

<span data-ttu-id="a5152-260">Después de agregar este controlador de eventos, volver a visitar la página en un explorador.</span><span class="sxs-lookup"><span data-stu-id="a5152-260">After adding this event handler, revisit the page in a browser.</span></span> <span data-ttu-id="a5152-261">Haga clic en el botón Editar ahora hace que el producto hace clic en él editable (consulte la figura 13).</span><span class="sxs-lookup"><span data-stu-id="a5152-261">Clicking the Edit button now makes the clicked product editable (see Figure 13).</span></span>


<span data-ttu-id="a5152-262">[![Al hacer clic en la edición botón facilita el producto Editable](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image32.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="a5152-262">[![Clicking the Edit Button Makes the Product Editable](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image32.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image31.png)</span></span>

<span data-ttu-id="a5152-263">**Figura 13**: Al hacer clic en el botón Editar hace que el producto Editable ([haga clic aquí para ver imagen en tamaño completo](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="a5152-263">**Figure 13**: Clicking the Edit Button Makes the Product Editable ([Click to view full-size image](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image33.png))</span></span>


## <a name="step-6-saving-the-user-s-changes"></a><span data-ttu-id="a5152-264">Paso 6: Guardar los cambios de usuario s</span><span class="sxs-lookup"><span data-stu-id="a5152-264">Step 6: Saving the User s Changes</span></span>

<span data-ttu-id="a5152-265">Al hacer clic en los botones de cancelación o actualización del producto editado s no hace nada en este momento; Para agregar esta funcionalidad es necesario crear controladores de eventos para el control DataList s `UpdateCommand` y `CancelCommand` eventos.</span><span class="sxs-lookup"><span data-stu-id="a5152-265">Clicking the edited product s Update or Cancel buttons does nothing at this point; to add this functionality we need to create event handlers for the DataList s `UpdateCommand` and `CancelCommand` events.</span></span> <span data-ttu-id="a5152-266">Comience creando el `CancelCommand` controlador de eventos, que se ejecutará cuando se hace clic en el botón Cancelar de producto modificada s y encargan devolviendo el control DataList a su estado de edición previamente.</span><span class="sxs-lookup"><span data-stu-id="a5152-266">Start by creating the `CancelCommand` event handler, which will execute when the edited product s Cancel button is clicked and it tasked with returning the DataList to its pre-editing state.</span></span>

<span data-ttu-id="a5152-267">Para que el control DataList represente todos sus elementos en el modo de solo lectura, es necesario:</span><span class="sxs-lookup"><span data-stu-id="a5152-267">To have the DataList render all of its items in the read-only mode, we need to:</span></span>

1. <span data-ttu-id="a5152-268">Establecer el control DataList s [ `EditItemIndex` propiedad](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.edititemindex.aspx) al índice de un inexistente `DataListItem` índice.</span><span class="sxs-lookup"><span data-stu-id="a5152-268">Set the DataList s [`EditItemIndex` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.edititemindex.aspx) to the index of a non-existent `DataListItem` index.</span></span> <span data-ttu-id="a5152-269">`-1` es una opción segura, ya que el `DataListItem` índices a partir de `0`.</span><span class="sxs-lookup"><span data-stu-id="a5152-269">`-1` is a safe choice, since the `DataListItem` indexes start at `0`.</span></span>
2. <span data-ttu-id="a5152-270">Volver a enlazar los datos para el control DataList.</span><span class="sxs-lookup"><span data-stu-id="a5152-270">Rebind the data to the DataList.</span></span> <span data-ttu-id="a5152-271">Desde la n `DataListItem` `ItemIndex` es que se corresponden con el control DataList s `EditItemIndex`, se representará el control DataList todo en un modo de solo lectura.</span><span class="sxs-lookup"><span data-stu-id="a5152-271">Since no `DataListItem` `ItemIndex` es correspond to the DataList s `EditItemIndex`, the entire DataList will be rendered in a read-only mode.</span></span>

<span data-ttu-id="a5152-272">Estos pasos pueden realizarse con el siguiente código de controlador de eventos:</span><span class="sxs-lookup"><span data-stu-id="a5152-272">These steps can be accomplished with the following event handler code:</span></span>


[!code-vb[Main](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/samples/sample5.vb)]

<span data-ttu-id="a5152-273">Con esta versión, al hacer clic en el botón Cancelar, devuelve el control DataList a su estado de edición previamente.</span><span class="sxs-lookup"><span data-stu-id="a5152-273">With this addition, clicking the Cancel button returns the DataList to its pre-editing state.</span></span>

<span data-ttu-id="a5152-274">Es el último controlador de eventos es necesario para completar la `UpdateCommand` controlador de eventos.</span><span class="sxs-lookup"><span data-stu-id="a5152-274">The last event handler we need to complete is the `UpdateCommand` event handler.</span></span> <span data-ttu-id="a5152-275">Este controlador de eventos debe:</span><span class="sxs-lookup"><span data-stu-id="a5152-275">This event handler needs to:</span></span>

1. <span data-ttu-id="a5152-276">Obtener acceso mediante programación el nombre de producto escrito por el usuario y precios, así como el producto editado s `ProductID`.</span><span class="sxs-lookup"><span data-stu-id="a5152-276">Programmatically access the user-entered product name and price as well as the edited product s `ProductID`.</span></span>
2. <span data-ttu-id="a5152-277">Iniciar el proceso de actualización mediante una llamada a la correspondiente `UpdateProduct` sobrecarga en el `ProductsBLL` clase.</span><span class="sxs-lookup"><span data-stu-id="a5152-277">Initiate the update process by calling the appropriate `UpdateProduct` overload in the `ProductsBLL` class.</span></span>
3. <span data-ttu-id="a5152-278">Establecer el control DataList s [ `EditItemIndex` propiedad](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.edititemindex.aspx) al índice de un inexistente `DataListItem` índice.</span><span class="sxs-lookup"><span data-stu-id="a5152-278">Set the DataList s [`EditItemIndex` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.edititemindex.aspx) to the index of a non-existent `DataListItem` index.</span></span> <span data-ttu-id="a5152-279">`-1` es una opción segura, ya que el `DataListItem` índices a partir de `0`.</span><span class="sxs-lookup"><span data-stu-id="a5152-279">`-1` is a safe choice, since the `DataListItem` indexes start at `0`.</span></span>
4. <span data-ttu-id="a5152-280">Volver a enlazar los datos para el control DataList.</span><span class="sxs-lookup"><span data-stu-id="a5152-280">Rebind the data to the DataList.</span></span> <span data-ttu-id="a5152-281">Desde la n `DataListItem` `ItemIndex` es que se corresponden con el control DataList s `EditItemIndex`, se representará el control DataList todo en un modo de solo lectura.</span><span class="sxs-lookup"><span data-stu-id="a5152-281">Since no `DataListItem` `ItemIndex` es correspond to the DataList s `EditItemIndex`, the entire DataList will be rendered in a read-only mode.</span></span>

<span data-ttu-id="a5152-282">Los pasos 1 y 2 son responsables de guardar los cambios s; el usuario los pasos 3 y 4 devuelven el control DataList a su estado previo edición después de que los cambios se guardaron y son idénticos a los pasos realizados en el `CancelCommand` controlador de eventos.</span><span class="sxs-lookup"><span data-stu-id="a5152-282">Steps 1 and 2 are responsible for saving the user s changes; steps 3 and 4 return the DataList to its pre-editing state after the changes have been saved and are identical to the steps performed in the `CancelCommand` event handler.</span></span>

<span data-ttu-id="a5152-283">Para obtener el nombre de producto actualizado y el precio, debemos usar la `FindControl` método mediante programación la referencia Web cuadro de texto se controla dentro de la `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="a5152-283">To get the updated product name and price, we need to use the `FindControl` method to programmatically reference the TextBox Web controls within the `EditItemTemplate`.</span></span> <span data-ttu-id="a5152-284">También es necesario obtener el producto editado s `ProductID` valor.</span><span class="sxs-lookup"><span data-stu-id="a5152-284">We also need to get the edited product s `ProductID` value.</span></span> <span data-ttu-id="a5152-285">Cuando inicialmente se enlaza el origen ObjectDataSource para el control DataList, Visual Studio asigna el control DataList s `DataKeyField` propiedad en el valor de clave principal del origen de datos (`ProductID`).</span><span class="sxs-lookup"><span data-stu-id="a5152-285">When we initially bound the ObjectDataSource to the DataList, Visual Studio assigned the DataList s `DataKeyField` property to the primary key value from the data source (`ProductID`).</span></span> <span data-ttu-id="a5152-286">Este valor, a continuación, se puede recuperar desde el control DataList s `DataKeys` colección.</span><span class="sxs-lookup"><span data-stu-id="a5152-286">This value can then be retrieved from the DataList s `DataKeys` collection.</span></span> <span data-ttu-id="a5152-287">Dedique un momento para asegurarse de que el `DataKeyField` propiedad realmente está establecida en `ProductID`.</span><span class="sxs-lookup"><span data-stu-id="a5152-287">Take a moment to ensure that the `DataKeyField` property is indeed set to `ProductID`.</span></span>

<span data-ttu-id="a5152-288">El código siguiente implementa los cuatro pasos:</span><span class="sxs-lookup"><span data-stu-id="a5152-288">The following code implements the four steps:</span></span>


[!code-vb[Main](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/samples/sample6.vb)]

<span data-ttu-id="a5152-289">El controlador de eventos se inicia mediante la lectura en el producto editado s `ProductID` desde el `DataKeys` colección.</span><span class="sxs-lookup"><span data-stu-id="a5152-289">The event handler starts by reading in the edited product s `ProductID` from the `DataKeys` collection.</span></span> <span data-ttu-id="a5152-290">A continuación, los dos cuadros de texto en el `EditItemTemplate` se hace referencia y sus `Text` propiedades almacenadas en variables locales, `productNameValue` y `unitPriceValue`.</span><span class="sxs-lookup"><span data-stu-id="a5152-290">Next, the two TextBoxes in the `EditItemTemplate` are referenced and their `Text` properties stored in local variables, `productNameValue` and `unitPriceValue`.</span></span> <span data-ttu-id="a5152-291">Usamos el `Decimal.Parse()` método para leer el valor de la `UnitPrice` para ese if el valor especificado del cuadro de texto tiene un símbolo de moneda, todavía se convierten correctamente en un `Decimal` valor.</span><span class="sxs-lookup"><span data-stu-id="a5152-291">We use the `Decimal.Parse()` method to read the value from the `UnitPrice` TextBox so that if the value entered has a currency symbol, it can still be correctly converted into a `Decimal` value.</span></span>

> [!NOTE]
> <span data-ttu-id="a5152-292">Los valores de la `ProductName` y `UnitPrice` cuadros de texto solo se asignan a las variables productNameValue y unitPriceValue si las propiedades de texto de los cuadros de texto tienen un valor especificado.</span><span class="sxs-lookup"><span data-stu-id="a5152-292">The values from the `ProductName` and `UnitPrice` TextBoxes are only assigned to the productNameValue and unitPriceValue variables if the TextBoxes Text properties have a value specified.</span></span> <span data-ttu-id="a5152-293">En caso contrario, un valor de `Nothing` se usa para las variables, que tiene el efecto de actualizar los datos con una base de datos `NULL` valor.</span><span class="sxs-lookup"><span data-stu-id="a5152-293">Otherwise, a value of `Nothing` is used for the variables, which has the effect of updating the data with a database `NULL` value.</span></span> <span data-ttu-id="a5152-294">Es decir, nuestro código trata convierte las cadenas a la base de datos vacías `NULL` valores, que es el comportamiento predeterminado de la interfaz de edición en los controles GridView, DetailsView y FormView.</span><span class="sxs-lookup"><span data-stu-id="a5152-294">That is, our code treats converts empty strings to database `NULL` values, which is the default behavior of the editing interface in the GridView, DetailsView, and FormView controls.</span></span>


<span data-ttu-id="a5152-295">Después de leer los valores, el `ProductsBLL` clase s `UpdateProduct` se llama al método, pasando el nombre de producto s, precio, y `ProductID`.</span><span class="sxs-lookup"><span data-stu-id="a5152-295">After reading the values, the `ProductsBLL` class s `UpdateProduct` method is called, passing in the product s name, price, and `ProductID`.</span></span> <span data-ttu-id="a5152-296">El controlador de eventos finaliza al devolver el control DataList a su estado de edición previamente con la misma lógica exacta como en el `CancelCommand` controlador de eventos.</span><span class="sxs-lookup"><span data-stu-id="a5152-296">The event handler completes by returning the DataList to its pre-editing state using the exact same logic as in the `CancelCommand` event handler.</span></span>

<span data-ttu-id="a5152-297">Con el `EditCommand`, `CancelCommand`, y `UpdateCommand` completar los controladores de eventos, un visitante puede editar el nombre y el precio de un producto.</span><span class="sxs-lookup"><span data-stu-id="a5152-297">With the `EditCommand`, `CancelCommand`, and `UpdateCommand` event handlers complete, a visitor can edit the name and price of a product.</span></span> <span data-ttu-id="a5152-298">Las figuras 14-16 se muestra este flujo de trabajo de edición en acción.</span><span class="sxs-lookup"><span data-stu-id="a5152-298">Figures 14-16 show this editing workflow in action.</span></span>


<span data-ttu-id="a5152-299">[![Cuando son la primera visita la página, todos los productos en modo de solo lectura](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image35.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="a5152-299">[![When First Visiting the Page, All Products are in Read-Only Mode](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image35.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image34.png)</span></span>

<span data-ttu-id="a5152-300">**Figura 14**: En primer lugar, visite la página, todos los productos están en modo de solo lectura ([haga clic aquí para ver imagen en tamaño completo](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image36.png))</span><span class="sxs-lookup"><span data-stu-id="a5152-300">**Figure 14**: When First Visiting the Page, All Products are in Read-Only Mode ([Click to view full-size image](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image36.png))</span></span>


<span data-ttu-id="a5152-301">[![Para actualizar un producto s nombre o precio, haga clic en el botón Editar](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image38.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="a5152-301">[![To Update a Product s Name or Price, Click the Edit Button](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image38.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image37.png)</span></span>

<span data-ttu-id="a5152-302">**Figura 15**: Para actualizar un producto s nombre o precio, haga clic en el botón Editar ([haga clic aquí para ver imagen en tamaño completo](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image39.png))</span><span class="sxs-lookup"><span data-stu-id="a5152-302">**Figure 15**: To Update a Product s Name or Price, Click the Edit Button ([Click to view full-size image](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image39.png))</span></span>


<span data-ttu-id="a5152-303">[![Después de cambiar el valor, haga clic en Actualizar para volver al modo de solo lectura](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image41.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image40.png)</span><span class="sxs-lookup"><span data-stu-id="a5152-303">[![After Changing the Value, Click Update to Return to the Read-Only Mode](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image41.png)](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image40.png)</span></span>

<span data-ttu-id="a5152-304">**Figura 16**: Después de cambiar el valor, haga clic en Actualizar para volver al modo de solo lectura ([haga clic aquí para ver imagen en tamaño completo](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image42.png))</span><span class="sxs-lookup"><span data-stu-id="a5152-304">**Figure 16**: After Changing the Value, Click Update to Return to the Read-Only Mode ([Click to view full-size image](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/_static/image42.png))</span></span>


## <a name="step-7-adding-delete-capabilities"></a><span data-ttu-id="a5152-305">Paso 7: Agregar capacidades de eliminación</span><span class="sxs-lookup"><span data-stu-id="a5152-305">Step 7: Adding Delete Capabilities</span></span>

<span data-ttu-id="a5152-306">Los pasos para agregar capacidades de eliminación a un control DataList son similares a las de agregar capacidades de edición.</span><span class="sxs-lookup"><span data-stu-id="a5152-306">The steps for adding delete capabilities to a DataList are similar to those for adding editing capabilities.</span></span> <span data-ttu-id="a5152-307">En resumen, tenemos que agregar un botón Eliminar para el `ItemTemplate` que, al hacer clic en:</span><span class="sxs-lookup"><span data-stu-id="a5152-307">In short, we need to add a Delete button to the `ItemTemplate` that, when clicked:</span></span>

1. <span data-ttu-id="a5152-308">Lee en el producto correspondiente s `ProductID` a través de la `DataKeys` colección.</span><span class="sxs-lookup"><span data-stu-id="a5152-308">Reads in the corresponding product s `ProductID` via the `DataKeys` collection.</span></span>
2. <span data-ttu-id="a5152-309">Realiza la eliminación mediante una llamada a la `ProductsBLL` clase s `DeleteProduct` método.</span><span class="sxs-lookup"><span data-stu-id="a5152-309">Performs the delete by calling the `ProductsBLL` class s `DeleteProduct` method.</span></span>
3. <span data-ttu-id="a5152-310">Vuelve a enlazar los datos para el control DataList.</span><span class="sxs-lookup"><span data-stu-id="a5152-310">Rebinds the data to the DataList.</span></span>

<span data-ttu-id="a5152-311">Permiten s empiece agregando un botón de eliminación para el `ItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="a5152-311">Let s start by adding a Delete button to the `ItemTemplate`.</span></span>

<span data-ttu-id="a5152-312">Cuando hace clic en un botón cuyo `CommandName` es editar, actualizar, o cancelar provoca el control DataList s `ItemCommand` evento junto con un evento adicional (por ejemplo, cuando se usa la edición del `EditCommand` evento se desencadena también).</span><span class="sxs-lookup"><span data-stu-id="a5152-312">When clicked, a Button whose `CommandName` is Edit, Update, or Cancel raises the DataList s `ItemCommand` event along with an additional event (for example, when using Edit the `EditCommand` event is raised as well).</span></span> <span data-ttu-id="a5152-313">De forma similar, cualquier botón, LinkButton o ImageButton en el control DataList cuyo `CommandName` propiedad está establecida para eliminar las causas del `DeleteCommand` activación del evento (junto con `ItemCommand`).</span><span class="sxs-lookup"><span data-stu-id="a5152-313">Similarly, any Button, LinkButton, or ImageButton in the DataList whose `CommandName` property is set to Delete causes the `DeleteCommand` event to fire (along with `ItemCommand`).</span></span>

<span data-ttu-id="a5152-314">Agregar un botón Eliminar junto al botón de edición en el `ItemTemplate`, estableciendo su `CommandName` propiedad para su eliminación.</span><span class="sxs-lookup"><span data-stu-id="a5152-314">Add a Delete button next to the Edit button in the `ItemTemplate`, setting its `CommandName` property to Delete.</span></span> <span data-ttu-id="a5152-315">Después de agregar este botón control DataList s `ItemTemplate` debe ser la sintaxis declarativa similar:</span><span class="sxs-lookup"><span data-stu-id="a5152-315">After adding this Button control your DataList s `ItemTemplate` declarative syntax should look like:</span></span>


[!code-aspx[Main](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/samples/sample7.aspx)]

<span data-ttu-id="a5152-316">A continuación, cree un controlador de eventos para el control DataList s `DeleteCommand` evento, mediante el código siguiente:</span><span class="sxs-lookup"><span data-stu-id="a5152-316">Next, create an event handler for the DataList s `DeleteCommand` event, using the following code:</span></span>


[!code-vb[Main](an-overview-of-editing-and-deleting-data-in-the-datalist-vb/samples/sample8.vb)]

<span data-ttu-id="a5152-317">Al hacer clic en el botón Eliminar provoca una devolución de datos y se activa el control DataList s `DeleteCommand` eventos.</span><span class="sxs-lookup"><span data-stu-id="a5152-317">Clicking the Delete button causes a postback and fires the DataList s `DeleteCommand` event.</span></span> <span data-ttu-id="a5152-318">En el controlador de eventos, el producto hace clic en él s `ProductID` valor se obtiene acceso desde el `DataKeys` colección.</span><span class="sxs-lookup"><span data-stu-id="a5152-318">In the event handler, the clicked product s `ProductID` value is accessed from the `DataKeys` collection.</span></span> <span data-ttu-id="a5152-319">A continuación, se elimina el producto mediante una llamada a la `ProductsBLL` clase s `DeleteProduct` método.</span><span class="sxs-lookup"><span data-stu-id="a5152-319">Next, the product is deleted by calling the `ProductsBLL` class s `DeleteProduct` method.</span></span>

<span data-ttu-id="a5152-320">Después de eliminar el producto, lo importante que se vuelva a enlazar los datos para el control DataList (`DataList1.DataBind()`), en caso contrario, el control DataList seguirá mostrando el producto que solo se ha eliminado.</span><span class="sxs-lookup"><span data-stu-id="a5152-320">After deleting the product, it s important that we rebind the data to the DataList (`DataList1.DataBind()`), otherwise the DataList will continue to show the product that was just deleted.</span></span>

## <a name="summary"></a><span data-ttu-id="a5152-321">Resumen</span><span class="sxs-lookup"><span data-stu-id="a5152-321">Summary</span></span>

<span data-ttu-id="a5152-322">Aunque el control DataList no tiene el punto y haga clic en la edición y eliminación de soporte técnico que haya disfrutado de GridView, con un poco corto de código puede mejorarse para incluir estas características.</span><span class="sxs-lookup"><span data-stu-id="a5152-322">While the DataList lacks the point and click editing and deleting support enjoyed by the GridView, with a short bit of code it can be enhanced to include these features.</span></span> <span data-ttu-id="a5152-323">En este tutorial hemos visto cómo crear una lista de dos columnas de los productos que se puede eliminar y cuyo nombre y el precio pueden editarse.</span><span class="sxs-lookup"><span data-stu-id="a5152-323">In this tutorial we saw how to create a two-column listing of products that could be deleted and whose name and price could be edited.</span></span> <span data-ttu-id="a5152-324">Adición, edición y eliminación de soporte técnico es una cuestión de incluidos los controles Web adecuados en el `ItemTemplate` y `EditItemTemplate`, crear los controladores de eventos correspondiente, leer los valores de clave principales y escrito por el usuario e interactuar con la empresa Capa de lógica.</span><span class="sxs-lookup"><span data-stu-id="a5152-324">Adding editing and deleting support is a matter of including the appropriate Web controls in the `ItemTemplate` and `EditItemTemplate`, creating the corresponding event handlers, reading the user-entered and primary key values, and interfacing with the Business Logic Layer.</span></span>

<span data-ttu-id="a5152-325">Aunque hemos agregado la edición básica y eliminación de funcionalidades para el control DataList, carece de las características más avanzadas.</span><span class="sxs-lookup"><span data-stu-id="a5152-325">While we have added basic editing and deleting capabilities to the DataList, it lacks more advanced features.</span></span> <span data-ttu-id="a5152-326">Por ejemplo, no hay ninguna validación de campo de entrada - si un usuario escribe un precio de demasiadas costoso, una excepción se producirá por `Decimal.Parse` al intentar convertir demasiado costosas en un `Decimal`.</span><span class="sxs-lookup"><span data-stu-id="a5152-326">For example, there is no input field validation - if a user enters a price of Too expensive, an exception will be thrown by `Decimal.Parse` when attempting to convert Too expensive into a `Decimal`.</span></span> <span data-ttu-id="a5152-327">De forma similar, si hay un problema en la actualización de los datos en la lógica de negocios o los niveles de acceso a datos al usuario le mostrará la pantalla de error estándar.</span><span class="sxs-lookup"><span data-stu-id="a5152-327">Similarly, if there is a problem in updating the data at the Business Logic or Data Access Layers the user will be presented with the standard error screen.</span></span> <span data-ttu-id="a5152-328">Sin ningún tipo de confirmación en el botón Eliminar, la eliminación accidental de un producto es probable todo demasiado.</span><span class="sxs-lookup"><span data-stu-id="a5152-328">Without any sort of confirmation on the Delete button, accidentally deleting a product is all too likely.</span></span>

<span data-ttu-id="a5152-329">Experimentan de tutoriales, veremos cómo mejorar el usuario de edición en el futuro.</span><span class="sxs-lookup"><span data-stu-id="a5152-329">In future tutorials we'll see how to improve the editing user experience.</span></span>

<span data-ttu-id="a5152-330">Feliz programación.</span><span class="sxs-lookup"><span data-stu-id="a5152-330">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="a5152-331">Acerca del autor</span><span class="sxs-lookup"><span data-stu-id="a5152-331">About the Author</span></span>

<span data-ttu-id="a5152-332">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor de siete libros sobre ASP/ASP.NET y fundador de [4GuysFromRolla.com](http://www.4guysfromrolla.com), trabaja con tecnologías Web de Microsoft desde 1998.</span><span class="sxs-lookup"><span data-stu-id="a5152-332">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="a5152-333">Scott trabaja como consultor independiente, instructor y escritor.</span><span class="sxs-lookup"><span data-stu-id="a5152-333">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="a5152-334">Su último libro es [*SAM enseñar a usted mismo ASP.NET 2.0 en 24 horas*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="a5152-334">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="a5152-335">Puede ponerse en [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="a5152-335">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="a5152-336">o a través de su blog, que puede encontrarse en [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="a5152-336">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="a5152-337">Agradecimientos especiales a</span><span class="sxs-lookup"><span data-stu-id="a5152-337">Special Thanks To</span></span>

<span data-ttu-id="a5152-338">Esta serie de tutoriales ha sido revisada por muchos revisores útiles.</span><span class="sxs-lookup"><span data-stu-id="a5152-338">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="a5152-339">Los revisores para este tutorial fueron Zack Jones, Ken Pespisa y Randy Schmidt.</span><span class="sxs-lookup"><span data-stu-id="a5152-339">Lead reviewers for this tutorial were Zack Jones, Ken Pespisa, and Randy Schmidt.</span></span> <span data-ttu-id="a5152-340">¿Está interesado en leer mi próximos artículos de MSDN?</span><span class="sxs-lookup"><span data-stu-id="a5152-340">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="a5152-341">Si es así, envíeme una línea en [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="a5152-341">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="a5152-342">[Anterior](customizing-the-datalist-s-editing-interface-cs.md)
> [Siguiente](performing-batch-updates-vb.md)</span><span class="sxs-lookup"><span data-stu-id="a5152-342">[Previous](customizing-the-datalist-s-editing-interface-cs.md)
[Next](performing-batch-updates-vb.md)</span></span>
