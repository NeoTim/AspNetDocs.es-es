---
uid: web-forms/overview/deployment/advanced-enterprise-web-deployment/deploying-database-role-memberships-to-test-environments
title: Implementar pertenencias a roles de base de datos en entornos de prueba | Microsoft Docs
author: jrjlee
description: En este tema se describe cómo agregar cuentas de usuario a roles de base de datos como parte de la implementación de una solución en un entorno de prueba. Al implementar una solución que contiene...
ms.author: riande
ms.date: 05/04/2012
ms.assetid: 9b2af539-7ad9-47aa-b66e-873bd9906e79
msc.legacyurl: /web-forms/overview/deployment/advanced-enterprise-web-deployment/deploying-database-role-memberships-to-test-environments
msc.type: authoredcontent
ms.openlocfilehash: a15f5bf5f659d151e91ef9e53c5ad55bcd8e2b01
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 03/06/2020
ms.locfileid: "78474949"
---
# <a name="deploying-database-role-memberships-to-test-environments"></a><span data-ttu-id="1d282-104">Implementar las pertenencias a roles de base de datos en entornos de prueba</span><span class="sxs-lookup"><span data-stu-id="1d282-104">Deploying Database Role Memberships to Test Environments</span></span>

<span data-ttu-id="1d282-105">por [Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="1d282-105">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="1d282-106">Descargar PDF</span><span class="sxs-lookup"><span data-stu-id="1d282-106">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="1d282-107">En este tema se describe cómo agregar cuentas de usuario a roles de base de datos como parte de la implementación de una solución en un entorno de prueba.</span><span class="sxs-lookup"><span data-stu-id="1d282-107">This topic describes how to add user accounts to database roles as part of a solution deployment to a test environment.</span></span>
> 
> <span data-ttu-id="1d282-108">Cuando implementa una solución que contiene un proyecto de base de datos en un entorno de ensayo o de producción, normalmente no desea que el desarrollador automatice la adición de cuentas de usuario a roles de base de datos.</span><span class="sxs-lookup"><span data-stu-id="1d282-108">When you deploy a solution containing a database project to a staging or production environment, you typically don't want the developer to automate the addition of user accounts to database roles.</span></span> <span data-ttu-id="1d282-109">En la mayoría de los casos, el desarrollador no sabrá qué cuentas de usuario se deben agregar a los roles de base de datos, y estos requisitos podrían cambiar en cualquier momento.</span><span class="sxs-lookup"><span data-stu-id="1d282-109">In most cases, the developer won't know which user accounts need to be added to which database roles, and these requirements could change at any time.</span></span> <span data-ttu-id="1d282-110">Sin embargo, cuando se implementa una solución que contiene un proyecto de base de datos en un entorno de desarrollo o de prueba, la situación suele ser bastante diferente:</span><span class="sxs-lookup"><span data-stu-id="1d282-110">However, when you deploy a solution containing a database project to a development or test environment, the situation is usually rather different:</span></span>
> 
> - <span data-ttu-id="1d282-111">Normalmente, el desarrollador vuelve a implementar la solución de forma periódica, a menudo varias veces al día.</span><span class="sxs-lookup"><span data-stu-id="1d282-111">The developer typically re-deploys the solution on a regular basis, often several times a day.</span></span>
> - <span data-ttu-id="1d282-112">La base de datos se vuelve a crear normalmente en cada implementación, lo que significa que los usuarios de la base de datos deben crearse y agregarse a los roles después de cada implementación.</span><span class="sxs-lookup"><span data-stu-id="1d282-112">The database is typically re-created on every deployment, which means that database users must be created and added to roles after every deployment.</span></span>
> - <span data-ttu-id="1d282-113">Normalmente, el desarrollador tiene control total sobre el entorno de desarrollo o de prueba de destino.</span><span class="sxs-lookup"><span data-stu-id="1d282-113">The developer typically has full control over the target development or test environment.</span></span>
> 
> <span data-ttu-id="1d282-114">En este escenario, a menudo resulta útil crear automáticamente usuarios de base de datos y asignar pertenencias a roles de base de datos como parte del proceso de implementación.</span><span class="sxs-lookup"><span data-stu-id="1d282-114">In this scenario, it's often beneficial to automatically create database users and assign database role memberships as part of the deployment process.</span></span>
> 
> <span data-ttu-id="1d282-115">El factor clave es que esta operación debe ser condicional según el entorno de destino.</span><span class="sxs-lookup"><span data-stu-id="1d282-115">The key factor is that this operation needs to be conditional based on the target environment.</span></span> <span data-ttu-id="1d282-116">Si va a realizar la implementación en un entorno de ensayo o de producción, quiere omitir la operación.</span><span class="sxs-lookup"><span data-stu-id="1d282-116">If you're deploying to a staging or a production environment, you want to skip the operation.</span></span> <span data-ttu-id="1d282-117">Si va a implementar en un entorno de desarrollo o de prueba, querrá implementar la pertenencia a roles sin necesidad de más intervención.</span><span class="sxs-lookup"><span data-stu-id="1d282-117">If you're deploying to a developer or test environment, you want to deploy role memberships without further intervention.</span></span> <span data-ttu-id="1d282-118">En este tema se describe un enfoque que puede usar para abordar este desafío.</span><span class="sxs-lookup"><span data-stu-id="1d282-118">This topic describes one approach you can use to address this challenge.</span></span>

<span data-ttu-id="1d282-119">Este tema forma parte de una serie de tutoriales basados en los requisitos de implementación empresarial de una empresa ficticia denominada Fabrikam, Inc. En esta serie de tutoriales se&#x2014;usa una solución de ejemplo de la&#x2014; [solución Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)para representar una aplicación web con un nivel de complejidad realista, como una aplicación ASP.NET MVC 3, un servicio Windows Communication Foundation (WCF) y un proyecto de base de datos.</span><span class="sxs-lookup"><span data-stu-id="1d282-119">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager solution](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="1d282-120">El método de implementación que se encuentra en el corazón de estos tutoriales se basa en el enfoque de archivo de proyecto dividido que se describe en [Descripción del archivo de proyecto](../web-deployment-in-the-enterprise/understanding-the-project-file.md), en el&#x2014;que el proceso de compilación se controla mediante dos archivos de proyecto que contiene instrucciones de compilación que se aplican a cada entorno de destino y uno que contiene la configuración de compilación e implementación específica del entorno.</span><span class="sxs-lookup"><span data-stu-id="1d282-120">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), in which the build process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="1d282-121">En tiempo de compilación, el archivo de proyecto específico del entorno se combina en el archivo de proyecto independiente del entorno para formar un conjunto completo de instrucciones de compilación.</span><span class="sxs-lookup"><span data-stu-id="1d282-121">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="task-overview"></a><span data-ttu-id="1d282-122">Información general sobre tareas</span><span class="sxs-lookup"><span data-stu-id="1d282-122">Task Overview</span></span>

<span data-ttu-id="1d282-123">En este tema se supone que:</span><span class="sxs-lookup"><span data-stu-id="1d282-123">This topic assumes that:</span></span>

- <span data-ttu-id="1d282-124">El enfoque de archivo de proyecto dividido se usa para la implementación de soluciones, como se describe en [Descripción del archivo de proyecto](../web-deployment-in-the-enterprise/understanding-the-project-file.md).</span><span class="sxs-lookup"><span data-stu-id="1d282-124">You use the split project file approach to solution deployment, as described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md).</span></span>
- <span data-ttu-id="1d282-125">Llame a VSDBCMD desde el archivo de proyecto para implementar el proyecto de base de datos, como se describe en [Descripción del proceso de compilación](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span><span class="sxs-lookup"><span data-stu-id="1d282-125">You call VSDBCMD from the project file to deploy your database project, as described in [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span></span>

<span data-ttu-id="1d282-126">Para crear usuarios de base de datos y asignar pertenencias a roles al implementar un proyecto de base de datos en un entorno de prueba, necesitará:</span><span class="sxs-lookup"><span data-stu-id="1d282-126">To create database users and assign role memberships when you deploy a database project to a test environment, you'll need to:</span></span>

- <span data-ttu-id="1d282-127">Cree un script de Transact Lenguaje de consulta estructurado (Transact-SQL) que realice los cambios necesarios en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="1d282-127">Create a Transact Structured Query Language (Transact-SQL) script that makes the necessary database changes.</span></span>
- <span data-ttu-id="1d282-128">Cree un destino de Microsoft Build Engine (MSBuild) que use la utilidad sqlcmd. exe para ejecutar el script SQL.</span><span class="sxs-lookup"><span data-stu-id="1d282-128">Create a Microsoft Build Engine (MSBuild) target that uses the sqlcmd.exe utility to run the SQL script.</span></span>
- <span data-ttu-id="1d282-129">Configure los archivos de proyecto para que invoquen el destino al implementar la solución en un entorno de prueba.</span><span class="sxs-lookup"><span data-stu-id="1d282-129">Configure your project files to invoke the target when you're deploying your solution to a test environment.</span></span>

<span data-ttu-id="1d282-130">En este tema se muestra cómo realizar cada uno de estos procedimientos.</span><span class="sxs-lookup"><span data-stu-id="1d282-130">This topic will show you how to perform each of these procedures.</span></span>

## <a name="scripting-the-database-role-memberships"></a><span data-ttu-id="1d282-131">Crear scripts de pertenencias a roles de base de datos</span><span class="sxs-lookup"><span data-stu-id="1d282-131">Scripting the Database Role Memberships</span></span>

<span data-ttu-id="1d282-132">Puede crear un script Transact-SQL de muchas maneras diferentes y en cualquier ubicación que elija.</span><span class="sxs-lookup"><span data-stu-id="1d282-132">You can create a Transact-SQL script in a lot of different ways, and in any location you choose.</span></span> <span data-ttu-id="1d282-133">El enfoque más sencillo consiste en crear el script dentro de la solución en Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="1d282-133">The easiest approach is to create the script within your solution in Visual Studio 2010.</span></span>

<span data-ttu-id="1d282-134">**Para crear un script SQL**</span><span class="sxs-lookup"><span data-stu-id="1d282-134">**To create a SQL script**</span></span>

1. <span data-ttu-id="1d282-135">En la ventana de **Explorador de soluciones** , expanda el nodo del proyecto de base de datos.</span><span class="sxs-lookup"><span data-stu-id="1d282-135">In the **Solution Explorer** window, expand your database project node.</span></span>
2. <span data-ttu-id="1d282-136">Haga clic con el botón secundario en la carpeta **scripts** , elija **Agregar**y, a continuación, haga clic en **nueva carpeta**.</span><span class="sxs-lookup"><span data-stu-id="1d282-136">Right-click the **Scripts** folder, point to **Add**, and then click **New Folder**.</span></span>
3. <span data-ttu-id="1d282-137">Escriba **Test** como el nombre de la carpeta y, a continuación, presione Entrar.</span><span class="sxs-lookup"><span data-stu-id="1d282-137">Type **Test** as the folder name, and then press Enter.</span></span>
4. <span data-ttu-id="1d282-138">Haga clic con el botón secundario en la carpeta **prueba** , seleccione **Agregar**y, a continuación, haga clic en **script**.</span><span class="sxs-lookup"><span data-stu-id="1d282-138">Right-click the **Test** folder, point to **Add**, and then click **Script**.</span></span>
5. <span data-ttu-id="1d282-139">En el cuadro de diálogo **Agregar nuevo elemento** , asigne un nombre descriptivo a la secuencia de comandos (por ejemplo, **AddRoleMemberships. SQL**) y, a continuación, haga clic en **Agregar**.</span><span class="sxs-lookup"><span data-stu-id="1d282-139">In the **Add New Item** dialog box, give your script a meaningful name (for example, **AddRoleMemberships.sql**), and then click **Add**.</span></span>

    ![](deploying-database-role-memberships-to-test-environments/_static/image1.png)
6. <span data-ttu-id="1d282-140">En el archivo *AddRoleMemberships. SQL* , agregue instrucciones TRANSACT-SQL que:</span><span class="sxs-lookup"><span data-stu-id="1d282-140">In the *AddRoleMemberships.sql* file, add Transact-SQL statements that:</span></span>

    1. <span data-ttu-id="1d282-141">Cree un usuario de base de datos para el inicio de sesión de SQL Server que tendrá acceso a la base de datos.</span><span class="sxs-lookup"><span data-stu-id="1d282-141">Create a database user for the SQL Server login that will access your database.</span></span>
    2. <span data-ttu-id="1d282-142">Agregue el usuario de base de datos a los roles de base de datos necesarios.</span><span class="sxs-lookup"><span data-stu-id="1d282-142">Add the database user to any required database roles.</span></span>
7. <span data-ttu-id="1d282-143">El archivo debe ser similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="1d282-143">The file should resemble this:</span></span>

    [!code-sql[Main](deploying-database-role-memberships-to-test-environments/samples/sample1.sql)]
8. <span data-ttu-id="1d282-144">Guarde el archivo.</span><span class="sxs-lookup"><span data-stu-id="1d282-144">Save the file.</span></span>

## <a name="executing-the-script-on-the-target-database"></a><span data-ttu-id="1d282-145">Ejecutar el script en la base de datos de destino</span><span class="sxs-lookup"><span data-stu-id="1d282-145">Executing the Script on the Target Database</span></span>

<span data-ttu-id="1d282-146">Idealmente, ejecutaría cualquier script de Transact-SQL necesario como parte de un script posterior a la implementación al implementar el proyecto de base de datos.</span><span class="sxs-lookup"><span data-stu-id="1d282-146">Ideally, you'd run any required Transact-SQL scripts as part of a post-deployment script when you deploy your database project.</span></span> <span data-ttu-id="1d282-147">Sin embargo, los scripts posteriores a la implementación no permiten ejecutar la lógica de forma condicional en función de las configuraciones de la solución o las propiedades de compilación.</span><span class="sxs-lookup"><span data-stu-id="1d282-147">However, post-deployment scripts don't allow you to execute logic conditionally based on solution configurations or build properties.</span></span> <span data-ttu-id="1d282-148">La alternativa es ejecutar los scripts SQL directamente desde el archivo de proyecto de MSBuild mediante la creación de un elemento de **destino** que ejecute un comando sqlcmd. exe.</span><span class="sxs-lookup"><span data-stu-id="1d282-148">The alternative is to run your SQL scripts directly from the MSBuild project file, by creating a **Target** element that executes a sqlcmd.exe command.</span></span> <span data-ttu-id="1d282-149">Puede usar este comando para ejecutar el script en la base de datos de destino:</span><span class="sxs-lookup"><span data-stu-id="1d282-149">You can use this command to run your script on the target database:</span></span>

[!code-console[Main](deploying-database-role-memberships-to-test-environments/samples/sample2.cmd)]

> [!NOTE]
> <span data-ttu-id="1d282-150">Para obtener más información sobre las opciones de línea de comandos de SQLCMD, vea [sqlcmd (utilidad](https://msdn.microsoft.com/library/ms162773.aspx)).</span><span class="sxs-lookup"><span data-stu-id="1d282-150">For more information on sqlcmd command-line options, see [sqlcmd Utility](https://msdn.microsoft.com/library/ms162773.aspx).</span></span>

<span data-ttu-id="1d282-151">Antes de insertar este comando en un destino de MSBuild, debe tener en cuenta en qué condiciones desea que se ejecute el script:</span><span class="sxs-lookup"><span data-stu-id="1d282-151">Before you embed this command in an MSBuild target, you need to consider under what conditions you want the script to run:</span></span>

- <span data-ttu-id="1d282-152">La base de datos de destino debe existir antes de cambiar sus pertenencias a roles.</span><span class="sxs-lookup"><span data-stu-id="1d282-152">The target database must exist before you change its role memberships.</span></span> <span data-ttu-id="1d282-153">Como tal, debe ejecutar este script *después* de la implementación de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="1d282-153">As such, you need to run this script *after* the database deployment.</span></span>
- <span data-ttu-id="1d282-154">Debe incluir una condición para que el script solo se ejecute para entornos de prueba.</span><span class="sxs-lookup"><span data-stu-id="1d282-154">You need to include a condition so that the script is only executed for test environments.</span></span>
- <span data-ttu-id="1d282-155">Si está ejecutando una implementación&#x2014;"What if" en otras palabras, si va a generar scripts de implementación pero no los ejecuta&#x2014;realmente, no debe ejecutar el script SQL.</span><span class="sxs-lookup"><span data-stu-id="1d282-155">If you're running a "what if" deployment&#x2014;in other words, if you're generating deployment scripts but not actually running them&#x2014;you shouldn't run the SQL script.</span></span>

<span data-ttu-id="1d282-156">Si utiliza el enfoque de archivo de proyecto dividido que se describe en [Descripción del archivo de proyecto](../web-deployment-in-the-enterprise/understanding-the-project-file.md), como se muestra en la solución de ejemplo Contact Manager, puede dividir las instrucciones de compilación del script SQL de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="1d282-156">If you're using the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), as demonstrated by the Contact Manager sample solution, you can split the build instructions for your SQL script like this:</span></span>

- <span data-ttu-id="1d282-157">Cualquier propiedad necesaria específica del entorno, junto con la propiedad que determina si se deben implementar permisos, debe ir en el archivo de proyecto específico del entorno (por ejemplo, *env-dev. proj*).</span><span class="sxs-lookup"><span data-stu-id="1d282-157">Any required environment-specific properties, together with the property that determines whether to deploy permissions, should go in the environment-specific project file (for example, *Env-Dev.proj*).</span></span>
- <span data-ttu-id="1d282-158">El destino de MSBuild, junto con cualquier propiedad que no cambie entre los entornos de destino, debe ir en el archivo de proyecto universal (por ejemplo, *Publish. proj*).</span><span class="sxs-lookup"><span data-stu-id="1d282-158">The MSBuild target itself, together with any properties that will not change between destination environments, should go in the universal project file (for example, *Publish.proj*).</span></span>

<span data-ttu-id="1d282-159">En el archivo de proyecto específico del entorno, debe definir el nombre del servidor de base de datos, el nombre de la base de datos de destino y una propiedad booleana que permite al usuario especificar si desea implementar la pertenencia a roles.</span><span class="sxs-lookup"><span data-stu-id="1d282-159">In the environment-specific project file, you need to define the database server name, the target database name, and a Boolean property that lets the user specify whether to deploy role memberships.</span></span>

[!code-xml[Main](deploying-database-role-memberships-to-test-environments/samples/sample3.xml)]

<span data-ttu-id="1d282-160">En el archivo de proyecto universal, debe proporcionar la ubicación del archivo ejecutable SQLCMD y la ubicación del script SQL que desea ejecutar.</span><span class="sxs-lookup"><span data-stu-id="1d282-160">In the universal project file, you need to provide the location of the sqlcmd executable and the location of the SQL script you want to run.</span></span> <span data-ttu-id="1d282-161">Estas propiedades seguirán siendo las mismas independientemente del entorno de destino.</span><span class="sxs-lookup"><span data-stu-id="1d282-161">These properties will remain the same regardless of the destination environment.</span></span> <span data-ttu-id="1d282-162">También debe crear un destino de MSBuild para ejecutar el comando sqlcmd.</span><span class="sxs-lookup"><span data-stu-id="1d282-162">You also need to create an MSBuild target to execute the sqlcmd command.</span></span>

[!code-xml[Main](deploying-database-role-memberships-to-test-environments/samples/sample4.xml)]

<span data-ttu-id="1d282-163">Observe que se agrega la ubicación del ejecutable de SQLCMD como una propiedad estática, ya que esto podría ser útil para otros destinos.</span><span class="sxs-lookup"><span data-stu-id="1d282-163">Notice that you add the location of the sqlcmd executable as a static property, as this could be useful to other targets.</span></span> <span data-ttu-id="1d282-164">Por el contrario, se define la ubicación del script de SQL y la sintaxis del comando SQLCMD como propiedades dinámicas dentro del destino, ya que no serán necesarios antes de que se ejecute el destino.</span><span class="sxs-lookup"><span data-stu-id="1d282-164">In contrast, you define the location of your SQL script and the syntax of the sqlcmd command as dynamic properties within the target, as they will not be required before the target is executed.</span></span> <span data-ttu-id="1d282-165">En este caso, el destino **DeployTestDBPermissions** solo se ejecutará si se cumplen estas condiciones:</span><span class="sxs-lookup"><span data-stu-id="1d282-165">In this case, the **DeployTestDBPermissions** target will only be executed if these conditions are met:</span></span>

- <span data-ttu-id="1d282-166">La propiedad **DeployTestDBRoleMemberships** se establece en **true**.</span><span class="sxs-lookup"><span data-stu-id="1d282-166">The **DeployTestDBRoleMemberships** property is set to **true**.</span></span>
- <span data-ttu-id="1d282-167">El usuario no ha especificado una marca **Whatif = true** .</span><span class="sxs-lookup"><span data-stu-id="1d282-167">The user hasn't specified a **WhatIf=true** flag.</span></span>

<span data-ttu-id="1d282-168">Por último, no se olvide de invocar el destino.</span><span class="sxs-lookup"><span data-stu-id="1d282-168">Finally, don't forget to invoke the target.</span></span> <span data-ttu-id="1d282-169">En el archivo *Publish. proj* , puede hacerlo agregando el destino a la lista de dependencias para el destino predeterminado **FullPublish** .</span><span class="sxs-lookup"><span data-stu-id="1d282-169">In the *Publish.proj* file, you can do this by adding the target to the dependency list for the default **FullPublish** target.</span></span> <span data-ttu-id="1d282-170">Debe asegurarse de que el destino **DeployTestDBPermissions** no se ejecute hasta que se haya ejecutado el destino **PublishDbPackages** .</span><span class="sxs-lookup"><span data-stu-id="1d282-170">You need to ensure that the **DeployTestDBPermissions** target is not executed until the **PublishDbPackages** target has been executed.</span></span>

[!code-xml[Main](deploying-database-role-memberships-to-test-environments/samples/sample5.xml)]

## <a name="conclusion"></a><span data-ttu-id="1d282-171">Conclusión</span><span class="sxs-lookup"><span data-stu-id="1d282-171">Conclusion</span></span>

<span data-ttu-id="1d282-172">En este tema se describe una manera de agregar usuarios y pertenencias a roles de base de datos como una acción posterior a la implementación al implementar un proyecto de base de datos.</span><span class="sxs-lookup"><span data-stu-id="1d282-172">This topic described one way in which you can add database users and role memberships as a post-deployment action when you deploy a database project.</span></span> <span data-ttu-id="1d282-173">Esto suele ser útil cuando se vuelve a crear una base de datos con regularidad en un entorno de prueba, pero normalmente se debe evitar cuando se implementan bases de datos en entornos de ensayo o de producción.</span><span class="sxs-lookup"><span data-stu-id="1d282-173">This is typically useful when you regularly re-create a database in a test environment, but it should usually be avoided when you deploy databases to staging or production environments.</span></span> <span data-ttu-id="1d282-174">Por lo tanto, debe asegurarse de que usa la lógica condicional necesaria para que los usuarios de la base de datos y las pertenencias a roles solo se creen cuando sea adecuado hacerlo.</span><span class="sxs-lookup"><span data-stu-id="1d282-174">As such, you should ensure that you use the necessary conditional logic so that database users and role memberships are only created when it's appropriate to do so.</span></span>

## <a name="further-reading"></a><span data-ttu-id="1d282-175">Información adicional</span><span class="sxs-lookup"><span data-stu-id="1d282-175">Further Reading</span></span>

<span data-ttu-id="1d282-176">Para obtener más información sobre el uso de VSDBCMD para implementar proyectos de base de datos, vea [implementar proyectos de base de datos](../web-deployment-in-the-enterprise/deploying-database-projects.md).</span><span class="sxs-lookup"><span data-stu-id="1d282-176">For more information on using VSDBCMD to deploy database projects, see [Deploying Database Projects](../web-deployment-in-the-enterprise/deploying-database-projects.md).</span></span> <span data-ttu-id="1d282-177">Para obtener instrucciones sobre cómo personalizar las implementaciones de base de datos para distintos entornos de destino, consulte [Personalización de implementaciones de base de datos para varios entornos](customizing-database-deployments-for-multiple-environments.md).</span><span class="sxs-lookup"><span data-stu-id="1d282-177">For guidance on customizing database deployments for different target environments, see [Customizing Database Deployments for Multiple Environments](customizing-database-deployments-for-multiple-environments.md).</span></span> <span data-ttu-id="1d282-178">Para obtener más información sobre el uso de archivos de proyecto de MSBuild personalizados para controlar el proceso de implementación, vea [Descripción del archivo de proyecto](../web-deployment-in-the-enterprise/understanding-the-project-file.md) y [Descripción del proceso de compilación](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span><span class="sxs-lookup"><span data-stu-id="1d282-178">For more information on using custom MSBuild project files to control the deployment process, see [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md) and [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span></span> <span data-ttu-id="1d282-179">Para obtener más información sobre las opciones de línea de comandos de SQLCMD, vea [sqlcmd (utilidad](https://msdn.microsoft.com/library/ms162773.aspx)).</span><span class="sxs-lookup"><span data-stu-id="1d282-179">For more information on sqlcmd command-line options, see [sqlcmd Utility](https://msdn.microsoft.com/library/ms162773.aspx).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="1d282-180">[Anterior](customizing-database-deployments-for-multiple-environments.md)
> [Siguiente](deploying-membership-databases-to-enterprise-environments.md)</span><span class="sxs-lookup"><span data-stu-id="1d282-180">[Previous](customizing-database-deployments-for-multiple-environments.md)
[Next](deploying-membership-databases-to-enterprise-environments.md)</span></span>
