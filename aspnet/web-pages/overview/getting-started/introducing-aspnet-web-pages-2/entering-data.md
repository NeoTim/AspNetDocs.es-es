---
uid: web-pages/overview/getting-started/introducing-aspnet-web-pages-2/entering-data
title: Presentación de ASP.NET Web Pages-escribir datos de base de datos mediante formularios | Microsoft Docs
author: Rick-Anderson
description: En este tutorial se muestra cómo crear un formulario de entrada y, a continuación, especificar los datos que se obtienen del formulario en una tabla de base de datos cuando se usa ASP.NET Web Pages (...
ms.author: riande
ms.date: 05/28/2015
ms.assetid: d37c93fc-25fd-4e94-8671-0d437beef206
msc.legacyurl: /web-pages/overview/getting-started/introducing-aspnet-web-pages-2/entering-data
msc.type: authoredcontent
ms.openlocfilehash: b9354a7b97a7df9020a681f709e16a92650cfcf0
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 03/06/2020
ms.locfileid: "78506605"
---
# <a name="introducing-aspnet-web-pages---entering-database-data-by-using-forms"></a><span data-ttu-id="cba0a-103">Introducción a ASP.NET Web Pages-escribir datos de base de datos mediante formularios</span><span class="sxs-lookup"><span data-stu-id="cba0a-103">Introducing ASP.NET Web Pages - Entering Database Data by Using Forms</span></span>

<span data-ttu-id="cba0a-104">por [Tom FitzMacken](https://github.com/tfitzmac)</span><span class="sxs-lookup"><span data-stu-id="cba0a-104">by [Tom FitzMacken](https://github.com/tfitzmac)</span></span>

> <span data-ttu-id="cba0a-105">En este tutorial se muestra cómo crear un formulario de entrada y, a continuación, especificar los datos que se obtienen del formulario en una tabla de base de datos cuando se usa ASP.NET Web Pages (Razor).</span><span class="sxs-lookup"><span data-stu-id="cba0a-105">This tutorial shows you how to create an entry form and then enter the data that you get from the form into a database table when you use ASP.NET Web Pages (Razor).</span></span> <span data-ttu-id="cba0a-106">Se supone que ha completado la serie a través [de los aspectos básicos de los formularios HTML en ASP.NET Web pages](https://go.microsoft.com/fwlink/?LinkId=251581).</span><span class="sxs-lookup"><span data-stu-id="cba0a-106">It assumes you have completed the series through [Basics of HTML Forms in ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=251581).</span></span>
> 
> <span data-ttu-id="cba0a-107">Temas que se abordarán:</span><span class="sxs-lookup"><span data-stu-id="cba0a-107">What you'll learn:</span></span>
> 
> - <span data-ttu-id="cba0a-108">Más información sobre cómo procesar los formularios de entrada.</span><span class="sxs-lookup"><span data-stu-id="cba0a-108">More about how to process entry forms.</span></span>
> - <span data-ttu-id="cba0a-109">Cómo agregar (insertar) datos en una base de datos.</span><span class="sxs-lookup"><span data-stu-id="cba0a-109">How to add (insert) data in a database.</span></span>
> - <span data-ttu-id="cba0a-110">Cómo asegurarse de que los usuarios han escrito un valor obligatorio en un formulario (cómo validar los datos proporcionados por el usuario).</span><span class="sxs-lookup"><span data-stu-id="cba0a-110">How to make sure that users have entered a required value in a form (how to validate user input).</span></span>
> - <span data-ttu-id="cba0a-111">Cómo mostrar los errores de validación.</span><span class="sxs-lookup"><span data-stu-id="cba0a-111">How to display validation errors.</span></span>
> - <span data-ttu-id="cba0a-112">Cómo saltar a otra página de la página actual.</span><span class="sxs-lookup"><span data-stu-id="cba0a-112">How to jump to another page from the current page.</span></span>
>   
> 
> <span data-ttu-id="cba0a-113">Características y tecnologías descritas:</span><span class="sxs-lookup"><span data-stu-id="cba0a-113">Features/technologies discussed:</span></span>
> 
> - <span data-ttu-id="cba0a-114">El método `Database.Execute` .</span><span class="sxs-lookup"><span data-stu-id="cba0a-114">The `Database.Execute` method.</span></span>
> - <span data-ttu-id="cba0a-115">Instrucción de `Insert Into` de SQL</span><span class="sxs-lookup"><span data-stu-id="cba0a-115">The SQL `Insert Into` statement</span></span>
> - <span data-ttu-id="cba0a-116">Aplicación auxiliar de `Validation`.</span><span class="sxs-lookup"><span data-stu-id="cba0a-116">The `Validation` helper.</span></span>
> - <span data-ttu-id="cba0a-117">El método `Response.Redirect` .</span><span class="sxs-lookup"><span data-stu-id="cba0a-117">The `Response.Redirect` method.</span></span>

## <a name="what-youll-build"></a><span data-ttu-id="cba0a-118">Lo que creará</span><span class="sxs-lookup"><span data-stu-id="cba0a-118">What You'll Build</span></span>

<span data-ttu-id="cba0a-119">En el tutorial anterior que mostró cómo crear una base de datos, especificó la base de datos mediante la edición de la base de datos directamente en WebMatrix, trabajando en el área de trabajo de la **base** de datos.</span><span class="sxs-lookup"><span data-stu-id="cba0a-119">In the tutorial earlier that showed you how to create a database, you entered database data by editing the database directly in WebMatrix, working in the **Database** workspace.</span></span> <span data-ttu-id="cba0a-120">Sin embargo, en la mayoría de las aplicaciones, no es una forma práctica de colocar datos en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="cba0a-120">In most apps, that's not a practical way to put data into the database, though.</span></span> <span data-ttu-id="cba0a-121">Por lo tanto, en este tutorial, creará una interfaz basada en Web que le permite escribir datos y guardarlos en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="cba0a-121">So in this tutorial, you'll create a web-based interface that lets you or anyone enter data and save it to the database.</span></span>

<span data-ttu-id="cba0a-122">Creará una página donde podrá escribir nuevas películas.</span><span class="sxs-lookup"><span data-stu-id="cba0a-122">You'll create a page where you can enter new movies.</span></span> <span data-ttu-id="cba0a-123">La página contendrá un formulario de entrada que contiene campos (cuadros de texto) en los que puede especificar el título, el género y el año de una película.</span><span class="sxs-lookup"><span data-stu-id="cba0a-123">The page will contain an entry form that has fields (text boxes) where you can enter a movie title, genre, and year.</span></span> <span data-ttu-id="cba0a-124">La página se parecerá a esta página:</span><span class="sxs-lookup"><span data-stu-id="cba0a-124">The page will look like this page:</span></span>

![Página ' agregar película ' en el explorador](entering-data/_static/image1.png)

<span data-ttu-id="cba0a-126">Los cuadros de texto serán HTML `<input>` elementos que serán similares a este marcado:</span><span class="sxs-lookup"><span data-stu-id="cba0a-126">The text boxes will be HTML `<input>` elements that will look like this markup:</span></span>

`<input type="text" name="genre" value="" />`

## <a name="creating-the-basic-entry-form"></a><span data-ttu-id="cba0a-127">Crear el formulario de entrada básico</span><span class="sxs-lookup"><span data-stu-id="cba0a-127">Creating the Basic Entry Form</span></span>

<span data-ttu-id="cba0a-128">Cree una página denominada *AddMovie. cshtml*.</span><span class="sxs-lookup"><span data-stu-id="cba0a-128">Create a page named *AddMovie.cshtml*.</span></span>

<span data-ttu-id="cba0a-129">Reemplace el contenido del archivo por el marcado siguiente.</span><span class="sxs-lookup"><span data-stu-id="cba0a-129">Replace what's in the file with the following markup.</span></span> <span data-ttu-id="cba0a-130">Sobrescribir todo; en breve, agregará un bloque de código.</span><span class="sxs-lookup"><span data-stu-id="cba0a-130">Overwrite everything; you'll add a code block at the top shortly.</span></span>

[!code-cshtml[Main](entering-data/samples/sample1.cshtml)]

<span data-ttu-id="cba0a-131">En este ejemplo se muestra HTML típico para crear un formulario.</span><span class="sxs-lookup"><span data-stu-id="cba0a-131">This example shows typical HTML for creating a form.</span></span> <span data-ttu-id="cba0a-132">Utiliza `<input>` elementos para los cuadros de texto y para el botón de envío.</span><span class="sxs-lookup"><span data-stu-id="cba0a-132">It uses `<input>` elements for the text boxes and for the submit button.</span></span> <span data-ttu-id="cba0a-133">Los títulos de los cuadros de texto se crean mediante los elementos de `<label>` estándar.</span><span class="sxs-lookup"><span data-stu-id="cba0a-133">The captions for the text boxes are created by using standard `<label>` elements.</span></span> <span data-ttu-id="cba0a-134">Los elementos `<fieldset>` y `<legend>` colocan un cuadro muy bonito alrededor del formulario.</span><span class="sxs-lookup"><span data-stu-id="cba0a-134">The `<fieldset>` and `<legend>` elements put a nice box around the form.</span></span>

<span data-ttu-id="cba0a-135">Observe que en esta página, el elemento `<form>` usa `post` como valor para el atributo `method`.</span><span class="sxs-lookup"><span data-stu-id="cba0a-135">Notice that in this page, the `<form>` element uses `post` as the value for the `method` attribute.</span></span> <span data-ttu-id="cba0a-136">En el tutorial anterior, creó un formulario que usaba el método `get`.</span><span class="sxs-lookup"><span data-stu-id="cba0a-136">In the previous tutorial, you created a form that used the `get` method.</span></span> <span data-ttu-id="cba0a-137">Eso era correcto, porque aunque el formulario envió valores al servidor, la solicitud no realizaba ningún cambio.</span><span class="sxs-lookup"><span data-stu-id="cba0a-137">That was correct, because although the form submitted values to the server, the request did not make any changes.</span></span> <span data-ttu-id="cba0a-138">Todo lo que hacía fue capturar datos de maneras diferentes.</span><span class="sxs-lookup"><span data-stu-id="cba0a-138">All it did was fetch data in different ways.</span></span> <span data-ttu-id="cba0a-139">Sin embargo, en esta página *realizará* cambios: va a agregar nuevos registros de base de datos.</span><span class="sxs-lookup"><span data-stu-id="cba0a-139">However, in this page you *will* make changes—you're going to add new database records.</span></span> <span data-ttu-id="cba0a-140">Por lo tanto, este formulario debe utilizar el método `post`.</span><span class="sxs-lookup"><span data-stu-id="cba0a-140">Therefore, this form should use the `post` method.</span></span> <span data-ttu-id="cba0a-141">(Para obtener más información sobre la diferencia entre las operaciones de `GET` y `POST`, vea la barra lateral de[seguridad del verbo GET, post y http](https://go.microsoft.com/fwlink/?LinkId=251581#GET,_POST,_and_HTTP_Verb_Safety) en el tutorial anterior).</span><span class="sxs-lookup"><span data-stu-id="cba0a-141">(For more about the difference between `GET` and `POST` operations, see the[GET, POST, and HTTP Verb Safety](https://go.microsoft.com/fwlink/?LinkId=251581#GET,_POST,_and_HTTP_Verb_Safety) sidebar in the previous tutorial.)</span></span>

<span data-ttu-id="cba0a-142">Tenga en cuenta que cada cuadro de texto tiene un elemento `name` (`title`, `genre`, `year`).</span><span class="sxs-lookup"><span data-stu-id="cba0a-142">Note that each text box has a `name` element (`title`, `genre`, `year`).</span></span> <span data-ttu-id="cba0a-143">Como vio en el tutorial anterior, estos nombres son importantes porque debe tener esos nombres para poder obtener la entrada del usuario más adelante.</span><span class="sxs-lookup"><span data-stu-id="cba0a-143">As you saw in the previous tutorial, these names are important because you must have those names so you can get the user's input later.</span></span> <span data-ttu-id="cba0a-144">Puede usar cualquier nombre.</span><span class="sxs-lookup"><span data-stu-id="cba0a-144">You can use any names.</span></span> <span data-ttu-id="cba0a-145">Resulta útil usar nombres significativos que le ayuden a recordar los datos con los que está trabajando.</span><span class="sxs-lookup"><span data-stu-id="cba0a-145">It's helpful to use meaningful names that help you remember what data you're working with.</span></span>

<span data-ttu-id="cba0a-146">El `value` atributo de cada elemento `<input>` contiene un bit de código Razor (por ejemplo, `Request.Form["title"]`).</span><span class="sxs-lookup"><span data-stu-id="cba0a-146">The `value` attribute of each `<input>` element contains a bit of Razor code (for example, `Request.Form["title"]`).</span></span> <span data-ttu-id="cba0a-147">Ha aprendido una versión de este truco en el tutorial anterior para conservar el valor especificado en el cuadro de texto (si existe) después de enviar el formulario.</span><span class="sxs-lookup"><span data-stu-id="cba0a-147">You learned a version of this trick in the previous tutorial to preserve the value entered into the text box (if any) after the form has been submitted.</span></span>

## <a name="getting-the-form-values"></a><span data-ttu-id="cba0a-148">Obtener los valores del formulario</span><span class="sxs-lookup"><span data-stu-id="cba0a-148">Getting the Form Values</span></span>

<span data-ttu-id="cba0a-149">A continuación, agregue el código que procesa el formulario.</span><span class="sxs-lookup"><span data-stu-id="cba0a-149">Next, you add code that processes the form.</span></span> <span data-ttu-id="cba0a-150">En esquema, hará lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="cba0a-150">In outline, you'll do the following:</span></span>

1. <span data-ttu-id="cba0a-151">Compruebe si la página se está publicando (se envió).</span><span class="sxs-lookup"><span data-stu-id="cba0a-151">Check whether the page is being posted (was submitted).</span></span> <span data-ttu-id="cba0a-152">Desea que el código se ejecute solo cuando los usuarios hayan pulsado el botón, no cuando se ejecute la página por primera vez.</span><span class="sxs-lookup"><span data-stu-id="cba0a-152">You want to your code to run only when users have clicked the button, not when the page first runs.</span></span>
2. <span data-ttu-id="cba0a-153">Obtiene los valores que el usuario especificó en los cuadros de texto.</span><span class="sxs-lookup"><span data-stu-id="cba0a-153">Get the values that the user entered into the text boxes.</span></span> <span data-ttu-id="cba0a-154">En este caso, dado que el formulario utiliza el verbo `POST`, obtendrá los valores del formulario de la colección `Request.Form`.</span><span class="sxs-lookup"><span data-stu-id="cba0a-154">In this case, because the form is using the `POST` verb, you get the form values from the `Request.Form` collection.</span></span>
3. <span data-ttu-id="cba0a-155">Inserte los valores como un nuevo registro en la tabla de la base de datos de *películas* .</span><span class="sxs-lookup"><span data-stu-id="cba0a-155">Insert the values as a new record in the *Movies* database table.</span></span>

<span data-ttu-id="cba0a-156">En la parte superior del archivo, agregue el siguiente código:</span><span class="sxs-lookup"><span data-stu-id="cba0a-156">At the top of the file, add the following code:</span></span>

[!code-cshtml[Main](entering-data/samples/sample2.cshtml)]

<span data-ttu-id="cba0a-157">Las primeras líneas crean variables (`title`, `genre`y `year`) para contener los valores de los cuadros de texto.</span><span class="sxs-lookup"><span data-stu-id="cba0a-157">The first few lines create variables (`title`, `genre`, and `year`) to hold the values from the text boxes.</span></span> <span data-ttu-id="cba0a-158">La `if(IsPost)` de línea garantiza que las variables se establecen *solo* cuando los usuarios hacen clic en el botón **Agregar película** , es decir, cuando se ha publicado el formulario.</span><span class="sxs-lookup"><span data-stu-id="cba0a-158">The line `if(IsPost)` makes sure that the variables are set *only* when users click the **Add Movie** button — that is, when the form has been posted.</span></span>

<span data-ttu-id="cba0a-159">Como vimos en un tutorial anterior, obtiene el valor de un cuadro de texto mediante una expresión como `Request.Form["name"]`, donde *nombre* es el nombre del elemento `<input>`.</span><span class="sxs-lookup"><span data-stu-id="cba0a-159">As you saw in an earlier tutorial, you get the value of a text box by using an expression like `Request.Form["name"]`, where *name* is the name of the `<input>` element.</span></span>

<span data-ttu-id="cba0a-160">Los nombres de las variables (`title`, `genre`y `year`) son arbitrarios.</span><span class="sxs-lookup"><span data-stu-id="cba0a-160">The names of the variables (`title`, `genre`, and `year`) are arbitrary.</span></span> <span data-ttu-id="cba0a-161">Al igual que los nombres que se asignan a los elementos de `<input>`, puede llamarlos como desee.</span><span class="sxs-lookup"><span data-stu-id="cba0a-161">Like the names that you assign to `<input>` elements, you can call them anything you like.</span></span> <span data-ttu-id="cba0a-162">(Los nombres de las variables no tienen que coincidir con los atributos de nombre de los elementos `<input>` del formulario). Sin embargo, al igual que con los elementos `<input>`, se recomienda usar nombres de variable que reflejen los datos que contienen.</span><span class="sxs-lookup"><span data-stu-id="cba0a-162">(The names of the variables don't have to match the name attributes of `<input>` elements on the form.) But as with the `<input>` elements, it's a good idea to use variable names that reflect the data that they contain.</span></span> <span data-ttu-id="cba0a-163">Al escribir código, los nombres coherentes facilitan la tarea de recordar los datos con los que está trabajando.</span><span class="sxs-lookup"><span data-stu-id="cba0a-163">When you write code, consistent names make it easier for you to remember what data you're working with.</span></span>

## <a name="adding-data-to-the-database"></a><span data-ttu-id="cba0a-164">Agregar datos a la base de datos</span><span class="sxs-lookup"><span data-stu-id="cba0a-164">Adding Data to the Database</span></span>

<span data-ttu-id="cba0a-165">En el bloque de código que acaba de agregar, justo *dentro* de la llave de cierre (`}`) del bloque de `if` (no solo dentro del bloque de código), agregue el código siguiente:</span><span class="sxs-lookup"><span data-stu-id="cba0a-165">In the code block you just added, just *inside* the closing brace ( `}` ) of the `if` block (not just inside the code block), add the following code:</span></span>

[!code-csharp[Main](entering-data/samples/sample3.cs)]

<span data-ttu-id="cba0a-166">Este ejemplo es similar al código que usó en un tutorial anterior para capturar y Mostrar datos.</span><span class="sxs-lookup"><span data-stu-id="cba0a-166">This example is similar to the code you used in a previous tutorial to fetch and display data.</span></span> <span data-ttu-id="cba0a-167">La línea que comienza por `db =` abre la base de datos, como antes, y la línea siguiente define una instrucción SQL, de nuevo como vio antes.</span><span class="sxs-lookup"><span data-stu-id="cba0a-167">The line that starts with `db =` opens the database, like before, and the next line defines a SQL statement, again as you saw before.</span></span> <span data-ttu-id="cba0a-168">Sin embargo, esta vez define una instrucción de `Insert Into` de SQL.</span><span class="sxs-lookup"><span data-stu-id="cba0a-168">However, this time it defines a SQL `Insert Into` statement.</span></span> <span data-ttu-id="cba0a-169">En el ejemplo siguiente se muestra la sintaxis general de la instrucción `Insert Into`:</span><span class="sxs-lookup"><span data-stu-id="cba0a-169">The following example shows the general syntax of the `Insert Into` statement:</span></span>

`INSERT INTO table (column1, column2, column3, ...) VALUES (value1, value2, value3, ...)`

<span data-ttu-id="cba0a-170">En otras palabras, se especifica la tabla en la que se va a insertar y, a continuación, se muestran las columnas que se van a insertar en y, a continuación, se muestran los valores que se van a insertar.</span><span class="sxs-lookup"><span data-stu-id="cba0a-170">In other words, you specify the table to insert into, then list the columns to insert into, and then list the values to insert.</span></span> <span data-ttu-id="cba0a-171">(Como se indicó antes, SQL no distingue entre mayúsculas y minúsculas, pero algunas personas ponen en mayúsculas las palabras clave para facilitar la lectura del comando).</span><span class="sxs-lookup"><span data-stu-id="cba0a-171">(As noted before, SQL is not case sensitive but some people capitalize the keywords to make it easier to read the command.)</span></span>

<span data-ttu-id="cba0a-172">Las columnas que va a insertar en ya aparecen en el comando: `(Title, Genre, Year)`.</span><span class="sxs-lookup"><span data-stu-id="cba0a-172">The columns that you're inserting into are already listed in the command — `(Title, Genre, Year)`.</span></span> <span data-ttu-id="cba0a-173">La parte interesante es la forma de obtener los valores de los cuadros de texto en el `VALUES` parte del comando.</span><span class="sxs-lookup"><span data-stu-id="cba0a-173">The interesting part is how you get the values from the text boxes into the `VALUES` part of the command.</span></span> <span data-ttu-id="cba0a-174">En lugar de los valores reales, verá `@0`, `@1`y `@2`, que son marcadores de posición de los cursos.</span><span class="sxs-lookup"><span data-stu-id="cba0a-174">Instead of actual values, you see `@0`, `@1`, and `@2`, which are of course placeholders.</span></span> <span data-ttu-id="cba0a-175">Al ejecutar el comando (en la línea `db.Execute`), se pasan los valores que se obtuvieron de los cuadros de texto.</span><span class="sxs-lookup"><span data-stu-id="cba0a-175">When you run the command (on the `db.Execute` line), you pass the values that you got from the text boxes.</span></span>

<span data-ttu-id="cba0a-176">**¡Importante!**</span><span class="sxs-lookup"><span data-stu-id="cba0a-176">**Important!**</span></span> <span data-ttu-id="cba0a-177">Recuerde que la única manera de incluir los datos en línea por un usuario en una instrucción SQL es usar los marcadores de posición, tal como se ve aquí (`VALUES(@0, @1, @2)`).</span><span class="sxs-lookup"><span data-stu-id="cba0a-177">Remember that the only way you should ever include data entered online by a user in a SQL statement is to use placeholders, as you see here (`VALUES(@0, @1, @2)`).</span></span> <span data-ttu-id="cba0a-178">Si concatena los datos proporcionados por el usuario en una instrucción SQL, se abre a través de un ataque por inyección de SQL, como se explica en los [conceptos básicos de los formularios ASP.NET Web pages](https://go.microsoft.com/fwlink/?LinkId=251581) (el tutorial anterior).</span><span class="sxs-lookup"><span data-stu-id="cba0a-178">If you concatenate user input into a SQL statement, you open yourself to a SQL injection attack, as explained in [Form Basics in ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=251581) (the previous tutorial).</span></span>

<span data-ttu-id="cba0a-179">Dentro del bloque `if`, agregue la siguiente línea después de la línea `db.Execute`:</span><span class="sxs-lookup"><span data-stu-id="cba0a-179">Still inside the `if` block, add the following line after the `db.Execute` line:</span></span>

[!code-css[Main](entering-data/samples/sample4.css)]

<span data-ttu-id="cba0a-180">Una vez insertada la nueva película en la base de datos, esta línea le salta (redirige) a la página *películas* para que pueda ver la película que acaba de escribir.</span><span class="sxs-lookup"><span data-stu-id="cba0a-180">After the new movie has been inserted into the database, this line jumps you (redirects) to the *Movies* page so you can see the movie you just entered.</span></span> <span data-ttu-id="cba0a-181">El operador `~` significa "raíz del sitio web".</span><span class="sxs-lookup"><span data-stu-id="cba0a-181">The `~` operator means "root of the website."</span></span> <span data-ttu-id="cba0a-182">(El operador `~` solo funciona en páginas de ASP.NET, no en HTML en general).</span><span class="sxs-lookup"><span data-stu-id="cba0a-182">(The `~` operator works only in ASP.NET pages, not in HTML generally.)</span></span>

<span data-ttu-id="cba0a-183">El bloque de código completo es similar al de este ejemplo:</span><span class="sxs-lookup"><span data-stu-id="cba0a-183">The complete code block looks like this example:</span></span>

[!code-cshtml[Main](entering-data/samples/sample5.cshtml)]

## <a name="testing-the-insert-command-so-far"></a><span data-ttu-id="cba0a-184">Probar el comando INSERT (hasta ahora)</span><span class="sxs-lookup"><span data-stu-id="cba0a-184">Testing the Insert Command (So Far)</span></span>

<span data-ttu-id="cba0a-185">Todavía no está listo, pero ahora es un buen momento para probarlo.</span><span class="sxs-lookup"><span data-stu-id="cba0a-185">You're not done yet, but now is a good time to test.</span></span>

<span data-ttu-id="cba0a-186">En la vista de árbol de los archivos de WebMatrix, haga clic con el botón secundario en la página *AddMovie. cshtml* y, a continuación, haga clic en **iniciar en el explorador**.</span><span class="sxs-lookup"><span data-stu-id="cba0a-186">In the tree view of files in WebMatrix, right-click the *AddMovie.cshtml* page and then click **Launch in browser**.</span></span>

![Página ' agregar película ' en el explorador](entering-data/_static/image2.png)

<span data-ttu-id="cba0a-188">(Si termina con otra página en el explorador, asegúrese de que la dirección URL sea `http://localhost:nnnnn/AddMovie`), donde *nnnnn* es el número de puerto que está usando.</span><span class="sxs-lookup"><span data-stu-id="cba0a-188">(If you end up with a different page in the browser, make sure that the URL is `http://localhost:nnnnn/AddMovie`), where *nnnnn* is the port number that you're using.)</span></span>

<span data-ttu-id="cba0a-189">¿Ha recibido una página de error?</span><span class="sxs-lookup"><span data-stu-id="cba0a-189">Did you get an error page?</span></span> <span data-ttu-id="cba0a-190">Si es así, lea atentamente y asegúrese de que el código tenga exactamente lo que se ha indicado anteriormente.</span><span class="sxs-lookup"><span data-stu-id="cba0a-190">If so, read it carefully and make sure that the code looks exactly what was listed earlier.</span></span>

<span data-ttu-id="cba0a-191">Escriba una película con el formato &mdash; por ejemplo, use "ciudadano Kane", "series" y "1941".</span><span class="sxs-lookup"><span data-stu-id="cba0a-191">Enter a movie in the form &mdash; for example, use "Citizen Kane", "Drama", and "1941".</span></span> <span data-ttu-id="cba0a-192">(O cualquier). A continuación, haga clic en **Agregar película**.</span><span class="sxs-lookup"><span data-stu-id="cba0a-192">(Or whatever.) Then click **Add Movie**.</span></span>

<span data-ttu-id="cba0a-193">Si todo va bien, se le redirigirá a la página *películas* .</span><span class="sxs-lookup"><span data-stu-id="cba0a-193">If all goes well, you're redirected to the *Movies* page.</span></span> <span data-ttu-id="cba0a-194">Asegúrese de que la nueva película aparece en la lista.</span><span class="sxs-lookup"><span data-stu-id="cba0a-194">Make sure that your new movie is listed.</span></span>

![Página de películas que muestra la película recién agregada](entering-data/_static/image3.png)

## <a name="validating-user-input"></a><span data-ttu-id="cba0a-196">Validar los datos introducidos por el usuario</span><span class="sxs-lookup"><span data-stu-id="cba0a-196">Validating User Input</span></span>

<span data-ttu-id="cba0a-197">Vuelva a la página *AddMovie* o ejecútela de nuevo.</span><span class="sxs-lookup"><span data-stu-id="cba0a-197">Go back to the *AddMovie* page, or run it again.</span></span> <span data-ttu-id="cba0a-198">Escriba otra película, pero esta vez, escriba solo el título &mdash; por ejemplo, escriba "Singin' in the Rain".</span><span class="sxs-lookup"><span data-stu-id="cba0a-198">Enter another movie, but this time, enter only the title &mdash; for example, enter "Singin' in the Rain".</span></span> <span data-ttu-id="cba0a-199">A continuación, haga clic en **Agregar película**.</span><span class="sxs-lookup"><span data-stu-id="cba0a-199">Then click **Add Movie**.</span></span>

<span data-ttu-id="cba0a-200">Se le redirigirá a la página de *películas* de nuevo.</span><span class="sxs-lookup"><span data-stu-id="cba0a-200">You're redirected to the *Movies* page again.</span></span> <span data-ttu-id="cba0a-201">Puede encontrar la nueva película, pero está incompleta.</span><span class="sxs-lookup"><span data-stu-id="cba0a-201">You can find the new movie, but it's incomplete.</span></span>

![Página de películas que muestra una nueva película a la que le faltan algunos valores](entering-data/_static/image4.png)

<span data-ttu-id="cba0a-203">Cuando creó la tabla *películas* , dijo explícitamente que ninguno de los campos podría ser null.</span><span class="sxs-lookup"><span data-stu-id="cba0a-203">When you created the *Movies* table, you explicitly said that none of the fields could be null.</span></span> <span data-ttu-id="cba0a-204">Aquí tiene un formulario de entrada para nuevas películas y está saliendo de campos en blanco.</span><span class="sxs-lookup"><span data-stu-id="cba0a-204">Here you have an entry form for new movies, and you're leaving fields blank.</span></span> <span data-ttu-id="cba0a-205">Este es un error.</span><span class="sxs-lookup"><span data-stu-id="cba0a-205">That's an error.</span></span>

<span data-ttu-id="cba0a-206">En este caso, la base de datos no producía (o *producía*) un error.</span><span class="sxs-lookup"><span data-stu-id="cba0a-206">In this case, the database didn't actually raise (or *throw*) an error.</span></span> <span data-ttu-id="cba0a-207">No proporcionó ningún género ni año, por lo que el código de la página *AddMovie* trató esos valores como *cadenas vacías*.</span><span class="sxs-lookup"><span data-stu-id="cba0a-207">You didn't supply a genre or year, so the code in the *AddMovie* page treated those values as so-called *empty strings*.</span></span> <span data-ttu-id="cba0a-208">Cuando se ejecutó el comando de SQL `Insert Into`, los campos género y año no tenían datos útiles en ellos, pero no eran null.</span><span class="sxs-lookup"><span data-stu-id="cba0a-208">When the SQL `Insert Into` command ran, the genre and year fields didn't have useful data in them, but they weren't null.</span></span>

<span data-ttu-id="cba0a-209">Obviamente, no desea permitir que los usuarios escriban información de películas semivacías en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="cba0a-209">Obviously, you don't want to let users enter half-empty movie information into the database.</span></span> <span data-ttu-id="cba0a-210">La solución consiste en validar la entrada del usuario.</span><span class="sxs-lookup"><span data-stu-id="cba0a-210">The solution is to validate the user's input.</span></span> <span data-ttu-id="cba0a-211">Inicialmente, la validación simplemente se asegura de que el usuario ha escrito un valor para todos los campos (es decir, que ninguno de ellos contiene una cadena vacía).</span><span class="sxs-lookup"><span data-stu-id="cba0a-211">Initially, the validation will simply make sure that the user has entered a value for all of the fields (that is, that none of them contains an empty string).</span></span>

> [!TIP]
> 
> <span data-ttu-id="cba0a-212">**Cadenas nulas y vacías**</span><span class="sxs-lookup"><span data-stu-id="cba0a-212">**Null and Empty Strings**</span></span>
> 
> <span data-ttu-id="cba0a-213">En programación, hay una diferencia entre las distintas nociones de "sin valor".</span><span class="sxs-lookup"><span data-stu-id="cba0a-213">In programming, there's a distinction between different notions of "no value."</span></span> <span data-ttu-id="cba0a-214">En general, un valor es *null* si nunca se ha establecido o inicializado de ningún modo.</span><span class="sxs-lookup"><span data-stu-id="cba0a-214">In general, a value is *null* if it has never been set or initialized in any way.</span></span> <span data-ttu-id="cba0a-215">En cambio, una variable que espera que los datos de caracteres (cadenas) se pueden establecer en una *cadena vacía*.</span><span class="sxs-lookup"><span data-stu-id="cba0a-215">In contrast, a variable that expects character data (strings) can be set to an *empty string*.</span></span> <span data-ttu-id="cba0a-216">En ese caso, el valor no es null; se acaba de establecer explícitamente en una cadena de caracteres cuya longitud es cero.</span><span class="sxs-lookup"><span data-stu-id="cba0a-216">In that case, the value is not null; it's just been explicitly set to a string of characters whose length is zero.</span></span> <span data-ttu-id="cba0a-217">Estas dos instrucciones muestran la diferencia:</span><span class="sxs-lookup"><span data-stu-id="cba0a-217">These two statements show the difference:</span></span>
> 
> [!code-csharp[Main](entering-data/samples/sample6.cs)]
> 
> <span data-ttu-id="cba0a-218">Es un poco más complicado que eso, pero lo importante es que `null` representa un tipo de estado indeterminado.</span><span class="sxs-lookup"><span data-stu-id="cba0a-218">It's a little more complicated than that, but the important point is that `null` represents a sort of undetermined state.</span></span>
> 
> <span data-ttu-id="cba0a-219">Ahora, es importante comprender exactamente cuándo un valor es NULL y Cuándo es simplemente una cadena vacía.</span><span class="sxs-lookup"><span data-stu-id="cba0a-219">Now and then it's important to understand exactly when a value is null and when it's just an empty string.</span></span> <span data-ttu-id="cba0a-220">En el código de la página *AddMovie* , obtiene los valores de los cuadros de texto mediante `Request.Form["title"]`, etc.</span><span class="sxs-lookup"><span data-stu-id="cba0a-220">In the code for the *AddMovie* page, you get the values of the text boxes by using `Request.Form["title"]` and so on.</span></span> <span data-ttu-id="cba0a-221">La primera vez que se ejecuta la página (antes de hacer clic en el botón), el valor de `Request.Form["title"]` es NULL.</span><span class="sxs-lookup"><span data-stu-id="cba0a-221">When the page first runs (before you click the button), the value of `Request.Form["title"]` is null.</span></span> <span data-ttu-id="cba0a-222">Sin embargo, al enviar el formulario, `Request.Form["title"]` obtiene el valor del cuadro de texto `title`.</span><span class="sxs-lookup"><span data-stu-id="cba0a-222">But when you submit the form, `Request.Form["title"]` gets the value of the `title` text box.</span></span> <span data-ttu-id="cba0a-223">No es obvio, pero un cuadro de texto vacío no es NULL. simplemente tiene una cadena vacía.</span><span class="sxs-lookup"><span data-stu-id="cba0a-223">It's not obvious, but an empty text box is not null; it just has an empty string in it.</span></span> <span data-ttu-id="cba0a-224">Por tanto, cuando el código se ejecuta en respuesta al clic del botón, `Request.Form["title"]` tiene una cadena vacía.</span><span class="sxs-lookup"><span data-stu-id="cba0a-224">So when the code runs in response to the button click, `Request.Form["title"]` has an empty string in it.</span></span>
> 
> <span data-ttu-id="cba0a-225">¿Por qué es importante esta distinción?</span><span class="sxs-lookup"><span data-stu-id="cba0a-225">Why is this distinction important?</span></span> <span data-ttu-id="cba0a-226">Cuando creó la tabla *películas* , dijo explícitamente que ninguno de los campos podría ser null.</span><span class="sxs-lookup"><span data-stu-id="cba0a-226">When you created the *Movies* table, you explicitly said that none of the fields could be null.</span></span> <span data-ttu-id="cba0a-227">Pero aquí tiene un formulario de entrada para nuevas películas y está saliendo de campos en blanco.</span><span class="sxs-lookup"><span data-stu-id="cba0a-227">But here you have an entry form for new movies, and you're leaving fields blank.</span></span> <span data-ttu-id="cba0a-228">Cabría esperar razonablemente que la base de datos se quejase al intentar guardar nuevas películas que no tenían valores para el género o el año.</span><span class="sxs-lookup"><span data-stu-id="cba0a-228">You would reasonably expect the database to complain when you tried to save new movies that didn't have values for genre or year.</span></span> <span data-ttu-id="cba0a-229">Pero este es el punto &mdash; incluso si deja en blanco esos cuadros de texto, los valores no son NULL; son cadenas vacías.</span><span class="sxs-lookup"><span data-stu-id="cba0a-229">But that's the point &mdash; even if you leave those text boxes blank, the values aren't null; they're empty strings.</span></span> <span data-ttu-id="cba0a-230">Como resultado, puede guardar nuevas películas en la base de datos con estas columnas vacías &mdash; pero no NULL.</span><span class="sxs-lookup"><span data-stu-id="cba0a-230">As a result, you're able to save new movies to the database with these columns empty &mdash; but not null!</span></span> <span data-ttu-id="cba0a-231">valores &mdash;.</span><span class="sxs-lookup"><span data-stu-id="cba0a-231">&mdash; values.</span></span> <span data-ttu-id="cba0a-232">Por lo tanto, debe asegurarse de que los usuarios no envían una cadena vacía, lo que puede hacer mediante la validación de la entrada del usuario.</span><span class="sxs-lookup"><span data-stu-id="cba0a-232">Therefore, you have to make sure that users don't submit an empty string, which you can do by validating the user's input.</span></span>

### <a name="the-validation-helper"></a><span data-ttu-id="cba0a-233">La aplicación auxiliar de validación</span><span class="sxs-lookup"><span data-stu-id="cba0a-233">The Validation Helper</span></span>

<span data-ttu-id="cba0a-234">ASP.NET Web Pages incluye una aplicación auxiliar &mdash; la aplicación auxiliar `Validation` &mdash; que puede usar para asegurarse de que los usuarios escriban los datos que cumplan los requisitos.</span><span class="sxs-lookup"><span data-stu-id="cba0a-234">ASP.NET Web Pages includes a helper &mdash; the `Validation` helper &mdash; that you can use to make sure that users enter data that meets your requirements.</span></span> <span data-ttu-id="cba0a-235">La aplicación auxiliar `Validation` es una de las aplicaciones auxiliares integradas en ASP.NET Web Pages, por lo que no tiene que instalarla como un paquete mediante NuGet, la forma en que instaló la aplicación auxiliar Gravatar en un tutorial anterior.</span><span class="sxs-lookup"><span data-stu-id="cba0a-235">The `Validation` helper is one of the helpers that's built in to ASP.NET Web Pages, so you don't have to install it as a package by using NuGet, the way you installed the Gravatar helper in an earlier tutorial.</span></span>

<span data-ttu-id="cba0a-236">Para validar la entrada del usuario, haga lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="cba0a-236">To validate the user's input, you'll do the following:</span></span>

- <span data-ttu-id="cba0a-237">Use el código para especificar que desea requerir valores en los cuadros de texto de la página.</span><span class="sxs-lookup"><span data-stu-id="cba0a-237">Use code to specify that you want to require values in the text boxes on the page.</span></span>
- <span data-ttu-id="cba0a-238">Coloque una prueba en el código para que la información de la película se agregue a la base de datos solo si todo se valida correctamente.</span><span class="sxs-lookup"><span data-stu-id="cba0a-238">Put a test into the code so that the movie information is added to the database only if everything validates properly.</span></span>
- <span data-ttu-id="cba0a-239">Agregue código en el marcado para mostrar los mensajes de error.</span><span class="sxs-lookup"><span data-stu-id="cba0a-239">Add code into the markup to display error messages.</span></span>

<span data-ttu-id="cba0a-240">En el bloque de código de la página *AddMovie* , haga clic en la parte superior delante de las declaraciones de variables y agregue el código siguiente:</span><span class="sxs-lookup"><span data-stu-id="cba0a-240">In the code block in the *AddMovie* page, right up at the top before the variable declarations, add the following code:</span></span>

[!code-csharp[Main](entering-data/samples/sample7.cs)]

<span data-ttu-id="cba0a-241">Llame a `Validation.RequireField` una vez por cada campo (elemento`<input>`) en el que desee solicitar una entrada.</span><span class="sxs-lookup"><span data-stu-id="cba0a-241">You call `Validation.RequireField` once for each field (`<input>` element) where you want to require an entry.</span></span> <span data-ttu-id="cba0a-242">También puede Agregar un mensaje de error personalizado para cada llamada, como se ve aquí.</span><span class="sxs-lookup"><span data-stu-id="cba0a-242">You can also add a custom error message for each call, like you see here.</span></span> <span data-ttu-id="cba0a-243">(Hemos variado los mensajes para mostrar que puede colocar todo lo que le guste).</span><span class="sxs-lookup"><span data-stu-id="cba0a-243">(We varied the messages just to show that you can put anything you like there.)</span></span>

<span data-ttu-id="cba0a-244">Si hay algún problema, quiere evitar que la nueva información de la película se inserte en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="cba0a-244">If there's a problem, you want to prevent the new movie information from being inserted into the database.</span></span> <span data-ttu-id="cba0a-245">En el bloque `if(IsPost)`, use `&&` (AND lógico) para agregar otra condición que pruebe `Validation.IsValid()`.</span><span class="sxs-lookup"><span data-stu-id="cba0a-245">In the `if(IsPost)` block, use `&&` (logical AND) to add another condition that tests `Validation.IsValid()`.</span></span> <span data-ttu-id="cba0a-246">Cuando haya terminado, todo el bloque de `if(IsPost)` se parecerá a este código:</span><span class="sxs-lookup"><span data-stu-id="cba0a-246">When you're done, the whole `if(IsPost)` block looks like this code:</span></span>

[!code-csharp[Main](entering-data/samples/sample8.cs)]

<span data-ttu-id="cba0a-247">Si hay un error de validación con cualquiera de los campos que registró mediante la aplicación auxiliar `Validation`, el método `Validation.IsValid` devuelve false.</span><span class="sxs-lookup"><span data-stu-id="cba0a-247">If there's a validation error with any of the fields that you registered by using the `Validation` helper, the `Validation.IsValid` method returns false.</span></span> <span data-ttu-id="cba0a-248">En ese caso, no se ejecutará ninguno de los códigos de ese bloque, por lo que no se insertará ninguna entrada de película no válida en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="cba0a-248">And in that case, none of the code in that block will run, so no invalid movie entries will be inserted into the database.</span></span> <span data-ttu-id="cba0a-249">Y, por supuesto, no se le redirigirá a la página *películas* .</span><span class="sxs-lookup"><span data-stu-id="cba0a-249">And of course you're not redirected to the *Movies* page.</span></span>

<span data-ttu-id="cba0a-250">El bloque de código completo, incluido el código de validación, ahora es similar a este ejemplo:</span><span class="sxs-lookup"><span data-stu-id="cba0a-250">The complete code block, including the validation code, now looks like this example:</span></span>

[!code-cshtml[Main](entering-data/samples/sample9.cshtml?highlight=10)]

## <a name="displaying-validation-errors"></a><span data-ttu-id="cba0a-251">Mostrar errores de validación</span><span class="sxs-lookup"><span data-stu-id="cba0a-251">Displaying Validation Errors</span></span>

<span data-ttu-id="cba0a-252">El último paso es mostrar los mensajes de error.</span><span class="sxs-lookup"><span data-stu-id="cba0a-252">The last step is to display any error messages.</span></span> <span data-ttu-id="cba0a-253">Puede mostrar mensajes individuales para cada error de validación, o puede mostrar un resumen o ambos.</span><span class="sxs-lookup"><span data-stu-id="cba0a-253">You can display individual messages for each validation error, or you can display a summary, or both.</span></span> <span data-ttu-id="cba0a-254">En este tutorial, hará lo mismo para que pueda ver cómo funciona.</span><span class="sxs-lookup"><span data-stu-id="cba0a-254">For this tutorial, you'll do both so that you can see how it works.</span></span>

<span data-ttu-id="cba0a-255">Junto a cada `<input>` elemento que está validando, llame al método `Html.ValidationMessage` y pásele el nombre del elemento `<input>` que está validando.</span><span class="sxs-lookup"><span data-stu-id="cba0a-255">Next to each `<input>` element that you're validating, call the `Html.ValidationMessage` method and pass it the name of the `<input>` element you're validating.</span></span> <span data-ttu-id="cba0a-256">Coloque el método de `Html.ValidationMessage` justo donde desee que aparezca el mensaje de error.</span><span class="sxs-lookup"><span data-stu-id="cba0a-256">You put the `Html.ValidationMessage` method right where you want the error message to appear.</span></span> <span data-ttu-id="cba0a-257">Cuando se ejecuta la página, el método `Html.ValidationMessage` representa un elemento `<span>` en el que irá el error de validación.</span><span class="sxs-lookup"><span data-stu-id="cba0a-257">When the page runs, the `Html.ValidationMessage` method renders a `<span>` element where the validation error will go.</span></span> <span data-ttu-id="cba0a-258">(Si no hay ningún error, el elemento `<span>` se representa, pero no hay texto en él).</span><span class="sxs-lookup"><span data-stu-id="cba0a-258">(If there's no error, the `<span>` element is rendered, but there's no text in it.)</span></span>

<span data-ttu-id="cba0a-259">Cambie el marcado en la página para que incluya un `Html.ValidationMessage` método para cada uno de los tres elementos `<input>` de la página, como en este ejemplo:</span><span class="sxs-lookup"><span data-stu-id="cba0a-259">Change the markup in the page so that it includes an `Html.ValidationMessage` method for each of the three `<input>` elements on the page, like this example:</span></span>

[!code-cshtml[Main](entering-data/samples/sample10.cshtml?highlight=3,8,13)]

<span data-ttu-id="cba0a-260">Para ver cómo funciona el Resumen, agregue también el marcado y el código siguientes justo después del elemento `<h1>Add a Movie</h1>` en la página:</span><span class="sxs-lookup"><span data-stu-id="cba0a-260">To see how the summary works, also add the following markup and code right after the `<h1>Add a Movie</h1>` element on the page:</span></span>

[!code-cshtml[Main](entering-data/samples/sample11.cshtml)]

<span data-ttu-id="cba0a-261">De forma predeterminada, el método `Html.ValidationSummary` muestra todos los mensajes de validación de una lista (un elemento `<ul>` que se encuentra dentro de un elemento `<div>`).</span><span class="sxs-lookup"><span data-stu-id="cba0a-261">By default, the `Html.ValidationSummary` method displays all the validation messages in a list (a `<ul>` element that's inside a `<div>` element).</span></span> <span data-ttu-id="cba0a-262">Al igual que con el método `Html.ValidationMessage`, el marcado para el Resumen de validación siempre se representa; Si no hay ningún error, no se representa ningún elemento de la lista.</span><span class="sxs-lookup"><span data-stu-id="cba0a-262">As with the `Html.ValidationMessage` method, the markup for the validation summary is always rendered; if there are no errors, no list items are rendered.</span></span>

<span data-ttu-id="cba0a-263">El resumen puede ser una forma alternativa de mostrar los mensajes de validación en lugar de utilizar el método `Html.ValidationMessage` para mostrar cada error específico del campo.</span><span class="sxs-lookup"><span data-stu-id="cba0a-263">The summary can be an alternative way to display validation messages instead of by using the `Html.ValidationMessage` method to display each field-specific error.</span></span> <span data-ttu-id="cba0a-264">También puede usar un resumen y los detalles.</span><span class="sxs-lookup"><span data-stu-id="cba0a-264">Or you can use both a summary and the details.</span></span> <span data-ttu-id="cba0a-265">O bien, puede usar el método `Html.ValidationSummary` para mostrar un error genérico y, a continuación, utilizar llamadas de `Html.ValidationMessage` individuales para mostrar los detalles.</span><span class="sxs-lookup"><span data-stu-id="cba0a-265">Or you can use the `Html.ValidationSummary` method to display a generic error and then use individual `Html.ValidationMessage` calls to display details.</span></span>

<span data-ttu-id="cba0a-266">La página completa ahora es similar a la de este ejemplo:</span><span class="sxs-lookup"><span data-stu-id="cba0a-266">The complete page now looks like this example:</span></span>

[!code-cshtml[Main](entering-data/samples/sample12.cshtml)]

<span data-ttu-id="cba0a-267">Ya está.</span><span class="sxs-lookup"><span data-stu-id="cba0a-267">That's it.</span></span> <span data-ttu-id="cba0a-268">Ahora puede probar la página agregando una película pero saliendo de uno o varios de los campos.</span><span class="sxs-lookup"><span data-stu-id="cba0a-268">You can now test the page by adding a movie but leaving out one or more of the fields.</span></span> <span data-ttu-id="cba0a-269">Cuando lo haga, verá la siguiente pantalla de error:</span><span class="sxs-lookup"><span data-stu-id="cba0a-269">When you do, you see the following error display:</span></span>

![Página agregar película que muestra mensajes de error de validación](entering-data/_static/image5.png)

## <a name="styling-the-validation-error-messages"></a><span data-ttu-id="cba0a-271">Aplicar estilo a los mensajes de error de validación</span><span class="sxs-lookup"><span data-stu-id="cba0a-271">Styling the Validation Error Messages</span></span>

<span data-ttu-id="cba0a-272">Puede ver que hay mensajes de error, pero que realmente no destacan bien.</span><span class="sxs-lookup"><span data-stu-id="cba0a-272">You can see that there are error messages, but they don't really stand out very well.</span></span> <span data-ttu-id="cba0a-273">Sin embargo, hay una manera sencilla de aplicar estilo a los mensajes de error.</span><span class="sxs-lookup"><span data-stu-id="cba0a-273">There's an easy way to style the error messages, though.</span></span>

<span data-ttu-id="cba0a-274">Para aplicar estilo a los mensajes de error individuales que se muestran en `Html.ValidationMessage`, cree una clase de estilo CSS denominada `field-validation-error`.</span><span class="sxs-lookup"><span data-stu-id="cba0a-274">To style the individual error messages that are displayed by `Html.ValidationMessage`, create a CSS style class named `field-validation-error`.</span></span> <span data-ttu-id="cba0a-275">Para definir el aspecto del Resumen de validación, cree una clase de estilo CSS denominada `validation-summary-errors`.</span><span class="sxs-lookup"><span data-stu-id="cba0a-275">To define the look for the validation summary, create a CSS style class named `validation-summary-errors`.</span></span>

<span data-ttu-id="cba0a-276">Para ver cómo funciona esta técnica, agregue un elemento `<style>` dentro de la sección `<head>` de la página.</span><span class="sxs-lookup"><span data-stu-id="cba0a-276">To see how this technique works, add a `<style>` element inside the `<head>` section of the page.</span></span> <span data-ttu-id="cba0a-277">A continuación, defina las clases de estilo denominadas `field-validation-error` y `validation-summary-errors` que contengan las siguientes reglas:</span><span class="sxs-lookup"><span data-stu-id="cba0a-277">Then define style classes named `field-validation-error` and `validation-summary-errors` that contain the following rules:</span></span>

[!code-cshtml[Main](entering-data/samples/sample13.cshtml?highlight=4-17)]

<span data-ttu-id="cba0a-278">Normalmente, la información de estilo podría incluirse en un archivo *. CSS* independiente, pero para simplificar puede colocarlos en la página por ahora.</span><span class="sxs-lookup"><span data-stu-id="cba0a-278">Normally you'd probably put style information into a separate *.css* file, but for simplicity you can put them in the page for now.</span></span> <span data-ttu-id="cba0a-279">(Más adelante en este tutorial se establecerán las reglas de CSS en un archivo *. CSS* independiente).</span><span class="sxs-lookup"><span data-stu-id="cba0a-279">(Later in this tutorial set, you'll move the CSS rules to a separate *.css* file.)</span></span>

<span data-ttu-id="cba0a-280">Si hay un error de validación, el método `Html.ValidationMessage` representa un elemento `<span>` que incluye `class="field-validation-error"`.</span><span class="sxs-lookup"><span data-stu-id="cba0a-280">If there's a validation error, the `Html.ValidationMessage` method renders a `<span>` element that includes `class="field-validation-error"`.</span></span> <span data-ttu-id="cba0a-281">Al agregar una definición de estilo para esa clase, puede configurar el aspecto del mensaje.</span><span class="sxs-lookup"><span data-stu-id="cba0a-281">By adding a style definition for that class, you can configure what the message looks like.</span></span> <span data-ttu-id="cba0a-282">Si hay errores, el método `ValidationSummary` también representa dinámicamente el atributo `class="validation-summary-errors"`.</span><span class="sxs-lookup"><span data-stu-id="cba0a-282">If there are errors, the `ValidationSummary` method likewise dynamically renders the attribute `class="validation-summary-errors"`.</span></span>

<span data-ttu-id="cba0a-283">Vuelva a ejecutar la página y deje deliberadamente un par de campos.</span><span class="sxs-lookup"><span data-stu-id="cba0a-283">Run the page again and deliberately leave out a couple of the fields.</span></span> <span data-ttu-id="cba0a-284">Ahora, los errores son más evidentes.</span><span class="sxs-lookup"><span data-stu-id="cba0a-284">The errors are now more noticeable.</span></span> <span data-ttu-id="cba0a-285">(De hecho, son overdone, pero eso es solo para mostrar lo que puede hacer).</span><span class="sxs-lookup"><span data-stu-id="cba0a-285">(In fact, they're overdone, but that's just to show what you can do.)</span></span>

![Página agregar película que muestra los errores de validación con estilo](entering-data/_static/image6.png)

## <a name="adding-a-link-to-the-movies-page"></a><span data-ttu-id="cba0a-287">Agregar un vínculo a la página películas</span><span class="sxs-lookup"><span data-stu-id="cba0a-287">Adding a Link to the Movies Page</span></span>

<span data-ttu-id="cba0a-288">Un paso final es hacer que sea conveniente llegar a la página de *AddMovie* desde la lista de películas original.</span><span class="sxs-lookup"><span data-stu-id="cba0a-288">One final step is to make it convenient to get to the *AddMovie* page from the original movie listing.</span></span>

<span data-ttu-id="cba0a-289">Vuelva a abrir la página *películas* .</span><span class="sxs-lookup"><span data-stu-id="cba0a-289">Open the *Movies* page again.</span></span> <span data-ttu-id="cba0a-290">Después de la etiqueta de cierre `</div>` que sigue a la aplicación auxiliar de `WebGrid`, agregue el siguiente marcado:</span><span class="sxs-lookup"><span data-stu-id="cba0a-290">After the closing `</div>` tag that follows the `WebGrid` helper, add the following markup:</span></span>

[!code-cshtml[Main](entering-data/samples/sample14.cshtml)]

<span data-ttu-id="cba0a-291">Como vio antes, ASP.NET interpreta el operador `~` como la raíz del sitio Web.</span><span class="sxs-lookup"><span data-stu-id="cba0a-291">As you saw before, ASP.NET interprets the `~` operator as the root of the website.</span></span> <span data-ttu-id="cba0a-292">No tiene que utilizar el operador `~`; puede usar el marcado `<a href="./AddMovie">Add a movie</a>` o alguna otra forma de definir la ruta de acceso que HTML entiende.</span><span class="sxs-lookup"><span data-stu-id="cba0a-292">You don't have to use the `~` operator; you could use the markup `<a href="./AddMovie">Add a movie</a>` or some other way to define the path that HTML understands.</span></span> <span data-ttu-id="cba0a-293">Pero el operador `~` es un buen enfoque general cuando se crean vínculos para las páginas de Razor, ya que hace que el sitio sea más flexible: si se mueve la página actual a una subcarpeta, el vínculo seguirá a la página *AddMovie* .</span><span class="sxs-lookup"><span data-stu-id="cba0a-293">But the `~` operator is a good general approach when you create links for Razor pages, because it makes the site more flexible — if you move the current page to a subfolder, the link will still go to the *AddMovie* page.</span></span> <span data-ttu-id="cba0a-294">(Recuerde que el operador de `~` solo funciona en páginas *. cshtml* .</span><span class="sxs-lookup"><span data-stu-id="cba0a-294">(Remember that the `~` operator only works in *.cshtml* pages.</span></span> <span data-ttu-id="cba0a-295">ASP.NET lo entiende, pero no es HTML estándar).</span><span class="sxs-lookup"><span data-stu-id="cba0a-295">ASP.NET understands it, but it's not standard HTML.)</span></span>

<span data-ttu-id="cba0a-296">Cuando haya terminado, ejecute la página *películas* .</span><span class="sxs-lookup"><span data-stu-id="cba0a-296">When you're done, run the *Movies* page.</span></span> <span data-ttu-id="cba0a-297">Tendrá un aspecto similar al de esta página:</span><span class="sxs-lookup"><span data-stu-id="cba0a-297">It will look like this page:</span></span>

![Página de películas con vínculo a la página "agregar películas"](entering-data/_static/image7.png)

<span data-ttu-id="cba0a-299">Haga clic en el vínculo **Agregar una película** para asegurarse de que va a la página *AddMovie* .</span><span class="sxs-lookup"><span data-stu-id="cba0a-299">Click the **Add a movie** link to make sure that it goes to the *AddMovie* page.</span></span>

## <a name="coming-up-next"></a><span data-ttu-id="cba0a-300">Próxima</span><span class="sxs-lookup"><span data-stu-id="cba0a-300">Coming Up Next</span></span>

<span data-ttu-id="cba0a-301">En el siguiente tutorial, obtendrá información sobre cómo permitir que los usuarios editen los datos que ya están en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="cba0a-301">In the next tutorial, you'll learn how to let users edit data that's already in the database.</span></span>

## <a name="complete-listing-for-addmovie-page"></a><span data-ttu-id="cba0a-302">Lista completa de la página de AddMovie</span><span class="sxs-lookup"><span data-stu-id="cba0a-302">Complete Listing for AddMovie Page</span></span>

[!code-cshtml[Main](entering-data/samples/sample15.cshtml)]

## <a name="additional-resources"></a><span data-ttu-id="cba0a-303">Recursos adicionales</span><span class="sxs-lookup"><span data-stu-id="cba0a-303">Additional Resources</span></span>

- [<span data-ttu-id="cba0a-304">Introducción a la programación web de ASP.NET mediante la sintaxis Razor</span><span class="sxs-lookup"><span data-stu-id="cba0a-304">Introduction to ASP.NET Web Programming Using the Razor Syntax</span></span>](https://go.microsoft.com/fwlink/?LinkID=202890)
- <span data-ttu-id="cba0a-305">[Instrucción SQL INSERT INTO](http://www.w3schools.com/sql/sql_insert.asp) en el sitio de w3schools</span><span class="sxs-lookup"><span data-stu-id="cba0a-305">[SQL INSERT INTO Statement](http://www.w3schools.com/sql/sql_insert.asp) on the W3Schools site</span></span>
- <span data-ttu-id="cba0a-306">[Validación de la entrada del usuario en sitios de ASP.NET Web pages](https://go.microsoft.com/fwlink/?LinkId=253002).</span><span class="sxs-lookup"><span data-stu-id="cba0a-306">[Validating User Input in ASP.NET Web Pages Sites](https://go.microsoft.com/fwlink/?LinkId=253002).</span></span> <span data-ttu-id="cba0a-307">Más información sobre cómo trabajar con la aplicación auxiliar de `Validation`.</span><span class="sxs-lookup"><span data-stu-id="cba0a-307">More information about working with the `Validation` helper.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="cba0a-308">[Anterior](form-basics.md)
> [Siguiente](updating-data.md)</span><span class="sxs-lookup"><span data-stu-id="cba0a-308">[Previous](form-basics.md)
[Next](updating-data.md)</span></span>
