---
uid: web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-6
title: Introducción a Entity Framework 4.0 Database First y 4 de ASP.NET Web Forms, parte 6 | Microsoft Docs
author: tdykstra
description: La aplicación web de Contoso University muestra cómo crear aplicaciones de formularios Web Forms de ASP.NET mediante Entity Framework. La aplicación de ejemplo es...
ms.author: riande
ms.date: 12/03/2010
ms.assetid: 994a5496-c648-4830-b03c-55bb43f325d2
msc.legacyurl: /web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-6
msc.type: authoredcontent
ms.openlocfilehash: 8bfbe74f90eb03ea9aab7610842ef2578e80d113
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 05/06/2019
ms.locfileid: "65133282"
---
# <a name="getting-started-with-entity-framework-40-database-first-and-aspnet-4-web-forms---part-6"></a><span data-ttu-id="22ba3-104">Introducción a Entity Framework 4.0 Database First y ASP.NET 4 Web Forms, parte 6</span><span class="sxs-lookup"><span data-stu-id="22ba3-104">Getting Started with Entity Framework 4.0 Database First and ASP.NET 4 Web Forms - Part 6</span></span>

<span data-ttu-id="22ba3-105">por [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="22ba3-105">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

> <span data-ttu-id="22ba3-106">La aplicación web de Contoso University muestra cómo crear aplicaciones de formularios Web Forms de ASP.NET con el Entity Framework 4.0 y Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="22ba3-106">The Contoso University sample web application demonstrates how to create ASP.NET Web Forms applications using the Entity Framework 4.0 and Visual Studio 2010.</span></span> <span data-ttu-id="22ba3-107">Para obtener información acerca de la serie de tutoriales, vea [el primer tutorial de la serie](the-entity-framework-and-aspnet-getting-started-part-1.md)</span><span class="sxs-lookup"><span data-stu-id="22ba3-107">For information about the tutorial series, see [the first tutorial in the series](the-entity-framework-and-aspnet-getting-started-part-1.md)</span></span>

## <a name="implementing-table-per-hierarchy-inheritance"></a><span data-ttu-id="22ba3-108">Implementar la herencia de tabla por jerarquía</span><span class="sxs-lookup"><span data-stu-id="22ba3-108">Implementing Table-per-Hierarchy Inheritance</span></span>

<span data-ttu-id="22ba3-109">En el tutorial anterior ha trabajado con los datos relacionados mediante la adición y eliminación de relaciones y agregando una nueva entidad que tenían una relación a una entidad existente.</span><span class="sxs-lookup"><span data-stu-id="22ba3-109">In the previous tutorial you worked with related data by adding and deleting relationships and by adding a new entity that had a relationship to an existing entity.</span></span> <span data-ttu-id="22ba3-110">En este tutorial se muestra cómo implementar la herencia en el modelo de datos.</span><span class="sxs-lookup"><span data-stu-id="22ba3-110">This tutorial will show you how to implement inheritance in the data model.</span></span>

<span data-ttu-id="22ba3-111">En la programación orientada a objetos, puede usar la herencia para que sea más fácil trabajar con las clases relacionadas.</span><span class="sxs-lookup"><span data-stu-id="22ba3-111">In object-oriented programming, you can use inheritance to make it easier to work with related classes.</span></span> <span data-ttu-id="22ba3-112">Por ejemplo, podría crear `Instructor` y `Student` clases que derivan de un `Person` clase base.</span><span class="sxs-lookup"><span data-stu-id="22ba3-112">For example, you could create `Instructor` and `Student` classes that derive from a `Person` base class.</span></span> <span data-ttu-id="22ba3-113">Puede crear los mismos tipos de estructuras de herencia entre las entidades de Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="22ba3-113">You can create the same kinds of inheritance structures among entities in the Entity Framework.</span></span>

<span data-ttu-id="22ba3-114">En esta parte del tutorial, no creará las nuevas páginas web.</span><span class="sxs-lookup"><span data-stu-id="22ba3-114">In this part of the tutorial, you won't create any new web pages.</span></span> <span data-ttu-id="22ba3-115">En su lugar, deberá agregar entidades derivadas para el modelo de datos y modificar las páginas existentes para usar las nuevas entidades.</span><span class="sxs-lookup"><span data-stu-id="22ba3-115">Instead, you'll add derived entities to the data model and modify existing pages to use the new entities.</span></span>

## <a name="table-per-hierarchy-versus-table-per-type-inheritance"></a><span data-ttu-id="22ba3-116">Tabla por jerarquía en comparación con la herencia de tabla por tipo</span><span class="sxs-lookup"><span data-stu-id="22ba3-116">Table-per-Hierarchy versus Table-per-Type Inheritance</span></span>

<span data-ttu-id="22ba3-117">Una base de datos puede almacenar información sobre los objetos relacionados en una tabla o en varias tablas.</span><span class="sxs-lookup"><span data-stu-id="22ba3-117">A database can store information about related objects in one table or in multiple tables.</span></span> <span data-ttu-id="22ba3-118">Por ejemplo, en el `School` base de datos, el `Person` tabla incluye información acerca de los estudiantes y profesores en una sola tabla.</span><span class="sxs-lookup"><span data-stu-id="22ba3-118">For example, in the `School` database, the `Person` table includes information about both students and instructors in a single table.</span></span> <span data-ttu-id="22ba3-119">Algunas de las columnas se aplican solo a los instructores (`HireDate`), otras solo a los alumnos (`EnrollmentDate`) y otros con ambos (`LastName`, `FirstName`).</span><span class="sxs-lookup"><span data-stu-id="22ba3-119">Some of the columns apply only to instructors (`HireDate`), some only to students (`EnrollmentDate`), and some to both (`LastName`, `FirstName`).</span></span>

<span data-ttu-id="22ba3-120">[![image11](the-entity-framework-and-aspnet-getting-started-part-6/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="22ba3-120">[![image11](the-entity-framework-and-aspnet-getting-started-part-6/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image1.png)</span></span>

<span data-ttu-id="22ba3-121">Puede configurar Entity Framework para crear `Instructor` y `Student` entidades que heredan de la `Person` entidad.</span><span class="sxs-lookup"><span data-stu-id="22ba3-121">You can configure the Entity Framework to create `Instructor` and `Student` entities that inherit from the `Person` entity.</span></span> <span data-ttu-id="22ba3-122">Este patrón de generar una estructura de herencia de entidad de una tabla de base de datos única se denomina *tabla por jerarquía* herencia (TPH).</span><span class="sxs-lookup"><span data-stu-id="22ba3-122">This pattern of generating an entity inheritance structure from a single database table is called *table-per-hierarchy* (TPH) inheritance.</span></span>

<span data-ttu-id="22ba3-123">Para los cursos, el `School` base de datos utiliza un patrón diferente.</span><span class="sxs-lookup"><span data-stu-id="22ba3-123">For courses, the `School` database uses a different pattern.</span></span> <span data-ttu-id="22ba3-124">Cursos en línea y los cursos presenciales se almacenan en tablas independientes, cada uno de los cuales tiene una clave externa que apunta a la `Course` tabla.</span><span class="sxs-lookup"><span data-stu-id="22ba3-124">Online courses and onsite courses are stored in separate tables, each of which has a foreign key that points to the `Course` table.</span></span> <span data-ttu-id="22ba3-125">Información común a ambos tipos de curso se almacena únicamente en el `Course` tabla.</span><span class="sxs-lookup"><span data-stu-id="22ba3-125">Information common to both course types is stored only in the `Course` table.</span></span>

<span data-ttu-id="22ba3-126">[![image12](the-entity-framework-and-aspnet-getting-started-part-6/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="22ba3-126">[![image12](the-entity-framework-and-aspnet-getting-started-part-6/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image3.png)</span></span>

<span data-ttu-id="22ba3-127">Puede configurar el modelo de datos de Entity Framework para que `OnlineCourse` y `OnsiteCourse` entidades que heredan de la `Course` entidad.</span><span class="sxs-lookup"><span data-stu-id="22ba3-127">You can configure the Entity Framework data model so that `OnlineCourse` and `OnsiteCourse` entities inherit from the `Course` entity.</span></span> <span data-ttu-id="22ba3-128">Este patrón de generar una estructura de herencia de entidad en tablas independientes para cada tipo, con cada tabla independiente haciendo referencia a una tabla que almacena datos comunes a todos los tipos, se denomina *tabla por tipo* herencia (TPT).</span><span class="sxs-lookup"><span data-stu-id="22ba3-128">This pattern of generating an entity inheritance structure from separate tables for each type, with each separate table referring back to a table that stores data common to all types, is called *table per type* (TPT) inheritance.</span></span>

<span data-ttu-id="22ba3-129">Patrones de herencia de TPH acostumbran un mejor rendimiento en Entity Framework que patrones de herencia de TPT, porque estos pueden provocar consultas de combinaciones complejas.</span><span class="sxs-lookup"><span data-stu-id="22ba3-129">TPH inheritance patterns generally deliver better performance in the Entity Framework than TPT inheritance patterns, because TPT patterns can result in complex join queries.</span></span> <span data-ttu-id="22ba3-130">Este tutorial muestra cómo implementar la herencia de TPH.</span><span class="sxs-lookup"><span data-stu-id="22ba3-130">This walkthrough demonstrates how to implement TPH inheritance.</span></span> <span data-ttu-id="22ba3-131">Hágalo mediante los pasos siguientes:</span><span class="sxs-lookup"><span data-stu-id="22ba3-131">You'll do that by performing the following steps:</span></span>

- <span data-ttu-id="22ba3-132">Crear `Instructor` y `Student` tipos de entidad que se derivan de `Person`.</span><span class="sxs-lookup"><span data-stu-id="22ba3-132">Create `Instructor` and `Student` entity types that derive from `Person`.</span></span>
- <span data-ttu-id="22ba3-133">Las propiedades de movimiento que pertenecen a las entidades derivadas de la `Person` entidades a las entidades derivadas.</span><span class="sxs-lookup"><span data-stu-id="22ba3-133">Move properties that pertain to the derived entities from the `Person` entity to the derived entities.</span></span>
- <span data-ttu-id="22ba3-134">Establecer restricciones sobre las propiedades de los tipos derivados.</span><span class="sxs-lookup"><span data-stu-id="22ba3-134">Set constraints on properties in the derived types.</span></span>
- <span data-ttu-id="22ba3-135">Realizar el `Person` entidad una entidad abstracta.</span><span class="sxs-lookup"><span data-stu-id="22ba3-135">Make the `Person` entity an abstract entity.</span></span>
- <span data-ttu-id="22ba3-136">Derivado de mapa de cada entidad a la `Person` tabla con una condición que especifica cómo se determina si un `Person` fila representa el tipo derivado.</span><span class="sxs-lookup"><span data-stu-id="22ba3-136">Map each derived entity to the `Person` table with a condition that specifies how to determine whether a `Person` row represents that derived type.</span></span>

## <a name="adding-instructor-and-student-entities"></a><span data-ttu-id="22ba3-137">Adición de un Instructor y Student entidades</span><span class="sxs-lookup"><span data-stu-id="22ba3-137">Adding Instructor and Student Entities</span></span>

<span data-ttu-id="22ba3-138">Abra el <em>SchoolModel.edmx</em> de archivos, haga doble clic en el diseñador, seleccione un área sin ocupar <strong>agregar</strong>, a continuación, seleccione <strong>entidad</strong><em>.</em></span><span class="sxs-lookup"><span data-stu-id="22ba3-138">Open the <em>SchoolModel.edmx</em> file, right-click an unoccupied area in the designer, select <strong>Add</strong>, then select <strong>Entity</strong><em>.</em></span></span>

<span data-ttu-id="22ba3-139">[![image01](the-entity-framework-and-aspnet-getting-started-part-6/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="22ba3-139">[![image01](the-entity-framework-and-aspnet-getting-started-part-6/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image5.png)</span></span>

<span data-ttu-id="22ba3-140">En el **Agregar entidad** cuadro de diálogo, el nombre de la entidad `Instructor` y establezca su **tipo Base** opción `Person`.</span><span class="sxs-lookup"><span data-stu-id="22ba3-140">In the **Add Entity** dialog box, name the entity `Instructor` and set its **Base type** option to `Person`.</span></span>

<span data-ttu-id="22ba3-141">[![image02](the-entity-framework-and-aspnet-getting-started-part-6/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="22ba3-141">[![image02](the-entity-framework-and-aspnet-getting-started-part-6/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image7.png)</span></span>

<span data-ttu-id="22ba3-142">Haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="22ba3-142">Click **OK**.</span></span> <span data-ttu-id="22ba3-143">El diseñador crea un `Instructor` entidad que se deriva el `Person` entidad.</span><span class="sxs-lookup"><span data-stu-id="22ba3-143">The designer creates an `Instructor` entity that derives from the `Person` entity.</span></span> <span data-ttu-id="22ba3-144">La nueva entidad aún no tiene ninguna propiedad.</span><span class="sxs-lookup"><span data-stu-id="22ba3-144">The new entity does not yet have any properties.</span></span>

<span data-ttu-id="22ba3-145">[![image03](the-entity-framework-and-aspnet-getting-started-part-6/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="22ba3-145">[![image03](the-entity-framework-and-aspnet-getting-started-part-6/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image9.png)</span></span>

<span data-ttu-id="22ba3-146">Repita el procedimiento para crear un `Student` entidad que también se deriva de `Person`.</span><span class="sxs-lookup"><span data-stu-id="22ba3-146">Repeat the procedure to create a `Student` entity that also derives from `Person`.</span></span>

<span data-ttu-id="22ba3-147">Solo los instructores tienen fechas de contratación, por lo que deberá mover esa propiedad de la `Person` entidad a la `Instructor` entidad.</span><span class="sxs-lookup"><span data-stu-id="22ba3-147">Only instructors have hire dates, so you need to move that property from the `Person` entity to the `Instructor` entity.</span></span> <span data-ttu-id="22ba3-148">En el `Person` entidad, haga clic en el `HireDate` propiedad y haga clic en **cortar**.</span><span class="sxs-lookup"><span data-stu-id="22ba3-148">In the `Person` entity, right-click the `HireDate` property and click **Cut**.</span></span> <span data-ttu-id="22ba3-149">A continuación, haga clic en **propiedades** en el `Instructor` entidad y haga clic en **pegar**.</span><span class="sxs-lookup"><span data-stu-id="22ba3-149">Then right-click **Properties** in the `Instructor` entity and click **Paste**.</span></span>

<span data-ttu-id="22ba3-150">[![image04](the-entity-framework-and-aspnet-getting-started-part-6/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="22ba3-150">[![image04](the-entity-framework-and-aspnet-getting-started-part-6/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image11.png)</span></span>

<span data-ttu-id="22ba3-151">La fecha de contratación de un `Instructor` entidad no puede ser null.</span><span class="sxs-lookup"><span data-stu-id="22ba3-151">The hire date of an `Instructor` entity cannot be null.</span></span> <span data-ttu-id="22ba3-152">Haga clic en el `HireDate` propiedad, haga clic en **propiedades**y, a continuación, en el **propiedades** cambio de ventana `Nullable` a `False`.</span><span class="sxs-lookup"><span data-stu-id="22ba3-152">Right-click the `HireDate` property, click **Properties**, and then in the **Properties** window change `Nullable` to `False`.</span></span>

<span data-ttu-id="22ba3-153">[![image05](the-entity-framework-and-aspnet-getting-started-part-6/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="22ba3-153">[![image05](the-entity-framework-and-aspnet-getting-started-part-6/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image13.png)</span></span>

<span data-ttu-id="22ba3-154">Repita el procedimiento para mover el `EnrollmentDate` propiedad desde la `Person` entidad a la `Student` entidad.</span><span class="sxs-lookup"><span data-stu-id="22ba3-154">Repeat the procedure to move the `EnrollmentDate` property from the `Person` entity to the `Student` entity.</span></span> <span data-ttu-id="22ba3-155">Asegúrese de que también establecer `Nullable` a `False` para el `EnrollmentDate` propiedad.</span><span class="sxs-lookup"><span data-stu-id="22ba3-155">Make sure that you also set `Nullable` to `False` for the `EnrollmentDate` property.</span></span>

<span data-ttu-id="22ba3-156">Ahora que un `Person` entidad tiene solo las propiedades que son comunes a `Instructor` y `Student` entidades (aparte de las propiedades de navegación, que no se están moviendo), la entidad sólo puede usarse como una entidad base en la estructura de herencia.</span><span class="sxs-lookup"><span data-stu-id="22ba3-156">Now that a `Person` entity has only the properties that are common to `Instructor` and `Student` entities (aside from navigation properties, which you're not moving), the entity can only be used as a base entity in the inheritance structure.</span></span> <span data-ttu-id="22ba3-157">Por lo tanto, deberá asegurarse de que nunca se tratan como una entidad independiente.</span><span class="sxs-lookup"><span data-stu-id="22ba3-157">Therefore, you need to ensure that it's never treated as an independent entity.</span></span> <span data-ttu-id="22ba3-158">Haga clic en el `Person` entidad, seleccione **propiedades**y, a continuación, en el **propiedades** ventana cambie el valor de la **abstracta** propiedad  **True**.</span><span class="sxs-lookup"><span data-stu-id="22ba3-158">Right-click the `Person` entity, select **Properties**, and then in the **Properties** window change the value of the **Abstract** property to **True**.</span></span>

<span data-ttu-id="22ba3-159">[![image06](the-entity-framework-and-aspnet-getting-started-part-6/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="22ba3-159">[![image06](the-entity-framework-and-aspnet-getting-started-part-6/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image15.png)</span></span>

## <a name="mapping-instructor-and-student-entities-to-the-person-table"></a><span data-ttu-id="22ba3-160">Asignación de Instructor y Student entidades a la tabla Person</span><span class="sxs-lookup"><span data-stu-id="22ba3-160">Mapping Instructor and Student Entities to the Person Table</span></span>

<span data-ttu-id="22ba3-161">Ahora tiene que indicar a Entity Framework para diferenciar entre `Instructor` y `Student` las entidades de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="22ba3-161">Now you need to tell the Entity Framework how to differentiate between `Instructor` and `Student` entities in the database.</span></span>

<span data-ttu-id="22ba3-162">Haga clic en el `Instructor` entidad y seleccione **asignación de tabla**.</span><span class="sxs-lookup"><span data-stu-id="22ba3-162">Right-click the `Instructor` entity and select **Table Mapping**.</span></span> <span data-ttu-id="22ba3-163">En el **detalles de Mapping** ventana, haga clic en **agregar una tabla o vista** y seleccione **persona**.</span><span class="sxs-lookup"><span data-stu-id="22ba3-163">In the **Mapping Details** window, click **Add a Table or View** and select **Person**.</span></span>

<span data-ttu-id="22ba3-164">[![image07](the-entity-framework-and-aspnet-getting-started-part-6/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="22ba3-164">[![image07](the-entity-framework-and-aspnet-getting-started-part-6/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image17.png)</span></span>

<span data-ttu-id="22ba3-165">Haga clic en **agregar una condición**y, a continuación, seleccione **HireDate**.</span><span class="sxs-lookup"><span data-stu-id="22ba3-165">Click **Add a Condition**, and then select **HireDate**.</span></span>

<span data-ttu-id="22ba3-166">[![image09](the-entity-framework-and-aspnet-getting-started-part-6/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="22ba3-166">[![image09](the-entity-framework-and-aspnet-getting-started-part-6/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image19.png)</span></span>

<span data-ttu-id="22ba3-167">Cambio **operador** a **es** y **valor / propiedad** a **no Null**.</span><span class="sxs-lookup"><span data-stu-id="22ba3-167">Change **Operator** to **Is** and **Value / Property** to **Not Null**.</span></span>

<span data-ttu-id="22ba3-168">[![image10](the-entity-framework-and-aspnet-getting-started-part-6/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="22ba3-168">[![image10](the-entity-framework-and-aspnet-getting-started-part-6/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image21.png)</span></span>

<span data-ttu-id="22ba3-169">Repita el procedimiento para la `Students` entidad, especificando que esta entidad se asigna a la `Person` tabla cuando la `EnrollmentDate` columna no es null.</span><span class="sxs-lookup"><span data-stu-id="22ba3-169">Repeat the procedure for the `Students` entity, specifying that this entity maps to the `Person` table when the `EnrollmentDate` column is not null.</span></span> <span data-ttu-id="22ba3-170">A continuación, guarde y cierre el modelo de datos.</span><span class="sxs-lookup"><span data-stu-id="22ba3-170">Then save and close the data model.</span></span>

<span data-ttu-id="22ba3-171">Compile el proyecto con el fin de crear las nuevas entidades como clases y que estén disponibles en el diseñador.</span><span class="sxs-lookup"><span data-stu-id="22ba3-171">Build the project in order to create the new entities as classes and make them available in the designer.</span></span>

## <a name="using-the-instructor-and-student-entities"></a><span data-ttu-id="22ba3-172">Utilizando el Instructor y Student entidades</span><span class="sxs-lookup"><span data-stu-id="22ba3-172">Using the Instructor and Student Entities</span></span>

<span data-ttu-id="22ba3-173">Al crear las páginas web que funcionan con datos student e instructor, enlace de datos les el `Person` del conjunto de entidades y filtrados en el `HireDate` o `EnrollmentDate` propiedad para restringir los datos devueltos a los estudiantes o instructores.</span><span class="sxs-lookup"><span data-stu-id="22ba3-173">When you created the web pages that work with student and instructor data, you databound them to the `Person` entity set, and you filtered on the `HireDate` or `EnrollmentDate` property to restrict the returned data to students or instructors.</span></span> <span data-ttu-id="22ba3-174">Sin embargo, ahora al enlazar cada control de origen de datos a la `Person` del conjunto de entidades, puede especificar que solo `Student` o `Instructor` se deben seleccionar los tipos de entidad.</span><span class="sxs-lookup"><span data-stu-id="22ba3-174">However, now when you bind each data source control to the `Person` entity set, you can specify that only `Student` or `Instructor` entity types should be selected.</span></span> <span data-ttu-id="22ba3-175">Dado que Entity Framework sabe cómo diferenciar los alumnos e instructores en la `Person` conjunto de entidades, puede quitar el `Where` valores de las propiedades especificadas manualmente para hacerlo.</span><span class="sxs-lookup"><span data-stu-id="22ba3-175">Because the Entity Framework knows how to differentiate students and instructors in the `Person` entity set, you can remove the `Where` property settings you entered manually to do that.</span></span>

<span data-ttu-id="22ba3-176">En el Diseñador de Visual Studio, puede especificar el tipo de entidad que un `EntityDataSource` debe seleccionar el control en el **EntityTypeFilter** cuadro de lista desplegable de la `Configure Data Source` asistente, tal como se muestra en el ejemplo siguiente.</span><span class="sxs-lookup"><span data-stu-id="22ba3-176">In the Visual Studio Designer, you can specify the entity type that an `EntityDataSource` control should select in the **EntityTypeFilter** drop-down box of the `Configure Data Source` wizard, as shown in the following example.</span></span>

<span data-ttu-id="22ba3-177">[![image13](the-entity-framework-and-aspnet-getting-started-part-6/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="22ba3-177">[![image13](the-entity-framework-and-aspnet-getting-started-part-6/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image23.png)</span></span>

<span data-ttu-id="22ba3-178">Y, en el **propiedades** ventana puede quitar `Where` valores de la cláusula que ya no sean necesarios, tal como se muestra en el ejemplo siguiente.</span><span class="sxs-lookup"><span data-stu-id="22ba3-178">And in the **Properties** window you can remove `Where` clause values that are no longer needed, as shown in the following example.</span></span>

<span data-ttu-id="22ba3-179">[![image14](the-entity-framework-and-aspnet-getting-started-part-6/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="22ba3-179">[![image14](the-entity-framework-and-aspnet-getting-started-part-6/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image25.png)</span></span>

<span data-ttu-id="22ba3-180">Sin embargo, porque ha cambiado el marcado para `EntityDataSource` controles para usar el `ContextTypeName` atributo, no se puede ejecutar el **Configurar origen de datos** en `EntityDataSource` los controles que ya ha creado.</span><span class="sxs-lookup"><span data-stu-id="22ba3-180">However, because you've changed the markup for `EntityDataSource` controls to use the `ContextTypeName` attribute, you cannot run the **Configure Data Source** wizard on `EntityDataSource` controls that you've already created.</span></span> <span data-ttu-id="22ba3-181">Por lo tanto, deberá realizar los cambios necesarios cambiando marcado en su lugar.</span><span class="sxs-lookup"><span data-stu-id="22ba3-181">Therefore, you'll make the required changes by changing markup instead.</span></span>

<span data-ttu-id="22ba3-182">Abra el *Students.aspx* página.</span><span class="sxs-lookup"><span data-stu-id="22ba3-182">Open the *Students.aspx* page.</span></span> <span data-ttu-id="22ba3-183">En el `StudentsEntityDataSource` controlar, quite el `Where` atributo y agregue un `EntityTypeFilter="Student"` atributo.</span><span class="sxs-lookup"><span data-stu-id="22ba3-183">In the `StudentsEntityDataSource` control, remove the `Where` attribute and add an `EntityTypeFilter="Student"` attribute.</span></span> <span data-ttu-id="22ba3-184">El marcado ahora tendrá un aspecto similar en el ejemplo siguiente:</span><span class="sxs-lookup"><span data-stu-id="22ba3-184">The markup will now resemble the following example:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample1.aspx)]

<span data-ttu-id="22ba3-185">Establecer el `EntityTypeFilter` atributo garantiza que el `EntityDataSource` control seleccionará el tipo de entidad especificado.</span><span class="sxs-lookup"><span data-stu-id="22ba3-185">Setting the `EntityTypeFilter` attribute ensures that the `EntityDataSource` control will select only the specified entity type.</span></span> <span data-ttu-id="22ba3-186">Si desea recuperarlos `Student` y `Instructor` tipos de entidad, no debe establecer este atributo.</span><span class="sxs-lookup"><span data-stu-id="22ba3-186">If you wanted to retrieve both `Student` and `Instructor` entity types, you would not set this attribute.</span></span> <span data-ttu-id="22ba3-187">(Tendrá la opción de recuperación de varios tipos de entidad con una `EntityDataSource` control solo si está usando el control de acceso a datos de solo lectura.</span><span class="sxs-lookup"><span data-stu-id="22ba3-187">(You have the option of retrieving multiple entity types with one `EntityDataSource` control only if you're using the control for read-only data access.</span></span> <span data-ttu-id="22ba3-188">Si usas un `EntityDataSource` controlar para insertar, actualizar o eliminar entidades y si el conjunto de entidades que está enlazado puede contener varios tipos, sólo se puede trabajar con un tipo de entidad y se deben establecer este atributo.)</span><span class="sxs-lookup"><span data-stu-id="22ba3-188">If you're using an `EntityDataSource` control to insert, update, or delete entities, and if the entity set it's bound to can contain multiple types, you can only work with one entity type, and you have to set this attribute.)</span></span>

<span data-ttu-id="22ba3-189">Repita el procedimiento para la `SearchEntityDataSource` controlar, excepto quitar solo la parte de la `Where` atributo que selecciona `Student` entidades en lugar de quitar por completo la propiedad.</span><span class="sxs-lookup"><span data-stu-id="22ba3-189">Repeat the procedure for the `SearchEntityDataSource` control, except remove only the part of the `Where` attribute that selects `Student` entities instead of removing the property altogether.</span></span> <span data-ttu-id="22ba3-190">La etiqueta de apertura del control ahora será similar en el ejemplo siguiente:</span><span class="sxs-lookup"><span data-stu-id="22ba3-190">The opening tag of the control will now resemble the following example:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample2.aspx)]

<span data-ttu-id="22ba3-191">Ejecute la página para comprobar que sigue funcionando como antes.</span><span class="sxs-lookup"><span data-stu-id="22ba3-191">Run the page to verify that it still works as it did before.</span></span>

<span data-ttu-id="22ba3-192">[![image15](the-entity-framework-and-aspnet-getting-started-part-6/_static/image28.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="22ba3-192">[![image15](the-entity-framework-and-aspnet-getting-started-part-6/_static/image28.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image27.png)</span></span>

<span data-ttu-id="22ba3-193">Actualizar las páginas siguientes que creó en los tutoriales anteriores para que usen el nuevo `Student` y `Instructor` entidades en lugar de `Person` entidades, a continuación, ejecutarlos para comprobar que funcionan como lo hacía antes:</span><span class="sxs-lookup"><span data-stu-id="22ba3-193">Update the following pages that you created in earlier tutorials so that they use the new `Student` and `Instructor` entities instead of `Person` entities, then run them to verify that they work as they did before:</span></span>

- <span data-ttu-id="22ba3-194">En *StudentsAdd.aspx*, agregar `EntityTypeFilter="Student"` a la `StudentsEntityDataSource` control.</span><span class="sxs-lookup"><span data-stu-id="22ba3-194">In *StudentsAdd.aspx*, add `EntityTypeFilter="Student"` to the `StudentsEntityDataSource` control.</span></span> <span data-ttu-id="22ba3-195">El marcado ahora tendrá un aspecto similar en el ejemplo siguiente:</span><span class="sxs-lookup"><span data-stu-id="22ba3-195">The markup will now resemble the following example:</span></span> 

    [!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample3.aspx)]

    <span data-ttu-id="22ba3-196">[![image16](the-entity-framework-and-aspnet-getting-started-part-6/_static/image30.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="22ba3-196">[![image16](the-entity-framework-and-aspnet-getting-started-part-6/_static/image30.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image29.png)</span></span>
- <span data-ttu-id="22ba3-197">En *About.aspx*, agregar `EntityTypeFilter="Student"` a la `StudentStatisticsEntityDataSource` controlar y quitar `Where="it.EnrollmentDate is not null"`.</span><span class="sxs-lookup"><span data-stu-id="22ba3-197">In *About.aspx*, add `EntityTypeFilter="Student"` to the `StudentStatisticsEntityDataSource` control and remove `Where="it.EnrollmentDate is not null"`.</span></span> <span data-ttu-id="22ba3-198">El marcado ahora tendrá un aspecto similar en el ejemplo siguiente:</span><span class="sxs-lookup"><span data-stu-id="22ba3-198">The markup will now resemble the following example:</span></span> 

    [!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample4.aspx)]

    <span data-ttu-id="22ba3-199">[![image17](the-entity-framework-and-aspnet-getting-started-part-6/_static/image32.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="22ba3-199">[![image17](the-entity-framework-and-aspnet-getting-started-part-6/_static/image32.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image31.png)</span></span>
- <span data-ttu-id="22ba3-200">En *Instructors.aspx* y *InstructorsCourses.aspx*, agregar `EntityTypeFilter="Instructor"` a la `InstructorsEntityDataSource` controlar y quitar `Where="it.HireDate is not null"`.</span><span class="sxs-lookup"><span data-stu-id="22ba3-200">In *Instructors.aspx* and *InstructorsCourses.aspx*, add `EntityTypeFilter="Instructor"` to the `InstructorsEntityDataSource` control and remove `Where="it.HireDate is not null"`.</span></span> <span data-ttu-id="22ba3-201">El marcado en *Instructors.aspx* ahora es similar al siguiente:</span><span class="sxs-lookup"><span data-stu-id="22ba3-201">The markup in *Instructors.aspx* now resembles the following example:</span></span> 

    [!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample5.aspx)]

    <span data-ttu-id="22ba3-202">[![image18](the-entity-framework-and-aspnet-getting-started-part-6/_static/image34.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="22ba3-202">[![image18](the-entity-framework-and-aspnet-getting-started-part-6/_static/image34.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image33.png)</span></span>

    <span data-ttu-id="22ba3-203">El marcado en *InstructorsCourses.aspx* ahora tendrá un aspecto similar en el ejemplo siguiente:</span><span class="sxs-lookup"><span data-stu-id="22ba3-203">The markup in *InstructorsCourses.aspx* will now resemble the following example:</span></span>

    [!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample6.aspx)]

    <span data-ttu-id="22ba3-204">[![image19](the-entity-framework-and-aspnet-getting-started-part-6/_static/image36.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="22ba3-204">[![image19](the-entity-framework-and-aspnet-getting-started-part-6/_static/image36.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image35.png)</span></span>

<span data-ttu-id="22ba3-205">Como resultado de estos cambios, ha mejorado la facilidad de mantenimiento de la aplicación Contoso University de varias maneras.</span><span class="sxs-lookup"><span data-stu-id="22ba3-205">As a result of these changes, you've improved the Contoso University application's maintainability in several ways.</span></span> <span data-ttu-id="22ba3-206">Ha movido la lógica de selección y validación de fuera de la capa de interfaz de usuario (*.aspx* marcado) y lo hizo una parte integral de la capa de acceso a datos.</span><span class="sxs-lookup"><span data-stu-id="22ba3-206">You've moved selection and validation logic out of the UI layer (*.aspx* markup) and made it an integral part of the data access layer.</span></span> <span data-ttu-id="22ba3-207">Esto ayuda a aislar el código de aplicación de los cambios que se podrían hacer en el futuro para el esquema de base de datos o el modelo de datos.</span><span class="sxs-lookup"><span data-stu-id="22ba3-207">This helps to isolate your application code from changes that you might make in the future to the database schema or the data model.</span></span> <span data-ttu-id="22ba3-208">Por ejemplo, podría decidir que los alumnos, es posible que lo contraten de ayudas de los profesores y, por tanto, se obtendría una fecha de contratación.</span><span class="sxs-lookup"><span data-stu-id="22ba3-208">For example, you could decide that students might be hired as teachers' aids and therefore would get a hire date.</span></span> <span data-ttu-id="22ba3-209">A continuación, podría agregar una nueva propiedad para diferenciar los estudiantes de instructores y actualizar el modelo de datos.</span><span class="sxs-lookup"><span data-stu-id="22ba3-209">You could then add a new property to differentiate students from instructors and update the data model.</span></span> <span data-ttu-id="22ba3-210">Código en la aplicación web no tendría que cambiar, excepto donde desea mostrar una fecha de contratación para estudiantes.</span><span class="sxs-lookup"><span data-stu-id="22ba3-210">No code in the web application would need to change except where you wanted to show a hire date for students.</span></span> <span data-ttu-id="22ba3-211">Otra ventaja de agregar `Instructor` y `Student` entidades es que el código sea más fácil lectura que cuando hace referencia a `Person` objetos que eran realmente estudiantes o instructores.</span><span class="sxs-lookup"><span data-stu-id="22ba3-211">Another benefit of adding `Instructor` and `Student` entities is that your code is more readily understandable than when it referred to `Person` objects that were actually students or instructors.</span></span>

<span data-ttu-id="22ba3-212">Ahora ha visto una forma de implementar un patrón de herencia en Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="22ba3-212">You've now seen one way to implement an inheritance pattern in the Entity Framework.</span></span> <span data-ttu-id="22ba3-213">En el siguiente tutorial, obtendrá información sobre cómo utilizar procedimientos almacenados con el fin de tener más control sobre cómo Entity Framework tiene acceso a la base de datos.</span><span class="sxs-lookup"><span data-stu-id="22ba3-213">In the following tutorial, you'll learn how to use stored procedures in order to have more control over how the Entity Framework accesses the database.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="22ba3-214">[Anterior](the-entity-framework-and-aspnet-getting-started-part-5.md)
> [Siguiente](the-entity-framework-and-aspnet-getting-started-part-7.md)</span><span class="sxs-lookup"><span data-stu-id="22ba3-214">[Previous](the-entity-framework-and-aspnet-getting-started-part-5.md)
[Next](the-entity-framework-and-aspnet-getting-started-part-7.md)</span></span>
