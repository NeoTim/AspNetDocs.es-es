---
uid: web-forms/overview/data-access/accessing-the-database-directly-from-an-aspnet-page/inserting-updating-and-deleting-data-with-the-sqldatasource-cs
title: Insertar, actualizar y eliminar datos con SqlDataSource (C#) | Microsoft Docs
author: rick-anderson
description: En los tutoriales anteriores, hemos aprendido cómo permitir que el control ObjectDataSource de inserción, actualización y eliminación de datos. El control SqlDataSource admite t...
ms.author: riande
ms.date: 02/20/2007
ms.assetid: a526f0ec-779e-4a2b-a476-6604090d25ce
msc.legacyurl: /web-forms/overview/data-access/accessing-the-database-directly-from-an-aspnet-page/inserting-updating-and-deleting-data-with-the-sqldatasource-cs
msc.type: authoredcontent
ms.openlocfilehash: 2c52fcf746d80899d7ea568c8110c4dfa610224c
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 03/01/2019
ms.locfileid: "57041372"
---
<a name="inserting-updating-and-deleting-data-with-the-sqldatasource-c"></a><span data-ttu-id="e2ceb-104">Insertar, actualizar y eliminar datos con SqlDataSource (C#)</span><span class="sxs-lookup"><span data-stu-id="e2ceb-104">Inserting, Updating, and Deleting Data with the SqlDataSource (C#)</span></span>
====================
<span data-ttu-id="e2ceb-105">por [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="e2ceb-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="e2ceb-106">[Descargue la aplicación de ejemplo](http://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_49_CS.exe) o [descargar PDF](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/datatutorial49cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="e2ceb-106">[Download Sample App](http://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_49_CS.exe) or [Download PDF](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/datatutorial49cs1.pdf)</span></span>

> <span data-ttu-id="e2ceb-107">En los tutoriales anteriores, hemos aprendido cómo permitir que el control ObjectDataSource de inserción, actualización y eliminación de datos.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-107">In previous tutorials we learned how the ObjectDataSource control allowed for inserting, updating, and deleting of data.</span></span> <span data-ttu-id="e2ceb-108">El control SqlDataSource es compatible con las mismas operaciones, pero el enfoque es diferente y, en este tutorial se muestra cómo configurar SqlDataSource para insertar, actualizar y eliminar datos.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-108">The SqlDataSource control supports the same operations, but the approach is different, and this tutorial shows how to configure the SqlDataSource to insert, update, and delete data.</span></span>


## <a name="introduction"></a><span data-ttu-id="e2ceb-109">Introducción</span><span class="sxs-lookup"><span data-stu-id="e2ceb-109">Introduction</span></span>

<span data-ttu-id="e2ceb-110">Como se describe en [una visión general de insertar, actualizar y eliminar](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md), el control GridView ofrece integrados actualizar y eliminar capacidades, mientras que los controles DetailsView y FormView incluyen Insertar junto con edición y eliminación de funcionalidad.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-110">As discussed in [An Overview of Inserting, Updating, and Deleting](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md), the GridView control provides built-in updating and deleting capabilities, while the DetailsView and FormView controls include inserting support along with editing and deleting functionality.</span></span> <span data-ttu-id="e2ceb-111">Estas capacidades de modificación de datos se pueden conectar directamente en un control de origen de datos sin una línea de código que necesitan que se va a escribir.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-111">These data modification capabilities can be plugged directly into a data source control without a line of code needing to be written.</span></span> <span data-ttu-id="e2ceb-112">[Una visión general de insertar, actualizar y eliminar](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md) examinar utilizando el origen ObjectDataSource para facilitar Insertar, actualizar y eliminar con los controles GridView, DetailsView y FormView.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-112">[An Overview of Inserting, Updating, and Deleting](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md) examined using the ObjectDataSource to facilitate inserting, updating, and deleting with the GridView, DetailsView, and FormView controls.</span></span> <span data-ttu-id="e2ceb-113">Como alternativa, SqlDataSource puede usarse en lugar de ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-113">Alternatively, the SqlDataSource can be used in place of the ObjectDataSource.</span></span>

<span data-ttu-id="e2ceb-114">Recuerde para admitir Insertar, actualizar y eliminar, con el origen ObjectDataSource que necesitábamos para especificar los métodos de la capa de objeto que se invocará para realizar la inserción, actualización o eliminación de la acción.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-114">Recall that to support inserting, updating, and deleting, with the ObjectDataSource we needed to specify the object layer methods to invoke to perform the insert, update, or delete action.</span></span> <span data-ttu-id="e2ceb-115">Con SqlDataSource, necesitamos proporcionar `INSERT`, `UPDATE`, y `DELETE` SQL instrucciones (o procedimientos almacenados) para ejecutar.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-115">With the SqlDataSource, we need to provide `INSERT`, `UPDATE`, and `DELETE` SQL statements (or stored procedures) to execute.</span></span> <span data-ttu-id="e2ceb-116">Como veremos en este tutorial, estas instrucciones se pueden crear manualmente o pueden generarse automáticamente mediante el Asistente para configurar origen de datos de SqlDataSource s.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-116">As we'll see in this tutorial, these statements can be created manually or can be automatically generated by the SqlDataSource s Configure Data Source wizard.</span></span>

> [!NOTE]
> <span data-ttu-id="e2ceb-117">Desde que creamos ve discutió Insertar, editar y eliminar las capacidades del control GridView, DetailsView y FormView controles, en este tutorial se centrará en la configuración del control SqlDataSource para admitir estas operaciones.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-117">Since we ve already discussed the inserting, editing, and deleting capabilities of the GridView, DetailsView, and FormView controls, this tutorial will focus on configuring the SqlDataSource control to support these operations.</span></span> <span data-ttu-id="e2ceb-118">Si necesita perfeccionar sus conocimientos sobre la implementación de estas características dentro del control GridView, DetailsView y FormView, la devolución para los tutoriales de edición, insertar y eliminar datos, empezando por [una visión general de insertar, actualizar y eliminar](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md).</span><span class="sxs-lookup"><span data-stu-id="e2ceb-118">If you need to brush up on implementing these features within the GridView, DetailsView, and FormView, return to the Editing, Inserting, and Deleting Data tutorials, starting with [An Overview of Inserting, Updating, and Deleting](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md).</span></span>


## <a name="step-1-specifyinginsertupdate-anddeletestatements"></a><span data-ttu-id="e2ceb-119">Paso 1: Especificar`INSERT`,`UPDATE`, y`DELETE`instrucciones</span><span class="sxs-lookup"><span data-stu-id="e2ceb-119">Step 1: Specifying`INSERT`,`UPDATE`, and`DELETE`Statements</span></span>

<span data-ttu-id="e2ceb-120">Como se ve que se muestra en los dos últimos tutoriales, para recuperar datos de un control SqlDataSource, que es necesario establece dos propiedades:</span><span class="sxs-lookup"><span data-stu-id="e2ceb-120">As we ve seen in the past two tutorials, to retrieve data from a SqlDataSource control we need to set two properties:</span></span>

1. <span data-ttu-id="e2ceb-121">`ConnectionString`, que especifica qué base de datos para enviar la consulta, y</span><span class="sxs-lookup"><span data-stu-id="e2ceb-121">`ConnectionString`, which specifies what database to send the query to, and</span></span>
2. <span data-ttu-id="e2ceb-122">`SelectCommand`, que especifica la instrucción de SQL ad hoc o el nombre del procedimiento almacenado que se ejecutan para devolver los resultados.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-122">`SelectCommand`, which specifies the ad-hoc SQL statement or stored procedure name to execute to return the results.</span></span>

<span data-ttu-id="e2ceb-123">Para `SelectCommand` valores con parámetros, el parámetro de valores se especifican a través de las operaciones de asignación SqlDataSource `SelectParameters` colección y puede incluir valores codificados de forma rígida, valores de origen de parámetro comunes (campos de cadena de consulta, variables de sesión, valores de control Web, y así, sucesivamente), o se pueden asignar mediante programación.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-123">For `SelectCommand` values with parameters, the parameter values are specified via the SqlDataSource s `SelectParameters` collection and can include hard-coded values, common parameter source values (querystring fields, session variables, Web control values, and so on), or can be programmatically assigned.</span></span> <span data-ttu-id="e2ceb-124">Cuando el control SqlDataSource s `Select()` método se invoca mediante programación o automáticamente desde un control Web de datos se establece una conexión a la base de datos, se asignan los valores de parámetro a la consulta y el comando se transporte desactivar al base de datos.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-124">When the SqlDataSource control s `Select()` method is invoked either programmatically or automatically from a data Web control a connection to the database is established, the parameter values are assigned to the query, and the command is shuttled off to the database.</span></span> <span data-ttu-id="e2ceb-125">A continuación, se devuelven los resultados como un conjunto de datos o un DataReader, dependiendo del valor del control s `DataSourceMode` propiedad.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-125">The results are then returned as either a DataSet or DataReader, depending on the value of the control s `DataSourceMode` property.</span></span>

<span data-ttu-id="e2ceb-126">Además de seleccionar datos, puede utilizarse el control SqlDataSource para insertar, actualizar y eliminar datos proporcionando `INSERT`, `UPDATE`, y `DELETE` instrucciones SQL en la misma manera.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-126">Along with selecting data, the SqlDataSource control can be used to insert, update, and delete data by supplying `INSERT`, `UPDATE`, and `DELETE` SQL statements in much the same way.</span></span> <span data-ttu-id="e2ceb-127">Simplemente asigne el `InsertCommand`, `UpdateCommand`, y `DeleteCommand` propiedades el `INSERT`, `UPDATE`, y `DELETE` instrucciones SQL para ejecutar.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-127">Simply assign the `InsertCommand`, `UpdateCommand`, and `DeleteCommand` properties the `INSERT`, `UPDATE`, and `DELETE` SQL statements to execute.</span></span> <span data-ttu-id="e2ceb-128">Si las instrucciones tienen parámetros (como aparecerán casi siempre), incluirlos en el `InsertParameters`, `UpdateParameters`, y `DeleteParameters` colecciones.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-128">If the statements have parameters (as they most always will), include them in the `InsertParameters`, `UpdateParameters`, and `DeleteParameters` collections.</span></span>

<span data-ttu-id="e2ceb-129">Una vez un `InsertCommand`, `UpdateCommand`, o `DeleteCommand` se ha especificado el valor, la opción Habilitar inserción, Habilitar edición o Habilitar eliminación en los datos correspondientes de etiqueta inteligente del control s Web estará disponible.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-129">Once an `InsertCommand`, `UpdateCommand`, or `DeleteCommand` value has been specified, the Enable Inserting, Enable Editing, or Enable Deleting option in the corresponding data Web control s smart tag will become available.</span></span> <span data-ttu-id="e2ceb-130">Para ilustrar esto, permiten s dar un ejemplo de la `Querying.aspx` página creada en el [consultar datos con el SqlDataSource Control](querying-data-with-the-sqldatasource-control-cs.md) tutorial y ampliar para incluir a eliminar las capacidades.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-130">To illustrate this, let s take an example from the `Querying.aspx` page we created in the [Querying Data with the SqlDataSource Control](querying-data-with-the-sqldatasource-control-cs.md) tutorial and augment it to include delete capabilities.</span></span>

<span data-ttu-id="e2ceb-131">Comience abriendo la `InsertUpdateDelete.aspx` y `Querying.aspx` páginas desde el `SqlDataSource` carpeta.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-131">Start by opening the `InsertUpdateDelete.aspx` and `Querying.aspx` pages from the `SqlDataSource` folder.</span></span> <span data-ttu-id="e2ceb-132">Desde el diseñador en el `Querying.aspx` , seleccione el SqlDataSource y GridView del primer ejemplo (el `ProductsDataSource` y `GridView1` controles).</span><span class="sxs-lookup"><span data-stu-id="e2ceb-132">From the Designer on the `Querying.aspx` page, select the SqlDataSource and GridView from the first example (the `ProductsDataSource` and `GridView1` controls).</span></span> <span data-ttu-id="e2ceb-133">Después de seleccionar los dos controles, vaya al menú de edición y elija Copiar (o simplemente presione Ctrl + C).</span><span class="sxs-lookup"><span data-stu-id="e2ceb-133">After selecting the two controls, go to the Edit menu and choose Copy (or just hit Ctrl+C).</span></span> <span data-ttu-id="e2ceb-134">A continuación, vaya al diseñador de `InsertUpdateDelete.aspx` y pegar en los controles.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-134">Next, go to the Designer of `InsertUpdateDelete.aspx` and paste in the controls.</span></span> <span data-ttu-id="e2ceb-135">Después de haber movido a través de los dos controles para `InsertUpdateDelete.aspx`, pruebe la página en un explorador.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-135">After you have moved the two controls over to `InsertUpdateDelete.aspx`, test out the page in a browser.</span></span> <span data-ttu-id="e2ceb-136">Debería ver los valores de la `ProductID`, `ProductName`, y `UnitPrice` columnas para todos los registros en el `Products` tabla de base de datos.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-136">You should see the values of the `ProductID`, `ProductName`, and `UnitPrice` columns for all of the records in the `Products` database table.</span></span>


<span data-ttu-id="e2ceb-137">[![Se muestran todos los productos, ordenados por ProductID](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image1.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="e2ceb-137">[![All of the Products are Listed, Ordered by ProductID](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image1.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image1.png)</span></span>

<span data-ttu-id="e2ceb-138">**Figura 1**: Se muestran todos los productos, ordenados por `ProductID` ([haga clic aquí para ver imagen en tamaño completo](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="e2ceb-138">**Figure 1**: All of the Products are Listed, Ordered by `ProductID` ([Click to view full-size image](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image2.png))</span></span>


## <a name="adding-the-sqldatasource-sdeletecommandanddeleteparametersproperties"></a><span data-ttu-id="e2ceb-139">Agregar la s SqlDataSource`DeleteCommand`y`DeleteParameters`propiedades</span><span class="sxs-lookup"><span data-stu-id="e2ceb-139">Adding the SqlDataSource s`DeleteCommand`and`DeleteParameters`Properties</span></span>

<span data-ttu-id="e2ceb-140">En este momento tenemos una SqlDataSource que simplemente devuelve todos los registros desde el `Products` tabla y un control GridView que procesa estos datos.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-140">At this point we have a SqlDataSource that simply returns all of the records from the `Products` table and a GridView that renders this data.</span></span> <span data-ttu-id="e2ceb-141">Nuestro objetivo es ampliar este ejemplo para permitir al usuario eliminar productos a través del control GridView.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-141">Our goal is to extend this example to allow for the user to delete products via the GridView.</span></span> <span data-ttu-id="e2ceb-142">Para lograr esto es necesario especificar valores para el control SqlDataSource s `DeleteCommand` y `DeleteParameters` propiedades y, a continuación, configurar el control GridView para admitir la eliminación.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-142">To accomplish this we need to specify values for the SqlDataSource control s `DeleteCommand` and `DeleteParameters` properties and then configure the GridView to support deleting.</span></span>

<span data-ttu-id="e2ceb-143">El `DeleteCommand` y `DeleteParameters` las propiedades se pueden especificar de varias maneras:</span><span class="sxs-lookup"><span data-stu-id="e2ceb-143">The `DeleteCommand` and `DeleteParameters` properties can be specified in a number of ways:</span></span>

- <span data-ttu-id="e2ceb-144">Mediante la sintaxis declarativa</span><span class="sxs-lookup"><span data-stu-id="e2ceb-144">Through the declarative syntax</span></span>
- <span data-ttu-id="e2ceb-145">Desde la ventana Propiedades en el diseñador</span><span class="sxs-lookup"><span data-stu-id="e2ceb-145">From the Properties window in the Designer</span></span>
- <span data-ttu-id="e2ceb-146">Desde la pantalla de procedimiento almacenado en el Asistente para configurar orígenes de datos o especificar una instrucción SQL personalizada</span><span class="sxs-lookup"><span data-stu-id="e2ceb-146">From the Specify a custom SQL statement or stored procedure screen in the Configure Data Source wizard</span></span>
- <span data-ttu-id="e2ceb-147">Mediante el botón avanzado en el especificar columnas de una tabla de la pantalla de vista en el Asistente para configurar orígenes de datos, lo que realmente genera automáticamente el `DELETE` colección instrucción y los parámetros SQL utilizada en el `DeleteCommand` y `DeleteParameters` propiedades</span><span class="sxs-lookup"><span data-stu-id="e2ceb-147">Via the Advanced button in the Specify columns from a table of view screen in the Configure Data Source wizard, which will actually automatically generate the `DELETE` SQL statement and parameter collection used in the `DeleteCommand` and `DeleteParameters` properties</span></span>

<span data-ttu-id="e2ceb-148">Examinaremos cómo tienen automáticamente la `DELETE` instrucción creada en el paso 2.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-148">We'll examine how to automatically have the `DELETE` statement created in Step 2.</span></span> <span data-ttu-id="e2ceb-149">Por ahora, permiten s use la ventana Propiedades en el diseñador, aunque el Asistente para configurar el origen de datos o la opción de sintaxis declarativa funcionaría igual de bien.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-149">For now, let s use the Properties window in the Designer, although the Configure Data Source wizard or declarative syntax option would work just as well.</span></span>

<span data-ttu-id="e2ceb-150">Desde el diseñador en `InsertUpdateDelete.aspx`, haga clic en el `ProductsDataSource` SqlDataSource y, a continuación, se abrirá la ventana de propiedades (en el menú Ver, elija la ventana Propiedades o, simplemente tiene que presionar F4).</span><span class="sxs-lookup"><span data-stu-id="e2ceb-150">From the Designer in `InsertUpdateDelete.aspx`, click on the `ProductsDataSource` SqlDataSource and then bring up the Properties window (from the View menu, choose Properties window, or simply hit F4).</span></span> <span data-ttu-id="e2ceb-151">Seleccione la propiedad DeleteQuery, lo que muestra un conjunto de puntos suspensivos.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-151">Select the DeleteQuery property, which will bring up a set of ellipses.</span></span>


![Seleccione la propiedad DeleteQuery desde la ventana Propiedades](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image2.gif)

<span data-ttu-id="e2ceb-153">**Figura 2**: Seleccione la propiedad DeleteQuery desde la ventana Propiedades</span><span class="sxs-lookup"><span data-stu-id="e2ceb-153">**Figure 2**: Select the DeleteQuery Property from the Properties Window</span></span>


> [!NOTE]
> <span data-ttu-id="e2ceb-154">T SqlDataSource tienen una propiedad DeleteQuery.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-154">The SqlDataSource doesn t have a DeleteQuery property.</span></span> <span data-ttu-id="e2ceb-155">En su lugar, DeleteQuery es una combinación de la `DeleteCommand` y `DeleteParameters` propiedades y solo se muestra en la ventana Propiedades cuando se ve la ventana a través del diseñador.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-155">Rather, DeleteQuery is a combination of the `DeleteCommand` and `DeleteParameters` properties and is only listed in the Properties window when viewing the window through the Designer.</span></span> <span data-ttu-id="e2ceb-156">Si está buscando en la ventana Propiedades de la vista del origen, encontrará el `DeleteCommand` propiedad en su lugar.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-156">If you are looking at the Properties window in the Source view, you'll find the `DeleteCommand` property instead.</span></span>


<span data-ttu-id="e2ceb-157">Haga clic en el botón de puntos suspensivos en la propiedad DeleteQuery para que aparezca el cuadro de diálogo Editor de parámetros y comandos cuadro (consulte la figura 3).</span><span class="sxs-lookup"><span data-stu-id="e2ceb-157">Click the ellipses in the DeleteQuery property to bring up the Command and Parameter Editor dialog box (see Figure 3).</span></span> <span data-ttu-id="e2ceb-158">Desde este cuadro de diálogo puede especificar el `DELETE` instrucción SQL y especifique los parámetros.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-158">From this dialog box you can specify the `DELETE` SQL statement and specify the parameters.</span></span> <span data-ttu-id="e2ceb-159">Escriba la siguiente consulta en el `DELETE` cuadro de texto de comando (ya sea manualmente o mediante el generador de consultas, si lo prefiere):</span><span class="sxs-lookup"><span data-stu-id="e2ceb-159">Enter the following query into the `DELETE` command textbox (either manually or using the Query Builder, if you prefer):</span></span>

[!code-sql[Main](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/samples/sample1.sql)]

<span data-ttu-id="e2ceb-160">A continuación, haga clic en el botón Actualizar parámetros para agregar el `@ProductID` parámetro a la lista de los parámetros siguientes.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-160">Next, click the Refresh Parameters button to add the `@ProductID` parameter to the list of parameters below.</span></span>


<span data-ttu-id="e2ceb-161">[![Seleccione la propiedad DeleteQuery desde la ventana Propiedades](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image3.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="e2ceb-161">[![Select the DeleteQuery Property from the Properties Window](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image3.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image3.png)</span></span>

<span data-ttu-id="e2ceb-162">**Figura 3**: Seleccione la propiedad DeleteQuery desde la ventana Propiedades ([haga clic aquí para ver imagen en tamaño completo](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="e2ceb-162">**Figure 3**: Select the DeleteQuery Property from the Properties Window ([Click to view full-size image](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image4.png))</span></span>


<span data-ttu-id="e2ceb-163">Hacer *no* proporcionar un valor para este parámetro (deje su parámetro de origen en ninguno).</span><span class="sxs-lookup"><span data-stu-id="e2ceb-163">Do *not* provide a value for this parameter (leave its Parameter source at None ).</span></span> <span data-ttu-id="e2ceb-164">Una vez que se agrega compatibilidad eliminar en el control GridView, el control GridView proporcionará automáticamente este valor de parámetro con el valor de su `DataKeys` colección para la fila cuyo botón Delete se hizo clic.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-164">Once we add deleting support to the GridView, the GridView will automatically supply this parameter value, using the value of its `DataKeys` collection for the row whose Delete button was clicked.</span></span>

> [!NOTE]
> <span data-ttu-id="e2ceb-165">El nombre del parámetro usado en el `DELETE` consulta *debe* ser el mismo que el nombre de la `DataKeyNames` valor en el control GridView, DetailsView o FormView.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-165">The parameter name used in the `DELETE` query *must* be the same as the name of the `DataKeyNames` value in the GridView, DetailsView, or FormView.</span></span> <span data-ttu-id="e2ceb-166">Es decir, el parámetro en el `DELETE` instrucción se denomina intencionadamente `@ProductID` (en lugar de, por ejemplo, `@ID`), ya que es el nombre de columna de clave principal en la tabla Products (y, por tanto, el valor DataKeyNames en GridView) `ProductID`.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-166">That is, the parameter in the `DELETE` statement is purposefully named `@ProductID` (instead of, say, `@ID`), because the primary key column name in the Products table (and therefore the DataKeyNames value in the GridView) is `ProductID`.</span></span>


<span data-ttu-id="e2ceb-167">Si el nombre del parámetro y `DataKeyNames` coincidencia de valor t, el control GridView no puede asignar automáticamente el parámetro el valor de la `DataKeys` colección.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-167">If the parameter name and `DataKeyNames` value doesn t match, the GridView cannot automatically assign the parameter the value from the `DataKeys` collection.</span></span>

<span data-ttu-id="e2ceb-168">Después de escribir la información relacionada con la eliminación en el cuadro de diálogo Editor de parámetros y comandos, haga clic en Aceptar y vaya a la vista de código fuente para examinar el marcado declarativo resultante:</span><span class="sxs-lookup"><span data-stu-id="e2ceb-168">After entering the delete-related information into the Command and Parameter Editor dialog box click OK and go to the Source view to examine the resulting declarative markup:</span></span>

[!code-aspx[Main](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/samples/sample2.aspx)]

<span data-ttu-id="e2ceb-169">Tenga en cuenta la adición de la `DeleteCommand` propiedad así como el `<DeleteParameters>` sección y el objeto de parámetro denominado `productID`.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-169">Note the addition of the `DeleteCommand` property as well as the `<DeleteParameters>` section and the Parameter object named `productID`.</span></span>

## <a name="configuring-the-gridview-for-deleting"></a><span data-ttu-id="e2ceb-170">Configuración del control GridView para eliminar</span><span class="sxs-lookup"><span data-stu-id="e2ceb-170">Configuring the GridView for Deleting</span></span>

<span data-ttu-id="e2ceb-171">Con el `DeleteCommand` agrega la propiedad, la etiqueta inteligente de GridView s ahora contiene la opción Habilitar eliminación.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-171">With the `DeleteCommand` property added, the GridView s smart tag now contains the Enable Deleting option.</span></span> <span data-ttu-id="e2ceb-172">Continúe y Active esta casilla.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-172">Go ahead and check this checkbox.</span></span> <span data-ttu-id="e2ceb-173">Como se describe en [una visión general de insertar, actualizar y eliminar](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md), esto hace que el control GridView agregar un CommandField con su `ShowDeleteButton` propiedad establecida en `true`.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-173">As discussed in [An Overview of Inserting, Updating, and Deleting](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md), this causes the GridView to add a CommandField with its `ShowDeleteButton` property set to `true`.</span></span> <span data-ttu-id="e2ceb-174">Como en la figura 4 muestra, cuando se visita la página a través de un explorador se incluye un botón Eliminar.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-174">As Figure 4 shows, when the page is visited through a browser a Delete button is included.</span></span> <span data-ttu-id="e2ceb-175">Pruebe esta página horizontalmente mediante la eliminación de algunos productos.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-175">Test this page out by deleting some products.</span></span>


<span data-ttu-id="e2ceb-176">[![Cada fila GridView ahora incluye un botón Eliminar](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image4.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="e2ceb-176">[![Each GridView Row Now Includes a Delete Button](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image4.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image5.png)</span></span>

<span data-ttu-id="e2ceb-177">**Figura 4**: Cada fila GridView ahora incluye un botón Eliminar ([haga clic aquí para ver imagen en tamaño completo](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="e2ceb-177">**Figure 4**: Each GridView Row Now Includes a Delete Button ([Click to view full-size image](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image6.png))</span></span>


<span data-ttu-id="e2ceb-178">Al hacer clic en un botón de eliminación, se produce un postback, el control GridView se asigna el `ProductID` parámetro el valor de la `DataKeys` valor de la colección para la fila cuyo botón Delete se hizo clic e invoca la s SqlDataSource `Delete()` método.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-178">Upon clicking a Delete button, a postback occurs, the GridView assigns the `ProductID` parameter the value of the `DataKeys` collection value for the row whose Delete button was clicked, and invokes the SqlDataSource s `Delete()` method.</span></span> <span data-ttu-id="e2ceb-179">El control SqlDataSource, a continuación, se conecta a la base de datos y ejecuta el `DELETE` instrucción.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-179">The SqlDataSource control then connects to the database and executes the `DELETE` statement.</span></span> <span data-ttu-id="e2ceb-180">El control GridView, a continuación, vuelve a enlazar de SqlDataSource, obtener y mostrar el conjunto actual de productos (que ya no incluye el registro recién eliminados).</span><span class="sxs-lookup"><span data-stu-id="e2ceb-180">The GridView then rebinds to the SqlDataSource, getting back and displaying the current set of products (which no longer includes the just-deleted record).</span></span>

> [!NOTE]
> <span data-ttu-id="e2ceb-181">Puesto que el control GridView se utiliza su `DataKeys` colección para rellenar los parámetros de SqlDataSource, lo s fundamental que la s GridView `DataKeyNames` propiedad se establece en las columnas que constituyen la clave principal y que la s SqlDataSource `SelectCommand` devuelve Estas columnas.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-181">Since the GridView uses its `DataKeys` collection to populate the SqlDataSource parameters, it s vital that the GridView s `DataKeyNames` property be set to the column(s) that constitute the primary key and that the SqlDataSource s `SelectCommand` returns these columns.</span></span> <span data-ttu-id="e2ceb-182">Además, lo importante que el parámetro de nombre de la s SqlDataSource `DeleteCommand` está establecido en `@ProductID`.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-182">Moreover, it s important that the parameter name in the SqlDataSource s `DeleteCommand` is set to `@ProductID`.</span></span> <span data-ttu-id="e2ceb-183">Si el `DataKeyNames` no está establecida la propiedad o el parámetro no se denomina `@ProductsID`, al hacer clic en el botón Eliminar provocará una devolución de datos, pero t ganado realmente eliminar cualquier registro.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-183">If the `DataKeyNames` property is not set or the parameter is not named `@ProductsID`, clicking the Delete button will cause a postback, but won t actually delete any record.</span></span>


<span data-ttu-id="e2ceb-184">Figura 5 se muestra gráficamente esta interacción.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-184">Figure 5 depicts this interaction graphically.</span></span> <span data-ttu-id="e2ceb-185">Vuelva a consultar el [examinando los eventos asociados con la inserción, actualización y eliminación](../editing-inserting-and-deleting-data/examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) tutorial para obtener una explicación más detallada de la cadena de eventos asociados con la inserción, actualización y eliminación de un control Web de datos.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-185">Refer back to the [Examining the Events Associated with Inserting, Updating, and Deleting](../editing-inserting-and-deleting-data/examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) tutorial for a more detailed discussion on the chain of events associated with inserting, updating, and deleting from a data Web control.</span></span>


![Al hacer clic en el botón Eliminar en el control GridView invoca el método de Delete() s SqlDataSource](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image5.gif)

<span data-ttu-id="e2ceb-187">**Figura 5**: Al hacer clic en el botón Eliminar en el control GridView se invoca la s SqlDataSource `Delete()` (método)</span><span class="sxs-lookup"><span data-stu-id="e2ceb-187">**Figure 5**: Clicking the Delete Button in the GridView Invokes the SqlDataSource s `Delete()` Method</span></span>


## <a name="step-2-automatically-generating-theinsertupdate-anddeletestatements"></a><span data-ttu-id="e2ceb-188">Paso 2: Generar automáticamente el`INSERT`,`UPDATE`, y`DELETE`instrucciones</span><span class="sxs-lookup"><span data-stu-id="e2ceb-188">Step 2: Automatically Generating the`INSERT`,`UPDATE`, and`DELETE`Statements</span></span>

<span data-ttu-id="e2ceb-189">Como paso 1 examinado, `INSERT`, `UPDATE`, y `DELETE` instrucciones SQL se pueden especificar a través de la ventana Propiedades o la sintaxis declarativa del control s.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-189">As Step 1 examined, `INSERT`, `UPDATE`, and `DELETE` SQL statements can be specified through the Properties window or the control s declarative syntax.</span></span> <span data-ttu-id="e2ceb-190">Sin embargo, este enfoque requiere que manualmente eliminamos las instrucciones SQL a mano, que puede resultar más monótonas y propensas a errores.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-190">However, this approach requires that we manually write out the SQL statements by hand, which can be monotonous and error-prone.</span></span> <span data-ttu-id="e2ceb-191">Afortunadamente, el Asistente para configurar orígenes de datos proporciona una opción para que la `INSERT`, `UPDATE`, y `DELETE` instrucciones generadas automáticamente cuando se usa el especificar columnas de una tabla de la pantalla de vista.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-191">Fortunately, the Configure Data Source wizard provides an option to have the `INSERT`, `UPDATE`, and `DELETE` statements automatically generated when using the Specify columns from a table of view screen.</span></span>

<span data-ttu-id="e2ceb-192">Permiten s explorar esta opción de generación automática.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-192">Let s explore this automatic generation option.</span></span> <span data-ttu-id="e2ceb-193">Agregar un DetailsView al diseñador en `InsertUpdateDelete.aspx` y establezca su `ID` propiedad `ManageProducts`.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-193">Add a DetailsView to the Designer in `InsertUpdateDelete.aspx` and set its `ID` property to `ManageProducts`.</span></span> <span data-ttu-id="e2ceb-194">A continuación, en la etiqueta inteligente de DetailsView s, optar por crear un nuevo origen de datos y crear un SqlDataSource denominado `ManageProductsDataSource`.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-194">Next, from the DetailsView s smart tag, choose to create a new data source and create a SqlDataSource named `ManageProductsDataSource`.</span></span>


<span data-ttu-id="e2ceb-195">[![Crear un nuevo SqlDataSource denominado ManageProductsDataSource](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image6.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="e2ceb-195">[![Create a New SqlDataSource Named ManageProductsDataSource](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image6.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image7.png)</span></span>

<span data-ttu-id="e2ceb-196">**Figura 6**: Crear un nuevo SqlDataSource denominado `ManageProductsDataSource` ([haga clic aquí para ver imagen en tamaño completo](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="e2ceb-196">**Figure 6**: Create a New SqlDataSource Named `ManageProductsDataSource` ([Click to view full-size image](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image8.png))</span></span>


<span data-ttu-id="e2ceb-197">Desde el Asistente para configurar origen de datos, optar por usar el `NORTHWINDConnectionString` connection string y haga clic en siguiente.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-197">From the Configure Data Source wizard, opt to use the `NORTHWINDConnectionString` connection string and click Next.</span></span> <span data-ttu-id="e2ceb-198">Desde la configuración de la pantalla de la instrucción Select, deje el especificar columnas en un botón de opción de tabla o vista seleccionado y elija el `Products` tabla en la lista desplegable.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-198">From the Configure the Select Statement screen, leave the Specify columns from a table or view radio button selected and pick the `Products` table from the drop-down list.</span></span> <span data-ttu-id="e2ceb-199">Seleccione el `ProductID`, `ProductName`, `UnitPrice`, y `Discontinued` columnas en la lista de la casilla de verificación.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-199">Select the `ProductID`, `ProductName`, `UnitPrice`, and `Discontinued` columns from the checkbox list.</span></span>


<span data-ttu-id="e2ceb-200">[![Uso de la tabla Products, devolver el ProductID, ProductName, UnitPrice y las columnas no incluidas](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image7.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="e2ceb-200">[![Using the Products Table, Return the ProductID, ProductName, UnitPrice, and Discontinued Columns](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image7.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image9.png)</span></span>

<span data-ttu-id="e2ceb-201">**Figura 7**: Mediante el `Products` de tabla, se devuelve el `ProductID`, `ProductName`, `UnitPrice`, y `Discontinued` columnas ([haga clic aquí para ver imagen en tamaño completo](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="e2ceb-201">**Figure 7**: Using the `Products` Table, Return the `ProductID`, `ProductName`, `UnitPrice`, and `Discontinued` Columns ([Click to view full-size image](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image10.png))</span></span>


<span data-ttu-id="e2ceb-202">Para generar automáticamente `INSERT`, `UPDATE`, y `DELETE` instrucciones basadas en la tabla seleccionada y las columnas, haga clic en el botón Opciones avanzadas y compruebe la generar `INSERT`, `UPDATE`, y `DELETE` casilla de verificación de las instrucciones.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-202">To automatically generate `INSERT`, `UPDATE`, and `DELETE` statements based on the selected table and columns, click the Advanced button and check the Generate `INSERT`, `UPDATE`, and `DELETE` statements checkbox.</span></span>


![Active la casilla de verificación de instrucciones generar INSERT, UPDATE y DELETE](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image8.gif)

<span data-ttu-id="e2ceb-204">**Figura 8**: Compruebe la generar `INSERT`, `UPDATE`, y `DELETE` instrucciones Checkbox</span><span class="sxs-lookup"><span data-stu-id="e2ceb-204">**Figure 8**: Check the Generate `INSERT`, `UPDATE`, and `DELETE` statements Checkbox</span></span>


<span data-ttu-id="e2ceb-205">Generate `INSERT`, `UPDATE`, y `DELETE` instrucciones casilla sólo estará activarse si la tabla seleccionada tiene una clave principal y la columna de clave principal (o columnas) se incluyen en la lista de columnas devueltas.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-205">The Generate `INSERT`, `UPDATE`, and `DELETE` statements checkbox will only be checkable if the table selected has a primary key and the primary key column (or columns) are included in the list of returned columns.</span></span> <span data-ttu-id="e2ceb-206">Casilla de verificación Usar simultaneidad optimista, que se convierte en seleccionable una vez Generate `INSERT`, `UPDATE`, y `DELETE` casilla de verificación de las instrucciones se han comprobado, se aumentan la `WHERE` cláusulas en resultante `UPDATE` y `DELETE` instrucciones para proporcionar control de simultaneidad optimista.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-206">The Use optimistic concurrency checkbox, which becomes selectable once the Generate `INSERT`, `UPDATE`, and `DELETE` statements checkbox has been checked, will augment the `WHERE` clauses in the resulting `UPDATE` and `DELETE` statements to provide optimistic concurrency control.</span></span> <span data-ttu-id="e2ceb-207">Por ahora, deje esta casilla desactivada; Examinaremos la simultaneidad optimista con el control SqlDataSource en el siguiente tutorial.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-207">For now, leave this checkbox unchecked; we'll examine optimistic concurrency with the SqlDataSource control in the next tutorial.</span></span>

<span data-ttu-id="e2ceb-208">Después de comprobar la generar `INSERT`, `UPDATE`, y `DELETE` casilla de verificación de las instrucciones, haga clic en Aceptar para volver a la pantalla Configurar instrucción Select, a continuación, haga clic en siguiente y, a continuación, finalice, para completar el Asistente para configurar orígenes de datos.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-208">After checking the Generate `INSERT`, `UPDATE`, and `DELETE` statements checkbox, click OK to return to the Configure Select Statement screen, then click Next, and then Finish, to complete the Configure Data Source wizard.</span></span> <span data-ttu-id="e2ceb-209">Al finalizar el asistente, Visual Studio agregará BoundFields a DetailsView para el `ProductID`, `ProductName`, y `UnitPrice` columnas y un CampoCasillaVerificación para la `Discontinued` columna.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-209">Upon completing the wizard, Visual Studio will add BoundFields to the DetailsView for the `ProductID`, `ProductName`, and `UnitPrice` columns and a CheckBoxField for the `Discontinued` column.</span></span> <span data-ttu-id="e2ceb-210">En la etiqueta inteligente s DetailsView, active la opción Habilitar paginación para que el usuario al visitar esta página puede recorrer los productos.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-210">From the DetailsView s smart tag, check the Enable Paging option so that the user visiting this page can step through the products.</span></span> <span data-ttu-id="e2ceb-211">Borrar también las operaciones de asignación DetailsView `Width` y `Height` propiedades.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-211">Also clear out the DetailsView s `Width` and `Height` properties.</span></span>

<span data-ttu-id="e2ceb-212">Observe que la etiqueta inteligente tiene las opciones Habilitar inserción, Habilitar edición y Habilitar eliminación disponibles.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-212">Notice that the smart tag has the Enable Inserting, Enable Editing, and Enable Deleting options available.</span></span> <span data-ttu-id="e2ceb-213">Esto es porque SqlDataSource contiene valores para su `InsertCommand`, `UpdateCommand`, y `DeleteCommand`, como se muestra en la siguiente sintaxis declarativa:</span><span class="sxs-lookup"><span data-stu-id="e2ceb-213">This is because the SqlDataSource contains values for its `InsertCommand`, `UpdateCommand`, and `DeleteCommand`, as the following declarative syntax shows:</span></span>

[!code-aspx[Main](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/samples/sample3.aspx)]

<span data-ttu-id="e2ceb-214">Tenga en cuenta cómo el control SqlDataSource ha tenido valores se establecen automáticamente para su `InsertCommand`, `UpdateCommand`, y `DeleteCommand` propiedades.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-214">Note how the SqlDataSource control has had values automatically set for its `InsertCommand`, `UpdateCommand`, and `DeleteCommand` properties.</span></span> <span data-ttu-id="e2ceb-215">El conjunto de columnas que se hace referenciado en el `InsertCommand` y `UpdateCommand` propiedades se basan en los de la `SELECT` instrucción.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-215">The set of columns referenced in the `InsertCommand` and `UpdateCommand` properties are based on those in the `SELECT` statement.</span></span> <span data-ttu-id="e2ceb-216">Es decir, en lugar de tener *cada* columna productos en el `InsertCommand` y `UpdateCommand`, hay solo las columnas especificadas en el `SelectCommand` (menos `ProductID`, que se omite porque se s un [ `IDENTITY` columna](http://www.sqlteam.com/item.asp?ItemID=102), cuyo valor no puede cambiarse cuando edita y que se asigna automáticamente al insertar).</span><span class="sxs-lookup"><span data-stu-id="e2ceb-216">That is, rather than having *every* Products column in the `InsertCommand` and `UpdateCommand`, there are only those columns specified in the `SelectCommand` (less `ProductID`, which is omitted because it s an [`IDENTITY` column](http://www.sqlteam.com/item.asp?ItemID=102), whose value cannot be changed when edited and which is automatically assigned when inserting).</span></span> <span data-ttu-id="e2ceb-217">Además, para cada parámetro en el `InsertCommand`, `UpdateCommand`, y `DeleteCommand` propiedades hay parámetros correspondientes en el `InsertParameters`, `UpdateParameters`, y `DeleteParameters` colecciones.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-217">Moreover, for each parameter in the `InsertCommand`, `UpdateCommand`, and `DeleteCommand` properties there are corresponding parameters in the `InsertParameters`, `UpdateParameters`, and `DeleteParameters` collections.</span></span>

<span data-ttu-id="e2ceb-218">Para activar las características de modificación de datos de DetailsView s, compruebe el Habilitar inserción, Habilitar edición y las opciones Habilitar eliminación en su etiqueta inteligente.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-218">To turn on the DetailsView s data modification features, check the Enable Inserting, Enable Editing, and Enable Deleting options in its smart tag.</span></span> <span data-ttu-id="e2ceb-219">Esto agrega un CommandField con su `ShowInsertButton`, `ShowEditButton`, y `ShowDeleteButton` propiedades establecidas en `true`.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-219">This adds a CommandField with its `ShowInsertButton`, `ShowEditButton`, and `ShowDeleteButton` properties set to `true`.</span></span>

<span data-ttu-id="e2ceb-220">Visite la página en un explorador y tenga en cuenta la edición, eliminación y nuevos botones que se incluyen en DetailsView.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-220">Visit the page in a browser and note the Edit, Delete, and New buttons included in the DetailsView.</span></span> <span data-ttu-id="e2ceb-221">Al hacer clic en el botón Editar convierte DetailsView en modo de edición, que muestra cada BoundField cuyo `ReadOnly` propiedad está establecida en `false` (valor predeterminado) como un cuadro de texto y CheckBoxField como una casilla de verificación.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-221">Clicking the Edit button turns the DetailsView into edit mode, which displays each BoundField whose `ReadOnly` property is set to `false` (the default) as a TextBox, and the CheckBoxField as a checkbox.</span></span>


<span data-ttu-id="e2ceb-222">[![Las operaciones de asignación DetailsView predeterminado de interfaz de edición](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image9.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="e2ceb-222">[![The DetailsView s Default Editing Interface](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image9.gif)](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image11.png)</span></span>

<span data-ttu-id="e2ceb-223">**Figura 9**: La interfaz de edición predeterminada de DetailsView s ([haga clic aquí para ver imagen en tamaño completo](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="e2ceb-223">**Figure 9**: The DetailsView s Default Editing Interface ([Click to view full-size image](inserting-updating-and-deleting-data-with-the-sqldatasource-cs/_static/image12.png))</span></span>


<span data-ttu-id="e2ceb-224">De forma similar, puede eliminar el producto seleccionado o agregar un nuevo producto en el sistema.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-224">Similarly, you can delete the currently selected product or add a new product to the system.</span></span> <span data-ttu-id="e2ceb-225">Puesto que la `InsertCommand` instrucción solo funciona con el `ProductName`, `UnitPrice`, y `Discontinued` columnas, las demás columnas tienen ya sea `NULL` o su valor predeterminado asignado por la base de datos con insert.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-225">Since the `InsertCommand` statement only works with the `ProductName`, `UnitPrice`, and `Discontinued` columns, the other columns have either `NULL` or their default value assigned by the database upon insert.</span></span> <span data-ttu-id="e2ceb-226">Al igual que con el origen ObjectDataSource, si la `InsertCommand` no tiene ninguna tabla de base de datos las columnas que no t permiten `NULL` s y don t tienen un valor predeterminado, se producirá un error SQL al intentar ejecutar el `INSERT` instrucción.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-226">Just like with the ObjectDataSource, if the `InsertCommand` is missing any database table columns that don t allow `NULL` s and don t have a default value, a SQL error will occur when attempting to execute the `INSERT` statement.</span></span>

> [!NOTE]
> <span data-ttu-id="e2ceb-227">La s DetailsView insertar y editar interfaces carecen de algún tipo de personalización o validación.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-227">The DetailsView s inserting and editing interfaces lack any sort of customization or validation.</span></span> <span data-ttu-id="e2ceb-228">Para agregar controles de validación o para personalizar las interfaces, deberá convertir la BoundFields TemplateFields.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-228">To add validation controls or to customize the interfaces, you need to convert the BoundFields to TemplateFields.</span></span> <span data-ttu-id="e2ceb-229">Hacer referencia a la [agregar controles de validación a las Interfaces de inserción y edición](../editing-inserting-and-deleting-data/adding-validation-controls-to-the-editing-and-inserting-interfaces-cs.md) y [personalizar la interfaz de modificación de datos](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) tutoriales para obtener más información.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-229">Refer to the [Adding Validation Controls to the Editing and Inserting Interfaces](../editing-inserting-and-deleting-data/adding-validation-controls-to-the-editing-and-inserting-interfaces-cs.md) and [Customizing the Data Modification Interface](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) tutorials for more information.</span></span>


<span data-ttu-id="e2ceb-230">Además, tenga en cuenta que para actualizar y eliminar, DetailsView usa el producto actual s `DataKey` valor, que solo está presente si el `DataKeyNames` se configura la propiedad.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-230">Also, keep in mind that for updating and deleting, the DetailsView uses the current product s `DataKey` value, which is only present if the `DataKeyNames` property is configured.</span></span> <span data-ttu-id="e2ceb-231">Si edita o elimina parece que no tienen ningún efecto, asegúrese de que el `DataKeyNames` se establece la propiedad.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-231">If editing or deleting appears to have no effect, ensure that the `DataKeyNames` property is set.</span></span>

## <a name="limitations-of-automatically-generating-sql-statements"></a><span data-ttu-id="e2ceb-232">Limitaciones de generación automática de instrucciones SQL</span><span class="sxs-lookup"><span data-stu-id="e2ceb-232">Limitations of Automatically Generating SQL Statements</span></span>

<span data-ttu-id="e2ceb-233">Desde la generar `INSERT`, `UPDATE`, y `DELETE` opción extractos solo está disponible al seleccionar las columnas de una tabla, para aquellas consultas más complejas tendrá que escribir su propio `INSERT`, `UPDATE`, y `DELETE` instrucciones como hicimos en el paso 1.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-233">Since the Generate `INSERT`, `UPDATE`, and `DELETE` statements option is only available when picking columns from a table, for more complex queries you will have to write your own `INSERT`, `UPDATE`, and `DELETE` statements like we did in Step 1.</span></span> <span data-ttu-id="e2ceb-234">Normalmente, SQL `SELECT` usan instrucciones `JOIN` s para devolver datos de una o varias tablas de búsqueda para la visualización (como volver a poner el `Categories` tabla s `CategoryName` campo al mostrar información del producto).</span><span class="sxs-lookup"><span data-stu-id="e2ceb-234">Commonly, SQL `SELECT` statements use `JOIN` s to bring back data from one or more lookup tables for display purposes (such as bringing back the `Categories` table s `CategoryName` field when displaying product information).</span></span> <span data-ttu-id="e2ceb-235">Al mismo tiempo, deseamos permitir al usuario editar, actualizar o insertar datos en la tabla principal (`Products`, en este caso).</span><span class="sxs-lookup"><span data-stu-id="e2ceb-235">At the same time, we might want to allow the user to edit, update, or insert data into the core table (`Products`, in this case).</span></span>

<span data-ttu-id="e2ceb-236">Mientras el `INSERT`, `UPDATE`, y `DELETE` instrucciones puede especificarse manualmente, considere la siguiente sugerencia para ahorrar tiempo.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-236">While the `INSERT`, `UPDATE`, and `DELETE` statements can be entered manually, consider the following time-saving tip.</span></span> <span data-ttu-id="e2ceb-237">Configurar inicialmente SqlDataSource para que vuelva extrae datos de únicamente la `Products` tabla.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-237">Initially setup the SqlDataSource so that it pulls back data just from the `Products` table.</span></span> <span data-ttu-id="e2ceb-238">Utilice el Configurar origen de datos asistente s especificar columnas de una tabla o vista de pantalla para que se puede generar automáticamente el `INSERT`, `UPDATE`, y `DELETE` instrucciones.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-238">Use the Configure Data Source wizard s Specify columns from a table or view screen so that you can automatically generate the `INSERT`, `UPDATE`, and `DELETE` statements.</span></span> <span data-ttu-id="e2ceb-239">A continuación, después de completar al asistente, elija Configurar el SelectQuery desde la ventana Propiedades (o, como alternativa, vuelva a la opción de procedimiento almacenado o el Asistente para configurar origen de datos, pero la especificación de una instrucción SQL personalizada).</span><span class="sxs-lookup"><span data-stu-id="e2ceb-239">Then, after completing the wizard, choose to configure the SelectQuery from the Properties window (or, alternatively, go back to the Configure Data Source wizard, but use the Specify a custom SQL statement or stored procedure option).</span></span> <span data-ttu-id="e2ceb-240">A continuación, actualice el `SELECT` instrucción para incluir el `JOIN` sintaxis.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-240">Then update the `SELECT` statement to include the `JOIN` syntax.</span></span> <span data-ttu-id="e2ceb-241">Esta técnica ofrece las ventajas de ahorro de tiempo de las instrucciones SQL generadas automáticamente y permite más personalizada `SELECT` instrucción.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-241">This technique offers the time-saving benefits of the automatically generated SQL statements and allows for a more customized `SELECT` statement.</span></span>

<span data-ttu-id="e2ceb-242">Otra limitación de generar automáticamente el `INSERT`, `UPDATE`, y `DELETE` instrucciones es que las columnas de la `INSERT` y `UPDATE` instrucciones se basan en las columnas devueltas por la `SELECT` instrucción.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-242">Another limitation of automatically generating the `INSERT`, `UPDATE`, and `DELETE` statements is that the columns in the `INSERT` and `UPDATE` statements are based on the columns returned by the `SELECT` statement.</span></span> <span data-ttu-id="e2ceb-243">Podemos necesitamos actualizar o insertar los campos de más o menos, sin embargo.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-243">We may need to update or insert more or fewer fields, however.</span></span> <span data-ttu-id="e2ceb-244">Por ejemplo, en el ejemplo del paso 2, quizás queremos tener la `UnitPrice` BoundField ser de solo lectura.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-244">For example, in the example from Step 2, maybe we want to have the `UnitPrice` BoundField be read-only.</span></span> <span data-ttu-id="e2ceb-245">En ese caso, t no debe aparecer en el `UpdateCommand`.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-245">In that case, it shouldn t appear in the `UpdateCommand`.</span></span> <span data-ttu-id="e2ceb-246">O quizás deseamos establecer el valor de un campo de tabla que no aparece en el control GridView.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-246">Or we may want to set the value of a table field that does not appear in the GridView.</span></span> <span data-ttu-id="e2ceb-247">Por ejemplo, al agregar un nuevo registro es posible que queramos la `QuantityPerUnit` valor establecido en la lista de tareas.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-247">For example, when adding a new record we may want the `QuantityPerUnit` value set to TODO .</span></span>

<span data-ttu-id="e2ceb-248">Si se requieren estas personalizaciones, deberá realizar manualmente, ya sea a través de la ventana Propiedades, especifique una instrucción SQL personalizada o la opción de procedimiento almacenado en el asistente o a través de la sintaxis declarativa.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-248">If such customizations are required, you need to make them manually, either through the Properties window, the Specify a custom SQL statement or stored procedure option in the wizard, or via the declarative syntax.</span></span>

> [!NOTE]
> <span data-ttu-id="e2ceb-249">Al agregar parámetros que no tienen campos correspondientes en los datos de control Web, tenga en cuenta que tendrá estos valores de parámetros que se pueden asignar valores de alguna manera.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-249">When adding parameters that do not have corresponding fields in the data Web control, keep in mind that these parameters values will need to be assigned values in some manner.</span></span> <span data-ttu-id="e2ceb-250">Estos valores pueden ser: codificado de forma rígida directamente en el `InsertCommand` o `UpdateCommand`; pueden proceder de algún origen predefinido (la cadena de consulta, el estado de sesión, controles Web en la página y así sucesivamente); o se puede asignar mediante programación, como hemos visto en el tutorial anterior.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-250">These values can be: hard-coded directly in the `InsertCommand` or `UpdateCommand`; can come from some pre-defined source (the querystring, session state, Web controls on the page, and so on); or can be assigned programmatically, as we saw in the preceding tutorial.</span></span>


## <a name="summary"></a><span data-ttu-id="e2ceb-251">Resumen</span><span class="sxs-lookup"><span data-stu-id="e2ceb-251">Summary</span></span>

<span data-ttu-id="e2ceb-252">En el orden de los datos de que controles Web para utilizar sus integradas de inserción, edición y eliminación de recursos, el control de origen de datos se enlazan a debe ofrecer esta funcionalidad.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-252">In order for the data Web controls to utilize their built-in inserting, editing, and deleting capabilities, the data source control they are bound to must offer such functionality.</span></span> <span data-ttu-id="e2ceb-253">Para SqlDataSource, esto significa que `INSERT`, `UPDATE`, y `DELETE` instrucciones SQL deben estar asignadas a la `InsertCommand`, `UpdateCommand`, y `DeleteCommand` propiedades.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-253">For the SqlDataSource, this means that `INSERT`, `UPDATE`, and `DELETE` SQL statements must be assigned to the `InsertCommand`, `UpdateCommand`, and `DeleteCommand` properties.</span></span> <span data-ttu-id="e2ceb-254">Estas propiedades y las colecciones de parámetros correspondientes, pueden agregar manualmente o se genera automáticamente mediante el Asistente para configurar orígenes de datos.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-254">These properties, and the corresponding parameters collections, can be added manually or generated automatically through the Configure Data Source wizard.</span></span> <span data-ttu-id="e2ceb-255">En este tutorial se examinan ambas técnicas.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-255">In this tutorial we examined both techniques.</span></span>

<span data-ttu-id="e2ceb-256">Examinamos utiliza simultaneidad optimista con ObjectDataSource en el [implementar simultaneidad optimista](../editing-inserting-and-deleting-data/implementing-optimistic-concurrency-cs.md) tutorial.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-256">We examined using optimistic concurrency with the ObjectDataSource in the [Implementing Optimistic Concurrency](../editing-inserting-and-deleting-data/implementing-optimistic-concurrency-cs.md) tutorial.</span></span> <span data-ttu-id="e2ceb-257">El control SqlDataSource también proporciona compatibilidad con la simultaneidad optimista.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-257">The SqlDataSource control also provides optimistic concurrency support.</span></span> <span data-ttu-id="e2ceb-258">Como se indicó en el paso 2, cuando se genera automáticamente el `INSERT`, `UPDATE`, y `DELETE` instrucciones, el asistente ofrece una opción de usar simultaneidad optimista.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-258">As noted in Step 2, when automatically generating the `INSERT`, `UPDATE`, and `DELETE` statements, the wizard offers a Use optimistic concurrency option.</span></span> <span data-ttu-id="e2ceb-259">Como veremos en el siguiente tutorial, usar simultaneidad optimista con SqlDataSource modifica el `WHERE` cláusulas en el `UPDATE` y `DELETE` instrucciones para asegurarse de que los valores de las demás columnas conocemos t cambiado desde que los datos por última vez se muestra en la página.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-259">As we'll see in the next tutorial, using optimistic concurrency with the SqlDataSource modifies the `WHERE` clauses in the `UPDATE` and `DELETE` statements to ensure that the values for the other columns haven t changed since the data was last displayed on the page.</span></span>

<span data-ttu-id="e2ceb-260">Feliz programación.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-260">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="e2ceb-261">Acerca del autor</span><span class="sxs-lookup"><span data-stu-id="e2ceb-261">About the Author</span></span>

<span data-ttu-id="e2ceb-262">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor de siete libros sobre ASP/ASP.NET y fundador de [4GuysFromRolla.com](http://www.4guysfromrolla.com), trabaja con tecnologías Web de Microsoft desde 1998.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-262">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="e2ceb-263">Scott trabaja como consultor independiente, instructor y escritor.</span><span class="sxs-lookup"><span data-stu-id="e2ceb-263">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="e2ceb-264">Su último libro es [*SAM enseñar a usted mismo ASP.NET 2.0 en 24 horas*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="e2ceb-264">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="e2ceb-265">Puede ponerse en [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="e2ceb-265">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="e2ceb-266">o a través de su blog, que puede encontrarse en [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="e2ceb-266">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="e2ceb-267">[Anterior](using-parameterized-queries-with-the-sqldatasource-cs.md)
> [Siguiente](implementing-optimistic-concurrency-with-the-sqldatasource-cs.md)</span><span class="sxs-lookup"><span data-stu-id="e2ceb-267">[Previous](using-parameterized-queries-with-the-sqldatasource-cs.md)
[Next](implementing-optimistic-concurrency-with-the-sqldatasource-cs.md)</span></span>
